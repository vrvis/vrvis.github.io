(self.webpackChunkvis_for_draco_kb=self.webpackChunkvis_for_draco_kb||[]).push([[179],{881:(pn,Ue,Me)=>{"use strict";var Q={};Me.r(Q),Me.d(Q,{ASSIGN_WEIGHTS:()=>y$e,DEFINE:()=>GZ,GENERATE:()=>m$e,HARD:()=>FS,HARD_INTEGRITY:()=>_$e,OPTIMIZE:()=>v$e,OUTPUT:()=>b$e,SOFT:()=>LS,TOPK_LUA:()=>g$e,WEIGHTS:()=>wL});var ie={};Me.r(ie),Me.d(ie,{JsonPatchError:()=>zr,_areEquals:()=>Hw,applyOperation:()=>bg,applyPatch:()=>ik,applyReducer:()=>Eze,deepClone:()=>Mze,getValueByPointer:()=>nk,validate:()=>IJ,validator:()=>rk});var xe={};Me.r(xe),Me.d(xe,{compare:()=>Rze,generate:()=>QL,observe:()=>Pze,unobserve:()=>Tze});var T={};Me.r(T),Me.d(T,{aggregate:()=>Ch,bin:()=>S$,collect:()=>k$,compare:()=>sne,countpattern:()=>A$,cross:()=>O$,density:()=>D$,dotbin:()=>P$,expression:()=>hne,extent:()=>R$,facet:()=>Hk,field:()=>pne,filter:()=>F$,flatten:()=>L$,fold:()=>N$,formula:()=>$$,generate:()=>gne,impute:()=>B$,joinaggregate:()=>z$,kde:()=>H$,key:()=>mne,load:()=>_ne,lookup:()=>U$,multiextent:()=>yne,multivalues:()=>vne,params:()=>bne,pivot:()=>j$,prefacet:()=>wne,project:()=>W$,proxy:()=>Cne,quantile:()=>G$,relay:()=>Mne,sample:()=>q$,sequence:()=>Y$,sieve:()=>xne,subflow:()=>I$,timeunit:()=>X$,tupleindex:()=>Sne,values:()=>kne,window:()=>K$});var re={};Me.r(re),Me.d(re,{interpolate:()=>Eh,interpolateArray:()=>CVe,interpolateBasis:()=>WY,interpolateBasisClosed:()=>GY,interpolateCubehelix:()=>mPe,interpolateCubehelixLong:()=>MF,interpolateDate:()=>tie,interpolateDiscrete:()=>WVe,interpolateHcl:()=>ZVe,interpolateHclLong:()=>QVe,interpolateHsl:()=>qVe,interpolateHslLong:()=>YVe,interpolateHue:()=>GVe,interpolateLab:()=>KVe,interpolateNumber:()=>Rl,interpolateNumberArray:()=>a3,interpolateObject:()=>nie,interpolateRgb:()=>ew,interpolateRgbBasis:()=>XY,interpolateRgbBasisClosed:()=>MDe,interpolateRound:()=>_C,interpolateString:()=>lF,interpolateTransformCss:()=>RY,interpolateTransformSvg:()=>IY,interpolateZoom:()=>MX,piecewise:()=>_3,quantize:()=>JVe});var B={};Me.r(B),Me.d(B,{bound:()=>Hoe,identifier:()=>HB,mark:()=>Uoe,overlap:()=>joe,render:()=>Koe,viewlayout:()=>nse});var E={};Me.r(E),Me.d(E,{axisticks:()=>ise,datajoin:()=>rse,encode:()=>ose,legendentries:()=>sse,linkpath:()=>VB,pie:()=>UB,scale:()=>fse,sortitems:()=>gse,stack:()=>WB});var M={};Me.r(M),Me.d(M,{contour:()=>Mz,geojson:()=>Sz,geopath:()=>kz,geopoint:()=>Az,geoshape:()=>Oz,graticule:()=>Dz,heatmap:()=>Tz,isocontour:()=>bz,kde2d:()=>Cz,projection:()=>Iae});var g={};Me.r(g),Me.d(g,{force:()=>Rz});var m={};Me.r(m),Me.d(m,{nest:()=>Vz,pack:()=>jz,partition:()=>Gz,stratify:()=>qz,tree:()=>Xz,treelinks:()=>Kz,treemap:()=>Qz});var _={};Me.r(_),Me.d(_,{label:()=>c5});var p={};Me.r(p),Me.d(p,{loess:()=>u5,regression:()=>f5});var v={};Me.r(v),Me.d(v,{voronoi:()=>H5});var w={};Me.r(w),Me.d(w,{wordcloud:()=>U5});var x={};Me.r(x),Me.d(x,{crossfilter:()=>j5,resolvefilter:()=>W5});var A={};Me.r(A),Me.d(A,{Bounds:()=>oo,CanvasHandler:()=>NC,CanvasRenderer:()=>RA,DATE:()=>ba,DAY:()=>Ms,DAYOFYEAR:()=>Au,Dataflow:()=>Zy,Debug:()=>$J,Error:()=>tN,EventStream:()=>Pk,Gradient:()=>fre,GroupItem:()=>fA,HOURS:()=>el,Handler:()=>Fh,Info:()=>NJ,Item:()=>dA,MILLISECONDS:()=>wc,MINUTES:()=>tl,MONTH:()=>Cs,Marks:()=>il,MultiPulse:()=>e$,None:()=>LJ,Operator:()=>sr,Parameters:()=>Tk,Pulse:()=>wh,QUARTER:()=>va,RenderType:()=>Nh,Renderer:()=>Lu,ResourceLoader:()=>G3,SECONDS:()=>Ll,SVGHandler:()=>wB,SVGRenderer:()=>AB,SVGStringRenderer:()=>DB,Scenegraph:()=>mB,TIME_UNITS:()=>xN,Transform:()=>Qe,View:()=>rue,WEEK:()=>yo,Warn:()=>nN,YEAR:()=>Jo,accessor:()=>ma,accessorFields:()=>ys,accessorName:()=>Hr,array:()=>Ht,ascending:()=>ck,bandwidthNRD:()=>l$,bin:()=>Hte,bootstrapCI:()=>Vte,boundClip:()=>Doe,boundContext:()=>AC,boundItem:()=>gB,boundMark:()=>Wre,boundStroke:()=>tf,changeset:()=>Sg,clampRange:()=>KJ,codegenExpression:()=>ece,compare:()=>aN,constant:()=>ws,cumulativeLogNormal:()=>p$,cumulativeNormal:()=>Nk,cumulativeUniform:()=>y$,dayofyear:()=>Cee,debounce:()=>lN,defaultLocale:()=>zN,definition:()=>Rte,densityLogNormal:()=>h$,densityNormal:()=>c$,densityUniform:()=>_$,domChild:()=>Ca,domClear:()=>Sc,domCreate:()=>Ih,domFind:()=>_B,dotbin:()=>Ute,error:()=>nt,expressionFunction:()=>so,extend:()=>Xn,extent:()=>Eu,extentIndex:()=>ZJ,falsy:()=>hh,fastmap:()=>$y,field:()=>_a,flush:()=>QJ,font:()=>xA,fontFamily:()=>RC,fontSize:()=>Fu,format:()=>xk,formatLocale:()=>Ck,formats:()=>YN,hasOwnProperty:()=>bn,id:()=>Vw,identity:()=>vs,inferType:()=>gte,inferTypes:()=>mte,ingest:()=>Li,inherits:()=>St,inrange:()=>By,interpolate:()=>I3,interpolateColors:()=>sA,interpolateRange:()=>Xie,intersect:()=>Soe,intersectBoxLine:()=>lv,intersectPath:()=>J3,intersectPoint:()=>eB,intersectRule:()=>Dre,isArray:()=>ot,isBoolean:()=>ph,isDate:()=>gh,isFunction:()=>Yn,isIterable:()=>JJ,isNumber:()=>Xi,isObject:()=>jt,isRegExp:()=>eee,isString:()=>zt,isTuple:()=>Ak,key:()=>cN,lerp:()=>tee,lineHeight:()=>Ph,loader:()=>Ek,locale:()=>fte,logger:()=>iN,lruCache:()=>nee,markup:()=>kB,merge:()=>iee,mergeConfig:()=>Ly,multiLineOffset:()=>fB,one:()=>Fy,pad:()=>ree,panLinear:()=>jJ,panLog:()=>WJ,panPow:()=>GJ,panSymlog:()=>qJ,parse:()=>Mtt,parseExpression:()=>e4,parseSelector:()=>Qh,path:()=>QE,pathCurves:()=>z3,pathEqual:()=>Toe,pathParse:()=>ov,pathRectangle:()=>vre,pathRender:()=>MC,pathSymbols:()=>yre,pathTrail:()=>bre,peek:()=>pi,point:()=>SA,projection:()=>vz,quantileLogNormal:()=>g$,quantileNormal:()=>$k,quantileUniform:()=>v$,quantiles:()=>s$,quantizeInterpolator:()=>Kie,quarter:()=>YJ,quartiles:()=>a$,random:()=>Nl,randomInteger:()=>zHe,randomKDE:()=>d$,randomLCG:()=>BHe,randomLogNormal:()=>Wte,randomMixture:()=>Gte,randomNormal:()=>u$,randomUniform:()=>qte,read:()=>bte,regressionConstant:()=>b$,regressionExp:()=>Xte,regressionLinear:()=>w$,regressionLoess:()=>ene,regressionLog:()=>Yte,regressionPoly:()=>Zte,regressionPow:()=>Kte,regressionQuad:()=>C$,renderModule:()=>NA,repeat:()=>Uw,resetDefaultLocale:()=>R4e,resetSVGClipId:()=>Cre,resetSVGDefIds:()=>i9e,responseType:()=>vte,runtimeContext:()=>$ce,sampleCurve:()=>zk,sampleLogNormal:()=>f$,sampleNormal:()=>Lk,sampleUniform:()=>m$,scale:()=>ki,sceneEqual:()=>PB,sceneFromJSON:()=>qre,scenePickVisit:()=>vA,sceneToJSON:()=>Gre,sceneVisit:()=>xc,sceneZOrder:()=>tB,scheme:()=>F3,serializeXML:()=>goe,setRandom:()=>NHe,span:()=>jw,splitAccessPath:()=>xu,stringValue:()=>kt,textMetrics:()=>Ec,timeBin:()=>Hee,timeFloor:()=>Oee,timeFormatLocale:()=>sC,timeInterval:()=>qy,timeOffset:()=>Pee,timeSequence:()=>Fee,timeUnitSpecifier:()=>wee,timeUnits:()=>SN,toBoolean:()=>uN,toDate:()=>dN,toNumber:()=>bs,toSet:()=>bc,toString:()=>fN,transform:()=>Ite,transforms:()=>Qy,truncate:()=>oee,truthy:()=>Il,tupleid:()=>wn,typeParsers:()=>WN,utcFloor:()=>Dee,utcInterval:()=>Yy,utcOffset:()=>Ree,utcSequence:()=>Lee,utcdayofyear:()=>Eee,utcquarter:()=>XJ,utcweek:()=>See,version:()=>xtt,visitArray:()=>mh,week:()=>Mee,writeConfig:()=>Ny,zero:()=>fh,zoomLinear:()=>rN,zoomLog:()=>oN,zoomPow:()=>lk,zoomSymlog:()=>sN});var R={};Me.r(R),Me.d(R,{accessPathDepth:()=>jv,accessPathWithDatum:()=>_H,compile:()=>Zct,contains:()=>fi,deepEqual:()=>Yu,deleteNestedProperty:()=>kD,duplicate:()=>In,entries:()=>ep,every:()=>hH,fieldIntersection:()=>mH,flatAccessWithDatum:()=>dde,getFirstDefined:()=>Kr,hasIntersection:()=>pH,hash:()=>di,internalField:()=>pde,isBoolean:()=>$1,isEmpty:()=>nr,isEqual:()=>Vtt,isInternalField:()=>gde,isNullOrFalse:()=>fH,isNumeric:()=>AD,keys:()=>ft,logicalExpr:()=>B1,mergeDeep:()=>cde,never:()=>lde,normalize:()=>Xhe,normalizeAngle:()=>H1,omit:()=>Ta,pick:()=>Uv,prefixGenerator:()=>gH,removePathFromField:()=>yH,replaceAll:()=>lm,replacePathInField:()=>ql,resetIdCounter:()=>jtt,setEqual:()=>ude,some:()=>am,stringify:()=>dr,titleCase:()=>z1,unique:()=>Xu,uniqueId:()=>hde,vals:()=>os,varName:()=>Er,version:()=>eut});var U={};function L(e){return"function"==typeof e}function W(e){const n=e(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}Me.r(U),Me.d(U,{carbong10:()=>Zut,carbong100:()=>Jut,carbong90:()=>Qut,carbonwhite:()=>Kut,dark:()=>wut,excel:()=>Cut,fivethirtyeight:()=>Eut,ggplot2:()=>Sut,googlecharts:()=>$ut,latimes:()=>Dut,powerbi:()=>qut,quartz:()=>Tut,urbaninstitute:()=>Nut,version:()=>edt,vox:()=>Put});const H=W(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function P(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class ${constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(L(i))try{i()}catch(o){t=o instanceof H?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{N(o)}catch(s){t=t??[],s instanceof H?t=[...t,...s.errors]:t.push(s)}}if(t)throw new H(t)}}add(t){var n;if(t&&t!==this)if(this.closed)N(t);else{if(t instanceof $){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&P(n,t)}remove(t){const{_finalizers:n}=this;n&&P(n,t),t instanceof $&&t._removeParent(this)}}$.EMPTY=(()=>{const e=new $;return e.closed=!0,e})();const X=$.EMPTY;function V(e){return e instanceof $||e&&"closed"in e&&L(e.remove)&&L(e.add)&&L(e.unsubscribe)}function N(e){L(e)?e():e.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},G={setTimeout(e,t,...n){const{delegate:i}=G;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=G;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function D(e){G.setTimeout(()=>{const{onUnhandledError:t}=te;if(!t)throw e;t(e)})}function Y(){}const ee=we("C",void 0,void 0);function we(e,t,n){return{kind:e,value:t,error:n}}let ke=null;function Ce(e){if(te.useDeprecatedSynchronousErrorHandling){const t=!ke;if(t&&(ke={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:i}=ke;if(ke=null,n)throw i}}else e()}class Te extends ${constructor(t){super(),this.isStopped=!1,t?(this.destination=t,V(t)&&t.add(this)):this.destination=Pt}static create(t,n,i){return new Dt(t,n,i)}next(t){this.isStopped?lt(function _e(e){return we("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?lt(function fe(e){return we("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?lt(ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function et(e,t){return Le.call(e,t)}class Bt{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){Lt(i)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){Lt(i)}else Lt(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Lt(n)}}}class Dt extends Te{constructor(t,n,i){let r;if(super(),L(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&te.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&et(t.next,o),error:t.error&&et(t.error,o),complete:t.complete&&et(t.complete,o)}):r=t}this.destination=new Bt(r)}}function Lt(e){te.useDeprecatedSynchronousErrorHandling?function We(e){te.useDeprecatedSynchronousErrorHandling&&ke&&(ke.errorThrown=!0,ke.error=e)}(e):D(e)}function lt(e,t){const{onStoppedNotification:n}=te;n&&G.setTimeout(()=>n(e,t))}const Pt={closed:!0,next:Y,error:function He(e){throw e},complete:Y},ct="function"==typeof Symbol&&Symbol.observable||"@@observable";function Vt(e){return e}function Zt(e){return 0===e.length?Vt:1===e.length?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}let dt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function Gi(e){return e&&e instanceof Te||function Di(e){return e&&L(e.next)&&L(e.error)&&L(e.complete)}(e)&&V(e)}(n)?n:new Dt(n,i,r);return Ce(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=Vn(i))((r,o)=>{const s=new Dt({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[ct](){return this}pipe(...n){return Zt(n)(this)}toPromise(n){return new(n=Vn(n))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=t=>new e(t),e})();function Vn(e){var t;return null!==(t=e??te.Promise)&&void 0!==t?t:Promise}const hr=W(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Yt=(()=>{class e extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new Je(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new hr}next(n){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Ce(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?X:(this.currentObservers=null,o.push(n),new $(()=>{this.currentObservers=null,P(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new dt;return n.source=this,n}}return e.create=(t,n)=>new Je(t,n),e})();class Je extends Yt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,t)}error(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==i?i:X}}function Tt(e){return L(e?.lift)}function pt(e){return t=>{if(Tt(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qt(e,t,n,i,r){return new ni(e,t,n,i,r)}class ni extends Te{constructor(t,n,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function xt(e,t){return pt((n,i)=>{let r=0;n.subscribe(Qt(i,o=>{i.next(e.call(t,o,r++))}))})}function vl(e){return this instanceof vl?(this.v=e,this):new vl(e)}function Ym(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(f){i[f]&&(r[f]=function(h){return new Promise(function(y,b){o.push([f,h,y,b])>1||a(f,h)})})}function a(f,h){try{!function l(f){f.value instanceof vl?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}(i[f](h))}catch(y){d(o[0][3],y)}}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function je(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function hd(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Tf=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ba(e){return L(e?.then)}function Ap(e){return L(e[ct])}function Km(e){return Symbol.asyncIterator&&L(e?.[Symbol.asyncIterator])}function Zm(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Pf=function Eb(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function wl(e){return L(e?.[Pf])}function Ar(e){return Ym(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:i,done:r}=yield vl(n.read());if(r)return yield vl(void 0);yield yield vl(i)}}finally{n.releaseLock()}})}function Rf(e){return L(e?.getReader)}function Ti(e){if(e instanceof dt)return e;if(null!=e){if(Ap(e))return function Op(e){return new dt(t=>{const n=e[ct]();if(L(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Tf(e))return function Ps(e){return new dt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Ba(e))return function Qm(e){return new dt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,D)})}(e);if(Km(e))return Jm(e);if(wl(e))return function Sb(e){return new dt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Rf(e))return function e_(e){return Jm(Ar(e))}(e)}throw Zm(e)}function Jm(e){return new dt(t=>{(function Wn(e,t){var n,i,r,o;return function Mp(e,t,n,i){return new(n||(n=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):function r(o){return o instanceof n?o:new n(function(s){s(o)})}(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=je(e);!(i=yield n.next()).done;)if(t.next(i.value),t.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function za(e,t,n,i=0,r=!1){const o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function Ir(e,t,n=1/0){return L(t)?Ir((i,r)=>xt((o,s)=>t(i,o,r,s))(Ti(e(i,r))),n):("number"==typeof t&&(n=t),pt((i,r)=>function kb(e,t,n,i,r,o,s,a){const l=[];let c=0,u=0,d=!1;const f=()=>{d&&!l.length&&!c&&t.complete()},h=b=>c<i?y(b):l.push(b),y=b=>{o&&t.next(b),c++;let C=!1;Ti(n(b,u++)).subscribe(Qt(t,k=>{r?.(k),o?h(k):t.next(k)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){const k=l.shift();s?za(t,s,()=>y(k)):y(k)}f()}catch(k){t.error(k)}}))};return e.subscribe(Qt(t,h,()=>{d=!0,f()})),()=>{a?.()}}(i,r,e,n)))}function nu(e=1/0){return Ir(Vt,e)}const la=new dt(e=>e.complete());function n_(e){return e&&L(e.schedule)}function Dp(e){return e[e.length-1]}function iu(e){return L(Dp(e))?e.pop():void 0}function pd(e){return n_(Dp(e))?e.pop():void 0}function i_(e,t=0){return pt((n,i)=>{n.subscribe(Qt(i,r=>za(i,e,()=>i.next(r),t),()=>za(i,e,()=>i.complete(),t),r=>za(i,e,()=>i.error(r),t)))})}function gn(e,t=0){return pt((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function mi(e,t){if(!e)throw new Error("Iterable cannot be null");return new dt(n=>{za(n,t,()=>{const i=e[Symbol.asyncIterator]();za(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function J(e,t){return t?function hi(e,t){if(null!=e){if(Ap(e))return function li(e,t){return Ti(e).pipe(gn(t),i_(t))}(e,t);if(Tf(e))return function en(e,t){return new dt(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}(e,t);if(Ba(e))return function Rt(e,t){return Ti(e).pipe(gn(t),i_(t))}(e,t);if(Km(e))return mi(e,t);if(wl(e))return function un(e,t){return new dt(n=>{let i;return za(n,t,()=>{i=e[Pf](),za(n,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void n.error(s)}o?n.complete():n.next(r)},0,!0)}),()=>L(i?.return)&&i.return()})}(e,t);if(Rf(e))return function ci(e,t){return mi(Ar(e),t)}(e,t)}throw Zm(e)}(e,t):Ti(e)}function Pi(...e){const t=pd(e),n=function Ab(e,t){return"number"==typeof Dp(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?Ti(i[0]):nu(n)(J(i,t)):la}function Ut(e={}){const{connector:t=(()=>new Yt),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return o=>{let s,a,l,c=0,u=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=l=void 0,u=d=!1},y=()=>{const b=s;h(),b?.unsubscribe()};return pt((b,C)=>{c++,!d&&!u&&f();const k=l=l??t();C.add(()=>{c--,0===c&&!d&&!u&&(a=Ob(y,r))}),k.subscribe(C),!s&&c>0&&(s=new Dt({next:O=>k.next(O),error:O=>{d=!0,f(),a=Ob(h,n,O),k.error(O)},complete:()=>{u=!0,f(),a=Ob(h,i),k.complete()}}),Ti(b).subscribe(s))})(o)}}function Ob(e,t,...n){if(!0===t)return void e();if(!1===t)return;const i=new Dt({next:()=>{i.unsubscribe(),e()}});return Ti(t(...n)).subscribe(i)}function qi(e){for(let t in e)if(e[t]===qi)return t;throw Error("Could not find renamed property on target object.")}function Db(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Yi(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Yi).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Tb(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const lP=qi({__forward_ref__:qi});function $i(e){return e.__forward_ref__=$i,e.toString=function(){return Yi(this())},e}function On(e){return Pb(e)?e():e}function Pb(e){return"function"==typeof e&&e.hasOwnProperty(lP)&&e.__forward_ref__===$i}class at extends Error{constructor(t,n){super(function r_(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function Fn(e){return"string"==typeof e?e:null==e?"":String(e)}function o_(e,t){throw new at(-201,!1)}function as(e,t){null==e&&function Mi(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,e,null,"!=")}function Nt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Rn(e){return{providers:e.providers||[],imports:e.imports||[]}}function s_(e){return Ib(e,a_)||Ib(e,AM)}function Ib(e,t){return e.hasOwnProperty(t)?e[t]:null}function kM(e){return e&&(e.hasOwnProperty(Fb)||e.hasOwnProperty(Rp))?e[Fb]:null}const a_=qi({\u0275prov:qi}),Fb=qi({\u0275inj:qi}),AM=qi({ngInjectableDef:qi}),Rp=qi({ngInjectorDef:qi});var Mn=(()=>((Mn=Mn||{})[Mn.Default=0]="Default",Mn[Mn.Host=1]="Host",Mn[Mn.Self=2]="Self",Mn[Mn.SkipSelf=4]="SkipSelf",Mn[Mn.Optional=8]="Optional",Mn))();let If;function xo(e){const t=If;return If=e,t}function Lb(e,t,n){const i=s_(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Mn.Optional?null:void 0!==t?t:void o_(Yi(e))}function ru(e){return{toString:e}.toString()}var Ha=(()=>((Ha=Ha||{})[Ha.OnPush=0]="OnPush",Ha[Ha.Default=1]="Default",Ha))(),Cl=(()=>{return(e=Cl||(Cl={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Cl;var e})();const Ci=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ff={},_i=[],ou=qi({\u0275cmp:qi}),OM=qi({\u0275dir:qi}),DM=qi({\u0275pipe:qi}),vP=qi({\u0275mod:qi}),ic=qi({\u0275fac:qi}),c_=qi({__NG_ELEMENT_ID__:qi});let bP=0;function ir(e){return ru(()=>{const n=!0===e.standalone,i={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Ha.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||_i,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Cl.Emulated,id:"c"+bP++,styles:e.styles||_i,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,s=e.features;return r.inputs=CP(e.inputs,i),r.outputs=CP(e.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(u_).filter(wP):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(cs).filter(wP):null,r})}function u_(e){return Bi(e)||ls(e)}function wP(e){return null!==e}function Dn(e){return ru(()=>({type:e.type,bootstrap:e.bootstrap||_i,declarations:e.declarations||_i,imports:e.imports||_i,exports:e.exports||_i,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function CP(e,t){if(null==e)return Ff;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,t&&(t[r]=o)}return n}const nn=ir;function Uo(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Bi(e){return e[ou]||null}function ls(e){return e[OM]||null}function cs(e){return e[DM]||null}function jo(e,t){const n=e[vP]||null;if(!n&&!0===t)throw new Error(`Type ${Yi(e)} does not have '\u0275mod' property.`);return n}function Is(e){return Array.isArray(e)&&"object"==typeof e[1]}function xl(e){return Array.isArray(e)&&!0===e[1]}function RM(e){return 0!=(8&e.flags)}function zb(e){return 2==(2&e.flags)}function Hb(e){return 1==(1&e.flags)}function El(e){return null!==e.template}function xP(e){return 0!=(256&e[2])}function It(e,t){return e.hasOwnProperty(ic)?e[ic]:null}class mn{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function _t(){return $t}function $t(e){return e.type.prototype.ngOnChanges&&(e.setInput=Zr),vn}function vn(){const e=Qr(this),t=e?.current;if(t){const n=e.previous;if(n===Ff)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Zr(e,t,n,i){const r=Qr(e)||function vt(e,t){return e[Yo]=t}(e,{previous:Ff,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],l=s[a];o[a]=new mn(l&&l.currentValue,t,s===Ff),e[i]=t}_t.ngInherit=!0;const Yo="__ngSimpleChanges__";function Qr(e){return e[Yo]||null}function Jr(e){for(;Array.isArray(e);)e=e[0];return e}function FM(e,t){return Jr(t[e])}function Ua(e,t){return Jr(t[e.index])}function EP(e,t){return e.data[t]}function m_(e,t){return e[t]}function ja(e,t){const n=t[e];return Is(n)?n:n[0]}function LM(e){return 64==(64&e[2])}function Bf(e,t){return null==t?null:e[t]}function EU(e){e[18]=0}function SP(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const Nn={lFrame:FU(null),bindingsEnabled:!0};function kU(){return Nn.bindingsEnabled}function ht(){return Nn.lFrame.lView}function yi(){return Nn.lFrame.tView}function lo(e){return Nn.lFrame.contextLView=e,e[8]}function co(e){return Nn.lFrame.contextLView=null,e}function uo(){let e=AU();for(;null!==e&&64===e.type;)e=e.parent;return e}function AU(){return Nn.lFrame.currentTNode}function au(e,t){const n=Nn.lFrame;n.currentTNode=e,n.isParent=t}function kP(){return Nn.lFrame.isParent}function AP(){Nn.lFrame.isParent=!1}function Fs(){const e=Nn.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function __(){return Nn.lFrame.bindingIndex++}function md(e){const t=Nn.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function H_e(e,t){const n=Nn.lFrame;n.bindingIndex=n.bindingRootIndex=e,OP(t)}function OP(e){Nn.lFrame.currentDirectiveIndex=e}function PU(){return Nn.lFrame.currentQueryIndex}function TP(e){Nn.lFrame.currentQueryIndex=e}function U_e(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function RU(e,t,n){if(n&Mn.SkipSelf){let r=t,o=e;for(;!(r=r.parent,null!==r||n&Mn.Host||(r=U_e(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;t=r,e=o}const i=Nn.lFrame=IU();return i.currentTNode=t,i.lView=e,!0}function PP(e){const t=IU(),n=e[1];Nn.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function IU(){const e=Nn.lFrame,t=null===e?null:e.child;return null===t?FU(e):t}function FU(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function LU(){const e=Nn.lFrame;return Nn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const NU=LU;function RP(){const e=LU();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ls(){return Nn.lFrame.selectedIndex}function zf(e){Nn.lFrame.selectedIndex=e}function Dr(){const e=Nn.lFrame;return EP(e.tView,e.selectedIndex)}function $p(){Nn.lFrame.currentNamespace="svg"}function IP(){!function q_e(){Nn.lFrame.currentNamespace=null}()}function NM(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks||(e.viewHooks=[])).push(-n,l),c&&((e.viewHooks||(e.viewHooks=[])).push(n,c),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,c)),null!=u&&(e.destroyHooks||(e.destroyHooks=[])).push(n,u)}}function $M(e,t,n){$U(e,t,3,n)}function BM(e,t,n,i){(3&e[2])===n&&$U(e,t,n,i)}function FP(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function $U(e,t,n,i){const o=i??-1,s=t.length-1;let a=0;for(let l=void 0!==i?65535&e[18]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(e[18]+=65536),(a<o||-1==o)&&(K_e(e,n,t,l),e[18]=(4294901760&e[18])+l+2),l++}function K_e(e,t,n,i){const r=n[i]<0,o=n[i+1],a=e[r?-n[i]:n[i]];if(r){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Ub{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function zM(e,t,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,o)}else{const o=r,s=n[++i];zU(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),i++}}return i}function BU(e){return 3===e||4===e||6===e}function zU(e){return 64===e.charCodeAt(0)}function HM(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||HU(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function HU(e,t,n,i,r){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}function VU(e){return-1!==e}function y_(e){return 32767&e}function v_(e,t){let n=function tye(e){return e>>16}(e),i=t;for(;n>0;)i=i[15],n--;return i}let NP=!0;function VM(e){const t=NP;return NP=e,t}let nye=0;const lu={};function Wb(e,t){const n=BP(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,$P(i.data,e),$P(t,null),$P(i.blueprint,null));const r=UM(e,t),o=e.injectorIndex;if(VU(r)){const s=y_(r),a=v_(r,t),l=a[1].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=r,o}function $P(e,t){e.push(0,0,0,0,0,0,0,0,t)}function BP(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function UM(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){if(i=ZU(r),null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function jM(e,t,n){!function iye(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(c_)&&(i=n[c_]),null==i&&(i=n[c_]=nye++);const r=255&i;t.data[e+(r>>5)]|=1<<r}(e,t,n)}function WU(e,t,n){if(n&Mn.Optional||void 0!==e)return e;o_()}function GU(e,t,n,i){if(n&Mn.Optional&&void 0===i&&(i=null),0==(n&(Mn.Self|Mn.Host))){const r=e[9],o=xo(void 0);try{return r?r.get(t,i,n&Mn.Optional):Lb(t,i,n&Mn.Optional)}finally{xo(o)}}return WU(i,0,n)}function qU(e,t,n,i=Mn.Default,r){if(null!==e){if(1024&t[2]){const s=function lye(e,t,n,i,r){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=YU(o,s,n,i|Mn.Self,lu);if(a!==lu)return a;let l=o.parent;if(!l){const c=s[21];if(c){const u=c.get(n,lu,i);if(u!==lu)return u}l=ZU(s),s=s[15]}o=l}return r}(e,t,n,i,lu);if(s!==lu)return s}const o=YU(e,t,n,i,lu);if(o!==lu)return o}return GU(t,n,i,r)}function YU(e,t,n,i,r){const o=function sye(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(c_)?e[c_]:void 0;return"number"==typeof t?t>=0?255&t:aye:t}(n);if("function"==typeof o){if(!RU(t,e,i))return i&Mn.Host?WU(r,0,i):GU(t,n,i,r);try{const s=o(i);if(null!=s||i&Mn.Optional)return s;o_()}finally{NU()}}else if("number"==typeof o){let s=null,a=BP(e,t),l=-1,c=i&Mn.Host?t[16][6]:null;for((-1===a||i&Mn.SkipSelf)&&(l=-1===a?UM(e,t):t[a+8],-1!==l&&KU(i,!1)?(s=t[1],a=y_(l),t=v_(l,t)):a=-1);-1!==a;){const u=t[1];if(XU(o,a,u.data)){const d=oye(a,t,n,s,i,c);if(d!==lu)return d}l=t[a+8],-1!==l&&KU(i,t[1].data[a+8]===c)&&XU(o,a,t)?(s=u,a=y_(l),t=v_(l,t)):a=-1}}return r}function oye(e,t,n,i,r,o){const s=t[1],a=s.data[e+8],u=WM(a,s,n,null==i?zb(a)&&NP:i!=s&&0!=(3&a.type),r&Mn.Host&&o===a);return null!==u?Gb(t,s,u,a):lu}function WM(e,t,n,i,r){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,u=o>>20,f=r?a+u:e.directiveEnd;for(let h=i?a:a+u;h<f;h++){const y=s[h];if(h<l&&n===y||h>=l&&y.type===n)return h}if(r){const h=s[l];if(h&&El(h)&&h.type===n)return l}return null}function Gb(e,t,n,i){let r=e[n];const o=t.data;if(function Z_e(e){return e instanceof Ub}(r)){const s=r;s.resolving&&function cP(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new at(-200,`Circular dependency in DI detected for ${e}${n}`)}(function wi(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Fn(e)}(o[n]));const a=VM(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?xo(s.injectImpl):null;RU(e,i,Mn.Default);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&function X_e(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){const s=$t(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&xo(l),VM(a),s.resolving=!1,NU()}}return r}function XU(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function KU(e,t){return!(e&Mn.Self||e&Mn.Host&&t)}class b_{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return qU(this._tNode,this._lView,t,i,n)}}function aye(){return new b_(uo(),ht())}function Eo(e){return ru(()=>{const t=e.prototype.constructor,n=t[ic]||zP(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const o=r[ic]||zP(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function zP(e){return Pb(e)?()=>{const t=zP(On(e));return t&&t()}:It(e)}function ZU(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}function Vf(e){return function rye(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(BU(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===t)return n[r+1];r+=2}}}return null}(uo(),e)}const C_="__parameters__";function x_(e,t,n){return ru(()=>{const i=function HP(e){return function(...n){if(e){const i=e(...n);for(const r in i)this[r]=i[r]}}}(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(C_)?l[C_]:Object.defineProperty(l,C_,{value:[]})[C_];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}class bt{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Nt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Wa(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),Wa(i,t)):t!==e&&t.push(i)}return t}function _d(e,t){e.forEach(n=>Array.isArray(n)?_d(n,t):t(n))}function JU(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function GM(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Xb(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}function Ga(e,t,n){let i=E_(e,t);return i>=0?e[1|i]=n:(i=~i,function fye(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function UP(e,t){const n=E_(e,t);if(n>=0)return e[1|n]}function E_(e,t){return function n8(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}(e,t,1)}const Kb={},WP="__NG_DI_FLAG__",YM="ngTempTokenPath",bye=/\n/gm,i8="__source";let Zb;function S_(e){const t=Zb;return Zb=e,t}function Cye(e,t=Mn.Default){if(void 0===Zb)throw new at(-203,!1);return null===Zb?Lb(e,void 0,t):Zb.get(e,t&Mn.Optional?null:void 0,t)}function qe(e,t=Mn.Default){return(function l_(){return If}()||Cye)(On(e),t)}function cr(e,t=Mn.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),qe(e,t)}function GP(e){const t=[];for(let n=0;n<e.length;n++){const i=On(e[n]);if(Array.isArray(i)){if(0===i.length)throw new at(900,!1);let r,o=Mn.Default;for(let s=0;s<i.length;s++){const a=i[s],l=Mye(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}t.push(qe(r,o))}else t.push(qe(i))}return t}function Qb(e,t){return e[WP]=t,e.prototype[WP]=t,e}function Mye(e){return e[WP]}const Uf=Qb(x_("Optional"),8),k_=Qb(x_("SkipSelf"),4);var ca=(()=>((ca=ca||{})[ca.Important=1]="Important",ca[ca.DashCase=2]="DashCase",ca))();const ZP=new Map;let Hye=0;const JP="__ngContext__";function us(e,t){Is(t)?(e[JP]=t[20],function Uye(e){ZP.set(e[20],e)}(t)):e[JP]=t}function tR(e,t){return undefined(e,t)}function n0(e){const t=e[3];return xl(t)?t[3]:t}function nR(e){return x8(e[13])}function iR(e){return x8(e[4])}function x8(e){for(;null!==e&&!xl(e);)e=e[4];return e}function O_(e,t,n,i,r){if(null!=i){let o,s=!1;xl(i)?o=i:Is(i)&&(s=!0,i=i[0]);const a=Jr(i);0===e&&null!==n?null==r?D8(t,n,a):Bp(t,n,a,r||null,!0):1===e&&null!==n?Bp(t,n,a,r||null,!0):2===e?function uR(e,t,n){const i=ZM(e,t);i&&function dve(e,t,n,i){e.removeChild(t,n,i)}(e,i,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function pve(e,t,n,i,r){const o=n[7];o!==Jr(n)&&O_(t,e,i,o,r);for(let a=10;a<n.length;a++){const l=n[a];r0(l[1],l,e,t,i,o)}}(t,e,o,n,r)}}function oR(e,t,n){return e.createElement(t,n)}function S8(e,t){const n=e[9],i=n.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,SP(r,-1)),n.splice(i,1)}function sR(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const r=i[17];null!==r&&r!==e&&S8(r,i),t>0&&(e[n-1][4]=i[4]);const o=GM(e,10+t);!function ive(e,t){r0(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function k8(e,t){if(!(128&t[2])){const n=t[11];n.destroyNode&&r0(e,t,n,3,null,null),function sve(e){let t=e[13];if(!t)return aR(e[1],e);for(;t;){let n=null;if(Is(t))n=t[13];else{const i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)Is(t)&&aR(t[1],t),t=t[3];null===t&&(t=e),Is(t)&&aR(t[1],t),n=t&&t[4]}t=n}}(t)}}function aR(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function uve(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const r=t[n[i]];if(!(r instanceof Ub)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(r)}finally{}}}}(e,t),function cve(e,t){const n=e.cleanup,i=t[7];let r=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(t):Jr(t[s]),l=i[r=n[o+2]],c=n[o+3];"boolean"==typeof c?a.removeEventListener(n[o],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),o+=2}else{const s=i[r=n[o+1]];n[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)(0,i[o])();t[7]=null}}(e,t),1===t[1].type&&t[11].destroy();const n=t[17];if(null!==n&&xl(t[3])){n!==t[3]&&S8(n,t);const i=t[19];null!==i&&i.detachView(e)}!function jye(e){ZP.delete(e[20])}(t)}}function A8(e,t,n){return function O8(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const r=e.data[i.directiveStart].encapsulation;if(r===Cl.None||r===Cl.Emulated)return null}return Ua(i,n)}(e,t.parent,n)}function Bp(e,t,n,i,r){e.insertBefore(t,n,i,r)}function D8(e,t,n){e.appendChild(t,n)}function T8(e,t,n,i,r){null!==i?Bp(e,t,n,i,r):D8(e,t,n)}function ZM(e,t){return e.parentNode(t)}function P8(e,t,n){return I8(e,t,n)}let ex,pR,I8=function R8(e,t,n){return 40&e.type?Ua(e,n):null};function QM(e,t,n,i){const r=A8(e,i,t),o=t[11],a=P8(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)T8(o,r,n[l],a,!1);else T8(o,r,n,a,!1)}function JM(e,t){if(null!==t){const n=t.type;if(3&n)return Ua(t,e);if(4&n)return cR(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return JM(e,i);{const r=e[t.index];return xl(r)?cR(-1,r):Jr(r)}}if(32&n)return tR(t,e)()||Jr(e[t.index]);{const i=L8(e,t);return null!==i?Array.isArray(i)?i[0]:JM(n0(e[16]),i):JM(e,t.next)}}return null}function L8(e,t){return null!==t?e[16][6].projection[t.projection]:null}function cR(e,t){const n=10+e+1;if(n<t.length){const i=t[n],r=i[1].firstChild;if(null!==r)return JM(i,r)}return t[7]}function dR(e,t,n,i,r,o,s){for(;null!=n;){const a=i[n.index],l=n.type;if(s&&0===t&&(a&&us(Jr(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)dR(e,t,n.child,i,r,o,!1),O_(t,e,r,a,o);else if(32&l){const c=tR(n,i);let u;for(;u=c();)O_(t,e,r,u,o);O_(t,e,r,a,o)}else 16&l?N8(e,t,i,n,r,o):O_(t,e,r,a,o);n=s?n.projectionNext:n.next}}function r0(e,t,n,i,r,o){dR(n,i,e.firstChild,t,r,o,!1)}function N8(e,t,n,i,r,o){const s=n[16],l=s[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)O_(t,e,r,l[c],o);else dR(e,t,l,s[3],r,o,!0)}function $8(e,t,n){e.setAttribute(t,"style",n)}function fR(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function zp(e){return function hR(){if(void 0===ex&&(ex=null,Ci.trustedTypes))try{ex=Ci.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return ex}()?.createHTML(e)||e}class Hp{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class bve extends Hp{getTypeName(){return"HTML"}}class wve extends Hp{getTypeName(){return"Style"}}class Cve extends Hp{getTypeName(){return"Script"}}class Mve extends Hp{getTypeName(){return"URL"}}class xve extends Hp{getTypeName(){return"ResourceURL"}}function qa(e){return e instanceof Hp?e.changingThisBreaksApplicationSecurity:e}function cu(e,t){const n=function Eve(e){return e instanceof Hp&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}class Tve{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(zp(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}}class Pve{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);const i=this.inertDocument.createElement("body");n.appendChild(i)}}getInertBodyElement(t){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=zp(t),n;const i=this.inertDocument.createElement("body");return i.innerHTML=zp(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(t){const n=t.attributes;for(let r=n.length-1;0<r;r--){const s=n.item(r).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&t.removeAttribute(s)}let i=t.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Ive=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function nx(e){return(e=String(e)).match(Ive)?e:"unsafe:"+e}function yd(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function o0(...e){const t={};for(const n of e)for(const i in n)n.hasOwnProperty(i)&&(t[i]=!0);return t}const j8=yd("area,br,col,hr,img,wbr"),W8=yd("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),G8=yd("rp,rt"),mR=o0(j8,o0(W8,yd("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),o0(G8,yd("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),o0(G8,W8)),_R=yd("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),q8=o0(_R,yd("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yd("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fve=yd("script,style,template");class Lve{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!mR.hasOwnProperty(n))return this.sanitizedSomething=!0,!Fve.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=t.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!q8.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;_R[a]&&(l=nx(l)),this.buf.push(" ",s,'="',Y8(l),'"')}return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();mR.hasOwnProperty(n)&&!j8.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Y8(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const Nve=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$ve=/([^\#-~ |!])/g;function Y8(e){return e.replace(/&/g,"&amp;").replace(Nve,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace($ve,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ix;function X8(e,t){let n=null;try{ix=ix||function U8(e){const t=new Pve(e);return function Rve(){try{return!!(new window.DOMParser).parseFromString(zp(""),"text/html")}catch{return!1}}()?new Tve(t):t}(e);let i=t?String(t):"";n=ix.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=ix.getInertBodyElement(i)}while(i!==o);return zp((new Lve).sanitizeChildren(yR(n)||n))}finally{if(n){const i=yR(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function yR(e){return"content"in e&&function Bve(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ri=(()=>((Ri=Ri||{})[Ri.NONE=0]="NONE",Ri[Ri.HTML=1]="HTML",Ri[Ri.STYLE=2]="STYLE",Ri[Ri.SCRIPT=3]="SCRIPT",Ri[Ri.URL=4]="URL",Ri[Ri.RESOURCE_URL=5]="RESOURCE_URL",Ri))();const bR=new bt("ENVIRONMENT_INITIALIZER"),Z8=new bt("INJECTOR",-1),Q8=new bt("INJECTOR_DEF_TYPES");class J8{get(t,n=Kb){if(n===Kb){const i=new Error(`NullInjectorError: No provider for ${Yi(t)}!`);throw i.name="NullInjectorError",i}return n}}function qve(...e){return{\u0275providers:ej(0,e)}}function ej(e,...t){const n=[],i=new Set;let r;return _d(t,o=>{const s=o;wR(s,n,[],i)&&(r||(r=[]),r.push(s))}),void 0!==r&&tj(r,n),n}function tj(e,t){for(let n=0;n<e.length;n++){const{providers:r}=e[n];_d(r,o=>{t.push(o)})}}function wR(e,t,n,i){if(!(e=On(e)))return!1;let r=null,o=kM(e);const s=!o&&Bi(e);if(o||s){if(s&&!s.standalone)return!1;r=e}else{const l=e.ngModule;if(o=kM(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)wR(c,t,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{_d(o.imports,u=>{wR(u,t,n,i)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&tj(c,t)}if(!a){const c=It(r)||(()=>new r);t.push({provide:r,useFactory:c,deps:_i},{provide:Q8,useValue:r,multi:!0},{provide:bR,useValue:()=>qe(r),multi:!0})}const l=o.providers;null==l||a||_d(l,u=>{t.push(u)})}}return r!==e&&void 0!==e.providers}const Yve=qi({provide:String,useValue:qi});function CR(e){return null!==e&&"object"==typeof e&&Yve in e}function Vp(e){return"function"==typeof e}const MR=new bt("Set Injector scope."),rx={},Kve={};let xR;function ox(){return void 0===xR&&(xR=new J8),xR}class jf{}class rj extends jf{constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,SR(t,s=>this.processProvider(s)),this.records.set(Z8,D_(void 0,this)),r.has("environment")&&this.records.set(jf,D_(void 0,this));const o=this.records.get(MR);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Q8.multi,_i,Mn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=S_(this),i=xo(void 0);try{return t()}finally{S_(n),xo(i)}}get(t,n=Kb,i=Mn.Default){this.assertNotDestroyed();const r=S_(this),o=xo(void 0);try{if(!(i&Mn.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function tbe(e){return"function"==typeof e||"object"==typeof e&&e instanceof bt}(t)&&s_(t);a=l&&this.injectableDefInScope(l)?D_(ER(t),rx):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&Mn.Self?ox():this.parent).get(t,n=i&Mn.Optional&&n===Kb?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[YM]=s[YM]||[]).unshift(Yi(t)),r)throw s;return function xye(e,t,n,i){const r=e[YM];throw t[i8]&&r.unshift(t[i8]),e.message=function Eye(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let r=Yi(t);if(Array.isArray(t))r=t.map(Yi).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Yi(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(bye,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e[YM]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{xo(o),S_(r)}}resolveInjectorInitializers(){const t=S_(this),n=xo(void 0);try{const i=this.get(bR.multi,_i,Mn.Self);for(const r of i)r()}finally{S_(t),xo(n)}}toString(){const t=[],n=this.records;for(const i of n.keys())t.push(Yi(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new at(205,!1)}processProvider(t){let n=Vp(t=On(t))?t:On(t&&t.provide);const i=function Qve(e){return CR(e)?D_(void 0,e.useValue):D_(oj(e),rx)}(t);if(Vp(t)||!0!==t.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=D_(void 0,rx,!0),r.factory=()=>GP(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){return n.value===rx&&(n.value=Kve,n.value=n.factory()),"object"==typeof n.value&&n.value&&function ebe(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=On(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function ER(e){const t=s_(e),n=null!==t?t.factory:It(e);if(null!==n)return n;if(e instanceof bt)throw new at(204,!1);if(e instanceof Function)return function Zve(e){const t=e.length;if(t>0)throw Xb(t,"?"),new at(204,!1);const n=function mP(e){const t=e&&(e[a_]||e[AM]);if(t){const n=function _P(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new at(204,!1)}function oj(e,t,n){let i;if(Vp(e)){const r=On(e);return It(r)||ER(r)}if(CR(e))i=()=>On(e.useValue);else if(function ij(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...GP(e.deps||[]));else if(function nj(e){return!(!e||!e.useExisting)}(e))i=()=>qe(On(e.useExisting));else{const r=On(e&&(e.useClass||e.provide));if(!function Jve(e){return!!e.deps}(e))return It(r)||ER(r);i=()=>new r(...GP(e.deps))}return i}function D_(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function nbe(e){return!!e.\u0275providers}function SR(e,t){for(const n of e)Array.isArray(n)?SR(n,t):nbe(n)?SR(n.\u0275providers,t):t(n)}class sj{}class obe{resolveComponentFactory(t){throw function rbe(e){const t=Error(`No component factory found for ${Yi(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let T_=(()=>{class e{}return e.NULL=new obe,e})();function sbe(){return P_(uo(),ht())}function P_(e,t){return new Ii(Ua(e,t))}let Ii=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=sbe,e})();function abe(e){return e instanceof Ii?e.nativeElement:e}class a0{}let Sl=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function lbe(){const e=ht(),n=ja(uo().index,e);return(Is(n)?n:e)[11]}(),e})(),cbe=(()=>{class e{}return e.\u0275prov=Nt({token:e,providedIn:"root",factory:()=>null}),e})();class Up{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ube=new Up("14.3.0"),kR={};function OR(e){return e.ngOriginalError}class vd{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&OR(t);for(;n&&OR(n);)n=OR(n);return n||null}}function DR(e){return e.ownerDocument.defaultView}function bd(e){return e instanceof Function?e():e}function cj(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}const uj="ng-template";function bbe(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==cj(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function dj(e){return 4===e.type&&e.value!==uj}function wbe(e,t,n){return t===(4!==e.type||n?e.value:uj)}function Cbe(e,t,n){let i=4;const r=e.attrs||[],o=function Ebe(e){for(let t=0;t<e.length;t++)if(BU(e[t]))return t;return e.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!wbe(e,l,n)||""===l&&1===t.length){if(sc(i))return!1;s=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!bbe(e.attrs,c,n)){if(sc(i))return!1;s=!0}continue}const d=Mbe(8&i?"class":l,r,dj(e),n);if(-1===d){if(sc(i))return!1;s=!0;continue}if(""!==c){let f;f=d>o?"":r[d+1].toLowerCase();const h=8&i?f:null;if(h&&-1!==cj(h,c,0)||2&i&&c!==f){if(sc(i))return!1;s=!0}}}}else{if(!s&&!sc(i)&&!sc(l))return!1;if(s&&sc(l))continue;s=!1,i=l|1&i}}return sc(i)||s}function sc(e){return 0==(1&e)}function Mbe(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){const s=t[r];if(s===e)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Sbe(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function fj(e,t,n=!1){for(let i=0;i<t.length;i++)if(Cbe(e,t[i],n))return!0;return!1}function kbe(e,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function hj(e,t){return e?":not("+t.trim()+")":t}function Abe(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&i){const a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!sc(s)&&(t+=hj(o,r),r=""),i=s,o=o||!sc(i);n++}return""!==r&&(t+=hj(o,r)),t}const zn={};function Ye(e){pj(yi(),ht(),Ls()+e,!1)}function pj(e,t,n,i){if(!i)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&$M(t,o,n)}else{const o=e.preOrderHooks;null!==o&&BM(t,o,0,n)}zf(n)}function yj(e,t=null,n=null,i){const r=vj(e,t,n,i);return r.resolveInjectorInitializers(),r}function vj(e,t=null,n=null,i,r=new Set){const o=[n||_i,qve(e)];return i=i||("object"==typeof e?void 0:Yi(e)),new rj(o,t||ox(),i||null,r)}let $s=(()=>{class e{static create(n,i){if(Array.isArray(n))return yj({name:""},i,n,"");{const r=n.name??"";return yj({name:r},n.parent,n.providers,r)}}}return e.THROW_IF_NOT_FOUND=Kb,e.NULL=new J8,e.\u0275prov=Nt({token:e,providedIn:"any",factory:()=>qe(Z8)}),e.__NG_ELEMENT_ID__=-1,e})();function Pe(e,t=Mn.Default){const n=ht();return null===n?qe(e,t):qU(uo(),n,On(e),t)}function F_(){throw new Error("invalid")}function ax(e,t){return e<<17|t<<2}function ac(e){return e>>17&32767}function FR(e){return 2|e}function wd(e){return(131068&e)>>2}function LR(e,t){return-131069&e|t<<2}function NR(e){return 1|e}function Lj(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const s=e.data[o];TP(r),s.contentQueries(2,t[o],o)}}}function ux(e,t,n,i,r,o,s,a,l,c,u){const d=t.blueprint.slice();return d[0]=r,d[2]=76|i,(null!==u||e&&1024&e[2])&&(d[2]|=1024),EU(d),d[3]=d[15]=e,d[8]=n,d[10]=s||e&&e[10],d[11]=a||e&&e[11],d[12]=l||e&&e[12]||null,d[9]=c||e&&e[9]||null,d[6]=o,d[20]=function Vye(){return Hye++}(),d[21]=u,d[16]=2==t.type?e[16]:d,d}function L_(e,t,n,i,r){let o=e.data[t];if(null===o)o=function WR(e,t,n,i,r){const o=AU(),s=kP(),l=e.data[t]=function u0e(e,t,n,i,r,o){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(e,t,n,i,r),function z_e(){return Nn.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=function Vb(){const e=Nn.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return au(o,!0),o}function N_(e,t,n,i){if(0===n)return-1;const r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function GR(e,t,n){PP(t);try{const i=e.viewQuery;null!==i&&e2(1,i,n);const r=e.template;null!==r&&Nj(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Lj(e,t),e.staticViewQueries&&e2(2,e.viewQuery,n);const o=e.components;null!==o&&function a0e(e,t){for(let n=0;n<t.length;n++)S0e(e,t[n])}(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[2]&=-5,RP()}}function dx(e,t,n,i){const r=t[2];if(128!=(128&r)){PP(t);try{EU(t),function DU(e){return Nn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Nj(e,t,n,2,i);const s=3==(3&r);if(s){const c=e.preOrderCheckHooks;null!==c&&$M(t,c,null)}else{const c=e.preOrderHooks;null!==c&&BM(t,c,0,null),FP(t,0)}if(function x0e(e){for(let t=nR(e);null!==t;t=iR(t)){if(!t[2])continue;const n=t[9];for(let i=0;i<n.length;i++){const r=n[i],o=r[3];0==(512&r[2])&&SP(o,1),r[2]|=512}}}(t),function M0e(e){for(let t=nR(e);null!==t;t=iR(t))for(let n=10;n<t.length;n++){const i=t[n],r=i[1];LM(i)&&dx(r,i,r.template,i[8])}}(t),null!==e.contentQueries&&Lj(e,t),s){const c=e.contentCheckHooks;null!==c&&$M(t,c)}else{const c=e.contentHooks;null!==c&&BM(t,c,1),FP(t,1)}!function o0e(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)zf(~r);else{const o=r,s=n[++i],a=n[++i];H_e(s,o),a(2,t[o])}}}finally{zf(-1)}}(e,t);const a=e.components;null!==a&&function s0e(e,t){for(let n=0;n<t.length;n++)E0e(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&e2(2,l,i),s){const c=e.viewCheckHooks;null!==c&&$M(t,c)}else{const c=e.viewHooks;null!==c&&BM(t,c,2),FP(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,SP(t[3],-1))}finally{RP()}}}function Nj(e,t,n,i,r){const o=Ls(),s=2&i;try{zf(-1),s&&t.length>22&&pj(e,t,22,!1),n(i,r)}finally{zf(o)}}function $j(e,t,n){if(RM(t)){const r=t.directiveEnd;for(let o=t.directiveStart;o<r;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}function qR(e,t,n){!kU()||(function g0e(e,t,n,i){const r=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Wb(n,t),us(i,t);const s=n.initialInputs;for(let a=r;a<o;a++){const l=e.data[a],c=El(l);c&&b0e(t,n,l);const u=Gb(t,e,a,n);us(u,t),null!==s&&w0e(0,a-r,u,l,0,s),c&&(ja(n.index,t)[8]=u)}}(e,t,n,Ua(n,t)),128==(128&n.flags)&&function m0e(e,t,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=function V_e(){return Nn.lFrame.currentDirectiveIndex}();try{zf(o);for(let a=i;a<r;a++){const l=e.data[a],c=t[a];OP(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Wj(l,c)}}finally{zf(-1),OP(s)}}(e,t,n))}function YR(e,t,n=Ua){const i=t.localNames;if(null!==i){let r=t.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(t,e):e[s];e[r++]=a}}}function Bj(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=XR(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function XR(e,t,n,i,r,o,s,a,l,c){const u=22+i,d=u+r,f=function l0e(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:zn);return n}(u,d),h="function"==typeof c?c():c;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function zj(e,t,n,i){const r=Kj(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&Zj(e).push(i,r.length-1))}function Hj(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function Vj(e,t){const i=t.directiveEnd,r=e.data,o=t.attrs,s=[];let a=null,l=null;for(let c=t.directiveStart;c<i;c++){const u=r[c],d=u.inputs,f=null===o||dj(t)?null:C0e(d,o);s.push(f),a=Hj(d,c,a),l=Hj(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=l}function Ya(e,t,n,i,r,o,s,a){const l=Ua(t,n);let u,c=t.inputs;!a&&null!=c&&(u=c[i])?(t2(e,n,u,i,r),zb(t)&&Uj(n,t.index)):3&t.type&&(i=function d0e(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=s?s(r,t.value||"",i):r,o.setProperty(l,i,r))}function Uj(e,t){const n=ja(t,e);16&n[2]||(n[2]|=32)}function KR(e,t,n,i){let r=!1;if(kU()){const o=function _0e(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];fj(n,s.selectors,!1)&&(r||(r=[]),jM(Wb(n,t),e,s.type),El(s)?(Gj(e,n),r.unshift(s)):r.push(s))}return r}(e,t,n),s=null===i?null:{"":-1};if(null!==o){r=!0,qj(n,e.data.length,o.length);for(let u=0;u<o.length;u++){const d=o[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=N_(e,t,o.length,null);for(let u=0;u<o.length;u++){const d=o[u];n.mergedAttrs=HM(n.mergedAttrs,d.hostAttrs),Yj(e,n,t,c,d),v0e(c,d,s),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const f=d.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!l&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),c++}Vj(e,n)}s&&function y0e(e,t,n){if(t){const i=e.localNames=[];for(let r=0;r<t.length;r+=2){const o=n[t[r+1]];if(null==o)throw new at(-301,!1);i.push(t[r],o)}}}(n,i,s)}return n.mergedAttrs=HM(n.mergedAttrs,n.attrs),r}function jj(e,t,n,i,r,o){const s=o.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~t.index;(function p0e(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(i,r,s)}}function Wj(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Gj(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function v0e(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;El(t)&&(n[""]=e)}}function qj(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Yj(e,t,n,i,r){e.data[i]=r;const o=r.factory||(r.factory=It(r.type)),s=new Ub(o,El(r),Pe);e.blueprint[i]=s,n[i]=s,jj(e,t,0,i,N_(e,n,r.hostVars,zn),r)}function b0e(e,t,n){const i=Ua(t,e),r=Bj(n),o=e[10],s=fx(e,ux(e,r,null,n.onPush?32:16,i,t,o,o.createRenderer(i,n),null,null,null));e[t.index]=s}function uu(e,t,n,i,r,o){const s=Ua(e,t);!function ZR(e,t,n,i,r,o,s){if(null==o)e.removeAttribute(t,r,n);else{const a=null==s?Fn(o):s(o,i||"",r);e.setAttribute(t,r,a,n)}}(t[11],s,o,e.value,n,i,r)}function w0e(e,t,n,i,r,o){const s=o[t];if(null!==s){const a=i.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?i.setInput(n,d,c,u):n[u]=d}}}function C0e(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function Xj(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function E0e(e,t){const n=ja(t,e);if(LM(n)){const i=n[1];48&n[2]?dx(i,n,i.template,n[8]):n[5]>0&&QR(n)}}function QR(e){for(let i=nR(e);null!==i;i=iR(i))for(let r=10;r<i.length;r++){const o=i[r];if(LM(o))if(512&o[2]){const s=o[1];dx(s,o,s.template,o[8])}else o[5]>0&&QR(o)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=ja(n[i],e);LM(r)&&r[5]>0&&QR(r)}}function S0e(e,t){const n=ja(t,e),i=n[1];(function k0e(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),GR(i,n,n[8])}function fx(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function JR(e){for(;e;){e[2]|=32;const t=n0(e);if(xP(e)&&!t)return e;e=t}return null}function hx(e,t,n,i=!0){const r=t[10];r.begin&&r.begin();try{dx(e,t,e.template,n)}catch(s){throw i&&Jj(t,s),s}finally{r.end&&r.end()}}function e2(e,t,n){TP(0),t(e,n)}function Kj(e){return e[7]||(e[7]=[])}function Zj(e){return e.cleanup||(e.cleanup=[])}function Jj(e,t){const n=e[9],i=n?n.get(vd,null):null;i&&i.handleError(t)}function t2(e,t,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],c=e.data[s];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function px(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=Tb(r,a):2==o&&(i=Tb(i,a+": "+t[++s]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function gx(e,t,n,i,r=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&i.push(Jr(o)),xl(o))for(let a=10;a<o.length;a++){const l=o[a],c=l[1].firstChild;null!==c&&gx(l[1],l,c,i)}const s=n.type;if(8&s)gx(e,t,n.child,i);else if(32&s){const a=tR(n,t);let l;for(;l=a();)i.push(l)}else if(16&s){const a=L8(t,n);if(Array.isArray(a))i.push(...a);else{const l=n0(t[16]);gx(l[1],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}class l0{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return gx(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(xl(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(sR(t,i),GM(n,i))}this._attachedToViewContainer=!1}k8(this._lView[1],this._lView)}onDestroy(t){zj(this._lView[1],this._lView,null,t)}markForCheck(){JR(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){hx(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new at(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ove(e,t){r0(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new at(902,!1);this._appRef=t}}class A0e extends l0{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;hx(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class n2 extends T_{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Bi(t);return new c0(n,this.ngModule)}}function e9(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class D0e{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){const r=this.injector.get(t,kR,i);return r!==kR||n===kR?r:this.parentInjector.get(t,n,i)}}class c0 extends sj{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Obe(e){return e.map(Abe).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return e9(this.componentDef.inputs)}get outputs(){return e9(this.componentDef.outputs)}create(t,n,i,r){let o=(r=r||this.ngModule)instanceof jf?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new D0e(t,o):t,a=s.get(a0,null);if(null===a)throw new at(407,!1);const l=s.get(cbe,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=i?function c0e(e,t,n){return e.selectRootElement(t,n===Cl.ShadowDom)}(c,i,this.componentDef.encapsulation):oR(c,u,function O0e(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(u)),f=this.componentDef.onPush?288:272,h=XR(0,null,null,1,0,null,null,null,null,null),y=ux(null,h,null,f,null,null,a,c,l,s,null);let b,C;PP(y);try{const k=function R0e(e,t,n,i,r,o){const s=n[1];n[22]=e;const l=L_(s,22,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(px(l,c,!0),null!==e&&(zM(r,e,c),null!==l.classes&&fR(r,e,l.classes),null!==l.styles&&$8(r,e,l.styles)));const u=i.createRenderer(e,t),d=ux(n,Bj(t),null,t.onPush?32:16,n[22],l,i,u,o||null,null,null);return s.firstCreatePass&&(jM(Wb(l,n),s,t.type),Gj(s,l),qj(l,n.length,1)),fx(n,d),n[22]=d}(d,this.componentDef,y,a,c);if(d)if(i)zM(c,d,["ng-version",ube.full]);else{const{attrs:O,classes:I}=function Dbe(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let o=e[i];if("string"==typeof o)2===r?""!==o&&t.push(o,e[++i]):8===r&&n.push(o);else{if(!sc(r))break;r=o}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);O&&zM(c,d,O),I&&I.length>0&&fR(c,d,I.join(" "))}if(C=EP(h,22),void 0!==n){const O=C.projection=[];for(let I=0;I<this.ngContentSelectors.length;I++){const z=n[I];O.push(null!=z?Array.from(z):null)}}b=function I0e(e,t,n,i){const r=n[1],o=function h0e(e,t,n){const i=uo();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Yj(e,i,t,N_(e,t,1,null),n),Vj(e,i));const r=Gb(t,e,i.directiveStart,i);us(r,t);const o=Ua(i,t);return o&&us(o,t),r}(r,n,t);if(e[8]=n[8]=o,null!==i)for(const a of i)a(o,t);if(t.contentQueries){const a=uo();t.contentQueries(1,o,a.directiveStart)}const s=uo();return!r.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(zf(s.index),jj(n[1],s,0,s.directiveStart,s.directiveEnd,t),Wj(t,o)),o}(k,this.componentDef,y,[F0e]),GR(h,y,null)}finally{RP()}return new P0e(this.componentType,b,P_(C,y),y,C)}}class P0e extends class ibe{}{constructor(t,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new A0e(r),this.componentType=t}setInput(t,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){const o=this._rootLView;t2(o[1],o,r,t,n),Uj(o,this._tNode.index)}}get injector(){return new b_(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function F0e(){const e=uo();NM(ht()[1],e)}function qn(e){let t=function t9(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const i=[e];for(;t;){let r;if(El(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new at(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);const s=e;s.inputs=r2(e.inputs),s.declaredInputs=r2(e.declaredInputs),s.outputs=r2(e.outputs);const a=r.hostBindings;a&&B0e(e,a);const l=r.viewQuery,c=r.contentQueries;if(l&&N0e(e,l),c&&$0e(e,c),Db(e.inputs,r.inputs),Db(e.declaredInputs,r.declaredInputs),Db(e.outputs,r.outputs),El(r)&&r.data.animation){const u=e.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===qn&&(n=!1)}}t=Object.getPrototypeOf(t)}!function L0e(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=HM(r.hostAttrs,n=HM(n,r.hostAttrs))}}(i)}function r2(e){return e===Ff?{}:e===_i?[]:e}function N0e(e,t){const n=e.viewQuery;e.viewQuery=n?(i,r)=>{t(i,r),n(i,r)}:t}function $0e(e,t){const n=e.contentQueries;e.contentQueries=n?(i,r,o)=>{t(i,r,o),n(i,r,o)}:t}function B0e(e,t){const n=e.hostBindings;e.hostBindings=n?(i,r)=>{t(i,r),n(i,r)}:t}let mx=null;function jp(){if(!mx){const e=Ci.Symbol;if(e&&e.iterator)mx=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(mx=i)}}}return mx}function u0(e){return!!o2(e)&&(Array.isArray(e)||!(e instanceof Map)&&jp()in e)}function o2(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function du(e,t,n){return e[t]=n}function ds(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Wp(e,t,n,i){const r=ds(e,t,n);return ds(e,t+1,i)||r}function er(e,t,n,i){const r=ht();return ds(r,__(),t)&&(yi(),uu(Dr(),r,e,t,n,i)),er}function B_(e,t,n,i){return ds(e,__(),n)?t+Fn(n)+i:zn}function tn(e,t,n,i,r,o,s,a){const l=ht(),c=yi(),u=e+22,d=c.firstCreatePass?function q0e(e,t,n,i,r,o,s,a,l){const c=t.consts,u=L_(t,e,4,s||null,Bf(c,a));KR(t,n,u,Bf(c,l)),NM(t,u);const d=u.tViews=XR(2,u,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,n,i,r,o,s):c.data[u];au(d,!1);const f=l[11].createComment("");QM(c,l,f,d),us(f,l),fx(l,l[u]=Xj(f,l,f,d)),Hb(d)&&qR(c,l,d),null!=s&&YR(l,d,a)}function q_(e){return m_(function B_e(){return Nn.lFrame.contextLView}(),22+e)}function it(e,t,n){const i=ht();return ds(i,__(),t)&&Ya(yi(),Dr(),i,e,t,i[11],n,!1),it}function s2(e,t,n,i,r){const s=r?"class":"style";t2(e,n,t.inputs[s],s,i)}function Ve(e,t,n,i){const r=ht(),o=yi(),s=22+e,a=r[11],l=r[s]=oR(a,t,function Y_e(){return Nn.lFrame.currentNamespace}()),c=o.firstCreatePass?function X0e(e,t,n,i,r,o,s){const a=t.consts,c=L_(t,e,2,r,Bf(a,o));return KR(t,n,c,Bf(a,s)),null!==c.attrs&&px(c,c.attrs,!1),null!==c.mergedAttrs&&px(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,r,0,t,n,i):o.data[s];au(c,!0);const u=c.mergedAttrs;null!==u&&zM(a,l,u);const d=c.classes;null!==d&&fR(a,l,d);const f=c.styles;return null!==f&&$8(a,l,f),64!=(64&c.flags)&&QM(o,r,l,c),0===function I_e(){return Nn.lFrame.elementDepthCount}()&&us(l,r),function F_e(){Nn.lFrame.elementDepthCount++}(),Hb(c)&&(qR(o,r,c),$j(o,c,r)),null!==i&&YR(r,c),Ve}function Ge(){let e=uo();kP()?AP():(e=e.parent,au(e,!1));const t=e;!function L_e(){Nn.lFrame.elementDepthCount--}();const n=yi();return n.firstCreatePass&&(NM(n,e),RM(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function J_e(e){return 0!=(16&e.flags)}(t)&&s2(n,t,ht(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function eye(e){return 0!=(32&e.flags)}(t)&&s2(n,t,ht(),t.stylesWithoutHost,!1),Ge}function Un(e,t,n,i){return Ve(e,t,n,i),Ge(),Un}function f0(e,t,n){const i=ht(),r=yi(),o=e+22,s=r.firstCreatePass?function K0e(e,t,n,i,r){const o=t.consts,s=Bf(o,i),a=L_(t,e,8,"ng-container",s);return null!==s&&px(a,s,!0),KR(t,n,a,Bf(o,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,r,i,t,n):r.data[o];au(s,!0);const a=i[o]=i[11].createComment("");return QM(r,i,a,s),us(a,i),Hb(s)&&(qR(r,i,s),$j(r,s,i)),null!=n&&YR(i,s),f0}function h0(){let e=uo();const t=yi();return kP()?AP():(e=e.parent,au(e,!1)),t.firstCreatePass&&(NM(t,e),RM(e)&&t.queries.elementEnd(e)),h0}function Xa(){return ht()}function p0(e){return!!e&&"function"==typeof e.then}function f9(e){return!!e&&"function"==typeof e.subscribe}const a2=f9;function fn(e,t,n,i){const r=ht(),o=yi(),s=uo();return function p9(e,t,n,i,r,o,s,a){const l=Hb(i),u=e.firstCreatePass&&Zj(e),d=t[8],f=Kj(t);let h=!0;if(3&i.type||a){const C=Ua(i,t),k=a?a(C):C,O=f.length,I=a?q=>a(Jr(q[i.index])):i.index;let z=null;if(!a&&l&&(z=function Z0e(e,t,n,i){const r=e.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=t[7],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(e,t,r,i.index)),null!==z)(z.__ngLastListenerFn__||z).__ngNextListenerFn__=o,z.__ngLastListenerFn__=o,h=!1;else{o=m9(i,t,d,o,!1);const q=n.listen(k,r,o);f.push(o,q),u&&u.push(r,I,O,O+1)}}else o=m9(i,t,d,o,!1);const y=i.outputs;let b;if(h&&null!==y&&(b=y[r])){const C=b.length;if(C)for(let k=0;k<C;k+=2){const ne=t[b[k]][b[k+1]].subscribe(o),K=f.length;f.push(o,ne),u&&u.push(r,i.index,K,-(K+1))}}}(o,r,r[11],s,e,t,0,i),fn}function g9(e,t,n,i){try{return!1!==n(i)}catch(r){return Jj(e,r),!1}}function m9(e,t,n,i,r){return function o(s){if(s===Function)return i;JR(2&e.flags?ja(e.index,t):t);let l=g9(t,0,i,s),c=o.__ngNextListenerFn__;for(;c;)l=g9(t,0,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function on(e=1){return function j_e(e){return(Nn.lFrame.contextLView=function W_e(e,t){for(;e>0;)t=t[15],e--;return t}(e,Nn.lFrame.contextLView))[8]}(e)}function Q0e(e,t){let n=null;const i=function xbe(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===i?fj(e,o,!0):kbe(i,o))return r}else n=r}return n}function qf(e){const t=ht()[16][6];if(!t.projection){const i=t.projection=Xb(e?e.length:1,null),r=i.slice();let o=t.child;for(;null!==o;){const s=e?Q0e(o,e):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function fs(e,t=0,n){const i=ht(),r=yi(),o=L_(r,22+e,16,null,n||null);null===o.projection&&(o.projection=t),AP(),64!=(64&o.flags)&&function hve(e,t,n){N8(t[11],0,t,n,A8(e,n,t),P8(n.parent||t[6],n,t))}(r,i,o)}function S9(e,t,n,i,r){const o=e[n+1],s=null===t;let a=i?ac(o):wd(o),l=!1;for(;0!==a&&(!1===l||s);){const u=e[a+1];twe(e[a],t)&&(l=!0,e[a+1]=i?NR(u):FR(u)),a=i?ac(u):wd(u)}l&&(e[n+1]=i?FR(o):NR(o))}function twe(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&E_(e,t)>=0}const ho={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function k9(e){return e.substring(ho.key,ho.keyEnd)}function A9(e,t){const n=ho.textEnd;return n===t?-1:(t=ho.keyEnd=function owe(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,ho.key=t,n),Y_(e,t,n))}function Y_(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Md(e,t,n){return lc(e,t,n,!1),Md}function po(e,t){return lc(e,t,null,!0),po}function hu(e,t){for(let n=function iwe(e){return function D9(e){ho.key=0,ho.keyEnd=0,ho.value=0,ho.valueEnd=0,ho.textEnd=e.length}(e),A9(e,Y_(e,0,ho.textEnd))}(t);n>=0;n=A9(t,n))Ga(e,k9(t),!0)}function lc(e,t,n,i){const r=ht(),o=yi(),s=md(2);o.firstUpdatePass&&I9(o,e,s,i),t!==zn&&ds(r,s,t)&&L9(o,o.data[Ls()],r,r[11],e,r[s+1]=function mwe(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=Yi(qa(e)))),e}(t,n),i,s)}function R9(e,t){return t>=e.expandoStartIndex}function I9(e,t,n,i){const r=e.data;if(null===r[n+1]){const o=r[Ls()],s=R9(e,n);$9(o,i)&&null===t&&!s&&(t=!1),t=function uwe(e,t,n,i){const r=function DP(e){const t=Nn.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=g0(n=c2(null,e,t,n,i),t.attrs,i),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==r)if(n=c2(r,e,t,n,i),null===o){let l=function dwe(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==wd(i))return e[ac(i)]}(e,t,i);void 0!==l&&Array.isArray(l)&&(l=c2(null,e,t,l[1],i),l=g0(l,t.attrs,i),function fwe(e,t,n,i){e[ac(n?t.classBindings:t.styleBindings)]=i}(e,t,i,l))}else o=function hwe(e,t,n){let i;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)i=g0(i,e[o].hostAttrs,n);return g0(i,t.attrs,n)}(e,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),n}(r,o,t,i),function J0e(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=ac(s),l=wd(s);e[i]=n;let u,c=!1;if(Array.isArray(n)){const d=n;u=d[1],(null===u||E_(d,u)>0)&&(c=!0)}else u=n;if(r)if(0!==l){const f=ac(e[a+1]);e[i+1]=ax(f,a),0!==f&&(e[f+1]=LR(e[f+1],i)),e[a+1]=function Xbe(e,t){return 131071&e|t<<17}(e[a+1],i)}else e[i+1]=ax(a,0),0!==a&&(e[a+1]=LR(e[a+1],i)),a=i;else e[i+1]=ax(l,0),0===a?a=i:e[l+1]=LR(e[l+1],i),l=i;c&&(e[i+1]=FR(e[i+1])),S9(e,u,i,!0),S9(e,u,i,!1),function ewe(e,t,n,i,r){const o=r?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&E_(o,t)>=0&&(n[i+1]=NR(n[i+1]))}(t,u,e,i,o),s=ax(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,n,s,i)}}function c2(e,t,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],i=g0(i,o.hostAttrs,r),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function g0(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Ga(e,s,!!n||t[++o]))}return void 0===e?null:e}function L9(e,t,n,i,r,o,s,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];yx(function Aj(e){return 1==(1&e)}(c)?N9(l,t,n,r,wd(c),s):void 0)||(yx(o)||function kj(e){return 2==(2&e)}(c)&&(o=N9(l,null,n,r,a,s)),function gve(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:ca.DashCase;null==r?e.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ca.Important),e.setStyle(n,i,r,o))}}(i,s,FM(Ls(),n),r,o))}function N9(e,t,n,i,r,o){const s=null===t;let a;for(;r>0;){const l=e[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let f=n[r+1];f===zn&&(f=d?_i:void 0);let h=d?UP(f,i):u===i?f:void 0;if(c&&!yx(h)&&(h=UP(l,i)),yx(h)&&(a=h,s))return a;const y=e[r+1];r=s?ac(y):wd(y)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=UP(l,i))}return a}function yx(e){return void 0!==e}function $9(e,t){return 0!=(e.flags&(t?16:32))}function At(e,t=""){const n=ht(),i=yi(),r=e+22,o=i.firstCreatePass?L_(i,r,1,t,null):i.data[r],s=n[r]=function rR(e,t){return e.createText(t)}(n[11],t);QM(i,n,s,o),au(o,!1)}function Fi(e){return ua("",e,""),Fi}function ua(e,t,n){const i=ht(),r=B_(i,e,t,n);return r!==zn&&function Cd(e,t,n){const i=FM(t,e);!function E8(e,t,n){e.setValue(t,n)}(e[11],i,n)}(i,Ls(),r),ua}function q9(e,t,n){!function cc(e,t,n,i){const r=yi(),o=md(2);r.firstUpdatePass&&I9(r,null,o,i);const s=ht();if(n!==zn&&ds(s,o,n)){const a=r.data[Ls()];if($9(a,i)&&!R9(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=Tb(l,n||"")),s2(r,a,s,n,i)}else!function gwe(e,t,n,i,r,o,s,a){r===zn&&(r=_i);let l=0,c=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;null!==u||null!==d;){const f=l<r.length?r[l+1]:void 0,h=c<o.length?o[c+1]:void 0;let b,y=null;u===d?(l+=2,c+=2,f!==h&&(y=d,b=h)):null===d||null!==u&&u<d?(l+=2,y=u):(c+=2,y=d,b=h),null!==y&&L9(e,t,n,i,y,b,s,a),u=l<r.length?r[l]:null,d=c<o.length?o[c]:null}}(r,a,s,s[11],s[o+1],s[o+1]=function pwe(e,t,n){if(null==n||""===n)return _i;const i=[],r=qa(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else"string"==typeof r&&t(i,r);return i}(e,t,n),i,o)}}(Ga,hu,B_(ht(),e,t,n),!0)}function m0(e,t,n){const i=ht();return ds(i,__(),t)&&Ya(yi(),Dr(),i,e,t,i[11],n,!0),m0}const K_="en-US";let sW=K_;function f2(e,t,n,i,r){if(e=On(e),Array.isArray(e))for(let o=0;o<e.length;o++)f2(e[o],t,n,i,r);else{const o=yi(),s=ht();let a=Vp(e)?e:On(e.provide),l=oj(e);const c=uo(),u=1048575&c.providerIndexes,d=c.directiveStart,f=c.providerIndexes>>20;if(Vp(e)||!e.multi){const h=new Ub(l,r,Pe),y=p2(a,t,r?u:u+f,d);-1===y?(jM(Wb(c,s),o,a),h2(o,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(h),s.push(h)):(n[y]=h,s[y]=h)}else{const h=p2(a,t,u+f,d),y=p2(a,t,u,u+f),b=h>=0&&n[h],C=y>=0&&n[y];if(r&&!C||!r&&!b){jM(Wb(c,s),o,a);const k=function RCe(e,t,n,i,r){const o=new Ub(e,n,Pe);return o.multi=[],o.index=t,o.componentProviders=0,TW(o,r,i&&!n),o}(r?PCe:TCe,n.length,r,i,l);!r&&C&&(n[y].providerFactory=k),h2(o,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(k),s.push(k)}else h2(o,e,h>-1?h:y,TW(n[r?y:h],l,!r&&i));!r&&i&&C&&n[y].componentProviders++}}}function h2(e,t,n,i){const r=Vp(t),o=function Xve(e){return!!e.useClass}(t);if(r||o){const l=(o?On(t.useClass):t).prototype.ngOnDestroy;if(l){const c=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(n);-1===u?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function TW(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function p2(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function TCe(e,t,n,i){return g2(this.multi,[])}function PCe(e,t,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Gb(n,n[1],this.providerFactory.index,i);o=a.slice(0,s),g2(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],g2(r,o);return o}function g2(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function zi(e,t=[]){return n=>{n.providersResolver=(i,r)=>function DCe(e,t,n){const i=yi();if(i.firstCreatePass){const r=El(e);f2(n,i.data,i.blueprint,r,!0),f2(t,i.data,i.blueprint,r,!1)}}(i,r?r(e):e,t)}}class qp{}class PW{}class RW extends qp{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new n2(this);const i=jo(t);this._bootstrapComponents=bd(i.bootstrap),this._r3Injector=vj(t,n,[{provide:qp,useValue:this},{provide:T_,useValue:this.componentFactoryResolver}],Yi(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class m2 extends PW{constructor(t){super(),this.moduleType=t}create(t){return new RW(this.moduleType,t)}}class FCe extends qp{constructor(t,n,i){super(),this.componentFactoryResolver=new n2(this),this.instance=null;const r=new rj([...t,{provide:qp,useValue:this},{provide:T_,useValue:this.componentFactoryResolver}],n||ox(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Mx(e,t,n=null){return new FCe(e,t,n).injector}let LCe=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const i=ej(0,n.type),r=i.length>0?Mx([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,r)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Nt({token:e,providedIn:"environment",factory:()=>new e(qe(jf))}),e})();function IW(e){e.getStandaloneInjector=t=>t.get(LCe).getOrCreateStandaloneInjector(e)}function zs(e,t,n,i){return UW(ht(),Fs(),e,t,n,i)}function xx(e,t,n,i,r,o){return function WW(e,t,n,i,r,o,s,a){const l=t+n;return function _x(e,t,n,i,r){const o=Wp(e,t,n,i);return ds(e,t+2,r)||o}(e,l,r,o,s)?du(e,l+3,a?i.call(a,r,o,s):i(r,o,s)):C0(e,l+3)}(ht(),Fs(),e,t,n,i,r,o)}function C0(e,t){const n=e[t];return n===zn?void 0:n}function UW(e,t,n,i,r,o){const s=t+n;return ds(e,s,r)?du(e,s+1,o?i.call(o,r):i(r)):C0(e,s+1)}function jW(e,t,n,i,r,o,s){const a=t+n;return Wp(e,a,r,o)?du(e,a+2,s?i.call(s,r,o):i(r,o)):C0(e,a+2)}function Yp(e,t){const n=yi();let i;const r=e+22;n.firstCreatePass?(i=function ZCe(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=It(i.type)),s=xo(Pe);try{const a=VM(!1),l=o();return VM(a),function Y0e(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,ht(),r,l),l}finally{xo(s)}}function Z_(e,t,n){const i=e+22,r=ht(),o=m_(r,i);return M0(r,i)?UW(r,Fs(),t,o.transform,n,o):o.transform(n)}function M0(e,t){return e[1].data[t].pure}function y2(e){return t=>{setTimeout(e,void 0,t)}}const Hn=class t1e extends Yt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){let r=t,o=n||(()=>null),s=i;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=y2(o),r&&(r=y2(r)),s&&(s=y2(s)));const a=super.subscribe({next:r,error:o,complete:s});return t instanceof $&&t.add(a),a}};function n1e(){return this._results[jp()]()}class x0{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=jp(),i=x0.prototype;i[n]||(i[n]=n1e)}get changes(){return this._changes||(this._changes=new Hn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const r=Wa(t);(this._changesDetected=!function uye(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let pu=(()=>{class e{}return e.__NG_ELEMENT_ID__=o1e,e})();const i1e=pu,r1e=class extends i1e{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t,n){const i=this._declarationTContainer.tViews,r=ux(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,n||null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(i)),GR(i,r,t),new l0(r)}};function o1e(){return Ex(uo(),ht())}function Ex(e,t){return 4&e.type?new r1e(t,e,P_(e,t)):null}let Ka=(()=>{class e{}return e.__NG_ELEMENT_ID__=s1e,e})();function s1e(){return ZW(uo(),ht())}const a1e=Ka,XW=class extends a1e{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return P_(this._hostTNode,this._hostLView)}get injector(){return new b_(this._hostTNode,this._hostLView)}get parentInjector(){const t=UM(this._hostTNode,this._hostLView);if(VU(t)){const n=v_(t,this._hostLView),i=y_(t);return new b_(n[1].data[i+8],n)}return new b_(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=KW(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,r),s}createComponent(t,n,i,r,o){const s=t&&!function Yb(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const d=n||{};a=d.index,i=d.injector,r=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?t:new c0(Bi(t)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const f=(s?c:this.parentInjector).get(jf,null);f&&(o=f)}const u=l.create(c,r,void 0,o);return this.insert(u.hostView,a),u}insert(t,n){const i=t._lView,r=i[1];if(function R_e(e){return xl(e[3])}(i)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const d=i[3],f=new XW(d,d[6],d[3]);f.detach(f.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function ave(e,t,n,i){const r=10+i,o=n.length;i>0&&(n[r-1][4]=t),i<o-10?(t[4]=n[r],JU(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function lve(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=64}(r,i,s,o);const a=cR(o,s),l=i[11],c=ZM(l,s[7]);return null!==c&&function rve(e,t,n,i,r,o){i[0]=r,i[6]=t,r0(e,i,n,1,r,o)}(r,s[6],l,i,c,a),t.attachToViewContainerRef(),JU(v2(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=KW(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=sR(this._lContainer,n);i&&(GM(v2(this._lContainer),n),k8(i[1],i))}detach(t){const n=this._adjustIndex(t,-1),i=sR(this._lContainer,n);return i&&null!=GM(v2(this._lContainer),n)?new l0(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function KW(e){return e[8]}function v2(e){return e[8]||(e[8]=[])}function ZW(e,t){let n;const i=t[e.index];if(xl(i))n=i;else{let r;if(8&e.type)r=Jr(i);else{const o=t[11];r=o.createComment("");const s=Ua(e,t);Bp(o,ZM(o,s),r,function fve(e,t){return e.nextSibling(t)}(o,s),!1)}t[e.index]=n=Xj(i,t,r,e),fx(t,n)}return new XW(n,e,t)}class b2{constructor(t){this.queryList=t,this.matches=null}clone(){return new b2(this.queryList)}setDirty(){this.queryList.setDirty()}}class w2{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new w2(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==n7(t,n).matches&&this.queries[n].setDirty()}}class QW{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class C2{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new C2(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class M2{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new M2(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(t,n,u1e(n,o)),this.matchTNodeWithReadOption(t,n,WM(n,t,o,!1,!1))}else i===pu?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,WM(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ii||r===Ka||r===pu&&4&n.type)this.addMatch(n.index,-2);else{const o=WM(n,t,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function u1e(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function f1e(e,t,n,i){return-1===n?function d1e(e,t){return 11&e.type?P_(e,t):4&e.type?Ex(e,t):null}(t,e):-2===n?function h1e(e,t,n){return n===Ii?P_(t,e):n===pu?Ex(t,e):n===Ka?ZW(t,e):void 0}(e,t,i):Gb(e,e[1],n,t)}function JW(e,t,n,i){const r=t[19].queries[i];if(null===r.matches){const o=e.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:f1e(t,o[c],s[l+1],n.metadata.read))}r.matches=a}return r.matches}function x2(e,t,n,i){const r=e.queries.getByIndex(n),o=r.matches;if(null!==o){const s=JW(e,t,r,n);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],u=t[-l];for(let d=10;d<u.length;d++){const f=u[d];f[17]===f[3]&&x2(f[1],f,c,i)}if(null!==u[9]){const d=u[9];for(let f=0;f<d.length;f++){const h=d[f];x2(h[1],h,c,i)}}}}}return i}function ii(e){const t=ht(),n=yi(),i=PU();TP(i+1);const r=n7(n,i);if(e.dirty&&function P_e(e){return 4==(4&e[2])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const o=r.crossesNgTemplate?x2(n,t,i,[]):JW(n,t,r,i);e.reset(o,abe),e.notifyOnChanges()}return!0}return!1}function br(e,t,n){const i=yi();i.firstCreatePass&&(t7(i,new QW(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),e7(i,ht(),t)}function Hs(e,t,n,i){const r=yi();if(r.firstCreatePass){const o=uo();t7(r,new QW(t,n,i),o.index),function g1e(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(r,e),2==(2&n)&&(r.staticContentQueries=!0)}e7(r,ht(),n)}function ri(){return function p1e(e,t){return e[19].queries[t].queryList}(ht(),PU())}function e7(e,t,n){const i=new x0(4==(4&n));zj(e,t,i,i.destroy),null===t[19]&&(t[19]=new w2),t[19].queries.push(new b2(i))}function t7(e,t,n){null===e.queries&&(e.queries=new C2),e.queries.track(new M2(t,n))}function n7(e,t){return e.queries.getByIndex(t)}function kx(...e){}const Ax=new bt("Application Initializer");let Ox=(()=>{class e{constructor(n){this.appInits=n,this.resolve=kx,this.reject=kx,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(p0(o))n.push(o);else if(a2(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(qe(Ax,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ey=new bt("AppId",{providedIn:"root",factory:function C7(){return`${O2()}${O2()}${O2()}`}});function O2(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const M7=new bt("Platform Initializer"),Dx=new bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),x7=new bt("appBootstrapListener"),uc=new bt("AnimationModuleType");let L1e=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const gu=new bt("LocaleId",{providedIn:"root",factory:()=>cr(gu,Mn.Optional|Mn.SkipSelf)||function N1e(){return typeof $localize<"u"&&$localize.locale||K_}()});class B1e{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let D2=(()=>{class e{compileModuleSync(n){return new m2(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),o=bd(jo(n).declarations).reduce((s,a)=>{const l=Bi(a);return l&&s.push(new c0(l)),s},[]);return new B1e(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const V1e=(()=>Promise.resolve(0))();function T2(e){typeof Zone>"u"?V1e.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class jn{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hn(!1),this.onMicrotaskEmpty=new Hn(!1),this.onStable=new Hn(!1),this.onError=new Hn(!1),typeof Zone>"u")throw new at(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function U1e(){let e=Ci.requestAnimationFrame,t=Ci.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function G1e(e){const t=()=>{!function W1e(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ci,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,R2(e),e.isCheckStableRunning=!0,P2(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),R2(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return k7(e),n.invokeTask(r,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),A7(e)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return k7(e),n.invoke(r,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),A7(e)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,R2(e),P2(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jn.isInAngularZone())throw new at(909,!1)}static assertNotInAngularZone(){if(jn.isInAngularZone())throw new at(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,j1e,kx,kx);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const j1e={};function P2(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function R2(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function k7(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function A7(e){e._nesting--,P2(e)}class q1e{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hn,this.onMicrotaskEmpty=new Hn,this.onStable=new Hn,this.onError=new Hn}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}}const O7=new bt(""),Tx=new bt("");let L2,I2=(()=>{class e{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,L2||(function Y1e(e){L2=e}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jn.assertNotInAngularZone(),T2(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())T2(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}}return e.\u0275fac=function(n){return new(n||e)(qe(jn),qe(F2),qe(Tx))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})(),F2=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return L2?.findTestabilityInTree(this,n,i)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Yf=null;const D7=new bt("AllowMultipleToken"),N2=new bt("PlatformDestroyListeners");class T7{constructor(t,n){this.name=t,this.token=n}}function R7(e,t,n=[]){const i=`Platform: ${t}`,r=new bt(i);return(o=[])=>{let s=$2();if(!s||s.injector.get(D7,!1)){const a=[...n,...o,{provide:r,useValue:!0}];e?e(a):function Z1e(e){if(Yf&&!Yf.get(D7,!1))throw new at(400,!1);Yf=e;const t=e.get(F7);(function P7(e){const t=e.get(M7,null);t&&t.forEach(n=>n())})(e)}(function I7(e=[],t){return $s.create({name:t,providers:[{provide:MR,useValue:"platform"},{provide:N2,useValue:new Set([()=>Yf=null])},...e]})}(a,i))}return function J1e(e){const t=$2();if(!t)throw new at(401,!1);return t}()}}function $2(){return Yf?.get(F7)??null}let F7=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function N7(e,t){let n;return n="noop"===e?new q1e:("zone.js"===e?void 0:e)||new jn(t),n}(i?.ngZone,function L7(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(i)),o=[{provide:jn,useValue:r}];return r.run(()=>{const s=$s.create({providers:o,parent:this.injector,name:n.moduleType.name}),a=n.create(s),l=a.injector.get(vd,null);if(!l)throw new at(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Px(this._modules,a),c.unsubscribe()})}),function $7(e,t,n){try{const i=n();return p0(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(Ox);return c.runInitializers(),c.donePromise.then(()=>(function aW(e){as(e,"Expected localeId to be defined"),"string"==typeof e&&(sW=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(gu,K_)||K_),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,i=[]){const r=B7({},i);return function X1e(e,t,n){const i=new m2(n);return Promise.resolve(i)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(n){const i=n.injector.get(ty);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new at(403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new at(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(N2,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(qe($s))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function B7(e,t){return Array.isArray(t)?t.reduce(B7,e):{...e,...t}}let ty=(()=>{class e{constructor(n,i,r){this._zone=n,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new dt(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new dt(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{jn.assertNotInAngularZone(),T2(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{jn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=Pi(o,s.pipe(Ut()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof sj;if(!this._injector.get(Ox).done)throw!r&&function Ip(e){const t=Bi(e)||ls(e)||cs(e);return null!==t&&t.standalone}(n),new at(405,false);let s;s=r?n:this._injector.get(T_).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function K1e(e){return e.isBoundToModule}(s)?void 0:this._injector.get(qp),c=s.create($s.NULL,[],i||s.selector,a),u=c.location.nativeElement,d=c.injector.get(O7,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Px(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new at(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Px(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(x7,[]).concat(this._bootstrapListeners).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Px(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new at(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(qe(jn),qe(jf),qe(vd))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Px(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let Al=(()=>{class e{}return e.__NG_ELEMENT_ID__=nMe,e})();function nMe(e){return function iMe(e,t,n){if(zb(e)&&!n){const i=ja(e.index,t);return new l0(i,i)}return 47&e.type?new l0(t[16],t):null}(uo(),ht(),16==(16&e))}class G7{constructor(){}supports(t){return u0(t)}create(t){return new cMe(t)}}const lMe=(e,t)=>t;class cMe{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||lMe}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<Y7(i,r,o)?n:i,a=Y7(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,u=l-r;if(c!=u){for(let f=0;f<c;f++){const h=f<o.length?o[f]:o[f]=0,y=h+f;u<=y&&y<c&&(o[f]=h+1)}o[s.previousIndex]=u-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!u0(t))throw new at(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function j0e(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[jp()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new uMe(n,i),o,r),t}_verifyReinsertion(t,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const r=null===n?this._itHead:n._next;return t._next=r,t._prev=n,null===r?this._itTail=t:r._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new q7),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new q7),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class uMe{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dMe{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class q7{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new dMe,this.map.set(n,i)),i.add(t)}get(t,n){const r=this.map.get(t);return r?r.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Y7(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class X7{constructor(){}supports(t){return t instanceof Map||o2(t)}create(){return new fMe}}class fMe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||o2(t)))throw new at(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,n);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new hMe(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class hMe{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function K7(){return new Fx([new G7])}let Fx=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||K7()),deps:[[e,new k_,new Uf]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new at(901,!1)}}return e.\u0275prov=Nt({token:e,providedIn:"root",factory:K7}),e})();function Z7(){return new S0([new X7])}let S0=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||Z7()),deps:[[e,new k_,new Uf]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(i)return i;throw new at(901,!1)}}return e.\u0275prov=Nt({token:e,providedIn:"root",factory:Z7}),e})();const mMe=R7(null,"core",[]);let _Me=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(qe(ty))},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})();let Lx=null;function mu(){return Lx}const Jn=new bt("DocumentToken");let U2=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:function(){return function wMe(){return qe(Q7)}()},providedIn:"platform"}),e})();const CMe=new bt("Location Initialized");let Q7=(()=>{class e extends U2{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mu().getBaseHref(this._doc)}onPopState(n){const i=mu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=mu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,i,r){J7()?this._history.pushState(n,i,r):this.location.hash=r}replaceState(n,i,r){J7()?this._history.replaceState(n,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn))},e.\u0275prov=Nt({token:e,factory:function(){return function MMe(){return new Q7(qe(Jn))}()},providedIn:"platform"}),e})();function J7(){return!!window.history.pushState}function j2(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function eG(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Sd(e){return e&&"?"!==e[0]?"?"+e:e}let Kp=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:function(){return cr(nG)},providedIn:"root"}),e})();const tG=new bt("appBaseHref");let nG=(()=>{class e extends Kp{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??cr(Jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return j2(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+Sd(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){const s=this.prepareExternalUrl(r+Sd(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){const s=this.prepareExternalUrl(r+Sd(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(qe(U2),qe(tG,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xMe=(()=>{class e extends Kp{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=j2(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+Sd(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+Sd(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(qe(U2),qe(tG,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})(),Nx=(()=>{class e{constructor(n){this._subject=new Hn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._baseHref=eG(iG(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Sd(i))}normalize(n){return e.stripTrailingSlash(function SMe(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,iG(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Sd(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Sd(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}}return e.normalizeQueryParams=Sd,e.joinWithSlash=j2,e.stripTrailingSlash=eG,e.\u0275fac=function(n){return new(n||e)(qe(Kp))},e.\u0275prov=Nt({token:e,factory:function(){return function EMe(){return new Nx(qe(Kp))}()},providedIn:"root"}),e})();function iG(e){return e.replace(/\/index.html$/,"")}let Zp=(()=>{class e{constructor(n,i,r,o){this._iterableDiffers=n,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(u0(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),n.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),n.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Yi(i.item)}`);this._toggleClass(i.item,!0)}),n.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(i=>this._toggleClass(i,!0)):Object.keys(n).forEach(i=>this._toggleClass(i,!!n[i])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(i=>this._toggleClass(i,!1)):Object.keys(n).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(n,i){(n=n.trim())&&n.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return e.\u0275fac=function(n){return new(n||e)(Pe(Fx),Pe(S0),Pe(Ii),Pe(Sl))},e.\u0275dir=nn({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class dxe{constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ny=(()=>{class e{constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new dxe(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),pG(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{pG(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ka),Pe(pu),Pe(Fx))},e.\u0275dir=nn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function pG(e,t){e.context.$implicit=t.item}let _u=(()=>{class e{constructor(n,i){this._viewContainer=n,this._context=new hxe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){gG("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){gG("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ka),Pe(pu))},e.\u0275dir=nn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class hxe{constructor(){this.$implicit=null,this.ngIf=null}}function gG(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Yi(t)}'.`)}class eI{constructor(t,n){this._viewContainerRef=t,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let iy=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(n){this._ngSwitch=n,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(n)}_matchCase(n){const i=n==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(n){if(this._defaultViews&&n!==this._defaultUsed){this._defaultUsed=n;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(n)}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=nn({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),qx=(()=>{class e{constructor(n,i,r){this.ngSwitch=r,r._addCase(),this._view=new eI(n,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ka),Pe(pu),Pe(iy,9))},e.\u0275dir=nn({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),mG=(()=>{class e{constructor(n,i,r){r._addDefault(new eI(n,i))}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ka),Pe(pu),Pe(iy,9))},e.\u0275dir=nn({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0}),e})(),O0=(()=>{class e{constructor(n,i,r){this._ngEl=n,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){const[r,o]=n.split("."),s=-1===r.indexOf("-")?void 0:ca.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(S0),Pe(Sl))},e.\u0275dir=nn({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})();function hc(e,t){return new at(2100,!1)}class mxe{createSubscription(t,n){return t.subscribe({next:n,error:i=>{throw i}})}dispose(t){t.unsubscribe()}}class _xe{createSubscription(t,n){return t.then(n,i=>{throw i})}dispose(t){}}const yxe=new _xe,vxe=new mxe;let yG=(()=>{class e{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i))}_selectStrategy(n){if(p0(n))return yxe;if(f9(n))return vxe;throw hc()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return e.\u0275fac=function(n){return new(n||e)(Pe(Al,16))},e.\u0275pipe=Uo({name:"async",type:e,pure:!1,standalone:!0}),e})();const wxe=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let tI=(()=>{class e{transform(n){if(null==n)return null;if("string"!=typeof n)throw hc();return n.replace(wxe,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Uo({name:"titlecase",type:e,pure:!0,standalone:!0}),e})(),fa=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})();const bG="browser";function wG(e){return e===bG}let $xe=(()=>{class e{}return e.\u0275prov=Nt({token:e,providedIn:"root",factory:()=>new Bxe(qe(Jn),window)}),e})();class Bxe{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function zxe(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=CG(this.window.history)||CG(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function CG(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class sI extends class pEe extends class bMe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function vMe(e){Lx||(Lx=e)}(new sI)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function gEe(){return T0=T0||document.querySelector("base"),T0?T0.getAttribute("href"):null}();return null==n?null:function mEe(e){Kx=Kx||document.createElement("a"),Kx.setAttribute("href",e);const t=Kx.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){T0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function cxe(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Kx,T0=null;const kG=new bt("TRANSITION_ID"),yEe=[{provide:Ax,useFactory:function _Ee(e,t,n){return()=>{n.get(Ox).donePromise.then(()=>{const i=mu(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[kG,Jn,$s],multi:!0}];let bEe=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();const Zx=new bt("EventManagerPlugins");let Qx=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>r.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(qe(Zx),qe(jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();class AG{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const r=mu().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let OG=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})(),P0=(()=>{class e extends OG{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,r){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(i.appendChild(s))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(DG),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(n,r,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(DG))}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();function DG(e){mu().remove(e)}const aI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lI=/%COMP%/g;function Jx(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Jx(e,r,n):(r=r.replace(lI,e),n.push(r))}return n}function RG(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let eE=(()=>{class e{constructor(n,i,r){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new cI(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case Cl.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new SEe(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(n),r}case 1:case Cl.ShadowDom:return new kEe(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const r=Jx(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(qe(Qx),qe(P0),qe(ey))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();class cI{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(aI[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(FG(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(FG(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;const o=aI[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const r=aI[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(ca.DashCase|ca.Important)?t.style.setProperty(n,i,r&ca.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&ca.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,RG(i)):this.eventManager.addEventListener(t,n,RG(i))}}function FG(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class SEe extends cI{constructor(t,n,i,r){super(t),this.component=i;const o=Jx(r+"-"+i.id,i.styles,[]);n.addStyles(o),this.contentAttr=function MEe(e){return"_ngcontent-%COMP%".replace(lI,e)}(r+"-"+i.id),this.hostAttr=function xEe(e){return"_nghost-%COMP%".replace(lI,e)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}class kEe extends cI{constructor(t,n,i,r){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Jx(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let AEe=(()=>{class e extends AG{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();const LG=["alt","control","meta","shift"],OEe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DEe={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let TEe=(()=>{class e extends AG{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,i,r){const o=e.parseEventName(i),s=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mu().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=e._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),LG.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=OEe[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),LG.forEach(s=>{s!==r&&(0,DEe[s])(n)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();const $G=[{provide:Dx,useValue:bG},{provide:M7,useValue:function PEe(){sI.makeCurrent()},multi:!0},{provide:Jn,useFactory:function IEe(){return function vve(e){pR=e}(document),document},deps:[]}],FEe=R7(mMe,"browser",$G),BG=new bt(""),zG=[{provide:Tx,useClass:class vEe{addToWindow(t){Ci.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},Ci.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ci.getAllAngularRootElements=()=>t.getAllRootElements(),Ci.frameworkStabilizers||(Ci.frameworkStabilizers=[]),Ci.frameworkStabilizers.push(i=>{const r=Ci.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,i){return null==n?null:t.getTestability(n)??(i?mu().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:O7,useClass:I2,deps:[jn,F2,Tx]},{provide:I2,useClass:I2,deps:[jn,F2,Tx]}],HG=[{provide:MR,useValue:"root"},{provide:vd,useFactory:function REe(){return new vd},deps:[]},{provide:Zx,useClass:AEe,multi:!0,deps:[Jn,jn,Dx]},{provide:Zx,useClass:TEe,multi:!0,deps:[Jn]},{provide:eE,useClass:eE,deps:[Qx,P0,ey]},{provide:a0,useExisting:eE},{provide:OG,useExisting:P0},{provide:P0,useClass:P0,deps:[Jn]},{provide:Qx,useClass:Qx,deps:[Zx,jn]},{provide:class Hxe{},useClass:bEe,deps:[]},[]];let VG=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:ey,useValue:n.appId},{provide:kG,useExisting:ey},yEe]}}}return e.\u0275fac=function(n){return new(n||e)(qe(BG,12))},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({providers:[...HG,...zG],imports:[fa,_Me]}),e})(),UG=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn))},e.\u0275prov=Nt({token:e,factory:function(n){let i=null;return i=n?new n:function NEe(){return new UG(qe(Jn))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;let fI=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:function(n){let i=null;return i=n?new(n||e):qe(GG),i},providedIn:"root"}),e})(),GG=(()=>{class e extends fI{constructor(n){super(),this._doc=n}sanitize(n,i){if(null==i)return null;switch(n){case Ri.NONE:return i;case Ri.HTML:return cu(i,"HTML")?qa(i):X8(this._doc,String(i)).toString();case Ri.STYLE:return cu(i,"Style")?qa(i):i;case Ri.SCRIPT:if(cu(i,"Script"))return qa(i);throw new Error("unsafe value used in a script context");case Ri.URL:return cu(i,"URL")?qa(i):nx(String(i));case Ri.RESOURCE_URL:if(cu(i,"ResourceURL"))return qa(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${n} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(n){return function Sve(e){return new bve(e)}(n)}bypassSecurityTrustStyle(n){return function kve(e){return new wve(e)}(n)}bypassSecurityTrustScript(n){return function Ave(e){return new Cve(e)}(n)}bypassSecurityTrustUrl(n){return function Ove(e){return new Mve(e)}(n)}bypassSecurityTrustResourceUrl(n){return function Dve(e){return new xve(e)}(n)}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn))},e.\u0275prov=Nt({token:e,factory:function(n){let i=null;return i=n?new n:function jEe(e){return new GG(e.get(Jn))}(qe($s)),i},providedIn:"root"}),e})();function ln(...e){return J(e,pd(e))}class wr extends Yt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const tE=W(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:WEe}=Array,{getPrototypeOf:GEe,prototype:qEe,keys:YEe}=Object;function qG(e){if(1===e.length){const t=e[0];if(WEe(t))return{args:t,keys:null};if(function XEe(e){return e&&"object"==typeof e&&GEe(e)===qEe}(t)){const n=YEe(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}const{isArray:KEe}=Array;function hI(e){return xt(t=>function ZEe(e,t){return KEe(t)?e(...t):e(t)}(e,t))}function YG(e,t){return e.reduce((n,i,r)=>(n[i]=t[r],n),{})}function nE(...e){const t=pd(e),n=iu(e),{args:i,keys:r}=qG(e);if(0===i.length)return J([],t);const o=new dt(function QEe(e,t,n=Vt){return i=>{XG(t,()=>{const{length:r}=e,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)XG(t,()=>{const c=J(e[l],t);let u=!1;c.subscribe(Qt(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,t,r?s=>YG(r,s):Vt));return n?o.pipe(hI(n)):o}function XG(e,t,n){e?za(n,e,t):t()}function Ad(){return nu(1)}function iE(...e){return Ad()(J(e,pd(e)))}function pI(e){return new dt(t=>{Ti(e()).subscribe(t)})}function ry(e,t){const n=L(e)?e:()=>e,i=r=>r.error(n());return new dt(t?r=>t.schedule(i,0,r):i)}function gI(){return pt((e,t)=>{let n=null;e._refCount++;const i=Qt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}class KG extends dt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Tt(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new $;const n=this.getSubject();t.add(this.source.subscribe(Qt(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=$.EMPTY)}return t}refCount(){return gI()(this)}}function Tl(e,t){return pt((n,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();n.subscribe(Qt(i,l=>{r?.unsubscribe();let c=0;const u=o++;Ti(e(l,u)).subscribe(r=Qt(i,d=>i.next(t?t(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Us(e){return e<=0?()=>la:pt((t,n)=>{let i=0;t.subscribe(Qt(n,r=>{++i<=e&&(n.next(r),e<=i&&n.complete())}))})}function Qp(...e){const t=pd(e);return pt((n,i)=>{(t?iE(e,n,t):iE(e,n)).subscribe(i)})}function ha(e,t){return pt((n,i)=>{let r=0;n.subscribe(Qt(i,o=>e.call(t,o,r++)&&i.next(o)))})}function rE(e){return pt((t,n)=>{let i=!1;t.subscribe(Qt(n,r=>{i=!0,n.next(r)},()=>{i||n.next(e),n.complete()}))})}function ZG(e=JEe){return pt((t,n)=>{let i=!1;t.subscribe(Qt(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(e())))})}function JEe(){return new tE}function pc(e,t){const n=arguments.length>=2;return i=>i.pipe(e?ha((r,o)=>e(r,o,i)):Vt,Us(1),n?rE(t):ZG(()=>new tE))}function Kf(e,t){return L(t)?Ir(e,t,1):Ir(e,1)}function no(e,t,n){const i=L(e)||t||n?{next:e,error:t,complete:n}:e;return i?pt((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(Qt(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Vt}function Od(e){return pt((t,n)=>{let o,i=null,r=!1;i=t.subscribe(Qt(n,void 0,void 0,s=>{o=Ti(e(s,Od(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function eSe(e,t,n,i,r){return(o,s)=>{let a=n,l=t,c=0;o.subscribe(Qt(s,u=>{const d=c++;l=a?e(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function QG(e,t){return pt(eSe(e,t,arguments.length>=2,!0))}function mI(e){return e<=0?()=>la:pt((t,n)=>{let i=[];t.subscribe(Qt(n,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(const r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function JG(e,t){const n=arguments.length>=2;return i=>i.pipe(e?ha((r,o)=>e(r,o,i)):Vt,mI(1),n?rE(t):ZG(()=>new tE))}function eq(e,t=!1){return pt((n,i)=>{let r=0;n.subscribe(Qt(i,o=>{const s=e(o,r++);(s||t)&&i.next(o),!s&&i.complete()}))})}function oE(e){return pt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const ei="primary",R0=Symbol("RouteTitle");class nSe{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function oy(e){return new nSe(e)}function iSe(e,t,n){const i=n.path.split("/");if(i.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function yu(e,t){const n=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!tq(e[r],t[r]))return!1;return!0}function tq(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}return e===t}function nq(e){return Array.prototype.concat.apply([],e)}function iq(e){return e.length>0?e[e.length-1]:null}function Xo(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Zf(e){return a2(e)?e:p0(e)?J(Promise.resolve(e)):ln(e)}const sSe={exact:function sq(e,t,n){if(!eg(e.segments,t.segments)||!sE(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!e.children[i]||!sq(e.children[i],t.children[i],n))return!1;return!0},subset:aq},rq={exact:function aSe(e,t){return yu(e,t)},subset:function lSe(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>tq(e[n],t[n]))},ignored:()=>!0};function oq(e,t,n){return sSe[n.paths](e.root,t.root,n.matrixParams)&&rq[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function aq(e,t,n){return lq(e,t,t.segments,n)}function lq(e,t,n,i){if(e.segments.length>n.length){const r=e.segments.slice(0,n.length);return!(!eg(r,n)||t.hasChildren()||!sE(r,n,i))}if(e.segments.length===n.length){if(!eg(e.segments,n)||!sE(e.segments,n,i))return!1;for(const r in t.children)if(!e.children[r]||!aq(e.children[r],t.children[r],i))return!1;return!0}{const r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(eg(e.segments,r)&&sE(e.segments,r,i)&&e.children[ei])&&lq(e.children[ei],t,o,i)}}function sE(e,t,n){return t.every((i,r)=>rq[n](e[r].parameters,i.parameters))}class Jp{constructor(t,n,i){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oy(this.queryParams)),this._queryParamMap}toString(){return dSe.serialize(this)}}class oi{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Xo(n,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return aE(this)}}class I0{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=oy(this.parameters)),this._parameterMap}toString(){return fq(this)}}function eg(e,t){return e.length===t.length&&e.every((n,i)=>n.path===t[i].path)}let cq=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:function(){return new yI},providedIn:"root"}),e})();class yI{parse(t){const n=new bSe(t);return new Jp(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${F0(t.root,!0)}`,i=function pSe(e){const t=Object.keys(e).map(n=>{const i=e[n];return Array.isArray(i)?i.map(r=>`${lE(n)}=${lE(r)}`).join("&"):`${lE(n)}=${lE(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${i}${"string"==typeof t.fragment?`#${function fSe(e){return encodeURI(e)}(t.fragment)}`:""}`}}const dSe=new yI;function aE(e){return e.segments.map(t=>fq(t)).join("/")}function F0(e,t){if(!e.hasChildren())return aE(e);if(t){const n=e.children[ei]?F0(e.children[ei],!1):"",i=[];return Xo(e.children,(r,o)=>{o!==ei&&i.push(`${o}:${F0(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function uSe(e,t){let n=[];return Xo(e.children,(i,r)=>{r===ei&&(n=n.concat(t(i,r)))}),Xo(e.children,(i,r)=>{r!==ei&&(n=n.concat(t(i,r)))}),n}(e,(i,r)=>r===ei?[F0(e.children[ei],!1)]:[`${r}:${F0(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ei]?`${aE(e)}/${n[0]}`:`${aE(e)}/(${n.join("//")})`}}function uq(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lE(e){return uq(e).replace(/%3B/gi,";")}function vI(e){return uq(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cE(e){return decodeURIComponent(e)}function dq(e){return cE(e.replace(/\+/g,"%20"))}function fq(e){return`${vI(e.path)}${function hSe(e){return Object.keys(e).map(t=>`;${vI(t)}=${vI(e[t])}`).join("")}(e.parameters)}`}const gSe=/^[^\/()?;=#]+/;function uE(e){const t=e.match(gSe);return t?t[0]:""}const mSe=/^[^=?&#]+/,ySe=/^[^&#]+/;class bSe{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new oi([],{}):new oi([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[ei]=new oi(t,n)),i}parseSegment(){const t=uE(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new at(4009,!1);return this.capture(t),new I0(cE(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=uE(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=uE(this.remaining);r&&(i=r,this.capture(i))}t[cE(n)]=cE(i)}parseQueryParam(t){const n=function _Se(e){const t=e.match(mSe);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const s=function vSe(e){const t=e.match(ySe);return t?t[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=dq(n),o=dq(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=uE(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new at(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ei);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[ei]:new oi([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new at(4011,!1)}}function bI(e){return e.segments.length>0?new oi([],{[ei]:e}):e}function dE(e){const t={};for(const i of Object.keys(e.children)){const o=dE(e.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function wSe(e){if(1===e.numberOfChildren&&e.children[ei]){const t=e.children[ei];return new oi(e.segments.concat(t.segments),t.children)}return e}(new oi(e.segments,t))}function tg(e){return e instanceof Jp}function xSe(e,t,n,i,r){if(0===n.length)return sy(t.root,t.root,t.root,i,r);const o=function gq(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new pq(!0,0,e);let t=0,n=!1;const i=e.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Xo(o.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new pq(n,t,i)}(n);return o.toRoot()?sy(t.root,t.root,new oi([],{}),i,r):function s(l){const c=function SSe(e,t,n,i){if(e.isAbsolute)return new ay(t.root,!0,0);if(-1===i)return new ay(n,n===t.root,0);return function mq(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new at(4005,!1);r=i.segments.length}return new ay(i,!1,r-o)}(n,i+(L0(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,t,e.snapshot?._urlSegment,l),u=c.processChildren?$0(c.segmentGroup,c.index,o.commands):CI(c.segmentGroup,c.index,o.commands);return sy(t.root,c.segmentGroup,u,i,r)}(e.snapshot?._lastPathIndex)}function L0(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function N0(e){return"object"==typeof e&&null!=e&&e.outlets}function sy(e,t,n,i,r){let s,o={};i&&Xo(i,(l,c)=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=e===t?n:hq(e,t,n);const a=bI(dE(s));return new Jp(a,o,r)}function hq(e,t,n){const i={};return Xo(e.children,(r,o)=>{i[o]=r===t?n:hq(r,t,n)}),new oi(e.segments,i)}class pq{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&L0(i[0]))throw new at(4003,!1);const r=i.find(N0);if(r&&r!==iq(i))throw new at(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ay{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function CI(e,t,n){if(e||(e=new oi([],{})),0===e.segments.length&&e.hasChildren())return $0(e,t,n);const i=function ASe(e,t,n){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;const s=e.segments[r],a=n[i];if(N0(a))break;const l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!yq(l,c,s))return o;i+=2}else{if(!yq(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const o=new oi(e.segments.slice(0,i.pathIndex),{});return o.children[ei]=new oi(e.segments.slice(i.pathIndex),e.children),$0(o,0,r)}return i.match&&0===r.length?new oi(e.segments,{}):i.match&&!e.hasChildren()?MI(e,t,n):i.match?$0(e,0,r):MI(e,t,n)}function $0(e,t,n){if(0===n.length)return new oi(e.segments,{});{const i=function kSe(e){return N0(e[0])?e[0].outlets:{[ei]:e}}(n),r={};return Xo(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=CI(e.children[s],t,o))}),Xo(e.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new oi(e.segments,r)}}function MI(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){const o=n[r];if(N0(o)){const l=OSe(o.outlets);return new oi(i,l)}if(0===r&&L0(n[0])){i.push(new I0(e.segments[t].path,_q(n[0]))),r++;continue}const s=N0(o)?o.outlets[ei]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&L0(a)?(i.push(new I0(s,_q(a))),r+=2):(i.push(new I0(s,{})),r++)}return new oi(i,{})}function OSe(e){const t={};return Xo(e,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[i]=MI(new oi([],{}),0,n))}),t}function _q(e){const t={};return Xo(e,(n,i)=>t[i]=`${n}`),t}function yq(e,t,n){return e==n.path&&yu(t,n.parameters)}class Dd{constructor(t,n){this.id=t,this.url=n}}class xI extends Dd{constructor(t,n,i="imperative",r=null){super(t,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ng extends Dd{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fE extends Dd{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vq extends Dd{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class DSe extends Dd{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TSe extends Dd{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PSe extends Dd{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class RSe extends Dd{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ISe extends Dd{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FSe{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class LSe{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class NSe{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $Se{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BSe{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zSe{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bq{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wq{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=EI(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=EI(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=SI(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return SI(t,this._root).map(n=>n.value)}}function EI(e,t){if(e===t.value)return t;for(const n of t.children){const i=EI(e,n);if(i)return i}return null}function SI(e,t){if(e===t.value)return[t];for(const n of t.children){const i=SI(e,n);if(i.length)return i.unshift(t),i}return[]}class Td{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function ly(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class Cq extends wq{constructor(t,n){super(t),this.snapshot=n,kI(this,t)}toString(){return this.snapshot.toString()}}function Mq(e,t){const n=function VSe(e,t){const s=new hE([],{},{},"",{},ei,t,null,e.root,-1,{});return new Eq("",new Td(s,[]))}(e,t),i=new wr([new I0("",{})]),r=new wr({}),o=new wr({}),s=new wr({}),a=new wr(""),l=new ig(i,r,s,a,o,ei,t,n.root);return l.snapshot=n.root,new Cq(new Td(l,[]),n)}class ig{constructor(t,n,i,r,o,s,a,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(xt(c=>c[R0]))??ln(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(xt(t=>oy(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(xt(t=>oy(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xq(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const r=n[i],o=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function USe(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class hE{constructor(t,n,i,r,o,s,a,l,c,u,d,f){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.[R0],this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._correctedLastPathIndex=f??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Eq extends wq{constructor(t,n){super(n),this.url=t,kI(this,n)}toString(){return Sq(this._root)}}function kI(e,t){t.value._routerState=e,t.children.forEach(n=>kI(e,n))}function Sq(e){const t=e.children.length>0?` { ${e.children.map(Sq).join(", ")} } `:"";return`${e.value}${t}`}function AI(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,yu(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),yu(t.params,n.params)||e.params.next(n.params),function rSe(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!yu(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),yu(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function OI(e,t){const n=yu(e.params,t.params)&&function cSe(e,t){return eg(e,t)&&e.every((n,i)=>yu(n.parameters,t[i].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||OI(e.parent,t.parent))}function B0(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const r=function WSe(e,t,n){return t.children.map(i=>{for(const r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return B0(e,i,r);return B0(e,i)})}(e,t,n);return new Td(i,r)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>B0(e,a)),s}}const i=function GSe(e){return new ig(new wr(e.url),new wr(e.params),new wr(e.queryParams),new wr(e.fragment),new wr(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(o=>B0(e,o));return new Td(i,r)}}const DI="ngNavigationCancelingError";function kq(e,t){const{redirectTo:n,navigationBehaviorOptions:i}=tg(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Aq(!1,0,t);return r.url=n,r.navigationBehaviorOptions=i,r}function Aq(e,t,n){const i=new Error("NavigationCancelingError: "+(e||""));return i[DI]=!0,i.cancellationCode=t,n&&(i.url=n),i}function Oq(e){return Dq(e)&&tg(e.url)}function Dq(e){return e&&e[DI]}class qSe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new z0,this.attachRef=null}}let z0=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new qSe,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const pE=!1;let TI=(()=>{class e{constructor(n,i,r,o,s){this.parentContexts=n,this.location=i,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Hn,this.deactivateEvents=new Hn,this.attachEvents=new Hn,this.detachEvents=new Hn,this.name=r||ei,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new at(4012,pE);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new at(4012,pE);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new at(4012,pE);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new at(4013,pE);this._activatedRoute=n;const r=this.location,s=n._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new YSe(n,a,r.injector);if(i&&function XSe(e){return!!e.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(s);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(Pe(z0),Pe(Ka),Vf("name"),Pe(Al),Pe(jf))},e.\u0275dir=nn({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class YSe{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===ig?this.route:t===z0?this.childContexts:this.parent.get(t,n)}}let PI=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ir({type:e,selectors:[["ng-component"]],standalone:!0,features:[IW],decls:1,vars:0,template:function(n,i){1&n&&Un(0,"router-outlet")},dependencies:[TI],encapsulation:2}),e})();function Tq(e,t){return e.providers&&!e._injector&&(e._injector=Mx(e.providers,t,`Route: ${e.path}`)),e._injector??t}function II(e){const t=e.children&&e.children.map(II),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ei&&(n.component=PI),n}function Pl(e){return e.outlet||ei}function Pq(e,t){const n=e.filter(i=>Pl(i)===t);return n.push(...e.filter(i=>Pl(i)!==t)),n}function H0(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class eke{constructor(t,n,i,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),AI(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const r=ly(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Xo(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=ly(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=ly(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,n,i){const r=ly(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new zSe(o.value.snapshot))}),t.children.length&&this.forwardEvent(new $Se(t.value.snapshot))}activateRoutes(t,n,i){const r=t.value,o=n?n.value:null;if(AI(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),AI(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=H0(r.snapshot),l=a?.get(T_)??null;s.attachRef=null,s.route=r,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}}class Rq{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gE{constructor(t,n){this.component=t,this.route=n}}function tke(e,t,n){const i=e._root;return V0(i,t?t._root:null,n,[i.value])}function cy(e,t){const n=Symbol(),i=t.get(e,n);return i===n?"function"!=typeof e||function Pp(e){return null!==s_(e)}(e)?t.get(e):e:i}function V0(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=ly(t);return e.children.forEach(s=>{(function ike(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function rke(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!eg(e.url,t.url);case"pathParamsOrQueryParamsChange":return!eg(e.url,t.url)||!yu(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!OI(e,t)||!yu(e.queryParams,t.queryParams);default:return!OI(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Rq(i)):(o.data=s.data,o._resolvedData=s._resolvedData),V0(e,t,o.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new gE(a.outlet.component,s))}else s&&U0(t,a,r),r.canActivateChecks.push(new Rq(i)),V0(e,null,o.component?a?a.children:null:n,i,r)})(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Xo(o,(s,a)=>U0(s,n.getContext(a),r)),r}function U0(e,t,n){const i=ly(e),r=e.value;Xo(i,(o,s)=>{U0(o,r.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new gE(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function j0(e){return"function"==typeof e}function FI(e){return e instanceof tE||"EmptyError"===e?.name}const mE=Symbol("INITIAL_VALUE");function uy(){return Tl(e=>nE(e.map(t=>t.pipe(Us(1),Qp(mE)))).pipe(xt(t=>{for(const n of t)if(!0!==n){if(n===mE)return mE;if(!1===n||n instanceof Jp)return n}return!0}),ha(t=>t!==mE),Us(1)))}function Iq(e){return function dn(...e){return Zt(e)}(no(t=>{if(tg(t))throw kq(0,t)}),xt(t=>!0===t))}const LI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fq(e,t,n,i,r){const o=NI(e,t,n);return o.matched?function wke(e,t,n,i){const r=t.canMatch;return r&&0!==r.length?ln(r.map(s=>{const a=cy(s,e);return Zf(function uke(e){return e&&j0(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))})).pipe(uy(),Iq()):ln(!0)}(i=Tq(t,i),t,n).pipe(xt(s=>!0===s?o:{...LI})):ln(o)}function NI(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...LI}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(t.matcher||iSe)(n,e,t);if(!r)return{...LI};const o={};Xo(r.posParams,(a,l)=>{o[l]=a.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function _E(e,t,n,i,r="corrected"){if(n.length>0&&function xke(e,t,n){return n.some(i=>yE(e,t,i)&&Pl(i)!==ei)}(e,n,i)){const s=new oi(t,function Mke(e,t,n,i){const r={};r[ei]=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Pl(o)!==ei){const s=new oi([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,r[Pl(o)]=s}return r}(e,t,i,new oi(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function Eke(e,t,n){return n.some(i=>yE(e,t,i))}(e,n,i)){const s=new oi(e.segments,function Cke(e,t,n,i,r,o){const s={};for(const a of i)if(yE(e,n,a)&&!r[Pl(a)]){const l=new oi([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[Pl(a)]=l}return{...r,...s}}(e,t,n,i,e.children,r));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new oi(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function yE(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Lq(e,t,n,i){return!!(Pl(e)===i||i!==ei&&yE(t,n,e))&&("**"===e.path||NI(t,e,n).matched)}function Nq(e,t,n){return 0===t.length&&!e.children[n]}const vE=!1;class bE{constructor(t){this.segmentGroup=t||null}}class $q{constructor(t){this.urlTree=t}}function W0(e){return ry(new bE(e))}function Bq(e){return ry(new $q(e))}class Oke{constructor(t,n,i,r,o){this.injector=t,this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const t=_E(this.urlTree.root,[],[],this.config).segmentGroup,n=new oi(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,ei).pipe(xt(o=>this.createUrlTree(dE(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Od(o=>{if(o instanceof $q)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof bE?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,ei).pipe(xt(r=>this.createUrlTree(dE(r),t.queryParams,t.fragment))).pipe(Od(r=>{throw r instanceof bE?this.noMatchError(r):r}))}noMatchError(t){return new at(4002,vE)}createUrlTree(t,n,i){const r=bI(t);return new Jp(r,n,i)}expandSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,n,i).pipe(xt(o=>new oi([],o))):this.expandSegment(t,i,n,i.segments,r,!0)}expandChildren(t,n,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return J(r).pipe(Kf(o=>{const s=i.children[o],a=Pq(n,o);return this.expandSegmentGroup(t,a,s,o).pipe(xt(l=>({segment:l,outlet:o})))}),QG((o,s)=>(o[s.outlet]=s.segment,o),{}),JG())}expandSegment(t,n,i,r,o,s){return J(i).pipe(Kf(a=>this.expandSegmentAgainstRoute(t,n,i,a,r,o,s).pipe(Od(c=>{if(c instanceof bE)return ln(null);throw c}))),pc(a=>!!a),Od((a,l)=>{if(FI(a))return Nq(n,r,o)?ln(new oi([],{})):W0(n);throw a}))}expandSegmentAgainstRoute(t,n,i,r,o,s,a){return Lq(r,n,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,n,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s):W0(n):W0(n)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Bq(o):this.lineralizeSegments(i,o).pipe(Ir(s=>{const a=new oi(s,{});return this.expandSegment(t,a,n,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=NI(n,r,o);if(!a)return W0(n);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?Bq(d):this.lineralizeSegments(r,d).pipe(Ir(f=>this.expandSegment(t,n,i,f.concat(c),s,!1)))}matchSegmentAgainstRoute(t,n,i,r,o){return"**"===i.path?(t=Tq(i,t),i.loadChildren?(i._loadedRoutes?ln({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe(xt(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new oi(r,{})))):ln(new oi(r,{}))):Fq(n,i,r,t).pipe(Tl(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(t=i._injector??t,i,r).pipe(Ir(u=>{const d=u.injector??t,f=u.routes,{segmentGroup:h,slicedSegments:y}=_E(n,a,l,f),b=new oi(h.segments,h.children);if(0===y.length&&b.hasChildren())return this.expandChildren(d,f,b).pipe(xt(I=>new oi(a,I)));if(0===f.length&&0===y.length)return ln(new oi(a,{}));const C=Pl(i)===o;return this.expandSegment(d,b,f,y,C?ei:o,!0).pipe(xt(O=>new oi(a.concat(O.segments),O.children)))})):W0(n)))}getChildConfig(t,n,i){return n.children?ln({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?ln({routes:n._loadedRoutes,injector:n._loadedInjector}):function bke(e,t,n,i){const r=t.canLoad;return void 0===r||0===r.length?ln(!0):ln(r.map(s=>{const a=cy(s,e);return Zf(function ske(e){return e&&j0(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))})).pipe(uy(),Iq())}(t,n,i).pipe(Ir(r=>r?this.configLoader.loadChildren(t,n).pipe(no(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function kke(e){return ry(Aq(vE,3))}())):ln({routes:[],injector:t})}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ln(i);if(r.numberOfChildren>1||!r.children[ei])return ry(new at(4e3,vE));r=r.children[ei]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreateUrlTree(t,n,i,r){const o=this.createSegmentGroup(t,n.root,i,r);return new Jp(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return Xo(t,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=n[a]}else i[o]=r}),i}createSegmentGroup(t,n,i,r){const o=this.createSegments(t,n.segments,i,r);let s={};return Xo(n.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,i,r)}),new oi(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){const r=i[n.path.substring(1)];if(!r)throw new at(4001,vE);return r}findOrReturn(t,n){let i=0;for(const r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}}class Tke{}class Ike{constructor(t,n,i,r,o,s,a,l){this.injector=t,this.rootComponentType=n,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const t=_E(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,ei).pipe(xt(n=>{if(null===n)return null;const i=new hE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ei,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Td(i,n),o=new Eq(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const n=t.value,i=xq(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r)}processChildren(t,n,i){return J(Object.keys(i.children)).pipe(Kf(r=>{const o=i.children[r],s=Pq(n,r);return this.processSegmentGroup(t,s,o,r)}),QG((r,o)=>r&&o?(r.push(...o),r):null),eq(r=>null!==r),rE(null),JG(),xt(r=>{if(null===r)return null;const o=zq(r);return function Fke(e){e.sort((t,n)=>t.value.outlet===ei?-1:n.value.outlet===ei?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}))}processSegment(t,n,i,r,o){return J(n).pipe(Kf(s=>this.processSegmentAgainstRoute(s._injector??t,s,i,r,o)),pc(s=>!!s),Od(s=>{if(FI(s))return Nq(i,r,o)?ln([]):ln(null);throw s}))}processSegmentAgainstRoute(t,n,i,r,o){if(n.redirectTo||!Lq(n,i,r,o))return ln(null);let s;if("**"===n.path){const a=r.length>0?iq(r).parameters:{},l=Vq(i)+r.length;s=ln({snapshot:new hE(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jq(n),Pl(n),n.component??n._loadedComponent??null,n,Hq(i),l,Wq(n),l),consumedSegments:[],remainingSegments:[]})}else s=Fq(i,n,r,t).pipe(xt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=Vq(i)+l.length;return{snapshot:new hE(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jq(n),Pl(n),n.component??n._loadedComponent??null,n,Hq(i),d,Wq(n),d),consumedSegments:l,remainingSegments:c}}));return s.pipe(Tl(a=>{if(null===a)return ln(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;t=n._injector??t;const d=n._loadedInjector??t,f=function Lke(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:h,slicedSegments:y}=_E(i,c,u,f.filter(C=>void 0===C.redirectTo),this.relativeLinkResolution);if(0===y.length&&h.hasChildren())return this.processChildren(d,f,h).pipe(xt(C=>null===C?null:[new Td(l,C)]));if(0===f.length&&0===y.length)return ln([new Td(l,[])]);const b=Pl(n)===o;return this.processSegment(d,f,h,y,b?ei:o).pipe(xt(C=>null===C?null:[new Td(l,C)]))}))}}function Nke(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function zq(e){const t=[],n=new Set;for(const i of e){if(!Nke(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):t.push(i)}for(const i of n){const r=zq(i.children);t.push(new Td(i.value,r))}return t.filter(i=>!n.has(i))}function Hq(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Vq(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function jq(e){return e.data||{}}function Wq(e){return e.resolve||{}}function Gq(e){return"string"==typeof e.title||null===e.title}function $I(e){return Tl(t=>{const n=e(t);return n?J(n).pipe(xt(()=>t)):ln(t)})}let qq=(()=>{class e{buildTitle(n){let i,r=n.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ei);return i}getResolvedTitleForRoute(n){return n.data[R0]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:function(){return cr(Yq)},providedIn:"root"}),e})(),Yq=(()=>{class e extends qq{constructor(n){super(),this.title=n}updateTitle(n){const i=this.buildTitle(n);void 0!==i&&this.title.setTitle(i)}}return e.\u0275fac=function(n){return new(n||e)(qe(UG))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Wke{}class qke extends class Gke{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const CE=new bt("",{providedIn:"root",factory:()=>({})}),BI=new bt("ROUTES");let zI=(()=>{class e{constructor(n,i){this.injector=n,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ln(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const i=Zf(n.loadComponent()).pipe(no(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),oE(()=>{this.componentLoaders.delete(n)})),r=new KG(i,()=>new Yt).pipe(gI());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ln({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(xt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(n).injector,c=nq(l.get(BI,[],Mn.Self|Mn.Optional)));return{routes:c.map(II),injector:l}}),oE(()=>{this.childrenLoaders.delete(i)})),s=new KG(o,()=>new Yt).pipe(gI());return this.childrenLoaders.set(i,s),s}loadModuleFactoryOrRoutes(n){return Zf(n()).pipe(Ir(i=>i instanceof PW||Array.isArray(i)?ln(i):J(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(n){return new(n||e)(qe($s),qe(D2))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Xke{}class Kke{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function Zke(e){throw e}function Qke(e,t,n){return t.parse("/")}const Jke={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eAe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Kq(){const e=cr(cq),t=cr(z0),n=cr(Nx),i=cr($s),r=cr(D2),o=cr(BI,{optional:!0})??[],s=cr(CE,{optional:!0})??{},a=cr(Yq),l=cr(qq,{optional:!0}),c=cr(Xke,{optional:!0}),u=cr(Wke,{optional:!0}),d=new Ko(null,e,t,n,i,r,nq(o));return c&&(d.urlHandlingStrategy=c),u&&(d.routeReuseStrategy=u),d.titleStrategy=l??a,function tAe(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,d),d}let Ko=(()=>{class e{constructor(n,i,r,o,s,a,l){this.rootComponentType=n,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yt,this.errorHandler=Zke,this.malformedUriErrorHandler=Qke,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ln(void 0),this.urlHandlingStrategy=new Kke,this.routeReuseStrategy=new qke,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(zI),this.configLoader.onLoadEndListener=f=>this.triggerEvent(new LSe(f)),this.configLoader.onLoadStartListener=f=>this.triggerEvent(new FSe(f)),this.ngModule=s.get(qp),this.console=s.get(L1e);const d=s.get(jn);this.isNgZoneEnabled=d instanceof jn&&jn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function oSe(){return new Jp(new oi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Mq(this.currentUrlTree,this.rootComponentType),this.transitions=new wr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const i=this.events;return n.pipe(ha(r=>0!==r.id),xt(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Tl(r=>{let o=!1,s=!1;return ln(r).pipe(no(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Tl(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Zq(a.source)&&(this.browserUrlTree=a.extractedUrl),ln(a).pipe(Tl(d=>{const f=this.transitions.getValue();return i.next(new xI(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions.getValue()?la:Promise.resolve(d)}),function Dke(e,t,n,i){return Tl(r=>function Ake(e,t,n,i,r){return new Oke(e,t,n,i,r).apply()}(e,t,n,r.extractedUrl,i).pipe(xt(o=>({...r,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),no(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},r.urlAfterRedirects=d.urlAfterRedirects}),function Bke(e,t,n,i,r,o){return Ir(s=>function Rke(e,t,n,i,r,o,s="emptyOnly",a="legacy"){return new Ike(e,t,n,i,r,s,a,o).recognize().pipe(Tl(l=>null===l?function Pke(e){return new dt(t=>t.error(e))}(new Tke):ln(l)))}(e,t,n,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r,o).pipe(xt(a=>({...s,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),no(d=>{if(r.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(h,d)}this.browserUrlTree=d.urlAfterRedirects}const f=new DSe(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(f)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:f,extractedUrl:h,source:y,restoredState:b,extras:C}=a,k=new xI(f,this.serializeUrl(h),y,b);i.next(k);const O=Mq(h,this.rootComponentType).snapshot;return ln(r={...a,targetSnapshot:O,urlAfterRedirects:h,extras:{...C,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),la}),no(a=>{const l=new TSe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),xt(a=>r={...a,guards:tke(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function fke(e,t){return Ir(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?ln({...n,guardsResult:!0}):function hke(e,t,n,i){return J(e).pipe(Ir(r=>function vke(e,t,n,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?ln(o.map(a=>{const l=H0(t)??r,c=cy(a,l);return Zf(function cke(e){return e&&j0(e.canDeactivate)}(c)?c.canDeactivate(e,t,n,i):l.runInContext(()=>c(e,t,n,i))).pipe(pc())})).pipe(uy()):ln(!0)}(r.component,r.route,n,t,i)),pc(r=>!0!==r,!0))}(s,i,r,e).pipe(Ir(a=>a&&function oke(e){return"boolean"==typeof e}(a)?function pke(e,t,n,i){return J(t).pipe(Kf(r=>iE(function mke(e,t){return null!==e&&t&&t(new NSe(e)),ln(!0)}(r.route.parent,i),function gke(e,t){return null!==e&&t&&t(new BSe(e)),ln(!0)}(r.route,i),function yke(e,t,n){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function nke(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>pI(()=>ln(s.guards.map(l=>{const c=H0(s.node)??n,u=cy(l,c);return Zf(function lke(e){return e&&j0(e.canActivateChild)}(u)?u.canActivateChild(i,e):c.runInContext(()=>u(i,e))).pipe(pc())})).pipe(uy())));return ln(o).pipe(uy())}(e,r.path,n),function _ke(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ln(!0);const r=i.map(o=>pI(()=>{const s=H0(t)??n,a=cy(o,s);return Zf(function ake(e){return e&&j0(e.canActivate)}(a)?a.canActivate(t,e):s.runInContext(()=>a(t,e))).pipe(pc())}));return ln(r).pipe(uy())}(e,r.route,n))),pc(r=>!0!==r,!0))}(i,o,e,t):ln(a)),xt(a=>({...n,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),no(a=>{if(r.guardsResult=a.guardsResult,tg(a.guardsResult))throw kq(0,a.guardsResult);const l=new PSe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),ha(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),$I(a=>{if(a.guards.canActivateChecks.length)return ln(a).pipe(no(l=>{const c=new RSe(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Tl(l=>{let c=!1;return ln(l).pipe(function zke(e,t){return Ir(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return ln(n);let o=0;return J(r).pipe(Kf(s=>function Hke(e,t,n,i){const r=e.routeConfig,o=e._resolve;return void 0!==r?.title&&!Gq(r)&&(o[R0]=r.title),function Vke(e,t,n,i){const r=function Uke(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===r.length)return ln({});const o={};return J(r).pipe(Ir(s=>function jke(e,t,n,i){const r=H0(t)??i,o=cy(e,r);return Zf(o.resolve?o.resolve(t,n):r.runInContext(()=>o(t,n)))}(e[s],t,n,i).pipe(pc(),no(a=>{o[s]=a}))),mI(1),function tSe(e){return xt(()=>e)}(o),Od(s=>FI(s)?la:ry(s)))}(o,e,t,i).pipe(xt(s=>(e._resolvedData=s,e.data=xq(e,n).resolve,r&&Gq(r)&&(e.data[R0]=r.title),null)))}(s.route,i,e,t)),no(()=>o++),mI(1),Ir(s=>o===r.length?ln(n):la))})}(this.paramsInheritanceStrategy,this.ngModule.injector),no({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),no(l=>{const c=new ISe(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),$I(a=>{const l=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(no(d=>{c.component=d}),xt(()=>{})));for(const d of c.children)u.push(...l(d));return u};return nE(l(a.targetSnapshot.root)).pipe(rE(),Us(1))}),$I(()=>this.afterPreactivation()),xt(a=>{const l=function jSe(e,t,n){const i=B0(e,t._root,n?n._root:void 0);return new Cq(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),no(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>xt(i=>(new eke(t,i.targetRouterState,i.currentRouterState,n).activate(e),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),no({next(){o=!0},complete(){o=!0}}),oE(()=>{o||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Od(a=>{if(s=!0,Dq(a)){Oq(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new fE(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(l),Oq(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Zq(r.source)};this.scheduleNavigation(c,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new vq(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return la}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},o=n.state?.navigationId?n.state:null;if(o){const a={...o};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const s=this.parseUrl(n.url);this.scheduleNavigation(s,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(II),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:s;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}return null!==d&&(d=this.removeEmptyProps(d)),xSe(c,this.currentUrlTree,n,d,u??null)}navigateByUrl(n,i={skipLocationChange:!1}){const r=tg(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(n,i={skipLocationChange:!1}){return function nAe(e){for(let t=0;t<e.length;t++){if(null==e[t])throw new at(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,n)}return i}isActive(n,i){let r;if(r=!0===i?{...Jke}:!1===i?{...eAe}:i,tg(n))return oq(this.currentUrlTree,n,r);const o=this.parseUrl(n);return oq(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.keys(n).reduce((i,r)=>{const o=n[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new ng(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((f,h)=>{a=f,l=h});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),d=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}setBrowserUrl(n,i){const r=this.urlSerializer.serialize(n),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(n,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,i,r){const o=new fE(n.id,this.serializeUrl(n.extractedUrl),i,r);this.triggerEvent(o),n.resolve(!1)}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return e.\u0275fac=function(n){F_()},e.\u0275prov=Nt({token:e,factory:function(){return Kq()},providedIn:"root"}),e})();function Zq(e){return"imperative"!==e}class Qq{}let oAe=(()=>{class e{constructor(n,i,r,o,s){this.router=n,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ha(n=>n instanceof ng),Kf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=Mx(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return J(r).pipe(nu())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(n,i):ln(null);const o=r.pipe(Ir(s=>null===s?ln(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return i.loadComponent&&!i._loadedComponent?J([o,this.loader.loadComponent(i)]).pipe(nu()):o})}}return e.\u0275fac=function(n){return new(n||e)(qe(Ko),qe(D2),qe(jf),qe(Qq),qe(zI))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const UI=new bt("");let Jq=(()=>{class e{constructor(n,i,r={}){this.router=n,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof xI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ng&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof bq&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.router.triggerEvent(new bq(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){F_()},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();function dy(e,t){return{\u0275kind:e,\u0275providers:t}}function jI(e){return[{provide:BI,multi:!0,useValue:e}]}function tY(){const e=cr($s);return t=>{const n=e.get(ty);if(t!==n.components[0])return;const i=e.get(Ko),r=e.get(nY);1===e.get(WI)&&i.initialNavigation(),e.get(iY,null,Mn.Optional)?.setUpPreloading(),e.get(UI,null,Mn.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const nY=new bt("",{factory:()=>new Yt}),WI=new bt("",{providedIn:"root",factory:()=>1});const iY=new bt("");function cAe(e){return dy(0,[{provide:iY,useExisting:oAe},{provide:Qq,useExisting:e}])}const rY=new bt("ROUTER_FORROOT_GUARD"),uAe=[Nx,{provide:cq,useClass:yI},{provide:Ko,useFactory:Kq},z0,{provide:ig,useFactory:function eY(e){return e.routerState.root},deps:[Ko]},zI];function dAe(){return new T7("Router",Ko)}let oY=(()=>{class e{constructor(n){}static forRoot(n,i){return{ngModule:e,providers:[uAe,[],jI(n),{provide:rY,useFactory:gAe,deps:[[Ko,new Uf,new k_]]},{provide:CE,useValue:i||{}},i?.useHash?{provide:Kp,useClass:xMe}:{provide:Kp,useClass:nG},{provide:UI,useFactory:()=>{const e=cr(Ko),t=cr($xe),n=cr(CE);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Jq(e,t,n)}},i?.preloadingStrategy?cAe(i.preloadingStrategy).\u0275providers:[],{provide:T7,multi:!0,useFactory:dAe},i?.initialNavigation?mAe(i):[],[{provide:sY,useFactory:tY},{provide:x7,multi:!0,useExisting:sY}]]}}static forChild(n){return{ngModule:e,providers:[jI(n)]}}}return e.\u0275fac=function(n){return new(n||e)(qe(rY,8))},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[PI]}),e})();function gAe(e){return"guarded"}function mAe(e){return["disabled"===e.initialNavigation?dy(3,[{provide:Ax,multi:!0,useFactory:()=>{const t=cr(Ko);return()=>{t.setUpLocationChangeListener()}}},{provide:WI,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?dy(2,[{provide:WI,useValue:0},{provide:Ax,multi:!0,deps:[$s],useFactory:t=>{const n=t.get(CMe,Promise.resolve());let i=!1;return()=>n.then(()=>new Promise(o=>{const s=t.get(Ko),a=t.get(nY);(function r(o){t.get(Ko).events.pipe(ha(a=>a instanceof ng||a instanceof fE||a instanceof vq),xt(a=>a instanceof ng||a instanceof fE&&(0===a.code||1===a.code)&&null),ha(a=>null!==a),Us(1)).subscribe(()=>{o()})})(()=>{o(!0),i=!0}),s.afterPreactivation=()=>(o(!0),i||a.closed?ln(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const sY=new bt("");function GI(e,t){let n=0;if(void 0===t)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function yAe(){}function qI(e){return null==e?yAe:function(){return this.querySelector(e)}}function aY(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function bAe(){return[]}function lY(e){return null==e?bAe:function(){return this.querySelectorAll(e)}}function cY(e){return function(){return this.matches(e)}}function uY(e){return function(t){return t.matches(e)}}var MAe=Array.prototype.find;function EAe(){return this.firstElementChild}var kAe=Array.prototype.filter;function AAe(){return Array.from(this.children)}function dY(e){return new Array(e.length)}function SE(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function RAe(e){return function(){return e}}function IAe(e,t,n,i,r,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new SE(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function FAe(e,t,n,i,r,o,s){var a,l,h,c=new Map,u=t.length,d=o.length,f=new Array(u);for(a=0;a<u;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",c.has(h)?r[a]=l:c.set(h,l));for(a=0;a<d;++a)h=s.call(e,o[a],a,o)+"",(l=c.get(h))?(i[a]=l,l.__data__=o[a],c.delete(h)):n[a]=new SE(e,o[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(r[a]=l)}function LAe(e){return e.__data__}function $Ae(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function jAe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}SE.prototype={constructor:SE,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var YI="http://www.w3.org/1999/xhtml";const fY={svg:"http://www.w3.org/2000/svg",xhtml:YI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kE(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),fY.hasOwnProperty(t)?{space:fY[t],local:e}:e}function ZAe(e){return function(){this.removeAttribute(e)}}function QAe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function JAe(e,t){return function(){this.setAttribute(e,t)}}function eOe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function tOe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function nOe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function hY(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function rOe(e){return function(){this.style.removeProperty(e)}}function oOe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sOe(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function fy(e,t){return e.style.getPropertyValue(t)||hY(e).getComputedStyle(e,null).getPropertyValue(t)}function lOe(e){return function(){delete this[e]}}function cOe(e,t){return function(){this[e]=t}}function uOe(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function pY(e){return e.trim().split(/^|\s+/)}function XI(e){return e.classList||new gY(e)}function gY(e){this._node=e,this._names=pY(e.getAttribute("class")||"")}function mY(e,t){for(var n=XI(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function _Y(e,t){for(var n=XI(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function fOe(e){return function(){mY(this,e)}}function hOe(e){return function(){_Y(this,e)}}function pOe(e,t){return function(){(t.apply(this,arguments)?mY:_Y)(this,e)}}function mOe(){this.textContent=""}function _Oe(e){return function(){this.textContent=e}}function yOe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function bOe(){this.innerHTML=""}function wOe(e){return function(){this.innerHTML=e}}function COe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xOe(){this.nextSibling&&this.parentNode.appendChild(this)}function SOe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AOe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===YI&&t.documentElement.namespaceURI===YI?t.createElement(e):t.createElementNS(n,e)}}function OOe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function yY(e){var t=kE(e);return(t.local?OOe:AOe)(t)}function TOe(){return null}function ROe(){var e=this.parentNode;e&&e.removeChild(this)}function FOe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function LOe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zOe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function HOe(e){return function(){var t=this.__on;if(t){for(var o,n=0,i=-1,r=t.length;n<r;++n)o=t[n],e.type&&o.type!==e.type||o.name!==e.name?t[++i]=o:this.removeEventListener(o.type,o.listener,o.options);++i?t.length=i:delete this.__on}}}function VOe(e,t,n){return function(){var r,i=this.__on,o=function BOe(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function vY(e,t,n){var i=hY(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function jOe(e,t){return function(){return vY(this,e,t)}}function WOe(e,t){return function(){return vY(this,e,t.apply(this,arguments))}}gY.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var KI=[null];function js(e,t){this._groups=e,this._parents=t}function bY(){return new js([[document.documentElement]],KI)}js.prototype=bY.prototype={constructor:js,select:function vAe(e){"function"!=typeof e&&(e=qI(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l,c,o=t[r],s=o.length,a=i[r]=new Array(s),u=0;u<s;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new js(i,this._parents)},selectAll:function CAe(e){e="function"==typeof e?function wAe(e){return function(){return aY(e.apply(this,arguments))}}(e):lY(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var l,s=t[o],a=s.length,c=0;c<a;++c)(l=s[c])&&(i.push(e.call(l,l.__data__,c,s)),r.push(l));return new js(i,r)},selectChild:function SAe(e){return this.select(null==e?EAe:function xAe(e){return function(){return MAe.call(this.children,e)}}("function"==typeof e?e:uY(e)))},selectChildren:function DAe(e){return this.selectAll(null==e?AAe:function OAe(e){return function(){return kAe.call(this.children,e)}}("function"==typeof e?e:uY(e)))},filter:function TAe(e){"function"!=typeof e&&(e=cY(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l,o=t[r],s=o.length,a=i[r]=[],c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new js(i,this._parents)},data:function NAe(e,t){if(!arguments.length)return Array.from(this,LAe);var n=t?FAe:IAe,i=this._parents,r=this._groups;"function"!=typeof e&&(e=RAe(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=r[c],f=d.length,h=$Ae(e.call(u,u&&u.__data__,c,i)),y=h.length,b=a[c]=new Array(y),C=s[c]=new Array(y),k=l[c]=new Array(f);n(u,d,b,C,k,h,t);for(var z,q,O=0,I=0;O<y;++O)if(z=b[O]){for(O>=I&&(I=O+1);!(q=C[I])&&++I<y;);z._next=q||null}}return(s=new js(s,i))._enter=a,s._exit=l,s},enter:function PAe(){return new js(this._enter||this._groups.map(dY),this._parents)},exit:function BAe(){return new js(this._exit||this._groups.map(dY),this._parents)},join:function zAe(e,t,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function HAe(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=Math.min(r,i.length),a=new Array(r),l=0;l<s;++l)for(var h,c=n[l],u=i[l],d=c.length,f=a[l]=new Array(d),y=0;y<d;++y)(h=c[y]||u[y])&&(f[y]=h);for(;l<r;++l)a[l]=n[l];return new js(a,this._parents)},selection:function YOe(){return this},order:function VAe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s,i=e[t],r=i.length-1,o=i[r];--r>=0;)(s=i[r])&&(o&&4^s.compareDocumentPosition(o)&&o.parentNode.insertBefore(s,o),o=s);return this},sort:function UAe(e){function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}e||(e=jAe);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var c,s=n[o],a=s.length,l=r[o]=new Array(a),u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new js(r,this._parents).order()},call:function WAe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function GAe(){return Array.from(this)},node:function qAe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function YAe(){let e=0;for(const t of this)++e;return e},empty:function XAe(){return!this.node()},each:function KAe(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a,r=t[n],o=0,s=r.length;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this},attr:function iOe(e,t){var n=kE(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?QAe:ZAe:"function"==typeof t?n.local?nOe:tOe:n.local?eOe:JAe)(n,t))},style:function aOe(e,t,n){return arguments.length>1?this.each((null==t?rOe:"function"==typeof t?sOe:oOe)(e,t,n??"")):fy(this.node(),e)},property:function dOe(e,t){return arguments.length>1?this.each((null==t?lOe:"function"==typeof t?uOe:cOe)(e,t)):this.node()[e]},classed:function gOe(e,t){var n=pY(e+"");if(arguments.length<2){for(var i=XI(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?pOe:t?fOe:hOe)(n,t))},text:function vOe(e){return arguments.length?this.each(null==e?mOe:("function"==typeof e?yOe:_Oe)(e)):this.node().textContent},html:function MOe(e){return arguments.length?this.each(null==e?bOe:("function"==typeof e?COe:wOe)(e)):this.node().innerHTML},raise:function EOe(){return this.each(xOe)},lower:function kOe(){return this.each(SOe)},append:function DOe(e){var t="function"==typeof e?e:yY(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function POe(e,t){var n="function"==typeof e?e:yY(e),i=null==t?TOe:"function"==typeof t?t:qI(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function IOe(){return this.each(ROe)},clone:function NOe(e){return this.select(e?LOe:FOe)},datum:function $Oe(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function UOe(e,t,n){var r,s,i=zOe(e+""),o=i.length;if(!(arguments.length<2)){for(a=t?VOe:HOe,r=0;r<o;++r)this.each(a(i[r],t,n));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(r=0,u=a[l];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value},dispatch:function GOe(e,t){return this.each(("function"==typeof t?WOe:jOe)(e,t))},[Symbol.iterator]:function*qOe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s,i=e[t],r=0,o=i.length;r<o;++r)(s=i[r])&&(yield s)}};const G0=bY;var XOe={value:()=>{}};function wY(){for(var i,e=0,t=arguments.length,n={};e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new AE(n)}function AE(e){this._=e}function KOe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}function ZOe(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function CY(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=XOe,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}AE.prototype=wY.prototype={constructor:AE,on:function(e,t){var r,n=this._,i=KOe(e+"",n),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=CY(n[r],e.name,t);else if(null==t)for(r in n)n[r]=CY(n[r],e.name,null);return this}for(;++o<s;)if((r=(e=i[o]).type)&&(r=ZOe(n[r],e.name)))return r},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new AE(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,o,n=new Array(r),i=0;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,r=(o=this._[e]).length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};const OE=wY;var DE,X0,hy=0,q0=0,Y0=0,TE=0,rg=0,PE=0,K0="object"==typeof performance&&performance.now?performance:Date,xY="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function RE(){return rg||(xY(QOe),rg=K0.now()+PE)}function QOe(){rg=0}function Z0(){this._call=this._time=this._next=null}function ZI(e,t,n){var i=new Z0;return i.restart(e,t,n),i}function EY(){rg=(TE=K0.now())+PE,hy=q0=0;try{!function JOe(){RE(),++hy;for(var t,e=DE;e;)(t=rg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hy}()}finally{hy=0,function tDe(){for(var e,n,t=DE,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:DE=n);X0=e,QI(i)}(),rg=0}}function eDe(){var e=K0.now(),t=e-TE;t>1e3&&(PE-=t,TE=e)}function QI(e){hy||(q0&&(q0=clearTimeout(q0)),e-rg>24?(e<1/0&&(q0=setTimeout(EY,e-K0.now()-PE)),Y0&&(Y0=clearInterval(Y0))):(Y0||(TE=K0.now(),Y0=setInterval(eDe,1e3)),hy=1,xY(EY)))}function SY(e,t,n){var i=new Z0;return i.restart(r=>{i.stop(),e(r+t)},t=null==t?0:+t,n),i}Z0.prototype=ZI.prototype={constructor:Z0,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?RE():+n)+(null==t?0:+t),!this._next&&X0!==this&&(X0?X0._next=this:DE=this,X0=this),this._call=e,this._time=n,QI()},stop:function(){this._call&&(this._call=null,this._time=1/0,QI())}};var nDe=OE("start","end","cancel","interrupt"),iDe=[];function LE(e,t,n,i,r,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function rDe(e,t,n){var r,i=e.__transition;function s(c){var u,d,f,h;if(1!==n.state)return l();for(u in i)if((h=i[u]).name===n.name){if(3===h.state)return SY(s);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[u]):+u<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[u])}if(SY(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=5,1),d=-1,f=r.length;++d<f;)r[d].call(e,u);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var c in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=ZI(function o(c){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)},0,n.time)}(e,n,{name:t,index:i,group:r,on:nDe,tween:iDe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function tF(e,t){var n=gc(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function vu(e,t){var n=gc(e,t);if(n.state>3)throw new Error("too late; already running");return n}function gc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function NE(e,t){var i,r,s,n=e.__transition,o=!0;if(n){for(s in t=null==t?null:t+"",n)(i=n[s]).name===t?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]):o=!1;o&&delete e.__transition}}function Rl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var $E,DY=180/Math.PI,nF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function TY(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*DY,skewX:Math.atan(l)*DY,scaleX:s,scaleY:a}}function PY(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}return function(c,u){var d=[],f=[];return c=e(c),u=e(u),function o(c,u,d,f,h,y){if(c!==d||u!==f){var b=h.push("translate(",null,t,null,n);y.push({i:b-4,x:Rl(c,d)},{i:b-2,x:Rl(u,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}(c.translateX,c.translateY,u.translateX,u.translateY,d,f),function s(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:Rl(c,u)})):u&&d.push(r(d)+"rotate("+u+i)}(c.rotate,u.rotate,d,f),function a(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:Rl(c,u)}):u&&d.push(r(d)+"skewX("+u+i)}(c.skewX,u.skewX,d,f),function l(c,u,d,f,h,y){if(c!==d||u!==f){var b=h.push(r(h)+"scale(",null,",",null,")");y.push({i:b-4,x:Rl(c,d)},{i:b-2,x:Rl(u,f)})}else(1!==d||1!==f)&&h.push(r(h)+"scale("+d+","+f+")")}(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(h){for(var C,y=-1,b=f.length;++y<b;)d[(C=f[y]).i]=C.x(h);return d.join("")}}}var RY=PY(function sDe(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?nF:TY(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),IY=PY(function aDe(e){return null!=e&&($E||($E=document.createElementNS("http://www.w3.org/2000/svg","g")),$E.setAttribute("transform",e),e=$E.transform.baseVal.consolidate())?TY((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):nF},", ",")",")");function lDe(e,t){var n,i;return function(){var r=vu(this,e),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===t){(i=i.slice()).splice(s,1);break}r.tween=i}}function cDe(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=vu(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function iF(e,t,n){var i=e._id;return e.each(function(){var r=vu(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return gc(r,i).value[t]}}function py(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Q0(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Qf(){}var gy=1/.7,my="\\s*([+-]?\\d+)\\s*",J0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dDe=/^#([0-9a-f]{3,8})$/,fDe=new RegExp(`^rgb\\(${my},${my},${my}\\)$`),hDe=new RegExp(`^rgb\\(${bu},${bu},${bu}\\)$`),pDe=new RegExp(`^rgba\\(${my},${my},${my},${J0}\\)$`),gDe=new RegExp(`^rgba\\(${bu},${bu},${bu},${J0}\\)$`),mDe=new RegExp(`^hsl\\(${J0},${bu},${bu}\\)$`),_De=new RegExp(`^hsla\\(${J0},${bu},${bu},${J0}\\)$`),FY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function LY(){return this.rgb().formatHex()}function NY(){return this.rgb().formatRgb()}function sg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dDe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?$Y(t):3===n?new So(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?BE(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?BE(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=fDe.exec(e))?new So(t[1],t[2],t[3],1):(t=hDe.exec(e))?new So(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=pDe.exec(e))?BE(t[1],t[2],t[3],t[4]):(t=gDe.exec(e))?BE(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=mDe.exec(e))?HY(t[1],t[2]/100,t[3]/100,1):(t=_De.exec(e))?HY(t[1],t[2]/100,t[3]/100,t[4]):FY.hasOwnProperty(e)?$Y(FY[e]):"transparent"===e?new So(NaN,NaN,NaN,0):null}function $Y(e){return new So(e>>16&255,e>>8&255,255&e,1)}function BE(e,t,n,i){return i<=0&&(e=t=n=NaN),new So(e,t,n,i)}function rF(e){return e instanceof Qf||(e=sg(e)),e?new So((e=e.rgb()).r,e.g,e.b,e.opacity):new So}function Jf(e,t,n,i){return 1===arguments.length?rF(e):new So(e,t,n,i??1)}function So(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function BY(){return`#${lg(this.r)}${lg(this.g)}${lg(this.b)}`}function zY(){const e=zE(this.opacity);return`${1===e?"rgb(":"rgba("}${ag(this.r)}, ${ag(this.g)}, ${ag(this.b)}${1===e?")":`, ${e})`}`}function zE(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ag(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lg(e){return((e=ag(e))<16?"0":"")+e.toString(16)}function HY(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mc(e,t,n,i)}function VY(e){if(e instanceof mc)return new mc(e.h,e.s,e.l,e.opacity);if(e instanceof Qf||(e=sg(e)),!e)return new mc;if(e instanceof mc)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(n<i):n===o?(i-t)/a+2:(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new mc(s,a,l,e.opacity)}function HE(e,t,n,i){return 1===arguments.length?VY(e):new mc(e,t,n,i??1)}function mc(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function UY(e){return(e=(e||0)%360)<0?e+360:e}function VE(e){return Math.max(0,Math.min(1,e||0))}function oF(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function jY(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}function WY(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1];return jY((n-i/t)*t,i>0?e[i-1]:2*r-o,r,o,i<t-1?e[i+2]:2*o-r)}}function GY(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t);return jY((n-i/t)*t,e[(i+t-1)%t],e[i%t],e[(i+1)%t],e[(i+2)%t])}}py(Qf,sg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:LY,formatHex:LY,formatHex8:function yDe(){return this.rgb().formatHex8()},formatHsl:function vDe(){return VY(this).formatHsl()},formatRgb:NY,toString:NY}),py(So,Jf,Q0(Qf,{brighter(e){return e=null==e?gy:Math.pow(gy,e),new So(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new So(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new So(ag(this.r),ag(this.g),ag(this.b),zE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BY,formatHex:BY,formatHex8:function bDe(){return`#${lg(this.r)}${lg(this.g)}${lg(this.b)}${lg(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:zY,toString:zY})),py(mc,HE,Q0(Qf,{brighter(e){return e=null==e?gy:Math.pow(gy,e),new mc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new mc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new So(oF(e>=240?e-240:e+120,r,i),oF(e,r,i),oF(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new mc(UY(this.h),VE(this.s),VE(this.l),zE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zE(this.opacity);return`${1===e?"hsl(":"hsla("}${UY(this.h)}, ${100*VE(this.s)}%, ${100*VE(this.l)}%${1===e?")":`, ${e})`}`}}));const UE=e=>()=>e;function qY(e,t){return function(n){return e+n*t}}function jE(e,t){var n=t-e;return n?qY(e,n>180||n<-180?n-360*Math.round(n/360):n):UE(isNaN(e)?t:e)}function ko(e,t){var n=t-e;return n?qY(e,n):UE(isNaN(e)?t:e)}const ew=function e(t){var n=function CDe(e){return 1==(e=+e)?ko:function(t,n){return n-t?function wDe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):UE(isNaN(t)?n:t)}}(t);function i(r,o){var s=n((r=Jf(r)).r,(o=Jf(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),c=ko(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function YY(e){return function(t){var s,a,n=t.length,i=new Array(n),r=new Array(n),o=new Array(n);for(s=0;s<n;++s)a=Jf(t[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=e(i),r=e(r),o=e(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}var XY=YY(WY),MDe=YY(GY),sF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aF=new RegExp(sF.source,"g");function lF(e,t){var i,r,o,n=sF.lastIndex=aF.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(i=sF.exec(e))&&(r=aF.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Rl(i,r)})),n=aF.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function EDe(e){return function(t){return e(t)+""}}(l[0].x):function xDe(e){return function(){return e}}(t):(t=l.length,function(c){for(var d,u=0;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function KY(e,t){var n;return("number"==typeof t?Rl:t instanceof sg?ew:(n=sg(t))?(t=n,ew):lF)(e,t)}function SDe(e){return function(){this.removeAttribute(e)}}function kDe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ADe(e,t,n){var i,o,r=n+"";return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function ODe(e,t,n){var i,o,r=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function DDe(e,t,n){var i,r,o;return function(){var s,l,a=n(this);return null==a?void this.removeAttribute(e):(s=this.getAttribute(e))===(l=a+"")?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}function TDe(e,t,n){var i,r,o;return function(){var s,l,a=n(this);return null==a?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(l=a+"")?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}function RDe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function IDe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function FDe(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&IDe(e,o)),n}return r._value=t,r}function LDe(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&RDe(e,o)),n}return r._value=t,r}function $De(e,t){return function(){tF(this,e).delay=+t.apply(this,arguments)}}function BDe(e,t){return t=+t,function(){tF(this,e).delay=t}}function HDe(e,t){return function(){vu(this,e).duration=+t.apply(this,arguments)}}function VDe(e,t){return t=+t,function(){vu(this,e).duration=t}}function jDe(e,t){if("function"!=typeof t)throw new Error;return function(){vu(this,e).ease=t}}function ZDe(e,t,n){var i,r,o=function KDe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(t)?tF:vu;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}var iTe=G0.prototype.constructor;function ZY(e){return function(){this.style.removeProperty(e)}}function uTe(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function dTe(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&uTe(e,s,n)),i}return o._value=t,o}function mTe(e){return function(t){this.textContent=e.call(this,t)}}function _Te(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&mTe(r)),t}return i._value=e,i}var wTe=0;function Pd(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function QY(){return++wTe}var Rd=G0.prototype;Pd.prototype=function CTe(e){return G0().transition(e)}.prototype={constructor:Pd,select:function tTe(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=qI(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var u,d,a=i[s],l=a.length,c=o[s]=new Array(l),f=0;f<l;++f)(u=a[f])&&(d=e.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,LE(c[f],t,n,f,c,gc(u,n)));return new Pd(o,this._parents,t,n)},selectAll:function nTe(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=lY(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var u,l=i[a],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var h,f=e.call(u,u.__data__,d,l),y=gc(u,n),b=0,C=f.length;b<C;++b)(h=f[b])&&LE(h,t,n,b,f,y);o.push(f),s.push(u)}return new Pd(o,s,t,n)},selectChild:Rd.selectChild,selectChildren:Rd.selectChildren,filter:function YDe(e){"function"!=typeof e&&(e=cY(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l,o=t[r],s=o.length,a=i[r]=[],c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Pd(i,this._parents,this._name,this._id)},merge:function XDe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=Math.min(i,n.length),s=new Array(i),a=0;a<o;++a)for(var f,l=t[a],c=n[a],u=l.length,d=s[a]=new Array(u),h=0;h<u;++h)(f=l[h]||c[h])&&(d[h]=f);for(;a<i;++a)s[a]=t[a];return new Pd(s,this._parents,this._name,this._id)},selection:function rTe(){return new iTe(this._groups,this._parents)},transition:function vTe(){for(var e=this._name,t=this._id,n=QY(),i=this._groups,r=i.length,o=0;o<r;++o)for(var l,s=i[o],a=s.length,c=0;c<a;++c)if(l=s[c]){var u=gc(l,t);LE(l,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Pd(i,this._parents,e,n)},call:Rd.call,nodes:Rd.nodes,node:Rd.node,size:Rd.size,empty:Rd.empty,each:Rd.each,on:function QDe(e,t){var n=this._id;return arguments.length<2?gc(this.node(),n).on.on(e):this.each(ZDe(n,e,t))},attr:function PDe(e,t){var n=kE(e),i="transform"===n?IY:KY;return this.attrTween(e,"function"==typeof t?(n.local?TDe:DDe)(n,i,iF(this,"attr."+e,t)):null==t?(n.local?kDe:SDe)(n):(n.local?ODe:ADe)(n,i,t))},attrTween:function NDe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=kE(e);return this.tween(n,(i.local?FDe:LDe)(i,t))},style:function cTe(e,t,n){var i="transform"==(e+="")?RY:KY;return null==t?this.styleTween(e,function oTe(e,t){var n,i,r;return function(){var o=fy(this,e),s=(this.style.removeProperty(e),fy(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}(e,i)).on("end.style."+e,ZY(e)):"function"==typeof t?this.styleTween(e,function aTe(e,t,n){var i,r,o;return function(){var s=fy(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=fy(this,e)),s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}(e,i,iF(this,"style."+e,t))).each(function lTe(e,t){var n,i,r,a,o="style."+t,s="end."+o;return function(){var l=vu(this,e),c=l.on,u=null==l.value[o]?a||(a=ZY(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(s,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function sTe(e,t,n){var i,o,r=n+"";return function(){var s=fy(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function fTe(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,dTe(e,t,n??""))},text:function gTe(e){return this.tween("text","function"==typeof e?function pTe(e){return function(){var t=e(this);this.textContent=t??""}}(iF(this,"text",e)):function hTe(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function yTe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,_Te(e))},remove:function eTe(){return this.on("end.remove",function JDe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function uDe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s,i=gc(this.node(),n).tween,r=0,o=i.length;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((null==t?lDe:cDe)(n,e,t))},delay:function zDe(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?$De:BDe)(t,e)):gc(this.node(),t).delay},duration:function UDe(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?HDe:VDe)(t,e)):gc(this.node(),t).duration},ease:function WDe(e){var t=this._id;return arguments.length?this.each(jDe(t,e)):gc(this.node(),t).ease},easeVarying:function qDe(e){if("function"!=typeof e)throw new Error;return this.each(function GDe(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;vu(this,e).ease=n}}(this._id,e))},end:function bTe(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){0==--r&&o()}};n.each(function(){var c=vu(this,i),u=c.on;u!==e&&((t=(e=u).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),0===r&&o()})},[Symbol.iterator]:Rd[Symbol.iterator]};var xTe={time:null,delay:0,duration:250,ease:function MTe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function ETe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}G0.prototype.interrupt=function oDe(e){return this.each(function(){NE(this,e)})},G0.prototype.transition=function STe(e){var t,n;e instanceof Pd?(t=e._id,e=e._name):(t=QY(),(n=xTe).time=RE(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var l,s=i[o],a=s.length,c=0;c<a;++c)(l=s[c])&&LE(l,e,t,c,s,n||ETe(l,t));return new Pd(i,this._parents,e,t)};Math;function tw(e){return{type:e}}function Zn(e){return"string"==typeof e?new js([[document.querySelector(e)]],[document.documentElement]):new js([[e]],KI)}function Fd(e,t){if(e=function ITe(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}["w","e"].map(tw),["n","s"].map(tw),["n","w","e","s","nw","ne","sw","se"].map(tw);const FTe={passive:!1},nw={capture:!0,passive:!1};function hF(e){e.stopImmediatePropagation()}function vy(e){e.preventDefault(),e.stopImmediatePropagation()}function rX(e){var t=e.document.documentElement,n=Zn(e).on("dragstart.drag",vy,nw);"onselectstart"in t?n.on("selectstart.drag",vy,nw):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function oX(e,t){var n=e.document.documentElement,i=Zn(e).on("dragstart.drag",null);t&&(i.on("click.drag",vy,nw),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qE=e=>()=>e;function pF(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function LTe(e){return!e.ctrlKey&&!e.button}function NTe(){return this.parentNode}function $Te(e,t){return t??{x:e.x,y:e.y}}function BTe(){return navigator.maxTouchPoints||"ontouchstart"in this}function sX(){var a,l,c,u,e=LTe,t=NTe,n=$Te,i=BTe,r={},o=OE("start","drag","end"),s=0,d=0;function f(z){z.on("mousedown.drag",h).filter(i).on("touchstart.drag",C).on("touchmove.drag",k,FTe).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(z,q){if(!u&&e.call(this,z,q)){var ne=I(this,t.call(this,z,q),z,q,"mouse");!ne||(Zn(z.view).on("mousemove.drag",y,nw).on("mouseup.drag",b,nw),rX(z.view),hF(z),c=!1,a=z.clientX,l=z.clientY,ne("start",z))}}function y(z){if(vy(z),!c){var q=z.clientX-a,ne=z.clientY-l;c=q*q+ne*ne>d}r.mouse("drag",z)}function b(z){Zn(z.view).on("mousemove.drag mouseup.drag",null),oX(z.view,c),vy(z),r.mouse("end",z)}function C(z,q){if(e.call(this,z,q)){var me,ge,ne=z.changedTouches,K=t.call(this,z,q),le=ne.length;for(me=0;me<le;++me)(ge=I(this,K,z,q,ne[me].identifier,ne[me]))&&(hF(z),ge("start",z,ne[me]))}}function k(z){var K,le,q=z.changedTouches,ne=q.length;for(K=0;K<ne;++K)(le=r[q[K].identifier])&&(vy(z),le("drag",z,q[K]))}function O(z){var K,le,q=z.changedTouches,ne=q.length;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),K=0;K<ne;++K)(le=r[q[K].identifier])&&(hF(z),le("end",z,q[K]))}function I(z,q,ne,K,le,me){var Se,ve,Z,ge=o.copy(),ye=Fd(me||ne,q);if(null!=(Z=n.call(z,new pF("beforestart",{sourceEvent:ne,target:f,identifier:le,active:s,x:ye[0],y:ye[1],dx:0,dy:0,dispatch:ge}),K)))return Se=Z.x-ye[0]||0,ve=Z.y-ye[1]||0,function ae(oe,de,ce){var pe,he=ye;switch(oe){case"start":r[le]=ae,pe=s++;break;case"end":delete r[le],--s;case"drag":ye=Fd(ce||de,q),pe=s}ge.call(oe,z,new pF(oe,{sourceEvent:de,subject:Z,target:f,identifier:le,active:pe,x:ye[0]+Se,y:ye[1]+ve,dx:ye[0]-he[0],dy:ye[1]-he[1],dispatch:ge}),K)}}return f.filter=function(z){return arguments.length?(e="function"==typeof z?z:qE(!!z),f):e},f.container=function(z){return arguments.length?(t="function"==typeof z?z:qE(z),f):t},f.subject=function(z){return arguments.length?(n="function"==typeof z?z:qE(z),f):n},f.touchable=function(z){return arguments.length?(i="function"==typeof z?z:qE(!!z),f):i},f.on=function(){var z=o.on.apply(o,arguments);return z===o?f:z},f.clickDistance=function(z){return arguments.length?(d=(z=+z)*z,f):Math.sqrt(d)},f}function gF(e,t){var n,i=1;function r(){var o,a,s=n.length,l=0,c=0;for(o=0;o<s;++o)l+=(a=n[o]).x,c+=a.y;for(l=(l/s-e)*i,c=(c/s-t)*i,o=0;o<s;++o)(a=n[o]).x-=l,a.y-=c}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(e=+o,r):e},r.y=function(o){return arguments.length?(t=+o,r):t},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function aX(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,d,f,h,y,b,C,k,O,o=e._root,s={data:i},a=e._x0,l=e._y0,c=e._x1,u=e._y1;if(!o)return e._root=s,e;for(;o.length;)if((b=t>=(d=(a+c)/2))?a=d:c=d,(C=n>=(f=(l+u)/2))?l=f:u=f,r=o,!(o=o[k=C<<1|b]))return r[k]=s,e;if(h=+e._x.call(null,o.data),y=+e._y.call(null,o.data),t===h&&n===y)return s.next=o,r?r[k]=s:e._root=s,e;do{r=r?r[k]=new Array(4):e._root=new Array(4),(b=t>=(d=(a+c)/2))?a=d:c=d,(C=n>=(f=(l+u)/2))?l=f:u=f}while((k=C<<1|b)==(O=(y>=f)<<1|h>=d));return r[O]=o,r[k]=s,e}function Ws(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function QTe(e){return e[0]}function ePe(e){return e[1]}function mF(e,t,n){var i=new _F(t??QTe,n??ePe,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function _F(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function lX(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}pF.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Gs=mF.prototype=_F.prototype;function qs(e){return function(){return e}}function eh(e){return 1e-6*(e()-.5)}function nPe(e){return e.x+e.vx}function iPe(e){return e.y+e.vy}function yF(e){var t,n,i,r=1,o=1;function s(){for(var c,d,f,h,y,b,C,u=t.length,k=0;k<o;++k)for(d=mF(t,nPe,iPe).visitAfter(a),c=0;c<u;++c)C=(b=n[(f=t[c]).index])*b,h=f.x+f.vx,y=f.y+f.vy,d.visit(O);function O(I,z,q,ne,K){var le=I.data,me=I.r,ge=b+me;if(!le)return z>h+ge||ne<h-ge||q>y+ge||K<y-ge;if(le.index>f.index){var ye=h-le.x-le.vx,Se=y-le.y-le.vy,ve=ye*ye+Se*Se;ve<ge*ge&&(0===ye&&(ve+=(ye=eh(i))*ye),0===Se&&(ve+=(Se=eh(i))*Se),ve=(ge-(ve=Math.sqrt(ve)))/ve*r,f.vx+=(ye*=ve)*(ge=(me*=me)/(C+me)),f.vy+=(Se*=ve)*ge,le.vx-=ye*(ge=1-ge),le.vy-=Se*ge)}}}function a(c){if(c.data)return c.r=n[c.data.index];for(var u=c.r=0;u<4;++u)c[u]&&c[u].r>c.r&&(c.r=c[u].r)}function l(){if(t){var c,d,u=t.length;for(n=new Array(u),c=0;c<u;++c)n[(d=t[c]).index]=+e(d,c,t)}}return"function"!=typeof e&&(e=qs(null==e?1:+e)),s.initialize=function(c,u){t=c,i=u,l()},s.iterations=function(c){return arguments.length?(o=+c,s):o},s.strength=function(c){return arguments.length?(r=+c,s):r},s.radius=function(c){return arguments.length?(e="function"==typeof c?c:qs(+c),l(),s):e},s}function rPe(e){return e.index}function cX(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function iw(e){var i,o,s,a,l,c,t=rPe,n=function d(C){return 1/Math.min(a[C.source.index],a[C.target.index])},r=qs(30),u=1;function f(C){for(var k=0,O=e.length;k<u;++k)for(var z,q,ne,K,le,me,ge,I=0;I<O;++I)K=(ne=(z=e[I]).target).x+ne.vx-(q=z.source).x-q.vx||eh(c),le=ne.y+ne.vy-q.y-q.vy||eh(c),le*=me=((me=Math.sqrt(K*K+le*le))-o[I])/me*C*i[I],ne.vx-=(K*=me)*(ge=l[I]),ne.vy-=le*ge,q.vx+=K*(ge=1-ge),q.vy+=le*ge}function h(){if(s){var C,z,k=s.length,O=e.length,I=new Map(s.map((q,ne)=>[t(q,ne,s),q]));for(C=0,a=new Array(k);C<O;++C)(z=e[C]).index=C,"object"!=typeof z.source&&(z.source=cX(I,z.source)),"object"!=typeof z.target&&(z.target=cX(I,z.target)),a[z.source.index]=(a[z.source.index]||0)+1,a[z.target.index]=(a[z.target.index]||0)+1;for(C=0,l=new Array(O);C<O;++C)l[C]=a[(z=e[C]).source.index]/(a[z.source.index]+a[z.target.index]);i=new Array(O),y(),o=new Array(O),b()}}function y(){if(s)for(var C=0,k=e.length;C<k;++C)i[C]=+n(e[C],C,e)}function b(){if(s)for(var C=0,k=e.length;C<k;++C)o[C]=+r(e[C],C,e)}return null==e&&(e=[]),f.initialize=function(C,k){s=C,c=k,h()},f.links=function(C){return arguments.length?(e=C,h(),f):e},f.id=function(C){return arguments.length?(t=C,f):t},f.iterations=function(C){return arguments.length?(u=+C,f):u},f.strength=function(C){return arguments.length?(n="function"==typeof C?C:qs(+C),y(),f):n},f.distance=function(C){return arguments.length?(r="function"==typeof C?C:qs(+C),b(),f):r},f}Gs.copy=function(){var n,i,e=new _F(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root;if(!t)return e;if(!t.length)return e._root=lX(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=lX(i));return e},Gs.add=function zTe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return aX(this.cover(t,n),t,n,e)},Gs.addAll=function HTe(e){var t,n,r,o,i=e.length,s=new Array(i),a=new Array(i),l=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=r,a[n]=o,r<l&&(l=r),r>u&&(u=r),o<c&&(c=o),o>d&&(d=o));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),n=0;n<i;++n)aX(this,s[n],a[n],e[n]);return this},Gs.cover=function VTe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var l,c,s=r-n||1,a=this._root;n>e||e>=r||i>t||t>=o;)switch(c=(t<i)<<1|e<n,l=new Array(4),l[c]=a,a=l,s*=2,c){case 0:r=n+s,o=i+s;break;case 1:n=r-s,o=i+s;break;case 2:r=n+s,i=o-s;break;case 3:n=r-s,i=o-s}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Gs.data=function UTe(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},Gs.extent=function jTe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Gs.find=function WTe(e,t,n){var i,s,a,l,c,y,b,r=this._x0,o=this._y0,u=this._x1,d=this._y1,f=[],h=this._root;for(h&&f.push(new Ws(h,r,o,u,d)),null==n?n=1/0:(r=e-n,o=t-n,u=e+n,d=t+n,n*=n);y=f.pop();)if(!(!(h=y.node)||(s=y.x0)>u||(a=y.y0)>d||(l=y.x1)<r||(c=y.y1)<o))if(h.length){var C=(s+l)/2,k=(a+c)/2;f.push(new Ws(h[3],C,k,l,c),new Ws(h[2],s,k,C,c),new Ws(h[1],C,a,l,k),new Ws(h[0],s,a,C,k)),(b=(t>=k)<<1|e>=C)&&(y=f[f.length-1],f[f.length-1]=f[f.length-1-b],f[f.length-1-b]=y)}else{var O=e-+this._x.call(null,h.data),I=t-+this._y.call(null,h.data),z=O*O+I*I;if(z<n){var q=Math.sqrt(n=z);r=e-q,o=t-q,u=e+q,d=t+q,i=h.data}}return i},Gs.remove=function GTe(e){if(isNaN(u=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,i,r,o,u,d,f,h,y,b,C,k,n=this._root,s=this._x0,a=this._y0,l=this._x1,c=this._y1;if(!n)return this;if(n.length)for(;;){if((y=u>=(f=(s+l)/2))?s=f:l=f,(b=d>=(h=(a+c)/2))?a=h:c=h,t=n,!(n=n[C=b<<1|y]))return this;if(!n.length)break;(t[C+1&3]||t[C+2&3]||t[C+3&3])&&(i=t,k=C)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):t?(o?t[C]=o:delete t[C],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[k]=n:this._root=n),this):(this._root=o,this)},Gs.removeAll=function qTe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Gs.root=function YTe(){return this._root},Gs.size=function XTe(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},Gs.visit=function KTe(e){var n,r,o,s,a,l,t=[],i=this._root;for(i&&t.push(new Ws(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&i.length){var c=(o+a)/2,u=(s+l)/2;(r=i[3])&&t.push(new Ws(r,c,u,a,l)),(r=i[2])&&t.push(new Ws(r,o,u,c,l)),(r=i[1])&&t.push(new Ws(r,c,s,a,u)),(r=i[0])&&t.push(new Ws(r,o,s,c,u))}return this},Gs.visitAfter=function ZTe(e){var i,t=[],n=[];for(this._root&&t.push(new Ws(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,l=i.x1,c=i.y1,u=(s+l)/2,d=(a+c)/2;(o=r[0])&&t.push(new Ws(o,s,a,u,d)),(o=r[1])&&t.push(new Ws(o,u,a,l,d)),(o=r[2])&&t.push(new Ws(o,s,d,u,c)),(o=r[3])&&t.push(new Ws(o,u,d,l,c))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this},Gs.x=function JTe(e){return arguments.length?(this._x=e,this):this._x},Gs.y=function tPe(e){return arguments.length?(this._y=e,this):this._y};const uX=4294967296;function lPe(e){return e.x}function cPe(e){return e.y}var dPe=Math.PI*(3-Math.sqrt(5));function vF(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=ZI(d),c=OE("tick","end"),u=function aPe(){let e=1;return()=>(e=(1664525*e+1013904223)%uX)/uX}();function d(){f(),c.call("tick",t),n<i&&(l.stop(),c.call("end",t))}function f(b){var C,O,k=e.length;void 0===b&&(b=1);for(var I=0;I<b;++I)for(n+=(o-n)*r,a.forEach(function(z){z(n)}),C=0;C<k;++C)null==(O=e[C]).fx?O.x+=O.vx*=s:(O.x=O.fx,O.vx=0),null==O.fy?O.y+=O.vy*=s:(O.y=O.fy,O.vy=0);return t}function h(){for(var k,b=0,C=e.length;b<C;++b){if((k=e[b]).index=b,null!=k.fx&&(k.x=k.fx),null!=k.fy&&(k.y=k.fy),isNaN(k.x)||isNaN(k.y)){var O=10*Math.sqrt(.5+b),I=b*dPe;k.x=O*Math.cos(I),k.y=O*Math.sin(I)}(isNaN(k.vx)||isNaN(k.vy))&&(k.vx=k.vy=0)}}function y(b){return b.initialize&&b.initialize(e,u),b}return null==e&&(e=[]),h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(b){return arguments.length?(e=b,h(),a.forEach(y),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(o=+b,t):o},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(u=b,a.forEach(y),t):u},force:function(b,C){return arguments.length>1?(null==C?a.delete(b):a.set(b,y(C)),t):a.get(b)},find:function(b,C,k){var z,q,ne,K,le,O=0,I=e.length;for(null==k?k=1/0:k*=k,O=0;O<I;++O)(ne=(z=b-(K=e[O]).x)*z+(q=C-K.y)*q)<k&&(le=K,k=ne);return le},on:function(b,C){return arguments.length>1?(c.on(b,C),t):c.on(b)}}}function bF(){var e,t,n,i,o,r=qs(-30),s=1,a=1/0,l=.81;function c(h){var y,b=e.length,C=mF(e,lPe,cPe).visitAfter(d);for(i=h,y=0;y<b;++y)t=e[y],C.visit(f)}function u(){if(e){var h,b,y=e.length;for(o=new Array(y),h=0;h<y;++h)o[(b=e[h]).index]=+r(b,h,e)}}function d(h){var b,C,O,I,z,y=0,k=0;if(h.length){for(O=I=z=0;z<4;++z)(b=h[z])&&(C=Math.abs(b.value))&&(y+=b.value,k+=C,O+=C*b.x,I+=C*b.y);h.x=O/k,h.y=I/k}else{(b=h).x=b.data.x,b.y=b.data.y;do{y+=o[b.data.index]}while(b=b.next)}h.value=y}function f(h,y,b,C){if(!h.value)return!0;var k=h.x-t.x,O=h.y-t.y,I=C-y,z=k*k+O*O;if(I*I/l<z)return z<a&&(0===k&&(z+=(k=eh(n))*k),0===O&&(z+=(O=eh(n))*O),z<s&&(z=Math.sqrt(s*z)),t.vx+=k*h.value*i/z,t.vy+=O*h.value*i/z),!0;if(!(h.length||z>=a)){(h.data!==t||h.next)&&(0===k&&(z+=(k=eh(n))*k),0===O&&(z+=(O=eh(n))*O),z<s&&(z=Math.sqrt(s*z)));do{h.data!==t&&(t.vx+=k*(I=o[h.data.index]*i/z),t.vy+=O*I)}while(h=h.next)}}return c.initialize=function(h,y){e=h,n=y,u()},c.strength=function(h){return arguments.length?(r="function"==typeof h?h:qs(+h),u(),c):r},c.distanceMin=function(h){return arguments.length?(s=h*h,c):Math.sqrt(s)},c.distanceMax=function(h){return arguments.length?(a=h*h,c):Math.sqrt(a)},c.theta=function(h){return arguments.length?(l=h*h,c):Math.sqrt(l)},c}var pPe=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(function fPe(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n});const dX=XY((e=pPe)[e.length-1]),fX=Math.PI/180,hX=180/Math.PI;var e,wF=1.78277,CF=-.29227,YE=-.90649,rw=1.97294,gX=rw*YE,mX=rw*wF,_X=wF*CF- -.14861*YE;function gPe(e){if(e instanceof cg)return new cg(e.h,e.s,e.l,e.opacity);e instanceof So||(e=rF(e));var n=e.g/255,i=e.b/255,r=(_X*i+gX*(e.r/255)-mX*n)/(_X+gX-mX),o=i-r,s=(rw*(n-r)-CF*o)/YE,a=Math.sqrt(s*s+o*o)/(rw*r*(1-r)),l=a?Math.atan2(s,o)*hX-120:NaN;return new cg(l<0?l+360:l,a,r,e.opacity)}function th(e,t,n,i){return 1===arguments.length?gPe(e):new cg(e,t,n,i??1)}function cg(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function yX(e){return function t(n){function i(r,o){var s=e((r=th(r)).h,(o=th(o)).h),a=ko(r.s,o.s),l=ko(r.l,o.l),c=ko(r.opacity,o.opacity);return function(u){return r.h=s(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return n=+n,i.gamma=t,i}(1)}py(cg,th,Q0(Qf,{brighter(e){return e=null==e?gy:Math.pow(gy,e),new cg(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new cg(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*fX,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new So(255*(t+n*(-.14861*i+wF*r)),255*(t+n*(CF*i+YE*r)),255*(t+n*(rw*i)),this.opacity)}}));const mPe=yX(jE);var MF=yX(ko),XE=(MF(th(-100,.75,.35),th(80,1.5,.8)),MF(th(260,.75,.35),th(80,1.5,.8)),th());function _Pe(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return XE.h=360*e-100,XE.s=1.5-1.5*t,XE.l=.8-.9*t,XE+""}function or(e){return"string"==typeof e?new js([document.querySelectorAll(e)],[document.documentElement]):new js([aY(e)],KI)}function Hi(e){return function(){return e}}const vX=Math.abs,gs=Math.atan2,Ld=Math.cos,yPe=Math.max,by=Math.min,pa=Math.sin,gr=Math.sqrt,ms=1e-12,nh=Math.PI,KE=nh/2,ow=2*nh;function vPe(e){return e>1?0:e<-1?nh:Math.acos(e)}function bX(e){return e>=1?KE:e<=-1?-KE:Math.asin(e)}const xF=Math.PI,EF=2*xF,ug=1e-6,bPe=EF-ug;function wX(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class ZE{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?wX:function wPe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return wX;const n=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,o,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,i,r,o){if(t=+t,n=+n,i=+i,r=+r,(o=+o)<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=i-t,c=r-n,u=s-t,d=a-n,f=u*u+d*d;if(null===this._x1)this._append`M${this._x1=t},${this._y1=n}`;else if(f>ug)if(Math.abs(d*l-c*u)>ug&&o){let h=i-s,y=r-a,b=l*l+c*c,C=h*h+y*y,k=Math.sqrt(b),O=Math.sqrt(f),I=o*Math.tan((xF-Math.acos((b+f-C)/(2*k*O)))/2),z=I/O,q=I/k;Math.abs(z-1)>ug&&this._append`L${t+z*u},${n+z*d}`,this._append`A${o},${o},0,0,${+(d*h>u*y)},${this._x1=t+q*l},${this._y1=n+q*c}`}else this._append`L${this._x1=t},${this._y1=n}`}arc(t,n,i,r,o,s){if(t=+t,n=+n,s=!!s,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=t+a,u=n+l,d=1^s,f=s?r-o:o-r;null===this._x1?this._append`M${c},${u}`:(Math.abs(this._x1-c)>ug||Math.abs(this._y1-u)>ug)&&this._append`L${c},${u}`,i&&(f<0&&(f=f%EF+EF),f>bPe?this._append`A${i},${i},0,1,${d},${t-a},${n-l}A${i},${i},0,1,${d},${this._x1=c},${this._y1=u}`:f>ug&&this._append`A${i},${i},0,${+(f>=xF)},${d},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function QE(){return new ZE}function JE(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new ZE(t)}function CPe(e){return e.innerRadius}function MPe(e){return e.outerRadius}function xPe(e){return e.startAngle}function EPe(e){return e.endAngle}function SPe(e){return e&&e.padAngle}function kPe(e,t,n,i,r,o,s,a){var l=n-e,c=i-t,u=s-r,d=a-o,f=d*l-u*c;if(!(f*f<ms))return[e+(f=(u*(t-o)-d*(e-r))/f)*l,t+f*c]}function eS(e,t,n,i,r,o,s){var a=e-n,l=t-i,c=(s?o:-o)/gr(a*a+l*l),u=c*l,d=-c*a,f=e+u,h=t+d,y=n+u,b=i+d,C=(f+y)/2,k=(h+b)/2,O=y-f,I=b-h,z=O*O+I*I,q=r-o,ne=f*b-y*h,K=(I<0?-1:1)*gr(yPe(0,q*q*z-ne*ne)),le=(ne*I-O*K)/z,me=(-ne*O-I*K)/z,ge=(ne*I+O*K)/z,ye=(-ne*O+I*K)/z,Se=le-C,ve=me-k,Z=ge-C,ae=ye-k;return Se*Se+ve*ve>Z*Z+ae*ae&&(le=ge,me=ye),{cx:le,cy:me,x01:-u,y01:-d,x11:le*(r/q-1),y11:me*(r/q-1)}}function SF(){var e=CPe,t=MPe,n=Hi(0),i=null,r=xPe,o=EPe,s=SPe,a=null,l=JE(c);function c(){var u,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),y=r.apply(this,arguments)-KE,b=o.apply(this,arguments)-KE,C=vX(b-y),k=b>y;if(a||(a=u=l()),h<f&&(d=h,h=f,f=d),h>ms)if(C>ow-ms)a.moveTo(h*Ld(y),h*pa(y)),a.arc(0,0,h,y,b,!k),f>ms&&(a.moveTo(f*Ld(b),f*pa(b)),a.arc(0,0,f,b,y,k));else{var ve,Z,O=y,I=b,z=y,q=b,ne=C,K=C,le=s.apply(this,arguments)/2,me=le>ms&&(i?+i.apply(this,arguments):gr(f*f+h*h)),ge=by(vX(h-f)/2,+n.apply(this,arguments)),ye=ge,Se=ge;if(me>ms){var ae=bX(me/f*pa(le)),oe=bX(me/h*pa(le));(ne-=2*ae)>ms?(z+=ae*=k?1:-1,q-=ae):(ne=0,z=q=(y+b)/2),(K-=2*oe)>ms?(O+=oe*=k?1:-1,I-=oe):(K=0,O=I=(y+b)/2)}var de=h*Ld(O),ce=h*pa(O),he=f*Ld(q),pe=f*pa(q);if(ge>ms){var $e,Ee=h*Ld(I),Oe=h*pa(I),Ie=f*Ld(z),De=f*pa(z);if(C<nh)if($e=kPe(de,ce,Ie,De,Ee,Oe,he,pe)){var st=de-$e[0],ze=ce-$e[1],mt=Ee-$e[0],Be=Oe-$e[1],rt=1/pa(vPe((st*mt+ze*Be)/(gr(st*st+ze*ze)*gr(mt*mt+Be*Be)))/2),ut=gr($e[0]*$e[0]+$e[1]*$e[1]);ye=by(ge,(f-ut)/(rt-1)),Se=by(ge,(h-ut)/(rt+1))}else ye=Se=0}K>ms?Se>ms?(ve=eS(Ie,De,de,ce,h,Se,k),Z=eS(Ee,Oe,he,pe,h,Se,k),a.moveTo(ve.cx+ve.x01,ve.cy+ve.y01),Se<ge?a.arc(ve.cx,ve.cy,Se,gs(ve.y01,ve.x01),gs(Z.y01,Z.x01),!k):(a.arc(ve.cx,ve.cy,Se,gs(ve.y01,ve.x01),gs(ve.y11,ve.x11),!k),a.arc(0,0,h,gs(ve.cy+ve.y11,ve.cx+ve.x11),gs(Z.cy+Z.y11,Z.cx+Z.x11),!k),a.arc(Z.cx,Z.cy,Se,gs(Z.y11,Z.x11),gs(Z.y01,Z.x01),!k))):(a.moveTo(de,ce),a.arc(0,0,h,O,I,!k)):a.moveTo(de,ce),f>ms&&ne>ms?ye>ms?(ve=eS(he,pe,Ee,Oe,f,-ye,k),Z=eS(de,ce,Ie,De,f,-ye,k),a.lineTo(ve.cx+ve.x01,ve.cy+ve.y01),ye<ge?a.arc(ve.cx,ve.cy,ye,gs(ve.y01,ve.x01),gs(Z.y01,Z.x01),!k):(a.arc(ve.cx,ve.cy,ye,gs(ve.y01,ve.x01),gs(ve.y11,ve.x11),!k),a.arc(0,0,f,gs(ve.cy+ve.y11,ve.cx+ve.x11),gs(Z.cy+Z.y11,Z.cx+Z.x11),k),a.arc(Z.cx,Z.cy,ye,gs(Z.y11,Z.x11),gs(Z.y01,Z.x01),!k))):a.arc(0,0,f,q,z,k):a.lineTo(he,pe)}else a.moveTo(0,0);if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-nh/2;return[Ld(d)*u,pa(d)*u]},c.innerRadius=function(u){return arguments.length?(e="function"==typeof u?u:Hi(+u),c):e},c.outerRadius=function(u){return arguments.length?(t="function"==typeof u?u:Hi(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n="function"==typeof u?u:Hi(+u),c):n},c.padRadius=function(u){return arguments.length?(i=null==u?null:"function"==typeof u?u:Hi(+u),c):i},c.startAngle=function(u){return arguments.length?(r="function"==typeof u?u:Hi(+u),c):r},c.endAngle=function(u){return arguments.length?(o="function"==typeof u?u:Hi(+u),c):o},c.padAngle=function(u){return arguments.length?(s="function"==typeof u?u:Hi(+u),c):s},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function CX(e){return((e=Math.exp(e))+1/e)/2}QE.prototype=ZE.prototype;const MX=function e(t,n,i){function r(o,s){var C,k,a=o[0],l=o[1],c=o[2],f=s[2],h=s[0]-a,y=s[1]-l,b=h*h+y*y;if(b<1e-12)k=Math.log(f/c)/t,C=function(K){return[a+K*h,l+K*y,c*Math.exp(t*K*k)]};else{var O=Math.sqrt(b),I=(f*f-c*c+i*b)/(2*c*n*O),z=(f*f-c*c-i*b)/(2*f*n*O),q=Math.log(Math.sqrt(I*I+1)-I),ne=Math.log(Math.sqrt(z*z+1)-z);k=(ne-q)/t,C=function(K){var le=K*k,me=CX(q),ge=c/(n*O)*(me*function DPe(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*le+q)-function OPe(e){return((e=Math.exp(e))-1/e)/2}(q));return[a+ge*h,l+ge*y,c*me/CX(t*le+q)]}}return C.duration=1e3*k*t/Math.SQRT2,C}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s;return e(s,a,a*a)},r}(Math.SQRT2,2,4),tS=e=>()=>e;function TPe(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Nd(e,t,n){this.k=e,this.x=t,this.y=n}Nd.prototype={constructor:Nd,scale:function(e){return 1===e?this:new Nd(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Nd(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var sw=new Nd(1,0,0);function kF(e){e.stopImmediatePropagation()}function aw(e){e.preventDefault(),e.stopImmediatePropagation()}function RPe(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function IPe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function xX(){return this.__zoom||sw}function FPe(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function LPe(){return navigator.maxTouchPoints||"ontouchstart"in this}function NPe(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function EX(){var u,d,f,e=RPe,t=IPe,n=NPe,i=FPe,r=LPe,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=MX,c=OE("start","zoom","end"),h=500,b=0,C=10;function k(Z){Z.property("__zoom",xX).on("wheel.zoom",le,{passive:!1}).on("mousedown.zoom",me).on("dblclick.zoom",ge).filter(r).on("touchstart.zoom",ye).on("touchmove.zoom",Se).on("touchend.zoom touchcancel.zoom",ve).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function O(Z,ae){return(ae=Math.max(o[0],Math.min(o[1],ae)))===Z.k?Z:new Nd(ae,Z.x,Z.y)}function I(Z,ae,oe){var de=ae[0]-oe[0]*Z.k,ce=ae[1]-oe[1]*Z.k;return de===Z.x&&ce===Z.y?Z:new Nd(Z.k,de,ce)}function z(Z){return[(+Z[0][0]+ +Z[1][0])/2,(+Z[0][1]+ +Z[1][1])/2]}function q(Z,ae,oe,de){Z.on("start.zoom",function(){ne(this,arguments).event(de).start()}).on("interrupt.zoom end.zoom",function(){ne(this,arguments).event(de).end()}).tween("zoom",function(){var ce=this,he=arguments,pe=ne(ce,he).event(de),Ee=t.apply(ce,he),Oe=null==oe?z(Ee):"function"==typeof oe?oe.apply(ce,he):oe,Ie=Math.max(Ee[1][0]-Ee[0][0],Ee[1][1]-Ee[0][1]),De=ce.__zoom,$e="function"==typeof ae?ae.apply(ce,he):ae,st=l(De.invert(Oe).concat(Ie/De.k),$e.invert(Oe).concat(Ie/$e.k));return function(ze){if(1===ze)ze=$e;else{var mt=st(ze),Be=Ie/mt[2];ze=new Nd(Be,Oe[0]-mt[0]*Be,Oe[1]-mt[1]*Be)}pe.zoom(null,ze)}})}function ne(Z,ae,oe){return!oe&&Z.__zooming||new K(Z,ae)}function K(Z,ae){this.that=Z,this.args=ae,this.active=0,this.sourceEvent=null,this.extent=t.apply(Z,ae),this.taps=0}function le(Z,...ae){if(e.apply(this,arguments)){var oe=ne(this,ae).event(Z),de=this.__zoom,ce=Math.max(o[0],Math.min(o[1],de.k*Math.pow(2,i.apply(this,arguments)))),he=Fd(Z);if(oe.wheel)(oe.mouse[0][0]!==he[0]||oe.mouse[0][1]!==he[1])&&(oe.mouse[1]=de.invert(oe.mouse[0]=he)),clearTimeout(oe.wheel);else{if(de.k===ce)return;oe.mouse=[he,de.invert(he)],NE(this),oe.start()}aw(Z),oe.wheel=setTimeout(pe,150),oe.zoom("mouse",n(I(O(de,ce),oe.mouse[0],oe.mouse[1]),oe.extent,s))}function pe(){oe.wheel=null,oe.end()}}function me(Z,...ae){if(!f&&e.apply(this,arguments)){var oe=Z.currentTarget,de=ne(this,ae,!0).event(Z),ce=Zn(Z.view).on("mousemove.zoom",Oe,!0).on("mouseup.zoom",Ie,!0),he=Fd(Z,oe),pe=Z.clientX,Ee=Z.clientY;rX(Z.view),kF(Z),de.mouse=[he,this.__zoom.invert(he)],NE(this),de.start()}function Oe(De){if(aw(De),!de.moved){var $e=De.clientX-pe,st=De.clientY-Ee;de.moved=$e*$e+st*st>b}de.event(De).zoom("mouse",n(I(de.that.__zoom,de.mouse[0]=Fd(De,oe),de.mouse[1]),de.extent,s))}function Ie(De){ce.on("mousemove.zoom mouseup.zoom",null),oX(De.view,de.moved),aw(De),de.event(De).end()}}function ge(Z,...ae){if(e.apply(this,arguments)){var oe=this.__zoom,de=Fd(Z.changedTouches?Z.changedTouches[0]:Z,this),ce=oe.invert(de),he=oe.k*(Z.shiftKey?.5:2),pe=n(I(O(oe,he),de,ce),t.apply(this,ae),s);aw(Z),a>0?Zn(this).transition().duration(a).call(q,pe,de,Z):Zn(this).call(k.transform,pe,de,Z)}}function ye(Z,...ae){if(e.apply(this,arguments)){var he,pe,Ee,Oe,oe=Z.touches,de=oe.length,ce=ne(this,ae,Z.changedTouches.length===de).event(Z);for(kF(Z),pe=0;pe<de;++pe)Oe=[Oe=Fd(Ee=oe[pe],this),this.__zoom.invert(Oe),Ee.identifier],ce.touch0?!ce.touch1&&ce.touch0[2]!==Oe[2]&&(ce.touch1=Oe,ce.taps=0):(ce.touch0=Oe,he=!0,ce.taps=1+!!u);u&&(u=clearTimeout(u)),he&&(ce.taps<2&&(d=Oe[0],u=setTimeout(function(){u=null},h)),NE(this),ce.start())}}function Se(Z,...ae){if(this.__zooming){var he,pe,Ee,Oe,oe=ne(this,ae).event(Z),de=Z.changedTouches,ce=de.length;for(aw(Z),he=0;he<ce;++he)Ee=Fd(pe=de[he],this),oe.touch0&&oe.touch0[2]===pe.identifier?oe.touch0[0]=Ee:oe.touch1&&oe.touch1[2]===pe.identifier&&(oe.touch1[0]=Ee);if(pe=oe.that.__zoom,oe.touch1){var Ie=oe.touch0[0],De=oe.touch0[1],$e=oe.touch1[0],st=oe.touch1[1],ze=(ze=$e[0]-Ie[0])*ze+(ze=$e[1]-Ie[1])*ze,mt=(mt=st[0]-De[0])*mt+(mt=st[1]-De[1])*mt;pe=O(pe,Math.sqrt(ze/mt)),Ee=[(Ie[0]+$e[0])/2,(Ie[1]+$e[1])/2],Oe=[(De[0]+st[0])/2,(De[1]+st[1])/2]}else{if(!oe.touch0)return;Ee=oe.touch0[0],Oe=oe.touch0[1]}oe.zoom("touch",n(I(pe,Ee,Oe),oe.extent,s))}}function ve(Z,...ae){if(this.__zooming){var he,pe,oe=ne(this,ae).event(Z),de=Z.changedTouches,ce=de.length;for(kF(Z),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),he=0;he<ce;++he)pe=de[he],oe.touch0&&oe.touch0[2]===pe.identifier?delete oe.touch0:oe.touch1&&oe.touch1[2]===pe.identifier&&delete oe.touch1;if(oe.touch1&&!oe.touch0&&(oe.touch0=oe.touch1,delete oe.touch1),oe.touch0)oe.touch0[1]=this.__zoom.invert(oe.touch0[0]);else if(oe.end(),2===oe.taps&&(pe=Fd(pe,this),Math.hypot(d[0]-pe[0],d[1]-pe[1])<C)){var Ee=Zn(this).on("dblclick.zoom");Ee&&Ee.apply(this,arguments)}}}return k.transform=function(Z,ae,oe,de){var ce=Z.selection?Z.selection():Z;ce.property("__zoom",xX),Z!==ce?q(Z,ae,oe,de):ce.interrupt().each(function(){ne(this,arguments).event(de).start().zoom(null,"function"==typeof ae?ae.apply(this,arguments):ae).end()})},k.scaleBy=function(Z,ae,oe,de){k.scaleTo(Z,function(){var ce=this.__zoom.k,he="function"==typeof ae?ae.apply(this,arguments):ae;return ce*he},oe,de)},k.scaleTo=function(Z,ae,oe,de){k.transform(Z,function(){var ce=t.apply(this,arguments),he=this.__zoom,pe=null==oe?z(ce):"function"==typeof oe?oe.apply(this,arguments):oe,Ee=he.invert(pe),Oe="function"==typeof ae?ae.apply(this,arguments):ae;return n(I(O(he,Oe),pe,Ee),ce,s)},oe,de)},k.translateBy=function(Z,ae,oe,de){k.transform(Z,function(){return n(this.__zoom.translate("function"==typeof ae?ae.apply(this,arguments):ae,"function"==typeof oe?oe.apply(this,arguments):oe),t.apply(this,arguments),s)},null,de)},k.translateTo=function(Z,ae,oe,de,ce){k.transform(Z,function(){var he=t.apply(this,arguments),pe=this.__zoom,Ee=null==de?z(he):"function"==typeof de?de.apply(this,arguments):de;return n(sw.translate(Ee[0],Ee[1]).scale(pe.k).translate("function"==typeof ae?-ae.apply(this,arguments):-ae,"function"==typeof oe?-oe.apply(this,arguments):-oe),he,s)},de,ce)},K.prototype={event:function(Z){return Z&&(this.sourceEvent=Z),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Z,ae){return this.mouse&&"mouse"!==Z&&(this.mouse[1]=ae.invert(this.mouse[0])),this.touch0&&"touch"!==Z&&(this.touch0[1]=ae.invert(this.touch0[0])),this.touch1&&"touch"!==Z&&(this.touch1[1]=ae.invert(this.touch1[0])),this.that.__zoom=ae,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Z){var ae=Zn(this.that).datum();c.call(Z,this.that,new TPe(Z,{sourceEvent:this.sourceEvent,target:k,type:Z,transform:this.that.__zoom,dispatch:c}),ae)}},k.wheelDelta=function(Z){return arguments.length?(i="function"==typeof Z?Z:tS(+Z),k):i},k.filter=function(Z){return arguments.length?(e="function"==typeof Z?Z:tS(!!Z),k):e},k.touchable=function(Z){return arguments.length?(r="function"==typeof Z?Z:tS(!!Z),k):r},k.extent=function(Z){return arguments.length?(t="function"==typeof Z?Z:tS([[+Z[0][0],+Z[0][1]],[+Z[1][0],+Z[1][1]]]),k):t},k.scaleExtent=function(Z){return arguments.length?(o[0]=+Z[0],o[1]=+Z[1],k):[o[0],o[1]]},k.translateExtent=function(Z){return arguments.length?(s[0][0]=+Z[0][0],s[1][0]=+Z[1][0],s[0][1]=+Z[0][1],s[1][1]=+Z[1][1],k):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},k.constrain=function(Z){return arguments.length?(n=Z,k):n},k.duration=function(Z){return arguments.length?(a=+Z,k):a},k.interpolate=function(Z){return arguments.length?(l=Z,k):l},k.on=function(){var Z=c.on.apply(c,arguments);return Z===c?k:Z},k.clickDistance=function(Z){return arguments.length?(b=(Z=+Z)*Z,k):Math.sqrt(b)},k.tapDistance=function(Z){return arguments.length?(C=+Z,k):C},k}function Nr(e){return null!=e&&"false"!=`${e}`}function ih(e,t=0){return function zPe(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function nS(e){return Array.isArray(e)?e:[e]}function io(e){return null==e?"":"string"==typeof e?e:`${e}px`}function $d(e){return e instanceof Ii?e.nativeElement:e}let AF;try{AF=typeof Intl<"u"&&Intl.v8BreakIterator}catch{AF=!1}let wy,_s=(()=>{class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?wG(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!AF)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(n){return new(n||e)(qe(Dx))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const SX=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function kX(){if(wy)return wy;if("object"!=typeof document||!document)return wy=new Set(SX),wy;let e=document.createElement("input");return wy=new Set(SX.filter(t=>(e.setAttribute("type",t),e.type===t))),wy}let lw,dg,OF;function Cy(e){return function HPe(){if(null==lw&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lw=!0}))}finally{lw=lw||!1}return lw}()?e:!!e.capture}function VPe(){if(null==dg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return dg=!1,dg;if("scrollBehavior"in document.documentElement.style)dg=!0;else{const e=Element.prototype.scrollTo;dg=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return dg}function AX(e){if(function UPe(){if(null==OF){const e=typeof document<"u"?document.head:null;OF=!(!e||!e.createShadowRoot&&!e.attachShadow)}return OF}()){const t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function fg(e){return e.composedPath?e.composedPath()[0]:e.target}function DF(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const jPe=["addListener","removeListener"],WPe=["addEventListener","removeEventListener"],GPe=["on","off"];function rS(e,t,n,i){if(L(n)&&(i=n,n=void 0),i)return rS(e,t,n).pipe(hI(i));const[r,o]=function XPe(e){return L(e.addEventListener)&&L(e.removeEventListener)}(e)?WPe.map(s=>a=>e[s](t,a,n)):function qPe(e){return L(e.addListener)&&L(e.removeListener)}(e)?jPe.map(OX(e,t)):function YPe(e){return L(e.on)&&L(e.off)}(e)?GPe.map(OX(e,t)):[];if(!r&&Tf(e))return Ir(s=>rS(s,t,n))(Ti(e));if(!r)throw new TypeError("Invalid event target");return new dt(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function OX(e,t){return n=>i=>e[n](t,i)}class KPe extends ${constructor(t,n){super()}schedule(t,n=0){return this}}const oS={setInterval(e,t,...n){const{delegate:i}=oS;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=oS;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};class TF extends KPe{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return oS.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&oS.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r,i=!1;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,P(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}const cw={schedule(e){let t=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=cw;i&&(t=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=t(o=>{n=void 0,e(o)});return new $(()=>n?.(r))},requestAnimationFrame(...e){const{delegate:t}=cw;return(t?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:t}=cw;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0},DX={now:()=>(DX.delegate||Date).now(),delegate:void 0};class uw{constructor(t,n=uw.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}}uw.now=DX.now;class PF extends uw{constructor(t,n=uw.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}}new class QPe extends PF{flush(t){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===n&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===n&&i.shift();)t.unsubscribe();throw r}}}(class ZPe extends TF{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,i=0){return null!==i&&i>0?super.requestAsyncId(t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=cw.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,n,i);const{actions:o}=t;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(cw.cancelAnimationFrame(n),t._scheduled=void 0)}});let RF,eRe=1;const sS={};function TX(e){return e in sS&&(delete sS[e],!0)}const tRe={setImmediate(e){const t=eRe++;return sS[t]=!0,RF||(RF=Promise.resolve()),RF.then(()=>TX(t)&&e()),t},clearImmediate(e){TX(e)}},{setImmediate:nRe,clearImmediate:iRe}=tRe,aS={setImmediate(...e){const{delegate:t}=aS;return(t?.setImmediate||nRe)(...e)},clearImmediate(e){const{delegate:t}=aS;return(t?.clearImmediate||iRe)(e)},delegate:void 0},IF=(new class oRe extends PF{flush(t){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===n&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===n&&i.shift();)t.unsubscribe();throw r}}}(class rRe extends TF{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,i=0){return null!==i&&i>0?super.requestAsyncId(t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=aS.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,n,i);const{actions:o}=t;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(aS.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))}}),new PF(TF)),aRe=IF;function PX(e,t=IF){return function lRe(e){return pt((t,n)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const c=r;r=null,n.next(c)}s&&n.complete()},l=()=>{o=null,s&&n.complete()};t.subscribe(Qt(n,c=>{i=!0,r=c,o||Ti(e(c)).subscribe(o=Qt(n,a,l))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}(()=>function uRe(e=0,t,n=aRe){let i=-1;return null!=t&&(n_(t)?n=t:i=t),new dt(r=>{let o=function cRe(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(e,t))}const dRe=new bt("cdk-dir-doc",{providedIn:"root",factory:function fRe(){return cr(Jn)}}),hRe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let dw=(()=>{class e{constructor(n){if(this.value="ltr",this.change=new Hn,n){const r=n.documentElement?n.documentElement.dir:null;this.value=function pRe(e){const t=e?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?hRe.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((n.body?n.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(n){return new(n||e)(qe(dRe,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fw=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})(),RX=(()=>{class e{constructor(n,i,r){this._ngZone=n,this._platform=i,this._scrolled=new Yt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){const i=this.scrollContainers.get(n);i&&(i.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=20){return this._platform.isBrowser?new dt(i=>{this._globalSubscription||this._addGlobalListener();const r=n>0?this._scrolled.pipe(PX(n)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ln()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(n,i){const r=this.getAncestorScrollContainers(n);return this.scrolled(i).pipe(ha(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(n){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,n)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,i){let r=$d(i),o=n.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>rS(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(n){return new(n||e)(qe(jn),qe(_s),qe(Jn,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),lS=(()=>{class e{constructor(n,i,r){this._platform=n,this._change=new Yt,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(n.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){const n=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+r,right:n.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const n=this._document,i=this._getWindow(),r=n.documentElement,o=r.getBoundingClientRect();return{top:-o.top||n.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||n.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(n=20){return n>0?this._change.pipe(PX(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(n){return new(n||e)(qe(_s),qe(jn),qe(Jn,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),cS=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})(),IX=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fw,cS,fw,cS]}),e})();function My(e,...t){return t.length?t.some(n=>e[n]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function uS(e,t=IF){return pt((n,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,i.next(c)}};function l(){const c=s+e,u=t.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}n.subscribe(Qt(i,c=>{o=c,s=t.now(),r||(r=t.schedule(l,e),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function BX(e){return ha((t,n)=>e<=n)}function zX(e,t=Vt){return e=e??ARe,pt((n,i)=>{let r,o=!0;n.subscribe(Qt(i,s=>{const a=t(s);(o||!e(r,a))&&(o=!1,r=a,i.next(s))}))})}function ARe(e,t){return e===t}function $r(e){return pt((t,n)=>{Ti(e).subscribe(Qt(n,()=>n.complete(),Y)),!n.closed&&t.subscribe(n)})}let HX=(()=>{class e{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ORe=(()=>{class e{constructor(n){this._mutationObserverFactory=n,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((n,i)=>this._cleanupObserver(i))}observe(n){const i=$d(n);return new dt(r=>{const s=this._observeElement(i).subscribe(r);return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(n){if(this._observedElements.has(n))this._observedElements.get(n).count++;else{const i=new Yt,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(n,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(n,{observer:r,stream:i,count:1})}return this._observedElements.get(n).stream}_unobserveElement(n){this._observedElements.has(n)&&(this._observedElements.get(n).count--,this._observedElements.get(n).count||this._cleanupObserver(n))}_cleanupObserver(n){if(this._observedElements.has(n)){const{observer:i,stream:r}=this._observedElements.get(n);i&&i.disconnect(),r.complete(),this._observedElements.delete(n)}}}return e.\u0275fac=function(n){return new(n||e)(qe(HX))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),VX=(()=>{class e{constructor(n,i,r){this._contentObserver=n,this._elementRef=i,this._ngZone=r,this.event=new Hn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(n){this._disabled=Nr(n),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(n){this._debounce=ih(n),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const n=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?n.pipe(uS(this.debounce)):n).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(Pe(ORe),Pe(Ii),Pe(jn))},e.\u0275dir=nn({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),dS=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({providers:[HX]}),e})();const UX=new Set;let xy,DRe=(()=>{class e{constructor(n){this._platform=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):PRe}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&function TRe(e){if(!UX.has(e))try{xy||(xy=document.createElement("style"),xy.setAttribute("type","text/css"),document.head.appendChild(xy)),xy.sheet&&(xy.sheet.insertRule(`@media ${e} {body{ }}`,0),UX.add(e))}catch(t){console.error(t)}}(n),this._matchMedia(n)}}return e.\u0275fac=function(n){return new(n||e)(qe(_s))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function PRe(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let jX=(()=>{class e{constructor(n,i){this._mediaMatcher=n,this._zone=i,this._queries=new Map,this._destroySubject=new Yt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return WX(nS(n)).some(r=>this._registerQuery(r).mql.matches)}observe(n){let o=nE(WX(nS(n)).map(s=>this._registerQuery(s).observable));return o=iE(o.pipe(Us(1)),o.pipe(BX(1),uS(0))),o.pipe(xt(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);const i=this._mediaMatcher.matchMedia(n),o={observable:new dt(s=>{const a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Qp(i),xt(({matches:s})=>({query:n,matches:s})),$r(this._destroySubject)),mql:i};return this._queries.set(n,o),o}}return e.\u0275fac=function(n){return new(n||e)(qe(DRe),qe(jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function WX(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function fS(e,t){return(e.getAttribute(t)||"").match(/\S+/g)||[]}const qX="cdk-describedby-message",hS="cdk-describedby-host";let BF=0,LRe=(()=>{class e{constructor(n,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+BF++,this._document=n,this._id=cr(ey)+"-"+BF++}describe(n,i,r){if(!this._canBeDescribed(n,i))return;const o=zF(i,r);"string"!=typeof i?(YX(i,this._id),this._messageRegistry.set(o,{messageElement:i,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(i,r),this._isElementDescribedByMessage(n,o)||this._addMessageReference(n,o)}removeDescription(n,i,r){if(!i||!this._isElementNode(n))return;const o=zF(i,r);if(this._isElementDescribedByMessage(n,o)&&this._removeMessageReference(n,o),"string"==typeof i){const s=this._messageRegistry.get(o);s&&0===s.referenceCount&&this._deleteMessageElement(o)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const n=this._document.querySelectorAll(`[${hS}="${this._id}"]`);for(let i=0;i<n.length;i++)this._removeCdkDescribedByReferenceIds(n[i]),n[i].removeAttribute(hS);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(n,i){const r=this._document.createElement("div");YX(r,this._id),r.textContent=n,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(zF(n,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(n){this._messageRegistry.get(n)?.messageElement?.remove(),this._messageRegistry.delete(n)}_createMessagesContainer(){if(this._messagesContainer)return;const n="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${n}[platform="server"]`);for(let o=0;o<i.length;o++)i[o].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(n),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(n){const i=fS(n,"aria-describedby").filter(r=>0!=r.indexOf(qX));n.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(n,i){const r=this._messageRegistry.get(i);(function IRe(e,t,n){const i=fS(e,t);i.some(r=>r.trim()==n.trim())||(i.push(n.trim()),e.setAttribute(t,i.join(" ")))})(n,"aria-describedby",r.messageElement.id),n.setAttribute(hS,this._id),r.referenceCount++}_removeMessageReference(n,i){const r=this._messageRegistry.get(i);r.referenceCount--,function FRe(e,t,n){const r=fS(e,t).filter(o=>o!=n.trim());r.length?e.setAttribute(t,r.join(" ")):e.removeAttribute(t)}(n,"aria-describedby",r.messageElement.id),n.removeAttribute(hS)}_isElementDescribedByMessage(n,i){const r=fS(n,"aria-describedby"),o=this._messageRegistry.get(i),s=o&&o.messageElement.id;return!!s&&-1!=r.indexOf(s)}_canBeDescribed(n,i){if(!this._isElementNode(n))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),o=n.getAttribute("aria-label");return!(!r||o&&o.trim()===r)}_isElementNode(n){return n.nodeType===this._document.ELEMENT_NODE}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn),qe(_s))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function zF(e,t){return"string"==typeof e?`${t||""}/${e}`:e}function YX(e,t){e.id||(e.id=`${qX}-${t}-${BF++}`)}class $Re extends class NRe{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Yt,this._typeaheadSubscription=$.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new Yt,this.change=new Yt,t instanceof x0&&t.changes.subscribe(n=>{if(this._activeItem){const r=n.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(no(n=>this._pressedLetters.push(n)),uS(t),ha(()=>this._pressedLetters.length>0),xt(()=>this._pressedLetters.join(""))).subscribe(n=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const o=(this._activeItemIndex+r)%i.length,s=i[o];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(n)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const n=this._activeItem;this.updateActiveItem(t),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(t){const n=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||My(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const n=this._getItemsArray(),i="number"==typeof t?t:n.indexOf(t);this._activeItem=n[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const n=this._getItemsArray();for(let i=1;i<=n.length;i++){const r=(this._activeItemIndex+t*i+n.length)%n.length;if(!this._skipPredicateFn(n[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,n){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=n])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof x0?this._items.toArray():this._items}}{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}function KX(e){return 0===e.buttons||0===e.offsetX&&0===e.offsetY}function ZX(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const jRe=new bt("cdk-input-modality-detector-options"),WRe={ignoreKeys:[18,17,224,91,16]},Ey=Cy({passive:!0,capture:!0});let GRe=(()=>{class e{constructor(n,i,r,o){this._platform=n,this._mostRecentTarget=null,this._modality=new wr(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=fg(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(KX(s)?"keyboard":"mouse"),this._mostRecentTarget=fg(s))},this._onTouchstart=s=>{ZX(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=fg(s))},this._options={...WRe,...o},this.modalityDetected=this._modality.pipe(BX(1)),this.modalityChanged=this.modalityDetected.pipe(zX()),n.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Ey),r.addEventListener("mousedown",this._onMousedown,Ey),r.addEventListener("touchstart",this._onTouchstart,Ey)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ey),document.removeEventListener("mousedown",this._onMousedown,Ey),document.removeEventListener("touchstart",this._onTouchstart,Ey))}}return e.\u0275fac=function(n){return new(n||e)(qe(_s),qe(jn),qe(Jn),qe(jRe,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const qRe=new bt("liveAnnouncerElement",{providedIn:"root",factory:function YRe(){return null}}),XRe=new bt("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let KRe=(()=>{class e{constructor(n,i,r,o){this._ngZone=i,this._defaultOptions=o,this._document=r,this._liveElement=n||this._createLiveElement()}announce(n,...i){const r=this._defaultOptions;let o,s;return 1===i.length&&"number"==typeof i[0]?s=i[0]:[o,s]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),null==s&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=n,"number"==typeof s&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const n="cdk-live-announcer-element",i=this._document.getElementsByClassName(n),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(n),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return e.\u0275fac=function(n){return new(n||e)(qe(qRe,8),qe(jn),qe(Jn),qe(XRe,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ZRe=new bt("cdk-focus-monitor-default-options"),pS=Cy({passive:!0,capture:!0});let HF=(()=>{class e{constructor(n,i,r,o,s){this._ngZone=n,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Yt,this._rootNodeFocusAndBlurListener=a=>{for(let c=fg(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(n,i=!1){const r=$d(n);if(!this._platform.isBrowser||1!==r.nodeType)return ln(null);const o=AX(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new Yt,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){const i=$d(n),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(n,i,r){const o=$d(n);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return 1===this._detectionMode||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,i){n.classList.toggle("cdk-focused",!!i),n.classList.toggle("cdk-touch-focused","touch"===i),n.classList.toggle("cdk-keyboard-focused","keyboard"===i),n.classList.toggle("cdk-mouse-focused","mouse"===i),n.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,i){const r=this._elementInfo.get(i),o=fg(n);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(n,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(n,i){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const i=n.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,pS),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,pS)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe($r(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(n){const i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,pS),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,pS),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,r){this._setClasses(n,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){const i=[];return this._elementInfo.forEach((r,o)=>{(o===n||r.checkChildren&&o.contains(n))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(n){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===n||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName||n.disabled)return!1;const o=n.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}}return e.\u0275fac=function(n){return new(n||e)(qe(jn),qe(_s),qe(GRe),qe(Jn,8),qe(ZRe,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const JX="cdk-high-contrast-black-on-white",eK="cdk-high-contrast-white-on-black",VF="cdk-high-contrast-active";let tK=(()=>{class e{constructor(n,i){this._platform=n,this._document=i,this._breakpointSubscription=cr(jX).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(n):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(VF,JX,eK),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?n.add(VF,JX):2===i&&n.add(VF,eK)}}}return e.\u0275fac=function(n){return new(n||e)(qe(_s),qe(Jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),nK=(()=>{class e{constructor(n){n._applyBodyHighContrastModeCssClasses()}}return e.\u0275fac=function(n){return new(n||e)(qe(tK))},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[dS]}),e})();function QRe(e,t){if(1&e&&Un(0,"mat-pseudo-checkbox",4),2&e){const n=on();it("state",n.selected?"checked":"unchecked")("disabled",n.disabled)}}function JRe(e,t){if(1&e&&(Ve(0,"span",5),At(1),Ge()),2&e){const n=on();Ye(1),ua("(",n.group.label,")")}}const e2e=["*"],n2e=new bt("mat-sanity-checks",{providedIn:"root",factory:function t2e(){return!0}});let mr=(()=>{class e{constructor(n,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!DF()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}}return e.\u0275fac=function(n){return new(n||e)(qe(tK),qe(n2e,8),qe(Jn))},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fw,fw]}),e})();function UF(e){return class extends e{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Nr(t)}}}function hw(e,t){return class extends e{constructor(...n){super(...n),this.defaultColor=t,this.color=t}get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function jF(e){return class extends e{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Nr(t)}}}function oK(e,t=0){return class extends e{constructor(...n){super(...n),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?ih(n):this.defaultTabIndex}}}function sK(e){return class extends e{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==t&&(this.errorState=o,this.stateChanges.next())}}}let WF=(()=>{class e{isErrorState(n,i){return!!(n&&n.invalid&&(n.touched||i&&i.submitted))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),aK=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[mr,mr]}),e})();class r2e{constructor(t,n,i,r=!1){this._renderer=t,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const lK={enterDuration:225,exitDuration:150},GF=Cy({passive:!0}),cK=["mousedown","touchstart"],uK=["mouseup","mouseleave","touchend","touchcancel"];class s2e{constructor(t,n,i,r){this._target=t,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=$d(i))}fadeInRipple(t,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...lK,...i.animation};i.centered&&(t=r.left+r.width/2,n=r.top+r.height/2);const s=i.radius||function a2e(e,t,n){const i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}(t,n,r),a=t-r.left,l=n-r.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-s+"px",u.style.top=l-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),h=d.transitionDuration,y="none"===d.transitionProperty||"0s"===h||"0s, 0s"===h,b=new r2e(this,u,i,y);u.style.transform="scale3d(1, 1, 1)",b.state=0,i.persistent||(this._mostRecentTransientRipple=b);let C=null;return!y&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const k=()=>this._finishRippleTransition(b),O=()=>this._destroyRipple(b);u.addEventListener("transitionend",k),u.addEventListener("transitioncancel",O),C={onTransitionEnd:k,onTransitionCancel:O}}),this._activeRipples.set(b,C),(y||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(2===t.state||3===t.state)return;const n=t.element,i={...lK,...t.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const n=$d(t);!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,this._registerEvents(cK))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(uK),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const n=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==n&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){const n=KX(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!ZX(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=t.changedTouches;for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(n=>{this._triggerElement.addEventListener(n,this,GF)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(cK.forEach(t=>{this._triggerElement.removeEventListener(t,this,GF)}),this._pointerUpEventsRegistered&&uK.forEach(t=>{this._triggerElement.removeEventListener(t,this,GF)}))}}const l2e=new bt("mat-ripple-global-options");let gw=(()=>{class e{constructor(n,i,r,o,s){this._elementRef=n,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new s2e(this,i,n,r)}get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,i=0,r){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...n})}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(jn),Pe(_s),Pe(l2e,8),Pe(uc,8))},e.\u0275dir=nn({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,i){2&n&&po("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),e})(),gS=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[mr,mr]}),e})(),c2e=(()=>{class e{constructor(n){this._animationMode=n,this.state="unchecked",this.disabled=!1}}return e.\u0275fac=function(n){return new(n||e)(Pe(uc,8))},e.\u0275cmp=ir({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(n,i){2&n&&po("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(n,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),e})(),u2e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[mr]}),e})();const dK=new bt("MAT_OPTION_PARENT_COMPONENT"),fK=new bt("MatOptgroup");let d2e=0;class f2e{constructor(t,n=!1){this.source=t,this.isUserInput=n}}let h2e=(()=>{class e{constructor(n,i,r,o){this._element=n,this._changeDetectorRef=i,this._parent=r,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+d2e++,this.onSelectionChange=new Hn,this._stateChanges=new Yt}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(n){this._disabled=Nr(n)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(n,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(n){(13===n.keyCode||32===n.keyCode)&&!My(n)&&(this._selectViaInteraction(),n.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const n=this.viewValue;n!==this._mostRecentViewValue&&(this._mostRecentViewValue=n,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(n=!1){this.onSelectionChange.emit(new f2e(this,n))}}return e.\u0275fac=function(n){F_()},e.\u0275dir=nn({type:e,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),e})(),qF=(()=>{class e extends h2e{constructor(n,i,r,o){super(n,i,r,o)}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(Al),Pe(dK,8),Pe(fK,8))},e.\u0275cmp=ir({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(n,i){1&n&&fn("click",function(){return i._selectViaInteraction()})("keydown",function(o){return i._handleKeydown(o)}),2&n&&(m0("id",i.id),er("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),po("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[qn],ngContentSelectors:e2e,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(n,i){1&n&&(qf(),tn(0,QRe,1,2,"mat-pseudo-checkbox",0),Ve(1,"span",1),fs(2),Ge(),tn(3,JRe,2,1,"span",2),Un(4,"div",3)),2&n&&(it("ngIf",i.multiple),Ye(3),it("ngIf",i.group&&i.group._inert),Ye(1),it("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[gw,_u,c2e],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),e})();function hK(e,t,n){if(n.length){let i=t.toArray(),r=n.toArray(),o=0;for(let s=0;s<e+1;s++)i[s].group&&i[s].group===r[o]&&o++;return o}return 0}let YF=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[gS,fa,mr,u2e]}),e})();function g2e(e,t){if(1&e&&($p(),Un(0,"circle",4)),2&e){const n=on(),i=q_(1);Md("animation-name","mat-progress-spinner-stroke-rotate-"+n._spinnerAnimationLabel)("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%")("transform-origin",n._getCircleTransformOrigin(i)),er("r",n._getCircleRadius())}}function m2e(e,t){if(1&e&&($p(),Un(0,"circle",4)),2&e){const n=on(),i=q_(1);Md("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%")("transform-origin",n._getCircleTransformOrigin(i)),er("r",n._getCircleRadius())}}const y2e=hw(class{constructor(e){this._elementRef=e}},"primary"),v2e=new bt("mat-progress-spinner-default-options",{providedIn:"root",factory:function b2e(){return{diameter:100}}});class _c extends y2e{constructor(t,n,i,r,o,s,a,l){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=$.EMPTY,this.mode="determinate";const c=_c._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(i.head)||c.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!o&&!o._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),o&&(o.color&&(this.color=this.defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth)),n.isBrowser&&n.SAFARI&&a&&s&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>s.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=ih(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=ih(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,ih(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=AX(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){const n=50*(t.currentScale??1);return`${n}% ${n}%`}_attachStyleNode(){const t=this._styleRoot,n=this._diameter,i=_c._diameters;let r=i.get(t);if(!r||!r.has(n)){const o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),t.appendChild(o),r||(r=new Set,i.set(t,r)),r.add(n)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}_c._diameters=new WeakMap,_c.\u0275fac=function(t){return new(t||_c)(Pe(Ii),Pe(_s),Pe(Jn,8),Pe(uc,8),Pe(v2e),Pe(Al),Pe(lS),Pe(jn))},_c.\u0275cmp=ir({type:_c,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,n){2&t&&(er("aria-valuemin","determinate"===n.mode?0:null)("aria-valuemax","determinate"===n.mode?100:null)("aria-valuenow","determinate"===n.mode?n.value:null)("mode",n.mode),Md("width",n.diameter,"px")("height",n.diameter,"px"),po("_mat-animation-noopable",n._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[qn],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,n){1&t&&($p(),Ve(0,"svg",0,1),tn(2,g2e,1,11,"circle",2),tn(3,m2e,1,9,"circle",3),Ge()),2&t&&(Md("width",n.diameter,"px")("height",n.diameter,"px"),it("ngSwitch","indeterminate"===n.mode),er("viewBox",n._getViewBox()),Ye(2),it("ngSwitchCase",!0),Ye(1),it("ngSwitchCase",!1))},dependencies:[iy,qx],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let pK=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[mr,fa,mr]}),e})();function C2e(e,t){1&e&&(Ve(0,"div"),Un(1,"mat-spinner",3),Ge())}const M2e=function(e){return{visibility:e}};let KF=(()=>{class e{constructor(){this.drawn=!1,this.loading=!0,this._transferColor=dX,this._max=-1,this.nodeR=20,this.lNodeR=8,this._height=500,this._width=0,this._test=0}set containerWidth(n){0==this._width&&(this._width=n)}set data(n){this._data=n,n&&n.nodes&&n.nodes.length>0&&(this.prepareData(),this.drawn?this.update():(this.drawn=!0,this.create()))}set selected(n){this._selected=n,n&&n.length>0&&this.drawn&&this.highlight()}ngOnInit(){}prepareData(){const n=this;let i=function(e,t){var i,r,o,n=[];return e.forEach(function(a){if(a.length>2){var l="ln";for(o=0;o<a.length;o++)l+=a[o];for(t.push(i={id:l,link:!0}),r=0;r<a.length;r++)n.push({source:a[r],target:i.id})}else n.push({source:a[0],target:a[1]})}),{links:n,nodes:t}}(this._data.links.map(r=>r.ids),[...this._data.nodes]);this._links=i.links,this._nodes=i.nodes,this._max=Math.max(...i.nodes.map(r=>r.weight).filter(r=>null!=r)),n._bilinks=[],this._links.forEach(r=>{let o=r.source=this._nodes.find(l=>l.id==r.source),s=r.target=this._nodes.find(l=>l.id==r.target),a={};this._nodes.push(a),this._links.push({source:o,target:a},{source:a,target:s}),n._bilinks.push([o,a,s])})}createSimulation(){this._simulation=vF().force("link",iw().id(n=>n.id)).force("charge",bF().strength(-50).distanceMin(30).distanceMax(200)).force("center",gF(this._width/2,this._height/2)).force("collide",yF(50))}updateSimulation(){this._simulation.nodes(this._nodes).on("tick",this.ticked.bind(this)).force("links",iw(this._links))}create(){let n=this,r=EX().scaleExtent([1/8,10]).on("zoom",n.zoomed.bind(n));this._drag=sX().on("start",n.dragstarted.bind(n)).on("drag",n.dragged.bind(n)).on("end",n.dragended.bind(n)),n.svg=Zn("#hypergraph").attr("height",this._height).call(r).append("g"),r.scaleTo(n.svg,1/4),n.svg.append("defs").append("marker").attr("id","circleMarker").attr("markerHeight",5).attr("markerWidth",5).attr("markerUnits","strokeWidth").attr("orient","auto").attr("refX",0).attr("refY",0).attr("viewBox","-6 -6 12 12").append("path").attr("d","M 0, 0  m -5, 0  a 5,5 0 1,0 10,0  a 5,5 0 1,0 -10,0").attr("fill","black"),this.createSimulation(),this.updateSimulation(),this.createLinks(),this.createNodes(),this.loading=!1}createLinks(){this._links_g=this.svg.selectAll(".link").data(this._bilinks).enter().append("g").attr("class",i=>i[2].link?"link link-to-"+(i[0].constraintType?i[0].constraintType+"-":"")+i[0].id:"link link-to-"+(i[0].constraintType?i[0].constraintType+"-":"")+i[2].id).attr("id",i=>i[2].link?"link-"+(i[0].constraintType?i[0].constraintType+"-":"")+i[0].id+"-"+i[2].id:"link-"+(i[0].constraintType?i[0].constraintType+"-":"")+i[2].id+"-"+i[0].id),this._links_g_paths=this._links_g.append("path").attr("marker-start","url(#circleMarker)").attr("marker-mid","url(#textMarker)").attr("marker-end",i=>i[2].link?"null":"url(#circleMarker)"),this._links_g.append("title").text(i=>i[0].asp?i[0].asp:"null")}createNodes(){const n=this;this._nodes_g=this.svg.selectAll(".node").data(this._nodes.filter(i=>i.id)).enter().append("g").attr("class",i=>(i.link?"linknode":"node")+(i.constraintType?" "+i.constraintType:"")).attr("id",i=>"node-"+(i.constraintType?i.constraintType+"-":"")+i.id).on("mouseover",function(i,r){const o=Zn(this).select("circle").attr("fill"),s=or(".link-to-"+(r.constraintType?r.constraintType+"-":"")+r.id);s.classed("hovered",!0),s.select("path").attr("stroke",o)}).on("mouseout",function(i,r){const o=or(".link-to-"+(r.constraintType?r.constraintType+"-":"")+r.id);o.classed("hovered",!1),o.select("path").attr("stroke","#bbb")}),this._nodes_g.append("circle").attr("r",i=>i.link?n.lNodeR:n.nodeR).attr("fill",(i,r)=>i.asp&&-1!=i.weight?n._transferColor(1-i.weight/n._max):"rgb(5, 48, 97)"),this._nodes_g.append("text").attr("dx",22).attr("dy",".35em").text(i=>i.link?null:i.id+(-1!=i.weight?" - weight: "+i.weight:"")),this._nodes_g.append("title").text(i=>i.link?null:i.asp+(-1!=i.weight?" - weight: "+i.weight:"")),this._nodes_g.call(this._drag)}update(){this.svg.transition().duration(750),this._links_g.remove(),this._nodes_g.remove(),this.createLinks(),this.createNodes(),this.createSimulation(),this.updateSimulation()}highlight(){or(".node").classed("selected",!1),or(".link").classed("selected",!1),this._selected.forEach((n,i)=>{const r=Zn("#node-"+n.constraintType+"-"+n.id),o=or(".link-to-"+n.constraintType+"-"+n.id);r.classed("selected",!0),o.classed("selected",!0)})}ticked(){this._links_g_paths.attr("d",n=>this.positionLink(n)),this._nodes_g.attr("transform",this.positionNode)}positionLink(n){const i=this;let f,h,y,b,C,k,r=n[0].x-n[1].x,o=n[0].y-n[1].y,s=n[2].x-n[1].x,a=n[2].y-n[1].y,l=Math.sqrt(r*r+o*o),c=Math.sqrt(s*s+a*a);return n[2].link?(f=s*i.lNodeR/c,h=a*i.lNodeR/c):(f=s*i.nodeR/c,h=a*i.nodeR/c),n[0].link?(y=n[0].x,b=n[0].y):(y=n[0].x-r*i.nodeR/l,b=n[0].y-o*i.nodeR/l),n[2].link?(C=n[2].x,k=n[2].y):(C=n[2].x-f,k=n[2].y-h),"M"+y+","+b+"S"+n[1].x+","+n[1].y+" "+C+","+k}positionNode(n){return"translate("+n.x+","+n.y+")"}dragstarted(n,i){n.active||this._simulation.alphaTarget(.3).restart(),i.fx=i.x,i.fy=i.y,n.sourceEvent.stopPropagation()}dragged(n,i){i.fx=n.x,i.fy=n.y}dragended(n,i){n.active||this._simulation.alphaTarget(0),i.fx=null,i.fy=null}zoomed(n,i){this.svg.attr("transform",n.transform)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ir({type:e,selectors:[["app-hypergraph"]],inputs:{containerWidth:"containerWidth",data:"data",selected:"selected"},decls:3,vars:5,consts:[[4,"ngIf"],[3,"ngStyle"],["id","hypergraph"],["diameter","60"]],template:function(n,i){1&n&&(tn(0,C2e,2,0,"div",0),Ve(1,"div",1),$p(),Un(2,"svg",2),Ge()),2&n&&(it("ngIf",i.loading),Ye(1),it("ngStyle",zs(3,M2e,i.drawn?"visible":"hidden")),Ye(1),er("width",i._width))},dependencies:[_u,O0,_c],styles:[".link{fill:none;stroke:#bbb}  .node circle,   .linknode circle{pointer-events:all;cursor:pointer;stroke:#000;stroke-width:1px}  svg .node:hover text{transform:scale(1.5)}  svg .node:hover circle{transform:scale(1.5)}svg[_ngcontent-%COMP%]{height:100vh!important}  svg .selected path{stroke:#8b0000;stroke-width:8px}  svg .hovered path{stroke-width:8px}"]}),e})();function x2e(){}function ZF(e){return null==e?x2e:function(){return this.querySelector(e)}}function S2e(){return[]}function gK(e){return null==e?S2e:function(){return this.querySelectorAll(e)}}function mK(e){return function(){return this.matches(e)}}function _K(e){return new Array(e.length)}function mS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function T2e(e,t,n,i,r,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new mS(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function P2e(e,t,n,i,r,o,s){var a,l,h,c={},u=t.length,d=o.length,f=new Array(u);for(a=0;a<u;++a)(l=t[a])&&(f[a]=h="$"+s.call(l,l.__data__,a,t),h in c?r[a]=l:c[h]=l);for(a=0;a<d;++a)(l=c[h="$"+s.call(e,o[a],a,o)])?(i[a]=l,l.__data__=o[a],c[h]=null):n[a]=new mS(e,o[a]);for(a=0;a<u;++a)(l=t[a])&&c[f[a]]===l&&(r[a]=l)}function B2e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}mS.prototype={constructor:mS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var QF="http://www.w3.org/1999/xhtml";const vK={svg:"http://www.w3.org/2000/svg",xhtml:QF,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _S(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),vK.hasOwnProperty(t)?{space:vK[t],local:e}:e}function G2e(e){return function(){this.removeAttribute(e)}}function q2e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Y2e(e,t){return function(){this.setAttribute(e,t)}}function X2e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function K2e(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Z2e(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bK(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function J2e(e){return function(){this.style.removeProperty(e)}}function eIe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tIe(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Sy(e,t){return e.style.getPropertyValue(t)||bK(e).getComputedStyle(e,null).getPropertyValue(t)}function iIe(e){return function(){delete this[e]}}function rIe(e,t){return function(){this[e]=t}}function oIe(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function wK(e){return e.trim().split(/^|\s+/)}function JF(e){return e.classList||new CK(e)}function CK(e){this._node=e,this._names=wK(e.getAttribute("class")||"")}function MK(e,t){for(var n=JF(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function xK(e,t){for(var n=JF(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function aIe(e){return function(){MK(this,e)}}function lIe(e){return function(){xK(this,e)}}function cIe(e,t){return function(){(t.apply(this,arguments)?MK:xK)(this,e)}}function dIe(){this.textContent=""}function fIe(e){return function(){this.textContent=e}}function hIe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gIe(){this.innerHTML=""}function mIe(e){return function(){this.innerHTML=e}}function _Ie(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vIe(){this.nextSibling&&this.parentNode.appendChild(this)}function wIe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function MIe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===QF&&t.documentElement.namespaceURI===QF?t.createElement(e):t.createElementNS(n,e)}}function xIe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function EK(e){var t=_S(e);return(t.local?xIe:MIe)(t)}function SIe(){return null}function AIe(){var e=this.parentNode;e&&e.removeChild(this)}function DIe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TIe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}CK.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var SK={},hg=null;function FIe(e,t,n){return e=kK(e,t,n),function(i){var r=i.relatedTarget;(!r||r!==this&&!(8&r.compareDocumentPosition(this)))&&e.call(this,i)}}function kK(e,t,n){return function(i){var r=hg;hg=i;try{e.call(this,this.__data__,t,n)}finally{hg=r}}}function LIe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function NIe(e){return function(){var t=this.__on;if(t){for(var o,n=0,i=-1,r=t.length;n<r;++n)o=t[n],e.type&&o.type!==e.type||o.name!==e.name?t[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?t.length=i:delete this.__on}}}function $Ie(e,t,n){var i=SK.hasOwnProperty(e.type)?FIe:kK;return function(r,o,s){var l,a=this.__on,c=i(t,o,s);if(a)for(var u=0,d=a.length;u<d;++u)if((l=a[u]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=t);this.addEventListener(e.type,c,n),l={type:e.type,name:e.name,value:t,listener:c,capture:n},a?a.push(l):this.__on=[l]}}function AK(e,t,n){var i=bK(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function zIe(e,t){return function(){return AK(this,e,t)}}function HIe(e,t){return function(){return AK(this,e,t.apply(this,arguments))}}typeof document<"u"&&("onmouseenter"in document.documentElement||(SK={mouseenter:"mouseover",mouseleave:"mouseout"}));var OK=[null];function Za(e,t){this._groups=e,this._parents=t}function DK(){return new Za([[document.documentElement]],OK)}Za.prototype=DK.prototype={constructor:Za,select:function E2e(e){"function"!=typeof e&&(e=ZF(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l,c,o=t[r],s=o.length,a=i[r]=new Array(s),u=0;u<s;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Za(i,this._parents)},selectAll:function k2e(e){"function"!=typeof e&&(e=gK(e));for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var l,s=t[o],a=s.length,c=0;c<a;++c)(l=s[c])&&(i.push(e.call(l,l.__data__,c,s)),r.push(l));return new Za(i,r)},filter:function A2e(e){"function"!=typeof e&&(e=mK(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l,o=t[r],s=o.length,a=i[r]=[],c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Za(i,this._parents)},data:function R2e(e,t){if(!e)return h=new Array(this.size()),c=-1,this.each(function(ne){h[++c]=ne}),h;var n=t?P2e:T2e,i=this._parents,r=this._groups;"function"!=typeof e&&(e=function D2e(e){return function(){return e}}(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=r[c],f=d.length,h=e.call(u,u&&u.__data__,c,i),y=h.length,b=a[c]=new Array(y),C=s[c]=new Array(y);n(u,d,b,C,l[c]=new Array(f),h,t);for(var z,q,O=0,I=0;O<y;++O)if(z=b[O]){for(O>=I&&(I=O+1);!(q=C[I])&&++I<y;);z._next=q||null}}return(s=new Za(s,i))._enter=a,s._exit=l,s},enter:function O2e(){return new Za(this._enter||this._groups.map(_K),this._parents)},exit:function I2e(){return new Za(this._exit||this._groups.map(_K),this._parents)},join:function F2e(e,t,n){var i=this.enter(),r=this,o=this.exit();return i="function"==typeof e?e(i):i.append(e+""),null!=t&&(r=t(r)),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function L2e(e){for(var t=this._groups,n=e._groups,i=t.length,o=Math.min(i,n.length),s=new Array(i),a=0;a<o;++a)for(var f,l=t[a],c=n[a],u=l.length,d=s[a]=new Array(u),h=0;h<u;++h)(f=l[h]||c[h])&&(d[h]=f);for(;a<i;++a)s[a]=t[a];return new Za(s,this._parents)},order:function N2e(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s,i=e[t],r=i.length-1,o=i[r];--r>=0;)(s=i[r])&&(o&&4^s.compareDocumentPosition(o)&&o.parentNode.insertBefore(s,o),o=s);return this},sort:function $2e(e){function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}e||(e=B2e);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var c,s=n[o],a=s.length,l=r[o]=new Array(a),u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new Za(r,this._parents).order()},call:function z2e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function H2e(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function V2e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function U2e(){var e=0;return this.each(function(){++e}),e},empty:function j2e(){return!this.node()},each:function W2e(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a,r=t[n],o=0,s=r.length;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this},attr:function Q2e(e,t){var n=_S(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?q2e:G2e:"function"==typeof t?n.local?Z2e:K2e:n.local?X2e:Y2e)(n,t))},style:function nIe(e,t,n){return arguments.length>1?this.each((null==t?J2e:"function"==typeof t?tIe:eIe)(e,t,n??"")):Sy(this.node(),e)},property:function sIe(e,t){return arguments.length>1?this.each((null==t?iIe:"function"==typeof t?oIe:rIe)(e,t)):this.node()[e]},classed:function uIe(e,t){var n=wK(e+"");if(arguments.length<2){for(var i=JF(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?cIe:t?aIe:lIe)(n,t))},text:function pIe(e){return arguments.length?this.each(null==e?dIe:("function"==typeof e?hIe:fIe)(e)):this.node().textContent},html:function yIe(e){return arguments.length?this.each(null==e?gIe:("function"==typeof e?_Ie:mIe)(e)):this.node().innerHTML},raise:function bIe(){return this.each(vIe)},lower:function CIe(){return this.each(wIe)},append:function EIe(e){var t="function"==typeof e?e:EK(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function kIe(e,t){var n="function"==typeof e?e:EK(e),i=null==t?SIe:"function"==typeof t?t:ZF(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function OIe(){return this.each(AIe)},clone:function PIe(e){return this.select(e?TIe:DIe)},datum:function RIe(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function BIe(e,t,n){var r,s,i=LIe(e+""),o=i.length;if(!(arguments.length<2)){for(a=t?$Ie:NIe,null==n&&(n=!1),r=0;r<o;++r)this.each(a(i[r],t,n));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(r=0,u=a[l];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value},dispatch:function VIe(e,t){return this.each(("function"==typeof t?HIe:zIe)(e,t))}};const rh=DK;var UIe={value:function(){}};function TK(){for(var i,e=0,t=arguments.length,n={};e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new yS(n)}function yS(e){this._=e}function jIe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}function WIe(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function PK(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=UIe,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}yS.prototype=TK.prototype={constructor:yS,on:function(e,t){var r,n=this._,i=jIe(e+"",n),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=PK(n[r],e.name,t);else if(null==t)for(r in n)n[r]=PK(n[r],e.name,null);return this}for(;++o<s;)if((r=(e=i[o]).type)&&(r=WIe(n[r],e.name)))return r},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new yS(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,o,n=new Array(r),i=0;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,r=(o=this._[e]).length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};const GIe=TK;var vS,yw,ky=0,mw=0,_w=0,bS=0,pg=0,wS=0,vw="object"==typeof performance&&performance.now?performance:Date,IK="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function CS(){return pg||(IK(qIe),pg=vw.now()+wS)}function qIe(){pg=0}function MS(){this._call=this._time=this._next=null}function FK(e,t,n){var i=new MS;return i.restart(e,t,n),i}function LK(){pg=(bS=vw.now())+wS,ky=mw=0;try{!function YIe(){CS(),++ky;for(var t,e=vS;e;)(t=pg-e._time)>=0&&e._call.call(null,t),e=e._next;--ky}()}finally{ky=0,function KIe(){for(var e,n,t=vS,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vS=n);yw=e,eL(i)}(),pg=0}}function XIe(){var e=vw.now(),t=e-bS;t>1e3&&(wS-=t,bS=e)}function eL(e){ky||(mw&&(mw=clearTimeout(mw)),e-pg>24?(e<1/0&&(mw=setTimeout(LK,e-vw.now()-wS)),_w&&(_w=clearInterval(_w))):(_w||(bS=vw.now(),_w=setInterval(XIe,1e3)),ky=1,IK(LK)))}function NK(e,t,n){var i=new MS;return i.restart(function(r){i.stop(),e(r+t)},t=null==t?0:+t,n),i}MS.prototype=FK.prototype={constructor:MS,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?CS():+n)+(null==t?0:+t),!this._next&&yw!==this&&(yw?yw._next=this:vS=this,yw=this),this._call=e,this._time=n,eL()},stop:function(){this._call&&(this._call=null,this._time=1/0,eL())}};var ZIe=GIe("start","end","cancel","interrupt"),QIe=[];function SS(e,t,n,i,r,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function JIe(e,t,n){var r,i=e.__transition;function s(c){var u,d,f,h;if(1!==n.state)return l();for(u in i)if((h=i[u]).name===n.name){if(3===h.state)return NK(s);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[u]):+u<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[u])}if(NK(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=5,1),d=-1,f=r.length;++d<f;)r[d].call(e,u);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var c in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=FK(function o(c){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)},0,n.time)}(e,n,{name:t,index:i,group:r,on:ZIe,tween:QIe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function iL(e,t){var n=yc(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Bd(e,t){var n=yc(e,t);if(n.state>3)throw new Error("too late; already running");return n}function yc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function oh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var bw,oL,UK,kS,HK=180/Math.PI,rL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function VK(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*HK,skewX:Math.atan(l)*HK,scaleX:s,scaleY:a}}function jK(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}return function(c,u){var d=[],f=[];return c=e(c),u=e(u),function o(c,u,d,f,h,y){if(c!==d||u!==f){var b=h.push("translate(",null,t,null,n);y.push({i:b-4,x:oh(c,d)},{i:b-2,x:oh(u,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}(c.translateX,c.translateY,u.translateX,u.translateY,d,f),function s(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:oh(c,u)})):u&&d.push(r(d)+"rotate("+u+i)}(c.rotate,u.rotate,d,f),function a(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:oh(c,u)}):u&&d.push(r(d)+"skewX("+u+i)}(c.skewX,u.skewX,d,f),function l(c,u,d,f,h,y){if(c!==d||u!==f){var b=h.push(r(h)+"scale(",null,",",null,")");y.push({i:b-4,x:oh(c,d)},{i:b-2,x:oh(u,f)})}else(1!==d||1!==f)&&h.push(r(h)+"scale("+d+","+f+")")}(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(h){for(var C,y=-1,b=f.length;++y<b;)d[(C=f[y]).i]=C.x(h);return d.join("")}}}var rFe=jK(function nFe(e){return"none"===e?rL:(bw||(bw=document.createElement("DIV"),oL=document.documentElement,UK=document.defaultView),bw.style.transform=e,e=UK.getComputedStyle(oL.appendChild(bw),null).getPropertyValue("transform"),oL.removeChild(bw),VK(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),oFe=jK(function iFe(e){return null!=e&&(kS||(kS=document.createElementNS("http://www.w3.org/2000/svg","g")),kS.setAttribute("transform",e),e=kS.transform.baseVal.consolidate())?VK((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):rL},", ",")",")");function sFe(e,t){var n,i;return function(){var r=Bd(this,e),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===t){(i=i.slice()).splice(s,1);break}r.tween=i}}function aFe(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Bd(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function sL(e,t,n){var i=e._id;return e.each(function(){var r=Bd(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return yc(r,i).value[t]}}function aL(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function WK(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function ww(){}var AS=1/.7,Ay="\\s*([+-]?\\d+)\\s*",Mw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",wu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cFe=/^#([0-9a-f]{3,8})$/,uFe=new RegExp("^rgb\\("+[Ay,Ay,Ay]+"\\)$"),dFe=new RegExp("^rgb\\("+[wu,wu,wu]+"\\)$"),fFe=new RegExp("^rgba\\("+[Ay,Ay,Ay,Mw]+"\\)$"),hFe=new RegExp("^rgba\\("+[wu,wu,wu,Mw]+"\\)$"),pFe=new RegExp("^hsl\\("+[Mw,wu,wu]+"\\)$"),gFe=new RegExp("^hsla\\("+[Mw,wu,wu,Mw]+"\\)$"),GK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function qK(){return this.rgb().formatHex()}function YK(){return this.rgb().formatRgb()}function xw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cFe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?XK(t):3===n?new Qa(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?OS(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?OS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=uFe.exec(e))?new Qa(t[1],t[2],t[3],1):(t=dFe.exec(e))?new Qa(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=fFe.exec(e))?OS(t[1],t[2],t[3],t[4]):(t=hFe.exec(e))?OS(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=pFe.exec(e))?QK(t[1],t[2]/100,t[3]/100,1):(t=gFe.exec(e))?QK(t[1],t[2]/100,t[3]/100,t[4]):GK.hasOwnProperty(e)?XK(GK[e]):"transparent"===e?new Qa(NaN,NaN,NaN,0):null}function XK(e){return new Qa(e>>16&255,e>>8&255,255&e,1)}function OS(e,t,n,i){return i<=0&&(e=t=n=NaN),new Qa(e,t,n,i)}function _Fe(e){return e instanceof ww||(e=xw(e)),e?new Qa((e=e.rgb()).r,e.g,e.b,e.opacity):new Qa}function DS(e,t,n,i){return 1===arguments.length?_Fe(e):new Qa(e,t,n,i??1)}function Qa(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function KK(){return"#"+lL(this.r)+lL(this.g)+lL(this.b)}function ZK(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function lL(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function QK(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Cu(e,t,n,i)}function JK(e){if(e instanceof Cu)return new Cu(e.h,e.s,e.l,e.opacity);if(e instanceof ww||(e=xw(e)),!e)return new Cu;if(e instanceof Cu)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(n<i):n===o?(i-t)/a+2:(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new Cu(s,a,l,e.opacity)}function Cu(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function cL(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function eZ(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}function tZ(e){return function(){return e}}function iZ(e,t){var n=t-e;return n?function nZ(e,t){return function(n){return e+n*t}}(e,n):tZ(isNaN(e)?t:e)}aL(ww,xw,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:qK,formatHex:qK,formatHsl:function mFe(){return JK(this).formatHsl()},formatRgb:YK,toString:YK}),aL(Qa,DS,WK(ww,{brighter:function(e){return e=null==e?AS:Math.pow(AS,e),new Qa(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Qa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KK,formatHex:KK,formatRgb:ZK,toString:ZK})),aL(Cu,function yFe(e,t,n,i){return 1===arguments.length?JK(e):new Cu(e,t,n,i??1)},WK(ww,{brighter:function(e){return e=null==e?AS:Math.pow(AS,e),new Cu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Cu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Qa(cL(e>=240?e-240:e+120,r,i),cL(e,r,i),cL(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const rZ=function e(t){var n=function CFe(e){return 1==(e=+e)?iZ:function(t,n){return n-t?function wFe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):tZ(isNaN(t)?n:t)}}(t);function i(r,o){var s=n((r=DS(r)).r,(o=DS(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),c=iZ(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function oZ(e){return function(t){var s,a,n=t.length,i=new Array(n),r=new Array(n),o=new Array(n);for(s=0;s<n;++s)a=DS(t[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=e(i),r=e(r),o=e(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}oZ(function vFe(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1];return eZ((n-i/t)*t,i>0?e[i-1]:2*r-o,r,o,i<t-1?e[i+2]:2*o-r)}}),oZ(function bFe(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t);return eZ((n-i/t)*t,e[(i+t-1)%t],e[i%t],e[(i+1)%t],e[(i+2)%t])}});var uL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dL=new RegExp(uL.source,"g");function EFe(e,t){var i,r,o,n=uL.lastIndex=dL.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(i=uL.exec(e))&&(r=dL.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:oh(i,r)})),n=dL.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function xFe(e){return function(t){return e(t)+""}}(l[0].x):function MFe(e){return function(){return e}}(t):(t=l.length,function(c){for(var d,u=0;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function sZ(e,t){var n;return("number"==typeof t?oh:t instanceof xw?rZ:(n=xw(t))?(t=n,rZ):EFe)(e,t)}function SFe(e){return function(){this.removeAttribute(e)}}function kFe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AFe(e,t,n){var i,o,r=n+"";return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function OFe(e,t,n){var i,o,r=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function DFe(e,t,n){var i,r,o;return function(){var s,l,a=n(this);return null==a?void this.removeAttribute(e):(s=this.getAttribute(e))===(l=a+"")?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}function TFe(e,t,n){var i,r,o;return function(){var s,l,a=n(this);return null==a?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(l=a+"")?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}function RFe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function IFe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function FFe(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&IFe(e,o)),n}return r._value=t,r}function LFe(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&RFe(e,o)),n}return r._value=t,r}function $Fe(e,t){return function(){iL(this,e).delay=+t.apply(this,arguments)}}function BFe(e,t){return t=+t,function(){iL(this,e).delay=t}}function HFe(e,t){return function(){Bd(this,e).duration=+t.apply(this,arguments)}}function VFe(e,t){return t=+t,function(){Bd(this,e).duration=t}}function jFe(e,t){if("function"!=typeof t)throw new Error;return function(){Bd(this,e).ease=t}}function XFe(e,t,n){var i,r,o=function YFe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(t)?iL:Bd;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}var tLe=rh.prototype.constructor;function aZ(e){return function(){this.style.removeProperty(e)}}function lLe(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function cLe(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&lLe(e,s,n)),i}return o._value=t,o}function pLe(e){return function(t){this.textContent=e.call(this,t)}}function gLe(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&pLe(r)),t}return i._value=e,i}var vLe=0;function zd(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function fL(e){return rh().transition(e)}function lZ(){return++vLe}var Oy=rh.prototype;zd.prototype=fL.prototype={constructor:zd,select:function JFe(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ZF(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var u,d,a=i[s],l=a.length,c=o[s]=new Array(l),f=0;f<l;++f)(u=a[f])&&(d=e.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,SS(c[f],t,n,f,c,yc(u,n)));return new zd(o,this._parents,t,n)},selectAll:function eLe(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=gK(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var u,l=i[a],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var h,f=e.call(u,u.__data__,d,l),y=yc(u,n),b=0,C=f.length;b<C;++b)(h=f[b])&&SS(h,t,n,b,f,y);o.push(f),s.push(u)}return new zd(o,s,t,n)},filter:function GFe(e){"function"!=typeof e&&(e=mK(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l,o=t[r],s=o.length,a=i[r]=[],c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new zd(i,this._parents,this._name,this._id)},merge:function qFe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=Math.min(i,n.length),s=new Array(i),a=0;a<o;++a)for(var f,l=t[a],c=n[a],u=l.length,d=s[a]=new Array(u),h=0;h<u;++h)(f=l[h]||c[h])&&(d[h]=f);for(;a<i;++a)s[a]=t[a];return new zd(s,this._parents,this._name,this._id)},selection:function nLe(){return new tLe(this._groups,this._parents)},transition:function _Le(){for(var e=this._name,t=this._id,n=lZ(),i=this._groups,r=i.length,o=0;o<r;++o)for(var l,s=i[o],a=s.length,c=0;c<a;++c)if(l=s[c]){var u=yc(l,t);SS(l,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new zd(i,this._parents,e,n)},call:Oy.call,nodes:Oy.nodes,node:Oy.node,size:Oy.size,empty:Oy.empty,each:Oy.each,on:function KFe(e,t){var n=this._id;return arguments.length<2?yc(this.node(),n).on.on(e):this.each(XFe(n,e,t))},attr:function PFe(e,t){var n=_S(e),i="transform"===n?oFe:sZ;return this.attrTween(e,"function"==typeof t?(n.local?TFe:DFe)(n,i,sL(this,"attr."+e,t)):null==t?(n.local?kFe:SFe)(n):(n.local?OFe:AFe)(n,i,t))},attrTween:function NFe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=_S(e);return this.tween(n,(i.local?FFe:LFe)(i,t))},style:function aLe(e,t,n){var i="transform"==(e+="")?rFe:sZ;return null==t?this.styleTween(e,function iLe(e,t){var n,i,r;return function(){var o=Sy(this,e),s=(this.style.removeProperty(e),Sy(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}(e,i)).on("end.style."+e,aZ(e)):"function"==typeof t?this.styleTween(e,function oLe(e,t,n){var i,r,o;return function(){var s=Sy(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=Sy(this,e)),s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}(e,i,sL(this,"style."+e,t))).each(function sLe(e,t){var n,i,r,a,o="style."+t,s="end."+o;return function(){var l=Bd(this,e),c=l.on,u=null==l.value[o]?a||(a=aZ(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(s,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function rLe(e,t,n){var i,o,r=n+"";return function(){var s=Sy(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function uLe(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,cLe(e,t,n??""))},text:function hLe(e){return this.tween("text","function"==typeof e?function fLe(e){return function(){var t=e(this);this.textContent=t??""}}(sL(this,"text",e)):function dLe(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function mLe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,gLe(e))},remove:function QFe(){return this.on("end.remove",function ZFe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function lFe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s,i=yc(this.node(),n).tween,r=0,o=i.length;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((null==t?sFe:aFe)(n,e,t))},delay:function zFe(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?$Fe:BFe)(t,e)):yc(this.node(),t).delay},duration:function UFe(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?HFe:VFe)(t,e)):yc(this.node(),t).duration},ease:function WFe(e){var t=this._id;return arguments.length?this.each(jFe(t,e)):yc(this.node(),t).ease},end:function yLe(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){0==--r&&o()}};n.each(function(){var c=Bd(this,i),u=c.on;u!==e&&((t=(e=u).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t})})}};var hL={time:null,delay:0,duration:250,ease:function bLe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function wLe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return hL.time=CS(),hL;return n}function Ew(e){return"string"==typeof e?new Za([[document.querySelector(e)]],[document.documentElement]):new Za([[e]],OK)}function xLe(e,t){return e.each(function(){var n=t.apply(this,arguments),i=Ew(this);for(var r in n)i.attr(r,n[r])})}function ELe(e,t){for(var n in t)e.attr(n,t[n]);return e}function kLe(e,t,n){return e.each(function(){var i=t.apply(this,arguments),r=Ew(this);for(var o in i)r.style(o,i[o],n)})}function ALe(e,t,n){for(var i in t)e.style(i,t[i],n);return e}function DLe(e,t){return e.each(function(){var n=t.apply(this,arguments),i=Ew(this);for(var r in n)i.property(r,n[r])})}function TLe(e,t){for(var n in t)e.property(n,t[n]);return e}function RLe(e,t){return e.each(function(){var n=t.apply(this,arguments),i=Ew(this).transition(e);for(var r in n)i.attr(r,n[r])})}function ILe(e,t){for(var n in t)e.attr(n,t[n]);return e}function LLe(e,t,n){return e.each(function(){var i=t.apply(this,arguments),r=Ew(this).transition(e);for(var o in i)r.style(o,i[o],n)})}function NLe(e,t,n){for(var i in t)e.style(i,t[i],n);return e}rh.prototype.interrupt=function tFe(e){return this.each(function(){!function eFe(e,t){var i,r,s,n=e.__transition,o=!0;if(n){for(s in t=null==t?null:t+"",n)(i=n[s]).name===t?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]):o=!1;o&&delete e.__transition}}(this,e)})},rh.prototype.transition=function CLe(e){var t,n;e instanceof zd?(t=e._id,e=e._name):(t=lZ(),(n=hL).time=CS(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var l,s=i[o],a=s.length,c=0;c<a;++c)(l=s[c])&&SS(l,e,t,c,s,n||wLe(l,t));return new zd(i,this._parents,e,t)},rh.prototype.attrs=function SLe(e){return("function"==typeof e?xLe:ELe)(this,e)},rh.prototype.styles=function OLe(e,t){return("function"==typeof e?kLe:ALe)(this,e,t??"")},rh.prototype.properties=function PLe(e){return("function"==typeof e?DLe:TLe)(this,e)},fL.prototype.attrs=function FLe(e){return("function"==typeof e?RLe:ILe)(this,e)},fL.prototype.styles=function $Le(e,t){return("function"==typeof e?LLe:NLe)(this,e,t??"")};var _r=(()=>(function(e){e.SOFT="soft",e.HARD="hard"}(_r||(_r={})),_r))(),Br=(()=>(function(e){e.SELECTED="selected",e.HOVERED="hovered"}(Br||(Br={})),Br))(),Sw=(()=>(function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(Sw||(Sw={})),Sw))();let HLe=(()=>{class e{constructor(){}getComplementaryColor(n){return{red:255-n.red,green:255-n.green,blue:255-n.blue}}getForegroundColor(n,i=100){let r=(n.red+n.green+n.blue)/3;return{red:this.trimColor(r<125?n.red+i:n.red-i),green:this.trimColor(r<125?n.green+i:n.green-i),blue:this.trimColor(r<125?n.blue+i:n.blue-i)}}trimColor(n){return n>=255?255:n<0?0:n}getForgroundColorFromStringToString(n,i=100){const r=this.getRGBFromString(n),o=this.getForegroundColor(r,i);return this.toString(o)}getRGBFromString(n){let i=(n=(n=(n=(n=(n=n.replace(/rgb/g,"")).replace(/rgb /g,"")).replace(/ /g,"")).replace(/\(/g,"")).replace(/\)/g,"")).split(",");return{red:+i[0],green:+i[1],blue:+i[2]}}toString(n){return`rgb(${n.red},${n.green},${n.blue})`}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),VLe=(()=>{class e{constructor(){this.font_family="sans-serif",this.font_size="14px",this.font_weight="400",this.font=this.font_weight+" "+this.font_size+" "+this.font_family}getTextDimension(n,i,r,o){let s=(r||""+this.font_weight)+" "+(i?i+"px":this.font_size)+" "+(o||this.font_family),l=(this.getTextDimension.canvas||(this.getTextDimension.canvas=document.createElement("canvas"))).getContext("2d");l.font=s;let c=l.measureText(n);return console.log(c),{width:c.width,height:c.actualBoundingBoxAscent+c.actualBoundingBoxDescent}}getSVGTextDimension(n,i,r,o){let s=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","text");s.appendChild(a),document.body.appendChild(s),a.setAttributeNS(null,"font-family",o||this.font_family),a.setAttributeNS(null,"font-size",i?i+"px":this.font_size),a.setAttributeNS(null,"font-weight",""+(r||this.font_weight)),a.innerHTML=n;let l=a.getBBox();return document.body.removeChild(s),{width:l.width,height:l.height}}shortenText(n,i){let r=n.length>i?"...":"";return n.substr(0,i)+r}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class ULe{constructor(t,n){this.newRect=t,this.oldRect=n,this.isFirst=null==n}}let jLe=(()=>{class e{constructor(n,i){this.element=n,this.zone=i,this.resized=new Hn,this.observer=new ResizeObserver(r=>this.zone.run(()=>this.observe(r)))}ngOnInit(){this.observer.observe(this.element.nativeElement)}ngOnDestroy(){this.observer.disconnect()}observe(n){const i=n[0],r=new ULe(i.contentRect,this.oldRect);this.oldRect=i.contentRect,this.resized.emit(r)}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(jn))},e.\u0275dir=nn({type:e,selectors:[["","resized",""]],outputs:{resized:"resized"}}),e})(),WLe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})();function Hd(...e){const t=iu(e),{args:n,keys:i}=qG(e),r=new dt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Ti(n[u]).subscribe(Qt(o,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?YG(i,a):a),o.complete())}))}});return t?r.pipe(hI(t)):r}class GLe{}class sh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let i=t[n];const r=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(n,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof sh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new sh;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof sh?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,n);const r=("a"===t.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class qLe{encodeKey(t){return cZ(t)}encodeValue(t){return cZ(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const XLe=/%(\d[a-f0-9])/gi,KLe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cZ(e){return encodeURIComponent(e).replace(XLe,(t,n)=>KLe[n]??t)}function TS(e){return`${e}`}class ah{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new qLe,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function YLe(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const i=t.fromObject[n],r=Array.isArray(i)?i.map(TS):[TS(i)];this.map.set(n,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new ah({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(TS(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(TS(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class ZLe{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function uZ(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function dZ(e){return typeof Blob<"u"&&e instanceof Blob}function fZ(e){return typeof FormData<"u"&&e instanceof FormData}class kw{constructor(t,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function QLe(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new sh),this.context||(this.context=new ZLe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new ah,this.urlWithParams=n}serializeBody(){return null===this.body?null:uZ(this.body)||dZ(this.body)||fZ(this.body)||function JLe(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ah?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||fZ(this.body)?null:dZ(this.body)?this.body.type||null:uZ(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ah?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((d,f)=>d.set(f,t.setHeaders[f]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((d,f)=>d.set(f,t.setParams[f]),c)),new kw(n,i,o,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:s})}}var Zo=(()=>((Zo=Zo||{})[Zo.Sent=0]="Sent",Zo[Zo.UploadProgress=1]="UploadProgress",Zo[Zo.ResponseHeader=2]="ResponseHeader",Zo[Zo.DownloadProgress=3]="DownloadProgress",Zo[Zo.Response=4]="Response",Zo[Zo.User=5]="User",Zo))();class pL extends class eNe{constructor(t,n=200,i="OK"){this.headers=t.headers||new sh,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=Zo.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new pL({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function gL(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let pZ=(()=>{class e{constructor(n){this.handler=n}request(n,i,r={}){let o;if(n instanceof kw)o=n;else{let l,c;l=r.headers instanceof sh?r.headers:new sh(r.headers),r.params&&(c=r.params instanceof ah?r.params:new ah({fromObject:r.params})),o=new kw(n,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=ln(o).pipe(Kf(l=>this.handler.handle(l)));if(n instanceof kw||"events"===r.observe)return s;const a=s.pipe(ha(l=>l instanceof pL));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(xt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(xt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(xt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(xt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new ah).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,gL(r,i))}post(n,i,r={}){return this.request("POST",n,gL(r,i))}put(n,i,r={}){return this.request("PUT",n,gL(r,i))}}return e.\u0275fac=function(n){return new(n||e)(qe(GLe))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();const nNe=["*"];let PS;function Aw(e){return function iNe(){if(void 0===PS&&(PS=null,typeof window<"u")){const e=window;void 0!==e.trustedTypes&&(PS=e.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return PS}()?.createHTML(e)||e}function gZ(e){return Error(`Unable to find icon with the name "${e}"`)}function mZ(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function _Z(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}class gg{constructor(t,n,i){this.url=t,this.svgText=n,this.options=i}}let RS=(()=>{class e{constructor(n,i,r,o){this._httpClient=n,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(n,i,r){return this.addSvgIconInNamespace("",n,i,r)}addSvgIconLiteral(n,i,r){return this.addSvgIconLiteralInNamespace("",n,i,r)}addSvgIconInNamespace(n,i,r,o){return this._addSvgIconConfig(n,i,new gg(r,null,o))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,i,r,o){const s=this._sanitizer.sanitize(Ri.HTML,r);if(!s)throw _Z(r);const a=Aw(s);return this._addSvgIconConfig(n,i,new gg("",a,o))}addSvgIconSet(n,i){return this.addSvgIconSetInNamespace("",n,i)}addSvgIconSetLiteral(n,i){return this.addSvgIconSetLiteralInNamespace("",n,i)}addSvgIconSetInNamespace(n,i,r){return this._addSvgIconSetConfig(n,new gg(i,null,r))}addSvgIconSetLiteralInNamespace(n,i,r){const o=this._sanitizer.sanitize(Ri.HTML,i);if(!o)throw _Z(i);const s=Aw(o);return this._addSvgIconSetConfig(n,new gg("",s,r))}registerFontClassAlias(n,i=n){return this._fontCssClassesByAlias.set(n,i),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){const i=this._sanitizer.sanitize(Ri.RESOURCE_URL,n);if(!i)throw mZ(n);const r=this._cachedIconsByUrl.get(i);return r?ln(IS(r)):this._loadSvgIconFromConfig(new gg(n,null)).pipe(no(o=>this._cachedIconsByUrl.set(i,o)),xt(o=>IS(o)))}getNamedSvgIcon(n,i=""){const r=yZ(i,n);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,n),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(n,s):ry(gZ(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?ln(IS(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(xt(i=>IS(i)))}_getSvgFromIconSetConfigs(n,i){const r=this._extractIconWithNameFromAnySet(n,i);return r?ln(r):Hd(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Od(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Ri.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ln(null)})))).pipe(xt(()=>{const s=this._extractIconWithNameFromAnySet(n,i);if(!s)throw gZ(n);return s}))}_extractIconWithNameFromAnySet(n,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(n)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,n,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(no(i=>n.svgText=i),xt(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?ln(null):this._fetchIcon(n).pipe(no(i=>n.svgText=i))}_extractSvgIconFromSet(n,i,r){const o=n.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(Aw("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(n){const i=this._document.createElement("DIV");i.innerHTML=n;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(n){const i=this._svgElementFromString(Aw("<svg></svg>")),r=n.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<n.childNodes.length;o++)n.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(n.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(n,i){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),i&&i.viewBox&&n.setAttribute("viewBox",i.viewBox),n}_fetchIcon(n){const{url:i,options:r}=n,o=r?.withCredentials??!1;if(!this._httpClient)throw function rNe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(Ri.RESOURCE_URL,i);if(!s)throw mZ(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(xt(c=>Aw(c)),oE(()=>this._inProgressUrlFetches.delete(s)),Ut());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(n,i,r){return this._svgIconConfigs.set(yZ(n,i),r),this}_addSvgIconSetConfig(n,i){const r=this._iconSetConfigs.get(n);return r?r.push(i):this._iconSetConfigs.set(n,[i]),this}_svgElementFromConfig(n){if(!n.svgElement){const i=this._svgElementFromString(n.svgText);this._setSvgAttributes(i,n.options),n.svgElement=i}return n.svgElement}_getIconConfigFromResolvers(n,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,n);if(o)return sNe(o)?new gg(o.url,null,o.options):new gg(o,null)}}}return e.\u0275fac=function(n){return new(n||e)(qe(pZ,8),qe(fI),qe(Jn,8),qe(vd))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function IS(e){return e.cloneNode(!0)}function yZ(e,t){return e+":"+t}function sNe(e){return!(!e.url||!e.options)}const aNe=hw(class{constructor(e){this._elementRef=e}}),lNe=new bt("MAT_ICON_DEFAULT_OPTIONS"),cNe=new bt("mat-icon-location",{providedIn:"root",factory:function uNe(){const e=cr(Jn),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),vZ=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],dNe=vZ.map(e=>`[${e}]`).join(", "),fNe=/^url\(['"]?#(.*?)['"]?\)$/;let mL=(()=>{class e extends aNe{constructor(n,i,r,o,s,a){super(n),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=$.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||n.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(n){this._inline=Nr(n)}get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}get fontSet(){return this._fontSet}set fontSet(n){const i=this._cleanupFontValue(n);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(n){const i=this._cleanupFontValue(n);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(n){if(!n)return["",""];const i=n.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const n=this._elementsWithExternalReferences;if(n&&n.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){const n=this._elementRef.nativeElement;let i=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=n.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const n=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>n.classList.remove(r)),i.forEach(r=>n.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return"string"==typeof n?n.trim().split(" ")[0]:n}_prependPathToReferences(n){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${n}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(n){const i=n.querySelectorAll(dNe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)vZ.forEach(s=>{const a=i[o],l=a.getAttribute(s),c=l?l.match(fNe):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:s,value:c[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){const[i,r]=this._splitIconName(n);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Us(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(RS),Vf("aria-hidden"),Pe(cNe),Pe(vd),Pe(lNe,8))},e.\u0275cmp=ir({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(n,i){2&n&&(er("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),po("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[qn],ngContentSelectors:nNe,decls:1,vars:0,template:function(n,i){1&n&&(qf(),fs(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})(),_L=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[mr,mr]}),e})();class yL{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class bZ extends yL{constructor(t,n,i,r){super(),this.component=t,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r}}class wZ extends yL{constructor(t,n,i,r){super(),this.templateRef=t,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class hNe extends yL{constructor(t){super(),this.element=t instanceof Ii?t.nativeElement:t}}class gNe extends class pNe{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof bZ?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof wZ?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof hNe?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,n,i,r,o){super(),this.outletElement=t,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||$s.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let n=t.viewContainerRef,i=n.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let CZ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})();const MZ=VPe();class mNe{constructor(t,n){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=io(-this._previousScrollPosition.left),t.style.top=io(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),MZ&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),MZ&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class _Ne{constructor(t,n,i,r){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class xZ{enable(){}disable(){}attach(){}}function vL(e,t){return t.some(n=>e.bottom<n.top||e.top>n.bottom||e.right<n.left||e.left>n.right)}function EZ(e,t){return t.some(n=>e.top<n.top||e.bottom>n.bottom||e.left<n.left||e.right>n.right)}class yNe{constructor(t,n,i,r){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();vL(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let vNe=(()=>{class e{constructor(n,i,r,o){this._scrollDispatcher=n,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new xZ,this.close=s=>new _Ne(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new mNe(this._viewportRuler,this._document),this.reposition=s=>new yNe(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return e.\u0275fac=function(n){return new(n||e)(qe(RX),qe(lS),qe(jn),qe(Jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class SZ{constructor(t){if(this.scrollStrategy=new xZ,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const n=Object.keys(t);for(const i of n)void 0!==t[i]&&(this[i]=t[i])}}}class bNe{constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}}let kZ=(()=>{class e{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){const i=this._attachedOverlays.indexOf(n);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),wNe=(()=>{class e extends kZ{constructor(n,i){super(n),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(n){super.add(n),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn),qe(jn,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),CNe=(()=>{class e extends kZ{constructor(n,i,r){super(n),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=fg(o)},this._clickListener=o=>{const s=fg(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(s)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(o)):d.next(o)}}}add(n){if(super.add(n),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(n){n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0)}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn),qe(_s),qe(jn,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),AZ=(()=>{class e{constructor(n,i){this._platform=i,this._document=n}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const n="cdk-overlay-container";if(this._platform.isBrowser||DF()){const r=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(n),DF()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn),qe(_s))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class MNe{constructor(t,n,i,r,o,s,a,l,c,u=!1){this._portalOutlet=t,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Yt,this._attachments=new Yt,this._detachments=new Yt,this._locationChanges=$.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Yt,this._outsidePointerEvents=new Yt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Us(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=io(this._config.width),t.height=io(this._config.height),t.minWidth=io(this._config.minWidth),t.minHeight=io(this._config.minHeight),t.maxWidth=io(this._config.maxWidth),t.maxHeight=io(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,n,i){const r=nS(n||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe($r(Pi(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const OZ="cdk-overlay-connected-position-bounding-box",xNe=/([A-Za-z%]+)$/;class ENe{constructor(t,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Yt,this._resizeSubscription=$.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(OZ),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,n,a),u=this._getOverlayFit(c,n,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?o.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(o.length){let a=null,l=-1;for(const c of o){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&mg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(OZ),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,n)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n,i){let r,o;if("center"==i.originX)r=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==i.originX?s:a}return n.left<0&&(r-=n.left),o="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(t,n,i){let r,o;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,o="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,n,i,r){const o=TZ(n);let{x:s,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let f=0-a,h=a+o.height-i.height,y=this._subtractOverflows(o.width,0-s,s+o.width-i.width),b=this._subtractOverflows(o.height,f,h),C=y*b;return{visibleArea:C,isCompletelyWithinViewport:o.width*o.height===C,fitsInViewportVertically:b===o.height,fitsInViewportHorizontally:y==o.width}}_canFitWithFlexibleDimensions(t,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,o=i.right-n.x,s=DZ(this._overlayRef.getConfig().minHeight),a=DZ(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportHorizontally||null!=a&&a<=o;return(t.fitsInViewportVertically||null!=s&&s<=r)&&c}return!1}_pushOverlayOnScreen(t,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=TZ(n),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-i.top-t.y,0),c=Math.max(o.left-i.left-t.x,0);let u=0,d=0;return u=r.width<=o.width?c||-s:t.x<this._viewportMargin?o.left-i.left-t.x:0,d=r.height<=o.height?l||-a:t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:u,y:d},{x:t.x+u,y:t.y+d}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new bNe(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,n){const i=this._viewportRect,r=this._isRtl();let o,s,a,u,d,f;if("top"===n.overlayY)s=t.y,o=i.height-s+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-t.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const h=Math.min(i.bottom-t.y+i.top,t.y),y=this._lastBoundingBoxSize.height;o=2*h,s=t.y-h,o>y&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-y/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)f=i.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)d=t.x,u=i.right-t.x;else{const h=Math.min(i.right-t.x+i.left,t.x),y=this._lastBoundingBoxSize.width;u=2*h,d=t.x-h,u>y&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.x-y/2)}return{top:s,left:d,bottom:a,right:f,width:u,height:o}}_setBoundingBoxStyles(t,n){const i=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=io(i.height),r.top=io(i.top),r.bottom=io(i.bottom),r.width=io(i.width),r.left=io(i.left),r.right=io(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=io(o)),s&&(r.maxWidth=io(s))}this._lastBoundingBoxSize=i,mg(this._boundingBox.style,r)}_resetBoundingBoxStyles(){mg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){mg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();mg(i,this._getExactOverlayY(n,t,u)),mg(i,this._getExactOverlayX(n,t,u))}else i.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=io(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=io(s.maxWidth):o&&(i.maxWidth="")),mg(this._pane.style,i)}_getExactOverlayY(t,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=io(o.y),r}_getExactOverlayX(t,n,i){let s,r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=io(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:EZ(t,i),isOriginOutsideView:vL(t,i),isOverlayClipped:EZ(n,i),isOverlayOutsideView:vL(n,i)}}_subtractOverflows(t,...n){return n.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return"x"===n?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&nS(t).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ii)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const n=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+n,height:i,width:n}}}function mg(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function DZ(e){if("number"!=typeof e&&null!=e){const[t,n]=e.split(xNe);return n&&"px"!==n?null:parseFloat(t)}return e||null}function TZ(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}const PZ="cdk-global-overlay-wrapper";class SNe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(PZ),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let h="",y="",b="";l?b="flex-start":"center"===u?(b="center",f?y=d:h=d):f?"left"===u||"end"===u?(b="flex-end",h=d):("right"===u||"start"===u)&&(b="flex-start",y=d):"left"===u||"start"===u?(b="flex-start",h=d):("right"===u||"end"===u)&&(b="flex-end",y=d),t.position=this._cssPosition,t.marginLeft=l?"0":h,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":y,n.justifyContent=b,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(PZ),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let kNe=(()=>{class e{constructor(n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new SNe}flexibleConnectedTo(n){return new ENe(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(n){return new(n||e)(qe(lS),qe(Jn),qe(_s),qe(AZ))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ANe=0,Dy=(()=>{class e{constructor(n,i,r,o,s,a,l,c,u,d,f,h){this.scrollStrategies=n,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=f,this._animationsModuleType=h}create(n){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new SZ(n);return s.direction=s.direction||this._directionality.value,new MNe(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(n){const i=this._document.createElement("div");return i.id="cdk-overlay-"+ANe++,i.classList.add("cdk-overlay-pane"),n.appendChild(i),i}_createHostElement(){const n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(ty)),new gNe(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(n){return new(n||e)(qe(vNe),qe(AZ),qe(T_),qe(kNe),qe(wNe),qe($s),qe(jn),qe(Jn),qe(dw),qe(Nx),qe(CNe),qe(uc,8))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();const ONe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],RZ=new bt("cdk-connected-overlay-scroll-strategy");let IZ=(()=>{class e{constructor(n){this.elementRef=n}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii))},e.\u0275dir=nn({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e})(),FZ=(()=>{class e{constructor(n,i,r,o,s){this._overlay=n,this._dir=s,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=$.EMPTY,this._attachSubscription=$.EMPTY,this._detachSubscription=$.EMPTY,this._positionSubscription=$.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Hn,this.positionChange=new Hn,this.attach=new Hn,this.detach=new Hn,this.overlayKeydown=new Hn,this.overlayOutsideClick=new Hn,this._templatePortal=new wZ(i,r),this._scrollStrategyFactory=o,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(n){this._offsetX=n,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(n){this._offsetY=n,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(n){this._hasBackdrop=Nr(n)}get lockPosition(){return this._lockPosition}set lockPosition(n){this._lockPosition=Nr(n)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(n){this._flexibleDimensions=Nr(n)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(n){this._growAfterOpen=Nr(n)}get push(){return this._push}set push(n){this._push=Nr(n)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(n){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),n.origin&&this.open&&this._position.apply()),n.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=ONe);const n=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=n.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=n.detachments().subscribe(()=>this.detach.emit()),n.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!My(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const n=this._position=this.positionStrategy||this._createPositionStrategy(),i=new SZ({direction:this._dir,positionStrategy:n,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(n){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return n.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const n=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(n),n}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof IZ?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(n=>{this.backdropClick.emit(n)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(eq(()=>this.positionChange.observers.length>0)).subscribe(n=>{this.positionChange.emit(n),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(Pe(Dy),Pe(pu),Pe(Ka),Pe(RZ),Pe(dw,8))},e.\u0275dir=nn({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[_t]}),e})();const TNe={provide:RZ,deps:[Dy],useFactory:function DNe(e){return()=>e.scrollStrategies.reposition()}};let LZ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({providers:[Dy,TNe],imports:[fw,CZ,IX,IX]}),e})();class NZ{}const Vd="*";function Ow(e,t){return{type:7,name:e,definitions:t,options:{}}}function lh(e,t=null){return{type:4,styles:t,timings:e}}function $Z(e,t=null){return{type:2,steps:e,options:t}}function mo(e){return{type:6,styles:e,offset:null}}function Ud(e,t,n){return{type:0,name:e,styles:t,options:n}}function jd(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function INe(e=null){return{type:9,options:e}}function FNe(e,t,n=null){return{type:11,selector:e,animation:t,options:n}}function BZ(e){Promise.resolve().then(e)}class Dw{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){BZ(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class zZ{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,i=0,r=0;const o=this.players.length;0==o?BZ(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}const LNe=["tooltip"],HZ="tooltip-panel",VZ=Cy({passive:!0}),UZ=new bt("mat-tooltip-scroll-strategy"),zNe={provide:UZ,deps:[Dy],useFactory:function BNe(e){return()=>e.scrollStrategies.reposition({scrollThrottle:20})}},HNe=new bt("mat-tooltip-default-options",{providedIn:"root",factory:function VNe(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let UNe=(()=>{class e{constructor(n,i,r,o,s,a,l,c,u,d,f,h){this._overlay=n,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=o,this._ngZone=s,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=d,this._defaultOptions=f,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Yt,this._scrollStrategy=u,this._document=h,f&&(f.position&&(this.position=f.position),f.touchGestures&&(this.touchGestures=f.touchGestures)),d.change.pipe($r(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(n){n!==this._position&&(this._position=n,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(n){this._disabled=Nr(n),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(n){this._showDelay=ih(n)}get hideDelay(){return this._hideDelay}set hideDelay(n){this._hideDelay=ih(n),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(n){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=n?String(n).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(n){this._tooltipClass=n,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe($r(this._destroyed)).subscribe(n=>{n?"keyboard"===n&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const n=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{n.removeEventListener(i,r,VZ)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(n,this.message,"tooltip"),this._focusMonitor.stopMonitoring(n)}show(n=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const i=this._createOverlay();this._detach(),this._portal=this._portal||new bZ(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=i.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe($r(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(n)}hide(n=this.hideDelay){const i=this._tooltipInstance;i&&(i.isVisible()?i.hide(n):(i._cancelPendingAnimations(),this._detach()))}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return i.positionChanges.pipe($r(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${HZ}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe($r(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe($r(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe($r(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&27===r.keyCode&&!My(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(n){const i=n.getConfig().positionStrategy,r=this._getOrigin(),o=this._getOverlayPosition();i.withPositions([this._addOffset({...r.main,...o.main}),this._addOffset({...r.fallback,...o.fallback})])}_addOffset(n){return n}_getOrigin(){const n=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&n||"right"==i&&!n?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&n||"left"==i&&!n)&&(r={originX:"end",originY:"center"});const{x:o,y:s}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:o,originY:s}}}_getOverlayPosition(){const n=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&n||"right"==i&&!n?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&n||"left"==i&&!n)&&(r={overlayX:"start",overlayY:"center"});const{x:o,y:s}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Us(1),$r(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(n){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=n,this._tooltipInstance._markForCheck())}_invertPosition(n,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===n?n="start":"start"===n&&(n="end"),{x:n,y:i}}_updateCurrentPositionClass(n){const{overlayY:i,originX:r,originY:o}=n;let s;if(s="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===o?"above":"below",s!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${HZ}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const n=[];if(this._platformSupportsMouseEvents())n.push(["mouseleave",i=>{const r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};n.push(["touchend",i],["touchcancel",i])}this._addListeners(n),this._passiveListeners.push(...n)}_addListeners(n){n.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,VZ)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(n){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(n.clientX,n.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const n=this.touchGestures;if("off"!==n){const i=this._elementRef.nativeElement,r=i.style;("on"===n||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===n||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return e.\u0275fac=function(n){F_()},e.\u0275dir=nn({type:e,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),e})(),jNe=(()=>{class e extends UNe{constructor(n,i,r,o,s,a,l,c,u,d,f,h){super(n,i,r,o,s,a,l,c,u,d,f,h),this._tooltipComponent=GNe}}return e.\u0275fac=function(n){return new(n||e)(Pe(Dy),Pe(Ii),Pe(RX),Pe(Ka),Pe(jn),Pe(_s),Pe(LRe),Pe(HF),Pe(UZ),Pe(dw,8),Pe(HNe,8),Pe(Jn))},e.\u0275dir=nn({type:e,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[qn]}),e})(),WNe=(()=>{class e{constructor(n,i){this._changeDetectorRef=n,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Yt,this._animationsDisabled="NoopAnimations"===i}show(n){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},n)}hide(n){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},n)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:n}){(!n||!this._triggerElement.contains(n))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:n}){(n===this._showAnimation||n===this._hideAnimation)&&this._finalizeAnimation(n===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(n){n?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(n){const i=this._tooltip.nativeElement,r=this._showAnimation,o=this._hideAnimation;if(i.classList.remove(n?o:r),i.classList.add(n?r:o),this._isVisible=n,n&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const s=getComputedStyle(i);("0s"===s.getPropertyValue("animation-duration")||"none"===s.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}n&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(n))}}return e.\u0275fac=function(n){return new(n||e)(Pe(Al),Pe(uc,8))},e.\u0275dir=nn({type:e}),e})(),GNe=(()=>{class e extends WNe{constructor(n,i,r){super(n,r),this._breakpointObserver=i,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return e.\u0275fac=function(n){return new(n||e)(Pe(Al),Pe(jX),Pe(uc,8))},e.\u0275cmp=ir({type:e,selectors:[["mat-tooltip-component"]],viewQuery:function(n,i){if(1&n&&br(LNe,7),2&n){let r;ii(r=ri())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(n,i){1&n&&fn("mouseleave",function(o){return i._handleMouseLeave(o)}),2&n&&Md("zoom",i.isVisible()?1:null)},features:[qn],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(n,i){if(1&n&&(Ve(0,"div",0,1),fn("animationend",function(o){return i._handleAnimationEnd(o)}),Yp(2,"async"),At(3),Ge()),2&n){let r;po("mat-tooltip-handset",null==(r=Z_(2,4,i._isHandset))?null:r.matches),it("ngClass",i.tooltipClass),Ye(3),Fi(i.message)}},dependencies:[Zp,yG],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),e})(),qNe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({providers:[zNe],imports:[nK,fa,LZ,mr,mr,cS]}),e})();const YNe=["legendTransfer"],XNe=["legendTooltip"],KNe=["hypergraphContainer"];function ZNe(e,t){1&e&&(Ve(0,"div",18),Un(1,"mat-spinner",19),Ge())}function QNe(e,t){if(1&e&&(Ve(0,"div",23),At(1),Ge()),2&e){const n=on(2);Ye(1),Fi(n._legendData.description)}}function JNe(e,t){if(1&e&&(Ve(0,"div",24),At(1),Ve(2,"span"),At(3,"of max "),Ve(4,"b"),At(5),Ge()()()),2&e){const n=on(2);Ye(1),ua("",n._legendData.weight," "),Ye(4),Fi(n._max)}}function e$e(e,t){if(1&e&&(Ve(0,"div",20)(1,"div"),At(2),Un(3,"br"),At(4),Ge(),tn(5,QNe,2,1,"div",21),tn(6,JNe,6,2,"div",22),Ge()),2&e){const n=on();Ye(2),Fi(null==n._legendData.asp?null:n._legendData.asp.split(":-")[0]),Ye(2),Fi(null==n._legendData.asp?null:n._legendData.asp.split(":-")[1]),Ye(1),it("ngIf",n._legendData.description),Ye(1),it("ngIf",n._legendData.weight&&-1!=n._legendData.weight||0==n._legendData.weight)}}const t$e=function(e){return{highlight:e}};function n$e(e,t){if(1&e&&(Ve(0,"span",32),At(1),Ge()),2&e){const n=t.$implicit,i=on(3);it("ngClass",zs(2,t$e,n==i._legendData.title)),Ye(1),Fi(n)}}function i$e(e,t){if(1&e&&(Ve(0,"div",27)(1,"div",28),At(2),Ve(3,"small",29),At(4),Ge()(),Ve(5,"div",23),At(6),Ge(),Ve(7,"div",30),tn(8,n$e,2,4,"span",31),Ge()()),2&e){const n=t.$implicit;Ye(2),ua("",n.name," "),Ye(2),ua("(cost ",n.weight,")"),Ye(2),Fi(n.description),Ye(2),it("ngForOf",n.asp)}}function r$e(e,t){if(1&e&&(Ve(0,"div",25),tn(1,i$e,9,4,"div",26),Ge()),2&e){const n=on();Ye(1),it("ngForOf",n._legendData.nodesHighlight)}}function o$e(e,t){1&e&&(Ve(0,"div",33),At(1," Click to show connected nodes "),Ge())}function s$e(e,t){1&e&&(Ve(0,"div",33),At(1," Click to filter by corresponding nodes "),Ge())}const jZ=function(e){return{color:e}};function a$e(e,t){if(1&e){const n=Xa();Ve(0,"div",34),fn("click",function(){return lo(n),co(on().closeLegend())}),At(1,"\u2716"),Ge()}if(2&e){const n=on();it("ngStyle",zs(1,jZ,n._legendData.titleColorText))}}function l$e(e,t){1&e&&(Ve(0,"div",28),At(1,"Costs of rules "),Ve(2,"small"),At(3,"(Min - Max)"),Ge()())}function c$e(e,t){if(1&e){const n=Xa();Ve(0,"div",35),Un(1,"div",28),Ve(2,"div",36),fn("click",function(){return lo(n),co(on().resetCamera())}),Ve(3,"mat-icon",37),At(4,"home"),Ge()(),Ve(5,"div",38),fn("click",function(){return lo(n),co(on().resetFilter())}),Ve(6,"mat-icon",39),At(7,"filter_alt"),Ge()()()}}const u$e=function(e){return{visibility:e,position:"relative"}},d$e=function(e,t,n){return{display:e,right:t,bottom:n}},f$e=function(e){return{"legend-fade-out":e}},h$e=function(e){return{"background-color":e}},p$e=function(e){return{display:e}};let WZ=(()=>{class e{constructor(n,i){this.colorService=n,this.textService=i,this._drawn=!1,this._loading=!0,this._highlighted=[],this._isFiltered=!1,this._window_width=window.innerWidth,this._height=5,this._width=5,this._centerX=0,this._centerY=0,this._arcWidth=40,this._arcGap=10,this._arcGapRadial=.2,this._arcHover=6,this._hypergraphRadius=0,this._hypergraphMinRadius=0,this._constraintRadius=16,this._featureRadius=16,this._transferColorWeights=dX,this._transferColorRainbow=_Pe,this._defaultColorNoWeight="#343a40",this._defaultForegroundColorNoWeight="#fff",this._ticks=10,this._min=1e6,this._max=-1,this._maxDivisor=-1,this._dragged=!1,this._initial_zoom=.2,this._rotating=!1,this._old_rotation=0,this._simulation_iterations=0,this._simulation_iterations_max=30,this._startTime=Date.now(),this._legendTransferVisible=!1,this._legendTransfer={rectHeight:7,height:23,width:-1,labelsTop:22,rectTop:0},this._legendData={id:null,title:"",asp:"",link:!1,nodes:new Array,nodesHighlight:new Array,description:null,weight:0,constraintType:_r.SOFT,selected:!1,filtered:!1,visible:!1,fadeOut:!1,titleColorBackground:"#fff",titleColorText:"#333",closeButtonColor:"#333"},this._legendPos={left:0,top:0,right:0,bottom:0},this._legendContainer={padding:0,margin:10},this.selectConstraints=new Hn,this.hoverConstraints=new Hn,this.filterConstraints=new Hn}set data(n){this._data=n,n&&n.graph.nodes&&n.graph.nodes.length>0&&(this.prepareData(),this._drawn?(this.closeLegend(),this.update()):(this.create(),this._drawn=!0))}set selected(n){this._selected=n,this._drawn&&this._highlighted&&this.highlight(n,Br.SELECTED)}set hovered(n){this._hovered=n,this._drawn&&this._highlighted&&this.highlight(n,Br.HOVERED)}ngOnInit(){}onResized(n){this._window_width=window.innerWidth,this._width=this.hypergraphContainer.nativeElement.getBoundingClientRect().width,this._height=this.hypergraphContainer.nativeElement.getBoundingClientRect().height,this._centerX=this._width/2,this._centerY=this._height/2}onContainerResized(n){this.onResized(null)}prepareData(){const n=this;let i=function(e,t){var i,r,o,n=[];return e.map(a=>a.ids).forEach((a,l)=>{if(a.length>=2){var c="ln-"+e[l].feature_id+"-";for(o=0;o<a.length;o++)c+=a[o];for(i={...e[l],id:c,link:!0},t.push(i),r=0;r<a.length;r++)n.push({source:a[r],target:i.id})}else n.push({source:a[0],target:a[1]})}),{links:n,nodes:t}}(this._data.graph.links,[...this._data.graph.nodesSorted]);this._links=i.links,this._nodes=i.nodes,this._nodes_constraints=this._nodes.filter(o=>o.id&&!o.link),this._nodes_features=this._nodes.filter(o=>o.id&&o.link);const r=this._nodes_constraints.map(o=>o.weight).filter(o=>null!=o);this._min=Math.min(...r),this._max=Math.max(...r),this._maxDivisor=0==n._max?1:n._max,this._legendTransferVisible=this._min!=this._max,this._flattened_hierarchy=this._data.hierarchy.reduce((o,s)=>o.concat(s)),n._bilinks=[],this._links.forEach(o=>{let s=o.source=this._nodes.find(c=>c.id==o.source),a=o.target=this._nodes.find(c=>c.id==o.target),l={};this._nodes.push(l),this._links.push({source:s,target:l},{source:l,target:a}),n._bilinks.push([s,l,a])})}create(){let n=this;this._width=this.hypergraphContainer.nativeElement.getBoundingClientRect().width,this._height=this.hypergraphContainer.nativeElement.getBoundingClientRect().height,this._centerX=this._width/2,this._centerY=this._height/2,this._zoom=EX().scaleExtent([.1,10]).extent([[0,0],[this._width,this._width]]).on("zoom",n.zoomed.bind(n)),this._drag=sX().on("start",n.dragstarted.bind(n)).on("drag",n.dragged.bind(n)).on("end",n.dragended.bind(n)),this.svg=Zn("#hypergraph"),this.graph=this.svg.append("g"),this.svg.call(this._zoom).call(this._zoom.transform,sw.translate(this._centerX,this._centerY).scale(n._initial_zoom)),this.svg.on("contextmenu",s=>s.preventDefault()),this.graph.on("contextmenu",s=>s.preventDefault()),this.svg.on("mousedown",s=>{3==s.which&&(this.rotateGraph(s.x),this._rotating=!0)}),this.svg.on("mousemove",s=>{this._rotating&&this.rotateGraph(s.x)}),this.svg.on("mouseup",s=>{this._rotating&&(this.rotateGraph(s.x),this._old_rotation=s.x,this._rotating=!1)}),this.graph.append("g").attr("class","links"),this.graph.append("g").attr("class","nodes"),this.graph.append("g").attr("class","arcs"),this.svg.append("defs").append("marker").attr("id","circleMarker").attr("markerHeight",5).attr("markerWidth",5).attr("markerUnits","strokeWidth").attr("orient","auto").attr("refX",0).attr("refY",0).attr("viewBox","-6 -6 12 12").append("path").attr("d","M 0, 0  m -5, 0  a 5,5 0 1,0 10,0  a 5,5 0 1,0 -10,0").attr("fill","black");const o=this.graph.transition().duration(0);this.calcNeededRadius(),this.updateArcs(o),this.updateLinks(o),this.updateNodes(o),this.createSimulation(),this.updateSimulation(),this.createLegendTransfer(),n._highlighted=[],this._loading=!1}update(){const i=this.graph.transition().duration(750);this.calcNeededRadius(),this.updateArcs(i),this.updateLinks(i),this.updateNodes(i),this.updateSimulation(),this.updateLegendTransfer(),this.highlight(this._highlighted.filter(r=>r.type==Br.SELECTED).map(r=>r.constraints),Br.SELECTED),this.highlight(this._highlighted.filter(r=>r.type==Br.HOVERED).map(r=>r.constraints),Br.HOVERED),this._loading=!1}createLegendTransfer(){const n=this;this._legendTransfer.width=Zn(this._legendTransferEl.nativeElement).node().clientWidth;const i=Zn(this._legendTransferEl.nativeElement).append("svg").attr("width",this._legendTransfer.width).append("g");i.append("defs").append("linearGradient").attr("id","legend-transfer-defs").selectAll("stop").data(((s,a)=>Array.from(Array(s+1),(l,c)=>c).map((l,c)=>this._transferColorWeights(a===Sw.ASC?c/s:1-c/s)))(n._ticks,Sw.DESC)).enter().append("stop").attr("offset",(s,a)=>100*a/10+"%").attr("stop-color",s=>s),i.append("rect").attr("transform",`translate(0,${n._legendTransfer.rectTop})`).attr("width",this._legendTransfer.width).attr("height",n._legendTransfer.rectHeight).style("fill","url(#legend-transfer-defs)"),i.append("g").attr("class","legend-transfer-ticks").attr("transform",`translate(0,${n._legendTransfer.rectTop+n._legendTransfer.rectHeight})`).selectAll(".legend-transfer-tick").data(Array.from(Array(n._ticks+1),(s,a)=>a)).enter().append("line").attr("class","legend-transfer-tick").attr("x1",(s,a)=>(this._legendTransfer.width-2)*a/n._ticks+1).attr("x2",(s,a)=>(this._legendTransfer.width-2)*a/n._ticks+1).attr("y1",0).attr("y2",4),i.append("g").attr("class","legend-transfer-label-texts").attr("transform","translate(0,"+this._legendTransfer.labelsTop+")").selectAll("text").data(Array.from(Array(n._ticks+1),(s,a)=>a)).enter().append("text").attr("class","legend-transfer-label-text").attr("x",(s,a)=>this._legendTransfer.width*a/n._ticks).attr("y",0).attr("text-anchor",(s,a)=>0===a?"start":a===n._ticks?"end":"middle").text((s,a)=>this._max%n._ticks!=0?(a/n._ticks*n._max).toFixed(1):Math.floor(a/n._ticks*n._max))}updateLegendTransfer(){const n=this,i=Zn(this._legendTransferEl.nativeElement).select("svg");i.selectAll(".legend-transfer-tick").remove(),i.selectAll(".legend-transfer-label-text").remove(),i.select(".legend-transfer-ticks").selectAll(".legend-transfer-tick").data(Array.from(Array(n._ticks+1),(r,o)=>o)).enter().append("line").attr("class","legend-transfer-tick").attr("x1",(r,o)=>(this._legendTransfer.width-2)*o/n._ticks+1).attr("x2",(r,o)=>(this._legendTransfer.width-2)*o/n._ticks+1).attr("y1",0).attr("y2",4),i.select(".legend-transfer-label-texts").selectAll("text").data(Array.from(Array(n._ticks+1),(r,o)=>o)).enter().append("text").attr("class","legend-transfer-label-text").attr("x",(r,o)=>this._legendTransfer.width*o/n._ticks).attr("y",0).attr("text-anchor",(r,o)=>0===o?"start":o===n._ticks?"end":"middle").text((r,o)=>this._max%n._ticks!=0?(o/n._ticks*n._max).toFixed(1):Math.floor(o/n._ticks*n._max))}createSimulation(){this._simulation=vF().force("link",iw().id(n=>n.id)).force("charge",bF().strength(-5)).force("center",gF(0,0)).force("collide",yF(2*this._featureRadius))}updateSimulation(){this._simulation_iterations=0,this._startTime=Date.now(),this._simulation.nodes(this._nodes).on("tick",this.ticked.bind(this)).force("links",iw(this._links)).alphaTarget(0).alphaMin(.3).on("end",function(){}),this._simulation.alpha(.5).restart()}calcNeededRadius(){const n=this._nodes_constraints.length,i=this._constraintRadius/10;this._hypergraphMinRadius=(this._nodes_features.length>5?.75*this._nodes_features.length:5)*this._constraintRadius*2,this._hypergraphRadius=(2*this._constraintRadius*n+i*n)/2/Math.PI,this._hypergraphRadius=this._hypergraphRadius<this._hypergraphMinRadius?this._hypergraphMinRadius:this._hypergraphRadius}updateLinks(n){this._links_g=this.graph.select(".links").selectAll(".link").data(this._bilinks),this._links_g.exit().remove(),this._links_g.each((o,s,a)=>{const l=Zn(a[s]);l.attr("class",c=>c[2].link||c[0].link?c[2].link?c[0].link?"link link-to-"+(c[0].constraintType?c[0].constraintType+"-":"")+c[0].id:"link link-to-"+(c[2].constraintType?c[2].constraintType+"-":"")+c[0].id:"link link-to-"+(c[2].constraintType?c[2].constraintType+"-":"")+c[2].id:"link link-to-"+(c[0].constraintType?c[0].constraintType+"-":"")+c[0].id+" link-to-"+(c[2].constraintType?c[2].constraintType+"-":"")+c[2].id).attr("id",c=>c[2].link?"link-"+(c[0].constraintType?c[0].constraintType+"-":"")+c[0].id+"-"+c[2].id:"link-"+(c[2].constraintType?c[2].constraintType+"-":"")+c[2].id+"-"+c[0].id),l.select("path").attr("marker-end",c=>c[2].link?"null":"url(#circleMarker)")});const r=this._links_g.enter().append("g").attr("class",o=>o[2].link||o[0].link?o[2].link?o[0].link?"link link-to-"+(o[0].constraintType?o[0].constraintType+"-":"")+o[0].id:"link link-to-"+(o[2].constraintType?o[2].constraintType+"-":"")+o[0].id:"link link-to-"+(o[2].constraintType?o[2].constraintType+"-":"")+o[2].id:"link link-to-"+(o[0].constraintType?o[0].constraintType+"-":"")+o[0].id+" link-to-"+(o[2].constraintType?o[2].constraintType+"-":"")+o[2].id).attr("id",o=>o[2].link?"link-"+(o[0].constraintType?o[0].constraintType+"-":"")+o[0].id+"-"+o[2].id:"link-"+(o[2].constraintType?o[2].constraintType+"-":"")+o[2].id+"-"+o[0].id);r.append("path").attr("marker-start","url(#circleMarker)").attr("marker-mid","url(#textMarker)").attr("marker-end",o=>o[2].link?"null":"url(#circleMarker)"),this._links_g=this._links_g.merge(r)}updateNodes(n){const i=this,r=this._nodes_constraints.length;this._nodes_g=this.graph.select(".nodes").selectAll(".node,.linknode").data(this._nodes.filter(u=>u&&u.id)),this._nodes_g.classed(".violated-selected",!1),this._nodes_g.classed(".violated-hovred",!1),or(".node-num-violation").classed("show",!1);const o=this._nodes_g.exit().transition(n).remove();o.select("circle").attr("transform","translate(0,0)").style("fill-opacity",1e-6),o.select("text.node-title").attr("transform","translate(0,0)").style("opacity",1e-6),this._nodes_g.each((u,d,f)=>{const h=Zn(f[d]);h.attr("class",y=>y.link?"linknode":"node").attr("id",y=>"node-"+(y.constraintType?y.constraintType+"-":"")+y.id),h.select("circle").transition(n).attr("r",y=>y.link?i._featureRadius:i._constraintRadius).attr("transform",y=>y.link?"translate(0,0)":`\n          translate(${this._hypergraphRadius*Math.sin(-2*Math.PI*(d/r+.5))},${this._hypergraphRadius*Math.cos(-2*Math.PI*(d/r+.5))})\n        `).attr("fill",y=>y.asp&&-1!=y.weight?i._transferColorWeights(1-y.weight/i._maxDivisor):i._defaultColorNoWeight),h.select("text.node-title").transition(n).attr("dx",y=>y.link?"-.5em":"0").attr("dy",y=>y.link?"-.5em":"0.31em").attr("transform",y=>y.link?"":`\n          rotate(${d/r*360-90})\n          translate(${this._hypergraphRadius+i._constraintRadius+2*i._arcGap+y.hierarchy.length*(this._arcWidth+this._arcGap)},0)\n          ${d/r<.5?"":" rotate(180)"}\n          `).attr("text-anchor",y=>d/r<.5?"start":"end").text(y=>y.link?y.feature_name:d/r<.5?y.hierarchy.join(" > "):y.hierarchy.slice().reverse().join(" < ")),h.select(".node-num-violation").transition(n).attr("transform",y=>y.link?"":`\n          rotate(${d/r*360-90})\n          translate(${this._hypergraphRadius-55},0)\n        `).select("text").attr("dx",y=>y.link?"0":d/r<.5?"1em":"-1em").attr("dy",y=>y.link?"0":".6em").attr("transform",y=>d/r<.5?"":" rotate(180)"),h.select(".cost").attr("transform",y=>y.link?"":`\n          rotate(${d/r*360-90})\n          translate(${this._hypergraphRadius},0)\n          ${d/r<.5?"":" rotate(180)"}\n        `).attr("fill",y=>i._max>=0?i.colorService.getForgroundColorFromStringToString(i._transferColorWeights(1-y.weight/i._maxDivisor),180):i._defaultForegroundColorNoWeight).text((y,b)=>y.asp&&-1!=y.weight?y.weight:"")});const s=this._nodes_g.enter().append("g").attr("class",u=>u.link?"linknode":"node").attr("id",u=>"node-"+(u.constraintType?u.constraintType+"-":"")+u.id).on("mouseover",function(u,d){if(!i._legendData.selected){i._legendData.id=d.id;const f=Zn(this).select("circle").attr("fill"),h=i.colorService.getForgroundColorFromStringToString(f,180);d.link?d.ids.forEach((y,b)=>{or("#link-"+(d.constraintType?d.constraintType+"-":"")+y+"-"+d.id).raise().classed("hovered",!0),Zn("#node-"+(d.constraintType?d.constraintType+"-":"")+y).classed("hovered",!0)}):(or(".link-to-"+(d.constraintType?d.constraintType+"-":"")+d.id).raise().classed("hovered",!0).select("path").attr("stroke",f),i._legendData.nodes=[d]),i._legendData.visible=!0,i._legendData.fadeOut=!1,i._legendData.link=d.link,i._legendData.asp=d.link?null:d.asp,i._legendData.description=d.description,i._legendData.weight=d.link?null:d.weight,i._legendData.constraintType=d.constraintType,i._legendPos.right=i._legendContainer.margin,i._legendPos.bottom=i._legendContainer.margin,i._legendData.title=d.link?d.feature_name:d.hierarchy.map(y=>y.charAt(0).toUpperCase()+y.substr(1).toLowerCase()).join(" > "),i._legendData.titleColorBackground=f,i._legendData.titleColorText=h,i._legendData.closeButtonColor=h,i.selectConstraints.emit(i._legendData.nodes)}}).on("mouseout",function(u,d){if(!i._legendData.selected){if(i._legendData.id=null,d.link)or(".link").classed("hovered",!1),or(".node").classed("hovered",!1);else{const f=or(".link-to-"+(d.constraintType?d.constraintType+"-":"")+d.id);f.classed("hovered",!1),f.select("path").attr("stroke","#bbb")}i.hoverConstraints.emit([]),i._legendData.selected||(i._legendData.fadeOut=!0)}}).on("click",function(u,d){if(d.link&&(!i._legendData.selected||i._legendData.selected&&d.id!=i._legendData.id)){i._legendData.id=d.id;const f=Zn(this).select("circle").attr("fill");i.colorService.getForgroundColorFromStringToString(f,180),or(".link").classed("hovered",!1),d.ids.forEach((C,k)=>{or("#link-"+(d.constraintType?d.constraintType+"-":"")+C+"-"+d.id).raise().classed("hovered",!0)}),i._legendData.visible=!0,i._legendData.fadeOut=!1,i._legendData.selected=!0;const y=i._nodes_constraints.filter(C=>d.ids.includes(C.id)),b=y.map(C=>({...C,asp:i.splitBeforeAndAfterKey(C.asp,d.feature_name)}));i._legendData.link=d.link,i._legendData.asp=d.link?null:d.asp,i._legendData.description=d.description,i._legendData.weight=d.link?null:d.weight,i._legendData.constraintType=d.constraintType,i._legendData.nodes=y,i._legendData.nodesHighlight=b,i._legendData.title=d.feature_name,i._legendPos.right=i._legendContainer.margin,i._legendPos.bottom=i._legendContainer.margin,i.selectConstraints.emit(i._legendData.nodes)}else d.link&&i._legendData.selected&&i.closeLegend()});s.append("circle").attr("transform","translate(0,0)").style("fill-opacity",1e-6).transition(n).style("fill-opacity",1).attr("r",u=>u.link?i._featureRadius:i._constraintRadius).attr("transform",(u,d)=>u.link?"translate(0,0)":`\n        translate(${this._hypergraphRadius*Math.sin(-2*Math.PI*(d/r+.5))},${this._hypergraphRadius*Math.cos(-2*Math.PI*(d/r+.5))})\n        `).attr("fill",(u,d)=>u.asp&&-1!=u.weight?i._transferColorWeights(1-u.weight/i._maxDivisor):i._defaultColorNoWeight),s.append("text").attr("class","cost").attr("transform",(u,d)=>u.link?"":`\n        rotate(${d/r*360-90})\n        translate(${this._hypergraphRadius},0)\n        ${d/r<.5?"":" rotate(180)"}\n      `).attr("fill",(u,d)=>i._max>=0?i.colorService.getForgroundColorFromStringToString(i._transferColorWeights(1-u.weight/i._maxDivisor),180):i._defaultForegroundColorNoWeight).attr("dy",".35em").attr("text-anchor","middle").text((u,d)=>u.asp&&-1!=u.weight?u.weight:"");const a=s.append("g").attr("class","node-num-violation").attr("transform",(u,d)=>u.link?"":`\n        rotate(${d/r*360-90})\n        translate(${this._hypergraphRadius-52},0)\n      `).append("g").attr("class","dummy");a.append("rect").attr("rx",4).attr("ry",4).attr("x",0).attr("y",-10).attr("height",20);let l=a.append("text").attr("dx",(u,d)=>u.link?"0":d/r<.5?"1.1em":"-1.1em").attr("dy",(u,d)=>u.link?"0":".6em").attr("text-anchor","middle").attr("transform",(u,d)=>d/r<.5?"":" rotate(180)");l.append("tspan").attr("class","num"),l.append("tspan").text("x"),s.append("text").attr("class","node-title").attr("transform","translate(0,0)").transition(n).attr("dx",(u,d)=>u.link?"-.5em":"0").attr("dy",(u,d)=>u.link?"-.5em":"0.31em").attr("transform",(u,d)=>u.link?"":`\n        rotate(${d/r*360-90})\n        translate(${this._hypergraphRadius+i._constraintRadius+2*i._arcGap+(u.hierarchy?u.hierarchy.length*(this._arcWidth+this._arcGap):0)},0)\n        ${d/r<.5?"":" rotate(180)"}\n      `).attr("text-anchor",(u,d)=>d/r<.5?"start":"end").text((u,d)=>u.link?u.feature_name:d/r<.5?u.hierarchy.join(" > "):u.hierarchy.slice().reverse().join(" < ")),this._nodes_g=this._nodes_g.merge(s),this._nodes_g.each((u,d,f)=>{const h=this._hypergraphRadius*Math.sin(-2*Math.PI*(d/r+.5)),y=this._hypergraphRadius*Math.cos(-2*Math.PI*(d/r+.5));u.link||(u.fx=h,u.fy=y)}),this.graph.selectAll(".node").on("mousedown.drag",null),this.graph.selectAll(".linknode").call(this._drag)}updateArcs(n){const i=this,r=this._nodes_constraints.length;let o=this._hypergraphRadius+this._constraintRadius+this._arcGap,s=o+this._arcWidth;const a=1/r*360/2,l=this._nodes_constraints.length,c=O=>O*Math.PI/180,u=function(O,I,z){return(0==I?0:O.indices[0]/r*360)-a+z},d=function(O,I,z){return(0==I?O.indices.length:1==O.indices.length?O.indices[0]+1:O.indices[O.indices.length-1]+1)/r*360-a-z},f=function(O,I,z){return Math.abs(I-O)/360*2*Math.PI*z},h=SF().innerRadius((O,I)=>o+O.level*(this._arcWidth+this._arcGap)).outerRadius((O,I)=>s+O.level*(this._arcWidth+this._arcGap)).startAngle((O,I)=>c(u(O,I,this._arcGapRadial))).endAngle((O,I)=>c(d(O,I,this._arcGapRadial))),y=SF().innerRadius((O,I)=>o+O.level*(this._arcWidth+this._arcGap)-this._arcHover).outerRadius((O,I)=>s+O.level*(this._arcWidth+this._arcGap)+this._arcHover).startAngle((O,I)=>c(u(O,I,this._arcGapRadial))).endAngle((O,I)=>c(d(O,I,this._arcGapRadial)));let b=this.graph.select(".arcs").selectAll(".arc").data(this._flattened_hierarchy);b.exit().remove(),b.attr("id",O=>"arc-"+O.name).attr("class",O=>"arc level"+O.level+" filterable"+(O.indices.length>1&&i._data.hierarchy[O.level].length>1?" filter-in":i._isFiltered?" filter-out":"")),b.select(".arc-path").attr("d",h).attr("fill",(O,I)=>i._max>=0?i._transferColorWeights(1-O.weights.reduce((z,q)=>z+q)/O.weights.length/this._maxDivisor):i._defaultColorNoWeight),b.select(".arc-path-hover").attr("d",y).attr("fill",(O,I)=>i._max>=0?i._transferColorWeights(1-O.weights.reduce((z,q)=>z+q)/O.weights.length/this._maxDivisor):i._defaultColorNoWeight),b.select("text").transition(n).attr("transform",(O,I)=>`\n          rotate(${(O.indices[0]+O.indices[O.indices.length-1])/2/l*360-90})\n          translate(${this._hypergraphRadius+i._constraintRadius+2*i._arcGap+O.level*(this._arcWidth+this._arcGap)+this._arcWidth/4},0)\n          ${O.indices[0]/l<.25||O.indices[0]/l>.75?" rotate(90)":" rotate(270)"}\n        `).attr("fill",(O,I)=>i._max>=0?i.colorService.getForgroundColorFromStringToString(i._transferColorWeights(1-O.weights.reduce((z,q)=>z+q)/O.weights.length/this._maxDivisor),180):i._defaultForegroundColorNoWeight).text((O,I)=>{const z=this.textService.getSVGTextDimension(O.name.substr(0,O.name.length),12).width,q=f(u(O,I,i._arcGapRadial),d(O,I,i._arcGapRadial),s+O.level*(this._arcWidth+this._arcGap));return z/q>1?i.textService.shortenText(O.name,Math.floor(O.name.length*q/z)-3<1?1:Math.floor(O.name.length*q/z)-3):O.name});const C=b.enter().append("g").attr("class",O=>"arc level"+O.level+" filterable"+(O.indices.length>1&&i._data.hierarchy[O.level].length>1?" filter-in":i._isFiltered?" filter-out":"")).attr("id",O=>"arc-"+O.name).on("mouseover",function(O,I){if(!i._legendData.selected){const z=Zn(this).select(".arc-path-hover"),q=z.attr("fill"),ne=i.colorService.getForgroundColorFromStringToString(q,180);z.classed("show",!0),i._legendData.visible=!0,i._legendData.fadeOut=!1,i._legendData.title=I.hierarchy.join(" > "),i._legendData.filtered=!0,i._legendPos={left:O.offsetX+20,top:O.offsetY+20,right:i._legendContainer.margin,bottom:i._legendContainer.margin},i._legendData.titleColorBackground=q,i._legendData.titleColorText=ne,i._legendData.closeButtonColor=ne;const K=i._data.graph.nodesSorted.filter((le,me)=>-1!=I.indices.indexOf(me));i.hoverConstraints.emit(K),K.forEach((le,me)=>{or(".link-to-"+(le.constraintType?le.constraintType+"-":"")+le.id).raise().classed("hovered",!0),Zn("#node-"+(le.constraintType?le.constraintType+"-":"")+le.id).classed("hovered",!0)})}}).on("mouseout",function(O,I){i._legendData.selected||(Zn(this).select(".arc-path-hover").classed("show",!1),i._legendData.fadeOut=!0,i._legendData.filtered=!1,or(".link").classed("hovered",!1),or(".node").classed("hovered",!1),i.hoverConstraints.emit([]))}).on("dblclick",function(O,I){i._isFiltered=!1,i.filterConstraints.emit(null)}).on("click",function(O,I){const z=i._data.graph.nodesSorted.filter((q,ne)=>-1!=I.indices.indexOf(ne));i._isFiltered=I.indices.length>1&&i._data.hierarchy[I.level].length>1,i._isFiltered?i.filterConstraints.emit(z):(i._isFiltered=!1,i.filterConstraints.emit(null)),i.closeLegend()});C.append("path").attr("class","arc-path").style("fill-opacity",1e-6).transition(n).style("fill-opacity",1).attr("d",h).attr("fill",(O,I)=>i._max>=0?i._transferColorWeights(1-O.weights.reduce((z,q)=>z+q)/O.weights.length/this._maxDivisor):i._defaultColorNoWeight),C.append("path").attr("class","arc-path-hover").attr("d",y).attr("fill",(O,I)=>i._max>=0?i._transferColorWeights(1-O.weights.reduce((z,q)=>z+q)/O.weights.length/this._maxDivisor):i._defaultColorNoWeight),this.textService.getSVGTextDimension(" ",12),C.append("text").attr("transform","translate(0,0)").transition(n).attr("transform",(O,I)=>`\n          rotate(${(O.indices[0]+O.indices[O.indices.length-1])/2/l*360-90})\n          translate(${this._hypergraphRadius+i._constraintRadius+2*i._arcGap+O.level*(this._arcWidth+this._arcGap)+this._arcWidth/4},0)\n          ${O.indices[0]/l<.25||O.indices[0]/l>.75?" rotate(90)":" rotate(270)"}\n        `).attr("fill",(O,I)=>i._max>=0?i.colorService.getForgroundColorFromStringToString(i._transferColorWeights(1-O.weights.reduce((z,q)=>z+q)/O.weights.length/this._maxDivisor),180):i._defaultForegroundColorNoWeight).text((O,I)=>{const z=this.textService.getSVGTextDimension(O.name.substr(0,O.name.length),12).width,q=f(u(O,I,i._arcGapRadial),d(O,I,i._arcGapRadial),s+O.level*(this._arcWidth+this._arcGap));return z/q>1?i.textService.shortenText(O.name,Math.floor(O.name.length*q/z)-3<1?1:Math.floor(O.name.length*q/z)-3):O.name}),b=b.merge(C)}highlight(n,i){this._highlighted=this._highlighted.filter(s=>s.type!=i),n.forEach(s=>this._highlighted.push({constraints:s,type:i})),or(".node:not(.violated-selected) .node-num-violation").classed("show",!1),or(".node").classed(i==Br.SELECTED?"violated-selected":"violated-hovered",!1),or(".link").classed(i==Br.SELECTED?"violated-selected":"violated-hovered",!1),or(".violated-selected").classed(".selected-0",!1),or(".selected-1").classed(".selected-1",!1),or(".cloned-selected").remove(),or(".cloned-hovered").remove();let r=0,o={};this._highlighted.forEach((s,a)=>{let l=s.constraints?s.constraints.reduce((c,u)=>(c[u.id]={num:(c[u.id]?c[u.id].num:0)+1,constraint:u},c),Object.create(null)):{};Object.entries(l).forEach(c=>{const[u,d]=c,f=d.num,h=d.constraint;o[u]=o[u]||0==o[u]?o[u]+1:0;const y=Zn("#node-"+h.constraintType+"-"+h.id);y.classed(s.type==Br.SELECTED?"violated-selected selected-"+r:"violated-hovered color-hovered",!0);const b=y.select(".node-num-violation");b.select("text>tspan.num").text(f);const C=b.select("g.dummy").clone(!0);C.attr("class",s.type==Br.SELECTED?"cloned-selected color-"+r:"cloned-hovered color-hovered").attr("transform",`translate(${33*-o[u]},0)`),b.append(()=>C.node());const k=or(".link-to-"+h.constraintType+"-"+h.id);k.each((O,I,z)=>{const q=Zn(z[I]).select("path").clone(!0);q.attr("class",s.type==Br.SELECTED?"cloned-selected color-"+r:"cloned-hovered color-hovered"),Zn(z[I]).append(()=>q.node())}),k.raise().classed(s.type==Br.SELECTED?"violated-selected selected-"+r:"violated-hovered",!0)}),r+=s.type==Br.SELECTED?1:0})}splitBeforeAndAfterKey(n,i){const r=n.split(i);let o=[];return r.length>1?(r.forEach((s,a)=>{o.push(s),a<r.length-1&&o.push(i)}),o):r}closeLegend(){this._legendData.visible=!1,this._legendData.fadeOut=!0,this._legendData.selected=!1,this.selectConstraints.emit([]),or(".link").classed("hovered",!1),or(".node").classed("hovered",!1)}ticked(){this._simulation_iterations++,this._nodes_g.each((n,i,r)=>{Zn(r[i]).selectAll("circle,.linknode>text").attr("transform",this.positionNode.bind(this))}),this._links_g.each((n,i,r)=>{Zn(r[i]).selectAll("path").attr("d",o=>this.positionLink(o))})}positionLink(n){return n[0].x&&n[2].x&&n[0].y&&n[2].y?"M"+n[0].x+","+n[0].y+"S"+n[1].x+","+n[1].y+" "+n[2].x+","+n[2].y:""}positionNode(n){const i=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)),r=this._hypergraphRadius-2*this._constraintRadius*5;return n.link&&(n.x=i<r?n.x:r/i*n.x,n.y=i<r?n.y:r/i*n.y),"translate("+n.x+","+n.y+")"}rotateGraph(n){const i=this.graph.attr("transform").replace(/(rotate\([^\)]*\))/g,"");this.graph.attr("transform",`${i} rotate(${n})`)}dragstarted(n,i){n.active||this.restartSimulation(),i.fx=i.x,i.fy=i.y,n.sourceEvent.stopPropagation(),this._dragged=!0}restartSimulation(){this._simulation_iterations=0,this._startTime=Date.now(),this._simulation.alpha(.5).alphaTarget(.7).restart()}dragged(n,i){i.fx=n.x,i.fy=n.y}dragended(n,i){n.active||this._simulation.alphaTarget(.1),i.fx=null,i.fy=null,this._dragged=!1}zoomed(n,i){this.graph.attr("transform",n.transform)}resetCamera(){this.svg.call(this._zoom).call(this._zoom.transform,sw.translate(this._centerX,this._centerY).scale(this._initial_zoom))}resetFilter(){this._isFiltered=!1,this.filterConstraints.emit(null)}}return e.\u0275fac=function(n){return new(n||e)(Pe(HLe),Pe(VLe))},e.\u0275cmp=ir({type:e,selectors:[["app-radial-hypergraph"]],viewQuery:function(n,i){if(1&n&&(br(YNe,5),br(XNe,5),br(KNe,5)),2&n){let r;ii(r=ri())&&(i._legendTransferEl=r.first),ii(r=ri())&&(i._legendTooltipEl=r.first),ii(r=ri())&&(i.hypergraphContainer=r.first)}},hostBindings:function(n,i){1&n&&fn("resize",function(){return i.onResized()},0,DR)},inputs:{data:"data",selected:"selected",hovered:"hovered"},outputs:{selectConstraints:"selectConstraints",hoverConstraints:"hoverConstraints",filterConstraints:"filterConstraints"},decls:20,vars:29,consts:[["class","spinner",4,"ngIf"],[2,"width","100%","height","100%","display","flex","flex-direction","column",3,"ngStyle"],["hypergraphContainer",""],["id","hypergraph","preserveAspectRatio","none",2,"object-fit","cover","width","100%","height","100%"],[1,"legend",3,"ngStyle","ngClass"],["legendTooltip",""],[1,"title",3,"ngStyle"],[3,"ngStyle"],[1,"content",3,"resized"],["class","content-node",4,"ngIf"],["class","content-link selected",4,"ngIf"],["class","content-link hovered",4,"ngIf"],["class","close",3,"ngStyle","click",4,"ngIf"],[1,"legend-controls"],[1,"legend-transfer",2,"width","300px",3,"ngStyle"],["legendTransfer",""],["class","title",4,"ngIf"],["class","controls","style","width:100px",4,"ngIf"],[1,"spinner"],["diameter","60"],[1,"content-node"],["class","description",4,"ngIf"],["class","weight",4,"ngIf"],[1,"description"],[1,"weight"],[1,"content-link","selected"],["class","constraint",4,"ngFor","ngForOf"],[1,"constraint"],[1,"title"],[1,"cost"],[1,"asp"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"content-link","hovered"],[1,"close",3,"ngStyle","click"],[1,"controls",2,"width","100px"],[1,"control-reset-camera",3,"click"],["aria-hidden","false","matTooltip","Reset camera to default","matTooltipPosition","above"],[1,"control-reset-filter",3,"click"],["aria-hidden","false","matTooltip","Reset filter","matTooltipPosition","above"]],template:function(n,i){1&n&&(tn(0,ZNe,2,0,"div",0),Ve(1,"div",1,2),$p(),Un(3,"svg",3),Ge(),IP(),Ve(4,"div",4,5)(6,"div",6)(7,"h3",7),At(8),Ge()(),Ve(9,"div",8),fn("resized",function(o){return i.onContainerResized(o)}),tn(10,e$e,7,4,"div",9),tn(11,r$e,2,1,"div",10),tn(12,o$e,2,0,"div",11),tn(13,s$e,2,0,"div",11),Ge(),tn(14,a$e,2,3,"div",12),Ge(),Ve(15,"div",13)(16,"div",14,15),tn(18,l$e,4,0,"div",16),Ge(),tn(19,c$e,8,0,"div",17),Ge()),2&n&&(it("ngIf",i._loading),Ye(1),it("ngStyle",zs(15,u$e,i._drawn?"visible":"hidden")),Ye(3),it("ngStyle",xx(17,d$e,i._legendData.visible?"block":"none",i._legendPos.right+"px",i._legendPos.bottom+"px"))("ngClass",zs(21,f$e,i._legendData.fadeOut)),Ye(2),it("ngStyle",zs(23,h$e,i._legendData.titleColorBackground)),Ye(1),it("ngStyle",zs(25,jZ,i._legendData.titleColorText)),Ye(1),Fi(i._legendData.title),Ye(2),it("ngIf",!i._legendData.link&&!i._legendData.filtered),Ye(1),it("ngIf",i._legendData.link&&i._legendData.selected&&!i._legendData.filtered),Ye(1),it("ngIf",i._legendData.link&&!i._legendData.selected&&!i._legendData.filtered),Ye(1),it("ngIf",i._legendData.filtered),Ye(1),it("ngIf",i._legendData.selected),Ye(2),it("ngStyle",zs(27,p$e,i._legendTransferVisible||i._loading?"inline-block":"none")),Ye(2),it("ngIf",!i._loading),Ye(1),it("ngIf",!i._loading))},dependencies:[Zp,ny,_u,O0,_c,jLe,mL,jNe],styles:['.mat-badge-content[_ngcontent-%COMP%]{font-weight:600;font-size:12px;font-family:Roboto,Helvetica Neue,sans-serif}.mat-badge-small[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:9px}.mat-badge-large[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:24px}.mat-h1[_ngcontent-%COMP%], .mat-headline[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font:400 24px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h2[_ngcontent-%COMP%], .mat-title[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-title[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h3[_ngcontent-%COMP%], .mat-subheading-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-subheading-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font:400 16px/28px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h4[_ngcontent-%COMP%], .mat-subheading-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-subheading-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:400 15px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font:400 11.62px/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:400 9.38px/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-body-strong[_ngcontent-%COMP%], .mat-body-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-strong[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.mat-small[_ngcontent-%COMP%], .mat-caption[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-small[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{font:400 12px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-display-4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-4[_ngcontent-%COMP%]{font:300 112px/112px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.05em;margin:0 0 56px}.mat-display-3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-3[_ngcontent-%COMP%]{font:400 56px/56px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.02em;margin:0 0 64px}.mat-display-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-2[_ngcontent-%COMP%]{font:400 45px/48px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.005em;margin:0 0 64px}.mat-display-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-1[_ngcontent-%COMP%]{font:400 34px/40px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 64px}.mat-bottom-sheet-container[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-button[_ngcontent-%COMP%], .mat-raised-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-fab[_ngcontent-%COMP%], .mat-mini-fab[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-button-toggle[_ngcontent-%COMP%], .mat-card[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:20px}.mat-card-subtitle[_ngcontent-%COMP%], .mat-card-content[_ngcontent-%COMP%]{font-size:14px}.mat-checkbox[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-checkbox-layout[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{line-height:24px}.mat-chip[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-chip[_ngcontent-%COMP%]   .mat-chip-trailing-icon.mat-icon[_ngcontent-%COMP%], .mat-chip[_ngcontent-%COMP%]   .mat-chip-remove.mat-icon[_ngcontent-%COMP%]{font-size:18px}.mat-table[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-header-cell[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{font-size:14px}.mat-calendar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-calendar-body[_ngcontent-%COMP%]{font-size:13px}.mat-calendar-body-label[_ngcontent-%COMP%], .mat-calendar-period-button[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-calendar-table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.mat-dialog-title[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-expansion-panel-header[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:15px;font-weight:400}.mat-expansion-panel-content[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field[_ngcontent-%COMP%]{font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.34375em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:150%;line-height:1.125}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:1.5em;width:1.5em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:1.125em;line-height:1.125}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5em 0;border-top:.84375em solid transparent}.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34375em) scale(.75);width:133.3333333333%}.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34374em) scale(.75);width:133.3333433333%}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-.84375em;padding-top:.84375em}.mat-form-field-label[_ngcontent-%COMP%]{top:1.34375em}.mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.34375em}.mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{font-size:75%;margin-top:.6666666667em;top:calc(100% - 1.7916666667em)}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.4375em 0}.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);width:133.3333333333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);width:133.3333433333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);width:133.3333533333%}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.28125em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{margin-top:.5416666667em;top:calc(100% - 1.6666666667em)}@media print{.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28122em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28121em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.2812em) scale(.75)}}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.25em 0 .75em}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.09375em;margin-top:-.5em}.mat-form-field-appearance-fill.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59374em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:1em 0}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.84375em;margin-top:-.25em}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59374em) scale(.75);width:133.3333433333%}.mat-grid-tile-header[_ngcontent-%COMP%], .mat-grid-tile-footer[_ngcontent-%COMP%]{font-size:14px}.mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%], .mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2), .mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}input.mat-input-element[_ngcontent-%COMP%]{margin-top:-.0625em}.mat-menu-item[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:400}.mat-paginator[_ngcontent-%COMP%], .mat-paginator-page-size[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px}.mat-radio-button[_ngcontent-%COMP%], .mat-select[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-select-trigger[_ngcontent-%COMP%]{height:1.125em}.mat-slide-toggle-content[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-slider-thumb-label-text[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px;font-weight:500}.mat-stepper-vertical[_ngcontent-%COMP%], .mat-stepper-horizontal[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-step-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.mat-step-sub-label-error[_ngcontent-%COMP%]{font-weight:400}.mat-step-label-error[_ngcontent-%COMP%]{font-size:14px}.mat-step-label-selected[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-tab-group[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-toolbar[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0}.mat-tooltip[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:10px;padding-top:6px;padding-bottom:6px}.mat-tooltip-handset[_ngcontent-%COMP%]{font-size:14px;padding-top:8px;padding-bottom:8px}.mat-list-item[_ngcontent-%COMP%], .mat-list-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px;font-weight:500}.mat-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:16px}.mat-optgroup-label[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-simple-snackbar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px}.mat-simple-snackbar-action[_ngcontent-%COMP%]{line-height:1;font-family:inherit;font-size:inherit;font-weight:500}.mat-tree[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-tree-node[_ngcontent-%COMP%], .mat-nested-tree-node[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.mat-ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative}.mat-ripple[_ngcontent-%COMP%]:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded[_ngcontent-%COMP%]{overflow:visible}.mat-ripple-element[_ngcontent-%COMP%]{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0,0,.2,1);transform:scale3d(0,0,0)}.cdk-high-contrast-active[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{display:none}.cdk-visually-hidden[_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl][_ngcontent-%COMP%]   .cdk-visually-hidden[_ngcontent-%COMP%]{left:auto;right:0}.cdk-overlay-container[_ngcontent-%COMP%], .cdk-global-overlay-wrapper[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}.cdk-high-contrast-active[_ngcontent-%COMP%]   .cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%]{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation[_ngcontent-%COMP%]{transition:none}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}textarea.cdk-textarea-autosize[_ngcontent-%COMP%]{resize:none}textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:auto!important;overflow:hidden!important}textarea.cdk-textarea-autosize-measuring-firefox[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:0!important}@keyframes cdk-text-field-autofill-start{}@keyframes cdk-text-field-autofill-end{}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}.mat-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-focus-indicator[_ngcontent-%COMP%]:before{inset:0;position:absolute;box-sizing:border-box;pointer-events:none;display:none;display:var(--mat-focus-indicator-display, none);border:3px solid transparent;border:var(--mat-focus-indicator-border-width, 3px) var(--mat-focus-indicator-border-style, solid) var(--mat-focus-indicator-border-color, transparent);border-radius:4px;border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator[_ngcontent-%COMP%]:focus:before{content:""}.cdk-high-contrast-active[_ngcontent-%COMP%]{--mat-focus-indicator-display: block}.mat-mdc-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-mdc-focus-indicator[_ngcontent-%COMP%]:before{inset:0;position:absolute;box-sizing:border-box;pointer-events:none;display:none;display:var(--mat-mdc-focus-indicator-display, none);border:3px solid transparent;border:var(--mat-mdc-focus-indicator-border-width, 3px) var(--mat-mdc-focus-indicator-border-style, solid) var(--mat-mdc-focus-indicator-border-color, transparent);border-radius:4px;border-radius:var(--mat-mdc-focus-indicator-border-radius, 4px)}.mat-mdc-focus-indicator[_ngcontent-%COMP%]:focus:before{content:""}.cdk-high-contrast-active[_ngcontent-%COMP%]{--mat-mdc-focus-indicator-display: block}.mat-tab-nav-bar[_ngcontent-%COMP%], .mat-tab-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.12)}.mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-nav-bar[_ngcontent-%COMP%], .mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.12);border-bottom:none}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#ffffff80}.mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#ffffff80}.mat-tab-group[class*=mat-background-][_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar[class*=mat-background-][_ngcontent-%COMP%]{border-bottom:none;border-top:none}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#c2c4c64d}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#343a40}.mat-tab-group.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#ffedbc4d}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#ffc421}.mat-tab-group.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#000}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#f8bbd04d}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#e91e63}.mat-tab-group.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#c2c4c64d}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#343a40}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#fff6}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff;opacity:.4}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#fff;opacity:.12}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#ffedbc4d}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#ffc421}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#000}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#0006}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#000}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#000;opacity:.4}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000;opacity:.12}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#f8bbd04d}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#e91e63}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#fff6}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff;opacity:.4}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#fff;opacity:.12}svg[_ngcontent-%COMP%]{display:block;height:100vh!important;margin:auto}  svg .violated-hovered path.cloned-hovered{stroke-width:5px!important;stroke:#8d8d8d!important;stroke-dasharray:20 65!important}  svg .violated-hovered circle{stroke-width:2px;stroke:#3d444b!important}  svg .violated-selected path.cloned-selected{stroke-width:5px}  svg .violated-selected path.cloned-selected.color-0{stroke:#0e5c8c!important;stroke-dasharray:0 25 20 40!important}  svg .violated-selected path.cloned-selected.color-1{stroke:#8b0000!important;stroke-dasharray:0 50 20 15!important}  svg .violated-selected circle{stroke-width:2px;stroke:#3d444b!important}  svg .hovered path{stroke:#8d8d8d;stroke-width:3px}  svg .node:hover>circle,   svg .node.hovered>circle,   svg .linknode:hover>circle,   svg .linknode.hovered>circle{stroke-width:4px;stroke:#8d8d8d}  svg .linknode{cursor:pointer}  svg .linknode text.node-title{font-size:32px;font-weight:700;fill:#343a40}  svg .node:hover text.node-title,   svg .node.hovered text.node-title,   svg .violated-selected text.node-title,   svg .violated-hovered text.node-title{font-size:36px!important;font-weight:700!important;fill:#3d444b!important}  svg .node text.node-title{font-size:32px;fill:#888}  svg .node>.cost{font-size:20px}  svg .arc.filterable.filter-in{cursor:zoom-in!important}  svg .arc.filterable.filter-out{cursor:zoom-out!important}  svg .arc text{font-size:12px;text-anchor:middle}  svg .arc>path.arc-path{display:block}  svg .link{fill:none;stroke:#bbb}  svg .arc>path.arc-path-hover{display:none}  svg .node-num-violation>g.dummy{display:none}  svg .node-num-violation rect{width:30px;fill:#fff;stroke-width:1px;stroke:#8b0000}  svg .node-num-violation text>tspan{fill:#8b0000;font-size:18px}  svg .node-num-violation text>tspan.num{font-size:24px;font-weight:700}  svg .node-num-violation>.color-hovered text>tspan{fill:#3d444b!important}  svg .node-num-violation>.color-hovered rect{stroke:#3d444b!important}  svg .node-num-violation>.color-0 text>tspan{fill:#0e5c8c!important}  svg .node-num-violation>.color-0 rect{stroke:#0e5c8c!important}  svg .node-num-violation>.color-1 text>tspan{fill:#8b0000!important}  svg .node-num-violation>.color-1 rect{stroke:#8b0000!important}  .legend .content-node div,   .legend .content-link>div,   .legend .content-link.hovered{padding:4px 8px}  .legend .content-node div:last-child,   .legend .content-link>div:last-child,   .legend .content-link.hovered:last-child{padding:4px 8px 8px}  .legend .content-link{max-height:300px;color:#333;font-size:12px;overflow-y:auto;height:calc(100% - 46px)}  .legend .content-link .constraint{background-color:#f6f6f6;margin-bottom:4px}  .legend .content-link .constraint .title{font-size:14px;font-weight:700}  .legend .content-link .constraint .title small{color:#8b0000}  .legend .content-link .constraint .asp{font:12px/normal Monaco,Menlo,Ubuntu Mono,Consolas,source-code-pro,monospace}  .legend .content-link .constraint .description{padding:2px 0 4px;background-color:#f6f6f6;color:#757a80;font-size:11px;line-height:1.1}  .legend .content-link .constraint .highlight{color:#bf6613}  .legend .close{position:absolute;top:5px;right:7px;z-index:1102;color:#333;cursor:pointer;font-size:12px;line-height:1;padding:2px}  .legend .close:hover{color:#8b0000!important;font-size:14px;right:6px}  .legend-transfer .title{color:#212529;font-size:12px}  .legend-transfer .title small{color:#717377;font-size:10px}  .legend-transfer>svg{height:23px}  .legend-transfer .legend-transfer-tick{stroke:#717377;fill:#ccc}  .legend-transfer .legend-transfer-label-text{fill:#717377;font-size:10px}  .show, .show[_ngcontent-%COMP%]{display:block!important}.legend-controls[_ngcontent-%COMP%]{position:absolute;bottom:3px;left:10px;height:44px}  .controls{display:inline-block}  .controls .title{color:#212529;font-size:12px}  .controls .title small{color:#717377;font-size:10px}  .controls mat-icon{height:20px;width:20px;color:#97999c;cursor:pointer}  .controls mat-icon:hover{color:#717377}  .legend-controls>div,   .controls>div{display:inline-block;margin-left:10px}  .legend-controls>div:first-child,   .controls>div:first-child{margin-left:0}']}),e})();const g$e='#script(lua)\n\nfunction main(prg)\n    local count = tonumber(prg.configuration.solve.models)\n    local backend = prg:backend()\n\n    local observer = {\n        minimize_literals = {}\n    }\n    function observer:minimize (priority, literals)\n        self.minimize_literals = literals\n    end\n\n    prg:register_observer(observer)\n\n    prg:ground({{"base", {}}}, self)\n\n    while count > 0 do\n        local cost = 0\n\n        prg.configuration.solve.models = count\n        local it = prg:solve{yield=true}\n        local ret, err = pcall(function()\n            if it:get().unsatisfiable then\n                count = 0\n                return\n            end\n\n            for m in it:iter() do\n                if m.optimality_proven then\n                    cost = m.cost[1]\n                    count = count-1\n                end\n            end\n        end)\n        it:close()\n        if not ret then\n            error(err)\n        end\n\n        if count > 0 then\n            local aux = backend:add_atom()\n            backend:add_weight_rule{{aux}, cost+1, observer.minimize_literals}\n            backend:add_rule{{aux}, {-aux}}\n        end\n    end\nend\n#end.\n\n',GZ="% ====== Definitions ======\n\n% Types of marks to encode data.\nmarktype(point;bar;line;area;text;tick;rect).\n% High level data types: quantitative, ordinal, nominal, temporal.\ntype(quantitative;ordinal;nominal;temporal).\n% Basic types of the data.\nprimitive_type(string;number;boolean;datetime).\n% Supported aggregation functions.\naggregate_op(count;mean;median;min;max;stdev;sum).\nsummative_aggregate_op(count;sum).\n% Numbers of bins that can be recommended; any natural number is allowed.\nbinning(10;25;200).\n\n% Encoding channels.\nsingle_channel(x;y;color;size;shape;text;row;column).\nmulti_channel(detail).\nchannel(C) :- single_channel(C).\nchannel(C) :- multi_channel(C).\nnon_positional(color;size;shape;text;detail).\n\n% Possible tasks.\ntasks(value;summary).\n\n% Possible stackings.\nstacking(zero;normalize).\n\n% ====== Helpers ======\n\ndiscrete(E) :- type(E,(nominal;ordinal)).\ndiscrete(E) :- bin(E,_).\ncontinuous(E) :- encoding(E), not discrete(E).\n\nchannel_discrete(C) :- discrete(E), channel(E,C).\nchannel_continuous(C) :- continuous(E), channel(E,C).\n\nordered(E) :- type(E,(ordinal;quantitative)).\n\n% Fields\nfield(F) :- fieldtype(F,_).\n\n% Stacking is applied to the continuous x or y.\nstack(EC,S) :- channel(EC,(x;y)), channel(ED,(x;y)), continuous(EC), discrete(ED), stack(S).\n% X and y are continuous.\nstack(E,S) :- channel_continuous(x), channel(E,y), continuous(E), stack(S).\n\nstack(S) :- stack(_,S).\n\n% Data properties\nenc_cardinality(E,C) :- field(E,F), cardinality(F,C).\nenc_entropy(E,EN) :- field(E,F), entropy(F,EN).\nenc_interesting(E) :- field(E,F), interesting(F).\nenc_extent(E,MIN,MAX) :- field(E,F), extent(F,MIN,MAX).\n\n% Cardinality of discrete field. A binned field has the cadinality of its field.\ndiscrete_cardinality(E,CE) :- discrete(E), enc_cardinality(E,CE), channel(E,C), not bin(E,_).\ndiscrete_cardinality(E,CB) :- channel(E,C), bin(E,CB).\n\n% Define a fake soft/2 for all soft/1.\nsoft(F,_placeholder) :- soft(F).\n\n% Silence warnings about properties never appearing in head.\nentropy(0,0) :- #false.\ninteresting(0) :- #false.\nextent(0,0,0) :- #false.\nsoft(0) :- #false.\ntask(value) :- #false.\ntask(summary) :- #false.\ndata(0) :- #false.\n\n% == Chart Types ==\n\n% Continuous by continuous.\nis_c_c :- channel_continuous(x), channel_continuous(y).\n\n% Continuous by discrete (or continuous only).\nis_c_d :- channel_continuous(x), not channel_continuous(y).\nis_c_d :- channel_continuous(y), not channel_continuous(x).\n\n% Discrete by discrete.\nis_d_d :- channel_discrete(x), channel_discrete(y).\n\n% == Overlap ==\n\n% The continuous variable is a measure (it is aggregated) and all other channels are .aggregated, or we use stack -> no overlap\nnon_pos_unaggregated :- channel(E,C), non_positional(C), not aggregate(E,_).\nno_overlap :- is_c_d, continuous(E), channel(E,(x;y)), aggregate(E,_), not non_pos_unaggregated.\nno_overlap :- is_c_d, stack(_).\n\n% the size of the discrete positional encoding\ndiscrete_size(S) :- is_c_d, x_y_cardinality(_,S).\ndiscrete_size(1) :- is_c_d, channel_continuous(x), not channel(_,y).\ndiscrete_size(1) :- is_c_d, channel_continuous(y), not channel(_,x).\n\n% Data size is as small as discrete dimension -> no overlap.\nno_overlap :- is_c_d, num_rows(S), discrete_size(S).\n\n% We definitely overlap if the data size > discrete size.\noverlap :- is_c_d, not no_overlap, num_rows(S1), discrete_size(S2), S1 > S2.\n\n% helpers to go from quadratic to linear number of grounding\nx_y_cardinality(x,S) :- channel(E,x), discrete_cardinality(E,S).\nx_y_cardinality(y,S) :- channel(E,y), discrete_cardinality(E,S).\n\n% No overlap if all other dimensions are aggregated.\ndiscrete_size(S) :- is_d_d, x_y_cardinality(x,SX), x_y_cardinality(y,SY), S = SX*SY.\nno_overlap :- is_d_d, not non_pos_unaggregated.\nno_overlap :- is_d_d, num_rows(S1), discrete_size(S2), S1 <= S2.  % This cannot guarantee no overlap.\n\n% We can guarantee overlap using this rule unless we are using row / column.\nrow_col :- channel(_,(row;column)).\noverlap :- is_d_d, channel(E,C), not row_col, not no_overlap, num_rows(S1), discrete_size(S2), S1 > S2.\n\n% == Orientation ==\n\n% Orientation tells us which one is the dependent and independent variable.\n\norientation(vertical) :- mark(bar;tick;area;line), channel_discrete(x).\norientation(vertical) :- mark(area;line), channel_continuous(x), channel_continuous(y).\n\norientation(horizontal) :- mark(bar;tick;area;line), channel_discrete(y).\n\n",m$e="% ====== Generators ======\n\n% encodings\n\n% maximum number for each multi channel encoding\n#const max_extra_encs = 5.\n\nobj_id(1..max_extra_encs).\n\n{ encoding(E): obj_id(E) }.\n\n:- not encoding(ID), encoding(ID-1), obj_id(ID), obj_id(ID-1).\n\n% properties of encodings\n\n% channel and type have to be present\n{ channel(E,C): channel(C) } = 1 :- encoding(E).\n{ type(E,T): type(T) } = 1 :- encoding(E).\n\n% other properties that are not required\n0 { field(E,F): field(F) } 1 :- encoding(E).\n0 { aggregate(E,A): aggregate_op(A) } 1 :- encoding(E).\n0 { bin(E,B): binning(B) } 1 :- encoding(E).\n0 { zero(E) } 1 :- encoding(E).\n0 { log(E) } 1 :- encoding(E).\n\n% pick one mark type\n\n{ mark(M) : marktype(M) } = 1.\n\n% stacking\n\n0 { stack(S): stacking(S) } 1.\n\n",FS="% ====== Expressiveness and Well-Formedness Constraints ======\n\n% === Within Encodings ===\n\n% @constraint Primitive type has to support data type.\nhard(enc_type_valid,E,F) :- type(E,quantitative), field(E,F), fieldtype(F,(string;boolean)).\nhard(enc_type_valid,E,F) :- type(E,temporal), field(E,F), not fieldtype(F,datetime).\n\n% @constraint Can only bin quantitative or ordinal.\nhard(bin_q_o,E,T) :- type(E,T), bin(E,_), T != quantitative, T != ordinal.\n\n% @constraint Can only use log with quantitative.\nhard(log_q,E) :- log(E), not type(E,quantitative).\n\n% @constraint Can only use zero with quantitative.\nhard(zero_q,E) :- zero(E), not type(E,quantitative).\n\n% @constraint Cannot use log scale with discrete (which includes binned).\nhard(log_discrete,E) :- log(E), discrete(E).\n\n% @constraint Cannot use log and zero together.\nhard(log_zero,E) :- log(E), zero(E).\n\n% @constraint Cannot use log if the data is negative or zero.\nhard(log_non_positive,E,F) :- log(E), field(E,F), extent(F,MIN,_), MIN <= 0.\n\n% @constraint Cannot bin and aggregate.\nhard(bin_and_aggregate,E) :- bin(E,_), aggregate(E,_).\n\n% @constraint Oridnal only supports min, max, and median.\nhard(aggregate_o_valid,E,A) :- type(E,ordinal), aggregate(E,A), A != min, A != max, A != median.\n\n% @constraint Temporal only supports min and max.\nhard(aggregate_t_valid,E,A) :- type(E,temporal), aggregate(E,A), A != min, A != max.\n\n% @constraint Cannot aggregate nominal.\nhard(aggregate_nominal,E) :- aggregate(E,_), type(E,nominal).\n\n% @constraint Detail cannot be aggregated.\nhard(aggregate_detail,E) :- channel(E,detail), aggregate(E,_).\n\n% @constraint Count has to be quantitative and not use a field.\nhard(count_q_without_field,E) :- aggregate(E,count), field(E,_).\nhard(count_q_without_field,E) :- aggregate(E,count), not type(E,quantitative).\n\n% @constraint Shape requires discrete and not ordered (nominal). Using ordinal would't make a difference in Vega-Lite.\nhard(shape_discrete_non_ordered,E) :- channel(E,shape), not type(E,nominal).\n\n% @constraint Detail requires nominal.\nhard(detail_non_ordered,E) :- channel(E,detail), not type(E,nominal).\n\n% @constraint Size implies order so nominal is misleading.\nhard(size_nominal) :- channel(E,size), type(E,nominal).\n\n% @constraint Do not use size when data is negative as size implies that data is positive.\nhard(size_negative,E) :- channel(E,size), enc_extent(E,MIN,MAX), MIN < 0, MAX > 0.\n\n% === Across encodings and between encodings and marks ===\n\n% @constraint Cannot use single channels twice.\nhard(repeat_channel,C):- single_channel(C), 2 { channel(_,C) }.\n\n% @constraint There has to be at least one encoding. Otherwise, the visualization doesn't show anything.\nhard(no_encodings) :- not encoding(_).\n\n% @constraint Row and column require discrete.\nhard(row_or_column_c) :- channel_continuous(row;column).\n\n% @constraint Don't use row without y. Just using y is simpler.\nhard(row_no_y) :- channel(_,row), not channel(_,y).\n\n% @constraint Don't use column without x. Just using x is simpler.\nhard(column_no_x) :- channel(_,column), not channel(_,x).\n\n% @constraint All encodings (if they have a channel) require field except if we have a count aggregate.\nhard(encoding_no_field_and_not_count,E) :- not field(E,_), not aggregate(E,count), encoding(E).\n\n% @constraint Count should not have a field. Having a field doesn't make a difference.\nhard(count_with_field,E) :- aggregate(E,count), field(E,_).\n\n% @constraint Text mark requires text channel.\nhard(text_mark_without_text_channel) :- mark(text), not channel(_,text).\n\n% @constraint Text channel requires text mark.\nhard(text_channel_without_text_mark) :- channel(_,text), not mark(text).\n\n% @constraint Point, tick, and bar require x or y channel.\nhard(point_tick_bar_without_x_or_y) :- mark(point;tick;bar), not channel(_,x), not channel(_,y).\n\n% @constraint Line and area require x and y channel.\nhard(line_area_without_x_y) :- mark(line;area), not channel(_,(x;y)).\n\n% @constraint Line and area cannot have two discrete.\nhard(line_area_with_discrete) :- mark(line;area), channel_discrete(x), channel_discrete(y).\n\n% @constraint Bar and tick cannot have both x and y continuous.\nhard(bar_tick_continuous_x_y) :- mark(bar;tick), channel_continuous(x), channel_continuous(y).\n\n% @constraint Bar, tick, line, area require some continuous variable on x or y.\nhard(bar_tick_area_line_without_continuous_x_y) :- mark(bar;tick;area;line), not channel_continuous(x), not channel_continuous(y).\n\n% @constraint Bar and area mark requires scale of continuous to start at zero.\nhard(bar_area_without_zero) :- mark(bar;area), channel(E,x), orientation(horizontal), not zero(E).\nhard(bar_area_without_zero) :- mark(bar;area), channel(E,y), orientation(vertical), not zero(E).\n\n% @constraint Shape channel requires point mark.\nhard(shape_without_point) :- channel(_,shape), not mark(point).\n\n% @constraint Size only works with some marks. Vega-Lite can also size lines, and ticks but that would violate best practices.\nhard(size_without_point_text) :- channel(_,size), not mark(point), not mark(text).\n\n% @constraint Detail requires aggregation. Detail adds a field to the group by. Detail could also be used to add information to tooltips. We may remove this later.\nhard(detail_without_agg) :- channel(_,detail), not aggregate(_,_).\n\n% @constraint Do not use log for bar or area mark as they are often misleading. We may remove this rule in the future.\nhard(area_bar_with_log) :- mark(bar;area), log(E), channel(E,(x;y)).\n\n% @constraint Rect mark needs discrete x and y.\nhard(rect_without_d_d) :- mark(rect), not is_d_d.\n\n% @constraint Don't use the same field on x and y.\nhard(same_field_x_and_y) :- { field(E,F) : channel(E,x); field(E,F) : channel(E,y) } >= 2, field(F).\n\n% @constraint Don't use count on x and y.\nhard(count_on_x_and_y):- channel(EX,x), channel(EY,y), aggregate(EX,count), aggregate(EY,count).\n\n% @constraint If we use aggregation, then all continuous fields need to be aggeragted.\nhard(aggregate_not_all_continuous):- aggregate(_,_), continuous(E), not aggregate(E,_).\n\n% @constraint Don't use count twice.\nhard(count_twice) :- { aggregate(_,count) } = 2.\n\n% === Global properties ===\n\n% @constraint Bars and area cannot overlap.\nhard(bar_area_overlap) :- mark(bar;area), overlap.\n\n% @constraint Rects shouldn't overlap. They are used for dioscrete heatmaps.\nhard(rect_overlap) :- mark(rect), overlap.\n\n% == Stacking ==\n\n% @constraint Only use stacking for bar and area.\nhard(stack_without_bar_area) :- stack(_), not mark(bar), not mark(area).\n\n% @constraint Don't stack if aggregation is not summative (summative are count, sum, distinct, valid, missing).\nhard(stack_without_summative_agg,E,A) :- stack(E,_), aggregate(E,A), not summative_aggregate_op(A).\n\n% @constraint Need to stack if we use bar, area with discrete color.\nhard(no_stack_with_bar_area_discrete_color,E) :- mark(bar;area), channel(E,color), discrete(E), not stack(_).\n\n% @constraint Can only use stack if we also use discrete color, or detail.\nhard(stack_without_discrete_color_or_detail) :- stack(_), not channel_discrete(color), not channel(_,detail).\n\n% @constraint If we use stack and detail, we also have to use quantitative color.\nhard(stack_detail_without_q_color) :- stack(_), channel(_,detail), not channel(_,color).\nhard(stack_detail_without_q_color,E) :- stack(_), channel(_,detail), channel(E,color), not aggregate(E,_).\n\n% @constraint Stack can only be on continuous.\nhard(stack_discrete,E) :- stack(E,_), discrete(E).\n\n% @constraint Stack can only be on x or y.\nhard(stack_without_x_y,E) :- stack(E,_), not channel(E,x), not channel(E,y).\n\n% @constraint Cannot use non positional continuous with stack unless it's aggregated.\nhard(stack_with_non_positional_non_agg,E,C) :- stack(_), non_positional(C), channel(E,C), not aggregate(E,_), continuous(E).\n\n% @constraint Vega-Lite currently supports 8 shapes.\nhard(shape_with_cardinality_gt_eight,E,C) :- channel(E,shape), enc_cardinality(E,C), C > 8.\n\n% @constraint At most 20 categorical colors.\nhard(color_with_cardinality_gt_twenty,E,C) :- channel(E,color), discrete(E), enc_cardinality(E,C), C > 20.\n\n% === Type checks ===\n\n% @constraint Check mark.\nhard(invalid_mark,M) :- mark(M), not marktype(M).\n\n% @constraint Check types of encoding properties.\nhard(invalid_channel,C) :- channel(_,C), not channel(C).\nhard(invalid_field,F) :- field(_,F), not field(F).\nhard(invalid_type,T) :- type(_,T), not type(T).\nhard(invalid_agg,A) :- aggregate(_,A), not aggregate_op(A).\nhard(invalid_bin,B) :- bin(_,B), not B >= 0.  % @constraint Bin has to be a natural number.\n\n% @constraint Fieldtype has to be primitive type.\nhard(invalid_fieldtype,T) :- fieldtype(_,T), not primitive_type(T).\n\n% @constraint Task has to be one of the tasks.\nhard(invalid_task,T) :- task(T), not tasks(T).\n\n% @constraint Num_rows has to be larger than 0.\nhard(invalid_num_rows,S) :- num_rows(S), S < 0.\n\n% @constraint Cardinality has to be larger than 0.\nhard(invalid_cardinality,C) :- cardinality(_,C), C < 0.\n\n% @constraint Entropy has to be positive.\nhard(invalid_entropy,E) :- entropy(_,E), E < 0.\n\n% @constraint Extent only allowed for numbers (for now).\nhard(invalid_extent_non_number,F) :- extent(F,_,_), not fieldtype(F,number).\n\n% @constraint Order has to be correct.\nhard(invalid_extent_order,MIN,MAX):- extent(_,MIN,MAX), MIN > MAX.\n\n% @constraint The name of a field cannot be the name of an encoding. This is to prevent errors coming from the shortcuts in define.lp.\nhard(encoding_field_same_name,N) :- encoding(N), field(N).\n\n",_$e=":- hard(_).\n:- hard(_,_).\n:- hard(_,_,_).\n\n",LS="% After adding a soft constraint to this file, make sure to update 'weights.lp' and run 'process_softs.py'..\n\n% ====== Preferences ======\n\n% @constraint Prefer to use raw (no aggregate).\nsoft(aggregate,E) :- aggregate(E,_).\n\n% @constraint Prefer to not bin.\nsoft(bin,E) :- bin(E,_).\n\n% @constraint Prefer binning with at most 12 buckets.\nsoft(bin_high,E) :- bin(E,B), B > 12.\n\n% @constraint Prefer binning with more than 7 buckets.\nsoft(bin_low,E) :- bin(E,B), B <= 7.\n\n% @constraint Prefer to use fewer encodings.\nsoft(encoding,E) :- encoding(E).\n\n% @constraint Prefer to use fewer encodings with fields (count does not have a field).\nsoft(encoding_field,E) :- encoding(E), field(E,_).\n\n% @constraint Prefer not to use the same field twice.\nsoft(same_field_2,F) :- field(F), { field(_,F) } = 2.\n\n% @constraint Prefer not to use the same field three or more times.\n% @weight {16}\nsoft(same_field_gte3,F) :- field(F), { field(_,F) } >= 3.\n% @end\n\n% @constraint Prefer not to use count more than once.\nsoft(count_twice) :- { aggregate(_,count) } = 2.\n\n% @constraint Shape channel should not have too high cardinality.\nsoft(shape_cardinality,E) :- channel(E,shape), discrete_cardinality(E,C), C > 5.\n\n% @constraint Numbers should not be nominal.\nsoft(number_nominal,E) :- type(E,nominal), field(E,F), fieldtype(F,number).\n\n% @constraint Prefer nominal string fields\nsoft(string_non_nominal,V,E) :- type(V,E,ordinal), field(V,E,F), fieldtype(F,string).\nsoft(string_non_nominal,V,E) :- type(V,E,temporal), field(V,E,F), fieldtype(F,string).\nsoft(string_non_nominal,V,E) :- type(V,E,quantitative), field(V,E,F), fieldtype(F,string).\n\n% @constraint Binned quantitative field should not have too low cardinality.\nsoft(bin_cardinality,E) :- type(E,quantitative), bin(E,_), enc_cardinality(E,C), C < 15.\n\n% @constraint Prefer quantitative for bin.\nsoft(quant_bin,E) :- bin(E,_), not type(E,quantitative).\n\n% @constraint Plots with only nominal, ordinal, binned q, or t with time unit should add either an aggregation (e.g. count) or a quantitative field.\nsoft(only_discrete) :- not continuous(_).\n\n% @constraint Prefer not to use multiple non-positional encoding channels.\nsoft(multiple_non_pos) :- {channel(_,C): non_positional(C)} > 1.\n\n% @constraint Prefer not to use non-positional channels until all positional channels are used.\nsoft(non_positional_pref) :- channel(_,C), non_positional(C), not channel(_,(x;y)).\n\n% @constraint Aggregate plots should not use raw continuous as group by.\nsoft(aggregate_group_by_raw,E) :- aggregate(_,_), continuous(E), not aggregate(E,_).\n\n% @constraint Aggregate should also have a discrete encoding to group by.\nsoft(agg_dim) :- aggregate(_,_), not discrete(_).\n\n% @constraint Prefer not to use plot with both x and y discrete and no aggregate as it leads to occlusion.\nsoft(x_y_raw,E) :- channel(EX,x), discrete(EX), channel(EY,y), discrete(EY), not aggregate(E,_), continuous(E).\n\n% @constraint Prefer not to use log scale.\nsoft(log,E) :- log(E).\n\n% @constraint Prefer to include zero for continuous (binned doesn't need zero).\nsoft(zero,E) :- continuous(E), not zero(E).\n\n% @constraint Prefer zero size (even when binned).\nsoft(zero_size) :- channel(E,size), not zero(E).\n\n% @constraint Prefer zero positional.\nsoft(zero_positional) :- continuous(E), channel(E,(x;y)), not zero(E).\n\n% @constraint Prefer not to use zero when the difference between min and max is larger than distance to 0.\nsoft(zero_skew) :- enc_extent(E,MIN,MAX), EX = MAX - MIN, |MAX| > EX, |MIN| > EX, zero(E).\n\n% @constraint Do not include zero when the range of data includes zero.\nsoft(includes_zero) :- zero(E), extent(E,MIN,MAX), MIN < 0, MAX > 0.\n\n% @constraint Prefer to use only x instead of only y.\nsoft(only_x) :- channel(_,y), not channel(_,x).\n\n% @constraint Chart orientation for bar and tick (with and without bin). Binned fields have short labels if they are quantitative while otherwise labels can be long.\nsoft(orientation_binned) :- bin(E,_), type(E,quantitative), not channel(E,x).\n\n% @constraint Prefer not to use ordinal for fields with high cardinality.\nsoft(high_cardinality_ordinal,E) :- type(E,ordinal), discrete_cardinality(E,C), C > 30.\n\n% @constraint Prefer not to use nominal for fields with high cardinality.\nsoft(high_cardinality_nominal,E) :- type(E,nominal), enc_cardinality(E,C), C > 12.\n\n% @constraint Prefer not to use high cardinality nominal for color.\nsoft(high_cardinality_nominal_color,E) :- type(E,nominal), channel(E,color), enc_cardinality(E,C), C > 10.\n\n% @constraint Avoid high cardinality on x or column as it causes horizontal scrolling.\nsoft(horizontal_scrolling,E) :- channel(E,x), discrete_cardinality(E,C), C > 50.\nsoft(horizontal_scrolling,E) :- channel(E,columm), discrete_cardinality(E,C), C > 5.\n\n% @constraint Prefer to use temporal type with dates.\nsoft(temporal_date,E) :- field(E,F), fieldtype(F,datetime), not type(E,temporal).\n\n% @constraint Prefer quantitative for numbers with high cardinality.\nsoft(quantitative_numbers) :- field(E,F), fieldtype(F,number), cardinality(F,C), C > 20, not bin(E,_), not type(E,quantitative).\n\n% @constraint Overplotting. Prefer not to use x and y for continuous with high cardinality and low entropy without aggregation because the points will overplot.\nsoft(position_entropy,E) :- channel(E,(x;y)), continuous(E), enc_cardinality(E,C), C > 100, enc_entropy(E,EN), EN <= 12, not aggregate(E,_).\n\n% @constraint Prefer not to use size when the cardinality is large on x or y.\nsoft(high_cardinality_size,E) :- continuous(E), channel(_,size), enc_cardinality(E,C), C > 100, channel(E,(x;y)).\n\n% @constraint Prefer not to aggregate for value tasks.\nsoft(value_agg) :- task(value), aggregate(_,_).\n\n% @constraint Prefer not to use row and column for summary tasks as it makes it difficult to compare.\nsoft(facet_summary,E) :- task(summary), channel(E,row).\n\n% @constraint Positional interactions as suggested by Kim et al.\nsoft(x_row) :- channel(_,x), channel(_,row).\n\n% @constraint Positional interactions as suggested by Kim et al.\nsoft(y_row) :- channel(_,y), channel(_,row).\n\n% @constraint Positional interactions as suggested by Kim et al.\nsoft(x_column) :- channel(_,x), channel(_,column).\n\n% @constraint Positional interactions as suggested by Kim et al.\nsoft(y_column) :- channel(_,y), channel(_,column).\n\n% @constraint Entropy, primary quantitaty interactions as suggested by Kim et al.\nsoft(color_entropy_high, E) :- channel(E,color), enc_entropy(E,EN), EN > 12, type(E,quantitative), enc_interesting(E).\n\n% @constraint Entropy, primary quantitaty interactions as suggested by Kim et al.\nsoft(color_entropy_low, E) :- channel(E,color), enc_entropy(E,EN), EN <= 12, type(E,quantitative), enc_interesting(E).\n\n% @constraint Entropy, primary quantitaty interactions as suggested by Kim et al.\nsoft(size_entropy_high, E) :- channel(E,size), enc_entropy(E,EN), EN > 12, type(E,quantitative), enc_interesting(E).\n\n% @constraint Entropy, primary quantitaty interactions as suggested by Kim et al.\nsoft(size_entropy_low, E) :- channel(E,size), enc_entropy(E,EN), EN <= 12, type(E,quantitative), enc_interesting(E).\n\n% @constraint Prefer not to use continuous on x, discrete on y, and column.\nsoft(c_d_column) :- channel_continuous(x), channel_discrete(y), channel(_,column).\n\n% @constraint Prefer time on x.\nsoft(temporal_y) :- type(E,temporal), not channel(E,x).\n\n% @constraint Prefer not to overlap with DxD.\nsoft(d_d_overlap) :- is_d_d, overlap.\n\n% ====== Rankings ======\n% === Data Types ===\n\n% @constraint Prefer quantitative > ordinal > nominal.\nsoft(type_q,E) :- type(E,quantitative).\n\n% @constraint Prefer quantitative > ordinal > nominal.\nsoft(type_o,E) :- type(E,ordinal).\n\n% @constraint Prefer quantitative > ordinal > nominal.\nsoft(type_n,E) :- type(E,nominal).\n\n% === Mark types ===\n\n% @constraint Continuous by continuous for point mark.\nsoft(c_c_point) :- is_c_c, mark(point).\n\n% @constraint Continuous by continuous for line mark.\nsoft(c_c_line) :- is_c_c, mark(line).\n\n% @constraint Continuous by continuous for area mark.\nsoft(c_c_area) :- is_c_c, mark(area).\n\n% @constraint Continuous by continuous for text mark.\nsoft(c_c_text) :- is_c_c, mark(text).\n\n% @constraint Continuous by continuous for tick mark.\nsoft(c_c_tick) :- is_c_c, mark(tick).\n\n% @constraint Continuous by discrete for point mark.\nsoft(c_d_point) :- is_c_d, not no_overlap, mark(point).\n\n% @constraint Continuous by discrete for bar mark.\nsoft(c_d_bar) :- is_c_d, not no_overlap, mark(bar).\n\n% @constraint Continuous by discrete for line mark.\nsoft(c_d_line) :- is_c_d, not no_overlap, mark(line).\n\n% @constraint Continuous by discrete for area mark.\nsoft(c_d_area) :- is_c_d, not no_overlap, mark(area).\n\n% @constraint Continuous by discrete for text mark.\nsoft(c_d_text) :- is_c_d, not no_overlap, mark(text).\n\n% @constraint Continuous by discrete for tick mark.\nsoft(c_d_tick) :- is_c_d, not no_overlap, mark(tick).\n\n% @constraint Continuous by discrete for point mark with no overlap.\nsoft(c_d_no_overlap_point) :- is_c_d, no_overlap, mark(point).\n\n% @constraint Continuous by discrete for bar mark with no overlap.\nsoft(c_d_no_overlap_bar) :- is_c_d, no_overlap, mark(bar).\n\n% @constraint Continuous by discrete for line mark with no overlap.\nsoft(c_d_no_overlap_line) :- is_c_d, no_overlap, mark(line).\n\n% @constraint Continuous by discrete for area mark with no overlap.\nsoft(c_d_no_overlap_area) :- is_c_d, no_overlap, mark(area).\n\n% @constraint Continuous by discrete for text mark with no overlap.\nsoft(c_d_no_overlap_text) :- is_c_d, no_overlap, mark(text).\n\n% @constraint Continuous by discrete for tick mark with no overlap.\nsoft(c_d_no_overlap_tick) :- is_c_d, no_overlap, mark(tick).\n\n% @constraint Discrete by discrete for point mark.\nsoft(d_d_point) :- is_d_d, mark(point).\n\n% @constraint Discrete by discrete for point mark.\nsoft(d_d_text) :- is_d_d, mark(text).\n\n% @constraint Discrete by discrete for point mark.\nsoft(d_d_rect) :- is_d_d, mark(rect).\n\n% === Channel rankings \xe0 la APT ===\n\n% @constraint Continuous on x channel.\nsoft(continuous_x,E) :- channel(E,x), continuous(E).\n\n% @constraint Continuous on y channel.\nsoft(continuous_y,E) :- channel(E,y), continuous(E).\n\n% @constraint Continuous on color channel.\nsoft(continuous_color,E) :- channel(E,color), continuous(E).\n\n% @constraint Continuous on size channel.\nsoft(continuous_size,E) :- channel(E,size), continuous(E).\n\n% @constraint Continuous on text channel.\nsoft(continuous_text,E) :- channel(E,text), continuous(E).\n\n% @constraint Ordered on x channel.\nsoft(ordered_x,E) :- channel(E,x), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on y channel.\nsoft(ordered_y,E) :- channel(E,y), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on color channel.\nsoft(ordered_color,E) :- channel(E,color), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on size channel.\nsoft(ordered_size,E) :- channel(E,size), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on text channel.\nsoft(ordered_text,E) :- channel(E,text), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on row channel.\nsoft(ordered_row,E) :- channel(E,row), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on column channel.\nsoft(ordered_column,E) :- channel(E,column), discrete(E), not type(E,nominal).\n\n% @constraint Nominal on x channel.\nsoft(nominal_x,E) :- channel(E,x), type(E,nominal).\n\n% @constraint Nominal on y channel.\nsoft(nominal_y,E) :- channel(E,y), type(E,nominal).\n\n% @constraint Nominal on color channel.\nsoft(nominal_color,E) :- channel(E,color), type(E,nominal).\n\n% @constraint Nominal on shape channel.\nsoft(nominal_shape,E) :- channel(E,shape), type(E,nominal).\n\n% @constraint Nominal on text channel.\nsoft(nominal_text,E) :- channel(E,text), type(E,nominal).\n\n% @constraint Nominal on row channel.\nsoft(nominal_row,E) :- channel(E,row), type(E,nominal).\n\n% @constraint Nominal on column channel.\nsoft(nominal_column,E) :- channel(E,column), type(E,nominal).\n\n% @constraint Nominal on detail channel.\nsoft(nominal_detail,E) :- channel(E,detail), type(E,nominal).\n\n% @constraint Interesting on x channel.\nsoft(interesting_x,E) :- channel(E,x), enc_interesting(E).\n\n% @constraint Interesting on y channel.\nsoft(interesting_y,E) :- channel(E,y), enc_interesting(E).\n\n% @constraint Interesting on color channel.\nsoft(interesting_color,E) :- channel(E,color), enc_interesting(E).\n\n% @constraint Interesting on size channel.\nsoft(interesting_size,E) :- channel(E,size), enc_interesting(E).\n\n% @constraint Interesting on shape channel.\nsoft(interesting_shape,E) :- channel(E,shape), enc_interesting(E).\n\n% @constraint Interesting on text channel.\nsoft(interesting_text,E) :- channel(E,text), enc_interesting(E).\n\n% @constraint Interesting on row channel.\nsoft(interesting_row,E) :- channel(E,row), enc_interesting(E).\n\n% @constraint Interesting on column channel.\nsoft(interesting_column,E) :- channel(E,column), enc_interesting(E).\n\n% @constraint Interesting on detail channel.\nsoft(interesting_detail,E) :- channel(E,detail), enc_interesting(E).\n\n% === Aggregations ===\n\n% @constraint Count as aggregate op.\nsoft(aggregate_count,E) :- aggregate(E,count).\n\n% @constraint Sum as aggregate op.\nsoft(aggregate_sum,E) :- aggregate(E,sum).\n\n% @constraint Mean as aggregate op.\nsoft(aggregate_mean,E) :- aggregate(E,mean).\n\n% @constraint Median as aggregate op.\nsoft(aggregate_median,E) :- aggregate(E,median).\n\n% @constraint Min as aggregate op.\nsoft(aggregate_min,E) :- aggregate(E,min).\n\n% @constraint Max as aggregate op.\nsoft(aggregate_max,E) :- aggregate(E,max).\n\n% @constraint Standard Deviation as aggregate op.\nsoft(aggregate_stdev,E) :- aggregate(E,stdev).\n\n% === Stack ===\n\n% @constraint Zero base for stack op.\nsoft(stack_zero) :- stack(zero).\n\n% @constraint Normalize between groupbys as stack op.\nsoft(stack_normalize) :- stack(normalize).\n\n% === Task - marktype correlations ===\n\n% @constraint Point mark for value tasks.\nsoft(value_point) :- task(value), mark(point).\n\n% @constraint Bar mark for value tasks.\nsoft(value_bar) :- task(value), mark(bar).\n\n% @constraint Line mark for value tasks.\nsoft(value_line) :- task(value), mark(line).\n\n% @constraint Area mark for value tasks.\nsoft(value_area) :- task(value), mark(area).\n\n% @constraint Text mark for value tasks.\nsoft(value_text) :- task(value), mark(text).\n\n% @constraint Tick mark for value tasks.\nsoft(value_tick) :- task(value), mark(tick).\n% @end\n\n% @constraint Rect mark for value tasks.\nsoft(value_rect) :- task(value), mark(rect).\n\n% @constraint Point mark for summary tasks.\nsoft(summary_point) :- task(summary), mark(point).\n\n% @constraint Bar mark for summary tasks.\nsoft(summary_bar) :- task(summary), mark(bar).\n\n% @constraint Line mark for summary tasks.\nsoft(summary_line) :- task(summary), mark(line).\n\n% @constraint Area mark for summary tasks.\nsoft(summary_area) :- task(summary), mark(area).\n\n% @constraint Text mark for summary tasks.\nsoft(summary_text) :- task(summary), mark(text).\n\n% @constraint Tick mark for summary tasks.\nsoft(summary_tick) :- task(summary), mark(tick).\n\n% @constraint Rect mark for summary tasks.\nsoft(summary_rect) :- task(summary), mark(rect).\n\n% === Task - channel correlations ===\n\n% @constraint Continuous x for value tasks.\nsoft(value_continuous_x,E) :- task(value), channel(E,x), continuous(E), enc_interesting(E).\n\n% @constraint Continuous y for value tasks.\nsoft(value_continuous_y,E) :- task(value), channel(E,y), continuous(E), enc_interesting(E).\n\n% @constraint Continuous color for value tasks.\nsoft(value_continuous_color,E) :- task(value), channel(E,color), continuous(E), enc_interesting(E).\n\n% @constraint Continuous size for value tasks.\nsoft(value_continuous_size,E) :- task(value), channel(E,size), continuous(E), enc_interesting(E).\n\n% @constraint Continuous text for value tasks.\nsoft(value_continuous_text,E) :- task(value), channel(E,text), continuous(E), enc_interesting(E).\n\n% @constraint Discrete x for value tasks.\nsoft(value_discrete_x,E) :- task(value), channel(E,x), discrete(E), enc_interesting(E).\n\n% @constraint Discrete y for value tasks.\nsoft(value_discrete_y,E) :- task(value), channel(E,y), discrete(E), enc_interesting(E).\n\n% @constraint Discrete color for value tasks.\nsoft(value_discrete_color,E) :- task(value), channel(E,color), discrete(E), enc_interesting(E).\n\n% @constraint Discrete shape for value tasks.\nsoft(value_discrete_shape,E) :- task(value), channel(E,shape), discrete(E), enc_interesting(E).\n\n% @constraint Discrete size for value tasks.\nsoft(value_discrete_size,E) :- task(value), channel(E,size), discrete(E), enc_interesting(E).\n\n% @constraint Discrete text for value tasks.\nsoft(value_discrete_text,E) :- task(value), channel(E,text), discrete(E), enc_interesting(E).\n\n% @constraint Discrete row for value tasks.\nsoft(value_discrete_row,E) :- task(value), channel(E,row), discrete(E), enc_interesting(E).\n\n% @constraint Discrete column for value tasks.\nsoft(value_discrete_column,E) :- task(value), channel(E,column), discrete(E), enc_interesting(E).\n\n% @constraint Continuous x for summary tasks.\nsoft(summary_continuous_x,E) :- task(summary), channel(E,x), continuous(E), enc_interesting(E).\n\n% @constraint Continuous y for summary tasks.\nsoft(summary_continuous_y,E) :- task(summary), channel(E,y), continuous(E), enc_interesting(E).\n\n% @constraint Continuous color for summary tasks.\nsoft(summary_continuous_color,E) :- task(summary), channel(E,color), continuous(E), enc_interesting(E).\n\n% @constraint Continuous size for summary tasks.\nsoft(summary_continuous_size,E) :- task(summary), channel(E,size), continuous(E), enc_interesting(E).\n\n% @constraint Continuous text for summary tasks.\nsoft(summary_continuous_text,E) :- task(summary), channel(E,text), continuous(E), enc_interesting(E).\n\n% @constraint Discrete x for summary tasks.\nsoft(summary_discrete_x,E) :- task(summary), channel(E,x), discrete(E), enc_interesting(E).\n\n% @constraint Discrete y for summary tasks.\nsoft(summary_discrete_y,E) :- task(summary), channel(E,y), discrete(E), enc_interesting(E).\n\n% @constraint Discrete color for summary tasks.\nsoft(summary_discrete_color,E) :- task(summary), channel(E,color), discrete(E), enc_interesting(E).\n\n% @constraint Discrete shape for summary tasks.\nsoft(summary_discrete_shape,E) :- task(summary), channel(E,shape), discrete(E), enc_interesting(E).\n\n% @constraint Discrete size for summary tasks.\nsoft(summary_discrete_size,E) :- task(summary), channel(E,size), discrete(E), enc_interesting(E).\n\n% @constraint Discrete text for summary tasks.\nsoft(summary_discrete_text,E) :- task(summary), channel(E,text), discrete(E), enc_interesting(E).\n\n% @constraint Discrete row for summary tasks.\nsoft(summary_discrete_row,E) :- task(summary), channel(E,row), discrete(E), enc_interesting(E).\n\n% @constraint Discrete column for summary tasks.\nsoft(summary_discrete_column,E) :- task(summary), channel(E,column), discrete(E), enc_interesting(E).\n\n",wL="% Weights as constants\n\n#const type_q_weight = 0.\n#const type_o_weight = 1.\n#const type_n_weight = 2.\n#const aggregate_weight = 1.\n#const bin_weight = 2.\n#const bin_high_weight = 10.\n#const bin_low_weight = 6.\n#const encoding_weight = 0.\n#const encoding_field_weight = 6.\n#const same_field_2_weight = 8.\n#const same_field_gte3_weight = 16.\n#const count_twice_weight = 50.\n#const shape_cardinality_weight = 5.\n#const number_nominal_weight = 10.\n#const string_non_nominal_weight = 2.\n#const bin_cardinality_weight = 5.\n#const quant_bin_weight = 1.\n#const agg_dim_weight = 2.\n#const only_discrete_weight = 30.\n#const multiple_non_pos_weight = 3.\n#const non_positional_pref_weight = 10.\n#const aggregate_group_by_raw_weight = 3.\n#const x_y_raw_weight = 1.\n#const log_weight = 1.\n#const zero_weight = 1.\n#const zero_size_weight = 3.\n#const zero_positional_weight = 1.\n#const zero_skew_weight = 5.\n#const includes_zero_weight = 10.\n\n#const only_x_weight = 1.\n#const orientation_binned_weight = 1.\n#const high_cardinality_ordinal_weight = 10.\n#const high_cardinality_nominal_weight = 10.\n#const high_cardinality_nominal_color_weight = 10.\n#const horizontal_scrolling_weight = 20.\n#const temporal_date_weight = 1.\n#const quantitative_numbers_weight = 2.\n#const position_entropy_weight = 2.\n#const high_cardinality_size_weight = 1.\n#const value_agg_weight = 1.\n#const facet_summary_weight = 0.\n#const x_row_weight = 1.\n#const y_row_weight = 1.\n#const x_column_weight = 1.\n#const y_column_weight = 1.\n#const color_entropy_high_weight = 0.\n#const color_entropy_low_weight = 0.\n#const size_entropy_high_weight = 0.\n#const size_entropy_low_weight = 0.\n\n#const c_d_column_weight = 5.\n#const temporal_y_weight = 1.\n#const d_d_overlap_weight = 20.\n\n#const c_c_point_weight = 0.\n#const c_c_line_weight = 20.\n#const c_c_area_weight = 20.\n#const c_c_text_weight = 2.\n#const c_c_tick_weight = 5.\n\n#const c_d_point_weight = 10.\n#const c_d_bar_weight = 20.\n#const c_d_line_weight = 20.\n#const c_d_area_weight = 20.\n#const c_d_text_weight = 50.\n#const c_d_tick_weight = 0.\n\n#const c_d_no_overlap_point_weight = 20.\n#const c_d_no_overlap_bar_weight = 0.\n#const c_d_no_overlap_line_weight = 20.\n#const c_d_no_overlap_area_weight = 20.\n#const c_d_no_overlap_text_weight = 30.\n#const c_d_no_overlap_tick_weight = 25.\n\n#const d_d_point_weight = 0.\n#const d_d_text_weight = 1.\n#const d_d_rect_weight = 0.\n\n#const continuous_x_weight = 0.\n#const continuous_y_weight = 0.\n#const continuous_color_weight = 10.\n#const continuous_size_weight = 1.\n#const continuous_text_weight = 20.\n\n#const ordered_x_weight = 1.\n#const ordered_y_weight = 0.\n#const ordered_color_weight = 8.\n#const ordered_size_weight = 10.\n#const ordered_text_weight = 32.\n#const ordered_row_weight = 10.\n#const ordered_column_weight = 10.\n\n#const nominal_x_weight = 3.\n#const nominal_y_weight = 0.\n#const nominal_color_weight = 10.\n#const nominal_shape_weight = 11.\n#const nominal_text_weight = 12.\n#const nominal_row_weight = 7.\n#const nominal_column_weight = 10.\n#const nominal_detail_weight = 20.\n\n#const interesting_x_weight = 0.\n#const interesting_y_weight = 1.\n#const interesting_color_weight = 2.\n#const interesting_size_weight = 2.\n#const interesting_shape_weight = 3.\n#const interesting_text_weight = 6.\n#const interesting_row_weight = 6.\n#const interesting_column_weight = 7.\n#const interesting_detail_weight = 20.\n\n#const aggregate_count_weight = 0.\n#const aggregate_sum_weight = 2.\n#const aggregate_mean_weight = 1.\n#const aggregate_median_weight = 3.\n#const aggregate_min_weight = 4.\n#const aggregate_max_weight = 4.\n#const aggregate_stdev_weight = 5.\n\n#const value_point_weight = 0.\n#const value_bar_weight = 0.\n#const value_line_weight = 0.\n#const value_area_weight = 0.\n#const value_text_weight = 0.\n#const value_tick_weight = 0.\n#const value_rect_weight = 0.\n#const summary_point_weight = 0.\n#const summary_bar_weight = 0.\n#const summary_line_weight = 0.\n#const summary_area_weight = 0.\n#const summary_text_weight = 0.\n#const summary_tick_weight = 0.\n#const summary_rect_weight = 0.\n\n#const value_continuous_x_weight = 0.\n#const value_continuous_y_weight = 0.\n#const value_continuous_color_weight = 0.\n#const value_continuous_size_weight = 0.\n#const value_continuous_text_weight = 0.\n#const value_discrete_x_weight = 0.\n#const value_discrete_y_weight = 0.\n#const value_discrete_color_weight = 0.\n#const value_discrete_shape_weight = 0.\n#const value_discrete_size_weight = 0.\n#const value_discrete_text_weight = 0.\n#const value_discrete_row_weight = 0.\n#const value_discrete_column_weight = 0.\n#const summary_continuous_x_weight = 0.\n#const summary_continuous_y_weight = 0.\n#const summary_continuous_color_weight = 0.\n#const summary_continuous_size_weight = 0.\n#const summary_continuous_text_weight = 0.\n#const summary_discrete_x_weight = 0.\n#const summary_discrete_y_weight = 0.\n#const summary_discrete_color_weight = 0.\n#const summary_discrete_shape_weight = 0.\n#const summary_discrete_size_weight = 0.\n#const summary_discrete_text_weight = 0.\n#const summary_discrete_row_weight = 0.\n#const summary_discrete_column_weight = 0.\n\n#const stack_zero_weight = 0.\n#const stack_normalize_weight = 1.\n\n",y$e="%% GENERATED FILE. DO NOT EDIT.\n\nsoft_weight(type_q,type_q_weight).\nsoft_weight(type_o,type_o_weight).\nsoft_weight(type_n,type_n_weight).\nsoft_weight(aggregate,aggregate_weight).\nsoft_weight(bin,bin_weight).\nsoft_weight(bin_high,bin_high_weight).\nsoft_weight(bin_low,bin_low_weight).\nsoft_weight(encoding,encoding_weight).\nsoft_weight(encoding_field,encoding_field_weight).\nsoft_weight(same_field_2,same_field_2_weight).\nsoft_weight(same_field_gte3,same_field_gte3_weight).\nsoft_weight(count_twice,count_twice_weight).\nsoft_weight(shape_cardinality,shape_cardinality_weight).\nsoft_weight(number_nominal,number_nominal_weight).\nsoft_weight(string_non_nominal,string_non_nominal_weight).\nsoft_weight(bin_cardinality,bin_cardinality_weight).\nsoft_weight(quant_bin,quant_bin_weight).\nsoft_weight(agg_dim,agg_dim_weight).\nsoft_weight(only_discrete,only_discrete_weight).\nsoft_weight(multiple_non_pos,multiple_non_pos_weight).\nsoft_weight(non_positional_pref,non_positional_pref_weight).\nsoft_weight(aggregate_group_by_raw,aggregate_group_by_raw_weight).\nsoft_weight(x_y_raw,x_y_raw_weight).\nsoft_weight(log,log_weight).\nsoft_weight(zero,zero_weight).\nsoft_weight(zero_size,zero_size_weight).\nsoft_weight(zero_positional,zero_positional_weight).\nsoft_weight(zero_skew,zero_skew_weight).\nsoft_weight(includes_zero,includes_zero_weight).\nsoft_weight(only_x,only_x_weight).\nsoft_weight(orientation_binned,orientation_binned_weight).\nsoft_weight(high_cardinality_ordinal,high_cardinality_ordinal_weight).\nsoft_weight(high_cardinality_nominal,high_cardinality_nominal_weight).\nsoft_weight(high_cardinality_nominal_color,high_cardinality_nominal_color_weight).\nsoft_weight(horizontal_scrolling,horizontal_scrolling_weight).\nsoft_weight(temporal_date,temporal_date_weight).\nsoft_weight(quantitative_numbers,quantitative_numbers_weight).\nsoft_weight(position_entropy,position_entropy_weight).\nsoft_weight(high_cardinality_size,high_cardinality_size_weight).\nsoft_weight(value_agg,value_agg_weight).\nsoft_weight(facet_summary,facet_summary_weight).\nsoft_weight(x_row,x_row_weight).\nsoft_weight(y_row,y_row_weight).\nsoft_weight(x_column,x_column_weight).\nsoft_weight(y_column,y_column_weight).\nsoft_weight(color_entropy_high,color_entropy_high_weight).\nsoft_weight(color_entropy_low,color_entropy_low_weight).\nsoft_weight(size_entropy_high,size_entropy_high_weight).\nsoft_weight(size_entropy_low,size_entropy_low_weight).\nsoft_weight(c_d_column,c_d_column_weight).\nsoft_weight(temporal_y,temporal_y_weight).\nsoft_weight(d_d_overlap,d_d_overlap_weight).\nsoft_weight(c_c_point,c_c_point_weight).\nsoft_weight(c_c_line,c_c_line_weight).\nsoft_weight(c_c_area,c_c_area_weight).\nsoft_weight(c_c_text,c_c_text_weight).\nsoft_weight(c_c_tick,c_c_tick_weight).\nsoft_weight(c_d_point,c_d_point_weight).\nsoft_weight(c_d_bar,c_d_bar_weight).\nsoft_weight(c_d_line,c_d_line_weight).\nsoft_weight(c_d_area,c_d_area_weight).\nsoft_weight(c_d_text,c_d_text_weight).\nsoft_weight(c_d_tick,c_d_tick_weight).\nsoft_weight(c_d_no_overlap_point,c_d_no_overlap_point_weight).\nsoft_weight(c_d_no_overlap_bar,c_d_no_overlap_bar_weight).\nsoft_weight(c_d_no_overlap_line,c_d_no_overlap_line_weight).\nsoft_weight(c_d_no_overlap_area,c_d_no_overlap_area_weight).\nsoft_weight(c_d_no_overlap_text,c_d_no_overlap_text_weight).\nsoft_weight(c_d_no_overlap_tick,c_d_no_overlap_tick_weight).\nsoft_weight(d_d_point,d_d_point_weight).\nsoft_weight(d_d_text,d_d_text_weight).\nsoft_weight(d_d_rect,d_d_rect_weight).\nsoft_weight(continuous_x,continuous_x_weight).\nsoft_weight(continuous_y,continuous_y_weight).\nsoft_weight(continuous_color,continuous_color_weight).\nsoft_weight(continuous_size,continuous_size_weight).\nsoft_weight(continuous_text,continuous_text_weight).\nsoft_weight(ordered_x,ordered_x_weight).\nsoft_weight(ordered_y,ordered_y_weight).\nsoft_weight(ordered_color,ordered_color_weight).\nsoft_weight(ordered_size,ordered_size_weight).\nsoft_weight(ordered_text,ordered_text_weight).\nsoft_weight(ordered_row,ordered_row_weight).\nsoft_weight(ordered_column,ordered_column_weight).\nsoft_weight(nominal_x,nominal_x_weight).\nsoft_weight(nominal_y,nominal_y_weight).\nsoft_weight(nominal_color,nominal_color_weight).\nsoft_weight(nominal_shape,nominal_shape_weight).\nsoft_weight(nominal_text,nominal_text_weight).\nsoft_weight(nominal_row,nominal_row_weight).\nsoft_weight(nominal_column,nominal_column_weight).\nsoft_weight(nominal_detail,nominal_detail_weight).\nsoft_weight(interesting_x,interesting_x_weight).\nsoft_weight(interesting_y,interesting_y_weight).\nsoft_weight(interesting_color,interesting_color_weight).\nsoft_weight(interesting_size,interesting_size_weight).\nsoft_weight(interesting_shape,interesting_shape_weight).\nsoft_weight(interesting_text,interesting_text_weight).\nsoft_weight(interesting_row,interesting_row_weight).\nsoft_weight(interesting_column,interesting_column_weight).\nsoft_weight(interesting_detail,interesting_detail_weight).\nsoft_weight(aggregate_count,aggregate_count_weight).\nsoft_weight(aggregate_sum,aggregate_sum_weight).\nsoft_weight(aggregate_mean,aggregate_mean_weight).\nsoft_weight(aggregate_median,aggregate_median_weight).\nsoft_weight(aggregate_min,aggregate_min_weight).\nsoft_weight(aggregate_max,aggregate_max_weight).\nsoft_weight(aggregate_stdev,aggregate_stdev_weight).\nsoft_weight(value_point,value_point_weight).\nsoft_weight(value_bar,value_bar_weight).\nsoft_weight(value_line,value_line_weight).\nsoft_weight(value_area,value_area_weight).\nsoft_weight(value_text,value_text_weight).\nsoft_weight(value_tick,value_tick_weight).\nsoft_weight(value_rect,value_rect_weight).\nsoft_weight(summary_point,summary_point_weight).\nsoft_weight(summary_bar,summary_bar_weight).\nsoft_weight(summary_line,summary_line_weight).\nsoft_weight(summary_area,summary_area_weight).\nsoft_weight(summary_text,summary_text_weight).\nsoft_weight(summary_tick,summary_tick_weight).\nsoft_weight(summary_rect,summary_rect_weight).\nsoft_weight(value_continuous_x,value_continuous_x_weight).\nsoft_weight(value_continuous_y,value_continuous_y_weight).\nsoft_weight(value_continuous_color,value_continuous_color_weight).\nsoft_weight(value_continuous_size,value_continuous_size_weight).\nsoft_weight(value_continuous_text,value_continuous_text_weight).\nsoft_weight(value_discrete_x,value_discrete_x_weight).\nsoft_weight(value_discrete_y,value_discrete_y_weight).\nsoft_weight(value_discrete_color,value_discrete_color_weight).\nsoft_weight(value_discrete_shape,value_discrete_shape_weight).\nsoft_weight(value_discrete_size,value_discrete_size_weight).\nsoft_weight(value_discrete_text,value_discrete_text_weight).\nsoft_weight(value_discrete_row,value_discrete_row_weight).\nsoft_weight(value_discrete_column,value_discrete_column_weight).\nsoft_weight(summary_continuous_x,summary_continuous_x_weight).\nsoft_weight(summary_continuous_y,summary_continuous_y_weight).\nsoft_weight(summary_continuous_color,summary_continuous_color_weight).\nsoft_weight(summary_continuous_size,summary_continuous_size_weight).\nsoft_weight(summary_continuous_text,summary_continuous_text_weight).\nsoft_weight(summary_discrete_x,summary_discrete_x_weight).\nsoft_weight(summary_discrete_y,summary_discrete_y_weight).\nsoft_weight(summary_discrete_color,summary_discrete_color_weight).\nsoft_weight(summary_discrete_shape,summary_discrete_shape_weight).\nsoft_weight(summary_discrete_size,summary_discrete_size_weight).\nsoft_weight(summary_discrete_text,summary_discrete_text_weight).\nsoft_weight(summary_discrete_row,summary_discrete_row_weight).\nsoft_weight(summary_discrete_column,summary_discrete_column_weight).\nsoft_weight(stack_zero,stack_zero_weight).\nsoft_weight(stack_normalize,stack_normalize_weight).\n\n",v$e="% Minimize the feature weight\n\n#minimize { W,F,Q: soft_weight(F,W), soft(F,Q); #inf,F,Q: soft(F,Q), not soft_weight(F,_); #inf,F: hard(F); #inf,F,Q: hard(F,Q); #inf,F,Q1,Q2: hard(F,Q1,Q2) }.\n\n",b$e="% ====== Output ======\n\n#show data/1.\n\n#show mark/1.\n\n#show type/2.\n#show channel/2.\n#show field/2.\n#show aggregate/2.\n#show bin/2.\n#show stack/2.\n\n#show log/1.\n#show zero/1.\n\n#show soft/2.\n\n";function qZ(e,t){const n=e.match(x$e);if(!n)throw Error("invalid constraints");const i=n.map(r=>{const o=function w$e(e){const t=e.match(E$e);if(t){const i=S$e.exec(t[0]);if(i)return{description:i[1]}}return null}(r),s=function C$e(e){const t=e.match(k$e);if(t){const n=t.join("\n"),i=A$e.exec(n);if(!i)throw Error(`invalid asp: ${n}`);const r=i[1],o=O$e.exec(n);if(!o)throw Error(`invalid asp: ${n}`);return{type:r,name:o[1],asp:n}}return null}(r);return{...o,...s}});if(t){const r=t.match(D$e),o=function M$e(e){const t={};for(const n of e){const i=T$e.exec(n);if(!i)throw Error(`invalid weight: ${n}`);const r=i[1],o=P$e.exec(n);if(!o)throw Error(`invalid weight: ${n}`);t[r]=+o[1]}return t}(r);if(!r)throw Error("invalid weights");for(const s of i)s.weight=o[s.name]}return i}const x$e=/%\s*@constraint(?:(.+)\n)+/g,E$e=/(%.*\n)+/g,S$e=/@constraint\s+(.*)/,k$e=/^[^%].*/gm,A$e=/(\w+)\(/,O$e=/\((\w+),?.*?\)/,D$e=/#const.*/g,T$e=/#const\s+(\w+?)_weight/,P$e=/=\s*(\d+)/;var R$e=Me(56),I$e=Me.n(R$e),F$e=Me(446),L$e=Me.n(F$e);function YZ(e){const t=e[0].type;e.forEach(o=>{if(o.type!==t)throw new Error(`constraints not all of type ${t}`)});let i,r,n="";"soft"===t&&(i="",r="");for(const o of e)n+=`% @constraint ${o.description}\n${o.asp}`,n+="\n\n","soft"===t&&(i+=`#const ${o.name}_weight = ${o.weight}.`,i+="\n",r+=`soft_weight(${o.name}, ${o.name}_weight).`,r+="\n");return"hard"===t?{definitions:n}:{definitions:n,weights:i,assigns:r}}const NS=[{id:"variables",title_plural:"Variables",title_singular:"Variable",grammar_name:"VARIABLE"},{id:"identifiers",title_plural:"Identifiers",title_singular:"Identifier",grammar_name:"ID"},{id:"nafliterals",title_plural:"Naf Literals",title_singular:"Naf Literal",grammar_name:"naf_literal"},{id:"number",title_plural:"Number",title_singular:"Numbers",grammar_name:"NUMBER"},{id:"builtinAtom",title_plural:"Binary Operation",title_singular:"Binary Operations",grammar_name:"builtin_atom"}];var B$e=Me(235);let CL=(()=>{class e{constructor(){this.CONSTRAINT_MATCH=/%\s*@constraint(?:(.+)\n)+/g,this.DOC_MATCH=/(%.*)+/g,this.DESCRIPTION_EXTRACT=/@constraint\s+(.*)/,this.RULE_SPLIT=/%\s*(?:(.+)\n)+/g,this.DOC_SPLIT_MATCH=/(%)+[^\n]*\n/g,this.DOC_SPLIT_DESCRIPTION_EXTRACT=/\s+(.*)/,this.SOFT_MATCH=/soft([^%)])./g,this.HARD_MATCH=/hard([^%)])./g,this.ASP_MATCH=/^[^%].*/gm,this.TYPE_EXTRACT=/(\w+)\(/,this.NAME_EXTRACT=/\((\w+),?.*?\)/,this.WEIGHTS_MATCH=/#const.*/g,this.WEIGHT_NAME_EXTRACT=/#const\s+(\w+?)_weight/,this.WEIGHT_VALUE_EXTRACT=/=\s*(\d+)/,this.HIERARCHY_DIVIDER="_",this.parserOptions={keepUpperRules:!0},this.ast=new wr(null),this.parser=new B$e.Grammars.W3C.Parser('\nprogram            ::= (statement? query? | comment | NL)* \n\nstatement          ::= rule | fact | integrity_constraint\nquery              ::= classical_literal QUERY_MARK\n\nfact               ::= head DOT WS* NL?\nrule               ::= head CONS bodies? DOT WS* NL?\nintegrity_constraint ::= CONS bodies? DOT WS* NL? | WCONS bodies? DOT SQUARE_OPEN weight_at_level SQUARE_CLOSE WS* NL?\ncomment            ::= MULTI_LINE_COMMENT WS* NL? | COMMENT WS* NL?\n\nhead               ::= disjunction | choice\nbodies             ::= body+ | FALSE | TRUE\nbody               ::= naf_literal COMMA | NAF? aggregate COMMA | naf_literal | NAF? aggregate\n\ndisjunction        ::= classical_literal (OR disjunction)?\n\nchoice             ::= (term binop?)? CURLY_OPEN choice_elements? CURLY_CLOSE (binop? term)?\nchoice_elements    ::= choice_element (SEMICOLON choice_elements)? \nchoice_element     ::= classical_literal (COLON naf_literals?)? \n\naggregate          ::= (term binop?)? aggregate_function? CURLY_OPEN aggregate_elements? CURLY_CLOSE (binop? term)? | aggreagte_count_function\naggregate_elements ::= aggregate_element ((COMMA | SEMICOLON) aggregate_elements)? \naggregate_element  ::= classical_literal? (COLON naf_literals)? | basic_terms? (COLON naf_literals)?\naggregate_function ::= AGGREGATE_COUNT | AGGREGATE_MAX | AGGREGATE_MIN | AGGREGATE_SUM\naggreagte_count_function ::= "|" aggregate_elements? "|" (binop? term)?\n\nweight_at_level    ::= term (AT term)? (COMMA terms)?\n\nnaf_literals       ::= naf_literal (COMMA naf_literals)? \nnaf_literal        ::= NAF? classical_literal | builtin_atom\n\nclassical_literal  ::= MINUS? ID (PAREN_OPEN terms? PAREN_CLOSE)? \nbuiltin_atom       ::= term binop term\n\nbinop              ::= EQUAL | UNEQUAL | LESS_OR_EQ | GREATER_OR_EQ | LESS | GREATER\n\nterms              ::= term ((COMMA | SEMICOLON) terms)?\nterm_op_repeat     ::= arithop term term_op_repeat?\nterm               ::= NUMBER term_op_repeat? | STRING term_op_repeat? | VARIABLE term_op_repeat? | ANONYMOUS_VARIABLE term_op_repeat? | PAREN_OPEN terms? PAREN_CLOSE term_op_repeat? | MINUS term term_op_repeat? | ID (PAREN_OPEN terms? PAREN_CLOSE)? term_op_repeat?\n\nbasic_terms        ::= basic_term (COMMA basic_terms)? \nbasic_term         ::= ground_term | variable_term\nground_term        ::= SYMBOLIC_CONSTANT | STRING | MINUS? NUMBER\nvariable_term      ::= VARIABLE | ANONYMOUS_VARIABLE\narithop            ::= PLUS | MINUS | TIMES | DIV\n\nNUMBER ::= "0" | [1-9] [0-9]*\nSYMBOLIC_WITHOUT_STAR ::= "-" | "_" | "!" | "#" | "$" | "%" | "&" | "(" | ")" | "*" | "+" | "," | "-" | "." | "/" | ":" | ";" | "<" | "=" | ">" | "?" | "@" | "[" | "]" | "^" | "_" | "`" | "{" | "|" | "}" | "~" | "TODO Backslash!"\nSYMBOLIC_CONSTANT ::= "*" | SYMBOLIC_WITHOUT_STAR\nUNDERLINE ::= "_"\nDOUBLE_QUOTE ::= \'"\'\nID                  ::= [a-z] [a-zA-Z0-9_]*\nVARIABLE            ::= [A-Z] [a-zA-Z0-9_]*\nSTRING_CONTENT      ::= ([#x20-#x21] | [#x23-#x5B] | [#x5D-#xFFFF]) | #x5C (#x22 | #x5C | #x2F | #x62 | #x66 | #x6E | #x72 | #x74 | #x75 HEXDIG HEXDIG HEXDIG HEXDIG)\nSTRING              ::= DOUBLE_QUOTE ([^#x22] | #x5c #x22)* DOUBLE_QUOTE\nHEXDIG              ::= [a-zA-Z0-9]\nANONYMOUS_VARIABLE  ::= UNDERLINE ID | UNDERLINE VARIABLE | UNDERLINE\nDOT ::= "."\nCOMMA ::= ","\nQUERY_MARK ::= "?"\nCOLON ::= ":"\nSEMICOLON ::= ";"\nOR ::= "|"\nNAF ::= "not"\nCONS ::= ":-"\nWCONS ::= ":~"\nPLUS ::= "+"\nMINUS ::= "-"\nTIMES ::= "*"\nDIV ::= "/"\nAT ::= "@"\nPAREN_OPEN ::= "("\nPAREN_CLOSE ::= ")"\nSQUARE_OPEN ::= "["\nSQUARE_CLOSE ::= "]"\nCURLY_OPEN ::= "{"\nCURLY_CLOSE ::= "}"\nEQUAL ::= "="\nUNEQUAL ::= "<>" | "!="\nLESS ::= "<"\nGREATER ::= ">"\nLESS_OR_EQ ::= "<="\nGREATER_OR_EQ ::= ">="\nAGGREGATE_COUNT ::= "count"\nAGGREGATE_MAX ::= "max"\nAGGREGATE_MIN ::= "min"\nAGGREGATE_SUM ::= "sum"\nFALSE ::= "#false"\nTRUE ::= "#true"\nCOMMENT ::= "%" ([^*\n] [^\n]*)?\nMULTI_LINE_COMMENT ::= "%*" ([^*] | "*" [^%])* "*%"\nNL ::= [#x0A#x0D]\nWS ::= [#x09#x20]\n',this.parserOptions)}getAST(n){return this.parser.getAST(this.rmWS(this.rpNL(n)))}getFacts(n,i=[]){if("fact"!==n.type)for(let r=0;r<n.children.length;r++)i=this.getFacts(n.children[r],i);else i.push(n);return i}getIntegrityConstraints(n,i=[]){if("integrity_constraint"!==n.type)for(let r=0;r<n.children.length;r++)i=this.getIntegrityConstraints(n.children[r],i);else i.push(n);return i}getVariables(n,i=[]){if("VARIABLE"!==n.type)for(let r=0;r<n.children.length;r++)i=this.getVariables(n.children[r],i);else 0==i.filter(r=>r.text===n.text).length&&i.push(n);return i}getFeature(n,i,r=[]){if(n.type!==i)for(let o=0;o<n.children.length;o++)r=this.getFeature(n.children[o],i,r);else 0==r.filter(o=>o.text===n.text).length&&r.push(n);return r}extractStatements(n){const i=n.children.filter(r=>"statement"===r.type);return n.children=i,n}rmWS(n){return n.replace(/ /g,"")}rpNL(n){return n.replace(/(\r\n|\n|\r)/gm,"\n")}asp2json(n){const i=n.split("\n").filter(s=>s);let r=[];const o=[];return i.forEach(s=>{if(s.match(this.DOC_MATCH))r.push(s);else{let a=r.pop();o.push({titles:r||[],doc:a?a.match(this.DESCRIPTION_EXTRACT)?this.getDoc(a):a:"",asp:s})}}),o}dracoASP2json(n){const i=n.match(this.RULE_SPLIT);if(!this.getAST(n))throw Error("invalid asp");return i.map(r=>({...this.getDocDraco(r),...this.getAsp(r),constraintType:null}))}isConstraint(n){return null!==n.match(this.SOFT_MATCH)||null!==n.match(this.HARD_MATCH)}constraints2json(n,i){const r=n.match(this.CONSTRAINT_MATCH);if(!r)throw Error("invalid constraints");const o=r.map(s=>({...this.getDoc(s),...this.getAsp(s),constraintType:null}));if(i){const s=i.match(this.WEIGHTS_MATCH),a=this.getWeightMap(s);if(!s)throw Error("invalid weights");for(const l of o)l.weight=a[l.name]}return o}getDocDraco(n){const i=n.match(this.DOC_SPLIT_MATCH);if(i){const o=this.DOC_SPLIT_DESCRIPTION_EXTRACT.exec(i[0]);if(o)return{description:o[1]}}return null}getDoc(n){const i=n.match(this.DOC_MATCH);if(i){const o=this.DESCRIPTION_EXTRACT.exec(i[0]);if(o)return{description:o[1]}}return null}getAsp(n){const i=n.match(this.ASP_MATCH);if(i){const r=i.join("\n"),o="rule",s=this.NAME_EXTRACT.exec(r);if(!s)throw Error(`invalid asp: ${r}`);const a=s[1],l=a.split(this.HIERARCHY_DIVIDER);return{type:o,name:a,asp:r,hierarchy:l}}return null}getWeightMap(n){const i={};for(const r of n){const o=this.WEIGHT_NAME_EXTRACT.exec(r);if(!o)throw Error(`invalid weight: ${r}`);const s=o[1],a=this.WEIGHT_VALUE_EXTRACT.exec(r);if(!a)throw Error(`invalid weight: ${r}`);i[s]=+a[1]}return i}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function XZ(e,t,n,i,r,o,s){try{var a=e[o](s),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(i,r)}function Pr(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function s(l){XZ(o,i,r,s,a,"next",l)}function a(l){XZ(o,i,r,s,a,"throw",l)}s(void 0)})}}function ro(e,t,n,i){return new Promise((r,o)=>{e||o("IndexedDB not available");const s=e.open(t,n);let a;s.onsuccess=l=>{a=s.result,r(a)},s.onerror=l=>{o(`IndexedDB error: ${s.error}`)},"function"==typeof i&&(s.onupgradeneeded=l=>{i(l,a)})})}function KZ(e,t,n,i,r){if(!e)return;const o=e.open(t,n);o.onupgradeneeded=s=>{const a=s.target.result;i.forEach(c=>{if(!a.objectStoreNames.contains(c.store)){const u=a.createObjectStore(c.store,c.storeConfig);c.storeSchema.forEach(d=>{u.createIndex(d.name,d.keypath,d.options)})}});const l=r&&r();l&&Object.keys(l).map(c=>parseInt(c,10)).filter(c=>c>s.oldVersion).sort((c,u)=>c-u).forEach(c=>{l[c](a,o.transaction)}),a.close()},o.onsuccess=s=>{s.target.result.close()}}function ga(e,t,n){e||n("You need to use the openDatabase function to create a database before you query it!"),function V$e(e,t){return e.objectStoreNames.contains(t)}(e,t)||n(`objectStore does not exists: ${t}`)}function Ao(e,t){const n=e.transaction(t.storeName,t.dbMode);return n.onerror=t.error,n.onabort=t.abort,n}function Oo(e,t,n,i){return{storeName:t,dbMode:e,error:r=>{n(r)},abort:r=>{n(r)}}}var Yr=(()=>(function(e){e.readonly="readonly",e.readwrite="readwrite"}(Yr||(Yr={})),Yr))();const ZZ=new bt(null);let ML=(()=>{class e{constructor(n,i){if(this.dbConfigs=n,this.platformId=i,this.defaultDatabaseName=null,this.isBrowser=wG(this.platformId),this.isBrowser){this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;const r=Object.values(this.dbConfigs),o=1===r.length;for(const s of r)this.instanciateConfig(s,o)}}instanciateConfig(n,i){if(!n.name)throw new Error("NgxIndexedDB: Please, provide the dbName in the configuration");if(!n.version)throw new Error("NgxIndexedDB: Please, provide the db version in the configuration");if(n.isDefault&&this.defaultDatabaseName)throw new Error("NgxIndexedDB: Only one database can be set as default");((n.isDefault??!1)&&!this.defaultDatabaseName||i)&&(this.defaultDatabaseName=n.name,this.selectedDb=n.name),KZ(this.indexedDB,n.name,n.version,n.objectStoresMeta,n.migrationFactory),ro(this.indexedDB,n.name).then(r=>{r.version!==n.version&&(this.dbConfigs[n.name].version=r.version)})}get dbConfig(){return this.dbConfigs[this.selectedDb]}selectDb(n){if(!(n=n??this.defaultDatabaseName))throw new Error("No database name specified and no default database set.");if(!Object.keys(this.dbConfigs).includes(n))throw new Error(`NgxIndexedDB: Database ${n} is not initialized.`);this.selectedDb=n}createObjectStore(n,i){const r=[n];KZ(this.indexedDB,this.dbConfig.name,++this.dbConfig.version,r,i)}add(n,i,r){return new dt(o=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{const l=Ao(s,Oo(Yr.readwrite,n,u=>o.error(u))).objectStore(n),c=Boolean(r)?l.add(i,r):l.add(i);c.onsuccess=function(){var u=Pr(function*(d){const h=l.get(d.target.result);h.onsuccess=y=>{o.next(y.target.result),o.complete()},h.onerror=y=>{o.error(y)}});return function(d){return u.apply(this,arguments)}}(),c.onerror=u=>{o.error(u)}}).catch(s=>o.error(s))})}bulkAdd(n,i){return J(new Promise((o,s)=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{const c=Ao(a,Oo(Yr.readwrite,n,o)).objectStore(n),u=i.map(d=>new Promise((f,h)=>{const y=d.key;delete d.key,(Boolean(y)?c.add(d,y):c.add(d)).onsuccess=C=>{f(C.target.result)}}));o(Promise.all(u))}).catch(a=>s(a))}))}bulkDelete(n,i){const r=i.map(o=>new Promise((s,a)=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(l=>{const c=Ao(l,Oo(Yr.readwrite,n,a));c.objectStore(n).delete(o),c.oncomplete=()=>{this.getAll(n).pipe(Us(1)).subscribe(d=>{s(d)})}}).catch(l=>a(l))}));return J(Promise.all(r))}getByKey(n,i){return new dt(r=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{const l=Ao(o,Oo(Yr.readonly,n,r.error)).objectStore(n).get(i);l.onsuccess=c=>{r.next(c.target.result),r.complete()},l.onerror=c=>{r.error(c)}}).catch(o=>r.error(o))})}bulkGet(n,i){const r=i.map(o=>this.getByKey(n,o));return new dt(o=>{nE(r).subscribe(s=>{o.next(s),o.complete()})})}getByID(n,i){return new dt(r=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{ga(o,n,c=>r.error(c)),Ao(o,Oo(Yr.readonly,n,r.error)).objectStore(n).get(i).onsuccess=c=>{r.next(c.target.result)}}).catch(o=>r.error(o))})}getByIndex(n,i,r){return new dt(o=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{ga(s,n,d=>o.error(d)),Ao(s,Oo(Yr.readonly,n,o.error)).objectStore(n).index(i).get(r).onsuccess=d=>{o.next(d.target.result),o.complete()}}).catch(s=>o.error(s))})}getAll(n){return new dt(i=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(r=>{ga(r,n,l=>i.error(l));const a=Ao(r,Oo(Yr.readonly,n,i.error)).objectStore(n).getAll();a.onerror=l=>{i.error(l)},a.onsuccess=({target:{result:l}})=>{i.next(l),i.complete()}}).catch(r=>i.error(r))})}update(n,i){return new dt(r=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{ga(o,n,c=>r.error(c));const a=Ao(o,Oo(Yr.readwrite,n,c=>r.error(c))).objectStore(n);a.put(i).onsuccess=function(){var c=Pr(function*(u){a.get(u.target.result).onsuccess=h=>{r.next(h.target.result),r.complete()}});return function(u){return c.apply(this,arguments)}}()}).catch(o=>r.error(o))})}bulkPut(n,i){let r;return new dt(o=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{ga(s,n,l=>o.error(l)),r=Ao(s,Oo(Yr.readwrite,n,l=>o.error(l)));const a=r.objectStore(n);i.forEach((l,c)=>{const u=a.put(l);c===i.length-1&&(u.onsuccess=d=>{r.commit(),o.next(d.target.result),o.complete()}),u.onerror=d=>{r.abort(),o.error(d)}})}).catch(s=>{r?.abort(),o.error(s)})})}delete(n,i){return new dt(r=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{ga(o,n,l=>r.error(l));const s=Ao(o,Oo(Yr.readwrite,n,l=>r.error(l)));s.objectStore(n).delete(i),s.oncomplete=()=>{this.getAll(n).pipe(Us(1)).subscribe(l=>{r.next(l),r.complete()})}}).catch(o=>r.error(o))})}deleteByKey(n,i){return new dt(r=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{ga(o,n,l=>r.error(l));const s=Ao(o,Oo(Yr.readwrite,n,l=>r.error(l))),a=s.objectStore(n);s.oncomplete=()=>{r.next(!0),r.complete()},a.delete(i)}).catch(o=>r.error(o))})}clear(n){return new dt(i=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(r=>{ga(r,n,a=>i.error(a));const o=Ao(r,Oo(Yr.readwrite,n,a=>i.error(a)));o.objectStore(n).clear(),o.oncomplete=()=>{i.next(!0),i.complete()}}).catch(r=>i.error(r))})}deleteDatabase(){var n=this;return new dt(i=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(function(){var r=Pr(function*(o){yield o.close();const s=n.indexedDB.deleteDatabase(n.dbConfig.name);s.onsuccess=()=>{i.next(!0),i.complete()},s.onerror=a=>i.error(a),s.onblocked=()=>{throw new Error("Unable to delete database because it's blocked")}});return function(o){return r.apply(this,arguments)}}()).catch(r=>i.error(r))})}openCursor(n,i){return new dt(r=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{ga(o,n,c=>r.error(c));const a=Ao(o,Oo(Yr.readonly,n,r.error)).objectStore(n);(void 0===i?a.openCursor():a.openCursor(i)).onsuccess=c=>{r.next(c),r.complete()}}).catch(o=>r.error(o))})}openCursorByIndex(n,i,r,o=Yr.readonly){const s=new Yt;return ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{ga(a,n,f=>{s.error(f)}),Ao(a,Oo(o,n,f=>{s.error(f)})).objectStore(n).index(i).openCursor(r).onsuccess=f=>{s.next(f)}}).catch(a=>s.error(a)),s}getAllByIndex(n,i,r){const o=[];return new dt(s=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{ga(a,n,f=>s.error(f)),Ao(a,Oo(Yr.readonly,n,s.error)).objectStore(n).index(i).openCursor(r).onsuccess=f=>{const h=f.target.result;h?(o.push(h.value),h.continue()):(s.next(o),s.complete())}}).catch(a=>s.error(a))})}getAllKeysByIndex(n,i,r){const o=[];return new dt(s=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(a=>{ga(a,n,f=>s.error(f)),Ao(a,Oo(Yr.readonly,n,s.error)).objectStore(n).index(i).openKeyCursor(r).onsuccess=f=>{const h=f.target.result;h?(o.push({primaryKey:h.primaryKey,key:h.key}),h.continue()):(s.next(o),s.complete())}}).catch(a=>s.error(a))})}count(n,i){return new dt(r=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{ga(o,n,c=>r.error(c));const l=Ao(o,Oo(Yr.readonly,n,r.error)).objectStore(n).count(i);l.onerror=c=>r.error(c),l.onsuccess=c=>{r.next(c.target.result),r.complete()}}).catch(o=>r.error(o))})}countByIndex(n,i,r){return new dt(o=>{ro(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{ga(s,n,d=>o.error(d));const u=Ao(s,Oo(Yr.readonly,n,o.error)).objectStore(n).index(i).count(r);u.onerror=d=>o.error(d),u.onsuccess=d=>{o.next(d.target.result),o.complete()}}).catch(s=>o.error(s))})}deleteObjectStore(n){return function H$e(e,t,n){if(!e||!t||!n)throw Error('Params: "dbName", "version", "storeName" are mandatory.');return new dt(i=>{try{const o=indexedDB.open(e,t+1);o.onupgradeneeded=s=>{const a=s.target.result;a.deleteObjectStore(n),a.close(),console.log("onupgradeneeded"),i.next(!0),i.complete()},o.onerror=s=>i.error(s)}catch(r){i.error(r)}})}(this.dbConfig.name,++this.dbConfig.version,n)}}return e.\u0275fac=function(n){return new(n||e)(qe(ZZ),qe(Dx))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})(),U$e=(()=>{class e{static forRoot(...n){const i={};for(const r of n)Object.assign(i,{[r.name]:r});return{ngModule:e,providers:[ML,{provide:ZZ,useValue:i}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fa]}),e})(),$S=(()=>{class e{constructor(n){this.dbService=n,this._db=n}add(n,i){return this.dbService.add(n,i)}update(n,i){return this.dbService.update(n,i)}getByID(n,i){return this.dbService.getByKey(n,i)}getByKey(n,i,r){return this.dbService.getByIndex(n,i,r)}getAll(n){return this.dbService.getAll(n)}count(n){return this.dbService.count(n)}delete(n,i){return this.dbService.delete(n,i)}}return e.\u0275fac=function(n){return new(n||e)(qe(ML))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),j$e=(()=>{class e{constructor(n){this.dbService=n}addRules(n,i){return this.dbService.count(n).pipe(xt(r=>{if(0===r){let o=[];return i.forEach(s=>{o.push(this.dbService.add(n,s))}),Hd(o)}return this.dbService.getAll(n)}),Ad())}}return e.\u0275fac=function(n){return new(n||e)(qe($S))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xL=(()=>{class e{constructor(n,i,r){this.parserService=n,this.dbService=i,this.dbHelperService=r,this._loaded=new wr(!1),this._constraints={},this._nodes_soft=new wr([]),this._links_soft=new wr([]),this._nodes_hard=new wr([]),this._links_hard=new wr([]),this._selectedVizRecSets=new wr(null),this._hoveredVizRecSet=new wr(null),this._selectedHypergraphSet=new wr(null),this._hoveredHypergraphSet=new wr(null),this._filteredHypergraphSet=new wr(null),this.loadData()}setSelectedVizRecSets(n){this._selectedVizRecSets.next(n)}get selectedVizRecSets(){return this._selectedVizRecSets}setHoveredVizRecSet(n){this._hoveredVizRecSet.next(n)}get hoveredVizRecSet(){return this._hoveredVizRecSet}setSelectedHypergraphSet(n){this._selectedHypergraphSet.next(n)}get selectedHypergraphSet(){return this._selectedHypergraphSet}setHoveredHypergraphSet(n){this._hoveredHypergraphSet.next(n)}get filteredHypergraphSet(){return this._filteredHypergraphSet}setFilteredHypergraphSet(n){this._filteredHypergraphSet.next(n)}get hoveredHypergraphSet(){return this._hoveredHypergraphSet}get loaded(){return this._loaded}get nodes_soft(){return this._nodes_soft}get links_soft(){return this._links_soft}get nodes_hard(){return this._nodes_hard}get links_hard(){return this._links_hard}loadData(){Hd([this.extractConstraints(),this.extractFeatures()]).subscribe(([r,o])=>{Hd([this.extractNodesAndLinks(_r.SOFT).pipe(Ad()),this.extractNodesAndLinks(_r.HARD).pipe(Ad())]).subscribe(([l,c])=>{this._constraints.soft=r[0],this._constraints.hard=r[1],this.extractHierarchies(_r.SOFT,this._constraints.soft),this.extractHierarchies(_r.HARD,this._constraints.hard),this._loaded.next(!0)})})}extractConstraints(){const i=[];if(this._constraints.soft)i.push(ln(this._constraints.soft));else{const r=this.dbService.count(_r.SOFT).pipe(xt(o=>0===o?(this._constraints.soft=this.parserService.constraints2json(LS,wL),this.dbHelperService.addRules(_r.SOFT,this._constraints.soft).pipe(xt(()=>this._constraints.soft))):this.dbService.getAll(_r.SOFT)));i.push(r.pipe(Ad()))}if(this._constraints.hard)i.push(ln(this._constraints.hard));else{const r=this.dbService.count(_r.HARD).pipe(xt(o=>0===o?(this._constraints.hard=this.parserService.constraints2json(FS),this.dbHelperService.addRules(_r.HARD,this._constraints.hard).pipe(xt(()=>this._constraints.hard))):this.dbService.getAll(_r.HARD)));i.push(r.pipe(Ad()))}return Hd(i)}extractFeatures(){const n="features",i=GZ+LS+FS;return this.dbService.count(n).pipe(xt(r=>{if(0===r){const o=this.parserService.getAST(i);let s=[];return NS.forEach((a,l)=>{let c=this.parserService.getFeature(o,a.grammar_name).map((u,d)=>({id:d,name:u.text,description:u.text}));s.push(this.dbService.add(n,{name:a.id,entries:c}).pipe(xt(()=>c)))}),Hd(s)}return this.dbService.getAll(n)}),Ad())}extractNodesAndLinks(n){const i="hyperlinks";return this.dbService.count(i).pipe(xt(r=>0===r?this.dbService.getAll(n).pipe(xt(o=>Hd(NS.map(s=>{let a=n+"_"+s.id;const l=[];return this.dbService.getByKey("features","name",s.id).pipe(xt(c=>{const u=[];o.forEach((y,b)=>{l.push({...y,constraintType:n,weight:typeof y.weight<"u"?y.weight:-1});const C=this.parserService.getAST(y.asp),k=this.parserService.getFeature(C,s.grammar_name),I=u.map(z=>z.feature_id);k.forEach((z,q)=>{const ne=z.text,K=c.entries.filter(me=>me.name===ne)[0],le=I.indexOf(K.id);-1===le?u.push({feature_id:K.id,feature_name:ne,constraintType:n,ids:[y.id],names:[y.name],weights:[y.weight||0==y.weight?y.weight:-1]}):u[le]={feature_id:K.id,feature_name:ne,constraintType:n,ids:[...u[le].ids,y.id],names:[...u[le].names,y.name],weights:[...u[le].weights,y.weight||0==y.weight?y.weight:-1]}})});const f=u.filter(y=>y.ids.length>=2),h=l.sort((y,b)=>y.name>b.name?1:y.name==b.name?0:-1);return this.dbService.add(i,{name:a,contraintType:n,feature:s,nodes:l,nodesSorted:h,links:f}),{nodes:l,nodesSorted:h,links:f}}))}))),Ad()):this.dbService.getAll(i).pipe(xt(o=>({nodes:o.nodes,nodesSorted:o.nodesSorted,links:o.links}))),Ad()))}extractHierarchies(n,i){const r="hierarchies",o=i.sort((l,c)=>l.name>c.name?1:l.name==c.name?0:-1),s=this.getHierarchy(o),a=this.groupHierarchyByNames(s);this.dbService.count(r).subscribe(l=>{0===l&&this.dbService.add(r,{constraintType:n,hierarchy:s.hierarchy,groupedHierarchy:a.hierarchy})})}groupHierarchyByNames(n){const i=[];return n.hierarchy.forEach((r,o)=>{i[o]=[],r.forEach((s,a)=>{if(a>0&&r[a-1].name==s.name&&1==Math.abs(s.i-r[a-1].i)){const l=i[o].length-1;i[o][l].indices.push(s.i),i[o][l].ids.push(s.id),i[o][l].weights.push(s.weight)}else i[o].push({name:s.name,hierarchy:s.hierarchy,level:o,indices:[s.i],ids:[s.id],weights:[s.weight]})})}),{hierarchy:i}}getHierarchy(n){const i=[];return n.forEach((r,o)=>{r.hierarchy.forEach((s,a)=>{i[a]||(i[a]=[]),i[a].push({name:s,hierarchy:r.hierarchy.slice(0,a+1),i:o,id:r.id,weight:r.weight})})}),{hierarchy:i}}getRadialHypergraphData(n,i){return Hd(this.getNodesAndLinks(n,i),this.getGroupedHierarchy(n)).pipe(xt(r=>({graph:r[0],hierarchy:r[1].hierarchy,feature:i})))}getGroupedHierarchy(n){return this.dbService.getByKey("hierarchies","constraintType",n).pipe(xt(i=>{const r=this._filteredHypergraphSet.getValue();if(r){const o=this.getHierarchy(r);return this.groupHierarchyByNames(o)}return{hierarchy:i.groupedHierarchy}}))}getNodesAndLinks(n,i){return this.dbService.getByKey("hyperlinks","name",n+"_"+i.id).pipe(xt(s=>{let l,a={nodes:null,nodesSorted:null,links:null},c=this._filteredHypergraphSet.getValue();return c&&(l=this.filterNodesAndLinks(s.nodes,s.nodesSorted,s.links,c)),a.nodes=l?l.nodes:s.nodes,a.nodesSorted=l?l.nodesSorted:s.nodesSorted,a.links=l?l.links:s.links,n==_r.SOFT&&(this._nodes_soft.next(a.nodes),this._links_soft.next(a.links)),n==_r.HARD&&(this._nodes_hard.next(a.nodes),this._links_hard.next(a.links)),a}))}filterNodesAndLinks(n,i,r,o){let s=n.filter(c=>o.some(u=>u.id==c.id)),a=i.filter(c=>o.some(u=>u.id==c.id)),l=r.map(c=>({...c,ids:c.ids.filter(u=>o.some(d=>u==d.id))}));return l=l.filter(c=>c.ids.length>=2),{nodes:s,nodesSorted:a,links:l}}}return e.\u0275fac=function(n){return new(n||e)(qe(CL),qe($S),qe(j$e))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),W$e=(()=>{class e{constructor(n){this.knowledgeBaseService=n,this.subscriptions=[];let i=this.knowledgeBaseService.nodes_soft.subscribe(o=>this.nodes=o),r=this.knowledgeBaseService.links_soft.subscribe(o=>this.links=o);this.subscriptions.push(i),this.subscriptions.push(r)}ngOnInit(){}ngOnDestroy(){this.subscriptions.forEach(n=>{n&&n.unsubscribe()})}draw(){this.hypergraphData={nodes:this.nodes,links:this.links}}}return e.\u0275fac=function(n){return new(n||e)(Pe(xL))},e.\u0275cmp=ir({type:e,selectors:[["app-model"]],viewQuery:function(n,i){if(1&n&&br(KF,5),2&n){let r;ii(r=ri())&&(i.hypergraph=r.first)}},decls:5,vars:1,consts:[[3,"data"],["type","button",3,"click"]],template:function(n,i){1&n&&(Ve(0,"p"),At(1,"explorer works!"),Ge(),Un(2,"app-hypergraph",0),Ve(3,"button",1),fn("click",function(){return i.draw()}),At(4,"Draw hyperlink graph"),Ge()),2&n&&(Ye(2),it("data",i.hypergraphData))},dependencies:[KF],styles:[".link{fill:none;stroke:#bbb}  .node circle{pointer-events:all;stroke:#000;stroke-width:1px}"]}),e})();var EL=Me(682),_g=(()=>(function(e){e.program="program",e.statement="statement",e.query="query",e.fact="fact",e.rule="rule",e.integrity_constraint="integrity_constraint",e.comment="comment",e.head="head",e.bodies="bodies",e.body="body",e.disjunction="disjunction",e.choice="choice",e.choice_elements="choice_elements",e.choice_element="choice_element",e.aggregate="aggregate",e.aggregate_elements="aggregate_elements",e.aggregate_element="aggregate_element",e.aggregate_function="aggregate_function",e.aggreagte_count_function="aggreagte_count_function",e.weight_at_level="weight_at_level",e.naf_literals="naf_literals",e.naf_literal="naf_literal",e.classical_literal="classical_literal",e.builtin_atom="builtin_atom",e.binop="binop",e.terms="terms",e.term_op_repeat="term_op_repeat",e.term="term",e.basic_terms="basic_terms",e.basic_term="basic_term",e.ground_term="ground_term",e.variable_term="variable_term",e.arithop="arithop",e.NUMBER="NUMBER",e.SYMBOLIC_WITHOUT_STAR="SYMBOLIC_WITHOUT_STAR",e.SYMBOLIC_CONSTANT="SYMBOLIC_CONSTANT",e.UNDERLINE="UNDERLINE",e.DOUBLE_QUOTE="DOUBLE_QUOTE",e.ID="ID",e.VARIABLE="VARIABLE",e.STRING_CONTENT="STRING_CONTENT",e.STRING="STRING",e.HEXDIG="HEXDIG",e.ANONYMOUS_VARIABLE="ANONYMOUS_VARIABLE",e.DOT="DOT",e.COMMA="COMMA",e.QUERY_MARK="QUERY_MARK",e.COLON="COLON",e.SEMICOLON="SEMICOLON",e.OR="OR",e.NAF="NAF",e.CONS="CONS",e.WCONS="WCONS",e.PLUS="PLUS",e.MINUS="MINUS",e.TIMES="TIMES",e.DIV="DIV",e.AT="AT",e.PAREN_OPEN="PAREN_OPEN",e.PAREN_CLOSE="PAREN_CLOSE",e.SQUARE_OPEN="SQUARE_OPEN",e.SQUARE_CLOSE="SQUARE_CLOSE",e.CURLY_OPEN="CURLY_OPEN",e.CURLY_CLOSE="CURLY_CLOSE",e.EQUAL="EQUAL",e.UNEQUAL="UNEQUAL",e.LESS="LESS",e.GREATER="GREATER",e.LESS_OR_EQ="LESS_OR_EQ",e.GREATER_OR_EQ="GREATER_OR_EQ",e.AGGREGATE_COUNT="AGGREGATE_COUNT",e.AGGREGATE_MAX="AGGREGATE_MAX",e.AGGREGATE_MIN="AGGREGATE_MIN",e.AGGREGATE_SUM="AGGREGATE_SUM",e.FALSE="FALSE",e.TRUE="TRUE",e.COMMENT="COMMENT",e.MULTI_LINE_COMMENT="MULTI_LINE_COMMENT",e.NL="NL",e.WS="WS"}(_g||(_g={})),_g))(),BS=(()=>(function(e){e.VARIABLE="variables",e.IDENTIFIER="identifiers",e.NAFLITERALS="nafliterals"}(BS||(BS={})),BS))();var G$e=Me(789),q$e=Me.n(G$e);let JZ=(()=>{class e{constructor(){this.REGEX=/(\w+)\(([\w\.\/]+)(,([\w\.]+))?\)/,this.VEGA="https://vega.github.io/schema/vega-lite/v4.json"}asp2vl(n){let i="",r="data/cars.json";const o={};for(const a of n){const l=a.replace(/\"/g,""),c=a.trim().startsWith(":-"),[u,d,f,h,y]=this.REGEX.exec(l);"mark"===d?i=f:"data"===d?r=f:"soft"!==d&&(o[f]||(o[f]={}),o[f][d]=y||!c)}const s={};for(const a of Object.keys(o)){const l=o[a];"quantitative"===l.type&&void 0===l.zero&&void 0===l.bin&&(l.zero=!1);const c={...l.log?{type:"log"}:{},...void 0===l.zero?{}:l.zero?{zero:!0}:{zero:!1}};s[l.channel]={type:l.type,...l.aggregate?{aggregate:l.aggregate}:{},...l.field?{field:l.field}:{},...l.stack?{stack:l.stack}:{},...void 0!==l.bin?10==+l.bin?{bin:!0}:{bin:{maxbins:+l.bin}}:{},...Object.keys(c).length?{scale:c}:{}}}return{$schema:this.VEGA,data:{url:`${r}`},mark:i,encoding:s}}vl2asp(n){const i=[`mark(${n.mark}).`];"data"in n&&"url"in n.data&&i.push(`data("${n.data.url}").`);const r=n.encoding||{};let o=0;for(const s of Object.keys(r)){const a="e"+o++;i.push(`encoding(${a}).`),i.push(`channel(${a},${s}).`);let l=null,c=null,u=null;for(const d of Object.keys(r[s])){const f=r[s][d];"type"===d&&(l=f),"bin"===d&&(u=f),"scale"===d?("zero"in f&&(c=f.zero,i.push(f.zero?`zero(${a}).`:`:- zero(${a}).`)),"log"in f&&i.push(f.log?`log(${a}).`:`:-log(${a}).`)):"bin"===d?i.push(f.maxbins?`${d}(${a},${f.maxbins}).`:`${d}(${a},10).`):"field"===d?i.push(`${d}(${a},"${f}").`):"bin"!==d&&i.push(`${d}(${a},${f}).`)}"quantitative"===l&&null===c&&null===u&&i.push(`zero(${a}).`)}return i}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Y$e=/(soft\(\w+).*?\)/;let X$e=(()=>{class e{constructor(n){this.aspVlMapperService=n}getModels(n,i){return(n.Call||[]).reduce((r,o)=>(o.Witnesses.forEach(s=>{const a=s.Value,l=s.Costs,u=a.filter(d=>d.startsWith("soft(")).map(d=>{const f=Y$e.exec(d);if(!f)throw Error(`invalid violation: ${d}`);const h=f[1],y=i.find(b=>b.asp.startsWith(h));if(!y)throw Error(`${h} not found!`);return{...y,witness:d}});r.push({costs:l,facts:a,violations:u})}),r),[])}models2vl(n){return n.map(i=>this.aspVlMapperService.asp2vl(i.facts))}}return e.\u0275fac=function(n){return new(n||e)(qe(JZ))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),K$e=(()=>{class e{constructor(n,i,r){this.modelService=n,this.parserService=i,this.aspVlMapperService=r,this.initialized=!1,this.stdout="",this._solutionSet=new wr(null),this.urlToBinary="assets/binaries",this.setup()}get solutionSet(){return this._solutionSet}setup(){"/"!==this.urlToBinary.substr(this.urlToBinary.length-1)&&(this.urlToBinary+="/");const n=this,i={locateFile:r=>`${this.urlToBinary}${r}`,setStatus:r=>console.log,print(r){n.stdout+=r},totalDependencies:0,monitorRunDependencies(r){i.totalDependencies=Math.max(i.totalDependencies,r),i.setStatus(r?"Preparing... ("+(i.totalDependencies-r)+"/"+i.totalDependencies+")":"All downloads complete.")},printErr(r){r&&i.setStatus("Received output on stderr.")}};this.Module=i,this.schema=null,this.hard=qZ(FS).map(r=>({...r,constraintType:r.type})),this.soft=qZ(LS,wL).map(r=>({...r,constraintType:r.type})),this.constraints=Q}init(){var n=this;return Pr(function*(){n.Module.setStatus("Downloading..."),yield n.Module.onRuntimeInitialized,n.initialized=!0,q$e()(n.Module)})()}solve(n,i={}){if(!this.initialized)throw Error("Draco is not initialized. Call `init() first.`");this.Module.setStatus("Running Draco Query..."),n+=this.getDataDeclaration();const o=i.constraints||Object.keys(this.constraints).filter(f=>!("SOFT"===f||"HARD"===f||"WEIGHTS"===f));i.relaxHard&&-1!==o.indexOf("HARD_INTEGRITY")&&o.splice(o.indexOf("HARD_INTEGRITY"),1),n+=o.map(f=>this.constraints[f]).join("\n\n");const s=YZ(this.soft);n+=YZ(this.hard).definitions+"\n\n",n+=s.definitions+"\n\n"+s.weights+"\n\n"+s.assigns;const l=["--outf=2","--opt-mode=OptN","--quiet=1","--project",void 0===i.models?1:i.models].concat((i.weights||[]).map(f=>`-c ${f.name}=${f.value}`)).join(" ");this.stdout="",this.Module.ccall("run","number",["string","string"],[n,l]);const c=JSON.parse(this.stdout);if("UNSATISFIABLE"===c.Result)return console.debug("UNSATISFIABLE"),console.debug(c),null;const u=this.modelService.getModels(c,this.soft.concat(this.hard));if(u.length>(i.models||1))throw new Error("Too many models.");const d=this.modelService.models2vl(u);return this.Module.setStatus(""),this._solutionSet.next({models:u,programs:o,specs:d,result:c}),this._solutionSet}getSchema(){return this.schema}prepareData(n){this.schema=function N$e(e){const t=I$e()(e),n=L$e().summary(t),i={};return n.forEach(r=>{const o=r.field;delete r.field,i[o]=r}),{stats:i,size:e.length}}(n)}updateAsp(n){this.constraints={...this.constraints,...n}}getConstraintSet(){return{soft:this.soft,hard:this.hard}}setConstraintSet(n){this.hard=n.hard,this.soft=n.soft}getDataDeclaration(){return this.schema?function $$e(e){if(!e)throw Error("No data has been prepared");const t=e.stats,n=[`num_rows(${e.size}).\n`];return Object.keys(t).forEach((i,r)=>{const o=`"${i}"`,s=t[i];n.push(`fieldtype(${o},${s.type}).\ncardinality(${o}, ${s.distinct}).`)}),n}(this.schema).join("\n"):""}vl2asp(n){return this.aspVlMapperService.vl2asp(n)}}return e.\u0275fac=function(n){return new(n||e)(qe(X$e),qe(CL),qe(JZ))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),eQ=(()=>{class e{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(Pe(Sl),Pe(Ii))},e.\u0275dir=nn({type:e}),e})(),yg=(()=>{class e extends eQ{}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Eo(e)))(i||e)}}(),e.\u0275dir=nn({type:e,features:[qn]}),e})();const vc=new bt("NgValueAccessor"),Q$e={provide:vc,useExisting:$i(()=>Tw),multi:!0},e3e=new bt("CompositionEventMode");let Tw=(()=>{class e extends eQ{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function J$e(){const e=mu()?mu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(Pe(Sl),Pe(Ii),Pe(e3e,8))},e.\u0275dir=nn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){1&n&&fn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[zi([Q$e]),qn]}),e})();function ch(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function nQ(e){return null!=e&&"number"==typeof e.length}const Qo=new bt("NgValidators"),uh=new bt("NgAsyncValidators"),n3e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class iQ{static min(t){return function rQ(e){return t=>{if(ch(t.value)||ch(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(t)}static max(t){return function oQ(e){return t=>{if(ch(t.value)||ch(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(t)}static required(t){return function sQ(e){return ch(e.value)?{required:!0}:null}(t)}static requiredTrue(t){return function aQ(e){return!0===e.value?null:{required:!0}}(t)}static email(t){return function lQ(e){return ch(e.value)||n3e.test(e.value)?null:{email:!0}}(t)}static minLength(t){return function cQ(e){return t=>ch(t.value)||!nQ(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function uQ(e){return t=>nQ(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static pattern(t){return function dQ(e){if(!e)return zS;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(ch(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return _Q(t)}static composeAsync(t){return yQ(t)}}function zS(e){return null}function fQ(e){return null!=e}function hQ(e){return p0(e)?J(e):e}function pQ(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function gQ(e,t){return t.map(n=>n(e))}function mQ(e){return e.map(t=>function i3e(e){return!e.validate}(t)?t:n=>t.validate(n))}function _Q(e){if(!e)return null;const t=e.filter(fQ);return 0==t.length?null:function(n){return pQ(gQ(n,t))}}function SL(e){return null!=e?_Q(mQ(e)):null}function yQ(e){if(!e)return null;const t=e.filter(fQ);return 0==t.length?null:function(n){return Hd(gQ(n,t).map(hQ)).pipe(xt(pQ))}}function kL(e){return null!=e?yQ(mQ(e)):null}function vQ(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function bQ(e){return e._rawValidators}function wQ(e){return e._rawAsyncValidators}function AL(e){return e?Array.isArray(e)?e:[e]:[]}function HS(e,t){return Array.isArray(e)?e.includes(t):e===t}function CQ(e,t){const n=AL(t);return AL(e).forEach(r=>{HS(n,r)||n.push(r)}),n}function MQ(e,t){return AL(t).filter(n=>!HS(e,n))}class xQ{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=SL(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=kL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class Ys extends xQ{get formDirective(){return null}get path(){return null}}class Mu extends xQ{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let OL=(()=>{class e extends class EQ{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(Pe(Mu,2))},e.\u0275dir=nn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){2&n&&po("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[qn]}),e})();const Pw="VALID",US="INVALID",Ty="PENDING",Rw="DISABLED";function RL(e){return(jS(e)?e.validators:e)||null}function kQ(e){return Array.isArray(e)?SL(e):e||null}function IL(e,t){return(jS(t)?t.asyncValidators:e)||null}function AQ(e){return Array.isArray(e)?kL(e):e||null}function jS(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class TQ{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=kQ(this._rawValidators),this._composedAsyncValidatorFn=AQ(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Pw}get invalid(){return this.status===US}get pending(){return this.status==Ty}get disabled(){return this.status===Rw}get enabled(){return this.status!==Rw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=kQ(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=AQ(t)}addValidators(t){this.setValidators(CQ(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(CQ(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(MQ(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(MQ(t,this._rawAsyncValidators))}hasValidator(t){return HS(this._rawValidators,t)}hasAsyncValidator(t){return HS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ty,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Rw,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Pw,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pw||this.status===Ty)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rw:Pw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ty,this._hasOwnPendingAsyncValidator=!0;const n=hQ(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Hn,this.statusChanges=new Hn}_calculateStatus(){return this._allControlsDisabled()?Rw:this.errors?US:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ty)?Ty:this._anyControlsHaveStatus(US)?US:Pw}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){jS(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class FL extends TQ{constructor(t,n,i){super(RL(n),IL(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){(function DQ(e,t,n){e._forEachChild((i,r)=>{if(void 0===n[r])throw new at(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function OQ(e,t,n){const i=e.controls;if(!(t?Object.keys(i):i).length)throw new at(1e3,"");if(!i[n])throw new at(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function Iw(e,t){LL(e,t),t.valueAccessor.writeValue(e.value),e.disabled&&t.valueAccessor.setDisabledState?.(!0),function h3e(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&PQ(e,t)})}(e,t),function g3e(e,t){const n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function p3e(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&PQ(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function f3e(e,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function GS(e,t,n=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),YS(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function qS(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function LL(e,t){const n=bQ(e);null!==t.validator?e.setValidators(vQ(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const i=wQ(e);null!==t.asyncValidator?e.setAsyncValidators(vQ(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const r=()=>e.updateValueAndValidity();qS(t._rawValidators,r),qS(t._rawAsyncValidators,r)}function YS(e,t){let n=!1;if(null!==e){if(null!==t.validator){const r=bQ(e);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.validator);o.length!==r.length&&(n=!0,e.setValidators(o))}}if(null!==t.asyncValidator){const r=wQ(e);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(n=!0,e.setAsyncValidators(o))}}}const i=()=>{};return qS(t._rawValidators,i),qS(t._rawAsyncValidators,i),n}function PQ(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function RQ(e,t){LL(e,t)}function FQ(e,t){e._syncPendingControls(),t.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const b3e={provide:Ys,useExisting:$i(()=>Lw)},Fw=(()=>Promise.resolve())();let Lw=(()=>{class e extends Ys{constructor(n,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Hn,this.form=new FL({},SL(n),kL(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Fw.then(()=>{const i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),Iw(n.control,n),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Fw.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Fw.then(()=>{const i=this._findContainer(n.path),r=new FL({});RQ(r,n),i.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Fw.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){Fw.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,FQ(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return e.\u0275fac=function(n){return new(n||e)(Pe(Qo,10),Pe(uh,10))},e.\u0275dir=nn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,i){1&n&&fn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zi([b3e]),qn]}),e})();function LQ(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function NQ(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const $Q=class extends TQ{constructor(t=null,n,i){super(RL(n),IL(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jS(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=NQ(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){LQ(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){LQ(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){NQ(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},M3e={provide:Mu,useExisting:$i(()=>XS)},HQ=(()=>Promise.resolve())();let XS=(()=>{class e extends Mu{constructor(n,i,r,o,s){super(),this._changeDetectorRef=s,this.control=new $Q,this._registered=!1,this.update=new Hn,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function $L(e,t){if(!t)return null;let n,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===Tw?n=o:function y3e(e){return Object.getPrototypeOf(e.constructor)===yg}(o)?i=o:r=o}),r||i||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function NL(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Iw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){HQ.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const i=n.isDisabled.currentValue,r=0!==i&&function Ed(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(i);HQ.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function WS(e,t){return[...t.path,e]}(n,this._parent):[n]}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ys,9),Pe(Qo,10),Pe(uh,10),Pe(vc,10),Pe(Al,8))},e.\u0275dir=nn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zi([M3e]),qn,_t]}),e})();const E3e={provide:vc,useExisting:$i(()=>BL),multi:!0};let BL=(()=>{class e extends yg{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=i=>{n(""==i?null:parseFloat(i))}}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Eo(e)))(i||e)}}(),e.\u0275dir=nn({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,i){1&n&&fn("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[zi([E3e]),qn]}),e})(),VQ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})();const D3e={provide:Ys,useExisting:$i(()=>Nw)};let Nw=(()=>{class e extends Ys{constructor(n,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Hn,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(YS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const i=this.form.get(n.path);return Iw(i,n),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){GS(n.control||null,n,!1),function v3e(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,FQ(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const i=n.control,r=this.form.get(n.path);i!==r&&(GS(i||null,n),(e=>e instanceof $Q)(r)&&(Iw(r,n),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const i=this.form.get(n.path);RQ(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const i=this.form.get(n.path);i&&function m3e(e,t){return YS(e,t)}(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LL(this.form,this),this._oldForm&&YS(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(n){return new(n||e)(Pe(Qo,10),Pe(uh,10))},e.\u0275dir=nn({type:e,selectors:[["","formGroup",""]],hostBindings:function(n,i){1&n&&fn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zi([D3e]),qn,_t]}),e})(),Y3e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[VQ]}),e})(),oJ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[Y3e]}),e})();const K3e=["connectionContainer"],Z3e=["inputContainer"],Q3e=["label"];function J3e(e,t){1&e&&(f0(0),Ve(1,"div",14),Un(2,"div",15)(3,"div",16)(4,"div",17),Ge(),Ve(5,"div",18),Un(6,"div",15)(7,"div",16)(8,"div",17),Ge(),h0())}function eBe(e,t){if(1&e){const n=Xa();Ve(0,"div",19),fn("cdkObserveContent",function(){return lo(n),co(on().updateOutlineGap())}),fs(1,1),Ge()}2&e&&it("cdkObserveContentDisabled","outline"!=on().appearance)}function tBe(e,t){if(1&e&&(f0(0),fs(1,2),Ve(2,"span"),At(3),Ge(),h0()),2&e){const n=on(2);Ye(3),Fi(n._control.placeholder)}}function nBe(e,t){1&e&&fs(0,3,["*ngSwitchCase","true"])}function iBe(e,t){1&e&&(Ve(0,"span",23),At(1," *"),Ge())}function rBe(e,t){if(1&e){const n=Xa();Ve(0,"label",20,21),fn("cdkObserveContent",function(){return lo(n),co(on().updateOutlineGap())}),tn(2,tBe,4,1,"ng-container",12),tn(3,nBe,1,0,"ng-content",12),tn(4,iBe,2,0,"span",22),Ge()}if(2&e){const n=on();po("mat-empty",n._control.empty&&!n._shouldAlwaysFloat())("mat-form-field-empty",n._control.empty&&!n._shouldAlwaysFloat())("mat-accent","accent"==n.color)("mat-warn","warn"==n.color),it("cdkObserveContentDisabled","outline"!=n.appearance)("id",n._labelId)("ngSwitch",n._hasLabel()),er("for",n._control.id)("aria-owns",n._control.id),Ye(2),it("ngSwitchCase",!1),Ye(1),it("ngSwitchCase",!0),Ye(1),it("ngIf",!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}}function oBe(e,t){1&e&&(Ve(0,"div",24),fs(1,4),Ge())}function sBe(e,t){if(1&e&&(Ve(0,"div",25),Un(1,"span",26),Ge()),2&e){const n=on();Ye(1),po("mat-accent","accent"==n.color)("mat-warn","warn"==n.color)}}function aBe(e,t){1&e&&(Ve(0,"div"),fs(1,5),Ge()),2&e&&it("@transitionMessages",on()._subscriptAnimationState)}function lBe(e,t){if(1&e&&(Ve(0,"div",30),At(1),Ge()),2&e){const n=on(2);it("id",n._hintLabelId),Ye(1),Fi(n.hintLabel)}}function cBe(e,t){if(1&e&&(Ve(0,"div",27),tn(1,lBe,2,2,"div",28),fs(2,6),Un(3,"div",29),fs(4,7),Ge()),2&e){const n=on();it("@transitionMessages",n._subscriptAnimationState),Ye(1),it("ngIf",n.hintLabel)}}const uBe=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],dBe=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],fBe=new bt("MatError"),hBe={transitionMessages:Ow("transitionMessages",[Ud("enter",mo({opacity:1,transform:"translateY(0%)"})),jd("void => enter",[mo({opacity:0,transform:"translateY(-5px)"}),lh("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let KS=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=nn({type:e}),e})();const pBe=new bt("MatHint");let ZS=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=nn({type:e,selectors:[["mat-label"]]}),e})(),gBe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=nn({type:e,selectors:[["mat-placeholder"]]}),e})();const mBe=new bt("MatPrefix"),sJ=new bt("MatSuffix");let aJ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=nn({type:e,selectors:[["","matSuffix",""]],features:[zi([{provide:sJ,useExisting:e}])]}),e})(),lJ=0;const yBe=hw(class{constructor(e){this._elementRef=e}},"primary"),vBe=new bt("MAT_FORM_FIELD_DEFAULT_OPTIONS"),GL=new bt("MatFormField");let uJ=(()=>{class e extends yBe{constructor(n,i,r,o,s,a,l){super(n),this._changeDetectorRef=i,this._dir=r,this._defaults=o,this._platform=s,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Yt,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+lJ++,this._labelId="mat-form-field-label-"+lJ++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=o?.appearance||"legacy",o&&(this._hideRequiredMarker=Boolean(o.hideRequiredMarker),o.color&&(this.color=this.defaultColor=o.color))}get appearance(){return this._appearance}set appearance(n){const i=this._appearance;this._appearance=n||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==n&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=Nr(n)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(n){this._explicitFormFieldControl=n}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${n.controlType}`),n.stateChanges.pipe(Qp(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe($r(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe($r(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Pi(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Qp(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Qp(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe($r(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(n){const i=this._control?this._control.ngControl:null;return i&&i[n]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,rS(this._label.nativeElement,"transitionend").pipe(Us(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&n.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,r=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;i?n.push(i.id):this._hintLabel&&n.push(this._hintLabelId),r&&n.push(r.id)}else this._errorChildren&&n.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(n)}}_validateControlChild(){}updateOutlineGap(){const n=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!n||!n.children.length||!n.textContent.trim()){const u=i.querySelectorAll(`${r}, ${o}`);for(let d=0;d<u.length;d++)u[d].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let s=0,a=0;const l=i.querySelectorAll(r),c=i.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const u=i.getBoundingClientRect();if(0===u.width&&0===u.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const d=this._getStartEnd(u),f=n.children,h=this._getStartEnd(f[0].getBoundingClientRect());let y=0;for(let b=0;b<f.length;b++)y+=f[b].offsetWidth;s=Math.abs(h-d)-5,a=y>0?.75*y+10:0}for(let u=0;u<l.length;u++)l[u].style.width=`${s}px`;for(let u=0;u<c.length;u++)c[u].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(n){return this._dir&&"rtl"===this._dir.value?n.right:n.left}_isAttachedToDOM(){const n=this._elementRef.nativeElement;if(n.getRootNode){const i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(Al),Pe(dw,8),Pe(vBe,8),Pe(_s),Pe(jn),Pe(uc,8))},e.\u0275cmp=ir({type:e,selectors:[["mat-form-field"]],contentQueries:function(n,i,r){if(1&n&&(Hs(r,KS,5),Hs(r,KS,7),Hs(r,ZS,5),Hs(r,ZS,7),Hs(r,gBe,5),Hs(r,fBe,5),Hs(r,pBe,5),Hs(r,mBe,5),Hs(r,sJ,5)),2&n){let o;ii(o=ri())&&(i._controlNonStatic=o.first),ii(o=ri())&&(i._controlStatic=o.first),ii(o=ri())&&(i._labelChildNonStatic=o.first),ii(o=ri())&&(i._labelChildStatic=o.first),ii(o=ri())&&(i._placeholderChild=o.first),ii(o=ri())&&(i._errorChildren=o),ii(o=ri())&&(i._hintChildren=o),ii(o=ri())&&(i._prefixChildren=o),ii(o=ri())&&(i._suffixChildren=o)}},viewQuery:function(n,i){if(1&n&&(br(K3e,7),br(Z3e,5),br(Q3e,5)),2&n){let r;ii(r=ri())&&(i._connectionContainerRef=r.first),ii(r=ri())&&(i._inputContainerRef=r.first),ii(r=ri())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(n,i){2&n&&po("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[zi([{provide:GL,useExisting:e}]),qn],ngContentSelectors:dBe,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(n,i){1&n&&(qf(uBe),Ve(0,"div",0)(1,"div",1,2),fn("click",function(o){return i._control.onContainerClick&&i._control.onContainerClick(o)}),tn(3,J3e,9,0,"ng-container",3),tn(4,eBe,2,1,"div",4),Ve(5,"div",5,6),fs(7),Ve(8,"span",7),tn(9,rBe,5,16,"label",8),Ge()(),tn(10,oBe,2,0,"div",9),Ge(),tn(11,sBe,2,4,"div",10),Ve(12,"div",11),tn(13,aBe,2,1,"div",12),tn(14,cBe,5,2,"div",13),Ge()()),2&n&&(Ye(3),it("ngIf","outline"==i.appearance),Ye(1),it("ngIf",i._prefixChildren.length),Ye(5),it("ngIf",i._hasFloatingLabel()),Ye(1),it("ngIf",i._suffixChildren.length),Ye(1),it("ngIf","outline"!=i.appearance),Ye(1),it("ngSwitch",i._getDisplayedMessages()),Ye(1),it("ngSwitchCase","error"),Ye(1),it("ngSwitchCase","hint"))},dependencies:[_u,iy,qx,VX],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[hBe.transitionMessages]},changeDetection:0}),e})(),qL=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fa,mr,dS,mr]}),e})();const dJ=Cy({passive:!0});let bBe=(()=>{class e{constructor(n,i){this._platform=n,this._ngZone=i,this._monitoredElements=new Map}monitor(n){if(!this._platform.isBrowser)return la;const i=$d(n),r=this._monitoredElements.get(i);if(r)return r.subject;const o=new Yt,s="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(s)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1}))):(i.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,dJ),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:o,unlisten:()=>{i.removeEventListener("animationstart",a,dJ)}}),o}stopMonitoring(n){const i=$d(n),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((n,i)=>this.stopMonitoring(i))}}return e.\u0275fac=function(n){return new(n||e)(qe(_s),qe(jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fJ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})();const wBe=new bt("MAT_INPUT_VALUE_ACCESSOR"),CBe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let MBe=0;const xBe=sK(class{constructor(e,t,n,i){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i,this.stateChanges=new Yt}});let hJ=(()=>{class e extends xBe{constructor(n,i,r,o,s,a,l,c,u,d){super(a,o,s,r),this._elementRef=n,this._platform=i,this._autofillMonitor=c,this._formField=d,this._uid="mat-input-"+MBe++,this.focused=!1,this.stateChanges=new Yt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(y=>kX().has(y)),this._iOSKeyupListener=y=>{const b=y.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const f=this._elementRef.nativeElement,h=f.nodeName.toLowerCase();this._inputValueAccessor=l||f,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{n.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(n){this._disabled=Nr(n),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(n){this._id=n||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(iQ.required)??!1}set required(n){this._required=Nr(n)}get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&kX().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(n){n!==this.value&&(this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=Nr(n)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}_focusChanged(n){n!==this.focused&&(this.focused=n,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const n=this._formField,i=n&&"legacy"===n.appearance&&!n._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_validateType(){CBe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const n=this._elementRef.nativeElement,i=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(_s),Pe(Mu,10),Pe(Lw,8),Pe(Nw,8),Pe(WF),Pe(wBe,10),Pe(bBe),Pe(jn),Pe(GL,8))},e.\u0275dir=nn({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(n,i){1&n&&fn("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&n&&(m0("disabled",i.disabled)("required",i.required),er("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),po("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[zi([{provide:KS,useExisting:e}]),qn,_t]}),e})(),EBe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({providers:[WF],imports:[fJ,qL,mr,fJ,qL]}),e})();const SBe=["mat-button",""],kBe=["*"],OBe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],DBe=hw(UF(jF(class{constructor(e){this._elementRef=e}})));let pJ=(()=>{class e extends DBe{constructor(n,i,r){super(n),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of OBe)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);n.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(n,i){n?this._focusMonitor.focusVia(this._getHostElement(),n,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...n){return n.some(i=>this._getHostElement().hasAttribute(i))}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(HF),Pe(uc,8))},e.\u0275cmp=ir({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(n,i){if(1&n&&br(gw,5),2&n){let r;ii(r=ri())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(n,i){2&n&&(er("disabled",i.disabled||null),po("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[qn],attrs:SBe,ngContentSelectors:kBe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,i){1&n&&(qf(),Ve(0,"span",0),fs(1),Ge(),Un(2,"span",1)(3,"span",2)),2&n&&(Ye(2),po("mat-button-ripple-round",i.isRoundButton||i.isIconButton),it("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[gw],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),e})(),TBe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[gS,mr,mr]}),e})();class PBe{constructor(t=!1,n,i=!0,r){this._multiple=t,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Yt,n&&n.length&&(t?n.forEach(o=>this._markSelected(o)):this._markSelected(n[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));const n=this._hasQueuedChanges();return this._emitChangeEvent(),n}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));const n=this._hasQueuedChanges();return this._emitChangeEvent(),n}setSelection(...t){this._verifyValueAssignment(t);const n=this.selected,i=new Set(t);t.forEach(o=>this._markSelected(o)),n.filter(o=>!i.has(o)).forEach(o=>this._unmarkSelected(o));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const n=this._hasQueuedChanges();return t&&this._emitChangeEvent(),n}isSelected(t){if(this.compareWith){for(const n of this._selection)if(this.compareWith(n,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const RBe=["trigger"],IBe=["panel"];function FBe(e,t){if(1&e&&(Ve(0,"span",8),At(1),Ge()),2&e){const n=on();Ye(1),Fi(n.placeholder)}}function LBe(e,t){if(1&e&&(Ve(0,"span",12),At(1),Ge()),2&e){const n=on(2);Ye(1),Fi(n.triggerValue)}}function NBe(e,t){1&e&&fs(0,0,["*ngSwitchCase","true"])}function $Be(e,t){1&e&&(Ve(0,"span",9),tn(1,LBe,2,1,"span",10),tn(2,NBe,1,0,"ng-content",11),Ge()),2&e&&(it("ngSwitch",!!on().customTrigger),Ye(2),it("ngSwitchCase",!0))}function BBe(e,t){if(1&e){const n=Xa();Ve(0,"div",13)(1,"div",14,15),fn("@transformPanel.done",function(r){return lo(n),co(on()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return lo(n),co(on()._handleKeydown(r))}),fs(3,1),Ge()()}if(2&e){const n=on();it("@transformPanelWrap",void 0),Ye(1),q9("mat-select-panel ",n._getPanelTheme(),""),Md("transform-origin",n._transformOrigin)("font-size",n._triggerFontSize,"px"),it("ngClass",n.panelClass)("@transformPanel",n.multiple?"showing-multiple":"showing"),er("id",n.id+"-panel")("aria-multiselectable",n.multiple)("aria-label",n.ariaLabel||null)("aria-labelledby",n._getPanelAriaLabelledby())}}const zBe=[[["mat-select-trigger"]],"*"],HBe=["mat-select-trigger","*"],gJ={transformPanelWrap:Ow("transformPanelWrap",[jd("* => void",FNe("@transformPanel",[INe()],{optional:!0}))]),transformPanel:Ow("transformPanel",[Ud("void",mo({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Ud("showing",mo({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Ud("showing-multiple",mo({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),jd("void => *",lh("120ms cubic-bezier(0, 0, 0.2, 1)")),jd("* => void",lh("100ms 25ms linear",mo({opacity:0})))])};let mJ=0;const yJ=new bt("mat-select-scroll-strategy"),WBe=new bt("MAT_SELECT_CONFIG"),GBe={provide:yJ,deps:[Dy],useFactory:function jBe(e){return()=>e.scrollStrategies.reposition()}};class qBe{constructor(t,n){this.source=t,this.value=n}}const YBe=jF(oK(UF(sK(class{constructor(e,t,n,i,r){this._elementRef=e,this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new Yt}})))),XBe=new bt("MatSelectTrigger");let KBe=(()=>{class e extends YBe{constructor(n,i,r,o,s,a,l,c,u,d,f,h,y,b){super(s,o,l,c,d),this._viewportRuler=n,this._changeDetectorRef=i,this._ngZone=r,this._dir=a,this._parentFormField=u,this._liveAnnouncer=y,this._defaultOptions=b,this._panelOpen=!1,this._compareWith=(C,k)=>C===k,this._uid="mat-select-"+mJ++,this._triggerAriaLabelledBy=null,this._destroy=new Yt,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+mJ++,this._panelDoneAnimatingStream=new Yt,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=pI(()=>{const C=this.options;return C?C.changes.pipe(Qp(C),Tl(()=>Pi(...C.map(k=>k.onSelectionChange)))):this._ngZone.onStable.pipe(Us(1),Tl(()=>this.optionSelectionChanges))}),this.openedChange=new Hn,this._openedStream=this.openedChange.pipe(ha(C=>C),xt(()=>{})),this._closedStream=this.openedChange.pipe(ha(C=>!C),xt(()=>{})),this.selectionChange=new Hn,this.valueChange=new Hn,this.ngControl&&(this.ngControl.valueAccessor=this),null!=b?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=b.typeaheadDebounceInterval),this._scrollStrategyFactory=h,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(f)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(n){this._placeholder=n,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(iQ.required)??!1}set required(n){this._required=Nr(n),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(n){this._multiple=Nr(n)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(n){this._disableOptionCentering=Nr(n)}get compareWith(){return this._compareWith}set compareWith(n){this._compareWith=n,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(n){this._assignValue(n)&&this._onChange(n)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(n){this._typeaheadDebounceInterval=ih(n)}get id(){return this._id}set id(n){this._id=n||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new PBe(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(zX(),$r(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe($r(this._destroy)).subscribe(n=>{n.added.forEach(i=>i.select()),n.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Qp(null),$r(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const n=this._getTriggerAriaLabelledby(),i=this.ngControl;if(n!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=n,n?r.setAttribute("aria-labelledby",n):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(n){(n.disabled||n.userAriaDescribedBy)&&this.stateChanges.next(),n.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(n){this._assignValue(n)}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this.disabled=n,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const n=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&n.reverse(),n.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(n){this.disabled||(this.panelOpen?this._handleOpenKeydown(n):this._handleClosedKeydown(n))}_handleClosedKeydown(n){const i=n.keyCode,r=40===i||38===i||37===i||39===i,o=13===i||32===i,s=this._keyManager;if(!s.isTyping()&&o&&!My(n)||(this.multiple||n.altKey)&&r)n.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;s.onKeydown(n);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(n){const i=this._keyManager,r=n.keyCode,o=40===r||38===r,s=i.isTyping();if(o&&n.altKey)n.preventDefault(),this.close();else if(s||13!==r&&32!==r||!i.activeItem||My(n))if(!s&&this._multiple&&65===r&&n.ctrlKey){n.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(n),this._multiple&&o&&n.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else n.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Us(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(n){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&n)Array.isArray(n),n.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(n);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(n){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,n)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(n){return!!(n!==this._value||this._multiple&&Array.isArray(n))&&(this.options&&this._setSelectionByValue(n),this._value=n,!0)}_initKeyManager(){this._keyManager=new $Re(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe($r(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe($r(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const n=Pi(this.options.changes,this._destroy);this.optionSelectionChanges.pipe($r(n)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Pi(...this.options.map(i=>i._stateChanges)).pipe($r(n)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(n,i){const r=this._selectionModel.isSelected(n);null!=n.value||this._multiple?(r!==n.selected&&(n.selected?this._selectionModel.select(n):this._selectionModel.deselect(n)),i&&this._keyManager.setActiveItem(n),this.multiple&&(this._sortValues(),i&&this.focus())):(n.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(n.value)),r!==this._selectionModel.isSelected(n)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const n=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,n):n.indexOf(i)-n.indexOf(r)),this.stateChanges.next()}}_propagateChanges(n){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:n,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(n){this._elementRef.nativeElement.focus(n)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const n=this._parentFormField?.getLabelId();return this.ariaLabelledby?(n?n+" ":"")+this.ariaLabelledby:n}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const n=this._parentFormField?.getLabelId();let i=(n?n+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(n){this.openedChange.emit(n)}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return e.\u0275fac=function(n){return new(n||e)(Pe(lS),Pe(Al),Pe(jn),Pe(WF),Pe(Ii),Pe(dw,8),Pe(Lw,8),Pe(Nw,8),Pe(GL,8),Pe(Mu,10),Vf("tabindex"),Pe(yJ),Pe(KRe),Pe(WBe,8))},e.\u0275dir=nn({type:e,viewQuery:function(n,i){if(1&n&&(br(RBe,5),br(IBe,5),br(FZ,5)),2&n){let r;ii(r=ri())&&(i.trigger=r.first),ii(r=ri())&&(i.panel=r.first),ii(r=ri())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[qn,_t]}),e})(),vJ=(()=>{class e extends KBe{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(n,i,r){const o=this._getItemHeight();return Math.min(Math.max(0,o*n-i+o/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe($r(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Us(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(n){const i=hK(n,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===n&&1===i?0:function p2e(e,t,n,i){return e<n?e:e+t>n+i?Math.max(0,e-i+t):n}((n+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(n){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(n)}_getChangeEvent(n){return new qBe(this,n)}_calculateOverlayOffsetX(){const n=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),o=this.multiple?56:32;let s;if(this.multiple)s=40;else if(this.disableOptionCentering)s=16;else{let c=this._selectionModel.selected[0]||this.options.first;s=c&&c.group?32:16}r||(s*=-1);const a=0-(n.left+s-(r?o:0)),l=n.right+s-i.width+(r?0:o);a>0?s+=a+8:l>0&&(s-=l+8),this._overlayDir.offsetX=Math.round(s),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(n,i,r){const o=this._getItemHeight(),s=(o-this._triggerRect.height)/2,a=Math.floor(256/o);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?n*o:this._scrollTop===r?(n-(this._getItemCount()-a))*o+(o-(this._getItemCount()*o-256)%o):i-o/2,Math.round(-1*l-s))}_checkOverlayWithinViewport(n){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),o=this._triggerRect.top-8,s=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*i,256)-a-this._triggerRect.height;c>s?this._adjustPanelUp(c,s):a>o?this._adjustPanelDown(a,o,n):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(n,i){const r=Math.round(n-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(n,i,r){const o=Math.round(n-i);if(this._scrollTop+=o,this._offsetY+=o,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const n=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*n,256),s=i*n-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=hK(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,s),this._offsetY=this._calculateOverlayOffsetY(a,l,s),this._checkOverlayWithinViewport(s)}_getOriginBasedOnOption(){const n=this._getItemHeight(),i=(n-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+n/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Eo(e)))(i||e)}}(),e.\u0275cmp=ir({type:e,selectors:[["mat-select"]],contentQueries:function(n,i,r){if(1&n&&(Hs(r,XBe,5),Hs(r,qF,5),Hs(r,fK,5)),2&n){let o;ii(o=ri())&&(i.customTrigger=o.first),ii(o=ri())&&(i.options=o),ii(o=ri())&&(i.optionGroups=o)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(n,i){1&n&&fn("keydown",function(o){return i._handleKeydown(o)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&n&&(er("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),po("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[zi([{provide:KS,useExisting:e},{provide:dK,useExisting:e}]),qn],ngContentSelectors:HBe,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(n,i){if(1&n&&(qf(zBe),Ve(0,"div",0,1),fn("click",function(){return i.toggle()}),Ve(3,"div",2),tn(4,FBe,2,1,"span",3),tn(5,$Be,3,2,"span",4),Ge(),Ve(6,"div",5),Un(7,"div",6),Ge()(),tn(8,BBe,4,14,"ng-template",7),fn("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&n){const r=q_(1);er("aria-owns",i.panelOpen?i.id+"-panel":null),Ye(3),it("ngSwitch",i.empty),er("id",i._valueId),Ye(1),it("ngSwitchCase",!0),Ye(1),it("ngSwitchCase",!1),Ye(3),it("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},dependencies:[Zp,iy,qx,mG,FZ,IZ],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[gJ.transformPanelWrap,gJ.transformPanel]},changeDetection:0}),e})(),bJ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({providers:[GBe],imports:[fa,LZ,YF,mr,cS,qL,YF,mr]}),e})();const ZBe=["gutterEls"];function QBe(e,t){if(1&e){const n=Xa();Ve(0,"div",2,3),fn("keydown",function(r){lo(n);const o=on().index;return co(on().startKeyboardDrag(r,2*o+1,o+1))})("mousedown",function(r){lo(n);const o=on().index;return co(on().startMouseDrag(r,2*o+1,o+1))})("touchstart",function(r){lo(n);const o=on().index;return co(on().startMouseDrag(r,2*o+1,o+1))})("mouseup",function(r){lo(n);const o=on().index;return co(on().clickGutter(r,o+1))})("touchend",function(r){lo(n);const o=on().index;return co(on().clickGutter(r,o+1))}),Un(2,"div",4),Ge()}if(2&e){const n=on(),i=n.index,r=n.$implicit,o=on();Md("flex-basis",o.gutterSize,"px")("order",2*i+1),er("aria-label",o.gutterAriaLabel)("aria-orientation",o.direction)("aria-valuemin",r.minSize)("aria-valuemax",r.maxSize)("aria-valuenow",r.size)("aria-valuetext",o.getAriaAreaSizeText(r.size))}}function JBe(e,t){1&e&&tn(0,QBe,3,10,"div",1),2&e&&it("ngIf",!1===t.last)}const eze=["*"];function Bw(e){if(void 0!==e.changedTouches&&e.changedTouches.length>0)return{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};if(void 0!==e.clientX&&void 0!==e.clientY)return{x:e.clientX,y:e.clientY};if(void 0!==e.currentTarget){const t=e.currentTarget;return{x:t.offsetLeft,y:t.offsetTop}}return null}function wJ(e,t,n){return Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n}function CJ(e,t){const n=e.nativeElement.getBoundingClientRect();return"horizontal"===t?n.width:n.height}function zw(e){return"boolean"==typeof e?e:"false"!==e}function dh(e,t){return null==e?t:(e=Number(e),!isNaN(e)&&e>=0?e:t)}function MJ(e,t){if("percent"===e){const n=t.reduce((i,r)=>null!==r?i+r:i,0);return t.every(i=>null!==i)&&n>99.9&&n<100.1}if("pixel"===e)return 1===t.filter(n=>null===n).length}function JS(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.minSize?null:e.component.minSize>e.size?e.size:e.component.minSize}function ek(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.maxSize?null:e.component.maxSize<e.size?e.size:e.component.maxSize}function Ry(e,t,n,i){return t.reduce((r,o)=>{const s=function nze(e,t,n,i){return 0===n?{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:t.sizePercentAtStart,pixelRemain:0}:0===t.sizePixelAtStart&&n<0?{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:n}:"percent"===e?function ize(e,t,n){const r=(e.sizePixelAtStart+t)/n*100;if(t>0){if(null!==e.area.maxSize&&r>e.area.maxSize){const o=e.area.maxSize/100*n;return{areaSnapshot:e,pixelAbsorb:o,percentAfterAbsorption:e.area.maxSize,pixelRemain:e.sizePixelAtStart+t-o}}return{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:r>100?100:r,pixelRemain:0}}if(t<0){if(null!==e.area.minSize&&r<e.area.minSize){const o=e.area.minSize/100*n;return{areaSnapshot:e,pixelAbsorb:o,percentAfterAbsorption:e.area.minSize,pixelRemain:e.sizePixelAtStart+t-o}}return r<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:r,pixelRemain:0}}}(t,n,i):"pixel"===e?function rze(e,t,n){const i=e.sizePixelAtStart+t;return t>0?null!==e.area.maxSize&&i>e.area.maxSize?{areaSnapshot:e,pixelAbsorb:e.area.maxSize-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:i-e.area.maxSize}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0}:t<0?null!==e.area.minSize&&i<e.area.minSize?{areaSnapshot:e,pixelAbsorb:e.area.minSize+t-i,percentAfterAbsorption:-1,pixelRemain:i-e.area.minSize}:i<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(t,n):void 0}(e,o,r.remain,i);return r.list.push(s),r.remain=s.pixelRemain,r},{remain:n,list:[]})}function xJ(e,t){"percent"===e?t.areaSnapshot.area.size=t.percentAfterAbsorption:"pixel"===e&&null!==t.areaSnapshot.area.size&&(t.areaSnapshot.area.size=t.areaSnapshot.sizePixelAtStart+t.pixelAbsorb)}const oze=new bt("angular-split-global-config");let EJ=(()=>{class e{constructor(n,i,r,o,s){this.ngZone=n,this.elRef=i,this.cdRef=r,this.renderer=o,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new Hn(!1),this.dragEnd=new Hn(!1),this.gutterClick=new Hn(!1),this.gutterDblClick=new Hn(!1),this.dragProgressSubject=new Yt,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=s?Object.assign(this._config,s):this._config,Object.keys(this._config).forEach(a=>{this[a]=this._config[a]})}set direction(n){this._direction="vertical"===n?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(n){this._unit="pixel"===n?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(n){this._gutterSize=dh(n,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(n){this._gutterStep=dh(n,1)}get gutterStep(){return this._gutterStep}set restrictMove(n){this._restrictMove=zw(n)}get restrictMove(){return this._restrictMove}set useTransition(n){this._useTransition=zw(n),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(n){this._disabled=zw(n),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(n){this._dir="rtl"===n?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(n){this._gutterDblClickDuration=dh(n,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new dt(n=>this.transitionEndSubscriber=n).pipe(uS(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(n){const i={component:n,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===n.visible?(this.displayedAreas.push(i),this.build(!0,!0)):this.hiddenAreas.push(i)}removeArea(n){if(this.displayedAreas.some(i=>i.component===n)){const i=this.displayedAreas.find(r=>r.component===n);this.displayedAreas.splice(this.displayedAreas.indexOf(i),1),this.build(!0,!0)}else if(this.hiddenAreas.some(i=>i.component===n)){const i=this.hiddenAreas.find(r=>r.component===n);this.hiddenAreas.splice(this.hiddenAreas.indexOf(i),1)}}updateArea(n,i,r){!0===n.visible&&this.build(i,r)}showArea(n){const i=this.hiddenAreas.find(o=>o.component===n);if(void 0===i)return;const r=this.hiddenAreas.splice(this.hiddenAreas.indexOf(i),1);this.displayedAreas.push(...r),this.build(!0,!0)}hideArea(n){const i=this.displayedAreas.find(o=>o.component===n);if(void 0===i)return;const r=this.displayedAreas.splice(this.displayedAreas.indexOf(i),1);r.forEach(o=>{o.order=0,o.size=0}),this.hiddenAreas.push(...r),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(n=>null===n.size?"*":n.size)}setVisibleAreaSizes(n){if(n.length!==this.displayedAreas.length)return!1;const i=n.map(o=>dh(o,null));return!1!==MJ(this.unit,i)&&(this.displayedAreas.forEach((o,s)=>o.component._size=i[s]),this.build(!1,!0),!0)}build(n,i){if(this.stopDragging(),!0===n&&(this.displayedAreas.every(r=>null!==r.component.order)&&this.displayedAreas.sort((r,o)=>r.component.order-o.component.order),this.displayedAreas.forEach((r,o)=>{r.order=2*o,r.component.setStyleOrder(r.order)})),!0===i){const r=MJ(this.unit,this.displayedAreas.map(o=>o.component.size));switch(this.unit){case"percent":{const o=100/this.displayedAreas.length;this.displayedAreas.forEach(s=>{s.size=r?s.component.size:o,s.minSize=JS(s),s.maxSize=ek(s)});break}case"pixel":if(r)this.displayedAreas.forEach(o=>{o.size=o.component.size,o.minSize=JS(o),o.maxSize=ek(o)});else{const o=this.displayedAreas.filter(s=>null===s.component.size);if(0===o.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((s,a)=>{s.size=0===a?null:s.component.size,s.minSize=0===a?null:JS(s),s.maxSize=0===a?null:ek(s)});else if(o.length>1){let s=!1;this.displayedAreas.forEach(a=>{null===a.component.size?!1===s?(a.size=null,a.minSize=null,a.maxSize=null,s=!0):(a.size=100,a.minSize=null,a.maxSize=null):(a.size=a.component.size,a.minSize=JS(a),a.maxSize=ek(a))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const n=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(i=>{i.component.setStyleFlex(0,0,`calc( ${i.size}% - ${i.size/100*n}px )`,null!==i.minSize&&i.minSize===i.size,null!==i.maxSize&&i.maxSize===i.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(n=>{null===n.size?n.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?n.component.setStyleFlex(0,0,"100%",!1,!1):n.component.setStyleFlex(0,0,`${n.size}px`,null!==n.minSize&&n.minSize===n.size,null!==n.maxSize&&n.maxSize===n.size)})}clickGutter(n,i){const r=Bw(n);this.startPoint&&wJ(this.startPoint,r,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",i),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",i),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(n,i,r){if(!0===this.disabled||!0===this.isWaitingClear)return;const o=function tze(e,t){if("horizontal"===t)switch(e.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===t)switch(e.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const n=e.currentTarget,i="PageUp"===e.key||"PageDown"===e.key?500:50;let r=n.offsetLeft,o=n.offsetTop;switch(e.key){case"ArrowLeft":r-=i;break;case"ArrowRight":r+=i;break;case"ArrowUp":o-=i;break;case"ArrowDown":o+=i;break;case"PageUp":"vertical"===t?o-=i:r+=i;break;case"PageDown":"vertical"===t?o+=i:r-=i;break;default:return null}return{x:r,y:o}}(n,this.direction);null!==o&&(this.endPoint=o,this.startPoint=Bw(n),n.preventDefault(),n.stopPropagation(),this.setupForDragEvent(i,r),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(n,i,r){n.preventDefault(),n.stopPropagation(),this.startPoint=Bw(n),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(i,r),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(n,i){this.snapshot={gutterNum:i,lastSteppedOffset:0,allAreasSizePixel:CJ(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(r=>{const o={area:r,sizePixelAtStart:CJ(r.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?r.size:-1};r.order<n?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[o]:this.snapshot.areasBeforeGutter.unshift(o):r.order>n&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[o]):this.snapshot.areasAfterGutter.push(o))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((r,o)=>r+o.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(n=>n.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(n){n.preventDefault(),n.stopPropagation();const i=Bw(n);null!==this._clickTimeout&&!wJ(this.startPoint,i,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=Bw(n),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let n="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(n=-n);const i=Math.round(n/this.gutterStep)*this.gutterStep;if(i===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=i;let r=Ry(this.unit,this.snapshot.areasBeforeGutter,-i,this.snapshot.allAreasSizePixel),o=Ry(this.unit,this.snapshot.areasAfterGutter,i,this.snapshot.allAreasSizePixel);if(0!==r.remain&&0!==o.remain?Math.abs(r.remain)===Math.abs(o.remain)||(Math.abs(r.remain)>Math.abs(o.remain)?o=Ry(this.unit,this.snapshot.areasAfterGutter,i+r.remain,this.snapshot.allAreasSizePixel):r=Ry(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)):0!==r.remain?o=Ry(this.unit,this.snapshot.areasAfterGutter,i+r.remain,this.snapshot.allAreasSizePixel):0!==o.remain&&(r=Ry(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const s=[...r.list,...o.list],a=s.find(l=>0!==l.percentAfterAbsorption&&l.percentAfterAbsorption!==l.areaSnapshot.area.minSize&&l.percentAfterAbsorption!==l.areaSnapshot.area.maxSize);a&&(a.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-s.filter(l=>l!==a).reduce((l,c)=>l+c.percentAfterAbsorption,0))}r.list.forEach(s=>xJ(this.unit,s)),o.list.forEach(s=>xJ(this.unit,s)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(n){if(n&&(n.preventDefault(),n.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(i=>i.component.unlockEvents());this.dragListeners.length>0;){const i=this.dragListeners.pop();i&&i()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(n,i){const r=this.getVisibleAreaSizes();"start"===n?this.dragStart.emit({gutterNum:i,sizes:r}):"end"===n?this.dragEnd.emit({gutterNum:i,sizes:r}):"click"===n?this.gutterClick.emit({gutterNum:i,sizes:r}):"dblclick"===n?this.gutterDblClick.emit({gutterNum:i,sizes:r}):"transitionEnd"===n?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(r)):"progress"===n&&this.dragProgressSubject.next({gutterNum:i,sizes:r})}ngOnDestroy(){this.stopDragging()}collapseArea(n,i,r){const o=this.displayedAreas.find(l=>l.component===n);if(void 0===o)return;const s="right"===r?1:-1;o.sizeBeforeCollapse||(o.sizeBeforeCollapse=o.size,o.gutterBeforeCollapse=s),o.size=i;const a=this.gutterEls.find(l=>l.nativeElement.style.order===`${o.order+s}`);a&&this.renderer.addClass(a.nativeElement,"as-split-gutter-collapsed"),this.updateArea(n,!1,!1)}expandArea(n){const i=this.displayedAreas.find(o=>o.component===n);if(void 0===i||!i.sizeBeforeCollapse)return;i.size=i.sizeBeforeCollapse,i.sizeBeforeCollapse=null;const r=this.gutterEls.find(o=>o.nativeElement.style.order===`${i.order+i.gutterBeforeCollapse}`);r&&this.renderer.removeClass(r.nativeElement,"as-split-gutter-collapsed"),this.updateArea(n,!1,!1)}getAriaAreaSizeText(n){return null===n?null:n.toFixed(0)+" "+this.unit}}return e.\u0275fac=function(n){return new(n||e)(Pe(jn),Pe(Ii),Pe(Al),Pe(Sl),Pe(oze,8))},e.\u0275cmp=ir({type:e,selectors:[["as-split"]],viewQuery:function(n,i){if(1&n&&br(ZBe,5),2&n){let r;ii(r=ri())&&(i.gutterEls=r)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:eze,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(n,i){1&n&&(qf(),fs(0),tn(1,JBe,1,1,"ng-template",0)),2&n&&(Ye(1),it("ngForOf",i.displayedAreas))},dependencies:[ny,_u],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url()}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),e})(),sze=(()=>{class e{constructor(n,i,r,o){this.ngZone=n,this.elRef=i,this.renderer=r,this.split=o,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(n){this._order=dh(n,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(n){this._size=dh(n,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(n){this._minSize=dh(n,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(n){this._maxSize=dh(n,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(n){this._lockSize=zw(n),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(n){this._visible=zw(n),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",n=>{"flex-basis"===n.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(n){this.renderer.setStyle(this.elRef.nativeElement,"order",n)}setStyleFlex(n,i,r,o,s){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",n),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",i),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",r),!0===o?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===s?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const n=this.lockListeners.pop();n&&n()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(n=0,i="right"){this.split.collapseArea(this,n,i)}expand(){this.split.expandArea(this)}}return e.\u0275fac=function(n){return new(n||e)(Pe(jn),Pe(Ii),Pe(Sl),Pe(EJ))},e.\u0275dir=nn({type:e,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),e})(),aze=(()=>{class e{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:e,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:e,providers:[]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[[fa]]}),e})();const lze=["input"],cze=["label"],uze=function(e){return{enterDuration:e}},dze=["*"],fze=new bt("mat-checkbox-default-options",{providedIn:"root",factory:SJ});function SJ(){return{color:"accent",clickAction:"check-indeterminate"}}let hze=0;const kJ=SJ(),pze={provide:vc,useExisting:$i(()=>AJ),multi:!0};class gze{}const mze=oK(hw(jF(UF(class{constructor(e){this._elementRef=e}}))));let _ze=(()=>{class e extends mze{constructor(n,i,r,o,s,a,l){super(i),this._changeDetectorRef=r,this._ngZone=o,this._animationMode=a,this._options=l,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new Hn,this.indeterminateChange=new Hn,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||kJ,this.color=this.defaultColor=this._options.color||kJ.color,this.tabIndex=parseInt(s)||0,this.id=this._uniqueId=`${n}${++hze}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(n){this._required=Nr(n)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(n){const i=Nr(n);i!=this.checked&&(this._checked=i,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(n){const i=Nr(n);i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(n){const i=n!=this._indeterminate;this._indeterminate=Nr(n),i&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(n){this.checked=!!n}registerOnChange(n){this._controlValueAccessorChangeFn=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this.disabled=n}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(n){let i=this._currentCheckState,r=this._getAnimationTargetElement();if(i!==n&&r&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,n),this._currentCheckState=n,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const n=this._options?.clickAction;this.disabled||"noop"===n?!this.disabled&&"noop"===n&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==n&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(n){n.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(n,i){if("NoopAnimations"===this._animationMode)return"";switch(n){case 0:if(1===i)return this._animationClasses.uncheckedToChecked;if(3==i)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===i?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===i?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===i?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(n){const i=this._inputElement;i&&(i.nativeElement.indeterminate=n)}}return e.\u0275fac=function(n){F_()},e.\u0275dir=nn({type:e,viewQuery:function(n,i){if(1&n&&(br(lze,5),br(cze,5),br(gw,5)),2&n){let r;ii(r=ri())&&(i._inputElement=r.first),ii(r=ri())&&(i._labelElement=r.first),ii(r=ri())&&(i.ripple=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[qn]}),e})(),AJ=(()=>{class e extends _ze{constructor(n,i,r,o,s,a,l){super("mat-checkbox-",n,i,o,s,a,l),this._focusMonitor=r,this._animationClasses={uncheckedToChecked:"mat-checkbox-anim-unchecked-checked",uncheckedToIndeterminate:"mat-checkbox-anim-unchecked-indeterminate",checkedToUnchecked:"mat-checkbox-anim-checked-unchecked",checkedToIndeterminate:"mat-checkbox-anim-checked-indeterminate",indeterminateToChecked:"mat-checkbox-anim-indeterminate-checked",indeterminateToUnchecked:"mat-checkbox-anim-indeterminate-unchecked"}}_createChangeEvent(n){const i=new gze;return i.source=this,i.checked=n,i}_getAnimationTargetElement(){return this._elementRef.nativeElement}ngAfterViewInit(){super.ngAfterViewInit(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(n=>{n||this._onBlur()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onInputClick(n){n.stopPropagation(),super._handleInputClick()}focus(n,i){n?this._focusMonitor.focusVia(this._inputElement,n,i):this._inputElement.nativeElement.focus(i)}}return e.\u0275fac=function(n){return new(n||e)(Pe(Ii),Pe(Al),Pe(HF),Pe(jn),Vf("tabindex"),Pe(uc,8),Pe(fze,8))},e.\u0275cmp=ir({type:e,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(n,i){2&n&&(m0("id",i.id),er("tabindex",null)("aria-label",null)("aria-labelledby",null),po("mat-checkbox-indeterminate",i.indeterminate)("mat-checkbox-checked",i.checked)("mat-checkbox-disabled",i.disabled)("mat-checkbox-label-before","before"==i.labelPosition)("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[zi([pze]),qn],ngContentSelectors:dze,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(n,i){if(1&n&&(qf(),Ve(0,"label",0,1)(2,"span",2)(3,"input",3,4),fn("change",function(o){return i._onInteractionEvent(o)})("click",function(o){return i._onInputClick(o)}),Ge(),Ve(5,"span",5),Un(6,"span",6),Ge(),Un(7,"span",7),Ve(8,"span",8),$p(),Ve(9,"svg",9),Un(10,"path",10),Ge(),IP(),Un(11,"span",11),Ge()(),Ve(12,"span",12,13),fn("cdkObserveContent",function(){return i._onLabelTextChange()}),Ve(14,"span",14),At(15,"\xa0"),Ge(),fs(16),Ge()()),2&n){const r=q_(1),o=q_(13);er("for",i.inputId),Ye(2),po("mat-checkbox-inner-container-no-side-margin",!o.textContent||!o.textContent.trim()),Ye(1),it("id",i.inputId)("required",i.required)("checked",i.checked)("disabled",i.disabled)("tabIndex",i.tabIndex),er("value",i.value)("name",i.name)("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-checked",i._getAriaChecked())("aria-describedby",i.ariaDescribedby),Ye(2),it("matRippleTrigger",r)("matRippleDisabled",i._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",zs(19,uze,"NoopAnimations"===i._animationMode?0:150))}},dependencies:[gw,VX],styles:['@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative}.mat-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:rgba(0,0,0,0);transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:rgba(0,0,0,0)}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox-input:focus~.mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),e})(),OJ=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({}),e})(),bze=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[gS,mr,dS,OJ,mr,OJ]}),e})();var wze=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Cze=Object.prototype.hasOwnProperty;function tk(e,t){return Cze.call(e,t)}function YL(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)tk(e,r)&&i.push(r);return i}function Ja(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function XL(e){for(var i,t=0,n=e.length;t<n;){if(!((i=e.charCodeAt(t))>=48&&i<=57))return!1;t++}return!0}function Wd(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function DJ(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function KL(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(KL(e[t]))return!0}else if("object"==typeof e)for(var i=YL(e),r=i.length,o=0;o<r;o++)if(KL(e[i[o]]))return!0;return!1}function PJ(e,t){var n=[e];for(var i in t){var r="object"==typeof t[i]?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join("\n")}var RJ=function(e){function t(n,i,r,o,s){var a=this.constructor,l=e.call(this,PJ(n,{name:i,index:r,operation:o,tree:s}))||this;return l.name=i,l.index=r,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=PJ(n,{name:i,index:r,operation:o,tree:s}),l}return wze(t,e),t}(Error),zr=RJ,Mze=Ja,Iy={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=nk(n,this.path);i&&(i=Ja(i));var r=bg(n,{op:"remove",path:this.from}).removed;return bg(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=nk(n,this.from);return bg(n,{op:"add",path:this.path,value:Ja(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Hw(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},xze={add:function(e,t,n){return XL(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Iy.move,copy:Iy.copy,test:Iy.test,_get:Iy._get};function nk(e,t){if(""==t)return e;var n={op:"_get",path:t};return bg(e,n),n.value}function bg(e,t,n,i,r,o){if(void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):rk(t,0)),""===t.path){var s={newDocument:e};if("add"===t.op)return s.newDocument=t.value,s;if("replace"===t.op)return s.newDocument=t.value,s.removed=e,s;if("move"===t.op||"copy"===t.op)return s.newDocument=nk(e,t.from),"move"===t.op&&(s.removed=e),s;if("test"===t.op){if(s.test=Hw(e,t.value),!1===s.test)throw new zr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}if("remove"===t.op)return s.removed=e,s.newDocument=null,s;if("_get"===t.op)return t.value=e,s;if(n)throw new zr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}i||(e=Ja(e));var l=(t.path||"").split("/"),c=e,u=1,d=l.length,f=void 0,h=void 0,y=void 0;for(y="function"==typeof n?n:rk;;){if((h=l[u])&&-1!=h.indexOf("~")&&(h=DJ(h)),r&&("__proto__"==h||"prototype"==h&&u>0&&"constructor"==l[u-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===c[h]?f=l.slice(0,u).join("/"):u==d-1&&(f=t.path),void 0!==f&&y(t,0,e,f)),u++,Array.isArray(c)){if("-"===h)h=c.length;else{if(n&&!XL(h))throw new zr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);XL(h)&&(h=~~h)}if(u>=d){if(n&&"add"===t.op&&h>c.length)throw new zr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(s=xze[t.op].call(t,c,h,e)).test)throw new zr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(u>=d){if(!1===(s=Iy[t.op].call(t,c,h,e)).test)throw new zr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(c=c[h],n&&u<d&&(!c||"object"!=typeof c))throw new zr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function ik(e,t,n,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n&&!Array.isArray(t))throw new zr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Ja(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=bg(e,t[s],n,!0,r,s),e=o[s].newDocument;return o.newDocument=e,o}function Eze(e,t,n){var i=bg(e,t);if(!1===i.test)throw new zr("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function rk(e,t,n,i){if("object"!=typeof e||null===e||Array.isArray(e))throw new zr("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!Iy[e.op])throw new zr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new zr("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new zr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new zr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new zr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&KL(e.value))throw new zr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new zr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==i)throw new zr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=IJ([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new zr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function IJ(e,t,n){try{if(!Array.isArray(e))throw new zr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)ik(Ja(t),Ja(e),n||!0);else{n=n||rk;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof zr)return r;throw r}}function Hw(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,o,s,n=Array.isArray(e),i=Array.isArray(t);if(n&&i){if((o=e.length)!=t.length)return!1;for(r=o;0!=r--;)if(!Hw(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var a=Object.keys(e);if((o=a.length)!==Object.keys(t).length)return!1;for(r=o;0!=r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=o;0!=r--;)if(!Hw(e[s=a[r]],t[s]))return!1;return!0}return e!=e&&t!=t}var ZL=new WeakMap,Sze=function e(t){this.observers=new Map,this.obj=t},kze=function e(t,n){this.callback=t,this.observer=n};function Tze(e,t){t.unobserve()}function Pze(e,t){var i,r=function Aze(e){return ZL.get(e)}(e);if(r){var o=function Oze(e,t){return e.observers.get(t)}(r,t);i=o&&o.observer}else r=new Sze(e),ZL.set(e,r);if(i)return i;if(i={},r.value=Ja(e),t){i.callback=t,i.next=null;var s=function(){QL(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=[],i.object=e,i.unobserve=function(){QL(i),clearTimeout(i.next),function Dze(e,t){e.observers.delete(t.callback)}(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new kze(t,i)),i}function QL(e,t){void 0===t&&(t=!1);var n=ZL.get(e.object);JL(n.value,e.object,e.patches,"",t),e.patches.length&&ik(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function JL(e,t,n,i,r){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=YL(t),s=YL(e),l=!1,c=s.length-1;c>=0;c--){var d=e[u=s[c]];if(!tk(t,u)||void 0===t[u]&&void 0!==d&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Wd(u),value:Ja(d)}),n.push({op:"remove",path:i+"/"+Wd(u)}),l=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}));else{var f=t[u];"object"==typeof d&&null!=d&&"object"==typeof f&&null!=f&&Array.isArray(d)===Array.isArray(f)?JL(d,f,n,i+"/"+Wd(u),r):d!==f&&(r&&n.push({op:"test",path:i+"/"+Wd(u),value:Ja(d)}),n.push({op:"replace",path:i+"/"+Wd(u),value:Ja(f)}))}}if(l||o.length!=s.length)for(c=0;c<o.length;c++){var u;!tk(e,u=o[c])&&void 0!==t[u]&&n.push({op:"add",path:i+"/"+Wd(u),value:Ja(t[u])})}}}function Rze(e,t,n){void 0===n&&(n=!1);var i=[];return JL(e,t,i,"",n),i}Object.assign({},ie,xe,{JsonPatchError:RJ,deepClone:Ja,escapePathComponent:Wd,unescapePathComponent:DJ});var Ize=Me(564),eN=Me.n(Ize);function ma(e,t,n){return e.fields=t||[],e.fname=n,e}function Hr(e){return null==e?null:e.fname}function ys(e){return null==e?null:e.fields}function FJ(e){return 1===e.length?Fze(e[0]):Lze(e)}const Fze=e=>function(t){return t[e]},Lze=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function nt(e){throw Error(e)}function xu(e){const t=[],n=e.length;let s,a,l,i=null,r=0,o="";function c(){t.push(o+e.substring(s,a)),o="",s=a+1}for(e+="",s=a=0;a<n;++a)if(l=e[a],"\\"===l)o+=e.substring(s,a++),s=a;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&'"'===l||s===r&&"'"===l?(s=a+1,i=l):"."!==l||r?"["===l?(a>s&&c(),r=s=a+1):"]"===l&&(r||nt("Access path missing open bracket: "+e),r>0&&c(),r=0,s=a+1):a>s?c():s=a+1}return r&&nt("Access path missing closing bracket: "+e),i&&nt("Access path missing closing quote: "+e),a>s&&(a++,c()),t}function _a(e,t,n){const i=xu(e);return e=1===i.length?i[0]:e,ma((n&&n.get||FJ)(i),[e],t||e)}const Vw=_a("id"),vs=ma(e=>e,[],"identity"),fh=ma(()=>0,[],"zero"),Fy=ma(()=>1,[],"one"),Il=ma(()=>!0,[],"true"),hh=ma(()=>!1,[],"false");function Nze(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const LJ=0,tN=1,nN=2,NJ=3,$J=4;function iN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nze,i=e||LJ;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=tN&&n(t||"error","ERROR",arguments),this},warn(){return i>=nN&&n(t||"warn","WARN",arguments),this},info(){return i>=NJ&&n(t||"log","INFO",arguments),this},debug(){return i>=$J&&n(t||"log","DEBUG",arguments),this}}}var ot=Array.isArray;function jt(e){return e===Object(e)}const BJ=e=>"__proto__"!==e;function Ly(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const o in r)"signals"===o?i.signals=$ze(i.signals,r.signals):Ny(i,o,r[o],"legend"===o?{layout:1}:"style"===o||null);return i},{})}function Ny(e,t,n,i){if(!BJ(t))return;let r,o;if(jt(n)&&!ot(n))for(r in o=jt(e[t])?e[t]:e[t]={},n)i&&(!0===i||i[r])?Ny(o,r,n[r]):BJ(r)&&(o[r]=n[r]);else e[t]=n}function $ze(e,t){if(null==e)return t;const n={},i=[];function r(o){n[o.name]||(n[o.name]=1,i.push(o))}return t.forEach(r),e.forEach(r),i}function pi(e){return e[e.length-1]}function bs(e){return null==e||""===e?null:+e}const zJ=e=>t=>e*Math.exp(t),HJ=e=>t=>Math.log(e*t),VJ=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),UJ=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,ok=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function sk(e,t,n,i){const r=n(e[0]),o=n(pi(e)),s=(o-r)*t;return[i(r-s),i(o-s)]}function jJ(e,t){return sk(e,t,bs,vs)}function WJ(e,t){var n=Math.sign(e[0]);return sk(e,t,HJ(n),zJ(n))}function GJ(e,t,n){return sk(e,t,ok(n),ok(1/n))}function qJ(e,t,n){return sk(e,t,VJ(n),UJ(n))}function ak(e,t,n,i,r){const o=i(e[0]),s=i(pi(e)),a=null!=t?i(t):(o+s)/2;return[r(a+(o-a)*n),r(a+(s-a)*n)]}function rN(e,t,n){return ak(e,t,n,bs,vs)}function oN(e,t,n){const i=Math.sign(e[0]);return ak(e,t,n,HJ(i),zJ(i))}function lk(e,t,n,i){return ak(e,t,n,ok(i),ok(1/i))}function sN(e,t,n,i){return ak(e,t,n,VJ(i),UJ(i))}function YJ(e){return 1+~~(new Date(e).getMonth()/3)}function XJ(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ht(e){return null!=e?ot(e)?e:[e]:[]}function KJ(e,t,n){let o,i=e[0],r=e[1];return r<i&&(o=r,r=i,i=o),o=r-i,o>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-o),i+o]}function Yn(e){return"function"==typeof e}function aN(e,t,n){n=n||{},t=Ht(t)||[];const i=[],r=[],o={},s=n.comparator||zze;return Ht(e).forEach((a,l)=>{null!=a&&(i.push("descending"===t[l]?-1:1),r.push(a=Yn(a)?a:_a(a,null,n)),(ys(a)||[]).forEach(c=>o[c]=1))}),0===r.length?null:ma(s(r,i),Object.keys(o))}const ck=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),zze=(e,t)=>1===e.length?Hze(e[0],t[0]):Vze(e,t,e.length),Hze=(e,t)=>function(n,i){return ck(e(n),e(i))*t},Vze=(e,t,n)=>(t.push(0),function(i,r){let o,s=0,a=-1;for(;0===s&&++a<n;)o=e[a],s=ck(o(i),o(r));return s*t[a]});function ws(e){return Yn(e)?e:()=>e}function lN(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Xn(e){for(let t,n,i=1,r=arguments.length;i<r;++i)for(n in t=arguments[i],t)e[n]=t[n];return e}function Eu(e,t){let i,r,o,s,n=0;if(e&&(i=e.length))if(null==t){for(r=e[n];n<i&&(null==r||r!=r);r=e[++n]);for(o=s=r;n<i;++n)r=e[n],null!=r&&(r<o&&(o=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(null==r||r!=r);r=t(e[++n]));for(o=s=r;n<i;++n)r=t(e[n]),null!=r&&(r<o&&(o=r),r>s&&(s=r))}return[o,s]}function ZJ(e,t){const n=e.length;let r,o,s,a,l,i=-1;if(null==t){for(;++i<n;)if(o=e[i],null!=o&&o>=o){r=s=o;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)o=e[i],null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}else{for(;++i<n;)if(o=t(e[i],i,e),null!=o&&o>=o){r=s=o;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)o=t(e[i],i,e),null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}return[a,l]}const Uze=Object.prototype.hasOwnProperty;function bn(e,t){return Uze.call(e,t)}const uk={};function $y(e){let n,t={};function i(o){return bn(t,o)&&t[o]!==uk}const r={size:0,empty:0,object:t,has:i,get:o=>i(o)?t[o]:void 0,set(o,s){return i(o)||(++r.size,t[o]===uk&&--r.empty),t[o]=s,this},delete(o){return i(o)&&(--r.size,++r.empty,t[o]=uk),this},clear(){r.size=r.empty=0,r.object=t={}},test(o){return arguments.length?(n=o,r):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==uk&&(!n||!n(l))&&(o[a]=l,++s)}r.size=s,r.empty=0,r.object=t=o}};return e&&Object.keys(e).forEach(o=>{r.set(o,e[o])}),r}function QJ(e,t,n,i,r,o){if(!n&&0!==n)return o;const s=+n;let c,a=e[0],l=pi(e);l<a&&(c=a,a=l,l=c),c=Math.abs(t-a);const u=Math.abs(l-t);return c<u&&c<=s?i:u<=s?r:o}function St(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Xn(i,n)}function By(e,t,n,i){let s,r=t[0],o=t[t.length-1];return r>o&&(s=r,r=o,o=s),i=void 0===i||i,((n=void 0===n||n)?r<=e:r<e)&&(i?e<=o:e<o)}function ph(e){return"boolean"==typeof e}function gh(e){return"[object Date]"===Object.prototype.toString.call(e)}function JJ(e){return e&&Yn(e[Symbol.iterator])}function Xi(e){return"number"==typeof e}function eee(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function zt(e){return"string"==typeof e}function cN(e,t,n){e&&(e=t?Ht(e).map(a=>a.replace(/\\(.)/g,"$1")):Ht(e));const i=e&&e.length,r=n&&n.get||FJ,o=a=>r(t?[a]:xu(a));let s;if(i)if(1===i){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let c=""+a[0](l),u=0;for(;++u<i;)c+="|"+a[u](l);return c}}else s=function(){return""};return ma(s,e,"key")}function tee(e,t){const n=e[0],i=pi(e),r=+t;return r?1===r?i:n+r*(i-n):n}function nee(e){let t,n,i;e=+e||1e4;const r=()=>{t={},n={},i=0},o=(s,a)=>(++i>e&&(n=t,t={},i=1),t[s]=a);return r(),{clear:r,has:s=>bn(t,s)||bn(n,s),get:s=>bn(t,s)?t[s]:bn(n,s)?o(s,n[s]):void 0,set:(s,a)=>bn(t,s)?t[s]=a:o(s,a)}}function iee(e,t,n,i){const r=t.length,o=n.length;if(!o)return t;if(!r)return n;const s=i||new t.constructor(r+o);let a=0,l=0,c=0;for(;a<r&&l<o;++c)s[c]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<r;++a,++c)s[c]=t[a];for(;l<o;++l,++c)s[c]=n[l];return s}function Uw(e,t){let n="";for(;--t>=0;)n+=e;return n}function ree(e,t,n,i){const r=n||" ",o=e+"",s=t-o.length;return s<=0?o:"left"===i?Uw(r,s)+o:"center"===i?Uw(r,~~(s/2))+o+Uw(r,Math.ceil(s/2)):o+Uw(r,s)}function jw(e){return e&&pi(e)-e[0]||0}function kt(e){return ot(e)?"["+e.map(kt)+"]":jt(e)||zt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function uN(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}const Wze=e=>Xi(e)||gh(e)?e:Date.parse(e);function dN(e,t){return t=t||Wze,null==e||""===e?null:t(e)}function fN(e){return null==e||""===e?null:e+""}function bc(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function oee(e,t,n,i){const r=i??"\u2026",o=e+"",s=o.length,a=Math.max(0,t-r.length);return s<=t?o:"left"===n?r+o.slice(s-a):"center"===n?o.slice(0,Math.ceil(a/2))+r+o.slice(s-~~(a/2)):o.slice(0,a)+r}function mh(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const o=t(e[r]);o&&n(o,r,e)}}else e.forEach(n)}var see={},hN={};function aee(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function lee(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function ya(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Xze(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(d,f){var k,h=[],y=d.length,b=0,C=0,O=y<=0,I=!1;function z(){if(O)return hN;if(I)return I=!1,see;var ne,le,K=b;if(34===d.charCodeAt(K)){for(;b++<y&&34!==d.charCodeAt(b)||34===d.charCodeAt(++b););return(ne=b)>=y?O=!0:10===(le=d.charCodeAt(b++))?I=!0:13===le&&(I=!0,10===d.charCodeAt(b)&&++b),d.slice(K+1,ne-1).replace(/""/g,'"')}for(;b<y;){if(10===(le=d.charCodeAt(ne=b++)))I=!0;else if(13===le)I=!0,10===d.charCodeAt(b)&&++b;else if(le!==n)continue;return d.slice(K,ne)}return O=!0,d.slice(K,y)}for(10===d.charCodeAt(y-1)&&--y,13===d.charCodeAt(y-1)&&--y;(k=z())!==hN;){for(var q=[];k!==see&&k!==hN;)q.push(k),k=z();f&&null==(q=f(q,C++))||h.push(q)}return h}function o(d,f){return d.map(function(h){return f.map(function(y){return u(h[y])}).join(e)})}function c(d){return d.map(u).join(e)}function u(d){return null==d?"":d instanceof Date?function Yze(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function qze(e){return e<0?"-"+ya(-e,6):e>9999?"+"+ya(e,6):ya(e,4)}(e.getUTCFullYear())+"-"+ya(e.getUTCMonth()+1,2)+"-"+ya(e.getUTCDate(),2)+(r?"T"+ya(t,2)+":"+ya(n,2)+":"+ya(i,2)+"."+ya(r,3)+"Z":i?"T"+ya(t,2)+":"+ya(n,2)+":"+ya(i,2)+"Z":n||t?"T"+ya(t,2)+":"+ya(n,2)+"Z":"")}(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:function i(d,f){var h,y,b=r(d,function(C,k){if(h)return h(C,k-1);y=C,h=f?function Gze(e,t){var n=aee(e);return function(i,r){return t(n(i),r,e)}}(C,f):aee(C)});return b.columns=y||[],b},parseRows:r,format:function s(d,f){return null==f&&(f=lee(d)),[f.map(u).join(e)].concat(o(d,f)).join("\n")},formatBody:function a(d,f){return null==f&&(f=lee(d)),o(d,f).join("\n")},formatRows:function l(d){return d.map(c).join("\n")},formatRow:c,formatValue:u}}var Kze=Me(412),Zze=Me(57);const Qze=Math.sqrt(50),Jze=Math.sqrt(10),e5e=Math.sqrt(2);function dk(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=Qze?10:o>=Jze?5:o>=e5e?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/s,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*s,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?dk(e,t,2*n):[a,l,c]}function mN(e,t,n){if(!((n=+n)>0))return[];if((e=+e)==(t=+t))return[e];const i=t<e,[r,o,s]=i?dk(t,e,n):dk(e,t,n);if(!(o>=r))return[];const a=o-r+1,l=new Array(a);if(i)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(r+c)/-s;else for(let c=0;c<a;++c)l[c]=(r+c)*s;return l}function _N(e,t,n){return dk(e=+e,t=+t,n=+n)[2]}function _h(e,t,n){n=+n;const i=(t=+t)<(e=+e),r=i?_N(t,e,n):_N(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}var fee,t5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wg(e){if(!(t=t5e.exec(e)))throw new Error("invalid format: "+e);var t;return new yN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function yN(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function fk(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function zy(e){return(e=fk(Math.abs(e)))?e[1]:NaN}function cee(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(zy(t)/3)))-zy(Math.abs(e)))}function uee(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zy(t)-zy(e))+1}function dee(e){return Math.max(0,-zy(Math.abs(e)))}function hee(e,t){var n=fk(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}wg.prototype=yN.prototype,yN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const pee={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function n5e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hee(100*e,t),r:hee,s:function s5e(e,t){var n=fk(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(fee=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+fk(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gee(e){return e}var hk,pk,vN,mee=Array.prototype.map,_ee=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function yee(e){var t=void 0===e.grouping||void 0===e.thousands?gee:function i5e(e,t){return function(n,i){for(var r=n.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}(mee.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",r=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?gee:function r5e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}(mee.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",a=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function c(d){var f=(d=wg(d)).fill,h=d.align,y=d.sign,b=d.symbol,C=d.zero,k=d.width,O=d.comma,I=d.precision,z=d.trim,q=d.type;"n"===q?(O=!0,q="g"):pee[q]||(void 0===I&&(I=12),z=!0,q="g"),(C||"0"===f&&"="===h)&&(C=!0,f="0",h="=");var ne="$"===b?n:"#"===b&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",K="$"===b?i:/[%p]/.test(q)?s:"",le=pee[q],me=/[defgprs%]/.test(q);function ge(ye){var Z,ae,oe,Se=ne,ve=K;if("c"===q)ve=le(ye)+ve,ye="";else{var de=(ye=+ye)<0||1/ye<0;if(ye=isNaN(ye)?l:le(Math.abs(ye),I),z&&(ye=function o5e(e){e:for(var r,t=e.length,n=1,i=-1;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":0===i&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(r+1):e}(ye)),de&&0==+ye&&"+"!==y&&(de=!1),Se=(de?"("===y?y:a:"-"===y||"("===y?"":y)+Se,ve=("s"===q?_ee[8+fee/3]:"")+ve+(de&&"("===y?")":""),me)for(Z=-1,ae=ye.length;++Z<ae;)if(48>(oe=ye.charCodeAt(Z))||oe>57){ve=(46===oe?r+ye.slice(Z+1):ye.slice(Z))+ve,ye=ye.slice(0,Z);break}}O&&!C&&(ye=t(ye,1/0));var ce=Se.length+ye.length+ve.length,he=ce<k?new Array(k-ce+1).join(f):"";switch(O&&C&&(ye=t(he+ye,he.length?k-ve.length:1/0),he=""),h){case"<":ye=Se+ye+ve+he;break;case"=":ye=Se+he+ye+ve;break;case"^":ye=he.slice(0,ce=he.length>>1)+Se+ye+ve+he.slice(ce);break;default:ye=he+Se+ye+ve}return o(ye)}return I=void 0===I?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I)),ge.toString=function(){return d+""},ge}return{format:c,formatPrefix:function u(d,f){var h=c(((d=wg(d)).type="f",d)),y=3*Math.max(-8,Math.min(8,Math.floor(zy(f)/3))),b=Math.pow(10,-y),C=_ee[8+y/3];return function(k){return h(b*k)+C}}}}!function a5e(e){hk=yee(e),pk=hk.format,vN=hk.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const bN=new Date,wN=new Date;function _o(e,t,n,i){function r(o){return e(o=0===arguments.length?new Date:new Date(+o)),o}return r.floor=o=>(e(o=new Date(+o)),o),r.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),r.round=o=>{const s=r(o),a=r.ceil(o);return o-s<a-o?s:a},r.offset=(o,s)=>(t(o=new Date(+o),null==s?1:Math.floor(s)),o),r.range=(o,s,a)=>{const l=[];if(o=r.ceil(o),a=null==a?1:Math.floor(a),!(o<s&&a>0))return l;let c;do{l.push(c=new Date(+o)),t(o,a),e(o)}while(c<o&&o<s);return l},r.filter=o=>_o(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(r.count=(o,s)=>(bN.setTime(+o),wN.setTime(+s),e(bN),e(wN),Math.floor(n(bN,wN))),r.every=o=>(o=Math.floor(o),isFinite(o)&&o>0?o>1?r.filter(i?s=>i(s)%o==0:s=>r.count(0,s)%o==0):r:null)),r}const Gd=1e3,Fl=6e4,qd=60*Fl,Yd=24*qd,CN=7*Yd,MN=365*Yd,Xd=_o(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fl)/Yd,e=>e.getDate()-1),yh=_o(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yd,e=>e.getUTCDate()-1),bee=_o(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yd,e=>Math.floor(e/Yd));function Cg(e){return _o(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+7*n)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Fl)/CN)}const Hy=Cg(0),gk=Cg(1),Vy=(Cg(2),Cg(3),Cg(4));function Mg(e){return _o(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+7*n)},(t,n)=>(n-t)/CN)}Cg(5),Cg(6);const Uy=Mg(0),mk=Mg(1),jy=(Mg(2),Mg(3),Mg(4)),Su=(Mg(5),Mg(6),_o(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Su.every=e=>isFinite(e=Math.floor(e))&&e>0?_o(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;const ku=_o(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ku.every=e=>isFinite(e=Math.floor(e))&&e>0?_o(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;const Gw=_o(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth()),qw=_o(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth()),_k=_o(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Gd-e.getMinutes()*Fl)},(e,t)=>{e.setTime(+e+t*qd)},(e,t)=>(t-e)/qd,e=>e.getHours()),yk=_o(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qd)},(e,t)=>(t-e)/qd,e=>e.getUTCHours()),vk=_o(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Gd)},(e,t)=>{e.setTime(+e+t*Fl)},(e,t)=>(t-e)/Fl,e=>e.getMinutes()),bk=_o(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Fl)},(e,t)=>(t-e)/Fl,e=>e.getUTCMinutes()),Kd=_o(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Gd)},(e,t)=>(t-e)/Gd,e=>e.getUTCSeconds()),Wy=_o(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);function Zd(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function m5e(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yw(e){let t,n,i;function r(a,l,c=0,u=a.length){if(c<u){if(0!==t(l,l))return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}return 2!==e.length?(t=Zd,n=(a,l)=>Zd(e(a),l),i=(a,l)=>e(a)-l):(t=e===Zd||e===m5e?e:_5e,n=e,i=e),{left:r,center:function s(a,l,c=0,u=a.length){const d=r(a,l,c,u-1);return d>c&&i(a[d-1],l)>-i(a[d],l)?d-1:d},right:function o(a,l,c=0,u=a.length){if(c<u){if(0!==t(l,l))return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}}}function _5e(){return 0}Wy.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?_o(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Wy:null);const Jo="year",va="quarter",Cs="month",yo="week",ba="date",Ms="day",Au="dayofyear",el="hours",tl="minutes",Ll="seconds",wc="milliseconds",xN=[Jo,va,Cs,yo,ba,Ms,Au,el,tl,Ll,wc],EN=xN.reduce((e,t,n)=>(e[t]=1+n,e),{});function SN(e){const t=Ht(e).slice(),n={};return t.length||nt("Missing time unit."),t.forEach(r=>{bn(EN,r)?n[r]=1:nt(`Invalid time unit: ${r}.`)}),(n[yo]||n[Ms]?1:0)+(n[va]||n[Cs]||n[ba]?1:0)+(n[Au]?1:0)>1&&nt(`Incompatible time units: ${e}`),t.sort((r,o)=>EN[r]-EN[o]),t}const y5e={[Jo]:"%Y ",[va]:"Q%q ",[Cs]:"%b ",[ba]:"%d ",[yo]:"W%U ",[Ms]:"%a ",[Au]:"%j ",[el]:"%H:00",[tl]:"00:%M",[Ll]:":%S",[wc]:".%L",[`${Jo}-${Cs}`]:"%Y-%m ",[`${Jo}-${Cs}-${ba}`]:"%Y-%m-%d ",[`${el}-${tl}`]:"%H:%M"};function wee(e,t){const n=Xn({},y5e,t),i=SN(e),r=i.length;let a,l,o="",s=0;for(s=0;s<r;)for(a=i.length;a>s;--a)if(l=i.slice(s,a).join("-"),null!=n[l]){o+=n[l],s=a;break}return o.trim()}const xg=new Date;function kN(e){return xg.setFullYear(e),xg.setMonth(0),xg.setDate(1),xg.setHours(0,0,0,0),xg}function Cee(e){return xee(new Date(e))}function Mee(e){return AN(new Date(e))}function xee(e){return Xd.count(kN(e.getFullYear())-1,e)}function AN(e){return Hy.count(kN(e.getFullYear())-1,e)}function ON(e){return kN(e).getDay()}function v5e(e,t,n,i,r,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,i,r,o,s);return a.setFullYear(e),a}return new Date(e,t,n,i,r,o,s)}function Eee(e){return kee(new Date(e))}function See(e){return DN(new Date(e))}function kee(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return yh.count(t-1,e)}function DN(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Uy.count(t-1,e)}function TN(e){return xg.setTime(Date.UTC(e,0,1)),xg.getUTCDay()}function b5e(e,t,n,i,r,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,i,r,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,i,r,o,s))}function Aee(e,t,n,i,r){const o=t||1,s=pi(e),a=(k,O,I)=>function w5e(e,t,n,i){const r=n<=1?e:i?(o,s)=>i+n*Math.floor((e(o,s)-i)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(r(o,s),s):r}(n[I=I||k],i[I],k===s&&o,O),l=new Date,c=bc(e),u=c[Jo]?a(Jo):ws(2012),d=c[Cs]?a(Cs):c[va]?a(va):fh,f=c[yo]&&c[Ms]?a(Ms,1,yo+Ms):c[yo]?a(yo,1):c[Ms]?a(Ms,1):c[ba]?a(ba,1):c[Au]?a(Au,1):Fy,h=c[el]?a(el):fh,y=c[tl]?a(tl):fh,b=c[Ll]?a(Ll):fh,C=c[wc]?a(wc):fh;return function(k){l.setTime(+k);const O=u(l);return r(O,d(l),f(l,O),h(l),y(l),b(l),C(l))}}function Gy(e,t,n){return t+7*e-(n+6)%7}const C5e={[Jo]:e=>e.getFullYear(),[va]:e=>Math.floor(e.getMonth()/3),[Cs]:e=>e.getMonth(),[ba]:e=>e.getDate(),[el]:e=>e.getHours(),[tl]:e=>e.getMinutes(),[Ll]:e=>e.getSeconds(),[wc]:e=>e.getMilliseconds(),[Au]:e=>xee(e),[yo]:e=>AN(e),[yo+Ms]:(e,t)=>Gy(AN(e),e.getDay(),ON(t)),[Ms]:(e,t)=>Gy(1,e.getDay(),ON(t))},M5e={[va]:e=>3*e,[yo]:(e,t)=>Gy(e,0,ON(t))};function Oee(e,t){return Aee(e,t||1,C5e,M5e,v5e)}const x5e={[Jo]:e=>e.getUTCFullYear(),[va]:e=>Math.floor(e.getUTCMonth()/3),[Cs]:e=>e.getUTCMonth(),[ba]:e=>e.getUTCDate(),[el]:e=>e.getUTCHours(),[tl]:e=>e.getUTCMinutes(),[Ll]:e=>e.getUTCSeconds(),[wc]:e=>e.getUTCMilliseconds(),[Au]:e=>kee(e),[yo]:e=>DN(e),[Ms]:(e,t)=>Gy(1,e.getUTCDay(),TN(t)),[yo+Ms]:(e,t)=>Gy(DN(e),e.getUTCDay(),TN(t))},E5e={[va]:e=>3*e,[yo]:(e,t)=>Gy(e,0,TN(t))};function Dee(e,t){return Aee(e,t||1,x5e,E5e,b5e)}const S5e={[Jo]:Su,[va]:Gw.every(3),[Cs]:Gw,[yo]:Hy,[ba]:Xd,[Ms]:Xd,[Au]:Xd,[el]:_k,[tl]:vk,[Ll]:Kd,[wc]:Wy},k5e={[Jo]:ku,[va]:qw.every(3),[Cs]:qw,[yo]:Uy,[ba]:yh,[Ms]:yh,[Au]:yh,[el]:yk,[tl]:bk,[Ll]:Kd,[wc]:Wy};function qy(e){return S5e[e]}function Yy(e){return k5e[e]}function Tee(e,t,n){return e?e.offset(t,n):void 0}function Pee(e,t,n){return Tee(qy(e),t,n)}function Ree(e,t,n){return Tee(Yy(e),t,n)}function Iee(e,t,n,i){return e?e.range(t,n,i):void 0}function Fee(e,t,n,i){return Iee(qy(e),t,n,i)}function Lee(e,t,n,i){return Iee(Yy(e),t,n,i)}const Kw=6e4,Zw=60*Kw,PN=31536e6,$ee=[Jo,Cs,ba,el,tl,Ll,wc],Qw=$ee.slice(0,-1),Jw=Qw.slice(0,-1),eC=Jw.slice(0,-1),O5e=eC.slice(0,-1),Bee=[Jo,Cs],zee=[Jo],tC=[[Qw,1,1e3],[Qw,5,5e3],[Qw,15,15e3],[Qw,30,3e4],[Jw,1,Kw],[Jw,5,5*Kw],[Jw,15,15*Kw],[Jw,30,30*Kw],[eC,1,Zw],[eC,3,3*Zw],[eC,6,6*Zw],[eC,12,12*Zw],[O5e,1,864e5],[[Jo,yo],1,6048e5],[Bee,1,2592e6],[Bee,3,7776e6],[zee,1,PN]];function Hee(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(jw(t))/n;let o,s,r=Yw(a=>a[2]).right(tC,i);return r===tC.length?(o=zee,s=_h(t[0]/PN,t[1]/PN,n)):r?(r=tC[i/tC[r-1][2]<tC[r][2]/i?r-1:r],o=r[0],s=r[1]):(o=$ee,s=Math.max(_h(t[0],t[1],n),1)),{units:o,step:s}}function RN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function IN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nC(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Vee(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,c=iC(r),u=rC(r),d=iC(o),f=rC(o),h=iC(s),y=rC(s),b=iC(a),C=rC(a),k=iC(l),O=rC(l),I={a:function de(Be){return s[Be.getDay()]},A:function ce(Be){return o[Be.getDay()]},b:function he(Be){return l[Be.getMonth()]},B:function pe(Be){return a[Be.getMonth()]},c:null,d:Yee,e:Yee,f:J5e,g:c4e,G:d4e,H:K5e,I:Z5e,j:Q5e,L:Xee,m:e4e,M:t4e,p:function Ee(Be){return r[+(Be.getHours()>=12)]},q:function Oe(Be){return 1+~~(Be.getMonth()/3)},Q:tte,s:nte,S:n4e,u:i4e,U:r4e,V:o4e,w:s4e,W:a4e,x:null,X:null,y:l4e,Y:u4e,Z:f4e,"%":ete},z={a:function Ie(Be){return s[Be.getUTCDay()]},A:function De(Be){return o[Be.getUTCDay()]},b:function $e(Be){return l[Be.getUTCMonth()]},B:function st(Be){return a[Be.getUTCMonth()]},c:null,d:Zee,e:Zee,f:m4e,g:S4e,G:A4e,H:h4e,I:p4e,j:g4e,L:Qee,m:_4e,M:y4e,p:function ze(Be){return r[+(Be.getUTCHours()>=12)]},q:function mt(Be){return 1+~~(Be.getUTCMonth()/3)},Q:tte,s:nte,S:v4e,u:b4e,U:w4e,V:C4e,w:M4e,W:x4e,x:null,X:null,y:E4e,Y:k4e,Z:O4e,"%":ete},q={a:function ge(Be,rt,ut){var Ne=h.exec(rt.slice(ut));return Ne?(Be.w=y.get(Ne[0].toLowerCase()),ut+Ne[0].length):-1},A:function ye(Be,rt,ut){var Ne=d.exec(rt.slice(ut));return Ne?(Be.w=f.get(Ne[0].toLowerCase()),ut+Ne[0].length):-1},b:function Se(Be,rt,ut){var Ne=k.exec(rt.slice(ut));return Ne?(Be.m=O.get(Ne[0].toLowerCase()),ut+Ne[0].length):-1},B:function ve(Be,rt,ut){var Ne=b.exec(rt.slice(ut));return Ne?(Be.m=C.get(Ne[0].toLowerCase()),ut+Ne[0].length):-1},c:function Z(Be,rt,ut){return le(Be,t,rt,ut)},d:Gee,e:Gee,f:G5e,g:Wee,G:jee,H:qee,I:qee,j:V5e,L:W5e,m:H5e,M:U5e,p:function me(Be,rt,ut){var Ne=c.exec(rt.slice(ut));return Ne?(Be.p=u.get(Ne[0].toLowerCase()),ut+Ne[0].length):-1},q:z5e,Q:Y5e,s:X5e,S:j5e,u:F5e,U:L5e,V:N5e,w:I5e,W:$5e,x:function ae(Be,rt,ut){return le(Be,n,rt,ut)},X:function oe(Be,rt,ut){return le(Be,i,rt,ut)},y:Wee,Y:jee,Z:B5e,"%":q5e};function ne(Be,rt){return function(ut){var sn,Ct,Tn,Ne=[],Ot=-1,qt=0,kn=Be.length;for(ut instanceof Date||(ut=new Date(+ut));++Ot<kn;)37===Be.charCodeAt(Ot)&&(Ne.push(Be.slice(qt,Ot)),null!=(Ct=Uee[sn=Be.charAt(++Ot)])?sn=Be.charAt(++Ot):Ct="e"===sn?" ":"0",(Tn=rt[sn])&&(sn=Tn(ut,Ct)),Ne.push(sn),qt=Ot+1);return Ne.push(Be.slice(qt,Ot)),Ne.join("")}}function K(Be,rt){return function(ut){var qt,kn,Ne=nC(1900,void 0,1);if(le(Ne,Be,ut+="",0)!=ut.length)return null;if("Q"in Ne)return new Date(Ne.Q);if("s"in Ne)return new Date(1e3*Ne.s+("L"in Ne?Ne.L:0));if(rt&&!("Z"in Ne)&&(Ne.Z=0),"p"in Ne&&(Ne.H=Ne.H%12+12*Ne.p),void 0===Ne.m&&(Ne.m="q"in Ne?Ne.q:0),"V"in Ne){if(Ne.V<1||Ne.V>53)return null;"w"in Ne||(Ne.w=1),"Z"in Ne?(kn=(qt=IN(nC(Ne.y,0,1))).getUTCDay(),qt=kn>4||0===kn?mk.ceil(qt):mk(qt),qt=yh.offset(qt,7*(Ne.V-1)),Ne.y=qt.getUTCFullYear(),Ne.m=qt.getUTCMonth(),Ne.d=qt.getUTCDate()+(Ne.w+6)%7):(kn=(qt=RN(nC(Ne.y,0,1))).getDay(),qt=kn>4||0===kn?gk.ceil(qt):gk(qt),qt=Xd.offset(qt,7*(Ne.V-1)),Ne.y=qt.getFullYear(),Ne.m=qt.getMonth(),Ne.d=qt.getDate()+(Ne.w+6)%7)}else("W"in Ne||"U"in Ne)&&("w"in Ne||(Ne.w="u"in Ne?Ne.u%7:"W"in Ne?1:0),kn="Z"in Ne?IN(nC(Ne.y,0,1)).getUTCDay():RN(nC(Ne.y,0,1)).getDay(),Ne.m=0,Ne.d="W"in Ne?(Ne.w+6)%7+7*Ne.W-(kn+5)%7:Ne.w+7*Ne.U-(kn+6)%7);return"Z"in Ne?(Ne.H+=Ne.Z/100|0,Ne.M+=Ne.Z%100,IN(Ne)):RN(Ne)}}function le(Be,rt,ut,Ne){for(var sn,Ct,Ot=0,qt=rt.length,kn=ut.length;Ot<qt;){if(Ne>=kn)return-1;if(37===(sn=rt.charCodeAt(Ot++))){if(sn=rt.charAt(Ot++),!(Ct=q[sn in Uee?rt.charAt(Ot++):sn])||(Ne=Ct(Be,ut,Ne))<0)return-1}else if(sn!=ut.charCodeAt(Ne++))return-1}return Ne}return I.x=ne(n,I),I.X=ne(i,I),I.c=ne(t,I),z.x=ne(n,z),z.X=ne(i,z),z.c=ne(t,z),{format:function(Be){var rt=ne(Be+="",I);return rt.toString=function(){return Be},rt},parse:function(Be){var rt=K(Be+="",!1);return rt.toString=function(){return Be},rt},utcFormat:function(Be){var rt=ne(Be+="",z);return rt.toString=function(){return Be},rt},utcParse:function(Be){var rt=K(Be+="",!0);return rt.toString=function(){return Be},rt}}}var Xy,FN,ite,LN,rte,Uee={"-":"",_:" ",0:"0"},Do=/^\s*\d+/,T5e=/^%/,P5e=/[\\^$*+?|[\]().{}]/g;function Si(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function R5e(e){return e.replace(P5e,"\\$&")}function iC(e){return new RegExp("^(?:"+e.map(R5e).join("|")+")","i")}function rC(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function I5e(e,t,n){var i=Do.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function F5e(e,t,n){var i=Do.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function L5e(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function N5e(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function $5e(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function jee(e,t,n){var i=Do.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Wee(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function B5e(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function z5e(e,t,n){var i=Do.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function H5e(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Gee(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function V5e(e,t,n){var i=Do.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function qee(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function U5e(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function j5e(e,t,n){var i=Do.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function W5e(e,t,n){var i=Do.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function G5e(e,t,n){var i=Do.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function q5e(e,t,n){var i=T5e.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Y5e(e,t,n){var i=Do.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function X5e(e,t,n){var i=Do.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Yee(e,t){return Si(e.getDate(),t,2)}function K5e(e,t){return Si(e.getHours(),t,2)}function Z5e(e,t){return Si(e.getHours()%12||12,t,2)}function Q5e(e,t){return Si(1+Xd.count(Su(e),e),t,3)}function Xee(e,t){return Si(e.getMilliseconds(),t,3)}function J5e(e,t){return Xee(e,t)+"000"}function e4e(e,t){return Si(e.getMonth()+1,t,2)}function t4e(e,t){return Si(e.getMinutes(),t,2)}function n4e(e,t){return Si(e.getSeconds(),t,2)}function i4e(e){var t=e.getDay();return 0===t?7:t}function r4e(e,t){return Si(Hy.count(Su(e)-1,e),t,2)}function Kee(e){var t=e.getDay();return t>=4||0===t?Vy(e):Vy.ceil(e)}function o4e(e,t){return e=Kee(e),Si(Vy.count(Su(e),e)+(4===Su(e).getDay()),t,2)}function s4e(e){return e.getDay()}function a4e(e,t){return Si(gk.count(Su(e)-1,e),t,2)}function l4e(e,t){return Si(e.getFullYear()%100,t,2)}function c4e(e,t){return Si((e=Kee(e)).getFullYear()%100,t,2)}function u4e(e,t){return Si(e.getFullYear()%1e4,t,4)}function d4e(e,t){var n=e.getDay();return Si((e=n>=4||0===n?Vy(e):Vy.ceil(e)).getFullYear()%1e4,t,4)}function f4e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Si(t/60|0,"0",2)+Si(t%60,"0",2)}function Zee(e,t){return Si(e.getUTCDate(),t,2)}function h4e(e,t){return Si(e.getUTCHours(),t,2)}function p4e(e,t){return Si(e.getUTCHours()%12||12,t,2)}function g4e(e,t){return Si(1+yh.count(ku(e),e),t,3)}function Qee(e,t){return Si(e.getUTCMilliseconds(),t,3)}function m4e(e,t){return Qee(e,t)+"000"}function _4e(e,t){return Si(e.getUTCMonth()+1,t,2)}function y4e(e,t){return Si(e.getUTCMinutes(),t,2)}function v4e(e,t){return Si(e.getUTCSeconds(),t,2)}function b4e(e){var t=e.getUTCDay();return 0===t?7:t}function w4e(e,t){return Si(Uy.count(ku(e)-1,e),t,2)}function Jee(e){var t=e.getUTCDay();return t>=4||0===t?jy(e):jy.ceil(e)}function C4e(e,t){return e=Jee(e),Si(jy.count(ku(e),e)+(4===ku(e).getUTCDay()),t,2)}function M4e(e){return e.getUTCDay()}function x4e(e,t){return Si(mk.count(ku(e)-1,e),t,2)}function E4e(e,t){return Si(e.getUTCFullYear()%100,t,2)}function S4e(e,t){return Si((e=Jee(e)).getUTCFullYear()%100,t,2)}function k4e(e,t){return Si(e.getUTCFullYear()%1e4,t,4)}function A4e(e,t){var n=e.getUTCDay();return Si((e=n>=4||0===n?jy(e):jy.ceil(e)).getUTCFullYear()%1e4,t,4)}function O4e(){return"+0000"}function ete(){return"%"}function tte(e){return+e}function nte(e){return Math.floor(+e/1e3)}function oC(e){const t={};return n=>t[n]||(t[n]=e(n))}function ote(e){const t=oC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=wg(i||",");if(null==r.precision){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1}return function T4e(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let o=function P4e(e,t){let i,n=e.lastIndexOf("e");if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}(i,r);const s=o<i.length?i.slice(o):"";for(;--o>r;)if("0"!==i[o]){++o;break}return i.slice(0,o)+s}}(t(r),t(".1f")(1)[1])}return t(r)},formatSpan(i,r,o,s){s=wg(s??",f");const a=_h(i,r,o),l=Math.max(Math.abs(i),Math.abs(r));let c;if(null==s.precision)switch(s.type){case"s":return isNaN(c=cee(a,l))||(s.precision=c),n(s,l);case"":case"e":case"g":case"p":case"r":isNaN(c=uee(a,l))||(s.precision=c-("e"===s.type));break;case"f":case"%":isNaN(c=dee(a))||(s.precision=c-2*("%"===s.type))}return t(s)}}}let NN,$N;function ste(){return NN=ote({format:pk,formatPrefix:vN})}function ate(e){return ote(yee(e))}function Ck(e){return arguments.length?NN=ate(e):NN}function lte(e,t,n){jt(n=n||{})||nt(`Invalid time multi-format specifier: ${n}`);const i=t(Ll),r=t(tl),o=t(el),s=t(ba),a=t(yo),l=t(Cs),c=t(va),u=t(Jo),d=e(n[wc]||".%L"),f=e(n[Ll]||":%S"),h=e(n[tl]||"%I:%M"),y=e(n[el]||"%I %p"),b=e(n[ba]||n[Ms]||"%a %d"),C=e(n[yo]||"%b %d"),k=e(n[Cs]||"%B"),O=e(n[va]||"%B"),I=e(n[Jo]||"%Y");return z=>(i(z)<z?d:r(z)<z?f:o(z)<z?h:s(z)<z?y:l(z)<z?a(z)<z?b:C:u(z)<z?c(z)<z?k:O:I)(z)}function cte(e){const t=oC(e.format),n=oC(e.utcFormat);return{timeFormat:i=>zt(i)?t(i):lte(t,qy,i),utcFormat:i=>zt(i)?n(i):lte(n,Yy,i),timeParse:oC(e.parse),utcParse:oC(e.utcParse)}}function ute(){return $N=cte({format:FN,parse:ite,utcFormat:LN,utcParse:rte})}function dte(e){return cte(Vee(e))}function sC(e){return arguments.length?$N=dte(e):$N}!function D4e(e){Xy=Vee(e),FN=Xy.format,ite=Xy.parse,LN=Xy.utcFormat,rte=Xy.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ste(),ute();const BN=(e,t)=>Xn({},e,t);function fte(e,t){const n=e?ate(e):Ck(),i=t?dte(t):sC();return BN(n,i)}function zN(e,t){const n=arguments.length;return n&&2!==n&&nt("defaultLocale expects either zero or two arguments."),n?BN(Ck(e),sC(t)):BN(Ck(),sC())}function R4e(){return ste(),ute(),zN()}const I4e=/^(data:|([A-Za-z]+:)?\/\/)/,F4e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,L4e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,hte="file://";function $4e(e,t){return HN.apply(this,arguments)}function HN(){return HN=Pr(function*(e,t){const n=yield this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}),HN.apply(this,arguments)}function B4e(e,t){return VN.apply(this,arguments)}function VN(){return VN=Pr(function*(e,t){t=Xn({},this.options,t);const n=this.fileAccess,i={href:null};let r,o,s;const a=F4e.test(e.replace(L4e,""));(null==e||"string"!=typeof e||!a)&&nt("Sanitize failure, invalid URI: "+kt(e));const l=I4e.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(r=e.startsWith(hte))||"file"===t.mode||"http"!==t.mode&&!l&&n,r?e=e.slice(hte.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}),VN.apply(this,arguments)}function z4e(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,o)=>{r?i(r):n(o)})}):H4e}function H4e(){return UN.apply(this,arguments)}function UN(){return(UN=Pr(function*(){nt("No file system access.")})).apply(this,arguments)}function V4e(e){return e?function(){var t=Pr(function*(n,i){const r=Xn({},this.options.http,i),o=i&&i.response,s=yield e(n,r);return s.ok?Yn(s[o])?s[o]():s.text():nt(s.status+""+s.statusText)});return function(n,i){return t.apply(this,arguments)}}():U4e}function U4e(){return jN.apply(this,arguments)}function jN(){return(jN=Pr(function*(){nt("No HTTP fetch method available.")})).apply(this,arguments)}const j4e=e=>null!=e&&e==e,pte=e=>!(Number.isNaN(+e)||e instanceof Date),WN={boolean:uN,integer:bs,number:bs,date:dN,string:fN,unknown:vs},Mk=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>pte(e)&&Number.isInteger(+e),pte,e=>!Number.isNaN(Date.parse(e))],Y4e=["boolean","integer","number","date"];function gte(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Mk.length,r=Mk.map((o,s)=>s+1);for(let a,l,o=0,s=0;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<i;++a)if(r[a]&&j4e(l)&&!Mk[a](l)&&(r[a]=0,++s,s===Mk.length))return"string";return Y4e[r.reduce((o,s)=>0===o?s:o,0)-1]}function mte(e,t){return t.reduce((n,i)=>(n[i]=gte(e,i),n),{})}function _te(e){const t=function(n,i){const r={delimiter:e};return GN(n,i?Xn(i,r):r)};return t.responseType="text",t}function GN(e,t){return t.header&&(e=t.header.map(kt).join(t.delimiter)+"\n"+e),Xze(t.delimiter).parse(e+"")}function qN(e,t){const n=t&&t.property?_a(t.property):vs;return jt(e)&&!function X4e(e){return!("function"!=typeof Buffer||!Yn(Buffer.isBuffer))&&Buffer.isBuffer(e)}(e)?function K4e(e,t){return!ot(e)&&JJ(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t):n(JSON.parse(e))}GN.responseType="text",qN.responseType="json";const Z4e={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function yte(e,t){let n,i,r,o;return e=qN(e,t),t&&t.feature?(n=Kze.Z,r=t.feature):t&&t.mesh?(n=Zze.Z,r=t.mesh,o=Z4e[t.filter]):nt("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,o):nt("Invalid TopoJSON object: "+r),i&&i.features||[i]}yte.responseType="json";const xk={dsv:GN,csv:_te(","),tsv:_te("\t"),json:qN,topojson:yte};function YN(e,t){return arguments.length>1?(xk[e]=t,this):bn(xk,e)?xk[e]:null}function vte(e){const t=YN(e);return t&&t.responseType||"text"}function bte(e,t,n,i){const r=YN((t=t||{}).type||"json");return r||nt("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function Q4e(e,t,n,i){if(!e.length)return;const r=sC();n=n||r.timeParse,i=i||r.utcParse;let s,a,l,c,u,d,o=e.columns||Object.keys(e[0]);"auto"===t&&(t=mte(e,o)),o=Object.keys(t);const f=o.map(h=>{const y=t[h];let b,C;if(y&&(y.startsWith("date:")||y.startsWith("utc:")))return b=y.split(/:(.+)?/,2),C=b[1],("'"===C[0]&&"'"===C[C.length-1]||'"'===C[0]&&'"'===C[C.length-1])&&(C=C.slice(1,-1)),("utc"===b[0]?i:n)(C);if(!WN[y])throw Error("Illegal format pattern: "+h+":"+y);return WN[y]});for(l=0,u=e.length,d=o.length;l<u;++l)for(s=e[l],c=0;c<d;++c)a=o[c],s[a]=f[c](s[a])}(e,t.parse,n,i),bn(e,"columns")&&delete e.columns,e}const Ek=function N4e(e,t){return n=>({options:n||{},sanitize:B4e,load:$4e,fileAccess:!!t,file:z4e(t),http:V4e(e)})}(typeof fetch<"u"&&fetch,null);function Sk(e){const t=e||vs,n=[],i={};return n.add=r=>{const o=t(r);return i[o]||(i[o]=1,n.push(r)),n},n.remove=r=>{const o=t(r);if(i[o]){i[o]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}function kk(e,t){return XN.apply(this,arguments)}function XN(){return XN=Pr(function*(e,t){try{yield t(e)}catch(n){e.error(n)}}),XN.apply(this,arguments)}const wte=Symbol("vega_id");let J4e=1;function Ak(e){return!(!e||!wn(e))}function wn(e){return e[wte]}function Cte(e,t){return e[wte]=t,e}function Li(e){const t=e===Object(e)?e:{data:e};return wn(t)?t:Cte(t,J4e++)}function KN(e){return Ok(e,Li({}))}function Ok(e,t){for(const n in e)t[n]=e[n];return t}function Mte(e,t){return Cte(t,wn(e))}function Eg(e,t){return e?t?(n,i)=>e(n,i)||wn(t(n))-wn(t(i)):(n,i)=>e(n,i)||wn(n)-wn(i):null}function xte(e){return e&&e.constructor===Sg}function Sg(){const e=[],t=[],n=[],i=[],r=[];let o=null,s=!1;return{constructor:Sg,insert(a){const l=Ht(a),c=l.length;for(let u=0;u<c;++u)e.push(l[u]);return this},remove(a){const l=Yn(a)?i:t,c=Ht(a),u=c.length;for(let d=0;d<u;++d)l.push(c[d]);return this},modify(a,l,c){const u={field:l,value:ws(c)};return Yn(a)?(u.filter=a,r.push(u)):(u.tuple=a,n.push(u)),this},encode(a,l){return Yn(a)?r.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const c={},u={};let d,f,h,y,b,C;for(d=0,f=l.length;d<f;++d)c[wn(l[d])]=1;for(d=0,f=t.length;d<f;++d)b=t[d],c[wn(b)]=-1;for(d=0,f=i.length;d<f;++d)y=i[d],l.forEach(O=>{y(O)&&(c[wn(O)]=-1)});for(d=0,f=e.length;d<f;++d)b=e[d],C=wn(b),c[C]?c[C]=1:a.add.push(Li(e[d]));for(d=0,f=l.length;d<f;++d)b=l[d],c[wn(b)]<0&&a.rem.push(b);function k(O,I,z){z?O[I]=z(O):a.encode=I,s||(u[wn(O)]=O)}for(d=0,f=n.length;d<f;++d)h=n[d],b=h.tuple,y=h.field,C=c[wn(b)],C>0&&(k(b,y,h.value),a.modifies(y));for(d=0,f=r.length;d<f;++d)h=r[d],y=h.filter,l.forEach(O=>{y(O)&&c[wn(O)]>0&&k(O,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||i.length?l.filter(O=>c[wn(O)]>0):l.slice();else for(C in u)a.mod.push(u[C]);return(o||null==o&&(t.length||i.length))&&a.clean(!0),a}}}const Dk="_:mod:_";function Tk(){Object.defineProperty(this,Dk,{writable:!0,value:{}})}Tk.prototype={set(e,t,n,i){const r=this,o=r[e],s=r[Dk];return null!=t&&t>=0?(o[t]!==n||i)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||i)&&(r[e]=n,s[e]=ot(n)?1+n.length:-1),r},modified(e,t){const n=this[Dk];if(!arguments.length){for(const i in n)if(n[i])return!0;return!1}if(ot(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Dk]={},this}};let eHe=0;const nHe=new Tk;function sr(e,t,n,i){this.id=++eHe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function Ete(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}sr.prototype={targets(){return this._targets||(this._targets=Sk(Vw))},set(e){return this.value!==e?(this.value=e,1):0},skip:Ete(1),modified:Ete(2),parameters(e,t,n){t=!1!==t;const i=this._argval=this._argval||new Tk,r=this._argops=this._argops||[],o=[];let s,a,l,c;const u=(d,f,h)=>{h instanceof sr?(h!==this&&(t&&h.targets().add(this),o.push(h)),r.push({op:h,name:d,index:f})):i.set(d,f,h)};for(s in e)if(a=e[s],"pulse"===s)Ht(a).forEach(d=>{d instanceof sr?d!==this&&(d.targets().add(this),o.push(d)):nt("Pulse parameters must be operator instances.")}),this.source=a;else if(ot(a))for(i.set(s,-1,Array(l=a.length)),c=0;c<l;++c)u(s,c,a[c]);else u(s,-1,a);return this.marshall().clear(),n&&(r.initonly=!0),o},marshall(e){const t=this._argval||nHe,n=this._argops;let i,r,o,s;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],o=i.op,s=o.modified()&&o.stamp===e,t.set(i.name,i.index,o.value,s);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let aHe=0;function Pk(e,t,n){this.id=++aHe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function vh(e,t,n){return new Pk(e,t,n)}function ZN(){return ZN=Pr(function*(e,t){const n=this;let r,i=0;try{r=yield n.loader().load(e,{context:"dataflow",response:vte(t&&t.type)});try{r=n.parse(r,t)}catch(o){i=-2,n.warn("Data ingestion failed",e,o)}}catch(o){i=-1,n.warn("Loading failed",e,o)}return{data:r,status:i}}),ZN.apply(this,arguments)}function QN(){return QN=Pr(function*(e,t,n){const i=this,r=i._pending||hHe(i);r.requests+=1;const o=yield i.request(t,n);return i.pulse(e,i.changeset().remove(Il).insert(o.data||[])),r.done(),o}),QN.apply(this,arguments)}function hHe(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}Pk.prototype={_filter:Il,_apply:vs,targets(){return this._targets||(this._targets=Sk(Vw))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=vh(e);return this.targets().add(t),t},apply(e){const t=vh(null,e);return this.targets().add(t),t},merge(){const e=vh();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=vh();return this.targets().add(vh(null,null,lN(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(vh(null,null,()=>n=!0)),t.targets().add(vh(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Il,this._targets=null}};const pHe={skip:!0};function mHe(e,t,n,i,r,o){const s=Xn({},o,pHe);let a,l;Yn(n)||(n=ws(n)),void 0===i?a=c=>e.touch(n(c)):Yn(i)?(l=new sr(null,i,r,!1),a=c=>{l.evaluate(c);const u=n(c),d=l.value;xte(d)?e.pulse(u,d,o):e.update(u,d,s)}):a=c=>e.update(n(c),i,s),t.apply(a)}function _He(e,t,n,i,r,o){if(void 0===i)t.targets().add(n);else{const s=o||{},a=new sr(null,function yHe(e,t){return t=Yn(t)?t:ws(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}(n,i),r,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}const Rk={};function wh(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function JN(e,t){const n=[];return mh(e,t,i=>n.push(i)),n}function Dte(e,t){const n={};return e.visit(t,i=>{n[wn(i)]=1}),i=>n[wn(i)]?null:i}function Ik(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}function e$(e,t,n,i){const r=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=r.fields||(r.fields={});for(const l in s.fields)a[l]=1}s.changed(r.ADD)&&(o|=r.ADD),s.changed(r.REM)&&(o|=r.REM),s.changed(r.MOD)&&(o|=r.MOD)}this.changes=o}function t$(){return t$=Pr(function*(e,t,n){const i=this,r=[];if(i._pulse)return Tte(i);if(i._pending&&(yield i._pending),t&&(yield kk(i,t)),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new wh(i,o,e),i._touched.forEach(u=>i._enqueue(u,!0)),i._touched=Sk(Vw);let a,l,c,s=0;try{for(;i._heap.size()>0;)a=i._heap.pop(),a.rank===a.qrank?(l=a.run(i._getPulse(a,e)),l.then?l=yield l:l.async&&(r.push(l.async),l=Rk),l!==Rk&&a._targets&&a._targets.forEach(u=>i._enqueue(u)),++s):i._enqueue(a,!0)}catch(u){i._heap.clear(),c=u}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${s} operators`),c&&(i._postrun=[],i.error(c)),i._postrun.length){const u=i._postrun.sort((d,f)=>f.priority-d.priority);i._postrun=[];for(let d=0;d<u.length;++d)yield kk(i,u[d].callback)}return n&&(yield kk(i,n)),r.length&&Promise.all(r).then(u=>i.runAsync(null,()=>{u.forEach(d=>{try{d(i)}catch(f){i.error(f)}})})),i}),t$.apply(this,arguments)}function n$(){return n$=Pr(function*(e,t,n){for(;this._running;)yield this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}),n$.apply(this,arguments)}function Tte(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}wh.prototype={StopPropagation:Rk,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new wh(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new wh(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(64&t)&&(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,Dte(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ot(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?ot(e)?e.some(i=>n[i]):n[e]:!!n)},filter(e,t){const n=this;return 1&e&&(n.addF=Ik(n.addF,t)),2&e&&(n.remF=Ik(n.remF,t)),4&e&&(n.modF=Ik(n.modF,t)),16&e&&(n.srcF=Ik(n.srcF,t)),n},materialize(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=JN(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=JN(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=JN(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(16&e)return mh(n.source,n.srcF,i),n;1&e&&mh(n.add,n.addF,i),2&e&&mh(n.rem,n.remF,i),4&e&&mh(n.mod,n.modF,i);const r=n.source;if(8&e&&r){const o=n.add.length+n.mod.length;o===r.length||mh(r,o?Dte(n,5):n.srcF,i)}return n}},St(e$,wh,{fork(e){const t=new wh(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ot(e)?e.some(i=>n[i]):n[e]:0},filter(){nt("MultiPulse does not support filtering.")},materialize(){nt("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let o=0;if(e&n.SOURCE)for(;o<r;++o)i[o].visit(e,t);else for(;o<r;++o)i[o].stamp===n.stamp&&i[o].visit(e,t);return n}});const i$={skip:!1,force:!1};function Pte(e,t,n,i){let r,o;const s=e[n];for(;n>t&&(o=n-1>>1,r=e[o],i(s,r)<0);)e[n]=r,n=o;return e[n]=s}function Zy(){this.logger(iN()),this.logLevel(tN),this._clock=0,this._rank=0,this._locale=zN();try{this._loader=Ek()}catch{}this._touched=Sk(Vw),this._input={},this._pulse=null,this._heap=function PHe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Pte(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,function RHe(e,t,n){const i=t,r=e.length,o=e[t];let a,s=1+(t<<1);for(;s<r;)a=s+1,a<r&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,Pte(e,i,t,n)}(t,0,e)):i=n,i}}}((e,t)=>e.qrank-t.qrank),this._postrun=[]}function lC(e){return function(){return this._log[e].apply(this,arguments)}}function Qe(e,t){sr.call(this,e,null,t)}Zy.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:lC("error"),warn:lC("warn"),info:lC("info"),debug:lC("debug"),logLevel:lC("level"),cleanThreshold:1e4,add:function oHe(e,t,n,i){let o,r=1;return e instanceof sr?o=e:e&&e.prototype instanceof sr?o=new e:Yn(e)?o=new sr(null,e):(r=0,o=new sr(e,t)),this.rank(o),r&&(i=n,n=t),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o},connect:function sHe(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank)return void this.rerank(e)},rank:function vHe(e){e.rank=++this._rank},rerank:function bHe(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&nt("Cycle detected in dataflow graph.")},pulse:function THe(e,t,n){this.touch(e,n||i$);const i=new wh(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this},touch:function OHe(e,t){const n=t||i$;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function DHe(e,t,n){const i=n||i$;return(e.set(t)||i.force)&&this.touch(e,i),this},changeset:Sg,ingest:function uHe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function cHe(e,t){const n=this.locale();return bte(e,t,n.timeParse,n.utcParse)},preload:function fHe(e,t,n){return QN.apply(this,arguments)},request:function dHe(e,t){return ZN.apply(this,arguments)},events:function lHe(e,t,n,i){const r=this,o=vh(n,i),s=function(c){c.dataflow=r;try{o.receive(c)}catch(u){r.error(u)}finally{r.run()}};let a;a="string"==typeof e&&typeof document<"u"?document.querySelectorAll(e):Ht(e);const l=a.length;for(let c=0;c<l;++c)a[c].addEventListener(t,s);return o},on:function gHe(e,t,n,i,r){return(e instanceof sr?_He:mHe)(this,e,t,n,i,r),this},evaluate:function CHe(e,t,n){return t$.apply(this,arguments)},run:function xHe(e,t,n){return this._pulse?Tte(this):(this.evaluate(e,t,n),this)},runAsync:function MHe(e,t,n){return n$.apply(this,arguments)},runAfter:function EHe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}},_enqueue:function SHe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function kHe(e,t){const n=e.source,i=this._clock;return n&&ot(n)?new e$(this,i,n.map(r=>r.pulse),t):this._input[e.id]||function AHe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Rk&&(e.source=t.source),e)}(this._pulse,n&&n.pulse)}},St(Qe,sr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Qy={};function Rte(e){const t=Ite(e);return t&&t.Definition||null}function Ite(e){return e=e&&e.toLowerCase(),bn(Qy,e)?Qy[e]:null}function kg(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function r$(e,t){let n;if(void 0===t)for(const i of e)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function Fk(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function Lte(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=void 0===r?Fk:function Fte(e=Zd){if(e===Zd)return Fk;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||0===i?i:(0===e(n,n))-(0===e(t,t))}}(r);i>n;){if(i-n>600){const l=i-n+1,c=t-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1);Lte(e,t,Math.max(n,Math.floor(t-c*d/l+f)),Math.min(i,Math.floor(t+(l-c)*d/l+f)),r)}const o=e[t];let s=n,a=i;for(cC(e,n,t),r(e[i],o)>0&&cC(e,n,i);s<a;){for(cC(e,s,a),++s,--a;r(e[s],o)<0;)++s;for(;r(e[a],o)>0;)--a}0===r(e[n],o)?cC(e,n,a):(++a,cC(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function cC(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Nte(e){return null===e?NaN:+e}function o$(e,t,n){if(e=Float64Array.from(function*IHe(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(i=+i)>=i&&(yield i)}}(e,n)),(i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return r$(e);if(t>=1)return kg(e);var i,r=(i-1)*t,o=Math.floor(r),s=kg(Lte(e,o).subarray(0,o+1));return s+(r$(e.subarray(o+1))-s)*(r-o)}}function $te(e,t,n=Nte){if((i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(r-o)}}function Bte(e,t){return o$(e,.5,t)}function*zte(e,t){if(null==t)for(let n of e)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),null!=i&&""!==i&&(i=+i)>=i&&(yield i)}}function s$(e,t,n){const i=Float64Array.from(zte(e,n));return i.sort(Zd),t.map(r=>$te(i,r))}function a$(e,t){return s$(e,[.25,.5,.75],t)}function l$(e,t){const n=e.length,i=function LHe(e,t){const n=function FHe(e,t){let i,n=0,r=0,o=0;if(void 0===t)for(let s of e)null!=s&&(s=+s)>=s&&(i=s-r,r+=i/++n,o+=i*(s-r));else{let s=-1;for(let a of e)null!=(a=t(a,++s,e))&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r))}if(n>1)return o/(n-1)}(e,t);return n&&Math.sqrt(n)}(e,t),r=a$(e,t);return 1.06*(Math.min(i,(r[2]-r[0])/1.34)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function Hte(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a,l,c,u,d,f,o=e.extent[0],s=e.extent[1];const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(u=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<u;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/i),c=e.minstep||0,a=Math.max(c,Math.pow(n,Math.round(Math.log(h)/i)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=r.length;d<f;++d)u=a/r[d],u>=c&&h/u<=t&&(a=u)}u=Math.log(a);const b=Math.pow(n,-(u>=0?0:1+~~(-u/i))-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(o/a+b)*a,o=o<u?u-a:u,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Nl=Math.random;function NHe(e){Nl=e}function Vte(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(zte(e,i)),o=r.length,s=t;let a,l,c,u;for(c=0,u=Array(s);c<s;++c){for(a=0,l=0;l<o;++l)a+=r[~~(Nl()*o)];u[c]=a/o}return u.sort(Zd),[o$(u,n/2),o$(u,1-n/2)]}function Ute(e,t,n,i){i=i||(f=>f);const r=e.length,o=new Float64Array(r);let d,s=0,a=1,l=i(e[0]),c=l,u=l+t;for(;a<r;++a){if(d=i(e[a]),d>=u){for(c=(l+c)/2;s<a;++s)o[s]=c;u=d+t,l=d}c=d}for(c=(l+c)/2;s<a;++s)o[s]=c;return n?function $He(e,t){const n=e.length;let o,s,i=0,r=1;for(;e[i]===e[r];)++r;for(;r<n;){for(o=r+1;e[r]===e[o];)++o;if(e[r]-e[r-1]<t){for(s=r+(i+o-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=o}return e}(o,t+t/4):o}function BHe(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function zHe(e,t){let n,i,r;null==t&&(t=e,e=0);const o={min(s){return arguments.length?(n=s||0,r=i-n,o):n},max(s){return arguments.length?(i=s||0,r=i-n,o):i},sample:()=>n+Math.floor(r*Nl()),pdf:s=>s===Math.floor(s)&&s>=n&&s<i?1/r:0,cdf(s){const a=Math.floor(s);return a<n?0:a>=i?1:(a-n+1)/r},icdf:s=>s>=0&&s<=1?n-1+Math.floor(s*r):NaN};return o.min(e).max(t)}const jte=Math.sqrt(2*Math.PI),HHe=Math.SQRT2;let uC=NaN;function Lk(e,t){e=e||0,t=t??1;let r,o,n=0,i=0;if(uC==uC)n=uC,uC=NaN;else{do{n=2*Nl()-1,i=2*Nl()-1,r=n*n+i*i}while(0===r||r>1);o=Math.sqrt(-2*Math.log(r)/r),n*=o,uC=i*o}return e+n*t}function c$(e,t,n){const i=(e-(t||0))/(n=n??1);return Math.exp(-.5*i*i)/(n*jte)}function Nk(e,t,n){const i=(e-(t=t||0))/(n=n??1),r=Math.abs(i);let o;if(r>37)o=0;else{const s=Math.exp(-r*r/2);let a;r<7.07106781186547?(a=.0352624965998911*r+.700383064443688,a=a*r+6.37396220353165,a=a*r+33.912866078383,a=a*r+112.079291497871,a=a*r+221.213596169931,a=a*r+220.206867912376,o=s*a,a=.0883883476483184*r+1.75566716318264,a=a*r+16.064177579207,a=a*r+86.7807322029461,a=a*r+296.564248779674,a=a*r+637.333633378831,a=a*r+793.826512519948,a=a*r+440.413735824752,o/=a):(a=r+.65,a=r+4/a,a=r+3/a,a=r+2/a,a=r+1/a,o=s/a/2.506628274631)}return i>0?1-o:o}function $k(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*HHe*function VHe(e){let n,t=-Math.log((1-e)*(1+e));return t<6.25?(t-=3.125,n=-364441206401782e-35,n=n*t-16850591381820166e-35,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=n*t-1333171662854621e-31,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=n*t-4054566272975207e-29,n=n*t-8151934197605472e-29,n=26335093153082323e-28+n*t,n=n*t-12975133253453532e-27,n=n*t-5415412054294628e-26,n=1.0512122733215323e-9+n*t,n=n*t-4.112633980346984e-9,n=n*t-2.9070369957882005e-8,n=4.2347877827932404e-7+n*t,n=n*t-13654692000834679e-22,n=n*t-13882523362786469e-21,n=.00018673420803405714+n*t,n=n*t-.000740702534166267,n=n*t-.006033670871430149,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=2.2137376921775787e-9,n=9.075656193888539e-8+n*t,n=n*t-2.7517406297064545e-7,n=1.8239629214389228e-8+n*t,n=15027403968909828e-22+n*t,n=n*t-4013867526981546e-21,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=n*t-47318229009055734e-21,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=n*t-.0003550375203628475,n=.0009532893797373805+n*t,n=n*t-.0016882755560235047,n=.002491442096107851+n*t,n=n*t-.003751208507569241,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=n*t-2.555641816996525e-10,n=1.5076572693500548e-9+n*t,n=n*t-3.789465440126737e-9,n=7.61570120807834e-9+n*t,n=n*t-1.496002662714924e-8,n=2.914795345090108e-8+n*t,n=n*t-6.771199775845234e-8,n=2.2900482228026655e-7+n*t,n=n*t-9.9298272942317e-7,n=4526062597223154e-21+n*t,n=n*t-1968177810553167e-20,n=7599527703001776e-20+n*t,n=n*t-.00021503011930044477,n=n*t-.00013871931833623122,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}(2*e-1)}function u$(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>Lk(n,i),pdf:o=>c$(o,n,i),cdf:o=>Nk(o,n,i),icdf:o=>$k(o,n,i)};return r.mean(e).stdev(t)}function d$(e,t){const n=u$();let i=0;const r={data(o){return arguments.length?(e=o,i=o?o.length:0,r.bandwidth(t)):e},bandwidth(o){return arguments.length?(!(t=o)&&e&&(t=l$(e)),r):t},sample:()=>e[~~(Nl()*i)]+t*n.sample(),pdf(o){let s=0,a=0;for(;a<i;++a)s+=n.pdf((o-e[a])/t);return s/t/i},cdf(o){let s=0,a=0;for(;a<i;++a)s+=n.cdf((o-e[a])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function f$(e,t){return e=e||0,t=t??1,Math.exp(e+Lk()*t)}function h$(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*jte*e)}function p$(e,t,n){return Nk(Math.log(e),t,n)}function g$(e,t,n){return Math.exp($k(e,t,n))}function Wte(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>f$(n,i),pdf:o=>h$(o,n,i),cdf:o=>p$(o,n,i),icdf:o=>g$(o,n,i)};return r.mean(e).stdev(t)}function Gte(e,t){let i,n=0;const o={weights(s){return arguments.length?(i=function r(s){const a=[];let c,l=0;for(c=0;c<n;++c)l+=a[c]=null==s[c]?1:+s[c];for(c=0;c<n;++c)a[c]/=l;return a}(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Nl();let a=e[n-1],l=i[0],c=0;for(;c<n-1;l+=i[++c])if(s<l){a=e[c];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=i[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=i[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function m$(e,t){return null==t&&(t=e??1,e=0),e+(t-e)*Nl()}function _$(e,t,n){return null==n&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function y$(e,t,n){return null==n&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function v$(e,t,n){return null==n&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function qte(e,t){let n,i;const r={min(o){return arguments.length?(n=o||0,r):n},max(o){return arguments.length?(i=o??1,r):i},sample:()=>m$(n,i),pdf:o=>_$(o,n,i),cdf:o=>y$(o,n,i),icdf:o=>v$(o,n,i)};return null==t&&(t=e??1,e=0),r.min(e).max(t)}function b$(e,t,n){let i=0,r=0;for(const o of e){const s=n(o);null==t(o)||null==s||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function dC(e,t,n,i){const r=i-e*e,o=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-o*e,o]}function Bk(e,t,n,i){e=e.filter(h=>{let y=t(h),b=n(h);return null!=y&&(y=+y)>=y&&null!=b&&(b=+b)>=b}),i&&e.sort((h,y)=>t(h)-t(y));const r=e.length,o=new Float64Array(r),s=new Float64Array(r);let u,d,f,a=0,l=0,c=0;for(f of e)o[a]=u=+t(f),s[a]=d=+n(f),++a,l+=(u-l)/a,c+=(d-c)/a;for(a=0;a<r;++a)o[a]-=l,s[a]-=c;return[o,s,l,c]}function fC(e,t,n,i){let o,s,r=-1;for(const a of e)o=t(a),s=n(a),null!=o&&(o=+o)>=o&&null!=s&&(s=+s)>=s&&i(o,s,++r)}function Jy(e,t,n,i,r){let o=0,s=0;return fC(e,t,n,(a,l)=>{const c=l-r(a),u=l-i;o+=c*c,s+=u*u}),1-o/s}function w$(e,t,n){let i=0,r=0,o=0,s=0,a=0;fC(e,t,n,(u,d)=>{++a,i+=(u-i)/a,r+=(d-r)/a,o+=(u*d-o)/a,s+=(u*u-s)/a});const l=dC(i,r,o,s),c=u=>l[0]+l[1]*u;return{coef:l,predict:c,rSquared:Jy(e,t,n,r,c)}}function Yte(e,t,n){let i=0,r=0,o=0,s=0,a=0;fC(e,t,n,(u,d)=>{++a,u=Math.log(u),i+=(u-i)/a,r+=(d-r)/a,o+=(u*d-o)/a,s+=(u*u-s)/a});const l=dC(i,r,o,s),c=u=>l[0]+l[1]*Math.log(u);return{coef:l,predict:c,rSquared:Jy(e,t,n,r,c)}}function Xte(e,t,n){const[i,r,o,s]=Bk(e,t,n);let f,h,y,a=0,l=0,c=0,u=0,d=0;fC(e,t,n,(O,I)=>{f=i[d++],h=Math.log(I),y=f*I,a+=(I*h-a)/d,l+=(y-l)/d,c+=(y*h-c)/d,u+=(f*y-u)/d});const[b,C]=dC(l/s,a/s,c/s,u/s),k=O=>Math.exp(b+C*(O-o));return{coef:[Math.exp(b-C*o),C],predict:k,rSquared:Jy(e,t,n,s,k)}}function Kte(e,t,n){let i=0,r=0,o=0,s=0,a=0,l=0;fC(e,t,n,(d,f)=>{const h=Math.log(d),y=Math.log(f);++l,i+=(h-i)/l,r+=(y-r)/l,o+=(h*y-o)/l,s+=(h*h-s)/l,a+=(f-a)/l});const c=dC(i,r,o,s),u=d=>c[0]*Math.pow(d,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:u,rSquared:Jy(e,t,n,a,u)}}function C$(e,t,n){const[i,r,o,s]=Bk(e,t,n),a=i.length;let h,y,b,C,l=0,c=0,u=0,d=0,f=0;for(h=0;h<a;)y=i[h],b=r[h++],C=y*y,l+=(C-l)/h,c+=(C*y-c)/h,u+=(C*C-u)/h,d+=(y*b-d)/h,f+=(C*b-f)/h;const k=u-l*l,O=l*k-c*c,I=(f*l-d*c)/O,z=(d*k-f*c)/O,q=-I*l,ne=K=>I*(K-=o)*K+z*K+q+s;return{coef:[q-z*o+I*o*o+s,z-2*I*o,I],predict:ne,rSquared:Jy(e,t,n,s,ne)}}function Zte(e,t,n,i){if(0===i)return b$(e,t,n);if(1===i)return w$(e,t,n);if(2===i)return C$(e,t,n);const[r,o,s,a]=Bk(e,t,n),l=r.length,c=[],u=[],d=i+1;let f,h,y,b,C;for(f=0;f<d;++f){for(y=0,b=0;y<l;++y)b+=Math.pow(r[y],f)*o[y];for(c.push(b),C=new Float64Array(d),h=0;h<d;++h){for(y=0,b=0;y<l;++y)b+=Math.pow(r[y],f+h);C[h]=b}u.push(C)}u.push(c);const k=function jHe(e){const t=e.length-1,n=[];let i,r,o,s,a;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(o=i;o<t+1;++o)a=e[o][i],e[o][i]=e[o][s],e[o][s]=a;for(r=i+1;r<t;++r)for(o=t;o>=i;o--)e[o][r]-=e[o][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(a=0,o=r+1;o<t;++o)a+=e[o][r]*n[o];n[r]=(e[t][r]-a)/e[r][r]}return n}(u),O=I=>{let z=a+k[0]+k[1]*(I-=s)+k[2]*I*I;for(f=3;f<d;++f)z+=k[f]*Math.pow(I,f);return z};return{coef:UHe(d,k,-s,a),predict:O,rSquared:Jy(e,t,n,a,O)}}function UHe(e,t,n,i){const r=Array(e);let o,s,a,l;for(o=0;o<e;++o)r[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,r[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,r[o-s]+=a*Math.pow(n,s)*l;return r[0]+=i,r}function ene(e,t,n,i){const[r,o,s,a]=Bk(e,t,n,!0),l=r.length,c=Math.max(2,~~(i*l)),u=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=2;){const y=[0,c-1];for(let C=0;C<l;++C){const k=r[C],O=y[0],I=y[1];let q=0,ne=0,K=0,le=0,me=0;const ge=1/Math.abs(r[k-r[O]>r[I]-k?O:I]-k||1);for(let ve=O;ve<=I;++ve){const Z=r[ve],ae=o[ve],oe=WHe(Math.abs(k-Z)*ge)*f[ve],de=Z*oe;q+=oe,ne+=de,K+=ae*oe,le+=ae*de,me+=Z*de}const[ye,Se]=dC(ne/q,K/q,le/q,me/q);u[C]=ye+Se*k,d[C]=Math.abs(o[C]-u[C]),GHe(r,C+1,y)}if(2===h)break;const b=Bte(d);if(Math.abs(b)<1e-12)break;for(let k,O,C=0;C<l;++C)k=d[C]/(6*b),f[C]=k>=1?1e-12:(O=1-k*k)*O}return function qHe(e,t,n,i){const r=e.length,o=[];let c,s=0,a=0,l=[];for(;s<r;++s)c=e[s]+n,l[0]===c?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=i,l=[c,t[s]],o.push(l));return l[1]+=i,o}(r,u,s,a)}function WHe(e){return(e=1-e*e*e)*e*e}function GHe(e,t,n){const i=e[t];let r=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>r&&e[o]-i<=i-e[r];)n[0]=++r,n[1]=o,++o}const YHe=.5*Math.PI/180;function zk(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],o=t[0],s=t[1],a=s-o,l=a/i,c=[r(o)],u=[];if(n===i){for(let b=1;b<i;++b)c.push(r(o+b/n*a));return c.push(r(s)),c}u.push(r(s));for(let b=n;--b>0;)u.push(r(o+b/n*a));let d=c[0],f=u[u.length-1];const h=1/a,y=function XHe(e,t){let n=e,i=e;const r=t.length;for(let o=0;o<r;++o){const s=t[o][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}(d[1],u);for(;f;){const b=r((d[0]+f[0])/2);b[0]-d[0]>=l&&KHe(d,b,f,h,y)>YHe?u.push(b):(d=f,c.push(f),u.pop()),f=u[u.length-1]}return c}function KHe(e,t,n,i,r){const o=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(o-s)}function nl(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}function M$(e){return e&&e.length?1===e.length?e[0]:function QHe(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}(e):function(){return""}}function tne(e,t,n){return n||e+(t?"_"+t:"")}const x$=()=>{},JHe={init:x$,add:x$,rem:x$,idx:0},hC={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},pC=Object.keys(hC).filter(e=>"__count__"!==e);function nne(e,t){return hC[e](t)}function ine(e,t){return e.idx-t.idx}function n6e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function i6e(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t))):++this.missing}function r6e(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t))):--this.missing}function o6e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function rne(e,t){const n=t||vs,i=function t6e(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{!i.req||i.req.forEach(r=>{t[r]||n(t[r]=hC[r]())})};return e.forEach(n),Object.values(t).sort(ine)}(e),r=e.slice().sort(ine);function o(s){this._ops=i,this._out=r,this.cell=s,this.init()}return o.prototype.init=n6e,o.prototype.add=i6e,o.prototype.rem=r6e,o.prototype.set=o6e,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function E$(e){this._key=e?_a(e):wn,this.reset()}[...pC,"__count__"].forEach(e=>{hC[e]=function e6e(e,t){return n=>Xn({name:e,out:n||e},JHe,t)}(e,hC[e])});const es=E$.prototype;function Ch(e){Qe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function S$(e){Qe.call(this,null,e)}function one(e,t,n){const i=e;let r=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[i(l)]=++a,size:()=>r.length,data:(l,c)=>(a&&(r=r.filter(u=>!s[i(u)]),s={},a=0),c&&l&&r.sort(l),o.length&&(r=l?iee(l,r,o.sort(l)):r.concat(o),o=[]),r)}}function k$(e){Qe.call(this,[],e)}function sne(e){sr.call(this,null,a6e,e)}function a6e(e){return this.value&&!e.modified()?this.value:aN(e.fields,e.orders)}function A$(e){Qe.call(this,null,e)}function O$(e){Qe.call(this,null,e)}es.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},es.add=function(e){this._add.push(e)},es.rem=function(e){this._rem.push(e)},es.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,o=Array(i-r),s={};let a,l,c;for(a=0;a<r;++a)s[n(t[a])]=1;for(a=0,l=0;a<i;++a)s[n(c=e[a])]?s[n(c)]=0:o[l++]=c;return this._rem=[],this._add=o},es.distinct=function(e){const t=this.values(),n={};let o,i=t.length,r=0;for(;--i>=0;)o=e(t[i])+"",bn(n,o)||(n[o]=1,++r);return r},es.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=ZJ(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},es.argmin=function(e){return this.extent(e)[0]||{}},es.argmax=function(e){return this.extent(e)[1]||{}},es.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},es.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},es.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=a$(this.values(),e),this._get=e),this._q},es.q1=function(e){return this.quartile(e)[0]},es.q2=function(e){return this.quartile(e)[1]},es.q3=function(e){return this.quartile(e)[2]},es.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Vte(this.values(),1e3,.05,e),this._get=e),this._ci},es.ci0=function(e){return this.ci(e)[0]},es.ci1=function(e){return this.ci(e)[1]},Ch.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:pC},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},St(Ch,Qe,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function o(a){let l,c,u,d;for(l in a)for(u=a[l].tuple,c=0;c<r;++c)i[c][d=u[n[c]]]=d}o(e._prev),o(t),function s(a,l,c){const u=n[c],d=i[c++];for(const f in d){const h=a?a+"|"+f:f;l[u]=d[f],c<r?s(h,l,c):t[h]||e.cell(h,l)}}("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(C){const k=Ht(ys(C)),O=k.length;let z,I=0;for(;I<O;++I)i[z=k[I]]||(i[z]=1,t.push(z))}this._dims=Ht(e.groupby),this._dnames=this._dims.map(C=>{const k=Hr(C);return r(C),n.push(k),k}),this.cellkey=e.key?e.key:M$(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.as||[],l=o.length,c={};let u,d,f,h,y,b;for(l!==s.length&&nt("Unmatched number of fields and aggregate ops."),b=0;b<l;++b)u=o[b],d=s[b],null==u&&"count"!==d&&nt("Null aggregate field specified."),h=Hr(u),y=tne(d,h,a[b]),n.push(y),"count"!==d?(f=c[h],f||(r(u),f=c[h]=[],f.field=u,this._measures.push(f)),"count"!==d&&(this._countOnly=!1),f.push(nne(d,y))):this._counts.push(y);return this._measures=this._measures.map(C=>rne(C,C.field)),Object.create(null)},cellkey:M$(),cell(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let o=0;o<r;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new E$),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,o={};for(let s=0;s<r;++s)o[n[s]]=i[s](e);return t?Mte(t.tuple,o):Li(o)},clean(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,o=i.length;r<o;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,o=e.add,s=e.rem,a=e.mod;let l,c,u,d;if(i)for(c in i)l=i[c],(!r||l.num)&&s.push(l.tuple);for(u=0,d=this._alen;u<d;++u)o.push(this.celltuple(t[u])),t[u]=null;for(u=0,d=this._mlen;u<d;++u)l=n[u],(0===l.num&&r?s:a).push(this.celltuple(l)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}}),S$.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},St(S$,Qe,{transform(e,t){const n=!1!==e.interval,i=this._bins(e),r=i.start,o=i.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let c;return c=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(ys(e.field))?t.ADD_MOD:t.ADD,t.visit(c,n?u=>{const d=i(u);u[a]=d,u[l]=null==d?null:r+o*(1+(d-r)/o)}:u=>u[a]=i(u)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Hte(e),i=n.step;let s,a,r=n.start,o=r+Math.ceil((n.stop-r)/i)*i;null!=(s=e.anchor)&&(a=s-(r+i*Math.floor((s-r)/i)),r+=a,o+=a);const l=function(c){let u=bs(t(c));return null==u?null:u<r?-1/0:u>o?1/0:(u=Math.max(r,Math.min(u,o-i)),r+i*Math.floor(1e-14+(u-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=ma(l,ys(t),e.name||"bin_"+Hr(t))}}),k$.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},St(k$,Qe,{transform(e,t){const n=t.fork(t.ALL),i=one(wn,this.value,n.materialize(n.ADD).add),r=e.sort,o=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(Eg(r),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),St(sne,sr),A$.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},St(A$,Qe,{transform(e,t){const n=d=>f=>{for(var y,h=function l6e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(a(f),e.case,o)||[],b=0,C=h.length;b<C;++b)s.test(y=h[b])||d(y)},i=this._parameterCheck(e,t),r=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],c=n(d=>r[d]=1+(r[d]||0)),u=n(d=>r[d]-=1);return i?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,u)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,c;for(a in n)l=i[a],c=n[a]||0,!l&&c?(i[a]=l=Li({}),l[r]=a,l[o]=c,s.add.push(l)):0===c?(l&&s.rem.push(l),n[a]=null,i[a]=null):l[o]!==c&&(l[o]=c,s.mod.push(l));return s.modifies(t)}}),O$.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},St(O$,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],o=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=function c6e(e,t,n,i){for(var l,c,r=[],o={},s=e.length,a=0;a<s;++a)for(o[t]=c=e[a],l=0;l<s;++l)o[n]=e[l],i(o)&&(r.push(Li(o)),(o={})[t]=c);return r}(a,r,o,e.filter||Il)):n.mod=a,n.source=this.value,n.modifies(i)}});const ane={kde:d$,mixture:Gte,normal:u$,lognormal:Wte,uniform:qte};function cne(e,t){const n=e.function;bn(ane,n)||nt("Unknown distribution function: "+n);const i=ane[n]();for(const r in e)"field"===r?i.data((e.from||t()).map(e[r])):"distributions"===r?i[r](e[r].map(o=>cne(o,t))):"function"==typeof i[r]&&i[r](e[r]);return i}function D$(e){Qe.call(this,null,e)}const une=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function dne(e,t){return e?e.map((n,i)=>t[i]||Hr(n)):null}function T$(e,t,n){const i=[],r=d=>d(l);let o,s,a,l,c,u;if(null==t)i.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],c=t.map(r),u=o[c],u||(o[c]=u=[],u.dims=c,i.push(u)),u.push(n(l));return i}function P$(e){Qe.call(this,null,e)}function hne(e){sr.call(this,null,g6e,e),this.modified(!0)}function g6e(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ma(n=>t(n,e),ys(t),Hr(t))}function R$(e){Qe.call(this,[void 0,void 0],e)}function I$(e,t){sr.call(this,e),this.parent=t,this.count=0}function Hk(e){Qe.call(this,{},e),this._keys=$y();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}function pne(e){sr.call(this,null,m6e,e)}function m6e(e){return this.value&&!e.modified()?this.value:ot(e.name)?Ht(e.name).map(t=>_a(t)):_a(e.name,e.as)}function F$(e){Qe.call(this,$y(),e)}function L$(e){Qe.call(this,[],e)}function N$(e){Qe.call(this,[],e)}function $$(e){Qe.call(this,null,e)}function gne(e){Qe.call(this,[],e)}D$.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:une.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:une},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},St(D$,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=cne(e.distribution,function h6e(e){return()=>e.materialize(e.SOURCE).source}(t)),r=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";"pdf"!==s&&"cdf"!==s&&nt("Invalid density method: "+s),!e.extent&&!i.data&&nt("Missing density extent parameter."),s=i[s];const a=e.as||["value","density"],c=zk(s,e.extent||Eu(i.data()),r,o).map(u=>{const d={};return d[a[0]]=u[0],d[a[1]]=u[1],Li(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),P$.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},St(P$,Qe,{transform(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,i=T$(t.source,e.groupby,vs),r=e.smooth||!1,o=e.field,s=e.step||((e,t)=>jw(Eu(e,t))/30)(n,o),a=Eg((y,b)=>o(y)-o(b)),l=e.as||"bin",c=i.length;let h,u=1/0,d=-1/0,f=0;for(;f<c;++f){const y=i[f].sort(a);h=-1;for(const b of Ute(y,s,r,o))b<u&&(u=b),b>d&&(d=b),y[++h][l]=b}return this.value={start:u,stop:d,step:s},t.reflow(!0).modifies(l)}}),St(hne,sr),R$.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},St(R$,Qe,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let o=n[0],s=n[1];if((r||null==o)&&(o=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,a=>{const l=bs(i(a));null!=l&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Hr(i);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}}),St(I$,sr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),St(Hk,Qe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let s,a,o=bn(r,e)&&r[e];return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=i||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new I$(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),r[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&null!=t[r];++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const c=wn(l),u=o.get(c);void 0!==u&&(o.delete(c),a(u).rem(l))}),t.visit(t.ADD,l=>{const c=i(l);o.set(wn(l),c),a(c).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const c=wn(l),u=o.get(c),d=i(l);u===d?a(d).mod(l):(o.set(c,d),a(u).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(wn(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const c=wn(l),u=o.get(c),d=i(l);u!==d&&(o.set(c,d),a(u).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),St(pne,sr),F$.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},St(F$,Qe,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),o=r.add,s=r.rem,a=r.mod,l=e.expr;let c=!0;function u(d){const f=wn(d),h=l(d,e),y=i.get(f);h&&y?(i.delete(f),o.push(d)):h||y?c&&h&&!y&&a.push(d):(i.set(f,1),s.push(d))}return t.visit(t.REM,d=>{const f=wn(d);i.has(f)?i.delete(f):s.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):i.set(wn(d),1)}),t.visit(t.MOD,u),e.modified()&&(c=!1,t.visit(t.REFLOW,u)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}}),L$.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},St(L$,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=dne(i,e.as||[]),o=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=i.map(y=>y(a)),c=l.reduce((y,b)=>Math.max(y,b.length),0);let d,f,h,u=0;for(;u<c;++u){for(f=KN(a),d=0;d<s;++d)f[r[d]]=null==(h=l[d][u])?null:h;o&&(f[o]=u),n.add.push(f)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(r)}}),N$.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},St(N$,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Hr),o=e.as||["key","value"],s=o[0],a=o[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,c=>{for(let d,u=0;u<l;++u)d=KN(c),d[s]=r[u],d[a]=i[u](c),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}}),$$.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},St($$,Qe,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),o=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,s=>s[i]=n(s,e))}}),St(gne,Qe,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let s,a,l,r=this.value,o=e.size-r.length;if(o>0){for(s=[];--o>=0;)s.push(l=Li(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=r.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,r=r.slice(-o);return n.source=this.value=r,n}});const Vk={value:"value",median:Bte,mean:function ZHe(e,t){let n=0,i=0;if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of e)null!=(o=t(o,++r,e))&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n},min:r$,max:kg},_6e=[];function B$(e){Qe.call(this,[],e)}function z$(e){Ch.call(this,e)}function H$(e){Qe.call(this,null,e)}function mne(e){sr.call(this,null,w6e,e)}function w6e(e){return this.value&&!e.modified()?this.value:cN(e.fields,e.flat)}function _ne(e){Qe.call(this,[],e),this._pending=null}function V$(e,t,n){n.forEach(Li);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function U$(e){Qe.call(this,{},e)}function yne(e){sr.call(this,null,M6e,e)}function M6e(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let o,s,i=1/0,r=-1/0;for(o=0;o<n;++o)s=t[o],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function vne(e){sr.call(this,null,x6e,e)}function x6e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function bne(e){Qe.call(this,null,e)}function j$(e){Ch.call(this,e)}function wne(e){Hk.call(this,e)}function W$(e){Qe.call(this,null,e)}function Cne(e){Qe.call(this,null,e)}function G$(e){Qe.call(this,null,e)}function Mne(e){Qe.call(this,null,e)}function q$(e){Qe.call(this,[],e),this.count=0}function Y$(e){Qe.call(this,null,e)}function xne(e){Qe.call(this,null,e),this.modified(!0)}function X$(e){Qe.call(this,null,e)}B$.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},St(B$,Qe,{transform(e,t){var f,h,y,b,C,k,O,I,z,q,n=t.fork(t.ALL),i=function y6e(e){var n,t=e.method||Vk.value;if(null!=Vk[t])return t===Vk.value?(n=void 0!==e.value?e.value:0,()=>n):Vk[t];nt("Unrecognized imputation method: "+t)}(e),r=function v6e(e){const t=e.field;return n=>n?t(n):NaN}(e),o=Hr(e.field),s=Hr(e.key),a=(e.groupby||[]).map(Hr),l=function b6e(e,t,n,i){var c,u,d,f,h,y,b,C,r=k=>k(C),o=[],s=i?i.slice():[],a={},l={};for(s.forEach((k,O)=>a[k]=O+1),f=0,b=e.length;f<b;++f)y=n(C=e[f]),h=a[y]||(a[y]=s.push(y)),(d=l[u=(c=t?t.map(r):_6e)+""])||(d=l[u]=[],o.push(d),d.values=c),d[h-1]=C;return o.domain=s,o}(t.source,e.groupby,e.key,e.keyvals),c=[],u=this.value,d=l.domain.length;for(C=0,I=l.length;C<I;++C)for(y=(f=l[C]).values,h=NaN,O=0;O<d;++O)if(null==f[O]){for(b=l.domain[O],q={_impute:!0},k=0,z=y.length;k<z;++k)q[a[k]]=y[k];q[s]=b,q[o]=Number.isNaN(h)?h=i(f,r):h,c.push(Li(q))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=c,n}}),z$.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:pC},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},St(z$,Ch,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(r=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Xn(o,r[n.cellkey(o)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),H$.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},St(H$,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=T$(i,e.groupby,e.field),o=(e.groupby||[]).map(Hr),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],c=[];let u=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;"pdf"!==a&&"cdf"!==a&&nt("Invalid density method: "+a),"shared"===e.resolve&&(u||(u=Eu(i,e.field)),d=f=e.steps||f),r.forEach(h=>{const y=d$(h,s)[a],b=e.counts?h.length:1;zk(y,u||Eu(h),d,f).forEach(k=>{const O={};for(let I=0;I<o.length;++I)O[o[I]]=h.dims[I];O[l[0]]=k[0],O[l[1]]=k[1]*b,c.push(Li(O))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),St(mne,sr),St(_ne,Qe,{transform(e,t){const n=t.dataflow;return this._pending?V$(this,t,this._pending):function C6e(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?t.StopPropagation:e.values?V$(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Ht(r.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(i=>V$(this,t,Ht(i.data)))}}),U$.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},St(U$,Qe,{transform(e,t){const n=e.fields,i=e.index,r=e.values,o=e.default??null,s=e.modified(),a=n.length;let d,f,h,l=s?t.SOURCE:t.ADD,c=t,u=e.as;return r?(f=r.length,a>1&&!u&&nt('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==a*f&&nt('The "as" parameter has too few output field names.'),u=u||r.map(Hr),d=function(y){for(var k,O,b=0,C=0;b<a;++b)if(null==(O=i.get(n[b](y))))for(k=0;k<f;++k,++C)y[u[C]]=o;else for(k=0;k<f;++k,++C)y[u[C]]=r[k](O)}):(u||nt("Missing output field names."),d=function(y){for(var C,b=0;b<a;++b)C=i.get(n[b](y)),y[u[b]]=C??o}),s?c=t.reflow(!0):(h=n.some(y=>t.modified(y.fields)),l|=h?t.MOD:0),t.visit(l,d),c.modifies(u)}}),St(yne,sr),St(vne,sr),St(bne,Qe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),j$.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:pC,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},St(j$,Ch,{_transform:Ch.prototype.transform,transform(e,t){return this._transform(function E6e(e,t){const n=e.field,i=e.value,r=("count"===e.op?"__count__":e.op)||"sum",o=ys(n).concat(ys(i)),s=function k6e(e,t,n){const i={},r=[];return n.visit(n.SOURCE,o=>{const s=e(o);i[s]||(i[s]=1,r.push(s))}),r.sort(ck),t?r.slice(0,t):r}(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(a=>function S6e(e,t,n,i){return ma(r=>t(r)===e?n(r):NaN,i,e+"")}(a,n,i,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}(e,t),t)}}),St(wne,Hk,{transform(e,t){const n=e.subflow,i=e.field,r=o=>this.subflow(wn(o),n,t,o);return(e.modified("field")||i&&t.modified(ys(i)))&&nt("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,o=>{const s=r(o);i(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=r(o);i(o).forEach(a=>s.add(Li(a)))}),t.visit(t.REM,o=>{const s=r(o);i(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>r(o).mod(o)),t.visit(t.ADD,o=>r(o).add(o)),t.visit(t.REM,o=>r(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}}),W$.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},St(W$,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=dne(e.fields,e.as||[]),o=i?(a,l)=>function A6e(e,t,n,i){for(let r=0,o=n.length;r<o;++r)t[i[r]]=n[r](e);return t}(a,l,i,r):Ok;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=wn(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,Li({}));s[wn(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[wn(a)]))}),n}}),St(Cne,Qe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),G$.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},St(G$,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const o=T$(t.materialize(t.SOURCE).source,e.groupby,e.field),s=(e.groupby||[]).map(Hr),a=[],l=e.step||.01,c=e.probs||nl(l/2,1-1e-14,l),u=c.length;return o.forEach(d=>{const f=s$(d,c);for(let h=0;h<u;++h){const y={};for(let b=0;b<s.length;++b)y[s[b]]=d.dims[b];y[i[0]]=c[h],y[i[1]]=f[h],a.push(Li(y))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),St(Mne,Qe,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const o=wn(r);n.rem.push(i[o]),i[o]=null}),t.visit(t.ADD,r=>{const o=KN(r);i[wn(r)]=o,n.add.push(o)}),t.visit(t.MOD,r=>{const o=i[wn(r)];for(const s in r)o[s]=r[s],n.modifies(s);n.mod.push(o)})),n}}),q$.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},St(q$,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,o=this.value.reduce((u,d)=>(u[wn(d)]=1,u),{});let s=this.value,a=this.count,l=0;function c(u){let d,f;s.length<r?s.push(u):(f=~~((a+1)*Nl()),f<s.length&&f>=l&&(d=s[f],o[wn(d)]&&n.rem.push(d),s[f]=u)),++a}if(t.rem.length&&(t.visit(t.REM,u=>{const d=wn(u);o[d]&&(o[d]=-1,n.rem.push(u)),--a}),s=s.filter(u=>-1!==o[wn(u)])),(t.rem.length||i)&&s.length<r&&t.source&&(l=a=s.length,t.visit(t.SOURCE,u=>{o[wn(u)]||c(u)}),l=-1),i&&s.length>r){const u=s.length-r;for(let d=0;d<u;++d)o[wn(s[d])]=-1,n.rem.push(s[d]);s=s.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{o[wn(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,c),(t.add.length||l<0)&&(n.add=s.filter(u=>!o[wn(u)])),this.count=a,this.value=n.source=s,n}}),Y$.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},St(Y$,Qe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=nl(e.start,e.stop,e.step||1).map(r=>{const o={};return o[i]=r,Li(o)}),n.add=t.add.concat(this.value),n}}),St(xne,Qe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const Ene=["unit0","unit1"];function Sne(e){Qe.call(this,$y(),e)}function kne(e){Qe.call(this,null,e)}X$.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:xN,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Ene}]},St(X$,Qe,{transform(e,t){const n=e.field,i=!1!==e.interval,r="utc"===e.timezone,o=this._floor(e,t),s=(r?Yy:qy)(o.unit).offset,a=e.as||Ene,l=a[0],c=a[1],u=o.step;let d=o.start||1/0,f=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ys(n)))&&(h=(t=t.reflow(!0)).SOURCE,d=1/0,f=-1/0),t.visit(h,y=>{const b=n(y);let C,k;null==b?(y[l]=null,i&&(y[c]=null)):(y[l]=C=k=o(b),i&&(y[c]=k=s(C,u)),C<d&&(d=C),k>f&&(f=k))}),o.start=d,o.stop=f,t.modifies(i?a:l)},_floor(e,t){const n="utc"===e.timezone,{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:Hee({extent:e.extent||Eu(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=SN(i),s=this.value||{},a=(n?Dee:Oee)(o,r);return a.unit=pi(o),a.units=o,a.step=r,a.start=s.start,a.stop=s.stop,this.value=a}}),St(Sne,Qe,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,o=a=>r.set(i(a),a);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>r.delete(i(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}}),St(kne,Qe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Eg(e.sort)):t.source).map(e.field))}});const gC={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=gC.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||nt("ntile num must be greater than zero.");const n=gC.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||nt("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return null!=i?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=function T6e(e,t,n){for(let i=t.length;n<i;++n)if(null!=e(t[n]))return n;return-1}(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}},P6e=Object.keys(gC);function Ane(e){const t=Ht(e.ops),n=Ht(e.fields),i=Ht(e.params),r=Ht(e.as),o=this.outputs=[],s=this.windows=[],a={},l={},c=[],u=[];let d=!0;function f(h){Ht(ys(h)).forEach(y=>a[y]=1)}f(e.sort),t.forEach((h,y)=>{const b=n[y],C=Hr(b),k=tne(h,C,r[y]);if(f(b),o.push(k),bn(gC,h))s.push(function D6e(e,t,n,i){const r=gC[e](t,n);return{init:r.init||fh,update:function(o,s){s[i]=r.next(o)}}}(h,n[y],i[y],k));else{if(null==b&&"count"!==h&&nt("Null aggregate field specified."),"count"===h)return void c.push(k);d=!1;let O=l[C];O||(O=l[C]=[],O.field=b,u.push(O)),O.push(nne(h,k))}}),(c.length||u.length)&&(this.cell=function R6e(e,t,n){e=e.map(l=>rne(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,o=i.agg=Array(r),s=0;s<r;++s)o[s]=new e[s](i);if(i.store)var a=i.data=new E$;return i.add=function(l){if(i.num+=1,!n){a&&a.add(l);for(let c=0;c<r;++c)o[c].add(o[c].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){a&&a.rem(l);for(let c=0;c<r;++c)o[c].rem(o[c].get(l),l)}},i.set=function(l){let c,u;for(a&&a.values(),c=0,u=t.length;c<u;++c)l[t[c]]=i.num;if(!n)for(c=0,u=o.length;c<u;++c)o[c].set(l)},i.init=function(){i.num=0,a&&a.reset();for(let l=0;l<r;++l)o[l].init()},i}(u,c,d)),this.inputs=Object.keys(a)}const One=Ane.prototype;function K$(e){Qe.call(this,{},e),this._mlen=0,this._mods=[]}function I6e(e,t,n,i){const r=i.sort,o=r&&!i.ignorePeers,s=i.frame||[null,0],a=e.data(n),l=a.length,c=o?Yw(r):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||ws(-1)};t.init();for(let d=0;d<l;++d)F6e(u,s,d,l),o&&L6e(u,c),t.update(u,a[d])}function F6e(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function L6e(e,t){const n=e.i0,i=e.i1-1,r=e.compare,o=e.data,s=o.length-1;n>0&&!r(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),i<s&&!r(o[i],o[i+1])&&(e.i1=t.right(o,o[i]))}function Uk(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function jk(e){this._context=e}function Mh(){}function Dne(e){this._context=e}function Tne(e){this._context=e}function Pne(e,t){this._basis=new jk(e),this._beta=t}One.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},One.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,o=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<o;++s)i[s].update(e,t)},K$.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:P6e.concat(pC)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},St(K$,Qe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Eg(e.sort),r=M$(e.groupby),o=a=>this.group(r(a));let s=this.state;(!s||n)&&(s=this.state=new Ane(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)I6e(this._mods[a],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=one(wn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),jk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Uk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Uk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Dne.prototype={areaStart:Mh,areaEnd:Mh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Uk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Tne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Uk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Pne.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var l,i=e[0],r=t[0],o=e[n]-i,s=t[n]-r,a=-1;++a<=n;)this._basis.point(this._beta*e[a]+(1-this._beta)*(i+(l=a/n)*o),this._beta*t[a]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const z6e=function e(t){function n(i){return 1===t?new jk(i):new Pne(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Wk(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Z$(e,t){this._context=e,this._k=(1-t)/6}Z$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wk(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Wk(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const H6e=function e(t){function n(i){return new Z$(i,t)}return n.tension=function(i){return e(+i)},n}(0);function Q$(e,t){this._context=e,this._k=(1-t)/6}Q$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wk(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const V6e=function e(t){function n(i){return new Q$(i,t)}return n.tension=function(i){return e(+i)},n}(0);function J$(e,t){this._context=e,this._k=(1-t)/6}J$.prototype={areaStart:Mh,areaEnd:Mh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Wk(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const U6e=function e(t){function n(i){return new J$(i,t)}return n.tension=function(i){return e(+i)},n}(0);function e3(e,t,n){var i=e._x1,r=e._y1,o=e._x2,s=e._y2;if(e._l01_a>ms){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ms){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/u,s=(s*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,o,s,e._x2,e._y2)}function Rne(e,t){this._context=e,this._alpha=t}Rne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:e3(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const j6e=function e(t){function n(i){return t?new Rne(i,t):new Z$(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Ine(e,t){this._context=e,this._alpha=t}Ine.prototype={areaStart:Mh,areaEnd:Mh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:e3(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const W6e=function e(t){function n(i){return t?new Ine(i,t):new J$(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Fne(e,t){this._context=e,this._alpha=t}Fne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:e3(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const G6e=function e(t){function n(i){return t?new Fne(i,t):new Q$(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Lne(e){this._context=e}function t3(e){return new Lne(e)}function Nne(e){this._context=e}function $ne(e){return e<0?-1:1}function Bne(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return($ne(o)+$ne(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function zne(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function n3(e,t,n){var i=e._x0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,e._y0+a*t,o-a,s-a*n,o,s)}function Gk(e){this._context=e}function Hne(e){this._context=new Vne(e)}function Vne(e){this._context=e}function Une(e){this._context=e}function jne(e){var t,i,n=e.length-1,r=new Array(n),o=new Array(n),s=new Array(n);for(r[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)o[t]-=i=r[t]/o[t-1],s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function qk(e,t){this._context=e,this._t=t}function Wne(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Gne(e){return e[0]}function qne(e){return e[1]}function Yne(e,t){var n=Hi(!0),i=null,r=t3,o=null,s=JE(a);function a(l){var c,d,h,u=(l=Wne(l)).length,f=!1;for(null==i&&(o=r(h=s())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(d,c,l),+t(d,c,l));if(h)return o=null,h+""||null}return e="function"==typeof e?e:void 0===e?Gne:Hi(e),t="function"==typeof t?t:void 0===t?qne:Hi(t),a.x=function(l){return arguments.length?(e="function"==typeof l?l:Hi(+l),a):e},a.y=function(l){return arguments.length?(t="function"==typeof l?l:Hi(+l),a):t},a.defined=function(l){return arguments.length?(n="function"==typeof l?l:Hi(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,null!=i&&(o=r(i)),a):r},a.context=function(l){return arguments.length?(null==l?i=o=null:o=r(i=l),a):i},a}function Xne(e,t,n){var i=null,r=Hi(!0),o=null,s=t3,a=null,l=JE(c);function c(d){var f,h,y,C,O,b=(d=Wne(d)).length,k=!1,I=new Array(b),z=new Array(b);for(null==o&&(a=s(O=l())),f=0;f<=b;++f){if(!(f<b&&r(C=d[f],f,d))===k)if(k=!k)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=f-1;y>=h;--y)a.point(I[y],z[y]);a.lineEnd(),a.areaEnd()}k&&(I[f]=+e(C,f,d),z[f]=+t(C,f,d),a.point(i?+i(C,f,d):I[f],n?+n(C,f,d):z[f]))}if(O)return a=null,O+""||null}function u(){return Yne().defined(r).curve(s).context(o)}return e="function"==typeof e?e:void 0===e?Gne:Hi(+e),t="function"==typeof t?t:Hi(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?qne:Hi(+n),c.x=function(d){return arguments.length?(e="function"==typeof d?d:Hi(+d),i=null,c):e},c.x0=function(d){return arguments.length?(e="function"==typeof d?d:Hi(+d),c):e},c.x1=function(d){return arguments.length?(i=null==d?null:"function"==typeof d?d:Hi(+d),c):i},c.y=function(d){return arguments.length?(t="function"==typeof d?d:Hi(+d),n=null,c):t},c.y0=function(d){return arguments.length?(t="function"==typeof d?d:Hi(+d),c):t},c.y1=function(d){return arguments.length?(n=null==d?null:"function"==typeof d?d:Hi(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(d){return arguments.length?(r="function"==typeof d?d:Hi(!!d),c):r},c.curve=function(d){return arguments.length?(s=d,null!=o&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(null==d?o=a=null:a=s(o=d),c):o},c}Lne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Nne.prototype={areaStart:Mh,areaEnd:Mh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Gk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:n3(this,this._t0,zne(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,n3(this,zne(this,n=Bne(this,e,t)),n);break;default:n3(this,this._t0,n=Bne(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Hne.prototype=Object.create(Gk.prototype)).point=function(e,t){Gk.prototype.point.call(this,t,e)},Vne.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}},Une.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=jne(e),r=jne(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},qk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}},gr(3);const r3={draw(e,t){const n=gr(t/nh);e.moveTo(n,0),e.arc(0,0,n,0,ow)}};gr(1/3),pa(nh/10),pa(7*nh/10);function xh(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}pa(ow/10),Ld(ow/10),gr(3),gr(3),gr(3),gr(12);const Qne=Yw(Zd),Yk=Qne.right,wVe=Qne.left,mC=(Yw(Nte),Yk);function a3(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function Jne(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function CVe(e,t){return(Jne(t)?a3:eie)(e,t)}function eie(e,t){var s,n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n);for(s=0;s<i;++s)r[s]=Eh(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function tie(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function nie(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=Eh(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}function Eh(e,t){var i,n=typeof t;return null==t||"boolean"===n?UE(t):("number"===n?Rl:"string"===n?(i=sg(t))?(t=i,ew):lF:t instanceof sg?ew:t instanceof Date?tie:Jne(t)?a3:Array.isArray(t)?eie:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?nie:Rl)(e,t)}function _C(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function l3(e){return+e}var iie=[0,1];function wa(e){return e}function c3(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function MVe(e){return function(){return e}}(isNaN(t)?NaN:.5)}function EVe(e,t,n){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=c3(r,i),o=n(s,o)):(i=c3(i,r),o=n(o,s)),function(a){return o(i(a))}}function SVe(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=c3(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=mC(e,a,1,i)-1;return o[l](r[l](a))}}function yC(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xk(){var i,r,o,a,l,c,e=iie,t=iie,n=Eh,s=wa;function u(){var f=Math.min(e.length,t.length);return s!==wa&&(s=function xVe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}(e[0],e[f-1])),a=f>2?SVe:EVe,l=c=null,d}function d(f){return null==f||isNaN(f=+f)?o:(l||(l=a(e.map(i),t,n)))(i(s(f)))}return d.invert=function(f){return s(r((c||(c=a(t,e.map(i),Rl)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,l3),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=_C,u()},d.clamp=function(f){return arguments.length?(s=!!f||wa,u()):s!==wa},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return i=f,r=h,u()}}function rie(){return Xk()(wa,wa)}function Du(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Sh(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function oie(e,t,n,i){var o,r=_h(e,t,n);switch((i=wg(i??",f")).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null==i.precision&&!isNaN(o=cee(r,s))&&(i.precision=o),vN(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(o=uee(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(o=dee(r))&&(i.precision=o-2*("%"===i.type))}return pk(i)}function Ag(e){var t=e.domain;return e.ticks=function(n){var i=t();return mN(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return oie(r[0],r[r.length-1],n??10,i)},e.nice=function(n){null==n&&(n=10);var l,c,i=t(),r=0,o=i.length-1,s=i[r],a=i[o],u=10;for(a<s&&(c=s,s=a,a=c,c=r,r=o,o=c);u-- >0;){if((c=_N(s,a,n))===l)return i[r]=s,i[o]=a,t(i);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else{if(!(c<0))break;s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c}l=c}return e},e}function lie(e,t){var s,n=0,i=(e=e.slice()).length-1,r=e[n],o=e[i];return o<r&&(s=n,n=i,i=s,s=r,r=o,o=s),e[n]=t.floor(r),e[i]=t.ceil(o),e}function cie(e){return Math.log(e)}function uie(e){return Math.exp(e)}function kVe(e){return-Math.log(-e)}function AVe(e){return-Math.exp(-e)}function OVe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function die(e){return(t,n)=>-e(-t,n)}function u3(e){const t=e(cie,uie),n=t.domain;let r,o,i=10;function s(){return r=function TVe(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),o=function DVe(e){return 10===e?OVe:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),n()[0]<0?(r=die(r),o=die(o),e(kVe,AVe)):e(cie,uie),t}return t.base=function(a){return arguments.length?(i=+a,s()):i},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let y,b,f=r(c),h=r(u);const C=null==a?10:+a;let k=[];if(!(i%1)&&h-f<C){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(y=1;y<i;++y)if(b=f<0?y/o(-f):y*o(f),!(b<c)){if(b>u)break;k.push(b)}}else for(;f<=h;++f)for(y=i-1;y>=1;--y)if(b=f>0?y/o(-f):y*o(f),!(b<c)){if(b>u)break;k.push(b)}2*k.length<C&&(k=mN(c,u,C))}else k=mN(f,h,Math.min(h-f,C)).map(o);return d?k.reverse():k},t.tickFormat=(a,l)=>{if(null==a&&(a=10),null==l&&(l=10===i?"s":","),"function"!=typeof l&&(!(i%1)&&null==(l=wg(l)).precision&&(l.trim=!0),l=pk(l)),a===1/0)return l;const c=Math.max(1,i*a/t.ticks().length);return u=>{let d=u/o(Math.round(r(u)));return d*i<i-.5&&(d*=i),d<=c?l(u):""}},t.nice=()=>n(lie(n(),{floor:a=>o(Math.floor(r(a))),ceil:a=>o(Math.ceil(r(a)))})),t}function hie(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function PVe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function RVe(e){return e<0?-e*e:e*e}function d3(e){var t=e(wa,wa),n=1;function i(){return 1===n?e(wa,wa):.5===n?e(PVe,RVe):e(hie(n),hie(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Ag(t)}function f3(){var e=d3(Xk());return e.copy=function(){return yC(e,f3()).exponent(e.exponent())},Du.apply(e,arguments),e}function pie(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gie(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function h3(e){var t=1,n=e(pie(t),gie(t));return n.constant=function(i){return arguments.length?e(pie(t=+i),gie(t)):t},Ag(n)}function _ie(e,t,n,i,r,o){const s=[[Kd,1,Gd],[Kd,5,5e3],[Kd,15,15e3],[Kd,30,3e4],[o,1,Fl],[o,5,5*Fl],[o,15,15*Fl],[o,30,30*Fl],[r,1,qd],[r,3,3*qd],[r,6,6*qd],[r,12,12*qd],[i,1,Yd],[i,2,2*Yd],[n,1,CN],[t,1,2592e6],[t,3,7776e6],[e,1,MN]];function l(c,u,d){const f=Math.abs(u-c)/d,h=Yw(([,,C])=>C).right(s,f);if(h===s.length)return e.every(_h(c/MN,u/MN,d));if(0===h)return Wy.every(Math.max(_h(c,u,d),1));const[y,b]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return y.every(b)}return[function a(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const h=d&&"function"==typeof d.range?d:l(c,u,d),y=h?h.range(c,+u+1):[];return f?y.reverse():y},l]}const[FVe,LVe]=_ie(ku,qw,Uy,bee,yk,bk),[NVe,$Ve]=_ie(Su,Gw,Hy,Xd,_k,vk);function BVe(e){return new Date(e)}function zVe(e){return e instanceof Date?+e:+new Date(+e)}function p3(e,t,n,i,r,o,s,a,l,c){var u=rie(),d=u.invert,f=u.domain,h=c(".%L"),y=c(":%S"),b=c("%I:%M"),C=c("%I %p"),k=c("%a %d"),O=c("%b %d"),I=c("%B"),z=c("%Y");function q(ne){return(l(ne)<ne?h:a(ne)<ne?y:s(ne)<ne?b:o(ne)<ne?C:i(ne)<ne?r(ne)<ne?k:O:n(ne)<ne?I:z)(ne)}return u.invert=function(ne){return new Date(d(ne))},u.domain=function(ne){return arguments.length?f(Array.from(ne,zVe)):f().map(BVe)},u.ticks=function(ne){var K=f();return e(K[0],K[K.length-1],ne??10)},u.tickFormat=function(ne,K){return null==K?q:c(K)},u.nice=function(ne){var K=f();return(!ne||"function"!=typeof ne.range)&&(ne=t(K[0],K[K.length-1],ne??10)),ne?f(lie(K,ne)):u},u.copy=function(){return yC(u,p3(e,t,n,i,r,o,s,a,l,c))},u}function Kk(){var n,i,r,o,l,e=0,t=1,s=wa,a=!1;function c(d){return null==d||isNaN(d=+d)?l:s(0===r?.5:(d=(o(d)-n)*r,a?Math.max(0,Math.min(1,d)):d))}function u(d){return function(f){var h,y;return arguments.length?([h,y]=f,s=d(h,y),c):[s(0),s(1)]}}return c.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),i=o(t=+t),r=n===i?0:1/(i-n),c):[e,t]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(s=d,c):s},c.range=u(Eh),c.rangeRound=u(_C),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return o=d,n=d(e),i=d(t),r=n===i?0:1/(i-n),c}}function kh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function g3(){var e=Ag(Kk()(wa));return e.copy=function(){return kh(e,g3())},Sh.apply(e,arguments)}function m3(){var e=d3(Kk());return e.copy=function(){return kh(e,m3()).exponent(e.exponent())},Sh.apply(e,arguments)}function _3(e,t){void 0===t&&(t=e,e=Eh);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(s){var a=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return o[a](s-a)}}function Zk(){var r,o,s,a,l,u,f,e=0,t=.5,n=1,i=1,c=wa,d=!1;function h(b){return isNaN(b=+b)?f:(b=.5+((b=+u(b))-o)*(i*b<i*o?a:l),c(d?Math.max(0,Math.min(1,b)):b))}function y(b){return function(C){var k,O,I;return arguments.length?([k,O,I]=C,c=_3(b,[k,O,I]),h):[c(0),c(.5),c(1)]}}return h.domain=function(b){return arguments.length?([e,t,n]=b,r=u(e=+e),o=u(t=+t),s=u(n=+n),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h):[e,t,n]},h.clamp=function(b){return arguments.length?(d=!!b,h):d},h.interpolator=function(b){return arguments.length?(c=b,h):c},h.range=y(Eh),h.rangeRound=y(_C),h.unknown=function(b){return arguments.length?(f=b,h):f},function(b){return u=b,r=b(e),o=b(t),s=b(n),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h}}function y3(){var e=d3(Zk());return e.copy=function(){return kh(e,y3()).exponent(e.exponent())},Sh.apply(e,arguments)}class Sie extends Map{constructor(t,n=Oie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(v3(this,t))}has(t){return super.has(v3(this,t))}set(t,n){return super.set(kie(this,t),n)}delete(t){return super.delete(Aie(this,t))}}class Qk extends Set{constructor(t,n=Oie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const i of t)this.add(i)}has(t){return super.has(v3(this,t))}add(t){return super.add(kie(this,t))}delete(t){return super.delete(Aie(this,t))}}function v3({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function kie({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function Aie({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function Oie(e){return null!==e&&"object"==typeof e?e.valueOf():e}const b3=Symbol("implicit");function w3(){var e=new Sie,t=[],n=[],i=b3;function r(o){let s=e.get(o);if(void 0===s){if(i!==b3)return i;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Sie;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return w3(t,n).unknown(i)},Du.apply(r,arguments),r}function WVe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function GVe(e,t){var n=jE(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Die(e){return function(t,n){var i=e((t=HE(t)).h,(n=HE(n)).h),r=ko(t.s,n.s),o=ko(t.l,n.l),s=ko(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=o(a),t.opacity=s(a),t+""}}}const qVe=Die(jE);var YVe=Die(ko);const Iie=4/29,ev=6/29,Fie=3*ev*ev;function Lie(e){if(e instanceof Cc)return new Cc(e.l,e.a,e.b,e.opacity);if(e instanceof Tu)return $ie(e);e instanceof So||(e=rF(e));var o,s,t=E3(e.r),n=E3(e.g),i=E3(e.b),r=C3((.2225045*t+.7168786*n+.0606169*i)/1);return t===n&&n===i?o=s=r:(o=C3((.4360747*t+.3850649*n+.1430804*i)/.96422),s=C3((.0139322*t+.0971045*n+.7141733*i)/.82521)),new Cc(116*r-16,500*(o-r),200*(r-s),e.opacity)}function eA(e,t,n,i){return 1===arguments.length?Lie(e):new Cc(e,t,n,i??1)}function Cc(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function C3(e){return e>.008856451679035631?Math.pow(e,1/3):e/Fie+Iie}function M3(e){return e>ev?e*e*e:Fie*(e-Iie)}function x3(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function E3(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nie(e){if(e instanceof Tu)return new Tu(e.h,e.c,e.l,e.opacity);if(e instanceof Cc||(e=Lie(e)),0===e.a&&0===e.b)return new Tu(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*hX;return new Tu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function tA(e,t,n,i){return 1===arguments.length?Nie(e):new Tu(e,t,n,i??1)}function Tu(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function $ie(e){if(isNaN(e.h))return new Cc(e.l,0,0,e.opacity);var t=e.h*fX;return new Cc(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function KVe(e,t){var n=ko((e=eA(e)).l,(t=eA(t)).l),i=ko(e.a,t.a),r=ko(e.b,t.b),o=ko(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=o(s),e+""}}function Bie(e){return function(t,n){var i=e((t=tA(t)).h,(n=tA(n)).h),r=ko(t.c,n.c),o=ko(t.l,n.l),s=ko(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=o(a),t.opacity=s(a),t+""}}}py(Cc,eA,Q0(Qf,{brighter(e){return new Cc(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new Cc(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new So(x3(3.1338561*(t=.96422*M3(t))-1.6168667*(e=1*M3(e))-.4906146*(n=.82521*M3(n))),x3(-.9787684*t+1.9161415*e+.033454*n),x3(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),py(Tu,tA,Q0(Qf,{brighter(e){return new Tu(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new Tu(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return $ie(this).rgb()}}));const ZVe=Bie(jE);var QVe=Bie(ko);function JVe(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}function S3(e,t,n){const i=e-t+2*n;return e?i>0?i:1:0}const tv="linear",Jd="log",bC="sqrt",nA="symlog",Og="time",Dg="utc",Pu="sequential",nv="diverging",iv="quantile",iA="quantize",rA="threshold",k3="ordinal",A3="point",O3="bin-ordinal",vo="continuous",wC="discrete",CC="discretizing",zl="interpolating",D3="temporal";function T3(){const e=w3().unknown(void 0),t=e.domain,n=e.range;let r,o,i=[0,1],s=!1,a=0,l=0,c=.5;function u(){const d=t().length,f=i[1]<i[0],h=i[1-f],y=S3(d,a,l);let b=i[f-0];r=(h-b)/(y||1),s&&(r=Math.floor(r)),b+=(h-b-r*(d-a))*c,o=r*(1-a),s&&(b=Math.round(b),o=Math.round(o));const C=nl(d).map(k=>b+r*k);return n(f?C.reverse():C)}return delete e.unknown,e.domain=function(d){return arguments.length?(t(d),u()):t()},e.range=function(d){return arguments.length?(i=[+d[0],+d[1]],u()):i.slice()},e.rangeRound=function(d){return i=[+d[0],+d[1]],s=!0,u()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(d){return arguments.length?(s=!!d,u()):s},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,u()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),u()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),u()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),u()):c},e.invertRange=function(d){if(null==d[0]||null==d[1])return;const f=i[1]<i[0],h=f?n().reverse():n(),y=h.length-1;let k,O,I,b=+d[0],C=+d[1];return b!=b||C!=C||(C<b&&(I=b,b=C,C=I),C<h[0]||b>i[1-f])?void 0:(k=Math.max(0,Yk(h,b)-1),O=b===C?k:Yk(h,C)-1,b-h[k]>o+1e-10&&++k,f&&(I=k,k=y-O,O=y-I),k>O?void 0:t().slice(k,O+1))},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return T3().domain(t()).range(i).round(s).paddingInner(a).paddingOuter(l).align(c)},u()}function Hie(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Hie(t())},e}var rUe=Array.prototype.map;function oUe(e){return rUe.call(e,bs)}const sUe=Array.prototype.slice,oA=new Map,Uie=Symbol("vega_scale");function jie(e){return e[Uie]=!0,e}function lUe(e,t,n){const i=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?function tUe(e){return function(t){let r,n=t[0],i=t[1];return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}(o):o.invertExtent?function nUe(e){return function(t){const n=e.range();let s,a,l,c,i=t[0],r=t[1],o=-1;for(r<i&&(a=i,i=r,r=a),l=0,c=n.length;l<c;++l)n[l]>=i&&n[l]<=r&&(o<0&&(o=l),s=l);if(!(o<0))return i=e.invertExtent(n[o]),r=e.invertExtent(n[s]),[void 0===i[0]?i[1]:i[0],void 0===r[1]?r[0]:r[1]]}}(o):void 0),o.type=e,jie(o)};return i.metadata=bc(Ht(n)),i}function ki(e,t,n){return arguments.length>1?(oA.set(e,lUe(e,t,n)),this):Wie(e)?oA.get(e):void 0}function Wie(e){return oA.has(e)}function Tg(e,t){const n=oA.get(e);return n&&n.metadata[t]}function P3(e){return Tg(e,vo)}function rv(e){return Tg(e,wC)}function R3(e){return Tg(e,CC)}function Gie(e){return Tg(e,Jd)}function qie(e){return Tg(e,zl)}function Yie(e){return Tg(e,iv)}ki("identity",function aie(e){var t;function n(i){return null==i||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,l3),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return aie(e).unknown(t)},e=arguments.length?Array.from(e,l3):[0,1],Ag(n)}),ki(tv,function sie(){var e=rie();return e.copy=function(){return yC(e,sie())},Du.apply(e,arguments),Ag(e)},vo),ki(Jd,function fie(){const e=u3(Xk()).domain([1,10]);return e.copy=()=>yC(e,fie()).base(e.base()),Du.apply(e,arguments),e},[vo,Jd]),ki("pow",f3,vo),ki(bC,function IVe(){return f3.apply(null,arguments).exponent(.5)},vo),ki(nA,function mie(){var e=h3(Xk());return e.copy=function(){return yC(e,mie()).constant(e.constant())},Du.apply(e,arguments)},vo),ki(Og,function HVe(){return Du.apply(p3(NVe,$Ve,Su,Gw,Hy,Xd,_k,vk,Kd,FN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[vo,D3]),ki(Dg,function VVe(){return Du.apply(p3(FVe,LVe,ku,qw,Uy,yh,yk,bk,Kd,LN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[vo,D3]),ki(Pu,g3,[vo,zl]),ki(`${Pu}-${tv}`,g3,[vo,zl]),ki(`${Pu}-log`,function yie(){var e=u3(Kk()).domain([1,10]);return e.copy=function(){return kh(e,yie()).base(e.base())},Sh.apply(e,arguments)},[vo,zl,Jd]),ki(`${Pu}-pow`,m3,[vo,zl]),ki(`${Pu}-sqrt`,function UVe(){return m3.apply(null,arguments).exponent(.5)},[vo,zl]),ki(`${Pu}-${nA}`,function vie(){var e=h3(Kk());return e.copy=function(){return kh(e,vie()).constant(e.constant())},Sh.apply(e,arguments)},[vo,zl]),ki(`${nv}-${tv}`,function bie(){var e=Ag(Zk()(wa));return e.copy=function(){return kh(e,bie())},Sh.apply(e,arguments)},[vo,zl]),ki(`${nv}-log`,function wie(){var e=u3(Zk()).domain([.1,1,10]);return e.copy=function(){return kh(e,wie()).base(e.base())},Sh.apply(e,arguments)},[vo,zl,Jd]),ki(`${nv}-pow`,y3,[vo,zl]),ki(`${nv}-sqrt`,function jVe(){return y3.apply(null,arguments).exponent(.5)},[vo,zl]),ki(`${nv}-${nA}`,function Cie(){var e=h3(Zk());return e.copy=function(){return kh(e,Cie()).constant(e.constant())},Sh.apply(e,arguments)},[vo,zl]),ki(iv,function Mie(){var i,e=[],t=[],n=[];function r(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=$te(e,s/a);return o}function o(s){return null==s||isNaN(s=+s)?i:t[mC(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)null!=a&&!isNaN(a=+a)&&e.push(a);return e.sort(Zd),r()},o.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return Mie().domain(e).range(t).unknown(i)},Du.apply(o,arguments)},[CC,iv]),ki(iA,function xie(){var o,e=0,t=1,n=1,i=[.5],r=[0,1];function s(l){return null!=l&&l<=l?r[mC(i,l,0,n)]:o}function a(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,a()):r.slice()},s.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,i[0]]:c>=n?[i[n-1],t]:[i[c-1],i[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return xie().domain([e,t]).range(r).unknown(o)},Du.apply(Ag(s),arguments)},CC),ki(rA,function Eie(){var n,e=[.5],t=[0,1],i=1;function r(o){return null!=o&&o<=o?t[mC(e,o,0,i)]:n}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return Eie().domain(e).range(t).unknown(n)},Du.apply(r,arguments)},CC),ki(O3,function Vie(){let e=[],t=[];function n(i){return null==i||i!=i?void 0:t[(mC(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=oUe(i),n):e.slice()},n.range=function(i){return arguments.length?(t=sUe.call(i),n):t.slice()},n.tickFormat=function(i,r){return oie(e[0],pi(e),i??10,r)},n.copy=function(){return Vie().domain(n.domain()).range(n.range())},n},[wC,CC]),ki(k3,w3,wC),ki("band",T3,wC),ki(A3,function iUe(){return Hie(T3().paddingInner(1))},wC);const uUe=["clamp","base","constant","exponent"];function Xie(e,t){const n=t[0],i=pi(t)-n;return function(r){return e(n+r*i)}}function sA(e,t,n){return _3(I3(t||"rgb",n),e)}function Kie(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function Zie(e,t,n){const i=n-t;let r,o,s;return i&&Number.isFinite(i)?(r=(o=e.type).indexOf("-"),o=r<0?o:o.slice(r+1),s=ki(o)().domain([t,n]).range([0,1]),uUe.forEach(a=>e[a]?s[a](e[a]()):0),s):ws(.5)}function I3(e,t){const n=re[function dUe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function Qie(e){const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}function Jie(e,t){for(const n in e)F3(n,t(e[n]))}const ere={};function F3(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(ere[e]=t,this):ere[e]}Jie({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Qie),Jie({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>sA(Qie(e)));const aA="symbol",mUe=e=>ot(e)?e.map(t=>String(t)):String(e),_Ue=(e,t)=>e[1]-t[1],yUe=(e,t)=>t[1]-e[1];function L3(e,t,n){let i;return Xi(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(jw(e.domain())/n||1)))),jt(t)&&(i=t.step,t=t.interval),zt(t)&&(t=e.type===Og?qy(t):e.type==Dg?Yy(t):nt("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function tre(e,t,n){let i=e.range(),r=i[0],o=pi(i),s=_Ue;if(r>o&&(i=o,o=r,r=i,s=yUe),r=Math.floor(r),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>r<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],pi(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,c)=>!(c%2));t.length<3&&(t=a)}return t}function N3(e,t){return e.bins?tre(e,e.bins):e.ticks?e.ticks(t):e.domain()}function nre(e,t,n,i,r,o){const s=t.type;let a=mUe;if(s===Og||r===Og)a=e.timeFormat(i);else if(s===Dg||r===Dg)a=e.utcFormat(i);else if(Gie(s)){const l=e.formatFloat(i);if(o||t.bins)a=l;else{const c=ire(t,n,!1);a=u=>c(u)?l(u):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(a=e.format(i));return a}function ire(e,t,n){const i=N3(e,t),r=e.base(),o=Math.log(r),s=Math.max(1,r*t/i.length),a=l=>{let c=l/Math.pow(r,Math.round(Math.log(l)/o));return c*r<r-.5&&(c*=r),c<=s};return n?i.filter(a):a}const $3={[iv]:"quantiles",[iA]:"thresholds",[rA]:"domain"},rre={[iv]:"quantiles",[iA]:"domain"};function ore(e,t){return e.bins?function wUe(e){const t=e.slice(0,-1);return t.max=pi(e),t}(e.bins):e.type===Jd?ire(e,t,!0):$3[e.type]?function bUe(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[$3[e.type]]()):N3(e,t)}function sre(e,t,n,i,r,o,s){const a=rre[t.type]&&o!==Og&&o!==Dg?function vUe(e,t,n){const i=t[rre[t.type]](),r=i.length;let s,o=r>1?i[1]-i[0]:i[0];for(s=1;s<r;++s)o=Math.min(o,i[s]-i[s-1]);return e.formatSpan(0,o,30,n)}(e,t,r):nre(e,t,n,r,o,s);return i===aA&&(e=>$3[e.type]||e.bins)(t)?MUe(a):"discrete"===i?xUe(a):EUe(a)}const MUe=e=>(t,n,i)=>{const r=are(i[n+1],are(i.max,1/0)),o=lre(t,e),s=lre(r,e);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},are=(e,t)=>e??t,xUe=e=>(t,n)=>n?e(t):null,EUe=e=>t=>e(t),lre=(e,t)=>Number.isFinite(e)?t(e):null;function cre(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=function kUe(e,t,n,i){const r=i||t.type;return zt(n)&&function cUe(e){return Tg(e,D3)}(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||r!==Og?n||r!==Dg?sre(e,t,5,null,n,i,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}(e,t,n.format,n.formatType);if(R3(t.type)){const o=ore(t).slice(1).map(r),s=o.length;return`${s} boundar${1===s?"y":"ies"}: ${o.join(", ")}`}if(rv(t.type)){const o=t.domain(),s=o.length;return`${s} value${1===s?"":"s"}: ${s>i?o.slice(0,i-2).map(r).join(", ")+", ending with "+o.slice(-1).map(r):o.map(r).join(", ")}`}{const o=t.domain();return`values from ${r(o[0])} to ${r(pi(o))}`}}let ure=0;function B3(e){return e&&e.gradient}function dre(e,t,n){const i=e.gradient;let r=e.id,o="radial"===i?"p_":"";return r||(r=e.id="gradient_"+ure++,"radial"===i?(e.x1=Ru(e.x1,.5),e.y1=Ru(e.y1,.5),e.r1=Ru(e.r1,0),e.x2=Ru(e.x2,.5),e.y2=Ru(e.y2,.5),e.r2=Ru(e.r2,.5),o="p_"):(e.x1=Ru(e.x1,0),e.y1=Ru(e.y1,0),e.x2=Ru(e.x2,1),e.y2=Ru(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+o+r+")"}function Ru(e,t){return e??t}function fre(e,t){var i,n=[];return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i}}}const hre={basis:{curve:function N6e(e){return new jk(e)}},"basis-closed":{curve:function $6e(e){return new Dne(e)}},"basis-open":{curve:function B6e(e){return new Tne(e)}},bundle:{curve:z6e,tension:"beta",value:.85},cardinal:{curve:H6e,tension:"tension",value:0},"cardinal-open":{curve:V6e,tension:"tension",value:0},"cardinal-closed":{curve:U6e,tension:"tension",value:0},"catmull-rom":{curve:j6e,tension:"alpha",value:.5},"catmull-rom-closed":{curve:W6e,tension:"alpha",value:.5},"catmull-rom-open":{curve:G6e,tension:"alpha",value:.5},linear:{curve:t3},"linear-closed":{curve:function q6e(e){return new Nne(e)}},monotone:{horizontal:function X6e(e){return new Hne(e)},vertical:function Y6e(e){return new Gk(e)}},natural:{curve:function K6e(e){return new Une(e)}},step:{curve:function Z6e(e){return new qk(e,.5)}},"step-after":{curve:function J6e(e){return new qk(e,1)}},"step-before":{curve:function Q6e(e){return new qk(e,0)}}};function z3(e,t,n){var i=bn(hre,e)&&hre[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&null!=n&&(r=r[i.tension](n))),r}const OUe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},DUe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,TUe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,PUe=/^((\s+,?\s*)|(,\s*))/,RUe=/^[01]/;function ov(e){const t=[];return(e.match(DUe)||[]).forEach(i=>{let r=i[0];const o=r.toLowerCase(),s=OUe[o],a=function IUe(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let o=0;o<t;++o){const s="a"!==e||3!==o&&4!==o?TUe:RUe,a=n.slice(r).match(s);if(null===a)throw Error("Invalid SVG path, incorrect parameter type");r+=a[0].length,i.push(+a[0]);const l=n.slice(r).match(PUe);null!==l&&(r+=l[0].length)}return i}(o,s,i.slice(1).trim()),l=a.length;if(l<s||l&&l%s!=0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...a.slice(0,s)]),l!==s){"m"===o&&(r="M"===r?"L":"l");for(let c=s;c<l;c+=s)t.push([r,...a.slice(c,c+s)])}}),t}const Ah=Math.PI/180,Pg=Math.PI/2,Iu=2*Math.PI,sv=Math.sqrt(3)/2;var H3={},V3={},pre=[].join;function NUe(e){const t=pre.call(e);if(V3[t])return V3[t];var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7];const u=c*s,d=-l*a,f=l*s,h=c*a,y=Math.cos(r),b=Math.sin(r),C=Math.cos(o),k=Math.sin(o),O=.5*(o-r),I=Math.sin(.5*O),z=8/3*I*I/Math.sin(O),q=n+y-z*b,ne=i+b+z*y,K=n+C,le=i+k,me=K+z*k,ge=le-z*C;return V3[t]=[u*q+d*ne,f*q+h*ne,u*me+d*ge,f*me+h*ge,u*K+d*le,f*K+h*le]}const Hl=["l",0,0,0,0,0,0,0];function $Ue(e,t,n){const i=Hl[0]=e[0];if("a"===i||"A"===i)Hl[1]=t*e[1],Hl[2]=n*e[2],Hl[3]=e[3],Hl[4]=e[4],Hl[5]=e[5],Hl[6]=t*e[6],Hl[7]=n*e[7];else if("h"===i||"H"===i)Hl[1]=t*e[1];else if("v"===i||"V"===i)Hl[1]=n*e[1];else for(var r=1,o=e.length;r<o;++r)Hl[r]=(r%2==1?t:n)*e[r];return Hl}function MC(e,t,n,i,r,o){var s,f,h,y,b,a=null,l=0,c=0,u=0,d=0,C=0,k=0;null==n&&(n=0),null==i&&(i=0),null==r&&(r=1),null==o&&(o=r),e.beginPath&&e.beginPath();for(var O=0,I=t.length;O<I;++O){switch(s=t[O],(1!==r||1!==o)&&(s=$Ue(s,r,o)),s[0]){case"l":e.lineTo((l+=s[1])+n,(c+=s[2])+i);break;case"L":e.lineTo((l=s[1])+n,(c=s[2])+i);break;case"h":e.lineTo((l+=s[1])+n,c+i);break;case"H":e.lineTo((l=s[1])+n,c+i);break;case"v":e.lineTo(l+n,(c+=s[1])+i);break;case"V":e.lineTo(l+n,(c=s[1])+i);break;case"m":C=l+=s[1],k=c+=s[2],e.moveTo(l+n,c+i);break;case"M":C=l=s[1],k=c=s[2],e.moveTo(l+n,c+i);break;case"c":e.bezierCurveTo(l+s[1]+n,c+s[2]+i,(u=l+s[3])+n,(d=c+s[4])+i,(f=l+s[5])+n,(h=c+s[6])+i),l=f,c=h;break;case"C":e.bezierCurveTo(s[1]+n,s[2]+i,(u=s[3])+n,(d=s[4])+i,(l=s[5])+n,(c=s[6])+i);break;case"s":e.bezierCurveTo((u=2*l-u)+n,(d=2*c-d)+i,l+s[1]+n,c+s[2]+i,(f=l+s[3])+n,(h=c+s[4])+i),u=l+s[1],d=c+s[2],l=f,c=h;break;case"S":e.bezierCurveTo((u=2*l-u)+n,(d=2*c-d)+i,s[1]+n,s[2]+i,(f=s[3])+n,(h=s[4])+i),l=f,c=h,u=s[1],d=s[2];break;case"q":e.quadraticCurveTo((u=l+s[1])+n,(d=c+s[2])+i,(f=l+s[3])+n,(h=c+s[4])+i),l=f,c=h;break;case"Q":e.quadraticCurveTo(s[1]+n,s[2]+i,(f=s[3])+n,(h=s[4])+i),l=f,c=h,u=s[1],d=s[2];break;case"t":f=l+s[1],h=c+s[2],null===a[0].match(/[QqTt]/)?(u=l,d=c):"t"===a[0]?(u=2*l-y,d=2*c-b):"q"===a[0]&&(u=2*l-u,d=2*c-d),y=u,b=d,e.quadraticCurveTo(u+n,d+i,f+n,h+i),u=(l=f)+s[1],d=(c=h)+s[2];break;case"T":e.quadraticCurveTo((u=2*l-u)+n,(d=2*c-d)+i,(f=s[1])+n,(h=s[2])+i),l=f,c=h;break;case"a":gre(e,l+n,c+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+c+i]),l+=s[6],c+=s[7];break;case"A":gre(e,l+n,c+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],c=s[7];break;case"z":case"Z":l=C,c=k,e.closePath()}a=s}}function gre(e,t,n,i){const r=function LUe(e,t,n,i,r,o,s,a,l){const c=pre.call(arguments);if(H3[c])return H3[c];const u=s*Ah,d=Math.sin(u),f=Math.cos(u),h=f*(a-e)*.5+d*(l-t)*.5,y=f*(l-t)*.5-d*(a-e)*.5;let b=h*h/((n=Math.abs(n))*n)+y*y/((i=Math.abs(i))*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const C=f/n,k=d/n,O=-d/i,I=f/i,z=C*a+k*l,q=O*a+I*l,ne=C*e+k*t,K=O*e+I*t;let me=1/((ne-z)*(ne-z)+(K-q)*(K-q))-.25;me<0&&(me=0);let ge=Math.sqrt(me);o==r&&(ge=-ge);const ye=.5*(z+ne)-ge*(K-q),Se=.5*(q+K)+ge*(ne-z),ve=Math.atan2(q-Se,z-ye);let ae=Math.atan2(K-Se,ne-ye)-ve;ae<0&&1===o?ae+=Iu:ae>0&&0===o&&(ae-=Iu);const oe=Math.ceil(Math.abs(ae/(Pg+.001))),de=[];for(let ce=0;ce<oe;++ce)de[ce]=[ye,Se,ve+ce*ae/oe,ve+(ce+1)*ae/oe,n,i,d,f];return H3[c]=de}(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let o=0;o<r.length;++o){const s=NUe(r[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const mre=.5773502691896257,_re={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Iu)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,o=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-o),e.lineTo(r,-o),e.lineTo(0,-n),e.lineTo(-r,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=sv*n,r=i-n*mre,o=n/4;e.moveTo(0,-i-r),e.lineTo(-o,i-r),e.lineTo(o,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=sv*n,r=i-n*mre;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sv*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sv*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sv*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sv*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function yre(e){return bn(_re,e)?_re[e]:function BUe(e){if(!bn(U3,e)){const t=ov(e);U3[e]={draw:function(n,i){MC(n,t,0,0,Math.sqrt(i)/2)}}}return U3[e]}(e)}var U3={};const Oh=.448084975506;function zUe(e){return e.x}function HUe(e){return e.y}function VUe(e){return e.width}function UUe(e){return e.height}function ef(e){return"function"==typeof e?e:()=>+e}function cA(e,t,n){return Math.max(t,Math.min(e,n))}function vre(){var e=zUe,t=HUe,n=VUe,i=UUe,r=ef(0),o=r,s=r,a=r,l=null;function c(u,d,f){var h,y=d??+e.call(this,u),b=f??+t.call(this,u),C=+n.call(this,u),k=+i.call(this,u),O=Math.min(C,k)/2,I=cA(+r.call(this,u),0,O),z=cA(+o.call(this,u),0,O),q=cA(+s.call(this,u),0,O),ne=cA(+a.call(this,u),0,O);if(l||(l=h=QE()),I<=0&&z<=0&&q<=0&&ne<=0)l.rect(y,b,C,k);else{var K=y+C,le=b+k;l.moveTo(y+I,b),l.lineTo(K-z,b),l.bezierCurveTo(K-Oh*z,b,K,b+Oh*z,K,b+z),l.lineTo(K,le-ne),l.bezierCurveTo(K,le-Oh*ne,K-Oh*ne,le,K-ne,le),l.lineTo(y+q,le),l.bezierCurveTo(y+Oh*q,le,y,le-Oh*q,y,le-q),l.lineTo(y,b+I),l.bezierCurveTo(y,b+Oh*I,y+Oh*I,b,y+I,b),l.closePath()}if(h)return l=null,h+""||null}return c.x=function(u){return arguments.length?(e=ef(u),c):e},c.y=function(u){return arguments.length?(t=ef(u),c):t},c.width=function(u){return arguments.length?(n=ef(u),c):n},c.height=function(u){return arguments.length?(i=ef(u),c):i},c.cornerRadius=function(u,d,f,h){return arguments.length?(r=ef(u),o=null!=d?ef(d):r,a=null!=f?ef(f):r,s=null!=h?ef(h):o,c):r},c.context=function(u){return arguments.length?(l=u??null,c):l},c}function bre(){var e,t,n,i,o,s,a,l,r=null;function c(d,f,h){const y=h/2;if(o){var b=a-f,C=d-s;if(b||C){var k=Math.sqrt(b*b+C*C),O=(b/=k)*l,I=(C/=k)*l,z=Math.atan2(C,b);r.moveTo(s-O,a-I),r.lineTo(d-b*y,f-C*y),r.arc(d,f,y,z-Math.PI,z),r.lineTo(s+O,a+I),r.arc(s,a,l,z,z+Math.PI)}else r.arc(d,f,y,0,Iu);r.closePath()}else o=1;s=d,a=f,l=y}function u(d){var f,y,C,h=d.length,b=!1;for(null==r&&(r=C=QE()),f=0;f<=h;++f)!(f<h&&i(y=d[f],f,d))===b&&(b=!b)&&(o=0),b&&c(+e(y,f,d),+t(y,f,d),+n(y,f,d));if(C)return r=null,C+""||null}return u.x=function(d){return arguments.length?(e=d,u):e},u.y=function(d){return arguments.length?(t=d,u):t},u.size=function(d){return arguments.length?(n=d,u):n},u.defined=function(d){return arguments.length?(i=d,u):i},u.context=function(d){return arguments.length?(r=d??null,u):r},u}function xC(e,t){return e??t}const EC=e=>e.x||0,SC=e=>e.y||0,uA=e=>!1!==e.defined,a8e=SF().startAngle(e=>e.startAngle||0).endAngle(e=>e.endAngle||0).padAngle(e=>e.padAngle||0).innerRadius(e=>e.innerRadius||0).outerRadius(e=>e.outerRadius||0).cornerRadius(e=>e.cornerRadius||0),l8e=Xne().x(EC).y1(SC).y0(e=>(e.y||0)+(e.height||0)).defined(uA),c8e=Xne().y(SC).x1(EC).x0(e=>(e.x||0)+(e.width||0)).defined(uA),u8e=Yne().x(EC).y(SC).defined(uA),d8e=vre().x(EC).y(SC).width(e=>e.width||0).height(e=>e.height||0).cornerRadius(e=>xC(e.cornerRadiusTopLeft,e.cornerRadius)||0,e=>xC(e.cornerRadiusTopRight,e.cornerRadius)||0,e=>xC(e.cornerRadiusBottomRight,e.cornerRadius)||0,e=>xC(e.cornerRadiusBottomLeft,e.cornerRadius)||0),f8e=function vVe(e,t){let n=null,i=JE(r);function r(){let o;if(n||(n=o=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return e="function"==typeof e?e:Hi(e||r3),t="function"==typeof t?t:Hi(void 0===t?64:+t),r.type=function(o){return arguments.length?(e="function"==typeof o?o:Hi(o),r):e},r.size=function(o){return arguments.length?(t="function"==typeof o?o:Hi(+o),r):t},r.context=function(o){return arguments.length?(n=o??null,r):n},r}().type(e=>yre(e.shape||"circle")).size(e=>xC(e.size,64)),h8e=bre().x(EC).y(SC).defined(uA).size(e=>e.size||1);function j3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function av(e,t,n,i){return d8e.context(e)(t,n,i)}var wre=1;function Cre(){wre=1}function W3(e,t,n){var i=t.clip,r=e._defs,o=t.clip_id||(t.clip_id="clip"+wre++),s=r.clipping[o]||(r.clipping[o]={id:o});return Yn(i)?s.path=i(null):j3(n)?s.path=av(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function oo(e){this.clear(),e&&this.union(e)}function dA(e){this.mark=e,this.bounds=this.bounds||new oo}function fA(e){dA.call(this,e),this.items=this.items||[]}function G3(e){this._pending=0,this._loader=e||Ek()}function Mre(e){e._pending+=1}function kC(e){e._pending-=1}function tf(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const i=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(i+(n?function b8e(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,i):0))}return e}oo.prototype={clone(){return new oo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),c=t-t*a+n*l,u=n-t*l-n*a;return[a*i-l*r+c,l*i+a*r+u,a*i-l*s+c,l*i+a*s+u,a*o-l*r+c,l*o+a*r+u,a*o-l*s+c,l*o+a*s+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},St(fA,dA),G3.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return Mre(t),t._loader.sanitize(e,{context:"href"}).then(n=>(kC(t),n)).catch(()=>(kC(t),null))},loadImage(e){const t=this,n=typeof Image<"u"?Image:null;return Mre(t),t._loader.sanitize(e,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const o=new n,s=bn(i,"crossOrigin")?i.crossOrigin:"anonymous";return null!=s&&(o.crossOrigin=s),o.onload=()=>kC(t),o.onerror=()=>kC(t),o.src=r,o}).catch(i=>(kC(t),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const e=this;return new Promise(t=>{!function n(i){e.pending()?setTimeout(()=>{n(!0)},10):t(i)}(!1)})}};const w8e=Iu-1e-8;let hA,pA,gA,Rg,q3,mA,Y3,X3;const Dh=(e,t)=>hA.add(e,t),_A=(e,t)=>Dh(pA=e,gA=t),xre=e=>Dh(e,hA.y1),Ere=e=>Dh(hA.x1,e),Ig=(e,t)=>q3*e+Y3*t,Fg=(e,t)=>mA*e+X3*t,K3=(e,t)=>Dh(Ig(e,t),Fg(e,t)),Z3=(e,t)=>_A(Ig(e,t),Fg(e,t));function AC(e,t){return hA=e,t?(Rg=t*Ah,q3=X3=Math.cos(Rg),mA=Math.sin(Rg),Y3=-mA):(q3=X3=1,Rg=mA=Y3=0),C8e}const C8e={beginPath(){},closePath(){},moveTo:Z3,lineTo:Z3,rect(e,t,n,i){Rg?(K3(e+n,t),K3(e+n,t+i),K3(e,t+i),Z3(e,t)):(Dh(e+n,t+i),_A(e,t))},quadraticCurveTo(e,t,n,i){const r=Ig(e,t),o=Fg(e,t),s=Ig(n,i),a=Fg(n,i);Sre(pA,r,s,xre),Sre(gA,o,a,Ere),_A(s,a)},bezierCurveTo(e,t,n,i,r,o){const s=Ig(e,t),a=Fg(e,t),l=Ig(n,i),c=Fg(n,i),u=Ig(r,o),d=Fg(r,o);kre(pA,s,l,u,xre),kre(gA,a,c,d,Ere),_A(u,d)},arc(e,t,n,i,r,o){if(i+=Rg,r+=Rg,pA=n*Math.cos(r)+e,gA=n*Math.sin(r)+t,Math.abs(r-i)>w8e)Dh(e-n,t-n),Dh(e+n,t+n);else{const s=c=>Dh(n*Math.cos(c)+e,n*Math.sin(c)+t);let a,l;if(s(i),s(r),r!==i)if((i%=Iu)<0&&(i+=Iu),(r%=Iu)<0&&(r+=Iu),r<i&&(o=!o,a=i,i=r,r=a),o)for(r-=Iu,a=i-i%Pg,l=0;l<4&&a>r;++l,a-=Pg)s(a);else for(a=i-i%Pg+Pg,l=0;l<4&&a<r;++l,a+=Pg)s(a)}}};function Sre(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function kre(e,t,n,i,r){const o=i-e+3*t-3*n,s=e+n-2*t,a=e-t;let u,l=0,c=0;Math.abs(o)>1e-14?(u=s*s+a*o,u>=0&&(u=Math.sqrt(u),l=(-s+u)/o,c=(-s-u)/o)):l=.5*a/s,0<l&&l<1&&r(Are(l,e,t,n,i)),0<c&&c<1&&r(Are(c,e,t,n,i))}function Are(e,t,n,i,r){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*i+a*e*r}var Th=(Th=xh(1,1))?Th.getContext("2d"):null;const Q3=new oo;function J3(e){return function(t,n){if(!Th)return!0;e(Th,t),Q3.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:s}=Q3;for(let a=r;a<=s;++a)for(let l=i;l<=o;++l)if(Th.isPointInPath(l,a))return!0;return!1}}function eB(e,t){return t.contains(e.x||0,e.y||0)}function Ore(e,t){const n=e.x||0,i=e.y||0;return t.intersects(Q3.set(n,i,n+(e.width||0),i+(e.height||0)))}function Dre(e,t){const n=e.x||0,i=e.y||0;return lv(t,n,i,null!=e.x2?e.x2:n,null!=e.y2?e.y2:i)}function lv(e,t,n,i,r){const{x1:o,y1:s,x2:a,y2:l}=e,c=i-t,u=r-n;let h,y,b,C,d=0,f=1;for(C=0;C<4;++C){if(0===C&&(h=-c,y=-(o-t)),1===C&&(h=c,y=a-t),2===C&&(h=-u,y=-(s-n)),3===C&&(h=u,y=l-n),Math.abs(h)<1e-10&&y<0)return!1;if(b=y/h,h<0){if(b>f)return!1;b>d&&(d=b)}else if(h>0){if(b<d)return!1;b<f&&(f=b)}}return!0}function cv(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Mc(e,t){return e??t}function Tre(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Pre(e,t,n){return B3(n)?function M8e(e,t,n){const i=n.width(),r=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+Mc(t.x1,.5)*i,n.y1+Mc(t.y1,.5)*r,Math.max(i,r)*Mc(t.r1,0),n.x1+Mc(t.x2,.5)*i,n.y1+Mc(t.y2,.5)*r,Math.max(i,r)*Mc(t.r2,.5));else{const s=Mc(t.x1,0),a=Mc(t.y1,0),l=Mc(t.x2,1),c=Mc(t.y2,0);if(s!==l&&a!==c&&i!==r){const u=xh(Math.ceil(i),Math.ceil(r)),d=u.getContext("2d");return d.scale(i,r),d.fillStyle=Tre(d.createLinearGradient(s,a,l,c),t.stops),d.fillRect(0,0,i,r),e.createPattern(u,"no-repeat")}o=e.createLinearGradient(n.x1+s*i,n.y1+a*r,n.x1+l*i,n.y1+c*r)}return Tre(o,t.stops)}(e,n,t.bounds):n}function yA(e,t,n){return(n*=t.fillOpacity??1)>0&&(e.globalAlpha=n,e.fillStyle=Pre(e,t,t.fill),!0)}var x8e=[];function uv(e,t,n){var i=null!=(i=t.strokeWidth)?i:1;return!(i<=0)&&(n*=t.strokeOpacity??1)>0&&(e.globalAlpha=n,e.strokeStyle=Pre(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||x8e),e.lineDashOffset=t.strokeDashOffset||0),!0)}function E8e(e,t){return e.zindex-t.zindex||e.index-t.index}function tB(e){if(!e.zdirty)return e.zitems;var i,r,o,t=e.items,n=[];for(r=0,o=t.length;r<o;++r)(i=t[r]).index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(E8e)}function xc(e,t){var i,r,n=e.items;if(!n||!n.length)return;const o=tB(e);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=o}for(i=0,r=n.length;i<r;++i)t(n[i])}function vA(e,t){var i,r,n=e.items;if(!n||!n.length)return null;const o=tB(e);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===o)for(r=(n=e.items).length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i;return null}function nB(e){return function(t,n,i){xc(n,r=>{(!i||i.intersects(r.bounds))&&Rre(e,t,r,r)})}}function S8e(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&Rre(e,t,n.items[0],n.items)}}function Rre(e,t,n,i){var r=n.opacity??1;0!==r&&(e(t,i)||(cv(t,n),n.fill&&yA(t,n,r)&&t.fill(),n.stroke&&uv(t,n,r)&&t.stroke()))}function bA(e){return e=e||Il,function(t,n,i,r,o,s){return i*=t.pixelRatio,r*=t.pixelRatio,vA(n,a=>{const l=a.bounds;if((!l||l.contains(o,s))&&l&&e(t,a,i,r,o,s))return a})}}function OC(e,t){return function(n,i,r,o){var u,s=Array.isArray(i)?i[0]:i,a=t??s.fill,l=s.stroke&&n.isPointInStroke;return l&&(u=s.strokeCap,n.lineWidth=s.strokeWidth??1,n.lineCap=u??"butt"),!e(n,i)&&(a&&n.isPointInPath(r,o)||l&&n.isPointInStroke(r,o))}}function iB(e){return bA(OC(e))}function Lg(e,t){return"translate("+e+","+t+")"}function rB(e){return"rotate("+e+")"}function Ire(e){return Lg(e.x||0,e.y||0)}function oB(e,t,n){function o(s,a){var l=a.x||0,c=a.y||0,u=a.angle||0;s.translate(l,c),u&&s.rotate(u*=Ah),s.beginPath(),t(s,a),u&&s.rotate(-u),s.translate(-l,-c)}return{type:e,tag:"path",nested:!1,attr:function i(s,a){s("transform",function A8e(e){return Lg(e.x||0,e.y||0)+(e.angle?" "+rB(e.angle):"")}(a)),s("d",t(null,a))},bound:function r(s,a){return t(AC(s,a.angle),a),tf(s,a).translate(a.x||0,a.y||0)},draw:nB(o),pick:iB(o),isect:n||J3(o)}}var D8e=oB("arc",function p8e(e,t){return a8e.context(e)(t)});function sB(e,t,n){function o(l,c){l.beginPath(),t(l,c)}const s=OC(o);return{type:e,tag:"path",nested:!0,attr:function i(l,c){var u=c.mark.items;u.length&&l("d",t(null,u))},bound:function r(l,c){var u=c.items;return 0===u.length?l:(t(AC(l),u),tf(l,u[0]))},draw:S8e(o),pick:function a(l,c,u,d,f,h){var y=c.items,b=c.bounds;return!y||!y.length||b&&!b.contains(f,h)?null:s(l,y,u*=l.pixelRatio,d*=l.pixelRatio)?y[0]:null},isect:eB,tip:n}}var I8e=sB("area",function g8e(e,t){const n=t[0];return("horizontal"===n.orient?c8e:l8e).curve(z3(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function T8e(e,t){for(var s,a,n="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",r=e.length,o=1/0;--r>=0;)!1!==e[r].defined&&(a=Math.abs(e[r][i]-n))<o&&(o=a,s=e[r]);return s});function Fre(e,t){e.beginPath(),j3(t)?av(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Lre(e){const t=Mc(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Nre(e,t){const n=Lre(t);e("d",av(null,t,n,n))}function DC(e,t,n,i){const r=Lre(t);e.beginPath(),av(e,t,(n||0)+r,(i||0)+r)}const H8e=OC(DC),V8e=OC(DC,!1),U8e=OC(DC,!0);var q8e={type:"group",tag:"g",nested:!1,attr:function L8e(e,t){e("transform",Ire(t))},bound:function z8e(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),tf(e,t),e.translate(t.x||0,t.y||0)},draw:function j8e(e,t,n){xc(t,i=>{const r=i.x||0,o=i.y||0,s=i.strokeForeground,a=i.opacity??1;(i.stroke||i.fill)&&a&&(DC(e,i,r,o),cv(e,i),i.fill&&yA(e,i,a)&&e.fill(),i.stroke&&!s&&uv(e,i,a)&&e.stroke()),e.save(),e.translate(r,o),i.clip&&Fre(e,i),n&&n.translate(-r,-o),xc(i,l=>{this.draw(e,l,n)}),n&&n.translate(r,o),e.restore(),s&&i.stroke&&a&&(DC(e,i,r,o),cv(e,i),uv(e,i,a)&&e.stroke())})},pick:function W8e(e,t,n,i,r,o){if(t.bounds&&!t.bounds.contains(r,o)||!t.items)return null;const s=n*e.pixelRatio,a=i*e.pixelRatio;return vA(t,l=>{let c,u,d;const f=l.bounds;if(f&&!f.contains(r,o))return;u=l.x||0,d=l.y||0;const b=l.clip;if(b&&(r<u||r>u+(l.width||0)||o<d||o>d+(l.height||0)))return;if(e.save(),e.translate(u,d),u=r-u,d=o-d,b&&j3(l)&&!U8e(e,l,s,a))return e.restore(),null;const C=l.strokeForeground,k=!1!==t.interactive;return k&&C&&l.stroke&&V8e(e,l,s,a)?(e.restore(),l):(c=vA(l,O=>function G8e(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(O,u,d)?this.pick(O,n,i,u,d):null),!c&&k&&(l.fill||!C&&l.stroke)&&H8e(e,l,s,a)&&(c=l),e.restore(),c||null)})},isect:Ore,content:function B8e(e,t,n){e("clip-path",t.clip?W3(n,t,t):null)},background:function N8e(e,t){e("class","background"),e("aria-hidden",!0),Nre(e,t)},foreground:function $8e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Nre(e,t):e("d","")}},TC={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function aB(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function lB(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function cB(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function wA(e,t){return"center"===e?t/2:"right"===e?t:0}function CA(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Z8e={type:"image",tag:"image",nested:!1,attr:function Y8e(e,t,n){const i=aB(t,n),r=lB(t,i),o=cB(t,i),s=(t.x||0)-wA(t.align,r),a=(t.y||0)-CA(t.baseline,o);e("href",!i.src&&i.toDataURL?i.toDataURL():i.src||"",TC["xmlns:xlink"],"xlink:href"),e("transform",Lg(s,a)),e("width",r),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function X8e(e,t){const n=t.image,i=lB(t,n),r=cB(t,n),o=(t.x||0)-wA(t.align,i),s=(t.y||0)-CA(t.baseline,r);return e.set(o,s,o+i,s+r)},draw:function K8e(e,t,n){xc(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=aB(i,this);let o=lB(i,r),s=cB(i,r);if(0===o||0===s)return;let c,u,d,f,a=(i.x||0)-wA(i.align,o),l=(i.y||0)-CA(i.baseline,s);!1!==i.aspect&&(u=r.width/r.height,d=i.width/i.height,u==u&&d==d&&u!==d&&(d<u?(f=o/u,l+=(s-f)/2,s=f):(f=s*u,a+=(o-f)/2,o=f))),(r.complete||r.toDataURL)&&(cv(e,i),e.globalAlpha=null!=(c=i.opacity)?c:1,e.imageSmoothingEnabled=!1!==i.smooth,e.drawImage(r,a,l,o,s))})},pick:bA(),isect:Il,get:aB,xOffset:wA,yOffset:CA},Q8e=sB("line",function m8e(e,t){const n=t[0];return u8e.curve(z3(n.interpolate||"linear",n.orient,n.tension)).context(e)(t)},function P8e(e,t){for(var r,o,n=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(r=e[i].x-t[0])*r+(o=e[i].y-t[1])*o<n)return e[i];return null});function MA(e,t){var n=t.path;if(null==n)return!0;var i=t.x||0,r=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*Ah,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=ov(n)).path=n),a&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(a),MC(e,l,0,0,o,s),e.rotate(-a),e.translate(-i,-r)):MC(e,l,i,r,o,s)}var tje={type:"path",tag:"path",nested:!1,attr:function J8e(e,t){(1!==(t.scaleX||1)||1!==(t.scaleY||1))&&e("vector-effect","non-scaling-stroke"),e("transform",function O8e(e){return Lg(e.x||0,e.y||0)+(e.angle?" "+rB(e.angle):"")+(e.scaleX||e.scaleY?" "+function k8e(e,t){return"scale("+e+","+t+")"}(e.scaleX||1,e.scaleY||1):"")}(t)),e("d",t.path)},bound:function eje(e,t){return MA(AC(e,t.angle),t)?e.set(0,0,0,0):tf(e,t,!0)},draw:nB(MA),pick:iB(MA),isect:J3(MA)};function $re(e,t){e.beginPath(),av(e,t)}var rje={type:"rect",tag:"path",nested:!1,attr:function nje(e,t){e("d",av(null,t))},bound:function ije(e,t){var n,i;return tf(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)},draw:nB($re),pick:iB($re),isect:Ore};function Bre(e,t,n){var i,r,o,s;return!(!t.stroke||!uv(e,t,n)||(i=t.x||0,r=t.y||0,o=null!=t.x2?t.x2:i,s=null!=t.y2?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(o,s),0))}var cje={type:"rule",tag:"line",nested:!1,attr:function oje(e,t){e("transform",Ire(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function sje(e,t){var n,i;return tf(e.set(n=t.x||0,i=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:i),t)},draw:function aje(e,t,n){xc(t,i=>{if(!n||n.intersects(i.bounds)){var r=i.opacity??1;r&&Bre(e,i,r)&&(cv(e,i),e.stroke())}})},pick:bA(function lje(e,t,n,i){return!!e.isPointInStroke&&Bre(e,t,1)&&e.isPointInStroke(n,i)}),isect:Dre},uje=oB("shape",function _8e(e,t){return(t.mark.shape||t.shape).context(e)(t)}),dje=oB("symbol",function y8e(e,t){return f8e.context(e)(t)},eB);const zre=nee();var Ec={height:Fu,measureWidth:dB,estimateWidth:uB,width:uB,canvas:Hre};function Hre(e){Ec.width=e&&Th?dB:uB}function uB(e,t){return Vre(Rh(e,t),Fu(e))}function Vre(e,t){return~~(.8*e.length*t)}function dB(e,t){return Fu(e)<=0||!(t=Rh(e,t))?0:Ure(t,xA(e))}function Ure(e,t){const n=`(${t}) ${e}`;let i=zre.get(n);return void 0===i&&(Th.font=t,i=Th.measureText(e).width,zre.set(n,i)),i}function Fu(e){return null!=e.fontSize?+e.fontSize||0:11}function Ph(e){return null!=e.lineHeight?e.lineHeight:Fu(e)+2}function PC(e){return function fje(e){return ot(e)?e.length>1?e:e[0]:e}(e.lineBreak&&e.text&&!ot(e.text)?e.text.split(e.lineBreak):e.text)}function fB(e){const t=PC(e);return(ot(t)?t.length-1:0)*Ph(e)}function Rh(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function pje(e,t){var n=+e.limit,i=function hje(e){if(Ec.width===dB){const t=xA(e);return n=>Ure(n,t)}{const t=Fu(e);return n=>Vre(n,t)}}(e);if(i(t)<n)return t;var l,r=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,a=t.length;if(n-=i(r),o){for(;s<a;)i(t.slice(l=s+a>>>1))>n?s=l+1:a=l;return r+t.slice(s)}for(;s<a;)i(t.slice(0,l=1+(s+a>>>1)))<n?s=l:a=l-1;return t.slice(0,s)+r}(e,n):n}function RC(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function xA(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Fu(e)+"px "+RC(e,t)}function hB(e){var t=e.baseline,n=Fu(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*Ph(e):"line-bottom"===t?.29*n-.5*Ph(e):0)}Hre(!0);const gje={left:"start",center:"middle",right:"end"},IC=new oo;function EA(e){var r,t=e.x||0,n=e.y||0,i=e.radius||0;return i&&(r=(e.theta||0)-Pg,t+=i*Math.cos(r),n+=i*Math.sin(r)),IC.x1=t,IC.y1=n,IC}function pB(e,t,n){var d,i=Ec.height(t),r=t.align,o=EA(t),s=o.x1,a=o.y1,l=t.dx||0,c=(t.dy||0)+hB(t)-Math.round(.8*i),u=PC(t);if(ot(u)?(i+=Ph(t)*(u.length-1),d=u.reduce((f,h)=>Math.max(f,Ec.width(t,h)),0)):d=Ec.width(t,u),"center"===r?l-=d/2:"right"===r&&(l-=d),e.set(l+=s,c+=a,l+d,c+i),t.angle&&!n)e.rotate(t.angle*Ah,s,a);else if(2===n)return e.rotatedPoints(t.angle*Ah,s,a);return e}var bje={type:"text",tag:"text",nested:!1,attr:function mje(e,t){var l,n=t.dx||0,i=(t.dy||0)+hB(t),r=EA(t),o=r.x1,s=r.y1,a=t.angle||0;e("text-anchor",gje[t.align]||"start"),a?(l=Lg(o,s)+" "+rB(a),(n||i)&&(l+=" "+Lg(n,i))):l=Lg(o+n,s+i),e("transform",l)},bound:pB,draw:function _je(e,t,n){xc(t,i=>{var o,s,a,l,c,u,d,r=i.opacity??1;if(!(n&&!n.intersects(i.bounds)||0===r||i.fontSize<=0||null==i.text||0===i.text.length)){if(e.font=xA(i),e.textAlign=i.align||"left",s=(o=EA(i)).x1,a=o.y1,i.angle&&(e.save(),e.translate(s,a),e.rotate(i.angle*Ah),s=a=0),s+=i.dx||0,a+=(i.dy||0)+hB(i),u=PC(i),cv(e,i),ot(u))for(c=Ph(i),l=0;l<u.length;++l)d=Rh(i,u[l]),i.fill&&yA(e,i,r)&&e.fillText(d,s,a),i.stroke&&uv(e,i,r)&&e.strokeText(d,s,a),a+=c;else d=Rh(i,u),i.fill&&yA(e,i,r)&&e.fillText(d,s,a),i.stroke&&uv(e,i,r)&&e.strokeText(d,s,a);i.angle&&e.restore()}})},pick:bA(function yje(e,t,n,i,r,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=EA(t),a=s.x1,l=s.y1,c=pB(IC,t,1),u=-t.angle*Ah,d=Math.cos(u),f=Math.sin(u);return c.contains(d*r-f*o+(a-d*a+f*l),f*r+d*o+(l-f*a-d*l))}),isect:function vje(e,t){const n=pB(IC,e,2);return lv(t,n[0],n[1],n[2],n[3])||lv(t,n[0],n[1],n[4],n[5])||lv(t,n[4],n[5],n[6],n[7])||lv(t,n[2],n[3],n[6],n[7])}},wje=sB("trail",function v8e(e,t){return h8e.context(e)(t)},function R8e(e,t){for(var i,r,n=e.length;--n>=0;)if(!1!==e[n].defined&&(i=e[n].x-t[0])*i+(r=e[n].y-t[1])*r<(i=e[n].size||1)*i)return e[n];return null}),il={arc:D8e,area:I8e,group:q8e,image:Z8e,line:Q8e,path:tje,rect:rje,rule:cje,shape:uje,symbol:dje,text:bje,trail:wje};function gB(e,t,n){var i=il[e.mark.marktype];return i.nested&&(e=e.mark),(t||i.bound)(e.bounds||(e.bounds=new oo),e,n)}var jre={mark:null};function Wre(e,t,n){var a,l,c,u,i=il[e.marktype],r=i.bound,o=e.items,s=o&&o.length;if(i.nested)return s?c=o[0]:(jre.mark=e,c=jre),u=gB(c,r,n),t&&t.union(u)||u;if(t=t||e.bounds&&e.bounds.clear()||new oo,s)for(a=0,l=o.length;a<l;++a)t.union(gB(o[a],r,n));return e.bounds=t}const Cje=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Gre(e,t){return JSON.stringify(e,Cje,t)}function qre(e){return Yre("string"==typeof e?JSON.parse(e):e)}function Yre(e){var i,r,o,t=e.marktype,n=e.items;if(n)for(r=0,o=n.length;r<o;++r)n[r][i=t?"mark":"group"]=e,n[r].zindex&&(n[r][i].zdirty=!0),"group"===(t||i)&&Yre(n[r]);return t&&Wre(e),e}function mB(e){arguments.length?this.root=qre(e):(this.root=Xre({marktype:"group",name:"root",role:"frame"}),this.root.items=[new fA(this.root)])}function Xre(e,t){const n={bounds:new oo,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Ih(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function _B(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Ca(e,t,n,i){var o,r=e.childNodes[t];return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=Ih(e.ownerDocument,n,i),e.insertBefore(r,o)),r}function Sc(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function Kre(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function SA(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Fh(e,t){this._active=null,this._handlers={},this._loader=e||Ek(),this._tooltip=t||xje}function xje(e,t,n,i){e.element().setAttribute("title",i||"")}function Lu(e){this._el=null,this._bgcolor=null,this._loader=new G3(e)}mB.prototype={toJSON(e){return Gre(this.root,e||0)},mark(e,t,n){const i=Xre(e,t=t||this.root.items[0]);return t.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}},Fh.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let i=e?e.length:0;--i>=0;)if(e[i].type===t&&(!n||e[i].handler===n))return i;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const i in t)n.push(...t[i]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(e.type,e),o=Ih(null,"a");for(const s in i)o.setAttribute(s,i[s]);o.dispatchEvent(r)}).catch(()=>{})},handleTooltip(e,t,n){t&&null!=t.tooltip&&(t=function Mje(e,t,n,i){var o,s,r=e&&e.mark;if(r&&(o=il[r.marktype]).tip){for((s=SA(t,n))[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(r.items,s)}return e}(t,e,this.canvas(),this._origin),this._tooltip.call(this._obj,this,e,t,n&&t&&t.tooltip||null))},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),i=this._origin,r=e.bounds,o=r.width(),s=r.height();let a=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,l+=e.y||0;return{x:a,y:l,width:o,height:s,left:a,top:l,right:a+o,bottom:l+s}}},Lu.prototype={initialize(e,t,n,i,r){return this._el=e,this.resize(t,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,i){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,i=n._loader[e](t);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(o=>{o&&r(),n._ready=null})}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const kA="dragleave",yB="mousedown",AA="mousemove",FC="mouseout",OA="click",eoe="mousewheel",DA="touchstart",TA="touchmove",PA="touchend",vB=AA,LC=FC,bB=OA;function NC(e,t){Fh.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function toe(e,t){(e=>e===DA||e===TA||e===PA?[DA,TA,PA]:[e])(t).forEach(n=>function Rje(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}(e,n))}function noe(e,t,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r||((!r||!r.exit)&&this.fire(n,i),this._active=o,this.fire(t,i)),this.fire(e,i)}}function ioe(e){return function(t){this.fire(e,t),this._active=null}}St(NC,Fh,{initialize(e,t,n){return this._canvas=e&&_B(e,"canvas"),[OA,yB,AA,FC,kA].forEach(i=>toe(this,i)),Fh.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup","dragenter",kA,"dragover",yB,"mouseup",AA,FC,"mouseover",OA,"dblclick","wheel",eoe,DA,TA,PA],DOMMouseScroll(e){this.fire(eoe,e)},mousemove:noe(AA,"mouseover",FC),dragover:noe("dragover","dragenter",kA),mouseout:ioe(FC),dragleave:ioe(kA),mousedown(e){this._down=this._active,this.fire(yB,e)},click(e){this._down===this._active&&(this.fire(OA,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(DA,e,!0)},touchmove(e){this.fire(TA,e,!0)},touchend(e){this.fire(PA,e,!0),this._touch=null},fire(e,t,n){const i=n?this._touch:this._active,r=this._handlers[e];if(t.vegaType=e,e===bB&&i&&i.href?this.handleHref(t,i,i.href):(e===vB||e===LC)&&this.handleTooltip(t,i,e!==LC),r)for(let o=0,s=r.length;o<s;++o)r[o].handler.call(this._obj,t,i)},on(e,t){const n=this.eventName(e),i=this._handlers;return this._handlerIndex(i[n],e,t)<0&&(toe(this,e),(i[n]||(i[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&i.splice(r,1),this},pickEvent(e){const t=SA(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,i,r){const o=this.context();return il[e.marktype].pick.call(this,o,e,t,n,i,r)}});var Fje=function Ije(){return typeof window<"u"&&window.devicePixelRatio||1}();function RA(e){Lu.call(this,e),this._options={},this._redraw=!1,this._dirty=new oo,this._tempb=new oo}const roe=Lu.prototype;function wB(e,t){Fh.call(this,e,t);const n=this;n._hrefHandler=CB(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href)}),n._tooltipHandler=CB(n,(i,r)=>{n.handleTooltip(i,r,i.type!==LC)})}St(RA,Lu,{initialize(e,t,n,i,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:xh(1,1),e&&this._canvas&&(Sc(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),roe.initialize.call(this,e,t,n,i,r)},resize(e,t,n,i){if(roe.resize.call(this,e,t,n,i),this._canvas)!function Lje(e,t,n,i,r,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&null!=e.parentNode,a=e.getContext("2d"),l=s?Fje:r;e.width=t*l,e.height=n*l;for(const c in o)a[c]=o[c];s&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||nt("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,i=this._width,r=this._height,o=this._dirty,s=((e,t,n)=>(new oo).set(0,0,t,n).translate(-e[0],-e[1]))(n,i,r);t.save();const a=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):function $je(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,s.intersect(o),n);return this.clear(-n[0],-n[1],i,r),this.draw(t,e,a),t.restore(),o.clear(),this},draw(e,t,n){const i=il[t.marktype];t.clip&&function F8e(e,t){var n=t.clip;e.save(),Yn(n)?(e.beginPath(),n(e),e.clip()):Fre(e,t.group)}(e,t),i.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,i){const r=this._options,o=this.context();"pdf"!==r.type&&!r.externalContext&&o.clearRect(e,t,n,i),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,i))}});const CB=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)};St(wB,Fh,{initialize(e,t,n){let i=this._svg;return i&&(i.removeEventListener(bB,this._hrefHandler),i.removeEventListener(vB,this._tooltipHandler),i.removeEventListener(LC,this._tooltipHandler)),this._svg=i=e&&_B(e,"svg"),i&&(i.addEventListener(bB,this._hrefHandler),i.addEventListener(vB,this._tooltipHandler),i.addEventListener(LC,this._tooltipHandler)),Fh.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[n],e,t)<0){const o={type:e,handler:t,listener:CB(this,t)};(i[n]||(i[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const ooe="aria-hidden",MB="aria-label",xB="role",EB="aria-roledescription",soe="graphics-object",SB="graphics-symbol",aoe=(e,t,n)=>({[xB]:e,[EB]:t,[MB]:n||void 0}),Bje=bc(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),loe={axis:{desc:"axis",caption:function Vje(e){const t=e.datum,n=e.orient,i=t.title?hoe(e):null,r=e.context,o=r.scales[t.scale].value,s=r.dataflow.locale(),a=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(i?` titled '${i}'`:"")+` for a ${rv(a)?"discrete":a} scale with ${cre(s,o,e)}`}},legend:{desc:"legend",caption:function Uje(e){const t=e.datum,n=t.title?hoe(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,o=Object.keys(r),s=e.context,a=s.scales[r[o[0]]].value,l=s.dataflow.locale();return function Wje(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(i)+(n?` titled '${n}'`:"")+` for ${function jje(e){return e=e.map(t=>t+("fill"===t||"stroke"===t?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+pi(e)}(o)} with ${cre(l,a,e)}`}},"title-text":{desc:"title",caption:e=>`Title text '${foe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${foe(e)}'`}},coe={ariaRole:xB,ariaRoleDescription:EB,description:MB};function uoe(e,t){const n=!1===t.aria;if(e(ooe,n||void 0),n||null==t.description)for(const i in coe)e(coe[i],void 0);else{const i=t.mark.marktype;e(MB,t.description),e(xB,t.ariaRole||("group"===i?soe:SB)),e(EB,t.ariaRoleDescription||`${i} mark`)}}function doe(e){return!1===e.aria?{[ooe]:!0}:Bje[e.role]?null:loe[e.role]?function Hje(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return aoe(t.role||SB,t.desc,n.description||i(n))}catch{return null}}(e,loe[e.role]):function zje(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some(i=>null!=i.description&&!1!==i.aria);return aoe(n?soe:SB,`${t} mark container`,e.description)}(e)}function foe(e){return Ht(e.text).join(" ")}function hoe(e){try{return Ht(pi(e.items).items[0].text).join(" ")}catch{return null}}const poe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function kB(){let e="",t="",n="";const i=[],r=()=>t=n="",s=(l,c)=>(null!=c&&(t+=` ${l}="${(e=>poe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))(c)}"`),a),a={open(l){(l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)})(l),t="<"+l;for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];for(const f of u)for(const h in f)s(h,f[h]);return a},close(){const l=i.pop();return e+=t?t+(n?`>${n}</${l}>`:"/>"):`</${l}>`,r(),a},attr:s,text:l=>(n+=poe(l),a),toString:()=>e};return a}const goe=e=>moe(kB(),e)+"";function moe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)3===i.nodeType?e.text(i.nodeValue):moe(e,i)}return e.close()}const IA={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},FA={blend:"mix-blend-mode"},_oe={fill:"none","stroke-miterlimit":10},yoe="http://www.w3.org/2000/xmlns/",bo=TC.xmlns;function AB(e){Lu.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const OB=Lu.prototype;function voe(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function qje(e,t,n){let i,r,o;if("radial"===t.gradient){let s=Ca(e,n++,"pattern",bo);Lh(s,{id:"p_"+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=Ca(s,0,"rect",bo),Lh(s,{width:1,height:1,fill:`url(${woe()}#${t.id})`}),Lh(e=Ca(e,n++,"radialGradient",bo),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Lh(e=Ca(e,n++,"linearGradient",bo),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)o=Ca(e,i,"stop",bo),o.setAttribute("offset",t.stops[i].offset),o.setAttribute("stop-color",t.stops[i].color);return Sc(e,i),n}function Yje(e,t,n){let i;return(e=Ca(e,n,"clipPath",bo)).setAttribute("id",t.id),t.path?(i=Ca(e,0,"path",bo),i.setAttribute("d",t.path)):(i=Ca(e,0,"rect",bo),Lh(i,{x:0,y:0,width:t.width,height:t.height})),Sc(e,1),n+1}function boe(e,t,n,i,r){let s,o=e._svg;if(!o&&(s=t.ownerDocument,o=Ih(s,i,bo),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===i))){const a=Ih(s,"path",bo);o.appendChild(a),a.__data__=e;const l=Ih(s,"g",bo);o.appendChild(l),l.__data__=e;const c=Ih(s,"path",bo);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==r||function Kje(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}St(AB,Lu,{initialize(e,t,n,i,r){return this._defs={},this._clearDefs(),e&&(this._svg=Ca(e,0,"svg",bo),this._svg.setAttributeNS(yoe,"xmlns",bo),this._svg.setAttributeNS(yoe,"xmlns:xlink",TC["xmlns:xlink"]),this._svg.setAttribute("version",TC.version),this._svg.setAttribute("class","marks"),Sc(e,1),this._root=Ca(this._svg,0,"g",bo),Lh(this._root,_oe),Sc(this._svg,1)),this.background(this._bgcolor),OB.initialize.call(this,e,t,n,i,r)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),OB.background.apply(this,arguments)},resize(e,t,n,i){return OB.resize.call(this,e,t,n,i),this._svg&&(Lh(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Ca(e,0,"rect",bo),Lh(n,{width:this._width,height:this._height,fill:t}));const i=goe(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),i},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),Sc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,i,r,o,s,a,l;for(s=0,a=e.length;s<a;++s)if(n=e[s],i=n.mark,i.marktype!==r&&(r=i.marktype,o=il[r]),i.zdirty&&i.dirty!==t&&(this._dirtyAll=!1,voe(n,t),i.items.forEach(c=>{c.dirty=t})),!i.zdirty){if(n.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=o.nested?i.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,voe(n,t)),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const i=this._svg,r=il[t.marktype],o=!1===t.interactive?"none":null,s="g"===r.tag,a=boe(t,e,n,"g",i);a.setAttribute("class",Kre(t));const l=doe(t);for(const f in l)Xs(a,f,l[f]);s||Xs(a,"pointer-events",o),Xs(a,"clip-path",t.clip?W3(this,t,t.group):null);let c=null,u=0;const d=f=>{const h=this.isDirty(f),y=boe(f,a,c,r.tag,i);h&&(this._update(r,y,f),s&&function Xje(e,t,n){t=t.lastChild.previousSibling;let i,r=0;xc(n,o=>{i=e.mark(t,o,i),++r}),Sc(t,1+r)}(this,y,f)),c=y,++u};return r.nested?t.items.length&&d(t.items[0]):xc(t,d),Sc(a,u),a},_update(e,t,n){nf=t,xs=t.__values__,uoe(BC,n),e.attr(BC,n,this);const i=Zje[e.type];i&&i.call(this,e,t,n),nf&&this.style(nf,n)},style(e,t){if(null!=t){for(const n in IA){let i="font"===n?RC(t):t[n];if(i===xs[n])continue;const r=IA[n];null==i?e.removeAttribute(r):(B3(i)&&(i=dre(i,this._defs.gradient,woe())),e.setAttribute(r,i+"")),xs[n]=i}for(const n in FA)LA(e,FA[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,i=0;for(const r in t.gradient)n||(t.el=n=Ca(e,1,"defs",bo)),i=qje(n,t.gradient[r],i);for(const r in t.clipping)n||(t.el=n=Ca(e,1,"defs",bo)),i=Yje(n,t.clipping[r],i);n&&(0===i?(e.removeChild(n),t.el=null):Sc(n,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});let nf=null,xs=null;const Zje={group(e,t,n){const i=nf=t.childNodes[2];xs=i.__values__,e.foreground(BC,n,this),xs=t.__values__,nf=t.childNodes[1],e.content(BC,n,this);const r=nf=t.childNodes[0];e.background(BC,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==xs.events&&(Xs(i,"pointer-events",o),Xs(r,"pointer-events",o),xs.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Xs(i,"display",null),this.style(r,n),Xs(r,"stroke",null),s&&(n.fill=null),xs=i.__values__,this.style(i,n),s&&(n.fill=s),nf=null}else Xs(i,"display","none")},image(e,t,n){!1===n.smooth?(LA(t,"image-rendering","optimizeSpeed"),LA(t,"image-rendering","pixelated")):LA(t,"image-rendering",null)},text(e,t,n){const i=PC(n);let r,o,s,a;ot(i)?(o=i.map(l=>Rh(n,l)),r=o.join("\n"),r!==xs.text&&(Sc(t,0),s=t.ownerDocument,a=Ph(n),o.forEach((l,c)=>{const u=Ih(s,"tspan",bo);u.__data__=n,u.textContent=l,c&&(u.setAttribute("x",0),u.setAttribute("dy",a)),t.appendChild(u)}),xs.text=r)):(o=Rh(n,i),o!==xs.text&&(t.textContent=o,xs.text=o)),Xs(t,"font-family",RC(n)),Xs(t,"font-size",Fu(n)+"px"),Xs(t,"font-style",n.fontStyle),Xs(t,"font-variant",n.fontVariant),Xs(t,"font-weight",n.fontWeight)}};function BC(e,t,n){t!==xs[e]&&(n?function Qje(e,t,n,i){null!=n?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}(nf,e,t,n):Xs(nf,e,t),xs[e]=t)}function LA(e,t,n){n!==xs[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),xs[t]=n)}function Lh(e,t){for(const n in t)Xs(e,n,t[n])}function Xs(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function woe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function DB(e){Lu.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}St(DB,Lu,{svg(){return this._text},_render(e){const t=kB();t.open("svg",Xn({},TC,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",_oe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=il[t.marktype],i=n.tag,r=[uoe,n.attr];e.open("g",{class:Kre(t),"clip-path":t.clip?W3(this,t,t.group):null},doe(t),{"pointer-events":"g"!==i&&!1===t.interactive?"none":null});const o=s=>{const a=this.href(s);if(a&&e.open("a",a),e.open(i,this.attr(t,s,r,"g"!==i?i:null)),"text"===i){const l=PC(s);if(ot(l)){const c={x:0,dy:Ph(s)};for(let u=0;u<l.length;++u)e.open("tspan",u?c:null).text(Rh(s,l[u])).close()}else e.text(Rh(s,l))}else if("g"===i){const l=s.strokeForeground,c=s.fill,u=s.stroke;l&&u&&(s.stroke=null),e.open("path",this.attr(t,s,n.background,"bgrect")).close(),e.open("g",this.attr(t,s,n.content)),xc(s,d=>this.mark(e,d)),e.close(),l&&u?(c&&(s.fill=null),s.stroke=u,e.open("path",this.attr(t,s,n.foreground,"bgrect")).close(),c&&(s.fill=c)):e.open("path",this.attr(t,s,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):xc(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[t]=i})}return null},attr(e,t,n,i){const r={},o=(s,a,l,c)=>{r[c||s]=a};return Array.isArray(n)?n.forEach(s=>s(o,t,this)):n(o,t,this),i&&function Jje(e,t,n,i,r){let o;if(null==t||("bgrect"===i&&!1===n.interactive&&(e["pointer-events"]="none"),"bgfore"===i&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill)))return e;"image"===i&&!1===t.smooth&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),"text"===i&&(e["font-family"]=RC(t),e["font-size"]=Fu(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in IA){let a=t[s];const l=IA[s];"transparent"===a&&("fill"===l||"stroke"===l)||null!=a&&(B3(a)&&(a=dre(a,r.gradient,"")),e[l]=a)}for(const s in FA){const a=t[s];null!=a&&(o=o||[],o.push(`${FA[s]}: ${a};`))}o&&(e.style=o.join(" "))}(r,t,e,i,this._defs),r},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const r in t){const o=t[r],s=o.stops;"radial"===o.gradient?(e.open("pattern",{id:"p_"+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:r,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let a=0;a<s.length;++a)e.open("stop",{offset:s[a].offset,"stop-color":s[a].color}).close();e.close()}for(const r in n){const o=n[r];e.open("clipPath",{id:r}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});const Nh={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},dv={};function NA(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(dv[e]=t,this):dv[e]}function Soe(e,t,n){const i=[],r=(new oo).union(t),o=e.marktype;return o?koe(e,r,n,i):"group"===o?Aoe(e,r,n,i):nt("Intersect scene must be mark node or group item.")}function koe(e,t,n,i){if(function e9e(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const r=e.items,o=e.marktype,s=r.length;let a=0;if("group"===o)for(;a<s;++a)Aoe(r[a],t,n,i);else for(const l=il[o].isect;a<s;++a){const c=r[a];Ooe(c,t,l)&&i.push(c)}}return i}function Aoe(e,t,n,i){n&&n(e.mark)&&Ooe(e,t,il.group.isect)&&i.push(e);const r=e.items,o=r&&r.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)koe(r[l],t,n,i);t.translate(s,a)}return i}function Ooe(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}dv.canvas=dv.png={renderer:RA,headless:RA,handler:NC},dv.svg={renderer:AB,headless:DB,handler:wB},dv.none={};const TB=new oo;function Doe(e){const t=e.clip;if(Yn(t))t(AC(TB.clear()));else{if(!t)return;TB.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(TB)}function PB(e,t,n){return e===t||("path"===n?Toe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Xi(e)&&Xi(t)?Math.abs(e-t)<=1e-9:e&&t&&(jt(e)||jt(t))?function n9e(e,t){var r,o,n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(!PB(e[r=n[o]],t[r],r))return!1;return typeof e==typeof t}(e,t):e==t)}function Toe(e,t){return PB(ov(e),ov(t))}function i9e(){Cre(),function AUe(){ure=0}()}const fv="top",kc="left",Ac="right",$h="bottom",RB="start",IB="middle",Ks="end",$A="group",FB="axis",LB="title",NB="legend",Poe="row-header",Roe="row-footer",Foe="column-header",Loe="column-footer",Noe="column-title",$B="none",BA="all",BB="each",zB="flush",Bh="column",zh="row";function Hoe(e){Qe.call(this,null,e)}function zA(e,t,n){return t(e.bounds.clear(),e,n)}St(Hoe,Qe,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,o=il[r],s=o.bound;let l,a=i.bounds;if(o.nested)i.items.length&&n.dirty(i.items[0]),a=zA(i,s),i.items.forEach(c=>{c.bounds.clear().union(a)});else if(r===$A||e.modified())switch(t.visit(t.MOD,c=>n.dirty(c)),a.clear(),i.items.forEach(c=>a.union(zA(c,s))),i.role){case FB:case NB:case LB:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,c=>{a.union(zA(c,s))}),t.visit(t.MOD,c=>{l=l||a.alignsWith(c.bounds),n.dirty(c),a.union(zA(c,s))}),l&&(a.clear(),i.items.forEach(c=>a.union(c.bounds)));return Doe(i),t.modifies("bounds")}});const Voe=":vega_identifier:";function HB(e){Qe.call(this,0,e)}function Uoe(e){Qe.call(this,null,e)}function joe(e){Qe.call(this,null,e)}HB.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},St(HB,Qe,{transform(e,t){const n=function g9e(e){return e._signals[Voe]||(e._signals[Voe]=e.add(0))}(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,o=>o[i]=o[i]||++r),n.set(this.value=r),t}}),St(Uoe,Qe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function m9e(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===$A?fA:dA;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const Woe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>r&&Goe(n.bounds,i.bounds,t)?i.opacity=0:(n=i,1))}},Goe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),qoe=(e,t)=>{for(var o,n=1,i=e.length,r=e[0].bounds;n<i;r=o,++n)if(Goe(r,o=e[n].bounds,t))return!0},_9e=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Yoe=e=>(e.forEach(t=>t.opacity=1),e),Xoe=(e,t)=>e.reflow(t.modified()).modifies("opacity");function Koe(e){Qe.call(this,null,e)}St(joe,Qe,{transform(e,t){const n=Woe[e.method]||Woe.parity,i=e.separation||0;let o,s,r=t.materialize(t.SOURCE).source;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(Yoe(r),t=Xoe(t,e)),t;if(r=r.filter(_9e),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),o=Yoe(r),t=Xoe(t,e),o.length>=3&&qoe(o,i)){do{o=n(o,i)}while(o.length>=3&&qoe(o,i));o.length<3&&!pi(r).opacity&&(o.length>1&&(pi(o).opacity=0),pi(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=((e,t,n)=>{var i=e.range(),r=new oo;return t===fv||t===$h?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),o=>r.encloses(o.bounds)})(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}}),St(Koe,Qe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Es=new oo;function hv(e,t,n){return e[t]===n?0:(e[t]=n,1)}function v9e(e){var t=e.items[0].orient;return t===kc||t===Ac}function w9e(e,t,n,i){var z,q,r=t.items[0],o=r.datum,s=null!=r.translate?r.translate:.5,a=r.orient,l=function b9e(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(o),c=r.range,u=r.offset,d=r.position,f=r.minExtent,h=r.maxExtent,y=o.title&&r.items[l[2]].items[0],b=r.titlePadding,C=r.bounds,k=y&&fB(y),O=0,I=0;switch(Es.clear().union(C),C.clear(),(z=l[0])>-1&&C.union(r.items[z].bounds),(z=l[1])>-1&&C.union(r.items[z].bounds),a){case fv:O=d||0,I=-u,q=Math.max(f,Math.min(h,-C.y1)),C.add(0,-q).add(c,0),y&&HA(e,y,q,b,k,0,-1,C);break;case kc:O=-u,I=d||0,q=Math.max(f,Math.min(h,-C.x1)),C.add(-q,0).add(0,c),y&&HA(e,y,q,b,k,1,-1,C);break;case Ac:O=n+u,I=d||0,q=Math.max(f,Math.min(h,C.x2)),C.add(0,0).add(q,c),y&&HA(e,y,q,b,k,1,1,C);break;case $h:O=d||0,I=i+u,q=Math.max(f,Math.min(h,C.y2)),C.add(0,0).add(c,q),y&&HA(e,y,q,b,0,0,1,C);break;default:O=r.x,I=r.y}return tf(C.translate(O,I),r),hv(r,"x",O+s)|hv(r,"y",I+s)&&(r.bounds=Es,e.dirty(r),r.bounds=C,e.dirty(r)),r.mark.bounds.clear().union(C)}function HA(e,t,n,i,r,o,s,a){const l=t.bounds;if(t.auto){const c=s*(n+r+i);let u=0,d=0;e.dirty(t),o?u=(t.x||0)-(t.x=c):d=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(l.translate(-u,-d)),e.dirty(t)}a.union(l)}const Zoe=(e,t)=>Math.floor(Math.min(e,t)),Qoe=(e,t)=>Math.ceil(Math.max(e,t));function M9e(e){return(new oo).set(0,0,e.width||0,e.height||0)}function x9e(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Cr(e,t,n){return(jt(e)?e[t]:e)??(void 0!==n?n:0)}function Joe(e){return e<0?Math.ceil(-e):0}function ese(e,t,n){var ne,K,le,me,ge,ye,Se,ve,Z,ae,oe,i=!n.nodirty,r=n.bounds===zB?M9e:x9e,o=Es.set(0,0,0,0),s=Cr(n.align,Bh),a=Cr(n.align,zh),l=Cr(n.padding,Bh),c=Cr(n.padding,zh),u=n.columns||t.length,d=u<=0?1:Math.ceil(t.length/u),f=t.length,h=Array(f),y=Array(u),b=0,C=Array(f),k=Array(d),O=0,I=Array(f),z=Array(f),q=Array(f);for(K=0;K<u;++K)y[K]=0;for(K=0;K<d;++K)k[K]=0;for(K=0;K<f;++K)ge=q[K]=r(ye=t[K]),ye.x=ye.x||0,I[K]=0,ye.y=ye.y||0,z[K]=0,le=K%u,me=~~(K/u),b=Math.max(b,Se=Math.ceil(ge.x2)),O=Math.max(O,ve=Math.ceil(ge.y2)),y[le]=Math.max(y[le],Se),k[me]=Math.max(k[me],ve),h[K]=l+Joe(ge.x1),C[K]=c+Joe(ge.y1),i&&e.dirty(t[K]);for(K=0;K<f;++K)K%u==0&&(h[K]=0),K<u&&(C[K]=0);if(s===BB)for(le=1;le<u;++le){for(oe=0,K=le;K<f;K+=u)oe<h[K]&&(oe=h[K]);for(K=le;K<f;K+=u)h[K]=oe+y[le-1]}else if(s===BA){for(oe=0,K=0;K<f;++K)K%u&&oe<h[K]&&(oe=h[K]);for(K=0;K<f;++K)K%u&&(h[K]=oe+b)}else for(s=!1,le=1;le<u;++le)for(K=le;K<f;K+=u)h[K]+=y[le-1];if(a===BB)for(me=1;me<d;++me){for(oe=0,ne=(K=me*u)+u;K<ne;++K)oe<C[K]&&(oe=C[K]);for(K=me*u;K<ne;++K)C[K]=oe+k[me-1]}else if(a===BA){for(oe=0,K=u;K<f;++K)oe<C[K]&&(oe=C[K]);for(K=u;K<f;++K)C[K]=oe+O}else for(a=!1,me=1;me<d;++me)for(ne=(K=me*u)+u;K<ne;++K)C[K]+=k[me-1];for(Z=0,K=0;K<f;++K)I[K]+=(Z=h[K]+(K%u?Z:0))-t[K].x;for(le=0;le<u;++le)for(ae=0,K=le;K<f;K+=u)z[K]+=(ae+=C[K])-t[K].y;if(s&&Cr(n.center,Bh)&&d>1)for(K=0;K<f;++K)(Z=(ge=s===BA?b:y[K%u])-q[K].x2-t[K].x-I[K])>0&&(I[K]+=Z/2);if(a&&Cr(n.center,zh)&&1!==u)for(K=0;K<f;++K)(ae=(ge=a===BA?O:k[~~(K/u)])-q[K].y2-t[K].y-z[K])>0&&(z[K]+=ae/2);for(K=0;K<f;++K)o.union(q[K].translate(I[K],z[K]));switch(Z=Cr(n.anchor,"x"),ae=Cr(n.anchor,"y"),Cr(n.anchor,Bh)){case Ks:Z-=o.width();break;case IB:Z-=o.width()/2}switch(Cr(n.anchor,zh)){case Ks:ae-=o.height();break;case IB:ae-=o.height()/2}for(Z=Math.round(Z),ae=Math.round(ae),o.clear(),K=0;K<f;++K)t[K].mark.bounds.clear();for(K=0;K<f;++K)(ye=t[K]).x+=I[K]+=Z,ye.y+=z[K]+=ae,o.union(ye.mark.bounds.union(ye.bounds.translate(I[K],z[K]))),i&&e.dirty(ye);return o}function S9e(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function k9e(e,t){return e.bounds[t]}function VA(e,t,n,i,r,o,s,a,l,c,u,d,f,h){var k,O,I,z,q,ne,K,le,me,y=n.length,b=0,C=0;if(!y)return b;for(k=u;k<y;k+=d)n[k]&&(b=s(b,l(n[k],c)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=o,O=0,z=t.length;O<z;++O)e.dirty(t[O]),t[O].mark.bounds.clear();for(k=u,O=0,z=t.length;O<z;++O,k+=d){for(q=(ne=t[O]).mark.bounds,I=k;I>=0&&null==(K=n[I]);I-=f);a?(le=null==h?K.x:Math.round(K.bounds.x1+h*K.bounds.width()),me=b):(le=b,me=null==h?K.y:Math.round(K.bounds.y1+h*K.bounds.height())),q.union(ne.bounds.translate(le-(ne.x||0),me-(ne.y||0))),ne.x=le,ne.y=me,e.dirty(ne),C=s(C,q[c])}return C}function tse(e,t,n,i,r,o){if(t){e.dirty(t);var s=n,a=n;i?s=Math.round(r.x1+o*r.width()):a=Math.round(r.y1+o*r.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function D9e(e,t,n,i,r,o,s){const a=function A9e(e,t){const n=e[t]||{};return(i,r)=>null!=n[i]?n[i]:null!=e[i]?e[i]:r}(n,t),l=function O9e(e,t){let n=-1/0;return e.forEach(i=>{null!=i.offset&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}(e,a("offset",0)),c=a("anchor",RB),u=c===Ks?1:c===IB?.5:0,d={align:BB,bounds:a("bounds",zB),columns:"vertical"===a("direction")?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case kc:d.anchor={x:Math.floor(i.x1)-l,column:Ks,y:u*(s||i.height()+2*i.y1),row:c};break;case Ac:d.anchor={x:Math.ceil(i.x2)+l,y:u*(s||i.height()+2*i.y1),row:c};break;case fv:d.anchor={y:Math.floor(r.y1)-l,row:Ks,x:u*(o||r.width()+2*r.x1),column:c};break;case $h:d.anchor={y:Math.ceil(r.y2)+l,x:u*(o||r.width()+2*r.x1),column:c};break;case"top-left":d.anchor={x:l,y:l};break;case"top-right":d.anchor={x:o-l,y:l,column:Ks};break;case"bottom-left":d.anchor={x:l,y:s-l,row:Ks};break;case"bottom-right":d.anchor={x:o-l,y:s-l,column:Ks,row:Ks}}return d}function T9e(e,t){var l,c,n=t.items[0],i=n.datum,r=n.orient,o=n.bounds,s=n.x,a=n.y;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),function R9e(e,t,n){var i=t.padding,r=i-n.x,o=i-n.y;if(t.datum.title){var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,c=i-s.x,u=i-s.y;switch(s.orient){case kc:r+=Math.ceil(s.bounds.width())+l;break;case Ac:case $h:break;default:o+=s.bounds.height()+l}switch((r||o)&&zC(e,n,r,o),s.orient){case kc:u+=pv(t,n,s,a,1,1);break;case Ac:c+=pv(t,n,s,Ks,0,0)+l,u+=pv(t,n,s,a,1,1);break;case $h:c+=pv(t,n,s,a,0,0),u+=pv(t,n,s,Ks,-1,0,1)+l;break;default:c+=pv(t,n,s,a,0,0)}(c||u)&&zC(e,s,c,u),(c=Math.round(s.bounds.x1-i))<0&&(zC(e,n,-c,0),zC(e,s,-c,0))}else(r||o)&&zC(e,n,r,o)}(e,n,n.items[0].items[0]),o=function P9e(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}(n,o),l=2*n.padding,c=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),c=Math.ceil(o.height()+c)),"symbol"===i.type&&function I9e(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}(n.items[0].items[0].items[0].items),r!==$B&&(n.x=s=0,n.y=a=0),n.width=l,n.height=c,tf(o.set(s,a,s+l,a+c),n),n.mark.bounds.clear().union(o),n}function pv(e,t,n,i,r,o,s){const l=n.datum.vgrad,u=("symbol"===e.datum.type||!o&&l||s?t:t.items[0]).bounds[r?"y2":"x2"]-e.padding,d=l&&o?u:0,f=l&&o?0:u,h=r<=0?0:fB(n);return Math.round(i===RB?d:i===Ks?f-h:.5*(u-h))}function zC(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function nse(e){Qe.call(this,null,e)}function ise(e){Qe.call(this,null,e)}function rse(e){Qe.call(this,null,e)}function B9e(){return Li({})}function ose(e){Qe.call(this,null,e)}function sse(e){Qe.call(this,[],e)}St(nse,Qe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&function E9e(e,t,n){var u,d,f,h,y,b,C,i=function C9e(e){var r,o,t=e.items,n=t.length,i=0;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(o=(r=t[i]).items,r.marktype===$A)switch(r.role){case FB:case NB:case LB:break;case Poe:s.rowheaders.push(...o);break;case Roe:s.rowfooters.push(...o);break;case Foe:s.colheaders.push(...o);break;case Loe:s.colfooters.push(...o);break;case"row-title":s.rowtitle=o[0];break;case Noe:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}(t),r=i.marks,o=n.bounds===zB?S9e:k9e,s=n.offset,a=n.columns||r.length,l=a<=0?1:Math.ceil(r.length/a),c=l*a;const k=ese(e,r,n);k.empty()&&k.set(0,0,0,0),i.rowheaders&&(b=Cr(n.headerBand,zh,null),u=VA(e,i.rowheaders,r,0,l,-Cr(s,"rowHeader"),Zoe,0,o,"x1",0,a,1,b)),i.colheaders&&(b=Cr(n.headerBand,Bh,null),d=VA(e,i.colheaders,r,0,a,-Cr(s,"columnHeader"),Zoe,1,o,"y1",0,1,a,b)),i.rowfooters&&(b=Cr(n.footerBand,zh,null),f=VA(e,i.rowfooters,r,0,l,Cr(s,"rowFooter"),Qoe,0,o,"x2",a-1,a,1,b)),i.colfooters&&(b=Cr(n.footerBand,Bh,null),h=VA(e,i.colfooters,r,0,a,Cr(s,"columnFooter"),Qoe,1,o,"y2",c-a,1,a,b)),i.rowtitle&&(y=Cr(n.titleAnchor,zh),C=Cr(s,"rowTitle"),C=y===Ks?f+C:u-C,b=Cr(n.titleBand,zh,.5),tse(e,i.rowtitle,C,0,k,b)),i.coltitle&&(y=Cr(n.titleAnchor,Bh),C=Cr(s,"columnTitle"),C=y===Ks?h+C:d-C,b=Cr(n.titleBand,Bh,.5),tse(e,i.coltitle,C,1,k,b))}(n,i,e.layout),function N9e(e,t,n){var u,d,f,y,b,i=t.items,r=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=(new oo).set(0,0,r,o),a=s.clone(),l=s.clone(),c=[];for(y=0,b=i.length;y<b;++y)switch(d=i[y],d.role){case FB:(v9e(d)?a:l).union(w9e(e,d,r,o));break;case LB:u=d;break;case NB:c.push(T9e(e,d));break;case"frame":case"scope":case Poe:case Roe:case"row-title":case Foe:case Loe:case Noe:a.union(d.bounds),l.union(d.bounds);break;default:s.union(d.bounds)}if(c.length){const C={};c.forEach(k=>{(f=k.orient||Ac)!==$B&&(C[f]||(C[f]=[])).push(k)});for(const k in C){const O=C[k];ese(e,O,D9e(O,k,n.legends,a,l,r,o))}c.forEach(k=>{const O=k.bounds;if(O.equals(k._bounds)||(k.bounds=k._bounds,e.dirty(k),k.bounds=O,e.dirty(k)),!n.autosize||"fit"!==n.autosize.type&&"fit-x"!==n.autosize.type&&"fit-y"!==n.autosize.type)s.union(O);else switch(k.orient){case kc:case Ac:s.add(O.x1,0).add(O.x2,0);break;case fv:case $h:s.add(0,O.y1).add(0,O.y2)}})}s.union(a).union(l),u&&s.union(function F9e(e,t,n,i,r){var I,o=t.items[0],a=o.orient,l=o.anchor,c=o.offset,u=o.padding,d=o.items[0].items[0],f=o.items[1]&&o.items[1].items[0],h=a===kc||a===Ac?i:n,y=0,b=0,C=0,k=0,O=0;if(o.frame!==$A?a===kc?(y=r.y2,h=r.y1):a===Ac?(y=r.y1,h=r.y2):(y=r.x1,h=r.x2):a===kc&&(y=i,h=0),I=l===RB?y:l===Ks?h:(y+h)/2,f&&f.text){switch(a){case fv:case $h:O=d.bounds.height()+u;break;case kc:k=d.bounds.width()+u;break;case Ac:k=-d.bounds.width()-u}Es.clear().union(f.bounds),Es.translate(k-(f.x||0),O-(f.y||0)),hv(f,"x",k)|hv(f,"y",O)&&(e.dirty(f),f.bounds.clear().union(Es),f.mark.bounds.clear().union(Es),e.dirty(f)),Es.clear().union(f.bounds)}else Es.clear();switch(Es.union(d.bounds),a){case fv:b=I,C=r.y1-Es.height()-c;break;case kc:b=r.x1-Es.width()-c,C=I;break;case Ac:b=r.x2+Es.width()+c,C=I;break;case $h:b=I,C=r.y2+c;break;default:b=o.x,C=o.y}return hv(o,"x",b)|hv(o,"y",C)&&(Es.translate(b,C),e.dirty(o),o.bounds.clear().union(Es),t.bounds.clear().union(Es),e.dirty(o)),o.bounds}(e,u,r,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),function $9e(e,t,n,i){const r=i.autosize||{},o=r.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-u));if("padding"===r.contains){const y=e.padding();s-=y.left+y.right,a-=y.top+y.bottom}o===$B?(c=0,d=0,l=s,u=a):"fit"===o?(l=Math.max(0,s-c-f),u=Math.max(0,a-d-h)):"fit-x"===o?(l=Math.max(0,s-c-f),a=u+d+h):"fit-y"===o?(s=l+c+f,u=Math.max(0,a-d-h)):"pad"===o&&(s=l+c+f,a=u+d+h),e._resizeView(s,a,l,u,[c,d],r.resize)}(e,t,s,n)}(n,i,e)}),function L9e(e){return e&&"legend-entry"!==e.mark.role}(e.mark.group)?t.reflow():t}}),St(ise,Qe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.scale,a=L3(o,e.count??(e.values?e.values.length:10),e.minstep),l=e.format||nre(n,o,a,e.formatSpecifier,e.formatType,!!e.values),c=e.values?tre(o,e.values,a):N3(o,a);return r&&(i.rem=r),r=c.map((u,d)=>Li({index:d/(c.length-1||1),value:u,label:l(u)})),e.extra&&r.length&&r.push(Li({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}}),St(rse,Qe,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||B9e,o=e.key||wn,s=this.value;return ot(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(o))&&nt("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=function z9e(e){const t=$y().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,a=>{const l=o(a);let c=s.get(l);c?c.exit?(s.empty--,i.add.push(c)):i.mod.push(c):(c=r(a),s.set(l,c),i.add.push(c)),c.datum=a,c.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),c=s.get(l);c&&(c.datum=a,i.mod.push(c))}),t.visit(t.REM,a=>{const l=o(a),c=s.get(l);a===c.datum&&!c.exit&&(i.rem.push(c),c.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}}),St(ose,Qe,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,o=t.encode;if(ot(o)){if(!n.changed()&&!o.every(d=>r[d]))return t.StopPropagation;o=o[0],n.encode=null}var s="enter"===o,a=r.update||hh,l=r.enter||hh,c=r.exit||hh,u=(o&&!s?r[o]:a)||hh;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),u!==hh&&u!==a&&(t.visit(t.ADD,d=>{u(d,e)}),n.modifies(u.output))),t.changed(t.REM)&&c!==hh&&(t.visit(t.REM,d=>{c(d,e)}),n.modifies(c.output)),s||u!==hh){const d=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(d,f=>{const h=l(f,e)||i;(u(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(u(f,e)||i)&&n.mod.push(f)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}}),St(sse,Qe,{transform(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var f,h,y,b,C,n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.type||aA,s=e.scale,a=+e.limit,l=L3(s,e.count??5,e.minstep),u=e.format||sre(n,s,l,o,e.formatSpecifier,e.formatType,!!e.values||o===aA),d=e.values||ore(s,l);return r&&(i.rem=r),o===aA?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,a-1),C=!0):r=d,Yn(y=e.size)?(!e.values&&0===s(r[0])&&(r=r.slice(1)),b=r.reduce((k,O)=>Math.max(k,y(O,e)),0)):y=ws(b=y||8),r=r.map((k,O)=>Li({index:O,label:u(k,O,r),value:k,offset:b,size:y(k,e)})),C&&r.push(Li({index:r.length,label:`\u2026${d.length-r.length} entries`,value:C=d[r.length],offset:b,size:y(C,e)}))):"gradient"===o?(f=s.domain(),h=Zie(s,f[0],pi(f)),d.length<3&&!e.values&&f[0]!==pi(f)&&(d=[f[0],pi(f)]),r=d.map((k,O)=>Li({index:O,label:u(k,O,d),value:k,perc:h(k)}))):(y=d.length-1,h=function SUe(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+pi(t),o=r-i;if(e.type===rA){const s=n?o/n:.1;i-=s,r+=s,o=r-i}return s=>(s-i)/o}(s),r=d.map((k,O)=>Li({index:O,label:u(k,O,d),value:k,perc:O?h(k):0,perc2:O===y?1:h(d[O+1])}))),i.source=r,i.add=r,this.value=r,i}});const H9e=e=>e.source.x,V9e=e=>e.source.y,U9e=e=>e.target.x,j9e=e=>e.target.y;function VB(e){Qe.call(this,{},e)}VB.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},St(VB,Qe,{transform(e,t){var n=e.sourceX||H9e,i=e.sourceY||V9e,r=e.targetX||U9e,o=e.targetY||j9e,s=e.as||"path",l=e.shape||"line",c=use.get(l+"-"+(e.orient||"vertical"))||use.get(l);return c||nt("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[s]=c(n(u),i(u),r(u),o(u))}),t.reflow(e.modified()).modifies(s)}});const ase=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,lse=(e,t,n,i)=>{var r=n-e,o=i-t,s=Math.hypot(r,o)/2;return"M"+e+","+t+"A"+s+","+s+" "+180*Math.atan2(o,r)/Math.PI+" 0 1 "+n+","+i},cse=(e,t,n,i)=>{const r=n-e,o=i-t,s=.2*(r+o),a=.2*(o-r);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(i-s)+" "+n+","+i},use=$y({line:ase,"line-radial":(e,t,n,i)=>ase(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),arc:lse,"arc-radial":(e,t,n,i)=>lse(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),curve:cse,"curve-radial":(e,t,n,i)=>cse(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),"orthogonal-horizontal":(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,"orthogonal-vertical":(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,"orthogonal-radial":(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n);return"M"+t*r+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*s+","+t*a+"L"+i*s+","+i*a},"diagonal-horizontal":(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},"diagonal-vertical":(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},"diagonal-radial":(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*o+"C"+l*r+","+l*o+" "+l*s+","+l*a+" "+i*s+","+i*a}});function UB(e){Qe.call(this,null,e)}function dse(e){return P3(e)&&e!==Pu}UB.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},St(UB,Qe,{transform(e,t){var y,b,C,n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],s=e.startAngle||0,a=null!=e.endAngle?e.endAngle:2*Math.PI,l=t.source,c=l.map(e.field||Fy),u=c.length,d=s,f=(a-s)/GI(c),h=nl(u);for(e.sort&&h.sort((k,O)=>c[k]-c[O]),y=0;y<u;++y)C=c[h[y]],(b=l[h[y]])[i]=d,b[r]=d+=C*f;return this.value=c,t.reflow(e.modified()).modifies(n)}});const X9e=bc(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function fse(e){Qe.call(this,null,e),this.modified(!0)}function hse(e,t,n){return Gie(e)&&Math.abs(t.reduce((r,o)=>r+(o<0?-1:o>0?1:0),0))!==t.length&&n.warn("Log scale domain includes zero: "+kt(t)),t}function pse(e,t,n){return Yn(e)&&(t||n)?Xie(e,jB(t||[0,1],n)):e}function jB(e,t){return t?e.slice().reverse():e}function gse(e){Qe.call(this,null,e)}St(fse,Qe,{transform(e,t){var n=t.dataflow,i=this.value,r=function K9e(e){var i,t=e.type,n="";return t===Pu?Pu+"-"+tv:(function Z9e(e){const t=e.type;return P3(t)&&t!==Og&&t!==Dg&&(e.scheme||e.range&&e.range.length&&e.range.every(zt))}(e)&&(n=2===(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?Pu+"-":3===i?nv+"-":""),(n+t||tv).toLowerCase())}(e);for(r in(!i||r!==i.type)&&(this.value=i=ki(r)()),e)if(!X9e[r]){if("padding"===r&&dse(i.type))continue;Yn(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return function nWe(e,t,n){var i=e.type,r=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function iWe(e,t,n){return"band"!==e&&e!==A3&&nt("Only band and point scales support rangeStep."),[0,t.rangeStep*S3(n,e===A3?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0,(null!=t.paddingOuter?t.paddingOuter:t.padding)||0)]}(i,t,n);else if(t.scheme&&Yn(o=function rWe(e,t,n){var o,i=t.schemeExtent;return ot(t.scheme)?o=sA(t.scheme,t.interpolate,t.interpolateGamma):(o=F3(t.scheme.toLowerCase()))||nt(`Unrecognized scheme name: ${t.scheme}`),n=e===rA?n+1:e===O3?n-1:e===iv||e===iA?+t.schemeCount||5:n,qie(e)?pse(o,i,t.reverse):Yn(o)?Kie(pse(o,i),n):e===k3?o:o.slice(0,n)}(i,t,n))){if(e.interpolator)return e.interpolator(o);nt(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&qie(i))return e.interpolator(sA(jB(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(I3(t.interpolate,t.interpolateGamma)):Yn(e.round)?e.round(r):Yn(e.rangeRound)&&e.interpolate(r?_C:Eh),o&&e.range(jB(o,t.reverse))}(i,e,function tWe(e,t,n){let i=t.bins;if(i&&!ot(i)){const r=e.domain(),o=r[0],s=pi(r),a=i.step;let l=i.start??o,c=i.stop??s;a||nt("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),c>s&&(c=a*Math.floor(s/a)),i=nl(l,c+a/2,a)}return i?e.bins=i:e.bins&&delete e.bins,e.type===O3&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}(i,e,function Q9e(e,t,n){const i=function J9e(e,t,n){return t?(e.domain(hse(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(i>-1)return i;var a,l,r=t.domain,o=e.type,s=t.zero||void 0===t.zero&&function Y9e(e){const t=e.type;return!e.bins&&(t===tv||"pow"===t||t===bC)}(e);if(!r)return 0;if(dse(o)&&t.padding&&r[0]!==pi(r)&&(r=function eWe(e,t,n,i,r,o){var s=Math.abs(pi(n)-n[0]),a=s/(s-2*i),l=e===Jd?oN(t,null,a):e===bC?lk(t,null,a,.5):"pow"===e?lk(t,null,a,r||1):e===nA?sN(t,null,a,o||1):rN(t,null,a);return(t=t.slice())[0]=l[0],t[t.length-1]=l[1],t}(o,r,t.range,t.padding,t.exponent,t.constant)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(a=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[a]<0&&(r[a]=0)),null!=t.domainMin&&(r[0]=t.domainMin),null!=t.domainMax&&(r[a]=t.domainMax),null!=t.domainMid)){const c=(l=t.domainMid)>r[a]?a+1:l<r[0]?0:a;c!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(c,0,l)}return e.domain(hse(o,r,n)),o===k3&&e.unknown(t.domainImplicit?b3:void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&L3(e,t.nice)||null),r.length}(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),St(gse,Qe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Eg(e.sort)),this.modified(n),t}});const vse=["y0","y1"];function WB(e){Qe.call(this,null,e)}function oWe(e,t,n,i,r){for(var l,o=(t-e.sum)/2,s=e.length,a=0;a<s;++a)(l=e[a])[i]=o,l[r]=o+=Math.abs(n(l))}function sWe(e,t,n,i,r){for(var u,o=1/e.sum,s=0,a=e.length,l=0,c=0;l<a;++l)(u=e[l])[i]=s,u[r]=s=o*(c+=Math.abs(n(u)))}function aWe(e,t,n,i,r){for(var c,u,o=0,s=0,a=e.length,l=0;l<a;++l)(c=+n(u=e[l]))<0?(u[i]=s,u[r]=s+=c):(u[i]=o,u[r]=o+=c)}WB.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:vse}]},St(WB,Qe,{transform(e,t){var l,c,u,d,n=e.as||vse,i=n[0],r=n[1],o=Eg(e.sort),s=e.field||Fy,a="center"===e.offset?oWe:"normalize"===e.offset?sWe:aWe;for(l=function lWe(e,t,n,i){var s,a,l,c,u,d,f,h,y,r=[],o=b=>b(u);if(null==t)r.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)u=e[a],(f=s[d=t.map(o)])||(s[d]=f=[],r.push(f)),f.push(u);for(d=0,y=0,c=r.length;d<c;++d){for(a=0,h=0,l=(f=r[d]).length;a<l;++a)h+=Math.abs(i(f[a]));f.sum=h,h>y&&(y=h),n&&f.sort(n)}return r.max=y,r}(t.source,e.groupby,o,s),c=0,u=l.length,d=l.max;c<u;++c)a(l[c],d,s,i,r);return t.reflow(e.modified()).modifies(n)}});const HC=e=>e;function UA(e,t){e&&wse.hasOwnProperty(e.type)&&wse[e.type](e,t)}var bse={Feature:function(e,t){UA(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)UA(n[i].geometry,t)}},wse={Sphere:function(e,t){t.sphere()},Point:function(e,t){t.point((e=e.coordinates)[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)t.point((e=n[i])[0],e[1],e[2])},LineString:function(e,t){GB(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)GB(n[i],t,0)},Polygon:function(e,t){Cse(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Cse(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)UA(n[i],t)}};function GB(e,t,n){var o,i=-1,r=e.length-n;for(t.lineStart();++i<r;)t.point((o=e[i])[0],o[1],o[2]);t.lineEnd()}function Cse(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)GB(e[n],t,1);t.polygonEnd()}function rf(e,t){e&&bse.hasOwnProperty(e.type)?bse[e.type](e,t):UA(e,t)}class ts{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[i++]=a),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let i,r,o,n=this._n,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,o=r-(s-i),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(r=2*o,i=s+r,r==i-s&&(s=i))}return s}}var xn=1e-6,jA=1e-12,si=Math.PI,Vr=si/2,WA=si/4,Zs=2*si,Xr=180/si,ti=si/180,gi=Math.abs,gv=Math.atan,Vl=Math.atan2,Sn=Math.cos,GA=Math.ceil,Mse=Math.exp,qB=(Math,Math.hypot),qA=Math.log,YB=Math.pow,_n=Math.sin,Ul=Math.sign||function(e){return e>0?1:e<0?-1:0},Qs=Math.sqrt,XB=Math.tan;function xse(e){return e>1?0:e<-1?si:Math.acos(e)}function Ma(e){return e>1?Vr:e<-1?-Vr:Math.asin(e)}function ns(){}var Ese,Sse,QB,JB,KB=new ts,ZB=new ts,Hh={point:ns,lineStart:ns,lineEnd:ns,polygonStart:function(){Hh.lineStart=cWe,Hh.lineEnd=dWe},polygonEnd:function(){Hh.lineStart=Hh.lineEnd=Hh.point=ns,KB.add(gi(ZB)),ZB=new ts},result:function(){var e=KB/2;return KB=new ts,e}};function cWe(){Hh.point=uWe}function uWe(e,t){Hh.point=kse,Ese=QB=e,Sse=JB=t}function kse(e,t){ZB.add(JB*e-QB*t),QB=e,JB=t}function dWe(){kse(Ese,Sse)}const Ase=Hh;var mv=1/0,YA=mv,VC=-mv,XA=VC,fWe={point:function hWe(e,t){e<mv&&(mv=e),e>VC&&(VC=e),t<YA&&(YA=t),t>XA&&(XA=t)},lineStart:ns,lineEnd:ns,polygonStart:ns,polygonEnd:ns,result:function(){var e=[[mv,YA],[VC,XA]];return VC=XA=-(YA=mv=1/0),e}};const KA=fWe;var Ose,Dse,Nu,$u,ez=0,tz=0,UC=0,ZA=0,QA=0,_v=0,nz=0,iz=0,jC=0,Oc={point:Ng,lineStart:Tse,lineEnd:Pse,polygonStart:function(){Oc.lineStart=mWe,Oc.lineEnd=_We},polygonEnd:function(){Oc.point=Ng,Oc.lineStart=Tse,Oc.lineEnd=Pse},result:function(){var e=jC?[nz/jC,iz/jC]:_v?[ZA/_v,QA/_v]:UC?[ez/UC,tz/UC]:[NaN,NaN];return ez=tz=UC=ZA=QA=_v=nz=iz=jC=0,e}};function Ng(e,t){ez+=e,tz+=t,++UC}function Tse(){Oc.point=pWe}function pWe(e,t){Oc.point=gWe,Ng(Nu=e,$u=t)}function gWe(e,t){var n=e-Nu,i=t-$u,r=Qs(n*n+i*i);ZA+=r*(Nu+e)/2,QA+=r*($u+t)/2,_v+=r,Ng(Nu=e,$u=t)}function Pse(){Oc.point=Ng}function mWe(){Oc.point=yWe}function _We(){Rse(Ose,Dse)}function yWe(e,t){Oc.point=Rse,Ng(Ose=Nu=e,Dse=$u=t)}function Rse(e,t){var n=e-Nu,i=t-$u,r=Qs(n*n+i*i);ZA+=r*(Nu+e)/2,QA+=r*($u+t)/2,_v+=r,nz+=(r=$u*e-Nu*t)*(Nu+e),iz+=r*($u+t),jC+=3*r,Ng(Nu=e,$u=t)}const Ise=Oc;function Fse(e){this._context=e}Fse.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Zs)}},result:ns};var oz,Lse,Nse,WC,GC,rz=new ts,JA={point:ns,lineStart:function(){JA.point=vWe},lineEnd:function(){oz&&$se(Lse,Nse),JA.point=ns},polygonStart:function(){oz=!0},polygonEnd:function(){oz=null},result:function(){var e=+rz;return rz=new ts,e}};function vWe(e,t){JA.point=$se,Lse=WC=e,Nse=GC=t}function $se(e,t){rz.add(Qs((WC-=e)*WC+(GC-=t)*GC)),WC=e,GC=t}const Bse=JA;let zse,eO,Hse,Vse;class Use{constructor(t){this._append=null==t?jse:function bWe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return jse;if(t!==zse){const n=10**t;zse=t,eO=function(r){let o=1;this._+=r[0];for(const s=r.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return eO}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:this._append`M${t},${n}`,this._point=1;break;case 1:this._append`L${t},${n}`;break;default:if(this._append`M${t},${n}`,this._radius!==Hse||this._append!==eO){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Hse=i,eO=this._append,Vse=this._,this._=r}this._+=Vse}}result(){const t=this._;return this._="",t.length?t:null}}function jse(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Wse(e,t){let r,o,n=3,i=4.5;function s(a){return a&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),rf(a,r(o))),o.result()}return s.area=function(a){return rf(a,r(Ase)),Ase.result()},s.measure=function(a){return rf(a,r(Bse)),Bse.result()},s.bounds=function(a){return rf(a,r(KA)),KA.result()},s.centroid=function(a){return rf(a,r(Ise)),Ise.result()},s.projection=function(a){return arguments.length?(r=null==a?(e=null,HC):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=null==a?(t=null,new Use(n)):new Fse(t=a),"function"!=typeof i&&o.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i="function"==typeof a?a:(o.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return n;if(null==a)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return null===t&&(o=new Use(n)),s},s.projection(e).digits(n).context(t)}function Gse(){var t,e=[];return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:ns,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tO(e,t){return gi(e[0]-t[0])<xn&&gi(e[1]-t[1])<xn}function nO(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function qse(e,t,n,i,r){var a,l,o=[],s=[];if(e.forEach(function(y){if(!((b=y.length-1)<=0)){var b,O,C=y[0],k=y[b];if(tO(C,k)){if(!C[2]&&!k[2]){for(r.lineStart(),a=0;a<b;++a)r.point((C=y[a])[0],C[1]);return void r.lineEnd()}k[0]+=2*xn}o.push(O=new nO(C,y,null,!0)),s.push(O.o=new nO(C,null,O,!1)),o.push(O=new nO(k,y,null,!1)),s.push(O.o=new nO(k,null,O,!0))}}),o.length){for(s.sort(t),Yse(o),Yse(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u,d,c=o[0];;){for(var f=c,h=!0;f.v;)if((f=f.n)===c)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=u.length;a<l;++a)r.point((d=u[a])[0],d[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(h)for(a=(u=f.p.z).length-1;a>=0;--a)r.point((d=u[a])[0],d[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,h=!h}while(!f.v);r.lineEnd()}}}function Yse(e){if(t=e.length){for(var t,r,n=0,i=e[0];++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function iO(e){return[Vl(e[1],e[0]),Ma(e[2])]}function $g(e){var t=e[0],n=e[1],i=Sn(n);return[i*Sn(t),i*_n(t),_n(n)]}function rO(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yv(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function sz(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function oO(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function sO(e){var t=Qs(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function az(e){return gi(e[0])<=si?e[0]:Ul(e[0])*((gi(e[0])+si)%Zs-si)}function Xse(e){return Array.from(function*CWe(e){for(const t of e)yield*t}(e))}function Kse(e,t,n,i){return function(r){var c,u,d,o=t(r),s=Gse(),a=t(s),l=!1,f={point:h,lineStart:b,lineEnd:C,polygonStart:function(){f.point=k,f.lineStart=O,f.lineEnd=I,u=[],c=[]},polygonEnd:function(){f.point=h,f.lineStart=b,f.lineEnd=C,u=Xse(u);var z=function wWe(e,t){var n=az(t),i=t[1],r=_n(i),o=[_n(n),-Sn(n),0],s=0,a=0,l=new ts;1===r?i=Vr+xn:-1===r&&(i=-Vr-xn);for(var c=0,u=e.length;c<u;++c)if(f=(d=e[c]).length)for(var d,f,h=d[f-1],y=az(h),b=h[1]/2+WA,C=_n(b),k=Sn(b),O=0;O<f;++O,y=z,C=ne,k=K,h=I){var I=d[O],z=az(I),q=I[1]/2+WA,ne=_n(q),K=Sn(q),le=z-y,me=le>=0?1:-1,ge=me*le,ye=ge>si,Se=C*ne;if(l.add(Vl(Se*me*_n(ge),k*K+Se*Sn(ge))),s+=ye?le+me*Zs:le,ye^y>=n^z>=n){var ve=yv($g(h),$g(I));sO(ve);var Z=yv(o,ve);sO(Z);var ae=(ye^le>=0?-1:1)*Ma(Z[2]);(i>ae||i===ae&&(ve[0]||ve[1]))&&(a+=ye^le>=0?1:-1)}}return(s<-xn||s<xn&&l<-jA)^1&a}(c,i);u.length?(l||(r.polygonStart(),l=!0),qse(u,xWe,z,n,r)):z&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(z,q){e(z,q)&&r.point(z,q)}function y(z,q){o.point(z,q)}function b(){f.point=y,o.lineStart()}function C(){f.point=h,o.lineEnd()}function k(z,q){d.push([z,q]),a.point(z,q)}function O(){a.lineStart(),d=[]}function I(){k(d[0][0],d[0][1]),a.lineEnd();var ne,le,me,ge,z=a.clean(),q=s.result(),K=q.length;if(d.pop(),c.push(d),d=null,K){if(1&z){if((le=(me=q[0]).length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),ne=0;ne<le;++ne)r.point((ge=me[ne])[0],ge[1]);r.lineEnd()}return}K>1&&2&z&&q.push(q.pop().concat(q.shift())),u.push(q.filter(MWe))}}return f}}function MWe(e){return e.length>1}function xWe(e,t){return((e=e.x)[0]<0?e[1]-Vr-xn:Vr-e[1])-((t=t.x)[0]<0?t[1]-Vr-xn:Vr-t[1])}const Zse=Kse(function(){return!0},function EWe(e){var r,t=NaN,n=NaN,i=NaN;return{lineStart:function(){e.lineStart(),r=1},point:function(o,s){var a=o>0?si:-si,l=gi(o-t);gi(l-si)<xn?(e.point(t,n=(n+s)/2>0?Vr:-Vr),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),r=0):i!==a&&l>=si&&(gi(t-i)<xn&&(t-=i*xn),gi(o-a)<xn&&(o-=a*xn),n=function SWe(e,t,n,i){var r,o,s=_n(e-n);return gi(s)>xn?gv((_n(t)*(o=Sn(i))*_n(n)-_n(i)*(r=Sn(t))*_n(e))/(r*o*s)):(t+i)/2}(t,n,o,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=o,n=s),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}},function kWe(e,t,n,i){var r;if(null==e)i.point(-si,r=n*Vr),i.point(0,r),i.point(si,r),i.point(si,0),i.point(si,-r),i.point(0,-r),i.point(-si,-r),i.point(-si,0),i.point(-si,r);else if(gi(e[0]-t[0])>xn){var o=e[0]<t[0]?si:-si;i.point(-o,r=n*o/2),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-si,-Vr]);function Jse(e,t){(t=$g(t))[0]-=e,sO(t);var n=xse(-t[1]);return((-t[2]<0?-n:n)+Zs-xn)%Zs}function AWe(e){var t=Sn(e),n=6*ti,i=t>0,r=gi(t)>xn;function s(u,d){return Sn(u)*Sn(d)>t}function l(u,d,f){var b=[1,0,0],C=yv($g(u),$g(d)),k=rO(C,C),O=C[0],I=k-O*O;if(!I)return!f&&u;var z=t*k/I,q=-t*O/I,ne=yv(b,C),K=oO(b,z);sz(K,oO(C,q));var me=ne,ge=rO(K,me),ye=rO(me,me),Se=ge*ge-ye*(rO(K,K)-1);if(!(Se<0)){var ve=Qs(Se),Z=oO(me,(-ge-ve)/ye);if(sz(Z,K),Z=iO(Z),!f)return Z;var he,ae=u[0],oe=d[0],de=u[1],ce=d[1];oe<ae&&(he=ae,ae=oe,oe=he);var pe=oe-ae,Ee=gi(pe-si)<xn;if(!Ee&&ce<de&&(he=de,de=ce,ce=he),Ee||pe<xn?Ee?de+ce>0^Z[1]<(gi(Z[0]-ae)<xn?de:ce):de<=Z[1]&&Z[1]<=ce:pe>si^(ae<=Z[0]&&Z[0]<=oe)){var Ie=oO(me,(-ge+ve)/ye);return sz(Ie,K),[Z,iO(Ie)]}}}function c(u,d){var f=i?e:si-e,h=0;return u<-f?h|=1:u>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return Kse(s,function a(u){var d,f,h,y,b;return{lineStart:function(){y=h=!1,b=1},point:function(C,k){var I,O=[C,k],z=s(C,k),q=i?z?0:c(C,k):z?c(C+(C<0?si:-si),k):0;if(!d&&(y=h=z)&&u.lineStart(),z!==h&&(!(I=l(d,O))||tO(d,I)||tO(O,I))&&(O[2]=1),z!==h)b=0,z?(u.lineStart(),I=l(O,d),u.point(I[0],I[1])):(I=l(d,O),u.point(I[0],I[1],2),u.lineEnd()),d=I;else if(r&&d&&i^z){var ne;!(q&f)&&(ne=l(O,d,!0))&&(b=0,i?(u.lineStart(),u.point(ne[0][0],ne[0][1]),u.point(ne[1][0],ne[1][1]),u.lineEnd()):(u.point(ne[1][0],ne[1][1]),u.lineEnd(),u.lineStart(),u.point(ne[0][0],ne[0][1],3)))}z&&(!d||!tO(d,O))&&u.point(O[0],O[1]),d=O,h=z,f=q},lineEnd:function(){h&&u.lineEnd(),d=null},clean:function(){return b|(y&&h)<<1}}},function o(u,d,f,h){!function Qse(e,t,n,i,r,o){if(n){var s=Sn(t),a=_n(t),l=i*n;null==r?(r=t+i*Zs,o=t-l/2):(r=Jse(s,r),o=Jse(s,o),(i>0?r<o:r>o)&&(r+=i*Zs));for(var c,u=r;i>0?u>o:u<o;u-=l)c=iO([s,-a*Sn(u),-a*_n(u)]),e.point(c[0],c[1])}}(h,e,n,f,u,d)},i?[0,-e]:[-si,e-si])}var qC=1e9,aO=-qC;function eae(e,t,n,i){function r(c,u){return e<=c&&c<=n&&t<=u&&u<=i}function o(c,u,d,f){var h=0,y=0;if(null==c||(h=s(c,d))!==(y=s(u,d))||l(c,u)<0^d>0)do{f.point(0===h||3===h?e:n,h>1?i:t)}while((h=(h+d+4)%4)!==y);else f.point(u[0],u[1])}function s(c,u){return gi(c[0]-e)<xn?u>0?0:3:gi(c[0]-n)<xn?u>0?2:1:gi(c[1]-t)<xn?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var d=s(c,1),f=s(u,1);return d!==f?d-f:0===d?u[1]-c[1]:1===d?c[0]-u[0]:2===d?c[1]-u[1]:u[0]-c[0]}return function(c){var f,h,y,b,C,k,O,I,z,q,ne,u=c,d=Gse(),K={point:le,lineStart:function Se(){K.point=Z,h&&h.push(y=[]),q=!0,z=!1,O=I=NaN},lineEnd:function ve(){f&&(Z(b,C),k&&z&&d.rejoin(),f.push(d.result())),K.point=le,z&&u.lineEnd()},polygonStart:function ge(){u=d,f=[],h=[],ne=!0},polygonEnd:function ye(){var ae=function me(){for(var ae=0,oe=0,de=h.length;oe<de;++oe)for(var Oe,Ie,ce=h[oe],he=1,pe=ce.length,Ee=ce[0],De=Ee[0],$e=Ee[1];he<pe;++he)Oe=De,Ie=$e,De=(Ee=ce[he])[0],$e=Ee[1],Ie<=i?$e>i&&(De-Oe)*(i-Ie)>($e-Ie)*(e-Oe)&&++ae:$e<=i&&(De-Oe)*(i-Ie)<($e-Ie)*(e-Oe)&&--ae;return ae}(),oe=ne&&ae,de=(f=Xse(f)).length;(oe||de)&&(c.polygonStart(),oe&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),de&&qse(f,a,ae,o,c),c.polygonEnd()),u=c,f=h=y=null}};function le(ae,oe){r(ae,oe)&&u.point(ae,oe)}function Z(ae,oe){var de=r(ae,oe);if(h&&y.push([ae,oe]),q)b=ae,C=oe,k=de,q=!1,de&&(u.lineStart(),u.point(ae,oe));else if(de&&z)u.point(ae,oe);else{var ce=[O=Math.max(aO,Math.min(qC,O)),I=Math.max(aO,Math.min(qC,I))],he=[ae=Math.max(aO,Math.min(qC,ae)),oe=Math.max(aO,Math.min(qC,oe))];!function OWe(e,t,n,i,r,o){var y,s=e[0],a=e[1],u=0,d=1,f=t[0]-s,h=t[1]-a;if(y=n-s,f||!(y>0)){if(y/=f,f<0){if(y<u)return;y<d&&(d=y)}else if(f>0){if(y>d)return;y>u&&(u=y)}if(y=r-s,f||!(y<0)){if(y/=f,f<0){if(y>d)return;y>u&&(u=y)}else if(f>0){if(y<u)return;y<d&&(d=y)}if(y=i-a,h||!(y>0)){if(y/=h,h<0){if(y<u)return;y<d&&(d=y)}else if(h>0){if(y>d)return;y>u&&(u=y)}if(y=o-a,h||!(y<0)){if(y/=h,h<0){if(y>d)return;y>u&&(u=y)}else if(h>0){if(y<u)return;y<d&&(d=y)}return u>0&&(e[0]=s+u*f,e[1]=a+u*h),d<1&&(t[0]=s+d*f,t[1]=a+d*h),!0}}}}}(ce,he,e,t,n,i)?de&&(u.lineStart(),u.point(ae,oe),ne=!1):(z||(u.lineStart(),u.point(ce[0],ce[1])),u.point(he[0],he[1]),de||u.lineEnd(),ne=!1)}O=ae,I=oe,z=de}return K}}function lz(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return(i=t.invert(i,r))&&e.invert(i[0],i[1])}),n}function cz(e,t){return gi(e)>si&&(e-=Math.round(e/Zs)*Zs),[e,t]}function tae(e,t,n){return(e%=Zs)?t||n?lz(iae(e),rae(t,n)):iae(e):t||n?rae(t,n):cz}function nae(e){return function(t,n){return gi(t+=e)>si&&(t-=Math.round(t/Zs)*Zs),[t,n]}}function iae(e){var t=nae(e);return t.invert=nae(-e),t}function rae(e,t){var n=Sn(e),i=_n(e),r=Sn(t),o=_n(t);function s(a,l){var c=Sn(l),u=Sn(a)*c,d=_n(a)*c,f=_n(l),h=f*n+u*i;return[Vl(d*r-h*o,u*n-f*i),Ma(h*r+d*o)]}return s.invert=function(a,l){var c=Sn(l),u=Sn(a)*c,d=_n(a)*c,f=_n(l),h=f*r-d*o;return[Vl(d*r+f*o,u*n+h*i),Ma(h*n-u*i)]},s}function YC(e){return function(t){var n=new uz;for(var i in e)n[i]=e[i];return n.stream=t,n}}function uz(){}function dz(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),rf(n,e.stream(KA)),t(KA.result()),null!=i&&e.clipExtent(i),e}function lO(e,t,n){return dz(e,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(o-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function fz(e,t,n){return lO(e,[[0,0],t],n)}function hz(e,t,n){return dz(e,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),s=(r-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];e.scale(150*o).translate([s,a])},n)}function pz(e,t,n){return dz(e,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),s=-o*i[0][0],a=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,a])},n)}cz.invert=cz,uz.prototype={constructor:uz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var TWe=Sn(30*ti);function sae(e,t){return+t?function RWe(e,t){function n(i,r,o,s,a,l,c,u,d,f,h,y,b,C){var k=c-i,O=u-r,I=k*k+O*O;if(I>4*t&&b--){var z=s+f,q=a+h,ne=l+y,K=Qs(z*z+q*q+ne*ne),le=Ma(ne/=K),me=gi(gi(ne)-1)<xn||gi(o-d)<xn?(o+d)/2:Vl(q,z),ge=e(me,le),ye=ge[0],Se=ge[1],ve=ye-i,Z=Se-r,ae=O*ve-k*Z;(ae*ae/I>t||gi((k*ve+O*Z)/I-.5)>.3||s*f+a*h+l*y<TWe)&&(n(i,r,o,s,a,l,ye,Se,me,z/=K,q/=K,ne,b,C),C.point(ye,Se),n(ye,Se,me,z,q,ne,c,u,d,f,h,y,b,C))}}return function(i){var r,o,s,a,l,c,u,d,f,h,y,b,C={point:k,lineStart:O,lineEnd:z,polygonStart:function(){i.polygonStart(),C.lineStart=q},polygonEnd:function(){i.polygonEnd(),C.lineStart=O}};function k(le,me){le=e(le,me),i.point(le[0],le[1])}function O(){d=NaN,C.point=I,i.lineStart()}function I(le,me){var ge=$g([le,me]),ye=e(le,me);n(d,f,u,h,y,b,d=ye[0],f=ye[1],u=le,h=ge[0],y=ge[1],b=ge[2],16,i),i.point(d,f)}function z(){C.point=k,i.lineEnd()}function q(){O(),C.point=ne,C.lineEnd=K}function ne(le,me){I(r=le,me),o=d,s=f,a=h,l=y,c=b,C.point=I}function K(){n(d,f,u,h,y,b,o,s,r,a,l,c,16,i),C.lineEnd=z,z()}return C}}(e,t):function PWe(e){return YC({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var IWe=YC({point:function(e,t){this.stream.point(e*ti,t*ti)}});function aae(e,t,n,i,r,o){if(!o)return function LWe(e,t,n,i,r){function o(s,a){return[t+e*(s*=i),n-e*(a*=r)]}return o.invert=function(s,a){return[(s-t)/e*i,(n-a)/e*r]},o}(e,t,n,i,r);var s=Sn(o),a=_n(o),l=s*e,c=a*e,u=s/e,d=a/e,f=(a*n-s*t)/e,h=(a*t+s*n)/e;function y(b,C){return[l*(b*=i)-c*(C*=r)+t,n-c*b-l*C]}return y.invert=function(b,C){return[i*(u*b-d*C+f),r*(h-d*b-u*C)]},y}function Bu(e){return lae(function(){return e})()}function lae(e){var t,u,k,O,I,ne,K,le,me,ge,n=150,i=480,r=250,o=0,s=0,a=0,l=0,c=0,d=0,f=1,h=1,y=null,b=Zse,C=null,z=HC,q=.5;function ye(ae){return le(ae[0]*ti,ae[1]*ti)}function Se(ae){return(ae=le.invert(ae[0],ae[1]))&&[ae[0]*Xr,ae[1]*Xr]}function ve(){var ae=aae(n,0,0,f,h,d).apply(null,t(o,s)),oe=aae(n,i-ae[0],r-ae[1],f,h,d);return u=tae(a,l,c),K=lz(t,oe),le=lz(u,K),ne=sae(K,q),Z()}function Z(){return me=ge=null,ye}return ye.stream=function(ae){return me&&ge===ae?me:me=IWe(function FWe(e){return YC({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}(u)(b(ne(z(ge=ae)))))},ye.preclip=function(ae){return arguments.length?(b=ae,y=void 0,Z()):b},ye.postclip=function(ae){return arguments.length?(z=ae,C=k=O=I=null,Z()):z},ye.clipAngle=function(ae){return arguments.length?(b=+ae?AWe(y=ae*ti):(y=null,Zse),Z()):y*Xr},ye.clipExtent=function(ae){return arguments.length?(z=null==ae?(C=k=O=I=null,HC):eae(C=+ae[0][0],k=+ae[0][1],O=+ae[1][0],I=+ae[1][1]),Z()):null==C?null:[[C,k],[O,I]]},ye.scale=function(ae){return arguments.length?(n=+ae,ve()):n},ye.translate=function(ae){return arguments.length?(i=+ae[0],r=+ae[1],ve()):[i,r]},ye.center=function(ae){return arguments.length?(o=ae[0]%360*ti,s=ae[1]%360*ti,ve()):[o*Xr,s*Xr]},ye.rotate=function(ae){return arguments.length?(a=ae[0]%360*ti,l=ae[1]%360*ti,c=ae.length>2?ae[2]%360*ti:0,ve()):[a*Xr,l*Xr,c*Xr]},ye.angle=function(ae){return arguments.length?(d=ae%360*ti,ve()):d*Xr},ye.reflectX=function(ae){return arguments.length?(f=ae?-1:1,ve()):f<0},ye.reflectY=function(ae){return arguments.length?(h=ae?-1:1,ve()):h<0},ye.precision=function(ae){return arguments.length?(ne=sae(K,q=ae*ae),Z()):Qs(q)},ye.fitExtent=function(ae,oe){return lO(ye,ae,oe)},ye.fitSize=function(ae,oe){return fz(ye,ae,oe)},ye.fitWidth=function(ae,oe){return hz(ye,ae,oe)},ye.fitHeight=function(ae,oe){return pz(ye,ae,oe)},function(){return t=e.apply(this,arguments),ye.invert=t.invert&&Se,ve()}}function gz(e){var t=0,n=si/3,i=lae(e),r=i(t,n);return r.parallels=function(o){return arguments.length?i(t=o[0]*ti,n=o[1]*ti):[t*Xr,n*Xr]},r}function $We(e,t){var n=_n(e),i=(n+_n(t))/2;if(gi(i)<xn)return function NWe(e){var t=Sn(e);function n(i,r){return[i*t,_n(r)/t]}return n.invert=function(i,r){return[i/t,Ma(r*t)]},n}(e);var r=1+n*(2*i-n),o=Qs(r)/i;function s(a,l){var c=Qs(r-2*i*_n(l))/i;return[c*_n(a*=i),o-c*Sn(a)]}return s.invert=function(a,l){var c=o-l,u=Vl(a,gi(c))*Ul(c);return c*i<0&&(u-=si*Ul(a)*Ul(c)),[u/i,Ma((r-(a*a+c*c)*i*i)/(2*i))]},s}function cO(){return gz($We).scale(155.424).center([0,33.6442])}function cae(){return cO().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function uae(e){return function(t,n){var i=Sn(t),r=Sn(n),o=e(i*r);return o===1/0?[2,0]:[o*r*_n(t),o*_n(n)]}}function XC(e){return function(t,n){var i=Qs(t*t+n*n),r=e(i),o=_n(r),s=Sn(r);return[Vl(t*o,i*s),Ma(i&&n*o/i)]}}var dae=uae(function(e){return Qs(2/(1+e))});dae.invert=XC(function(e){return 2*Ma(e/2)});var fae=uae(function(e){return(e=xse(e))&&e/_n(e)});function uO(e,t){return[e,qA(XB((Vr+t)/2))]}function hae(e){var a,l,c,t=Bu(e),n=t.center,i=t.scale,r=t.translate,o=t.clipExtent,s=null;function u(){var d=si*i(),f=t(function DWe(e){function t(n){return(n=e(n[0]*ti,n[1]*ti))[0]*=Xr,n[1]*=Xr,n}return e=tae(e[0]*ti,e[1]*ti,e.length>2?e[2]*ti:0),t.invert=function(n){return(n=e.invert(n[0]*ti,n[1]*ti))[0]*=Xr,n[1]*=Xr,n},t}(t.rotate()).invert([0,0]));return o(null==s?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===uO?[[Math.max(f[0]-d,s),a],[Math.min(f[0]+d,l),c]]:[[s,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,c)]])}return t.scale=function(d){return arguments.length?(i(d),u()):i()},t.translate=function(d){return arguments.length?(r(d),u()):r()},t.center=function(d){return arguments.length?(n(d),u()):n()},t.clipExtent=function(d){return arguments.length?(null==d?s=a=l=c=null:(s=+d[0][0],a=+d[0][1],l=+d[1][0],c=+d[1][1]),u()):null==s?null:[[s,a],[l,c]]},u()}function dO(e){return XB((Vr+e)/2)}function jWe(e,t){var n=Sn(e),i=e===t?_n(e):qA(n/Sn(t))/qA(dO(t)/dO(e)),r=n*YB(dO(e),i)/i;if(!i)return uO;function o(s,a){r>0?a<-Vr+xn&&(a=-Vr+xn):a>Vr-xn&&(a=Vr-xn);var l=r/YB(dO(a),i);return[l*_n(i*s),r-l*Sn(i*s)]}return o.invert=function(s,a){var l=r-a,c=Ul(i)*Qs(s*s+l*l),u=Vl(s,gi(l))*Ul(l);return l*i<0&&(u-=si*Ul(s)*Ul(l)),[u/i,2*gv(YB(r/c,1/i))-Vr]},o}function fO(e,t){return[e,t]}function qWe(e,t){var n=Sn(e),i=e===t?_n(e):(n-Sn(t))/(t-e),r=n/i+e;if(gi(i)<xn)return fO;function o(s,a){var l=r-a,c=i*s;return[l*_n(c),r-l*Sn(c)]}return o.invert=function(s,a){var l=r-a,c=Vl(s,gi(l))*Ul(l);return l*i<0&&(c-=si*Ul(s)*Ul(l)),[c/i,r-Ul(i)*Qs(s*s+l*l)]},o}fae.invert=XC(function(e){return e}),uO.invert=function(e,t){return[e,2*gv(Mse(t))-Vr]},fO.invert=fO;var KC=1.340264,ZC=-.081106,QC=893e-6,JC=.003796,hO=Qs(3)/2;function pae(e,t){var n=Ma(hO*_n(t)),i=n*n,r=i*i*i;return[e*Sn(n)/(hO*(KC+3*ZC*i+r*(7*QC+9*JC*i))),n*(KC+ZC*i+r*(QC+JC*i))]}function gae(e,t){var n=Sn(t),i=Sn(e)*n;return[n*_n(e)/i,_n(t)/i]}function mae(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function _ae(e,t){return[Sn(t)*_n(e),_n(t)]}function yae(e,t){var n=Sn(t),i=1+Sn(e)*n;return[n*_n(e)/i,_n(t)/i]}function vae(e,t){return[qA(XB((Vr+t)/2)),-e]}pae.invert=function(e,t){for(var s,n=t,i=n*n,r=i*i*i,o=0;o<12&&(r=(i=(n-=s=(n*(KC+ZC*i+r*(QC+JC*i))-t)/(KC+3*ZC*i+r*(7*QC+9*JC*i)))*n)*i*i,!(gi(s)<jA));++o);return[hO*e*(KC+3*ZC*i+r*(7*QC+9*JC*i))/Sn(n),Ma(_n(n)/hO)]},gae.invert=XC(gv),mae.invert=function(e,t){var r,n=t,i=25;do{var o=n*n,s=o*o;n-=r=(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-t)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(gi(r)>xn&&--i>0);return[e/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},_ae.invert=XC(Ma),yae.invert=XC(function(e){return 2*gv(e)}),vae.invert=function(e,t){return[-t,2*gv(Mse(e))-Vr]};var i7e=Math.abs,mz=(Math,Math,Math,Math.cos),pO=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),Vh=(Math,Math.PI),_z=Vh/2,wae=(Math,gO(2));function Cae(e){return e>1?_z:e<-1?-_z:Math.asin(e)}function gO(e){return e>0?Math.sqrt(e):0}function o7e(e,t){var r,n=e*pO(t),i=30;do{t-=r=(t+pO(t)-n)/(1+mz(t))}while(i7e(r)>1e-6&&--i>0);return t/2}gO(Vh);var a7e=function s7e(e,t,n){function i(r,o){return[e*r*mz(o=o7e(n,o)),t*pO(o)]}return i.invert=function(r,o){return o=Cae(o/t),[r/(e*mz(o)),Cae((2*o+pO(2*o))/n)]},i}(wae/_z,wae,Vh);const c7e=Wse(),yz=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function u7e(e,t){return function n(){const i=t();return i.type=e,i.path=Wse().projection(i),i.copy=i.copy||function(){const r=n();return yz.forEach(o=>{i[o]&&r[o](i[o]())}),r.path.pointRadius(i.path.pointRadius()),r},jie(i)}}function vz(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(mO[e]=u7e(e,t),this):mO[e]||null}function Mae(e){return e&&e.path||c7e}const mO={albers:cae,albersusa:function zWe(){var e,t,i,o,a,l,n=cae(),r=cO().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=cO().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(f,h){l=[f,h]}};function u(f){var h=f[0],y=f[1];return l=null,i.point(h,y),l||(o.point(h,y),l)||(a.point(h,y),l)}function d(){return e=t=null,u}return u.invert=function(f){var h=n.scale(),y=n.translate(),b=(f[0]-y[0])/h,C=(f[1]-y[1])/h;return(C>=.12&&C<.234&&b>=-.425&&b<-.214?r:C>=.166&&C<.234&&b>=-.214&&b<-.115?s:n).invert(f)},u.stream=function(f){return e&&t===f?e:e=function BWe(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([n.stream(t=f),r.stream(f),s.stream(f)])},u.precision=function(f){return arguments.length?(n.precision(f),r.precision(f),s.precision(f),d()):n.precision()},u.scale=function(f){return arguments.length?(n.scale(f),r.scale(.35*f),s.scale(f),u.translate(n.translate())):n.scale()},u.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),y=+f[0],b=+f[1];return i=n.translate(f).clipExtent([[y-.455*h,b-.238*h],[y+.455*h,b+.238*h]]).stream(c),o=r.translate([y-.307*h,b+.201*h]).clipExtent([[y-.425*h+xn,b+.12*h+xn],[y-.214*h-xn,b+.234*h-xn]]).stream(c),a=s.translate([y-.205*h,b+.212*h]).clipExtent([[y-.214*h+xn,b+.166*h+xn],[y-.115*h-xn,b+.234*h-xn]]).stream(c),d()},u.fitExtent=function(f,h){return lO(u,f,h)},u.fitSize=function(f,h){return fz(u,f,h)},u.fitWidth=function(f,h){return hz(u,f,h)},u.fitHeight=function(f,h){return pz(u,f,h)},u.scale(1070)},azimuthalequalarea:function HWe(){return Bu(dae).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function VWe(){return Bu(fae).scale(79.4188).clipAngle(179.999)},conicconformal:function WWe(){return gz(jWe).scale(109.5).parallels([30,30])},conicequalarea:cO,conicequidistant:function YWe(){return gz(qWe).scale(131.154).center([0,13.9389])},equalEarth:function KWe(){return Bu(pae).scale(177.158)},equirectangular:function GWe(){return Bu(fO).scale(152.63)},gnomonic:function ZWe(){return Bu(gae).scale(144.049).clipAngle(60)},identity:function QWe(){var s,a,c,u,d,C,k,e=1,t=0,n=0,i=1,r=1,o=0,l=null,f=1,h=1,y=YC({point:function(z,q){var ne=I([z,q]);this.stream.point(ne[0],ne[1])}}),b=HC;function O(){return f=e*i,h=e*r,C=k=null,I}function I(z){var q=z[0]*f,ne=z[1]*h;if(o){var K=ne*s-q*a;q=q*s+ne*a,ne=K}return[q+t,ne+n]}return I.invert=function(z){var q=z[0]-t,ne=z[1]-n;if(o){var K=ne*s+q*a;q=q*s-ne*a,ne=K}return[q/f,ne/h]},I.stream=function(z){return C&&k===z?C:C=y(b(k=z))},I.postclip=function(z){return arguments.length?(b=z,l=c=u=d=null,O()):b},I.clipExtent=function(z){return arguments.length?(b=null==z?(l=c=u=d=null,HC):eae(l=+z[0][0],c=+z[0][1],u=+z[1][0],d=+z[1][1]),O()):null==l?null:[[l,c],[u,d]]},I.scale=function(z){return arguments.length?(e=+z,O()):e},I.translate=function(z){return arguments.length?(t=+z[0],n=+z[1],O()):[t,n]},I.angle=function(z){return arguments.length?(a=_n(o=z%360*ti),s=Sn(o),O()):o*Xr},I.reflectX=function(z){return arguments.length?(i=z?-1:1,O()):i<0},I.reflectY=function(z){return arguments.length?(r=z?-1:1,O()):r<0},I.fitExtent=function(z,q){return lO(I,z,q)},I.fitSize=function(z,q){return fz(I,z,q)},I.fitWidth=function(z,q){return hz(I,z,q)},I.fitHeight=function(z,q){return pz(I,z,q)},I},mercator:function UWe(){return hae(uO).scale(961/Zs)},mollweide:function l7e(){return Bu(a7e).scale(169.529)},naturalEarth1:function JWe(){return Bu(mae).scale(175.295)},orthographic:function e7e(){return Bu(_ae).scale(249.5).clipAngle(90+xn)},stereographic:function t7e(){return Bu(yae).scale(250).clipAngle(142)},transversemercator:function n7e(){var e=hae(vae),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):[(i=t())[1],-i[0]]},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):[(i=n())[0],i[1],i[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in mO)vz(e,mO[e]);function xae(e,t,n){var i=nl(e,t-xn,n).concat(t);return function(r){return i.map(function(o){return[r,o]})}}function Eae(e,t,n){var i=nl(e,t-xn,n).concat(t);return function(r){return i.map(function(o){return[o,r]})}}function d7e(){}const sf=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function kae(){var e=1,t=1,n=a;function i(l,c){return c.map(u=>r(l,u))}function r(l,c){var u=[],d=[];return function o(l,c,u){var h,y,C,k,O,d=new Array,f=new Array;for(h=y=-1,sf[(C=l[0]>=c)<<1].forEach(I);++h<e-1;)sf[C|(C=l[h+1]>=c)<<1].forEach(I);for(sf[C<<0].forEach(I);++y<t-1;){for(h=-1,sf[(C=l[y*e+e]>=c)<<1|(k=l[y*e]>=c)<<2].forEach(I);++h<e-1;)O=k,sf[C|(C=l[y*e+e+h+1]>=c)<<1|(k=l[y*e+h+1]>=c)<<2|O<<3].forEach(I);sf[C|k<<3].forEach(I)}for(h=-1,sf[(k=l[y*e]>=c)<<2].forEach(I);++h<e-1;)O=k,sf[(k=l[y*e+h+1]>=c)<<2|O<<3].forEach(I);function I(z){var me,ge,q=[z[0][0]+h,z[0][1]+y],ne=[z[1][0]+h,z[1][1]+y],K=s(q),le=s(ne);(me=f[K])?(ge=d[le])?(delete f[me.end],delete d[ge.start],me===ge?(me.ring.push(ne),u(me.ring)):d[me.start]=f[ge.end]={start:me.start,end:ge.end,ring:me.ring.concat(ge.ring)}):(delete f[me.end],me.ring.push(ne),f[me.end=le]=me):(me=d[le])?(ge=f[K])?(delete d[me.start],delete f[ge.end],me===ge?(me.ring.push(ne),u(me.ring)):d[ge.start]=f[me.end]={start:ge.start,end:me.end,ring:ge.ring.concat(me.ring)}):(delete d[me.start],me.ring.unshift(q),d[me.start=K]=me):d[K]=f[le]={start:K,end:le,ring:[q,ne]}}sf[k<<3].forEach(I)}(l,c,f=>{n(f,l,c),function f7e(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(f)>0?u.push([f]):d.push(f)}),d.forEach(f=>{for(var b,h=0,y=u.length;h<y;++h)if(-1!==h7e((b=u[h])[0],f))return void b.push(f)}),{type:"MultiPolygon",value:c,coordinates:u}}function s(l){return 2*l[0]+l[1]*(e+1)*4}function a(l,c,u){l.forEach(d=>{var C,f=d[0],h=d[1],y=0|f,b=0|h,k=c[b*e+y];f>0&&f<e&&y===f&&(d[0]=f+(u-(C=c[b*e+y-1]))/(k-C)-.5),h>0&&h<t&&b===h&&(d[1]=h+(u-(C=c[(b-1)*e+y]))/(k-C)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var c=Math.floor(l[0]),u=Math.floor(l[1]);return c>=0&&u>=0||nt("invalid size"),e=c,t=u,i},i.smooth=function(l){return arguments.length?(n=l?a:d7e,i):n===a},i}function h7e(e,t){for(var r,n=-1,i=t.length;++n<i;)if(r=p7e(e,t[n]))return r;return 0}function p7e(e,t){for(var n=t[0],i=t[1],r=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],c=l[0],u=l[1],d=e[a],f=d[0],h=d[1];if(g7e(l,d,t))return 0;u>i!=h>i&&n<(f-c)*(i-u)/(h-u)+c&&(r=-r)}return r}function g7e(e,t,n){var i;return function m7e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function _7e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[i=+(e[0]===t[0])],n[i],t[i])}function Aae(e,t,n){return function(i){var r=Eu(i),o=n?Math.min(r[0],0):r[0],s=r[1],a=s-o,l=t?_h(o,s,e):a/(e+1);return nl(o+l,s,l)}}function bz(e){Qe.call(this,null,e)}function Oae(e,t,n,i,r){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(d){d.forEach(c)}function c(d){a&&d.reverse(),d.forEach(u)}function u(d){d[0]=(d[0]-o)*t+i,d[1]=(d[1]-s)*n+r}return function(d){return d.coordinates.forEach(l),d}}function Dae(e,t,n){const i=e>=0?e:l$(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function wz(e){return Yn(e)?e:ws(+e)}function Tae(){var e=l=>l[0],t=l=>l[1],n=Fy,i=[-1,-1],r=960,o=500,s=2;function a(l,c){const u=Dae(i[0],l,e)>>s,d=Dae(i[1],l,t)>>s,f=u?u+2:0,h=d?d+2:0,y=2*f+(r>>s),b=2*h+(o>>s),C=new Float32Array(y*b),k=new Float32Array(y*b);let O=C;l.forEach(z=>{const q=f+(+e(z)>>s),ne=h+(+t(z)>>s);q>=0&&q<y&&ne>=0&&ne<b&&(C[q+ne*y]+=+n(z))}),u>0&&d>0?(vv(y,b,C,k,u),bv(y,b,k,C,d),vv(y,b,C,k,u),bv(y,b,k,C,d),vv(y,b,C,k,u),bv(y,b,k,C,d)):u>0?(vv(y,b,C,k,u),vv(y,b,k,C,u),vv(y,b,C,k,u),O=k):d>0&&(bv(y,b,C,k,d),bv(y,b,k,C,d),bv(y,b,C,k,d),O=k);const I=c?Math.pow(2,-2*s):1/GI(O);for(let z=0,q=y*b;z<q;++z)O[z]*=I;return{values:O,scale:1<<s,width:y,height:b,x1:f,y1:h,x2:f+(r>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=wz(l),a):e},a.y=function(l){return arguments.length?(t=wz(l),a):t},a.weight=function(l){return arguments.length?(n=wz(l),a):n},a.size=function(l){if(!arguments.length)return[r,o];var c=+l[0],u=+l[1];return c>=0&&u>=0||nt("invalid size"),r=c,o=u,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||nt("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(1===(l=Ht(l)).length&&(l=[+l[0],+l[0]]),2!==l.length&&nt("invalid bandwidth"),i=l,a):i},a}function vv(e,t,n,i,r){const o=1+(r<<1);for(let s=0;s<t;++s)for(let a=0,l=0;a<e+r;++a)a<e&&(l+=n[a+s*e]),a>=r&&(a>=o&&(l-=n[a-o+s*e]),i[a-r+s*e]=l/Math.min(a+1,e-1+o-a,o))}function bv(e,t,n,i,r){const o=1+(r<<1);for(let s=0;s<e;++s)for(let a=0,l=0;a<t+r;++a)a<t&&(l+=n[s+a*e]),a>=r&&(a>=o&&(l-=n[s+(a-o)*e]),i[s+(a-r)*e]=l/Math.min(a+1,t-1+o-a,o))}function Cz(e){Qe.call(this,null,e)}bz.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},St(bz,Qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||vs,o=kae().smooth(!1!==e.smooth),s=e.thresholds||function y7e(e,t,n){const i=Aae(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?i:i(e.map(r=>kg(t(r).values)))}(i,r,e),a=null===e.as?null:e.as||"contour",l=[];return i.forEach(c=>{const u=r(c),d=o.size([u.width,u.height])(u.values,ot(s)?s:s(u.values));(function v7e(e,t,n,i){let r=i.scale||t.scale,o=i.translate||t.translate;if(Yn(r)&&(r=r(n,i)),Yn(o)&&(o=o(n,i)),(1===r||null==r)&&!o)return;const s=(Xi(r)?r:r[0])||1,a=(Xi(r)?r:r[1])||1;e.forEach(Oae(t,s,a,o&&o[0]||0,o&&o[1]||0))})(d,u,c,e),d.forEach(f=>{l.push(Ok(c,Li(null!=a?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),Cz.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const b7e=["x","y","weight","size","cellSize","bandwidth"];function Pae(e,t){return b7e.forEach(n=>null!=t[n]?e[n](t[n]):0),e}function Mz(e){Qe.call(this,null,e)}St(Cz,Qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var l,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=function w7e(e,t){var r,o,s,a,l,c,n=[],i=u=>u(a);if(null==t)n.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(c=r[l=t.map(i)])||(r[l]=c=[],c.dims=l,n.push(c)),c.push(a);return n}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(Hr),s=Pae(Tae(),e),a=e.as||"grid";return l=r.map(u=>Li(function c(u,d){for(let f=0;f<o.length;++f)u[o[f]]=d[f];return u}({[a]:s(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),Mz.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},St(Mz,Qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var a,l,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=kae().smooth(!1!==e.smooth),r=e.values,o=e.thresholds||Aae(e.count||10,e.nice,!!r),s=e.size;return r||(r=t.materialize(t.SOURCE).source,l=Oae(a=Pae(Tae(),e)(r,!0),a.scale||1,a.scale||1,0,0),s=[a.width,a.height],r=a.values),o=ot(o)?o:o(r),r=i.size(s)(r,o),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(Li),n}});const xz="Feature",Ez="FeatureCollection";function Sz(e){Qe.call(this,null,e)}function kz(e){Qe.call(this,null,e)}function Az(e){Qe.call(this,null,e)}function Oz(e){Qe.call(this,null,e)}function Dz(e){Qe.call(this,[],e),this.generator=function Sae(){var e,t,n,i,r,o,s,a,f,h,y,b,l=10,c=l,u=90,d=360,C=2.5;function k(){return{type:"MultiLineString",coordinates:O()}}function O(){return nl(GA(i/u)*u,n,u).map(y).concat(nl(GA(a/d)*d,s,d).map(b)).concat(nl(GA(t/l)*l,e,l).filter(function(I){return gi(I%u)>xn}).map(f)).concat(nl(GA(o/c)*c,r,c).filter(function(I){return gi(I%d)>xn}).map(h))}return k.lines=function(){return O().map(function(I){return{type:"LineString",coordinates:I}})},k.outline=function(){return{type:"Polygon",coordinates:[y(i).concat(b(s).slice(1),y(n).reverse().slice(1),b(a).reverse().slice(1))]}},k.extent=function(I){return arguments.length?k.extentMajor(I).extentMinor(I):k.extentMinor()},k.extentMajor=function(I){return arguments.length?(a=+I[0][1],s=+I[1][1],(i=+I[0][0])>(n=+I[1][0])&&(I=i,i=n,n=I),a>s&&(I=a,a=s,s=I),k.precision(C)):[[i,a],[n,s]]},k.extentMinor=function(I){return arguments.length?(o=+I[0][1],r=+I[1][1],(t=+I[0][0])>(e=+I[1][0])&&(I=t,t=e,e=I),o>r&&(I=o,o=r,r=I),k.precision(C)):[[t,o],[e,r]]},k.step=function(I){return arguments.length?k.stepMajor(I).stepMinor(I):k.stepMinor()},k.stepMajor=function(I){return arguments.length?(u=+I[0],d=+I[1],k):[u,d]},k.stepMinor=function(I){return arguments.length?(l=+I[0],c=+I[1],k):[l,c]},k.precision=function(I){return arguments.length?(C=+I,f=xae(o,r,90),h=Eae(t,e,C),y=xae(a,s,90),b=Eae(i,n,C),k):C},k.extentMajor([[-180,-90+xn],[180,90-xn]]).extentMinor([[-180,-80-xn],[180,80+xn]])}()}function Tz(e){Qe.call(this,null,e)}function Rae(e){if(!Yn(e))return!1;const t=bc(ys(e));return t.$x||t.$y||t.$value||t.$max}function Iae(e){Qe.call(this,null,e),this.modified(!0)}function Fae(e,t,n){Yn(e[t])&&e[t](n)}Sz.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},St(Sz,Qe,{transform(e,t){var c,n=this._features,i=this._points,r=e.fields,o=r&&r[0],s=r&&r[1],a=e.geojson||!r&&vs,l=t.ADD;c=e.modified()||t.changed(t.REM)||t.modified(ys(a))||o&&t.modified(ys(o))||s&&t.modified(ys(s)),(!this.value||c)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),a&&t.visit(l,u=>n.push(a(u))),o&&s&&(t.visit(l,u=>{var d=o(u),f=s(u);null!=d&&null!=f&&(d=+d)===d&&(f=+f)===f&&i.push([d,f])}),n=n.concat({type:xz,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:Ez,features:n}}}),kz.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},St(kz,Qe,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||vs,o=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=Mae(e.projection),n.materialize().reflow()):s=r===vs||t.modified(r.fields)?n.ADD_MOD:n.ADD;const a=function M7e(e,t){const n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(i,e.pointRadius);return n.visit(s,l=>l[o]=i(r(l))),i.pointRadius(a),n.modifies(o)}}),Az.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},St(Az,Qe,{transform(e,t){var l,n=e.projection,i=e.fields[0],r=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1];function c(u){const d=n([i(u),r(u)]);d?(u[s]=d[0],u[a]=d[1]):(u[s]=void 0,u[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,c)),t.modifies(o)}}),Oz.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},St(Oz,Qe,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",o=n.ADD;return(!i||e.modified())&&(this.value=i=function x7e(e,t,n){const i=null==n?r=>e(t(r)):r=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(o),s};return i.context=r=>(e.context(r),i),i}(Mae(e.projection),e.field||_a("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[r]=i),n.modifies(r)}}),Dz.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},St(Dz,Qe,{transform(e,t){var r,n=this.value,i=this.generator;if(!n.length||e.modified())for(const o in e)Yn(i[o])&&i[o](e[o]);return r=i(),n.length?t.mod.push(Mte(n[0],r)):t.add.push(Li(r)),n[0]=r,t}}),Tz.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},St(Tz,Qe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i="shared"===e.resolve,r=e.field||vs,o=function S7e(e,t){let n;return Yn(e)?(n=i=>e(i,t),n.dep=Rae(e)):e?n=ws(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}(e.opacity,e),s=function E7e(e,t){let n;return Yn(e)?(n=i=>Jf(e(i,t)),n.dep=Rae(e)):n=ws(Jf(e||"#888")),n}(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?kg(n.map(c=>kg(r(c).values))):0};return n.forEach(c=>{const u=r(c),d=Xn({},c,l);i||(d.$max=kg(u.values||[])),c[a]=function k7e(e,t,n,i){const r=e.width,s=e.x1||0,a=e.y1||0,l=e.x2||r,c=e.y2||e.height,u=e.values,d=u?C=>u[C]:fh,f=xh(l-s,c-a),h=f.getContext("2d"),y=h.getImageData(0,0,l-s,c-a),b=y.data;for(let C=a,k=0;C<c;++C){t.$y=C-a;for(let O=s,I=C*r;O<l;++O,k+=4){t.$x=O-s,t.$value=d(O+I);const z=n(t);b[k+0]=z.r,b[k+1]=z.g,b[k+2]=z.b,b[k+3]=~~(255*i(t))}}return h.putImageData(y,0,0),f}(u,d,s.dep?s:ws(s(d)),o.dep?o:ws(o(d)))}),t.reflow(!0).modifies(a)}}),St(Iae,Qe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function O7e(e){const t=vz((e||"mercator").toLowerCase());return t||nt("Unrecognized projection type: "+e),t()}(e.type),yz.forEach(i=>{null!=e[i]&&Fae(n,i,e[i])})):yz.forEach(i=>{e.modified(i)&&Fae(n,i,e[i])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function A7e(e,t){const n=function D7e(e){return 1===(e=Ht(e)).length?e[0]:{type:Ez,features:e.reduce((t,n)=>t.concat(function T7e(e){return e.type===Ez?e.features:Ht(e).filter(t=>null!=t).map(t=>t.type===xz?t:{type:xz,geometry:t})}(n)),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});const Lae={center:gF,collide:yF,nbody:bF,link:iw,x:function P7e(e){var n,i,r,t=qs(.1);function o(a){for(var u,l=0,c=n.length;l<c;++l)(u=n[l]).vx+=(r[l]-u.x)*i[l]*a}function s(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return"function"!=typeof e&&(e=qs(null==e?0:+e)),o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t="function"==typeof a?a:qs(+a),s(),o):t},o.x=function(a){return arguments.length?(e="function"==typeof a?a:qs(+a),s(),o):e},o},y:function R7e(e){var n,i,r,t=qs(.1);function o(a){for(var u,l=0,c=n.length;l<c;++l)(u=n[l]).vy+=(r[l]-u.y)*i[l]*a}function s(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return"function"!=typeof e&&(e=qs(null==e?0:+e)),o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t="function"==typeof a?a:qs(+a),s(),o):t},o.y=function(a){return arguments.length?(e="function"==typeof a?a:qs(+a),s(),o):e},o}},t1="forces",Pz=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],I7e=["static","iterations"],Nae=["x","y","vx","vy"];function Rz(e){Qe.call(this,null,e)}function $ae(e,t,n,i){var o,s,a,l,r=Ht(t.forces);for(o=0,s=Pz.length;o<s;++o)(a=Pz[o])!==t1&&t.modified(a)&&e[a](t[a]);for(o=0,s=r.length;o<s;++o)l=t1+o,(a=n||t.modified(t1,o)?$7e(r[o]):i&&N7e(r[o],i)?e.force(l):null)&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(t1+o,null);return e.numForces=r.length,e}function N7e(e,t){var n,i;for(n in e)if(Yn(i=e[n])&&t.modified(ys(i)))return 1;return 0}function $7e(e){var t,n;for(n in bn(Lae,e.force)||nt("Unrecognized force: "+e.force),t=Lae[e.force](),e)Yn(t[n])&&B7e(t[n],e[n],e);return t}function B7e(e,t,n){e(Yn(t)?i=>t(i,n):t)}function z7e(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function Iz(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=iGe)):void 0===t&&(t=nGe);for(var i,o,s,a,l,n=new wv(e),r=[n];i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,a=l-1;a>=0;--a)r.push(o=s[a]=new wv(s[a])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(Bae)}function nGe(e){return e.children}function iGe(e){return Array.isArray(e)?e[1]:null}function rGe(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function Bae(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function wv(e){this.data=e,this.depth=this.height=0,this.parent=null}function _O(e){return null==e?null:zae(e)}function zae(e){if("function"!=typeof e)throw new Error;return e}function Bg(){return 0}function Cv(e){return function(){return e}}function uGe(e,t){var n,i;if(Fz(t,e))return[t];for(n=0;n<e.length;++n)if(yO(t,e[n])&&Fz(n1(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(yO(n1(e[n],e[i]),t)&&yO(n1(e[n],t),e[i])&&yO(n1(e[i],t),e[n])&&Fz(jae(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function yO(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function Uae(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function Fz(e,t){for(var n=0;n<t.length;++n)if(!Uae(e,t[n]))return!1;return!0}function dGe(e){switch(e.length){case 1:return function fGe(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return n1(e[0],e[1]);case 3:return jae(e[0],e[1],e[2])}}function n1(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,s=t.y,a=t.r,l=o-n,c=s-i,u=a-r,d=Math.sqrt(l*l+c*c);return{x:(n+o+l/d*u)/2,y:(i+s+c/d*u)/2,r:(d+r+a)/2}}function jae(e,t,n){var i=e.x,r=e.y,o=e.r,s=t.x,a=t.y,l=t.r,c=n.x,u=n.y,d=n.r,f=i-s,h=i-c,y=r-a,b=r-u,C=l-o,k=d-o,O=i*i+r*r-o*o,I=O-s*s-a*a+l*l,z=O-c*c-u*u+d*d,q=h*y-f*b,ne=(y*z-b*I)/(2*q)-i,K=(b*C-y*k)/q,le=(h*I-f*z)/(2*q)-r,me=(f*k-h*C)/q,ge=K*K+me*me-1,ye=2*(o+ne*K+le*me),Se=ne*ne+le*le-o*o,ve=-(Math.abs(ge)>1e-6?(ye+Math.sqrt(ye*ye-4*ge*Se))/(2*ge):Se/ye);return{x:i+ne+K*ve,y:r+le+me*ve,r:ve}}function Wae(e,t,n){var r,o,a,l,i=e.x-t.x,s=e.y-t.y,c=i*i+s*s;c?(o=t.r+n.r,l=e.r+n.r,(o*=o)>(l*=l)?(r=(c+l-o)/(2*c),a=Math.sqrt(Math.max(0,l/c-r*r)),n.x=e.x-r*i-a*s,n.y=e.y-r*s+a*i):(r=(c+o-l)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=t.x+r*i-a*s,n.y=t.y+r*s+a*i)):(n.x=t.x+n.r,n.y=t.y)}function Gae(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function qae(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,o=(t.y*n.r+n.y*t.r)/i;return r*r+o*o}function vO(e){this._=e,this.next=null,this.previous=null}function Yae(e,t){if(!(o=(e=function lGe(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var n,i,r,o,s,a,l,c,u,d,f;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(n.x=-(i=e[1]).r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;Wae(i,n,r=e[2]),n=new vO(n),i=new vO(i),r=new vO(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<o;++l){Wae(n._,i._,r=e[l]),r=new vO(r),c=i.next,u=n.previous,d=i._.r,f=n._.r;do{if(d<=f){if(Gae(c._,r._)){n.next=i=c,i.previous=n,--l;continue e}d+=c._.r,c=c.next}else{if(Gae(u._,r._)){(n=u).next=i,i.previous=n,--l;continue e}f+=u._.r,u=u.previous}}while(c!==u.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=qae(n);(r=r.next)!==i;)(a=qae(r))<s&&(n=r,s=a);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=function Vae(e,t){for(var o,s,n=0,i=(e=function cGe(e,t){let i,r,n=e.length;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}(Array.from(e),t)).length,r=[];n<i;)o=e[n],s&&Uae(s,o)?++n:(s=dGe(r=uGe(r,o)),n=0);return s}(n,t),l=0;l<o;++l)(n=e[l]).x-=r.x,n.y-=r.y;return r.r}function hGe(e){return Math.sqrt(e.value)}function Xae(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Lz(e,t,n){return function(i){if(r=i.children){var r,o,l,s=r.length,a=e(i)*t||0;if(a)for(o=0;o<s;++o)r[o].r+=a;if(l=Yae(r,n),a)for(o=0;o<s;++o)r[o].r-=a;i.r=l+a}}}function Kae(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Zae(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function r1(e,t,n,i,r){for(var s,o=e.children,a=-1,l=o.length,c=e.value&&(i-t)/e.value;++a<l;)(s=o[a]).y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*c}Rz.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Nae}]},St(Rz,Qe,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(Pz),o=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&$ae(n,e,0,t)):(this.value=n=function L7e(e,t){const n=vF(e),i=n.stop,r=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,r()),n.stop=()=>(o=!0,i()),$ae(n,t,!0).on("end",()=>o=!0)}(t.source,e),n.on("tick",function F7e(e,t){return()=>e.touch(t).run()}(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(I7e)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation;return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let u,a=this._argops,l=0,c=a.length;l<c;++l)if(u=a[l],u.name===t1&&"link"===u.op._argval.force)for(var s,i=u.op._argops,r=0,o=i.length;r<o;++r)if("links"===i[r].name&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(Nae)}}),wv.prototype=Iz.prototype={constructor:wv,count:function H7e(){return this.eachAfter(z7e)},each:function V7e(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this},eachAfter:function j7e(e,t){for(var o,s,a,n=this,i=[n],r=[],l=-1;n=i.pop();)if(r.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)i.push(o[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this},eachBefore:function U7e(e,t){for(var r,o,n=this,i=[n],s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this},find:function W7e(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i},sum:function G7e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})},sort:function q7e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function Y7e(e){for(var t=this,n=function X7e(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}(t,e),i=[t];t!==n;)i.push(t=t.parent);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i},ancestors:function K7e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function Z7e(){return Array.from(this)},leaves:function Q7e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function J7e(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function tGe(){return Iz(this).eachBefore(rGe)},[Symbol.iterator]:function*eGe(){var t,i,r,o,e=this,n=[e];do{for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)n.push(i[r])}while(n.length)}};var mGe={depth:-1},Qae={},Nz={};function _Ge(e){return e.id}function yGe(e){return e.parentId}function Jae(){var n,e=_Ge,t=yGe;function i(r){var l,c,u,d,f,h,y,b,o=Array.from(r),s=e,a=t,C=new Map;if(null!=n){const k=o.map((z,q)=>function vGe(e){let t=(e=`${e}`).length;return $z(e,t-1)&&!$z(e,t-2)&&(e=e.slice(0,-1)),"/"===e[0]?e:`/${e}`}(n(z,q,r))),O=k.map(ele),I=new Set(k).add("");for(const z of O)I.has(z)||(I.add(z),k.push(z),O.push(ele(z)),o.push(Nz));s=(z,q)=>k[q],a=(z,q)=>O[q]}for(u=0,l=o.length;u<l;++u)h=o[u]=new wv(c=o[u]),null!=(y=s(c,u,r))&&(y+="")&&(b=h.id=y,C.set(b,C.has(b)?Qae:h)),null!=(y=a(c,u,r))&&(y+="")&&(h.parent=y);for(u=0;u<l;++u)if(y=(h=o[u]).parent){if(!(f=C.get(y)))throw new Error("missing: "+y);if(f===Qae)throw new Error("ambiguous: "+y);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(null!=n){for(;d.data===Nz&&1===d.children.length;)d=d.children[0],--l;for(let k=o.length-1;k>=0&&(h=o[k]).data===Nz;--k)h.data=null}if(d.parent=mGe,d.eachBefore(function(k){k.depth=k.parent.depth+1,--l}).eachBefore(Bae),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(e=_O(r),i):e},i.parentId=function(r){return arguments.length?(t=_O(r),i):t},i.path=function(r){return arguments.length?(n=_O(r),i):n},i}function ele(e){let t=e.length;if(t<2)return"";for(;--t>1&&!$z(e,t););return e.slice(0,t)}function $z(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if(0==(1&n))return!0}return!1}function bGe(e,t){return e.parent===t.parent?1:2}function Bz(e){var t=e.children;return t?t[0]:e.t}function zz(e){var t=e.children;return t?t[t.length-1]:e.t}function wGe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function MGe(e,t,n){return e.a.parent===t.parent?e.a:n}function bO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function SGe(e,t){return e.parent===t.parent?1:2}function AGe(e,t){return e+t.x}function DGe(e,t){return Math.max(e,t.y)}function wO(e,t,n,i,r){for(var s,o=e.children,a=-1,l=o.length,c=e.value&&(r-n)/e.value;++a<l;)(s=o[a]).x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*c}bO.prototype=Object.create(wv.prototype);var tle=(1+Math.sqrt(5))/2;function nle(e,t,n,i,r,o){for(var l,c,h,y,C,k,O,I,z,q,ne,s=[],a=t.children,u=0,d=0,f=a.length,b=t.value;u<f;){h=r-n,y=o-i;do{C=a[d++].value}while(!C&&d<f);for(k=O=C,ne=C*C*(q=Math.max(y/h,h/y)/(b*e)),z=Math.max(O/ne,ne/k);d<f;++d){if(C+=c=a[d].value,c<k&&(k=c),c>O&&(O=c),ne=C*C*q,(I=Math.max(O/ne,ne/k))>z){C-=c;break}z=I}s.push(l={value:C,dice:h<y,children:a.slice(u,d)}),l.dice?r1(l,n,i,r,b?i+=y*C/b:o):wO(l,n,i,b?n+=h*C/b:r,o),b-=C,u=d}return s}const ile=function e(t){function n(i,r,o,s,a){nle(t,i,r,o,s,a)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(tle),LGe=function e(t){function n(i,r,o,s,a){if((l=i._squarify)&&l.ratio===t)for(var l,c,u,d,h,f=-1,y=l.length,b=i.value;++f<y;){for(u=(c=l[f]).children,d=c.value=0,h=u.length;d<h;++d)c.value+=u[d].value;c.dice?r1(c,r,o,s,b?o+=(a-o)*c.value/b:a):wO(c,r,o,b?r+=(s-r)*c.value/b:s,a),b-=c.value}else i._squarify=l=nle(t,i,r,o,s,a),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(tle);function Hz(e,t,n){const i={};return e.each(r=>{const o=r.data;n(o)&&(i[t(o)]=r)}),e.lookup=i,e}function Vz(e){Qe.call(this,null,e)}Vz.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const $Ge=e=>e.values;function BGe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,o){if(o>=e.length)return r;const s=r.length,a=e[o++],l={},c={};let d,f,h,u=-1;for(;++u<s;)d=a(f=r[u])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)c[d]=n(l[d],o);return c}function i(r,o){if(++o>e.length)return r;const s=[];for(const a in r)s.push({key:a,values:i(r[a],o)});return s}return t}function af(e){Qe.call(this,null,e)}St(Vz,Qe,{transform(e,t){t.source||nt("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),o=this.value;return(!o||i||t.changed())&&(o&&o.each(s=>{s.children&&Ak(s.data)&&r.rem.push(s.data)}),this.value=o=Iz({values:Ht(e.keys).reduce((s,a)=>(s.key(a),s),BGe()).entries(r.source)},$Ge),n&&o.each(s=>{s.children&&(s=Li(s.data),r.add.push(s),r.source.push(s))}),Hz(o,wn,wn)),r.source.root=o,r}});const zGe=(e,t)=>e.parent===t.parent?1:2;St(af,Qe,{transform(e,t){(!t.source||!t.source.root)&&nt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,o=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Eg(e.sort,s=>s.data)),function HGe(e,t,n){for(let i,r=0,o=t.length;r<o;++r)i=t[r],i in n&&e[i](n[i])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?zGe:Fy);try{this.value=n(r)}catch(s){nt(s)}return r.each(s=>function VGe(e,t,n){const i=e.data,r=t.length-1;for(let o=0;o<r;++o)i[n[o]]=e[t[o]];i[n[r]]=e.children?e.children.length:0}(s,i,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const Uz=["x","y","r","depth","children"];function jz(e){af.call(this,e)}jz.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Uz.length,default:Uz}]},St(jz,af,{layout:function pGe(){var e=null,t=1,n=1,i=Bg;function r(o){const s=function aGe(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}();return o.x=t/2,o.y=n/2,e?o.eachBefore(Xae(e)).eachAfter(Lz(i,.5,s)).eachBefore(Kae(1)):o.eachBefore(Xae(hGe)).eachAfter(Lz(Bg,1,s)).eachAfter(Lz(i,o.r/Math.min(t,n),s)).eachBefore(Kae(Math.min(t,n)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(e=_O(o),r):e},r.size=function(o){return arguments.length?(t=+o[0],n=+o[1],r):[t,n]},r.padding=function(o){return arguments.length?(i="function"==typeof o?o:Cv(+o),r):i},r},params:["radius","size","padding"],fields:Uz});const Wz=["x0","y0","x1","y1","depth","children"];function Gz(e){af.call(this,e)}function qz(e){Qe.call(this,null,e)}Gz.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Wz.length,default:Wz}]},St(Gz,af,{layout:function gGe(){var e=1,t=1,n=0,i=!1;function r(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(function o(s,a){return function(l){l.children&&r1(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var c=l.x0,u=l.y0,d=l.x1-n,f=l.y1-n;d<c&&(c=d=(c+d)/2),f<u&&(u=f=(u+f)/2),l.x0=c,l.y0=u,l.x1=d,l.y1=f}}(t,a)),i&&s.eachBefore(Zae),s}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r},params:["size","round","padding"],fields:Wz}),qz.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},St(qz,Qe,{transform(e,t){t.source||nt("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),o=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),o&&(n=r.source.length?Hz(Jae().id(e.key).parentId(e.parentKey)(r.source),e.key,Il):Hz(Jae()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const rle={tidy:function EGe(){var e=bGe,t=1,n=1,i=null;function r(c){var u=function xGe(e){for(var n,r,o,s,a,t=new bO(e,0),i=[t];n=i.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)i.push(r=n.children[s]=new bO(o[s],s)),r.parent=n;return(t.parent=new bO(null,0)).children=[t],t}(c);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),i)c.eachBefore(l);else{var d=c,f=c,h=c;c.eachBefore(function(O){O.x<d.x&&(d=O),O.x>f.x&&(f=O),O.depth>h.depth&&(h=O)});var y=d===f?1:e(d,f)/2,b=y-d.x,C=t/(f.x+y+b),k=n/(h.depth||1);c.eachBefore(function(O){O.x=(O.x+b)*C,O.y=O.depth*k})}return c}function o(c){var u=c.children,d=c.parent.children,f=c.i?d[c.i-1]:null;if(u){!function CGe(e){for(var o,t=0,n=0,i=e.children,r=i.length;--r>=0;)(o=i[r]).z+=t,o.m+=t,t+=o.s+(n+=o.c)}(c);var h=(u[0].z+u[u.length-1].z)/2;f?(c.z=f.z+e(c._,f._),c.m=c.z-h):c.z=h}else f&&(c.z=f.z+e(c._,f._));c.parent.A=function a(c,u,d){if(u){for(var z,f=c,h=c,y=u,b=f.parent.children[0],C=f.m,k=h.m,O=y.m,I=b.m;y=zz(y),f=Bz(f),y&&f;)b=Bz(b),(h=zz(h)).a=c,(z=y.z+O-f.z-C+e(y._,f._))>0&&(wGe(MGe(y,c,d),c,z),C+=z,k+=z),O+=y.m,C+=f.m,I+=b.m,k+=h.m;y&&!zz(h)&&(h.t=y,h.m+=O-k),f&&!Bz(b)&&(b.t=f,b.m+=C-I,d=c)}return d}(c,f,c.parent.A||d[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c){c.x*=t,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,t=+c[0],n=+c[1],r):i?null:[t,n]},r.nodeSize=function(c){return arguments.length?(i=!0,t=+c[0],n=+c[1],r):i?[t,n]:null},r},cluster:function RGe(){var e=SGe,t=1,n=1,i=!1;function r(o){var s,a=0;o.eachAfter(function(f){var h=f.children;h?(f.x=function kGe(e){return e.reduce(AGe,0)/e.length}(h),f.y=function OGe(e){return 1+e.reduce(DGe,0)}(h)):(f.x=s?a+=e(f,s):0,f.y=0,s=f)});var l=function TGe(e){for(var t;t=e.children;)e=t[0];return e}(o),c=function PGe(e){for(var t;t=e.children;)e=t[t.length-1];return e}(o),u=l.x-e(l,c)/2,d=c.x+e(c,l)/2;return o.eachAfter(i?function(f){f.x=(f.x-o.x)*t,f.y=(o.y-f.y)*n}:function(f){f.x=(f.x-u)/(d-u)*t,f.y=(1-(o.y?f.y/o.y:1))*n})}return r.separation=function(o){return arguments.length?(e=o,r):e},r.size=function(o){return arguments.length?(i=!1,t=+o[0],n=+o[1],r):i?null:[t,n]},r.nodeSize=function(o){return arguments.length?(i=!0,t=+o[0],n=+o[1],r):i?[t,n]:null},r}},Yz=["x","y","depth","children"];function Xz(e){af.call(this,e)}function Kz(e){Qe.call(this,[],e)}Xz.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Yz.length,default:Yz}]},St(Xz,af,{layout(e){const t=e||"tidy";if(bn(rle,t))return rle[t]();nt("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Yz}),Kz.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},St(Kz,Qe,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),o={};return i||nt("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>o[wn(s)]=1),i.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[wn(a)]&&o[wn(l)]&&r.add.push(Li({source:l,target:a}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[wn(s)]=1),n.forEach(s=>{(o[wn(s.source)]||o[wn(s.target)])&&r.mod.push(s)})),r}});const ole={binary:function IGe(e,t,n,i,r){var s,l,o=e.children,a=o.length,c=new Array(a+1);for(c[0]=l=s=0;s<a;++s)c[s+1]=l+=o[s].value;!function u(d,f,h,y,b,C,k){if(d>=f-1){var O=o[d];return O.x0=y,O.y0=b,O.x1=C,void(O.y1=k)}for(var I=c[d],z=h/2+I,q=d+1,ne=f-1;q<ne;){var K=q+ne>>>1;c[K]<z?q=K+1:ne=K}z-c[q-1]<c[q]-z&&d+1<q&&--q;var le=c[q]-I,me=h-le;if(C-y>k-b){var ge=h?(y*me+C*le)/h:C;u(d,q,le,y,b,ge,k),u(q,f,me,ge,b,C,k)}else{var ye=h?(b*me+k*le)/h:k;u(d,q,le,y,b,C,ye),u(q,f,me,y,ye,C,k)}}(0,a,e.value,t,n,i,r)},dice:r1,slice:wO,slicedice:function FGe(e,t,n,i,r){(1&e.depth?wO:r1)(e,t,n,i,r)},squarify:ile,resquarify:LGe},Zz=["x0","y0","x1","y1","depth","children"];function Qz(e){af.call(this,e)}Qz.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Zz.length,default:Zz}]},St(Qz,af,{layout(){const e=function NGe(){var e=ile,t=!1,n=1,i=1,r=[0],o=Bg,s=Bg,a=Bg,l=Bg,c=Bg;function u(f){return f.x0=f.y0=0,f.x1=n,f.y1=i,f.eachBefore(d),r=[0],t&&f.eachBefore(Zae),f}function d(f){var h=r[f.depth],y=f.x0+h,b=f.y0+h,C=f.x1-h,k=f.y1-h;C<y&&(y=C=(y+C)/2),k<b&&(b=k=(b+k)/2),f.x0=y,f.y0=b,f.x1=C,f.y1=k,f.children&&(h=r[f.depth+1]=o(f)/2,y+=c(f)-h,b+=s(f)-h,(C-=a(f)-h)<y&&(y=C=(y+C)/2),(k-=l(f)-h)<b&&(b=k=(b+k)/2),e(f,y,b,C,k))}return u.round=function(f){return arguments.length?(t=!!f,u):t},u.size=function(f){return arguments.length?(n=+f[0],i=+f[1],u):[n,i]},u.tile=function(f){return arguments.length?(e=zae(f),u):e},u.padding=function(f){return arguments.length?u.paddingInner(f).paddingOuter(f):u.paddingInner()},u.paddingInner=function(f){return arguments.length?(o="function"==typeof f?f:Cv(+f),u):o},u.paddingOuter=function(f){return arguments.length?u.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):u.paddingTop()},u.paddingTop=function(f){return arguments.length?(s="function"==typeof f?f:Cv(+f),u):s},u.paddingRight=function(f){return arguments.length?(a="function"==typeof f?f:Cv(+f),u):a},u.paddingBottom=function(f){return arguments.length?(l="function"==typeof f?f:Cv(+f),u):l},u.paddingLeft=function(f){return arguments.length?(c="function"==typeof f?f:Cv(+f),u):c},u}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{bn(ole,t)?e.tile(ole[t]):nt("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Zz});const Jz=4278190080;function e5(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function CO(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;"group"===i?t.forEach(r=>{r.items.forEach(o=>CO(e,o.items,n))}):il[i].draw(e,{items:n?t.map(WGe):t})}function WGe(e){const t=Ok(e,{});return t.stroke&&0!==t.strokeOpacity||t.fill&&0!==t.fillOpacity?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Uh=new Uint32Array(33),Dc=new Uint32Array(33);Dc[0]=0,Uh[0]=~Dc[0];for(let e=1;e<=32;++e)Dc[e]=Dc[e-1]<<1|1,Uh[e]=~Dc[e];function MO(e,t,n,i,r,o){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>o}function jh(e,t,n,i,r,o,s,a){const l=r*o/(2*i),c=e(t-l),u=e(t+l),d=e(n-(o/=2)),f=e(n+o);return s.outOfBounds(c,d,u,f)||s.getRange(c,d,u,f)||a&&a.getRange(c,d,u,f)}const KGe=[-1,-1,1,1],ZGe=[-1,1,-1,1],JGe=["right","center","left"],eqe=["bottom","middle","top"];function sle(e,t,n,i,r,o,s,a,l,c,u,d){return!(r.outOfBounds(e,n,t,i)||(d&&o||r).getRange(e,n,t,i))}const nqe={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},iqe={naive:function YGe(e,t,n,i){const r=e.width,o=e.height;return function(s){const a=s.datum.datum.items[i].items,l=a.length,c=s.datum.fontSize,u=Ec.width(s.datum,s.datum.text);let f,h,y,b,C,k,O,d=0;for(let I=0;I<l;++I)f=a[I].x,y=a[I].y,h=void 0===a[I].x2?f:a[I].x2,b=void 0===a[I].y2?y:a[I].y2,C=(f+h)/2,k=(y+b)/2,O=Math.abs(h-f+b-y),O>=d&&(d=O,s.x=C,s.y=k);return C=u/2,k=c/2,f=s.x-C,h=s.x+C,y=s.y-k,b=s.y+k,s.align="center",f<0&&h<=r?s.align="left":0<=f&&r<h&&(s.align="right"),s.baseline="middle",y<0&&b<=o?s.baseline="top":0<=y&&o<b&&(s.baseline="bottom"),!0}},"reduced-search":function XGe(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1];function l(c,u,d,f,h){const y=e.invert(c),b=e.invert(u);let O,C=d,k=o;if(!MO(y,b,f,h,r,o)&&!jh(e,y,b,h,f,C,s,a)&&!jh(e,y,b,h,f,h,s,null)){for(;k-C>=1;)O=(C+k)/2,jh(e,y,b,h,f,O,s,a)?k=O:C=O;if(C>d)return[y,b,C,!0]}}return function(c){const u=c.datum.datum.items[i].items,d=u.length,f=c.datum.fontSize,h=Ec.width(c.datum,c.datum.text);let O,I,z,q,ne,K,le,me,ge,ye,Se,ve,Z,ae,oe,de,ce,y=n?f:0,b=!1,C=!1,k=0;for(let he=0;he<d;++he){for(O=u[he].x,z=u[he].y,I=void 0===u[he].x2?O:u[he].x2,q=void 0===u[he].y2?z:u[he].y2,O>I&&(ce=O,O=I,I=ce),z>q&&(ce=z,z=q,q=ce),ge=e(O),Se=e(I),ye=~~((ge+Se)/2),ve=e(z),ae=e(q),Z=~~((ve+ae)/2),le=ye;le>=ge;--le)for(me=Z;me>=ve;--me)de=l(le,me,y,h,f),de&&([c.x,c.y,y,b]=de);for(le=ye;le<=Se;++le)for(me=Z;me<=ae;++me)de=l(le,me,y,h,f),de&&([c.x,c.y,y,b]=de);!b&&!n&&(oe=Math.abs(I-O+q-z),ne=(O+I)/2,K=(z+q)/2,oe>=k&&!MO(ne,K,h,f,r,o)&&!jh(e,ne,K,f,h,f,s,null)&&(k=oe,c.x=ne,c.y=K,C=!0))}return!(!b&&!C||(ne=h/2,K=f/2,s.setRange(e(c.x-ne),e(c.y-K),e(c.x+ne),e(c.y+K)),c.align="center",c.baseline="middle",0))}},floodfill:function QGe(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(c){const u=c.datum.datum.items[i].items,d=u.length,f=c.datum.fontSize,h=Ec.width(c.datum,c.datum.text),y=[];let I,z,q,ne,K,le,me,ge,ye,Se,ve,Z,b=n?f:0,C=!1,k=!1,O=0;for(let ae=0;ae<d;++ae){for(I=u[ae].x,q=u[ae].y,z=void 0===u[ae].x2?I:u[ae].x2,ne=void 0===u[ae].y2?q:u[ae].y2,y.push([e((I+z)/2),e((q+ne)/2)]);y.length;)if([me,ge]=y.pop(),!(s.get(me,ge)||a.get(me,ge)||l.get(me,ge))){l.set(me,ge);for(let oe=0;oe<4;++oe)K=me+KGe[oe],le=ge+ZGe[oe],l.outOfBounds(K,le,K,le)||y.push([K,le]);if(K=e.invert(me),le=e.invert(ge),ye=b,Se=o,!MO(K,le,h,f,r,o)&&!jh(e,K,le,f,h,ye,s,a)&&!jh(e,K,le,f,h,f,s,null)){for(;Se-ye>=1;)ve=(ye+Se)/2,jh(e,K,le,f,h,ve,s,a)?Se=ve:ye=ve;ye>b&&(c.x=K,c.y=le,b=ye,C=!0)}}!C&&!n&&(Z=Math.abs(z-I+ne-q),K=(I+z)/2,le=(q+ne)/2,Z>=O&&!MO(K,le,h,f,r,o)&&!jh(e,K,le,f,h,f,s,null)&&(O=Z,c.x=K,c.y=le,k=!0))}return!(!C&&!k||(K=h/2,le=f/2,s.setRange(e(c.x-K),e(c.y-le),e(c.x+K),e(c.y+le)),c.align="center",c.baseline="middle",0))}}};function rqe(e,t,n,i,r,o,s,a,l,c,u){if(!e.length)return e;const d=Math.max(i.length,r.length),f=function oqe(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}(i,d),h=function sqe(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=nqe[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}(r,d),y=function aqe(e){return e&&e.mark&&e.mark.marktype}(e[0].datum),b="group"===y&&e[0].datum.items[l].marktype,C="area"===b,k=function lqe(e,t,n,i){const r=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?"line"===e||"area"===e?o=>r(o.datum):"line"===t?o=>{const s=o.datum.items[i].items;return r(s.length?s["start"===n?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}(y,b,a,l),O=null===c||c===1/0,I=C&&"naive"===u;let z=-1,q=-1;const ne=e.map(ge=>{const ye=O?Ec.width(ge,ge.text):void 0;return z=Math.max(z,ye),q=Math.max(q,ge.fontSize),{datum:ge,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:k(ge),textWidth:ye}});c=null===c||c===1/0?Math.max(z,q)+Math.max(...i):c;const K=function qGe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),o=~~((t+2*n+i)/i),s=a=>~~((a+n)/i);return s.invert=a=>a*i-n,s.bitmap=()=>function GGe(e,t){const n=new Uint32Array(~~((e*t+32)/32));function i(o,s){n[o]|=s}function r(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>5]&1<<(31&a)},set:(o,s)=>{const a=s*e+o;i(a>>>5,1<<(31&a))},clear:(o,s)=>{const a=s*e+o;r(a>>>5,~(1<<(31&a)))},getRange:(o,s,a,l)=>{let u,d,f,h,c=l;for(;c>=s;--c)if(u=c*e+o,d=c*e+a,f=u>>>5,h=d>>>5,f===h){if(n[f]&Uh[31&u]&Dc[1+(31&d)])return!0}else{if(n[f]&Uh[31&u]||n[h]&Dc[1+(31&d)])return!0;for(let y=f+1;y<h;++y)if(n[y])return!0}return!1},setRange:(o,s,a,l)=>{let c,u,d,f,h;for(;s<=l;++s)if(c=s*e+o,u=s*e+a,d=c>>>5,f=u>>>5,d===f)i(d,Uh[31&c]&Dc[1+(31&u)]);else for(i(d,Uh[31&c]),i(f,Dc[1+(31&u)]),h=d+1;h<f;++h)i(h,4294967295)},clearRange:(o,s,a,l)=>{let c,u,d,f,h;for(;s<=l;++s)if(c=s*e+o,u=s*e+a,d=c>>>5,f=u>>>5,d===f)r(d,Dc[31&c]|Uh[1+(31&u)]);else for(r(d,Dc[31&c]),r(f,Uh[1+(31&u)]),h=d+1;h<f;++h)r(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}(r,o),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}(t[0],t[1],c);let le;if(!I){n&&ne.sort((Se,ve)=>n(Se.datum,ve.datum));let ge=!1;for(let Se=0;Se<h.length&&!ge;++Se)ge=5===h[Se]||f[Se]<0;const ye=(y&&s||C)&&e.map(Se=>Se.datum);le=o.length||ye?function jGe(e,t,n,i,r){const o=e.width,s=e.height,a=i||r,l=xh(o,s).getContext("2d"),c=xh(o,s).getContext("2d"),u=a&&xh(o,s).getContext("2d");n.forEach(le=>CO(l,le,!1)),CO(c,t,!1),a&&CO(u,t,!0);const d=e5(l,o,s),f=e5(c,o,s),h=a&&e5(u,o,s),y=e.bitmap(),b=a&&e.bitmap();let C,k,O,I,z,q,ne,K;for(k=0;k<s;++k)for(C=0;C<o;++C)z=k*o+C,q=d[z]&Jz,K=f[z]&Jz,ne=a&&h[z]&Jz,(q||ne||K)&&(O=e(C),I=e(k),!r&&(q||K)&&y.set(O,I),a&&(q||ne)&&b.set(O,I));return[y,b]}(K,ye||[],o,ge,C):function UGe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}(K,s&&ne)}const me=C?iqe[u](K,le,s,l):function tqe(e,t,n,i){const r=e.width,o=e.height,s=t[0],a=t[1],l=i.length;return function(c){const u=c.boundary,d=c.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>r||u[3]>o)return!1;let h,y,b,C,k,O,I,z,q,ne,K,le,me,ge,ye,f=c.textWidth??0;for(let Se=0;Se<l;++Se){if(h=(3&n[Se])-1,y=(n[Se]>>>2&3)-1,b=0===h&&0===y||i[Se]<0,C=h&&y?Math.SQRT1_2:1,k=i[Se]<0?-1:1,O=u[1+h]+i[Se]*h*C,K=u[4+y]+k*d*y/2+i[Se]*y*C,z=K-d/2,q=K+d/2,le=e(O),ge=e(z),ye=e(q),!f){if(!sle(le,le,ge,ye,s,a,0,0,0,0,0,b))continue;f=Ec.width(c.datum,c.datum.text)}if(ne=O+k*f*h/2,O=ne-f/2,I=ne+f/2,le=e(O),me=e(I),sle(le,me,ge,ye,s,a,0,0,0,0,0,b))return c.x=h?h*k<0?I:O:ne,c.y=y?y*k<0?q:z:K,c.align=JGe[h*k+1],c.baseline=eqe[y*k+1],s.setRange(le,ge,me,ye),!0}return!1}}(K,le,h,f);return ne.forEach(ge=>ge.opacity=+me(ge)),ne}const l5=["x","y","opacity","align","baseline"],ale=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function c5(e){Qe.call(this,null,e)}function lle(e,t){var r,o,s,a,l,c,n=[],i=function(u){return u(a)};if(null==t)n.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(c=r[l=t.map(i)])||(r[l]=c=[],c.dims=l,n.push(c)),c.push(a);return n}function u5(e){Qe.call(this,null,e)}c5.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:ale},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:l5.length,default:l5}]},St(c5,Qe,{transform(e,t){const i=e.modified();if(!(i||t.changed(t.ADD_REM)||function n(o){const s=e[o];return Yn(s)&&t.modified(s.fields)}("sort")))return;(!e.size||2!==e.size.length)&&nt("Size parameter should be specified as a [width, height] array.");const r=e.as||l5;return rqe(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ht(e.offset??1),Ht(e.anchor||ale),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,void 0===e.padding?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[r[0]]=o.x,s[r[1]]=o.y,s[r[2]]=o.opacity,s[r[3]]=o.align,s[r[4]]=o.baseline}),t.reflow(i).modifies(r)}}),u5.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},St(u5,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=lle(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(Hr),s=o.length,a=e.as||[Hr(e.x),Hr(e.y)],l=[];r.forEach(c=>{ene(c,e.x,e.y,e.bandwidth||.3).forEach(u=>{const d={};for(let f=0;f<s;++f)d[o[f]]=c.dims[f];d[a[0]]=u[0],d[a[1]]=u[1],l.push(Li(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const d5={constant:b$,linear:w$,log:Yte,exp:Xte,pow:Kte,quad:C$,poly:Zte};function f5(e){Qe.call(this,null,e)}f5.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(d5)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},St(f5,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=lle(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(Hr),s=e.method||"linear",a=e.order??3,l=((e,t)=>"poly"===e?t:"quad"===e?2:1)(s,a),c=e.as||[Hr(e.x),Hr(e.y)],u=d5[s],d=[];let f=e.extent;bn(d5,s)||nt("Invalid regression method: "+s),null!=f&&"log"===s&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach(h=>{if(h.length<=l)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const b=u(h,e.x,e.y,a);if(e.params)return void d.push(Li({keys:h.dims,coef:b.coef,rSquared:b.rSquared}));const C=f||Eu(h,e.x),k=O=>{const I={};for(let z=0;z<o.length;++z)I[o[z]]=h.dims[z];I[c[0]]=O[0],I[c[1]]=O[1],d.push(Li(I))};"linear"===s||"constant"===s?C.forEach(O=>k([O,b.predict(O)])):zk(b.predict,C,25,200).forEach(k)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const wo=134217729;function s1(e,t,n,i,r){let o,s,a,l,c=t[0],u=i[0],d=0,f=0;u>c==u>-c?(o=c,c=t[++d]):(o=u,u=i[++f]);let h=0;if(d<e&&f<n)for(u>c==u>-c?(s=c+o,a=o-(s-c),c=t[++d]):(s=u+o,a=o-(s-u),u=i[++f]),o=s,0!==a&&(r[h++]=a);d<e&&f<n;)u>c==u>-c?(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=t[++d]):(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++f]),o=s,0!==a&&(r[h++]=a);for(;d<e;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=t[++d],o=s,0!==a&&(r[h++]=a);for(;f<n;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++f],o=s,0!==a&&(r[h++]=a);return(0!==o||0===h)&&(r[h++]=o),h}function yt(e){return new Float64Array(e)}const Mv=yt(4),cle=yt(8),ule=yt(12),dle=yt(16),ea=yt(4);function xO(e,t,n,i,r,o){const s=(t-o)*(n-r),a=(e-r)*(i-o),l=s-a,c=Math.abs(s+a);return Math.abs(l)>=33306690738754716e-32*c?l:-function gqe(e,t,n,i,r,o,s){let a,l,c,u,d,f,h,y,b,C,k,O,I,z,q,ne,K,le;const me=e-r,ge=n-r,ye=t-o,Se=i-o;z=me*Se,f=wo*me,h=f-(f-me),y=me-h,f=wo*Se,b=f-(f-Se),C=Se-b,q=y*C-(z-h*b-y*b-h*C),ne=ye*ge,f=wo*ye,h=f-(f-ye),y=ye-h,f=wo*ge,b=f-(f-ge),C=ge-b,K=y*C-(ne-h*b-y*b-h*C),k=q-K,d=q-k,Mv[0]=q-(k+d)+(d-K),O=z+k,d=O-z,I=z-(O-d)+(k-d),k=I-ne,d=I-k,Mv[1]=I-(k+d)+(d-ne),le=O+k,d=le-O,Mv[2]=O-(le-d)+(k-d),Mv[3]=le;let ve=function dqe(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}(4,Mv),Z=22204460492503146e-32*s;if(ve>=Z||-ve>=Z||(d=e-me,a=e-(me+d)+(d-r),d=n-ge,c=n-(ge+d)+(d-r),d=t-ye,l=t-(ye+d)+(d-o),d=i-Se,u=i-(Se+d)+(d-o),0===a&&0===l&&0===c&&0===u)||(Z=11093356479670487e-47*s+33306690738754706e-32*Math.abs(ve),ve+=me*u+Se*a-(ye*c+ge*l),ve>=Z||-ve>=Z))return ve;z=a*Se,f=wo*a,h=f-(f-a),y=a-h,f=wo*Se,b=f-(f-Se),C=Se-b,q=y*C-(z-h*b-y*b-h*C),ne=l*ge,f=wo*l,h=f-(f-l),y=l-h,f=wo*ge,b=f-(f-ge),C=ge-b,K=y*C-(ne-h*b-y*b-h*C),k=q-K,d=q-k,ea[0]=q-(k+d)+(d-K),O=z+k,d=O-z,I=z-(O-d)+(k-d),k=I-ne,d=I-k,ea[1]=I-(k+d)+(d-ne),le=O+k,d=le-O,ea[2]=O-(le-d)+(k-d),ea[3]=le;const ae=s1(4,Mv,4,ea,cle);z=me*u,f=wo*me,h=f-(f-me),y=me-h,f=wo*u,b=f-(f-u),C=u-b,q=y*C-(z-h*b-y*b-h*C),ne=ye*c,f=wo*ye,h=f-(f-ye),y=ye-h,f=wo*c,b=f-(f-c),C=c-b,K=y*C-(ne-h*b-y*b-h*C),k=q-K,d=q-k,ea[0]=q-(k+d)+(d-K),O=z+k,d=O-z,I=z-(O-d)+(k-d),k=I-ne,d=I-k,ea[1]=I-(k+d)+(d-ne),le=O+k,d=le-O,ea[2]=O-(le-d)+(k-d),ea[3]=le;const oe=s1(ae,cle,4,ea,ule);z=a*u,f=wo*a,h=f-(f-a),y=a-h,f=wo*u,b=f-(f-u),C=u-b,q=y*C-(z-h*b-y*b-h*C),ne=l*c,f=wo*l,h=f-(f-l),y=l-h,f=wo*c,b=f-(f-c),C=c-b,K=y*C-(ne-h*b-y*b-h*C),k=q-K,d=q-k,ea[0]=q-(k+d)+(d-K),O=z+k,d=O-z,I=z-(O-d)+(k-d),k=I-ne,d=I-k,ea[1]=I-(k+d)+(d-ne),le=O+k,d=le-O,ea[2]=O-(le-d)+(k-d),ea[3]=le;const de=s1(oe,ule,4,ea,dle);return dle[de-1]}(e,t,n,i,r,o,c)}yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(8),yt(8),yt(8),yt(4),yt(8),yt(8),yt(8),yt(12),yt(192),yt(192),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(8),yt(8),yt(8),yt(8),yt(8),yt(8),yt(8),yt(8),yt(8),yt(4),yt(4),yt(4),yt(8),yt(16),yt(16),yt(16),yt(32),yt(32),yt(48),yt(64),yt(1152),yt(1152),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(4),yt(24),yt(24),yt(24),yt(24),yt(24),yt(24),yt(24),yt(24),yt(24),yt(24),yt(1152),yt(1152),yt(1152),yt(1152),yt(1152),yt(2304),yt(2304),yt(3456),yt(5760),yt(8),yt(8),yt(8),yt(16),yt(24),yt(48),yt(48),yt(96),yt(192),yt(384),yt(384),yt(384),yt(768),yt(96),yt(96),yt(96),yt(1152);const Ple=Math.pow(2,-52),IO=new Uint32Array(512);class FO{static from(t,n=Fqe,i=Lqe){const r=t.length,o=new Float64Array(2*r);for(let s=0;s<r;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=i(a)}return new FO(o)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let ge=0;ge<s;ge++){const ye=t[2*ge],Se=t[2*ge+1];ye<a&&(a=ye),Se<l&&(l=Se),ye>c&&(c=ye),Se>u&&(u=Se),this._ids[ge]=ge}const d=(a+c)/2,f=(l+u)/2;let y,b,C,h=1/0;for(let ge=0;ge<s;ge++){const ye=$5(d,f,t[2*ge],t[2*ge+1]);ye<h&&(y=ge,h=ye)}const k=t[2*y],O=t[2*y+1];h=1/0;for(let ge=0;ge<s;ge++){if(ge===y)continue;const ye=$5(k,O,t[2*ge],t[2*ge+1]);ye<h&&ye>0&&(b=ge,h=ye)}let I=t[2*b],z=t[2*b+1],q=1/0;for(let ge=0;ge<s;ge++){if(ge===y||ge===b)continue;const ye=Rqe(k,O,I,z,t[2*ge],t[2*ge+1]);ye<q&&(C=ge,q=ye)}let ne=t[2*C],K=t[2*C+1];if(q===1/0){for(let Se=0;Se<s;Se++)this._dists[Se]=t[2*Se]-t[0]||t[2*Se+1]-t[1];Tv(this._ids,this._dists,0,s-1);const ge=new Uint32Array(s);let ye=0;for(let Se=0,ve=-1/0;Se<s;Se++){const Z=this._ids[Se];this._dists[Z]>ve&&(ge[ye++]=Z,ve=this._dists[Z])}return this.hull=ge.subarray(0,ye),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(xO(k,O,I,z,ne,K)<0){const ge=b,ye=I,Se=z;b=C,I=ne,z=K,C=ge,ne=ye,K=Se}const le=function Iqe(e,t,n,i,r,o){const s=n-e,a=i-t,l=r-e,c=o-t,u=s*s+a*a,d=l*l+c*c,f=.5/(s*c-a*l);return{x:e+(c*u-a*d)*f,y:t+(s*d-l*u)*f}}(k,O,I,z,ne,K);this._cx=le.x,this._cy=le.y;for(let ge=0;ge<s;ge++)this._dists[ge]=$5(t[2*ge],t[2*ge+1],le.x,le.y);Tv(this._ids,this._dists,0,s-1),this._hullStart=y;let me=3;i[y]=n[C]=b,i[b]=n[y]=C,i[C]=n[b]=y,r[y]=0,r[b]=1,r[C]=2,o.fill(-1),o[this._hashKey(k,O)]=y,o[this._hashKey(I,z)]=b,o[this._hashKey(ne,K)]=C,this.trianglesLen=0,this._addTriangle(y,b,C,-1,-1,-1);for(let ye,Se,ge=0;ge<this._ids.length;ge++){const ve=this._ids[ge],Z=t[2*ve],ae=t[2*ve+1];if(ge>0&&Math.abs(Z-ye)<=Ple&&Math.abs(ae-Se)<=Ple||(ye=Z,Se=ae,ve===y||ve===b||ve===C))continue;let oe=0;for(let Ee=0,Oe=this._hashKey(Z,ae);Ee<this._hashSize&&(oe=o[(Oe+Ee)%this._hashSize],-1===oe||oe===i[oe]);Ee++);oe=n[oe];let ce,de=oe;for(;ce=i[de],xO(Z,ae,t[2*de],t[2*de+1],t[2*ce],t[2*ce+1])>=0;)if(de=ce,de===oe){de=-1;break}if(-1===de)continue;let he=this._addTriangle(de,ve,i[de],-1,-1,r[de]);r[ve]=this._legalize(he+2),r[de]=he,me++;let pe=i[de];for(;ce=i[pe],xO(Z,ae,t[2*pe],t[2*pe+1],t[2*ce],t[2*ce+1])<0;)he=this._addTriangle(pe,ve,ce,r[ve],-1,r[pe]),r[ve]=this._legalize(he+2),i[pe]=pe,me--,pe=ce;if(de===oe)for(;ce=n[de],xO(Z,ae,t[2*ce],t[2*ce+1],t[2*de],t[2*de+1])<0;)he=this._addTriangle(ce,ve,de,-1,r[de],r[ce]),this._legalize(he+2),r[ce]=he,i[de]=de,me--,de=ce;this._hullStart=n[ve]=de,i[de]=n[pe]=ve,i[ve]=pe,o[this._hashKey(Z,ae)]=ve,o[this._hashKey(t[2*de],t[2*de+1])]=de}this.hull=new Uint32Array(me);for(let ge=0,ye=this._hullStart;ge<me;ge++)this.hull[ge]=ye,ye=i[ye];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function Tqe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,s=0;for(;;){const a=i[t],l=t-t%3;if(s=l+(t+2)%3,-1===a){if(0===o)break;t=IO[--o];continue}const c=a-a%3,d=c+(a+2)%3,f=n[s],h=n[t],y=n[l+(t+1)%3],b=n[d];if(Pqe(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*y],r[2*y+1],r[2*b],r[2*b+1])){n[t]=b,n[a]=f;const k=i[d];if(-1===k){let I=this._hullStart;do{if(this._hullTri[I]===d){this._hullTri[I]=t;break}I=this._hullPrev[I]}while(I!==this._hullStart)}this._link(t,k),this._link(a,i[s]),this._link(s,d);const O=c+(a+1)%3;o<IO.length&&(IO[o++]=O)}else{if(0===o)break;t=IO[--o]}}return s}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function $5(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}function Pqe(e,t,n,i,r,o,s,a){const l=e-s,c=t-a,u=n-s,d=i-a,f=r-s,h=o-a,b=u*u+d*d,C=f*f+h*h;return l*(d*C-b*h)-c*(u*C-b*f)+(l*l+c*c)*(u*h-d*f)<0}function Rqe(e,t,n,i,r,o){const s=n-e,a=i-t,l=r-e,c=o-t,u=s*s+a*a,d=l*l+c*c,f=.5/(s*c-a*l),h=(c*u-a*d)*f,y=(s*d-l*u)*f;return h*h+y*y}function Tv(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=e[r],s=t[o];let a=r-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let o=n+1,s=i;u1(e,n+i>>1,o),t[e[n]]>t[e[i]]&&u1(e,n,i),t[e[o]]>t[e[i]]&&u1(e,o,i),t[e[n]]>t[e[o]]&&u1(e,n,o);const a=e[o],l=t[a];for(;;){do{o++}while(t[e[o]]<l);do{s--}while(t[e[s]]>l);if(s<o)break;u1(e,o,s)}e[n+1]=e[s],e[s]=a,i-o+1>=s-n?(Tv(e,t,o,i),Tv(e,t,n,s-1)):(Tv(e,t,n,s-1),Tv(e,t,o,i))}}function u1(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Fqe(e){return e[0]}function Lqe(e){return e[1]}class Yg{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){const r=(t=+t)+(i=+i),o=n=+n;if(i<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class B5{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class Nqe{constructor(t,[n,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let O,I,b=0,C=0,k=i.length;b<k;b+=3,C+=2){const z=2*i[b],q=2*i[b+1],ne=2*i[b+2],K=t[z],le=t[z+1],ye=t[ne],Se=t[ne+1],ve=t[q]-K,Z=t[q+1]-le,ae=ye-K,oe=Se-le,de=2*(ve*oe-Z*ae);if(Math.abs(de)<1e-9){if(void 0===o){o=s=0;for(const he of n)o+=t[2*he],s+=t[2*he+1];o/=n.length,s/=n.length}const ce=1e9*Math.sign((o-K)*oe-(s-le)*ae);O=(K+ye)/2-ce*oe,I=(le+Se)/2+ce*ae}else{const ce=1/de,he=ve*ve+Z*Z,pe=ae*ae+oe*oe;O=K+(oe*he-Z*pe)*ce,I=le+(ve*pe-ae*he)*ce}a[C]=O,a[C+1]=I}let c,d,h,l=n[n.length-1],u=4*l,f=t[2*l],y=t[2*l+1];r.fill(0);for(let b=0;b<n.length;++b)l=n[b],c=u,d=f,h=y,u=4*l,f=t[2*l],y=t[2*l+1],r[c+2]=r[u]=h-y,r[c+3]=r[u+1]=f-d}render(t){const n=null==t?t=new Yg:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let u=0,d=i.length;u<d;++u){const f=i[u];if(f<u)continue;const h=2*Math.floor(u/3),y=2*Math.floor(f/3);this._renderSegment(s[h],s[h+1],s[y],s[y+1],t)}let l,c=o[o.length-1];for(let u=0;u<o.length;++u){l=c,c=o[u];const d=2*Math.floor(r[c]/3),f=s[d],h=s[d+1],y=4*l,b=this._project(f,h,a[y+2],a[y+3]);b&&this._renderSegment(f,h,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new Yg:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=null==n?n=new Yg:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new B5;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,o){let s;const a=this._regioncode(t,n),l=this._regioncode(i,r);0===a&&0===l?(o.moveTo(t,n),o.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,i){return(n=+n)==n&&(i=+i)==i&&this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r)e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[o]===r[a]&&n[o+1]===r[a+1]&&n[(o+2)%s]===r[(a+l-2)%l]&&n[(o+3)%s]===r[(a+l-1)%l]){yield i;break e}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,s=i[t];if(-1===s)return null;const a=[];let l=s;do{const c=Math.floor(l/3);if(a.push(n[2*c],n[2*c+1]),l=l%3==2?l-2:l+1,o[l]!==t)break;l=r[l]}while(l!==s&&-1!==l);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:i}=this,r=4*t;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let o,s,c,d,r=null,a=n[i-2],l=n[i-1],u=this._regioncode(a,l),f=0;for(let h=0;h<i;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],c=u,u=this._regioncode(a,l),0===c&&0===u)d=f,f=0,r?r.push(a,l):r=[a,l];else{let y,b,C,k,O;if(0===c){if(null===(y=this._clipSegment(o,s,a,l,c,u)))continue;[b,C,k,O]=y}else{if(null===(y=this._clipSegment(a,l,o,s,u,c)))continue;[k,O,b,C]=y,d=f,f=this._edgecode(b,C),d&&f&&this._edge(t,d,f,r,r.length),r?r.push(b,C):r=[b,C]}d=f,f=this._edgecode(k,O),d&&f&&this._edge(t,d,f,r,r.length),r?r.push(k,O):r=[k,O]}if(r)d=f,f=this._edgecode(r[0],r[1]),d&&f&&this._edge(t,d,f,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,o,s){const a=o<s;for(a&&([t,n,i,r,o,s]=[i,r,t,n,s,o]);;){if(0===o&&0===s)return a?[i,r,t,n]:[t,n,i,r];if(o&s)return null;let l,c,u=o||s;8&u?(l=t+(i-t)*(this.ymax-n)/(r-n),c=this.ymax):4&u?(l=t+(i-t)*(this.ymin-n)/(r-n),c=this.ymin):2&u?(c=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(c=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),o?o=this._regioncode(t=l,n=c):s=this._regioncode(i=l,r=c)}}_clipInfinite(t,n,i,r,o,s){let l,a=Array.from(n);if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let d,c=0,u=a.length,f=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)d=f,f=this._edgecode(a[c],a[c+1]),d&&f&&(c=this._edge(t,d,f,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,o){for(;n!==i;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin}(r[o]!==s||r[o+1]!==a)&&this.contains(t,s,a)&&(r.splice(o,0,s,a),o+=2)}return o}_project(t,n,i,r){let s,a,l,o=1/0;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<o&&(l=this.ymin,a=t+(o=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<o&&(l=this.ymax,a=t+(o=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<o&&(a=this.xmax,l=n+(o=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<o&&(a=this.xmin,l=n+(o=s)*r)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}}const $qe=2*Math.PI,Pv=Math.pow;function Bqe(e){return e[0]}function zqe(e){return e[1]}function Vqe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class z5{static from(t,n=Bqe,i=zqe,r){return new z5("length"in t?function Uqe(e,t,n,i){const r=e.length,o=new Float64Array(2*r);for(let s=0;s<r;++s){const a=e[s];o[2*s]=t.call(i,a,s,e),o[2*s+1]=n.call(i,a,s,e)}return o}(t,n,i,r):Float64Array.from(function*jqe(e,t,n,i){let r=0;for(const o of e)yield t.call(i,o,r,e),yield n.call(i,o,r,e),++r}(t,n,i,r)))}constructor(t){this._delaunator=new FO(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function Hqe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],o=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[o+1]-n[r+1])-(n[o]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],d=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let f=0,h=n.length/2;f<h;++f){const y=Vqe(n[2*f],n[2*f+1],d);n[2*f]=y[0],n[2*f+1]=y[1]}this._delaunator=new FO(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const u=o[l%3==2?l-2:l+1];(-1===i[l]||-1===s[u])&&(s[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,2===r.length&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Nqe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:o,triangles:s,collinear:a}=this;if(a){const d=a.indexOf(t);return d>0&&(yield a[d-1]),void(d<a.length-1&&(yield a[d+1]))}const l=n[t];if(-1===l)return;let c=l,u=-1;do{if(yield u=s[c],c=c%3==2?c-2:c+1,s[c]!==t)return;if(c=o[c],-1===c){const d=i[(r[t]+1)%i.length];return void(d!==u&&(yield d))}}while(c!==l)}find(t,n,i=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=i;let o;for(;(o=this._step(i,t,n))>=0&&o!==i&&o!==r;)i=o;return o}_step(t,n,i){const{inedges:r,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:c}=this;if(-1===r[t]||!c.length)return(t+1)%(c.length>>1);let u=t,d=Pv(n-c[2*t],2)+Pv(i-c[2*t+1],2);const f=r[t];let h=f;do{let y=l[h];const b=Pv(n-c[2*y],2)+Pv(i-c[2*y+1],2);if(b<d&&(d=b,u=y),h=h%3==2?h-2:h+1,l[h]!==t)break;if(h=a[h],-1===h){if(h=o[(s[t]+1)%o.length],h!==y&&Pv(n-c[2*h],2)+Pv(i-c[2*h+1],2)<d)return h;break}}while(h!==f);return u}render(t){const n=null==t?t=new Yg:void 0,{points:i,halfedges:r,triangles:o}=this;for(let s=0,a=r.length;s<a;++s){const l=r[s];if(l<s)continue;const c=2*o[s],u=2*o[l];t.moveTo(i[c],i[c+1]),t.lineTo(i[u],i[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0===n&&(!t||"function"!=typeof t.moveTo)&&(n=t,t=null),n=null==n?2:+n;const i=null==t?t=new Yg:void 0,{points:r}=this;for(let o=0,s=r.length;o<s;o+=2){const a=r[o],l=r[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,$qe)}return i&&i.value()}renderHull(t){const n=null==t?t=new Yg:void 0,{hull:i,points:r}=this,o=2*i[0],s=i.length;t.moveTo(r[o],r[o+1]);for(let a=1;a<s;++a){const l=2*i[a];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new B5;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=null==n?n=new Yg:void 0,{points:r,triangles:o}=this,s=2*o[t*=3],a=2*o[t+1],l=2*o[t+2];return n.moveTo(r[s],r[s+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new B5;return this.renderTriangle(t,n),n.value()}}function H5(e){Qe.call(this,null,e)}H5.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Wqe=[-1e5,-1e5,1e5,1e5];function Gqe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}St(H5,Qe,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:Wqe;const o=this.value=z5.from(i,e.x,e.y).voronoi(r);for(let s=0,a=i.length;s<a;++s){const l=o.cellPolygon(s);i[s][n]=l?Gqe(l):null}return t.reflow(e.modified()).modifies(n)}});var V5=Math.PI/180;function Yqe(e,t,n,i){if(!t.sprite){var r=e.context,o=e.ratio;r.clearRect(0,0,2048/o,2048/o);var u,d,f,h,y,s=0,a=0,l=0,c=n.length;for(--i;++i<c;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,u=r.measureText(t.text+"m").width*o,f=t.size<<1,t.rotate){var b=Math.sin(t.rotate*V5),C=Math.cos(t.rotate*V5),k=u*C,O=u*b,I=f*C,z=f*b;u=Math.max(Math.abs(k+z),Math.abs(k-z))+31>>5<<5,f=~~Math.max(Math.abs(O+I),Math.abs(O-I))}else u=u+31>>5<<5;if(f>l&&(l=f),s+u>=2048&&(s=0,a+=l,l=0),a+f>=2048)break;r.translate((s+(u>>1))/o,(a+(f>>1))/o),t.rotate&&r.rotate(t.rotate*V5),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=u,t.height=f,t.xoff=s,t.yoff=a,t.x1=u>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=u}for(var q=r.getImageData(0,0,2048/o,2048/o).data,ne=[];--i>=0;)if((t=n[i]).hasText){for(d=(u=t.width)>>5,f=t.y1-t.y0,h=0;h<f*d;h++)ne[h]=0;if(null==(s=t.xoff))return;a=t.yoff;var K=0,le=-1;for(y=0;y<f;y++){for(h=0;h<u;h++){var ge=q[2048*(a+y)+(s+h)<<2]?1<<31-h%32:0;ne[d*y+(h>>5)]|=ge,K|=ge}K?le=y:(t.y0++,f--,y--,a++)}t.y1=t.y0+le,t.sprite=ne.slice(0,(t.y1-t.y0)*d)}}}function Xqe(e,t,n){for(var u,i=e.sprite,r=e.width>>5,o=e.x-(r<<4),s=127&o,a=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*(n>>=5)+(o>>5),d=0;d<l;d++){u=0;for(var f=0;f<=r;f++)if((u<<a|(f<r?(u=i[d*r+f])>>>s:0))&t[c+f])return!0;c+=n}return!1}function Kqe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function Zqe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Ile(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Xg(e){return"function"==typeof e?e:function(){return e}}var eYe={archimedean:Ile,rectangular:function Qqe(e){var n=4*e[0]/e[1],i=0,r=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:i+=n;break;case 1:r+=4;break;case 2:i-=n;break;default:r-=4}return[i,r]}}};const Fle=["x","y","font","fontSize","fontStyle","fontWeight","angle"],tYe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function U5(e){Qe.call(this,function qqe(){var t,n,i,r,o,s,a,e=[256,256],l=Ile,c=[],u=Math.random,d={};function h(y,b,C){for(var K,le,me,k=b.x,O=b.y,I=Math.sqrt(e[0]*e[0]+e[1]*e[1]),z=l(e),q=u()<.5?1:-1,ne=-q;(K=z(ne+=q))&&(le=~~K[0],me=~~K[1],!(Math.min(Math.abs(le),Math.abs(me))>=I));)if(b.x=k+le,b.y=O+me,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!C||!Xqe(b,y,e[0]))&&(!C||Zqe(b,C))){for(var ce,ge=b.sprite,ye=b.width>>5,Se=e[0]>>5,ve=b.x-(ye<<4),Z=127&ve,ae=32-Z,oe=b.y1-b.y0,de=(b.y+b.y0)*Se+(ve>>5),he=0;he<oe;he++){ce=0;for(var pe=0;pe<=ye;pe++)y[de+pe]|=ce<<ae|(pe<ye?(ce=ge[he*ye+pe])>>>Z:0);de+=Se}return b.sprite=null,!0}return!1}return d.layout=function(){for(var y=function f(y){y.width=y.height=1;var b=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=2048/b,y.height=2048/b;var C=y.getContext("2d");return C.fillStyle=C.strokeStyle="red",C.textAlign="center",{context:C,ratio:b}}(xh()),b=function Jqe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),C=null,k=c.length,O=-1,I=[],z=c.map(ne=>({text:t(ne),font:n(ne),style:r(ne),weight:o(ne),rotate:s(ne),size:~~(i(ne)+1e-14),padding:a(ne),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:ne})).sort((ne,K)=>K.size-ne.size);++O<k;){var q=z[O];q.x=e[0]*(u()+.5)>>1,q.y=e[1]*(u()+.5)>>1,Yqe(y,q,z,O),q.hasText&&h(b,q,C)&&(I.push(q),C?Kqe(C,q):C=[{x:q.x+q.x0,y:q.y+q.y0},{x:q.x+q.x1,y:q.y+q.y1}],q.x-=e[0]>>1,q.y-=e[1]>>1)}return I},d.words=function(y){return arguments.length?(c=y,d):c},d.size=function(y){return arguments.length?(e=[+y[0],+y[1]],d):e},d.font=function(y){return arguments.length?(n=Xg(y),d):n},d.fontStyle=function(y){return arguments.length?(r=Xg(y),d):r},d.fontWeight=function(y){return arguments.length?(o=Xg(y),d):o},d.rotate=function(y){return arguments.length?(s=Xg(y),d):s},d.text=function(y){return arguments.length?(t=Xg(y),d):t},d.spiral=function(y){return arguments.length?(l=eYe[y]||y,d):l},d.fontSize=function(y){return arguments.length?(i=Xg(y),d):i},d.padding=function(y){return arguments.length?(a=Xg(y),d):a},d.random=function(y){return arguments.length?(u=y,d):u},d}(),e)}U5.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Fle}]},St(U5,Qe,{transform(e,t){e.size&&(!e.size[0]||!e.size[1])&&nt("Wordcloud size dimensions must be non-zero.");const i=e.modified();if(!(i||t.changed(t.ADD_REM)||tYe.some(function n(y){const b=e[y];return Yn(b)&&t.modified(b.fields)})))return;const r=t.materialize(t.SOURCE).source,o=this.value,s=e.as||Fle;let l,a=e.fontSize||14;if(Yn(a)?l=e.fontSizeRange:a=ws(a),l){const y=a,b=ki("sqrt")().domain(Eu(r,y)).range(l);a=C=>b(y(C))}r.forEach(y=>{y[s[0]]=NaN,y[s[1]]=NaN,y[s[3]]=0});const c=o.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Nl).layout(),u=o.size(),d=u[0]>>1,f=u[1]>>1,h=c.length;for(let b,C,y=0;y<h;++y)b=c[y],C=b.datum,C[s[0]]=b.x+d,C[s[1]]=b.y+f,C[s[2]]=b.font,C[s[3]]=b.size,C[s[4]]=b.style,C[s[5]]=b.weight,C[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const iYe=e=>new Uint8Array(e),rYe=e=>new Uint16Array(e),f1=e=>new Uint32Array(e);function NO(e,t,n){const i=(t<257?iYe:t<65537?rYe:f1)(e);return n&&i.set(n),i}function Lle(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,o){const s=this,a=s.bisect(s.range,r.value),l=r.index,c=a[0],u=a[1],d=l.length;let f;for(f=0;f<c;++f)o[l[f]]|=i;for(f=u;f<d;++f)o[l[f]]|=i;return s}}}function Nle(){let e=f1(0),t=[],n=0;return{insert:function i(a,l,c){if(!l.length)return[];const u=n,d=l.length,f=f1(d);let y,b,C,h=Array(d);for(C=0;C<d;++C)h[C]=a(l[C]),f[C]=C;if(h=function aYe(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],o=e[i];return r<o?-1:r>o?1:0}),function nYe(e,t){return Array.from(t,n=>e[n])}(e,t)}(h,f),u)y=t,b=e,t=Array(u+d),e=f1(u+d),function lYe(e,t,n,i,r,o,s,a,l){let d,c=0,u=0;for(d=0;c<i&&u<s;++d)t[c]<r[u]?(a[d]=t[c],l[d]=n[c++]):(a[d]=r[u],l[d]=o[u++]+e);for(;c<i;++c,++d)a[d]=t[c],l[d]=n[c];for(;u<s;++u,++d)a[d]=r[u],l[d]=o[u]+e}(c,y,b,u,h,f,d,t,e);else{if(c>0)for(C=0;C<d;++C)f[C]+=c;t=h,e=f}return n=u+d,{index:f,value:h}},remove:function r(a,l){const c=n;let u,d,f;for(d=0;!l[e[d]]&&d<c;++d);for(f=d;d<c;++d)l[u=e[d]]||(e[f]=u,t[f]=t[d],++f);n=c-a},bisect:function s(a,l){let c;return l?c=l.length:(l=t,c=n),[wVe(l,a[0],0,c),Yk(l,a[1],0,c)]},reindex:function o(a){for(let l=0,c=n;l<c;++l)e[l]=a[e[l]]},index:()=>e,size:()=>n}}function j5(e){Qe.call(this,function oYe(){let e=8,t=[],n=f1(0),i=NO(0,e),r=NO(0,e);return{data:()=>t,seen:()=>n=function sYe(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length),add(o){for(let c,s=0,a=t.length,l=o.length;s<l;++s)c=o[s],c._index=a++,t.push(c)},remove(o,s){const a=t.length,l=Array(a-o),c=t;let u,d,f;for(d=0;!s[d]&&d<a;++d)l[d]=t[d],c[d]=d;for(f=d;d<a;++d)u=t[d],s[d]?c[d]=-1:(c[d]=f,i[f]=i[d],r[f]=r[d],l[f]=u,u._index=f++),i[d]=0;return t=l,c},size:()=>t.length,curr:()=>i,prev:()=>r,reset:o=>r[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){i[o]|=s},clear(o,s){i[o]&=~s},resize(o,s){(o>i.length||s>e)&&(e=Math.max(s,e),i=NO(o,e,i),r=NO(o,e))}}}(),e),this._indices=null,this._dims=null}function W5(e){Qe.call(this,null,e)}j5.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},St(j5,Qe,{transform(e,t){return this._dims?e.modified("fields")||e.fields.some(i=>t.modified(i.fields))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},o=this._dims=[],s=i.length;let l,c,a=0;for(;a<s;++a)l=n[a].fname,c=r[l]||(r[l]=Nle()),o.push(Lle(c,a,i[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),c=a.prev(),u=a.all(),d=n.rem=n.add,f=n.mod,h=r.length,y={};let b,C,k,O,I,z,q,ne,K;if(c.set(l),t.rem.length&&(I=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(z={},O=t.mod,q=0,ne=O.length;q<ne;++q)z[O[q]._index]=1;for(q=0;q<h;++q)K=i[q],(!s[q]||e.modified("fields",q)||t.modified(K.fields))&&(k=K.fname,(b=y[k])||(o[k]=C=Nle(),y[k]=b=C.insert(K,t.source,0)),s[q]=Lle(C,q,r[q]).onAdd(b,l));for(q=0,ne=a.data().length;q<ne;++q)I[q]||(c[q]!==l[q]?d.push(q):z[q]&&l[q]!==u&&f.push(q));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,o=this._dims,s=this._indices,a=e.fields,l={},c=n.add,u=r.size()+i.length,d=o.length;let h,y,b,f=r.size();r.resize(u,d),r.add(i);const C=r.curr(),k=r.prev(),O=r.all();for(h=0;h<d;++h)y=a[h].fname,b=l[y]||(l[y]=s[y].insert(a[h],i,f)),o[h].onAdd(b,C);for(;f<u;++f)k[f]=O,C[f]!==O&&c.push(f)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),o=i.all(),s=e.mod;let a,l,c;for(a=0,l=s.length;a<l;++a)c=s[a]._index,r[c]!==o&&n.push(c)},remove(e,t,n){const i=this._indices,r=this.value,o=r.curr(),s=r.prev(),a=r.all(),l={},c=n.rem,u=t.rem;let d,f,h,y;for(d=0,f=u.length;d<f;++d)h=u[d]._index,l[h]=1,s[h]=y=o[h],o[h]=a,y!==a&&c.push(h);for(h in i)i[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const o=r.remove(t,n);for(const s in i)i[s].reindex(o)})},update(e,t,n){const i=this._dims,r=e.query,o=t.stamp,s=i.length;let l,c,a=0;for(n.filters=0,c=0;c<s;++c)e.modified("query",c)&&(l=c,++a);if(1===a)a=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(c=0,a=0;c<s;++c)!e.modified("query",c)||(a|=i[c].one,this.incrementAll(i[c],r[c],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,i){const r=this.value,o=r.seen(),s=r.curr(),a=r.prev(),l=e.index(),c=e.bisect(e.range),u=e.bisect(t),d=u[0],f=u[1],h=c[0],y=c[1],b=e.one;let C,k,O;if(d<h)for(C=d,k=Math.min(h,f);C<k;++C)O=l[C],o[O]!==n&&(a[O]=s[O],o[O]=n,i.push(O)),s[O]^=b;else if(d>h)for(C=h,k=Math.min(d,y);C<k;++C)O=l[C],o[O]!==n&&(a[O]=s[O],o[O]=n,i.push(O)),s[O]^=b;if(f>y)for(C=Math.max(d,y),k=f;C<k;++C)O=l[C],o[O]!==n&&(a[O]=s[O],o[O]=n,i.push(O)),s[O]^=b;else if(f<y)for(C=Math.max(h,f),k=y;C<k;++C)O=l[C],o[O]!==n&&(a[O]=s[O],o[O]=n,i.push(O)),s[O]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const o=this.value.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),c=l[0],u=l[1],d=a[0],f=a[1],h=e.one;let y,b,C;if(c<d)for(y=c,b=Math.min(d,u);y<b;++y)C=s[y],o[C]^=h,n.push(C);else if(c>d)for(y=d,b=Math.min(c,f);y<b;++y)C=s[y],o[C]^=h,i.push(C);if(u>f)for(y=Math.max(c,f),b=u;y<b;++y)C=s[y],o[C]^=h,n.push(C);else if(u<f)for(y=Math.max(d,u),b=f;y<b;++y)C=s[y],o[C]^=h,i.push(C);e.range=t.slice()}}),W5.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},St(W5,Qe,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(0==(r&n))return t.StopPropagation;const o=t.fork(t.ALL),s=i.data(),a=i.curr(),l=i.prev(),c=u=>a[u]&n?null:s[u];return o.filter(o.MOD,c),r&r-1?(o.filter(o.ADD,u=>{const d=a[u]&n;return!d&&d^l[u]&n?s[u]:null}),o.filter(o.REM,u=>{const d=a[u]&n;return!d||d^d^l[u]&n?null:s[u]})):(o.filter(o.ADD,c),o.filter(o.REM,u=>(a[u]&n)===r?s[u]:null)),o.filter(o.SOURCE,u=>c(u._index))}});const Kg="Literal",$le="CallExpression";function Rc(e){this.type=e}var ju,cn,tt,Ss,Ki;Rc.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=function vYe(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case $le:return[e.callee].concat(e.arguments);case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];default:return[]}}(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1},(ju={})[1]="Boolean",ju[2]="<end>",ju[3]="Identifier",ju[4]="Keyword",ju[5]="Null",ju[6]="Numeric",ju[7]="Punctuator",ju[8]="String",ju[9]="RegularExpression";var Ble="Identifier",To="Unexpected token %0",G5="Invalid regular expression",q5="Invalid regular expression: missing /",zle="Octal literals are not allowed in strict mode.",is="ILLEGAL",g1="Disabled.",NYe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),$Ye=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function zO(e,t){if(!e)throw new Error("ASSERT: "+t)}function cf(e){return e>=48&&e<=57}function Y5(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function m1(e){return"01234567".indexOf(e)>=0}function BYe(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function _1(e){return 10===e||13===e||8232===e||8233===e}function y1(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&NYe.test(String.fromCharCode(e))}function HO(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&$Ye.test(String.fromCharCode(e))}const zYe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Hle(){for(;tt<Ss;){const e=cn.charCodeAt(tt);if(!BYe(e)&&!_1(e))break;++tt}}function X5(e){var t,n,i,r=0;for(n="u"===e?4:2,t=0;t<n;++t)tt<Ss&&Y5(cn[tt])?(i=cn[tt++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):Ai({},To,is);return String.fromCharCode(r)}function HYe(){var e,t;for(t=0,"}"===(e=cn[tt])&&Ai({},To,is);tt<Ss&&Y5(e=cn[tt++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Ai({},To,is),t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}function Vle(){var e,t;for(e=cn.charCodeAt(tt++),t=String.fromCharCode(e),92===e&&(117!==cn.charCodeAt(tt)&&Ai({},To,is),++tt,(!(e=X5("u"))||"\\"===e||!y1(e.charCodeAt(0)))&&Ai({},To,is),t=e);tt<Ss&&HO(e=cn.charCodeAt(tt));)++tt,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==cn.charCodeAt(tt)&&Ai({},To,is),++tt,(!(e=X5("u"))||"\\"===e||!HO(e.charCodeAt(0)))&&Ai({},To,is),t+=e);return t}function K5(){var n,r,o,s,e=tt,t=cn.charCodeAt(tt),i=cn[tt];switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++tt,{type:7,value:String.fromCharCode(t),start:e,end:tt};default:if(61===(n=cn.charCodeAt(tt+1)))switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return tt+=2,{type:7,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:tt};case 33:case 61:return 61===cn.charCodeAt(tt+=2)&&++tt,{type:7,value:cn.slice(e,tt),start:e,end:tt}}}return">>>="===(s=cn.substr(tt,4))?{type:7,value:s,start:e,end:tt+=4}:">>>"===(o=s.substr(0,3))||"<<="===o||">>="===o?{type:7,value:o,start:e,end:tt+=3}:i===(r=o.substr(0,2))[1]&&"+-<>&|".indexOf(i)>=0||"=>"===r?{type:7,value:r,start:e,end:tt+=2}:("//"===r&&Ai({},To,is),"<>=!+-*%&|^/".indexOf(i)>=0?{type:7,value:i,start:e,end:++tt}:void Ai({},To,is))}function Ule(){var e,t,n;if(zO(cf((n=cn[tt]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=tt,e="","."!==n){if(e=cn[tt++],n=cn[tt],"0"===e){if("x"===n||"X"===n)return++tt,function jYe(e){let t="";for(;tt<Ss&&Y5(cn[tt]);)t+=cn[tt++];return 0===t.length&&Ai({},To,is),y1(cn.charCodeAt(tt))&&Ai({},To,is),{type:6,value:parseInt("0x"+t,16),start:e,end:tt}}(t);if(m1(n))return function WYe(e){let t="0"+cn[tt++];for(;tt<Ss&&m1(cn[tt]);)t+=cn[tt++];return(y1(cn.charCodeAt(tt))||cf(cn.charCodeAt(tt)))&&Ai({},To,is),{type:6,value:parseInt(t,8),octal:!0,start:e,end:tt}}(t);n&&cf(n.charCodeAt(0))&&Ai({},To,is)}for(;cf(cn.charCodeAt(tt));)e+=cn[tt++];n=cn[tt]}if("."===n){for(e+=cn[tt++];cf(cn.charCodeAt(tt));)e+=cn[tt++];n=cn[tt]}if("e"===n||"E"===n)if(e+=cn[tt++],("+"===(n=cn[tt])||"-"===n)&&(e+=cn[tt++]),cf(cn.charCodeAt(tt)))for(;cf(cn.charCodeAt(tt));)e+=cn[tt++];else Ai({},To,is);return y1(cn.charCodeAt(tt))&&Ai({},To,is),{type:6,value:parseFloat(e),start:t,end:tt}}function jle(){if(Hle(),tt>=Ss)return{type:2,start:tt,end:tt};const e=cn.charCodeAt(tt);return y1(e)?function UYe(){var e,t;return e=tt,t=92===cn.charCodeAt(tt)?Vle():function VYe(){var e,t;for(e=tt++;tt<Ss;){if(92===(t=cn.charCodeAt(tt)))return tt=e,Vle();if(!HO(t))break;++tt}return cn.slice(e,tt)}(),{type:1===t.length?3:zYe.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:tt}}():40===e||41===e||59===e?K5():39===e||34===e?function GYe(){var t,n,i,r,e="",o=!1;for(zO("'"===(t=cn[tt])||'"'===t,"String literal must starts with a quote"),n=tt,++tt;tt<Ss;){if((i=cn[tt++])===t){t="";break}if("\\"===i)if((i=cn[tt++])&&_1(i.charCodeAt(0)))"\r"===i&&"\n"===cn[tt]&&++tt;else switch(i){case"u":case"x":"{"===cn[tt]?(++tt,e+=HYe()):e+=X5(i);break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:m1(i)?(0!==(r="01234567".indexOf(i))&&(o=!0),tt<Ss&&m1(cn[tt])&&(o=!0,r=8*r+"01234567".indexOf(cn[tt++]),"0123".indexOf(i)>=0&&tt<Ss&&m1(cn[tt])&&(r=8*r+"01234567".indexOf(cn[tt++]))),e+=String.fromCharCode(r)):e+=i}else{if(_1(i.charCodeAt(0)))break;e+=i}}return""!==t&&Ai({},To,is),{type:8,value:e,octal:o,start:n,end:tt}}():46===e?cf(cn.charCodeAt(tt+1))?Ule():K5():cf(e)?Ule():K5()}function ka(){const e=Ki;return tt=e.end,Ki=jle(),tt=e.end,e}function Wle(){const e=tt;Ki=jle(),tt=e}function Gle(e,t,n){const i=new Rc("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return i.operator=e,i.left=t,i.right=n,i}function JYe(e,t){const n=new Rc("CallExpression");return n.callee=e,n.arguments=t,n}function Z5(e){const t=new Rc(Ble);return t.name=e,t}function v1(e){const t=new Rc("Literal");return t.value=e.value,t.raw=cn.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function qle(e,t,n){const i=new Rc("MemberExpression");return i.computed="["===e,i.object=t,i.property=n,i.computed||(n.member=!0),i}function Yle(e,t,n){const i=new Rc("Property");return i.key=t,i.value=n,i.kind=e,i}function Ai(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(o,s)=>(zO(s<i.length,"Message reference must be in range"),i[s]));throw(n=new Error(r)).index=tt,n.description=r,n}function VO(e){2===e.type&&Ai(e,"Unexpected end of input"),6===e.type&&Ai(e,"Unexpected number"),8===e.type&&Ai(e,"Unexpected string"),3===e.type&&Ai(e,"Unexpected identifier"),4===e.type&&Ai(e,"Unexpected reserved word"),Ai(e,To,e.value)}function ks(e){const t=ka();(7!==t.type||t.value!==e)&&VO(t)}function yr(e){return 7===Ki.type&&Ki.value===e}function Q5(e){return 4===Ki.type&&Ki.value===e}function Xle(){tt=Ki.start;const e=ka();return 8===e.type||6===e.type?(e.octal&&Ai(e,zle),v1(e)):Z5(e.value)}function rXe(){var e,t,n;return tt=Ki.start,3===(e=Ki).type?(n=Xle(),ks(":"),Yle("init",n,Jg())):2!==e.type&&7!==e.type?(t=Xle(),ks(":"),Yle("init",t,Jg())):void VO(e)}const aXe={if:1};function lXe(){var e,t,n;if(yr("("))return function sXe(){ks("(");const e=J5();return ks(")"),e}();if(yr("["))return function iXe(){const e=[];for(tt=Ki.start,ks("[");!yr("]");)yr(",")?(ka(),e.push(null)):(e.push(Jg()),yr("]")||ks(","));return ka(),function QYe(e){const t=new Rc("ArrayExpression");return t.elements=e,t}(e)}();if(yr("{"))return function oXe(){var t,i,e=[],r={},o=String;for(tt=Ki.start,ks("{");!yr("}");)i="$"+((t=rXe()).key.type===Ble?t.key.name:o(t.key.value)),Object.prototype.hasOwnProperty.call(r,i)?Ai({},"Duplicate data property in object literal not allowed in strict mode"):r[i]=!0,e.push(t),yr("}")||ks(",");return ks("}"),function tXe(e){const t=new Rc("ObjectExpression");return t.properties=e,t}(e)}();if(tt=Ki.start,3===(e=Ki.type)||aXe[Ki.value])n=Z5(ka().value);else if(8===e||6===e)Ki.octal&&Ai(Ki,zle),n=v1(ka());else{if(4===e)throw new Error(g1);1===e?((t=ka()).value="true"===t.value,n=v1(t)):5===e?((t=ka()).value=null,n=v1(t)):yr("/")||yr("/=")?(n=v1(function KYe(){var e,t,n,i;return Ki=null,Hle(),e=tt,t=function YYe(){var e,t,n,i;for(zO("/"===(e=cn[tt]),"Regular expression literal must start with a slash"),t=cn[tt++],n=!1,i=!1;tt<Ss;)if(t+=e=cn[tt++],"\\"===e)_1((e=cn[tt++]).charCodeAt(0))&&Ai({},q5),t+=e;else if(_1(e.charCodeAt(0)))Ai({},q5);else if(n)"]"===e&&(n=!1);else{if("/"===e){i=!0;break}"["===e&&(n=!0)}return i||Ai({},q5),{value:t.substr(1,t.length-2),literal:t}}(),n=function XYe(){var e,t,n;for(t="",n="";tt<Ss&&HO((e=cn[tt]).charCodeAt(0));)++tt,"\\"===e&&tt<Ss?Ai({},To,is):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ai({},G5,n),{value:n,literal:t}}(),i=function qYe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Ai({},G5)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ai({},G5)}try{return new RegExp(e,t)}catch{return null}}(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:tt}}()),Wle()):VO(ka())}return n}function cXe(){const e=[];if(ks("("),!yr(")"))for(;tt<Ss&&(e.push(Jg()),!yr(")"));)ks(",");return ks(")"),e}function fXe(){ks("[");const e=J5();return ks("]"),e}function Kle(){const e=function hXe(){var e;for(e=lXe();;)if(yr("."))e=qle(".",e,(ks("."),function uXe(){tt=Ki.start;const e=ka();return function ZYe(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||VO(e),Z5(e.value)}()));else if(yr("("))e=JYe(e,cXe());else{if(!yr("["))break;e=qle("[",e,fXe())}return e}();if(7===Ki.type&&(yr("++")||yr("--")))throw new Error(g1);return e}function UO(){var e,t;if(7!==Ki.type&&4!==Ki.type)t=Kle();else{if(yr("++")||yr("--"))throw new Error(g1);if(yr("+")||yr("-")||yr("~")||yr("!"))e=ka(),t=UO(),t=function nXe(e,t){const n=new Rc("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(Q5("delete")||Q5("void")||Q5("typeof"))throw new Error(g1);t=Kle()}}return t}function Zle(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Jg(){var e,t;return e=function pXe(){var e,t,n,i,r,o,s,a,l,c;if(e=Ki,l=UO(),0===(r=Zle(i=Ki)))return l;for(i.prec=r,ka(),t=[e,Ki],o=[l,i,s=UO()];(r=Zle(Ki))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=Gle(a,l,s),o.push(n);(i=ka()).prec=r,o.push(i),t.push(Ki),n=UO(),o.push(n)}for(n=o[c=o.length-1],t.pop();c>1;)t.pop(),n=Gle(o[c-1].value,o[c-2],n),c-=2;return n}(),yr("?")&&(ka(),t=Jg(),ks(":"),e=function eXe(e,t,n){const i=new Rc("ConditionalExpression");return i.test=e,i.consequent=t,i.alternate=n,i}(e,t,Jg())),e}function J5(){const e=Jg();if(yr(","))throw new Error(g1);return e}function e4(e){tt=0,Ss=(cn=e).length,Ki=null,Wle();const t=J5();if(2!==Ki.type)throw new Error("Unexpect token after expression.");return t}var Qle={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Jle(e){function n(s,a,l){return c=>function t(s,a,l,c){let u=e(a[0]);return l&&(u=l+"("+u+")",0===l.lastIndexOf("new ",0)&&(u="("+u+")")),u+"."+s+(c<0?"":0===c?"()":"("+a.slice(1).map(e).join(",")+")")}(s,c,a,l)}const i="new Date",r="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&nt("Missing arguments to clamp function."),s.length>3&&nt("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&nt("Missing arguments to if function."),s.length>3&&nt("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function ece(e){const t=(e=e||{}).allowed?bc(e.allowed):{},n=e.forbidden?bc(e.forbidden):{},i=e.constants||Qle,r=(e.functions||Jle)(d),o=e.globalvar,s=e.fieldvar,a=Yn(o)?o:y=>`${o}["${y}"]`;let l={},c={},u=0;function d(y){if(zt(y))return y;const b=f[y.type];return null==b&&nt("Unsupported type: "+y.type),b(y)}const f={Literal:y=>y.raw,Identifier:y=>{const b=y.name;return u>0?b:bn(n,b)?nt("Illegal identifier: "+b):bn(i,b)?i[b]:bn(t,b)?b:(l[b]=1,a(b))},MemberExpression:y=>{const b=!y.computed,C=d(y.object);b&&(u+=1);const k=d(y.property);return C===s&&(c[function gXe(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(k)]=1),b&&(u-=1),C+(b?"."+k:"["+k+"]")},CallExpression:y=>{"Identifier"!==y.callee.type&&nt("Illegal callee type: "+y.callee.type);const b=y.callee.name,C=y.arguments,k=bn(r,b)&&r[b];return k||nt("Unrecognized function: "+b),Yn(k)?k(C):k+"("+C.map(d).join(",")+")"},ArrayExpression:y=>"["+y.elements.map(d).join(",")+"]",BinaryExpression:y=>"("+d(y.left)+" "+y.operator+" "+d(y.right)+")",UnaryExpression:y=>"("+y.operator+d(y.argument)+")",ConditionalExpression:y=>"("+d(y.test)+"?"+d(y.consequent)+":"+d(y.alternate)+")",LogicalExpression:y=>"("+d(y.left)+y.operator+d(y.right)+")",ObjectExpression:y=>"{"+y.properties.map(d).join(",")+"}",Property:y=>{u+=1;const b=d(y.key);return u-=1,b+":"+d(y.value)}};function h(y){const b={code:d(y),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},b}return h.functions=r,h.constants=i,h}var tce,nce,t4,n4,r4,jO=new ts,WO=new ts,Wu={point:ns,lineStart:ns,lineEnd:ns,polygonStart:function(){jO=new ts,Wu.lineStart=mXe,Wu.lineEnd=_Xe},polygonEnd:function(){var e=+jO;WO.add(e<0?Zs+e:e),this.lineStart=this.lineEnd=this.point=ns},sphere:function(){WO.add(Zs)}};function mXe(){Wu.point=yXe}function _Xe(){ice(tce,nce)}function yXe(e,t){Wu.point=ice,tce=e,nce=t,t4=e*=ti,n4=Sn(t=(t*=ti)/2+WA),r4=_n(t)}function ice(e,t){var n=(e*=ti)-t4,i=n>=0?1:-1,r=i*n,o=Sn(t=(t*=ti)/2+WA),s=_n(t),a=r4*s,l=n4*o+a*Sn(r),c=a*i*_n(r);jO.add(Vl(c,l)),t4=e,n4=o,r4=s}var Rr,Aa,Ur,ul,em,rce,oce,Rv,b1,Zh,uf,df={point:o4,lineStart:lce,lineEnd:cce,polygonStart:function(){df.point=uce,df.lineStart=bXe,df.lineEnd=wXe,b1=new ts,Wu.polygonStart()},polygonEnd:function(){Wu.polygonEnd(),df.point=o4,df.lineStart=lce,df.lineEnd=cce,jO<0?(Rr=-(Ur=180),Aa=-(ul=90)):b1>xn?ul=90:b1<-xn&&(Aa=-90),uf[0]=Rr,uf[1]=Ur},sphere:function(){Rr=-(Ur=180),Aa=-(ul=90)}};function o4(e,t){Zh.push(uf=[Rr=e,Ur=e]),t<Aa&&(Aa=t),t>ul&&(ul=t)}function sce(e,t){var n=$g([e*ti,t*ti]);if(Rv){var i=yv(Rv,n),o=yv([i[1],-i[0],0],i);sO(o),o=iO(o);var c,s=e-em,a=s>0?1:-1,l=o[0]*Xr*a,u=gi(s)>180;u^(a*em<l&&l<a*e)?(c=o[1]*Xr)>ul&&(ul=c):u^(a*em<(l=(l+360)%360-180)&&l<a*e)?(c=-o[1]*Xr)<Aa&&(Aa=c):(t<Aa&&(Aa=t),t>ul&&(ul=t)),u?e<em?dl(Rr,e)>dl(Rr,Ur)&&(Ur=e):dl(e,Ur)>dl(Rr,Ur)&&(Rr=e):Ur>=Rr?(e<Rr&&(Rr=e),e>Ur&&(Ur=e)):e>em?dl(Rr,e)>dl(Rr,Ur)&&(Ur=e):dl(e,Ur)>dl(Rr,Ur)&&(Rr=e)}else Zh.push(uf=[Rr=e,Ur=e]);t<Aa&&(Aa=t),t>ul&&(ul=t),Rv=n,em=e}function lce(){df.point=sce}function cce(){uf[0]=Rr,uf[1]=Ur,df.point=o4,Rv=null}function uce(e,t){if(Rv){var n=e-em;b1.add(gi(n)>180?n+(n>0?360:-360):n)}else rce=e,oce=t;Wu.point(e,t),sce(e,t)}function bXe(){Wu.lineStart()}function wXe(){uce(rce,oce),Wu.lineEnd(),gi(b1)>xn&&(Rr=-(Ur=180)),uf[0]=Rr,uf[1]=Ur,Rv=null}function dl(e,t){return(t-=e)<0?t+360:t}function CXe(e,t){return e[0]-t[0]}function dce(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var w1,GO,qO,YO,XO,KO,ZO,QO,s4,a4,l4,fce,hce,ia,ra,oa,Ic={sphere:ns,point:c4,lineStart:pce,lineEnd:gce,polygonStart:function(){Ic.lineStart=SXe,Ic.lineEnd=kXe},polygonEnd:function(){Ic.lineStart=pce,Ic.lineEnd=gce}};function c4(e,t){e*=ti;var n=Sn(t*=ti);C1(n*Sn(e),n*_n(e),_n(t))}function C1(e,t,n){++w1,qO+=(e-qO)/w1,YO+=(t-YO)/w1,XO+=(n-XO)/w1}function pce(){Ic.point=xXe}function xXe(e,t){e*=ti;var n=Sn(t*=ti);ia=n*Sn(e),ra=n*_n(e),oa=_n(t),Ic.point=EXe,C1(ia,ra,oa)}function EXe(e,t){e*=ti;var n=Sn(t*=ti),i=n*Sn(e),r=n*_n(e),o=_n(t),s=Vl(Qs((s=ra*o-oa*r)*s+(s=oa*i-ia*o)*s+(s=ia*r-ra*i)*s),ia*i+ra*r+oa*o);GO+=s,KO+=s*(ia+(ia=i)),ZO+=s*(ra+(ra=r)),QO+=s*(oa+(oa=o)),C1(ia,ra,oa)}function gce(){Ic.point=c4}function SXe(){Ic.point=AXe}function kXe(){mce(fce,hce),Ic.point=c4}function AXe(e,t){fce=e,hce=t,e*=ti,t*=ti,Ic.point=mce;var n=Sn(t);ia=n*Sn(e),ra=n*_n(e),oa=_n(t),C1(ia,ra,oa)}function mce(e,t){e*=ti;var n=Sn(t*=ti),i=n*Sn(e),r=n*_n(e),o=_n(t),s=ra*o-oa*r,a=oa*i-ia*o,l=ia*r-ra*i,c=qB(s,a,l),u=Ma(c),d=c&&-u/c;s4.add(d*s),a4.add(d*a),l4.add(d*l),GO+=u,KO+=u*(ia+(ia=i)),ZO+=u*(ra+(ra=r)),QO+=u*(oa+(oa=o)),C1(ia,ra,oa)}function u4(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function DXe(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function PXe(){return 0}function FXe(e){return e instanceof Qk?e:new Qk(e)}const d4="intersect",Gu="_vgsid_",M1=_a(Gu),JO="index:unit";function vce(e,t){for(var s,a,n=t.fields,i=t.values,r=n.length,o=0;o<r;++o)if((a=n[o]).getter=_a.getter||_a(a.field),gh(s=a.getter(e))&&(s=bs(s)),gh(i[o])&&(i[o]=bs(i[o])),gh(i[o][0])&&(i[o]=i[o].map(bs)),"E"===a.type){if(ot(i[o])?i[o].indexOf(s)<0:s!==i[o])return!1}else if("R"===a.type){if(!By(s,i[o]))return!1}else if("R-RE"===a.type){if(!By(s,i[o],!0,!1))return!1}else if("R-E"===a.type){if(!By(s,i[o],!1,!1))return!1}else if("R-LE"===a.type&&!By(s,i[o],!1,!0))return!1;return!0}const bce=function TXe(e){let t,n,i;function r(a,l,c=0,u=a.length){if(c<u){if(0!==t(l,l))return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}return 2!==e.length?(t=u4,n=(a,l)=>u4(e(a),l),i=(a,l)=>e(a)-l):(t=e===u4||e===DXe?e:PXe,n=e,i=e),{left:r,center:function s(a,l,c=0,u=a.length){const d=r(a,l,c,u-1);return d>c&&i(a[d-1],l)>-i(a[d],l)?d-1:d},right:function o(a,l,c=0,u=a.length){if(c<u){if(0!==t(l,l))return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}}}(M1),WXe=bce.left,GXe=bce.right;var f4={[`${Gu}_union`]:function RXe(...e){const t=new Qk;for(const n of e)for(const i of n)t.add(i);return t},[`${Gu}_intersect`]:function IXe(e,...t){e=new Qk(e),t=t.map(FXe);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e},E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=bs(t[0]),i=bs(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=bs(t[0]),i=bs(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};function h4(e,t,n,i){t[0].type!==Kg&&nt("First argument to selection functions must be a string literal.");const r=t[0].value,s="unit",a="@"+s,l=":"+r;(t.length>=2&&pi(t).value)===d4&&!bn(i,a)&&(i[a]=n.getData(r).indataRef(n,s)),bn(i,l)||(i[l]=n.getData(r).tuplesRef())}function wce(e){const t=this.context.data[e];return t?t.values.value:[]}const x1=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},tKe=x1("format"),Cce=x1("timeFormat"),nKe=x1("utcFormat"),iKe=x1("timeParse"),rKe=x1("utcParse"),eD=new Date(2e3,0,1);function tD(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(eD.setYear(2e3),eD.setMonth(e),eD.setDate(t),Cce.call(this,eD,n)):""}function g4(e,t,n,i){t[0].type!==Kg&&nt("First argument to data functions must be a string literal.");const r=t[0].value,o=":"+r;if(!bn(o,i))try{i[o]=n.getData(r).tuplesRef()}catch{}}function Oa(e,t,n,i){if(t[0].type===Kg)xce(n,i,t[0].value);else for(e in n.scales)xce(n,i,e)}function xce(e,t,n){const i="%"+n;if(!bn(t,i))try{t[i]=e.scaleRef(n)}catch{}}function ff(e,t){if(Yn(e))return e;if(zt(e)){const n=t.scales[e];return n&&function aUe(e){return e&&!0===e[Uie]}(n.value)?n.value:void 0}}function m4(e,t){return function(n,i,r){if(n){const o=ff(n,(r||this).context);return o&&o.path[e](i)}return t(i)}}const hKe=m4("area",function vXe(e){return WO=new ts,rf(e,Wu),2*WO}),pKe=m4("bounds",function MXe(e){var t,n,i,r,o,s,a;if(ul=Ur=-(Rr=Aa=1/0),Zh=[],rf(e,df),n=Zh.length){for(Zh.sort(CXe),t=1,o=[i=Zh[0]];t<n;++t)dce(i,(r=Zh[t])[0])||dce(i,r[1])?(dl(i[0],r[1])>dl(i[0],i[1])&&(i[1]=r[1]),dl(r[0],i[1])>dl(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,t=0,i=o[n=o.length-1];t<=n;i=r,++t)(a=dl(i[1],(r=o[t])[0]))>s&&(s=a,Rr=r[0],Ur=i[1])}return Zh=uf=null,Rr===1/0||Aa===1/0?[[NaN,NaN],[NaN,NaN]]:[[Rr,Aa],[Ur,ul]]}),gKe=m4("centroid",function OXe(e){w1=GO=qO=YO=XO=KO=ZO=QO=0,s4=new ts,a4=new ts,l4=new ts,rf(e,Ic);var t=+s4,n=+a4,i=+l4,r=qB(t,n,i);return r<jA&&(t=KO,n=ZO,i=QO,GO<xn&&(t=qO,n=YO,i=XO),(r=qB(t,n,i))<jA)?[NaN,NaN]:[Vl(n,t)*Xr,Ma(i/r)*Xr]});function _4(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function y4(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function v4(e){const t=Jf(e);return.2126*y4(t.r)+.7152*y4(t.g)+.0722*y4(t.b)}function Ece(e,t){return e===t||e!=e&&t!=t||(ot(e)?!(!ot(t)||e.length!==t.length)&&function CKe(e,t){for(let n=0,i=e.length;n<i;++n)if(!Ece(e[n],t[n]))return!1;return!0}(e,t):!(!jt(e)||!jt(t))&&Sce(e,t))}function Sce(e,t){for(const n in e)if(!Ece(e[n],t[n]))return!1;return!0}function kce(e){return t=>Sce(e,t)}const Ace={};function b4(e){return ot(e)||ArrayBuffer.isView(e)?e:null}function w4(e){return b4(e)||(zt(e)?e:null)}const Oce=e=>e.data;function Dce(e,t){const n=wce.call(t,e);return n.root&&n.root.lookup||{}}const Tce=()=>typeof window<"u"&&window||null;function Pce(e,t,n){if(!e)return[];const[i,r]=e,o=(new oo).set(i[0],i[1],r[0],r[1]);return Soe(n||this.context.dataflow.scenegraph().root,o,function YKe(e){let t=null;if(e){const n=Ht(e.marktype),i=Ht(e.markname);t=r=>(!n.length||n.some(o=>r.marktype===o))&&(!i.length||i.some(o=>r.name===o))}return t}(t))}const E1={random:()=>Nl(),cumulativeNormal:Nk,cumulativeLogNormal:p$,cumulativeUniform:y$,densityNormal:c$,densityLogNormal:h$,densityUniform:_$,quantileNormal:$k,quantileLogNormal:g$,quantileUniform:v$,sampleNormal:Lk,sampleLogNormal:f$,sampleUniform:m$,isArray:ot,isBoolean:ph,isDate:gh,isDefined:e=>void 0!==e,isNumber:Xi,isObject:jt,isRegExp:eee,isString:zt,isTuple:Ak,isValid:e=>null!=e&&e==e,toBoolean:uN,toDate:e=>dN(e),toNumber:bs,toString:fN,indexof:function AKe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return w4(e).indexOf(...n)},join:function kKe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return b4(e).join(...n)},lastindexof:function OKe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return w4(e).lastIndexOf(...n)},replace:function TKe(e,t,n){return Yn(n)&&nt("Function argument passed to replace."),String(e).replace(t,n)},reverse:function PKe(e){return b4(e).slice().reverse()},slice:function DKe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return w4(e).slice(...n)},flush:QJ,lerp:tee,merge:function wKe(){const e=[].slice.call(arguments);return e.unshift({}),Xn(...e)},pad:ree,peek:pi,pluck:function SKe(e,t){const n=Ace[t]||(Ace[t]=_a(t));return ot(e)?e.map(n):n(e)},span:jw,inrange:By,truncate:oee,rgb:Jf,lab:eA,hcl:tA,hsl:HE,luminance:v4,contrast:function bKe(e,t){const n=v4(e),i=v4(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},sequence:nl,format:tKe,utcFormat:nKe,utcParse:rKe,utcOffset:Ree,utcSequence:Lee,timeFormat:Cce,timeParse:iKe,timeOffset:Pee,timeSequence:Fee,timeUnitSpecifier:wee,monthFormat:function oKe(e){return tD.call(this,e,1,"%B")},monthAbbrevFormat:function sKe(e){return tD.call(this,e,1,"%b")},dayFormat:function aKe(e){return tD.call(this,0,2+e,"%A")},dayAbbrevFormat:function lKe(e){return tD.call(this,0,2+e,"%a")},quarter:YJ,utcquarter:XJ,week:Mee,utcweek:See,dayofyear:Cee,utcdayofyear:Eee,warn:function _Ke(){return _4(this.context.dataflow,"warn",arguments)},info:function yKe(){return _4(this.context.dataflow,"info",arguments)},debug:function vKe(){return _4(this.context.dataflow,"debug",arguments)},extent:e=>Eu(e),inScope:function mKe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:Pce,clampRange:KJ,pinchDistance:function xKe(e){const t=e.touches;return Math.hypot(t[0].clientX-t[1].clientX,t[0].clientY-t[1].clientY)},pinchAngle:function EKe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function WKe(){const e=Tce();return e?e.screen:{}},containerSize:function qKe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function GKe(){const e=Tce();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function RKe(e,t,n){return S3(e||0,t||0,n||0)},setdata:function JXe(e,t){const n=this.context.dataflow;return n.pulse(this.context.data[e].input,n.changeset().remove(Il).insert(t)),1},pathShape:function VKe(e){let t=null;return function(n){return n?MC(n,t=t||ov(e)):e}},panLinear:jJ,panLog:WJ,panPow:GJ,panSymlog:qJ,zoomLinear:rN,zoomLog:oN,zoomPow:lk,zoomSymlog:sN,encode:function eKe(e,t,n){if(e){const i=this.context.dataflow;i.pulse(e.mark.source,i.changeset().encode(e,t))}return void 0!==n?n:e},modify:function MKe(e,t,n,i,r,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,c=s.stamp();let d,f,u=a.changes;if(!1===s._trigger||!(l.value.length||t||i))return 0;if((!u||u.stamp<c)&&(a.changes=u=s.changeset(),u.stamp=c,s.runAfter(()=>{a.modified=!0,s.pulse(l,u).run()},!0,1)),n&&(d=!0===n?Il:ot(n)||Ak(n)?n:kce(n),u.remove(d)),t&&u.insert(t),i&&(d=kce(i),l.value.some(d)?u.remove(d):u.insert(i)),r)for(f in o)u.modify(r,f,o[f]);return 1},lassoAppend:function XKe(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const r=(e=Ht(e))[e.length-1];return void 0===r||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e},lassoPath:function KKe(e){return Ht(e).reduce((t,n,i)=>{let[r,o]=n;return t+(0==i?`M ${r},${o} `:i===e.length-1?" Z":`L ${r},${o} `)},"")},intersectLasso:function ZKe(e,t,n){const{x:i,y:r,mark:o}=n,s=(new oo).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,c]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),c<s.y1&&(s.y1=c),c>s.y2&&(s.y2=c);return s.translate(i,r),Pce([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>function QKe(e,t,n){let i=0;for(let r=0,o=n.length-1;r<n.length;o=r++){const[s,a]=n[o],[l,c]=n[r];c>t!=a>t&&e<(s-l)*(t-c)/(a-c)+l&&i++}return 1&i}(l.x,l.y,t))}},JKe=["view","item","group","xy","x","y"],C4={},Ice={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${kt("$"+e)}]`,functions:function tZe(e){const t=Jle(e);JKe.forEach(n=>t[n]="event.vega."+n);for(const n in E1)t[n]="this."+n;return Xn(t,function fKe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=Oa,n._range=Oa,n._scale=Oa;const i=r=>"_["+(r.type===Kg?kt("%"+r.value):kt("%")+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}(e,E1,C4)),t},constants:Qle,visitors:C4},M4=ece(Ice);function so(e,t,n){return 1===arguments.length?E1[e]:(E1[e]=t,n&&(C4[e]=n),M4&&(M4.functions[e]="this."+e),this)}function qu(e,t){const n={};let i;try{i=e4(e=zt(e)?e:kt(e)+"")}catch{nt("Expression parse error: "+e)}i.visit(o=>{if(o.type!==$le)return;const s=o.callee.name,a=Ice.visitors[s];a&&a(s,o.arguments,t,n)});const r=M4(i);return r.globals.forEach(o=>{const s="$"+o;!bn(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:Xn({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}so("bandwidth",function IKe(e,t){const n=ff(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},Oa),so("copy",function FKe(e,t){const n=ff(e,(t||this).context);return n?n.copy():void 0},Oa),so("domain",function LKe(e,t){const n=ff(e,(t||this).context);return n?n.domain():[]},Oa),so("range",function $Ke(e,t){const n=ff(e,(t||this).context);return n&&n.range?n.range():[]},Oa),so("invert",function NKe(e,t,n){const i=ff(e,(n||this).context);return i?ot(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0},Oa),so("scale",function BKe(e,t,n){const i=ff(e,(n||this).context);return i?i(t):void 0},Oa),so("gradient",function zKe(e,t,n,i,r){e=ff(e,(r||this).context);const o=fre(t,n);let s=e.domain(),a=s[0],l=pi(s),c=vs;return l-a?c=Zie(e,a,l):e=(e.interpolator?ki("sequential")().interpolator(e.interpolator()):ki("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+i||15),a!==s[0]&&s.unshift(a),l!==pi(s)&&s.push(l)),s.forEach(u=>o.stop(c(u),e(u))),o},Oa),so("geoArea",hKe,Oa),so("geoBounds",pKe,Oa),so("geoCentroid",gKe,Oa),so("geoShape",function HKe(e,t,n){const i=ff(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}},Oa),so("indata",function QXe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count},function dKe(e,t,n,i){t[0].type!==Kg&&nt("First argument to indata must be a string literal."),t[1].type!==Kg&&nt("Second argument to indata must be a string literal.");const r=t[0].value,o=t[1].value,s="@"+o;bn(s,i)||(i[s]=n.getData(r).indataRef(n,o))}),so("data",wce,g4),so("treePath",function UKe(e,t,n){const i=Dce(e,this),r=i[t],o=i[n];return r&&o?r.path(o).map(Oce):void 0},g4),so("treeAncestors",function jKe(e,t){const n=Dce(e,this)[t];return n?n.ancestors().map(Oce):void 0},g4),so("vlSelectionTest",function jXe(e,t,n){for(var c,u,d,f,h,i=this.context.data[e],r=i?i.values.value:[],o=i?i[JO]&&i[JO].value:void 0,s=n===d4,a=r.length,l=0;l<a;++l)if(c=r[l],o&&s){if(-1===(d=(u=u||{})[f=c.unit]||0))continue;if(h=vce(t,c),u[f]=h?-1:++d,h&&1===o.size)return!0;if(!h&&d===o.get(f).count)return!1}else if(s^(h=vce(t,c)))return h;return a&&s},h4),so("vlSelectionIdTest",function qXe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],o=i?i[JO]&&i[JO].value:void 0,s=n===d4,a=M1(t),l=WXe(r,a);if(l===r.length||M1(r[l])!==a)return!1;if(o&&s){if(1===o.size)return!0;if(GXe(r,a)-l<o.size)return!1}return!0},h4),so("vlSelectionResolve",function XXe(e,t,n,i){for(var c,u,d,f,h,y,b,C,k,q,ne,r=this.context.data[e],o=r?r.values.value:[],s={},a={},l={},I=o.length,z=0;z<I;++z)if(f=(c=o[z]).unit,d=c.values,(u=c.fields)&&d){for(q=0,ne=u.length;q<ne;++q)C=(b=s[(h=u[q]).field]||(s[h.field]={}))[f]||(b[f]=[]),l[h.field]=k=h.type.charAt(0),b[f]=(0,f4[`${k}_union`])(C,Ht(d[q]));n&&(C=a[f]||(a[f]=[])).push(Ht(d).reduce((K,le,me)=>(K[u[me].field]=le,K),{}))}else h=Gu,y=M1(c),(C=(b=s[h]||(s[h]={}))[f]||(b[f]=[])).push(y),n&&(C=a[f]||(a[f]=[])).push({[Gu]:y});return t=t||"union",s[Gu]?s[Gu]=f4[`${Gu}_${t}`](...Object.values(s[Gu])):Object.keys(s).forEach(K=>{s[K]=Object.keys(s[K]).map(le=>s[K][le]).reduce((le,me)=>void 0===le?me:f4[`${l[K]}_${t}`](le,me))}),o=Object.keys(a),n&&o.length&&(s[i?"vlPoint":"vlMulti"]="union"===t?{or:o.reduce((le,me)=>(le.push(...a[me]),le),[])}:{and:o.map(le=>({or:a[le]}))}),s},h4),so("vlSelectionTuples",function YXe(e,t){return e.map(n=>Xn(t.fields?{values:t.fields.map(i=>(i.getter||(i.getter=_a(i.field)))(n.datum))}:{[Gu]:M1(n.datum)},t))});const iZe=bc(["rule"]),Fce=bc(["group","image","rect"]);function x4(e){return(e+"").toLowerCase()}function S1(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}var lZe={operator:(e,t)=>S1(e,["_"],t.code),parameter:(e,t)=>S1(e,["datum","_"],t.code),event:(e,t)=>S1(e,["event"],t.code),handler:(e,t)=>S1(e,["_","event"],`var datum=event.item&&event.item.datum;return ${t.code};`),encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const o in i){const s="o["+kt(o)+"]";r+=`$=${i[o].code};if(${s}!==$)${s}=$,m=1;`}return r+=function rZe(e,t){let n="";return iZe[t]||(e.x2&&(e.x?(Fce[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Fce[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(i,n),r+="return m;",S1(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(kt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=Function("a","b","var u, v; return "+e.map((o,s)=>{const a=t[s];let l,c;return o.path?(l=`a${o.path}`,c=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,c=`this.f${s}(b)`),function aZe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}\n  : (u > v || v == null) && u != null ? ${i}\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n  : v !== v && u === u ? ${i} : `}(l,c,-a,a)}).join("")+"0;");return n?r.bind(n):r}}};function Lce(e,t,n){if(!e||!jt(e))return e;for(let o,i=0,r=Nce.length;i<r;++i)if(o=Nce[i],bn(e,o.key))return o.parse(e,t,n);return e}var Nce=[{key:"$ref",parse:function fZe(e,t){return t.get(e.$ref)||nt("Operator not defined: "+e.$ref)}},{key:"$key",parse:function pZe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=cN(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function hZe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=ma(t.parameterExpression(e.$expr),e.$fields))}},{key:"$field",parse:function gZe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=_a(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function _Ze(e,t){const n=e.$encode,i={};for(const r in n){const o=n[r];i[r]=ma(t.encodeExpression(o.$expr),o.$fields),i[r].output=o.$output}return i}},{key:"$compare",parse:function mZe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Ht(e.$compare).map(r=>r&&r.$tupleid?wn:r);return t.fn[n]||(t.fn[n]=aN(i,e.$order,t.expr.codegen))}},{key:"$context",parse:function yZe(e,t){return t}},{key:"$subflow",parse:function vZe(e,t){const n=e.$subflow;return function(i,r,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}},{key:"$tupleid",parse:function bZe(){return wn}}];const MZe={skip:!0};function $ce(e,t,n,i){return new Bce(e,t,n,i)}function Bce(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||lZe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function zce(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Hce(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}Bce.prototype=zce.prototype={fork(){const e=new zce(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),function sZe(e){return"collect"===x4(e)}(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[x4(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:function nZe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()},parseOperator:function cZe(e){const t=this;!function oZe(e){return"operator"===x4(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function uZe(e){const t=this;if(e.params){const n=t.get(e.id);n||nt("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function dZe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=ot(r)?r.map(o=>Lce(o,n,t)):Lce(r,n,t)}return t},parseStream:function wZe(e){var r,t=this,n=null!=e.filter?t.eventExpression(e.filter):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,n):e.merge&&(i=(r=e.merge.map(o=>t.get(o)))[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(o=>t.get(o)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&nt("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)},parseUpdate:function CZe(e){var r,t=this,n=jt(n=e.source)?n.$ref:n,i=t.get(n),o=e.update,s=void 0;i||nt("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,i,r,o,s)},getState:function xZe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(i[o]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(r[o]=s.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n},setState:function EZe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(o=>{n.update(t.signals[o],r[o],MZe)}),Object.keys(i||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Il).insert(i[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}};const E4="default";function S4(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function nD(e,t){var n=e._runtime.data;return bn(n,t)||nt("Unrecognized data set: "+t),n[t]}function iD(e,t){xte(t)||nt("Second argument to changes must be a changeset.");const n=nD(this,e);return n.modified=!0,this.pulse(n.input,t)}function Vce(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Uce(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function rD(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}const $Ze={trap:!1};function Wce(e,t,n,i){e._eventListeners.push({type:n,sources:Ht(t),handler:i})}function oD(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return!(!1===i||jt(i)&&!i[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function Gce(e){return e.item}function qce(e){return e.item.mark.source}function Yce(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function fl(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return null!=n&&(i.textContent=n),i}function qZe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=lN(i.debounce,r.update))),(null==i.input&&i.element?YZe:KZe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function YZe(e,t,n,i){const r=n.event||"input",o=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,o),Wce(i,t,r,o),e.set=s=>{t.value=s,t.dispatchEvent(function XZe(e){return typeof Event<"u"?new Event(e):{type:e}}(r))}}function KZe(e,t,n,i){const r=i.signal(n.signal),o=fl("div",{class:"vega-bind"}),s="radio"===n.input?o:o.appendChild(fl("label"));s.appendChild(fl("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let a=ZZe;switch(n.input){case"checkbox":a=QZe;break;case"select":a=JZe;break;case"radio":a=eQe;break;case"range":a=tQe}a(e,s,n,r)}function ZZe(e,t,n,i){const r=fl("input");for(const o in n)"signal"!==o&&"element"!==o&&r.setAttribute("input"===o?"type":o,n[o]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=o=>r.value=o}function QZe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const o=fl("input",r);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function JZe(e,t,n,i){const r=fl("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};sD(s,i)&&(l.selected=!0),r.appendChild(fl("option",l,(o[a]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(sD(n.options[a],s))return void(r.selectedIndex=a)}}function eQe(e,t,n,i){const r=fl("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};sD(s,i)&&(l.checked=!0);const c=fl("input",l);c.addEventListener("change",()=>e.update(s));const u=fl("label",{},(o[a]||s)+"");return u.prepend(c),r.appendChild(u),c}),e.set=s=>{const a=e.elements,l=a.length;for(let c=0;c<l;++c)sD(a[c].value,s)&&(a[c].checked=!0)}}function tQe(e,t,n,i){i=void 0!==i?i:(+n.max+ +n.min)/2;const r=null!=n.max?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,r,+i)||0,s=n.step||_h(o,r,100),a=fl("input",{type:"range",name:n.signal,min:o,max:r,step:s});a.value=i;const l=fl("span",{},+i);t.appendChild(a),t.appendChild(l);const c=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",c),a.addEventListener("change",c),e.elements=[a],e.set=u=>{a.value=u,l.textContent=u}}function sD(e,t){return e===t||e+""==t+""}function Xce(e,t,n,i,r,o){return(t=t||new i(e.loader())).initialize(n,Vce(e),Uce(e),rD(e),r,o).background(e.background())}function k4(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function A4(e,t,n){if("string"==typeof t){if(!(typeof document<"u"))return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const k1=e=>+e||0;function Kce(e){return jt(e)?{top:k1(e.top),bottom:k1(e.bottom),left:k1(e.left),right:k1(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(k1(e))}function O4(e,t,n,i){return D4.apply(this,arguments)}function D4(){return D4=Pr(function*(e,t,n,i){const r=NA(t),o=r&&r.headless;return o||nt("Unrecognized renderer type: "+t),yield e.runAsync(),Xce(e,null,null,o,n,i).renderAsync(e._scenegraph.root)}),D4.apply(this,arguments)}function T4(){return T4=Pr(function*(e,t){e!==Nh.Canvas&&e!==Nh.SVG&&e!==Nh.PNG&&nt("Unrecognized image type: "+e);const n=yield O4(this,e,t);return e===Nh.SVG?sQe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}),T4.apply(this,arguments)}function sQe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function P4(){return P4=Pr(function*(e,t){return(yield O4(this,Nh.Canvas,e,t)).canvas()}),P4.apply(this,arguments)}function R4(){return R4=Pr(function*(e){return(yield O4(this,Nh.SVG,e)).svg()}),R4.apply(this,arguments)}var I4="padding",Jce={skip:!0};function eue(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===I4?i.left+i.right:0)}function tue(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===I4?i.top+i.bottom:0)}function pQe(e,t){return t.modified&&ot(t.input.value)&&e.indexOf("_:vega:_")}function gQe(e,t){return!("parent"===e||t instanceof Qy.proxy)}function yQe(e,t,n,i){const r=e.element();r&&r.setAttribute("title",function vQe(e){return null==e?"":ot(e)?nue(e):jt(e)&&!gh(e)?function bQe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ot(n)?nue(n):iue(n))}).join("\n")}(e):e+""}(i))}function nue(e){return"["+e.map(iue).join(", ")+"]"}function iue(e){return ot(e)?"[\u2026]":jt(e)&&!gh(e)?"{\u2026}":e}function rue(e,t){const n=this;if(t=t||{},Zy.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Xn({},e.locale,t.locale);n.locale(fte(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Nh.Canvas,n._scenegraph=new mB;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||yQe,n._redraw=!0,n._handler=(new NC).scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function BZe(e){const t=Xn({defaults:{}},e),n=(i,r)=>{r.forEach(o=>{ot(i[o])&&(i[o]=bc(i[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=function cQe(e,t,n){return $ce(e,Qy,E1,n).parse(t)}(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Xn({},o)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=eue(n,n._width),n._viewHeight=tue(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function dQe(e){var t=e._signals,n=t.width,i=t.height,r=t[I4];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=eue(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=tue(e,a.size),o()},{size:i});const s=e.add(null,o,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}(n),function AZe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}(n),function OZe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:E4,item:null}));e.on(e.events("view","mousemove"),t,(n,i)=>{const r=t.value,o=r?zt(r)?r:r.user:E4,s=i.item&&i.item.cursor||null;return r&&o===r.user&&s==r.item?r:{user:o,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return zt(i)||(r=i.item,i=i.user),S4(e,i&&i!==E4?i:r||i),r},{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function aD(e,t){return bn(e._signals,t)?e._signals[t]:nt("Unrecognized signal name: "+kt(t))}function oue(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function sue(e,t,n,i){let r=oue(n,i);return r||(r=k4(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function aue(e,t,n){const i=oue(t,n);return i&&t._targets.remove(i),e}St(rue,Zy,{evaluate(e,t,n){var i=this;return Pr(function*(){if(yield Zy.prototype.evaluate.call(i,e,t),i._redraw||i._resize)try{i._renderer&&(i._resize&&(i._resize=0,function RZe(e){var t=rD(e),n=Vce(e),i=Uce(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(o){e.error(o)}})}(i)),yield i._renderer.renderAsync(i._scenegraph.root)),i._redraw=!1}catch(r){i.error(r)}return n&&kk(i,n),i})()},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&Hce(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=aD(this,e);return 1===arguments.length?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Kce(e)):Kce(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(NA(e)||nt("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Zy.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(aD(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function fQe(e,t,n,i,r,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal("width",n,Jce),s._resizeWidth.skip(!0)),s.height()!==i&&(a=1,s.signal("height",i,Jce),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)},addEventListener(e,t,n){let i=t;return n&&!1===n.trap||(i=k4(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var r,o,n=this._handler.handlers(e),i=n.length;--i>=0;)if(r=n[i].handler,e===(o=n[i].type)&&(t===r||t===r.raw)){this._handler.off(o,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return sue(this,e,aD(this,e),t)},removeSignalListener(e,t){return aue(this,aD(this,e),t)},addDataListener(e,t){return sue(this,e,nD(this,e).values,t)},removeDataListener(e,t){return aue(this,nD(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=S4(this,null);this._globalCursor=!!e,t&&S4(this,t)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function _Qe(e,t){this._timers.push(function SZe(e,t,n){var i=new Z0,r=t;return null==t?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(o,s,a){s=+s,a=null==a?RE():+a,i._restart(function l(c){c+=r,i._restart(l,r+=s,a),o(c)},s,a)},i.restart(e,t,n),i)}(function n(i){e({timestamp:Date.now(),elapsed:i})},t))},events:function HZe(e,t,n){var s,i=this,r=new Pk(n),o=function(c,u){i.runAsync(null,()=>{"view"===e&&function zZe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return!1!==i&&!0!==r&&(!0===i||!1===r||(i?i[t]:r?!r[t]:e.preventDefault()))}(i,t)&&c.preventDefault(),r.receive(function IZe(e,t,n){var o,a,i=e._renderer,r=i&&i.canvas();return r&&(a=rD(e),(o=SA(t.changedTouches?t.changedTouches[0]:t,r))[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function FZe(e,t,n){const i=t?"group"===t.mark.marktype?t:t.mark.group:null;function r(s){var l,a=i;if(s)for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;zt(s)&&(s=r(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:ws(e),item:ws(t||{}),group:r,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}(e,n,o),t}(i,c,u))})};if("timer"===e)oD(i,"timer",t)&&i.timer(o,t);else if("view"===e)oD(i,"view",t)&&i.addEventListener(t,o,$Ze);else if("window"===e?oD(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&oD(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),s){for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);Wce(i,s,t,o)}else i.warn("Can not resolve event source: "+e);return r},finalize:function UZe(){var i,r,o,e=this._tooltip,t=this._timers,n=this._eventListeners;for(i=t.length;--i>=0;)t[i].stop();for(i=n.length;--i>=0;)for(r=(o=n[i]).sources.length;--r>=0;)o.sources[r].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this},hover:function VZe(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",Gce),qce,Yce(e)),this.on(this.events("view","mouseout",Gce),qce,Yce(t)),this},data:function DZe(e,t){return arguments.length<2?nD(this,e).values.value:iD.call(this,e,Sg().remove(Il).insert(t))},change:iD,insert:function TZe(e,t){return iD.call(this,e,Sg().insert(t))},remove:function PZe(e,t){return iD.call(this,e,Sg().remove(t))},scale:function uQe(e){var t=this._runtime.scales;return bn(t,e)||nt("Unrecognized scale or projection: "+e),t[e].value},initialize:function iQe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,o=NA(i);e=n._el=e?A4(n,e,!0):null,function kZe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Hce(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+i);const s=o.handler||NC,a=e?o.renderer:o.headless;return n._renderer=a?Xce(n,n._renderer,e,a):null,n._handler=function nQe(e,t,n,i){const r=new i(e.loader(),k4(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,rD(e),e);return t&&t.handlers().forEach(o=>{r.on(o.type,o.handler)}),r}(n,n._handler,e,s),n._redraw=!0,e&&"none"!==r&&(t=t?n._elBind=A4(n,t,!0):e.appendChild(fl("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&"container"!==r&&(l.element=A4(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{qZe(n,l.element||t,l)})),n},toImageURL:function oQe(e,t){return T4.apply(this,arguments)},toCanvas:function aQe(e,t){return P4.apply(this,arguments)},toSVG:function lQe(e){return R4.apply(this,arguments)},getState:function hQe(e){return this._runtime.getState(e||{data:pQe,signals:gQe,recurse:!0})},setState:function mQe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}});const EQe=/[[\]{}]/,SQe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let due,fue;function Qh(e,t,n){return due=t||"view",fue=n||SQe,hue(e.trim()).map(F4)}function A1(e,t,n,i,r){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;r&&r.indexOf(a)>=0?--s:i&&i.indexOf(a)>=0&&++s}return t}function hue(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=A1(e,r,",","[{","]}"),t.push(e.substring(i,r).trim()),i=++r;if(0===t.length)throw"Empty event selector: "+e;return t}function F4(e){return"["===e[0]?function AQe(e){const t=e.length;let i,n=1;if(n=A1(e,n,"]","[","]"),n===t)throw"Empty between selector: "+e;if(i=hue(e.substring(1,n)),2!==i.length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(n+1).trim())[0])throw"Expected '>' after between selector: "+e;i=i.map(F4);const r=F4(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}(e):function OQe(e){const t={source:due},n=[];let l,c,i=[0,0],r=0,o=0,s=e.length,a=0;if("}"===e[s-1]){if(a=e.lastIndexOf("{"),!(a>=0))throw"Unmatched right brace: "+e;try{i=function DQe(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!=i)throw e;return i})}(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}s=(e=e.slice(0,a).trim()).length,a=0}if(!s)throw e;if("@"===e[0]&&(r=++a),l=A1(e,a,":"),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=A1(e,a,"["),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),c=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=A1(e,a,"]"),a===s)throw"Unmatched left bracket: "+e;if(c.push(e.substring(o,a).trim()),a<s-1&&"["!==e[++a])throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||EQe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):function kQe(e){return fue[e]}(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=c&&(t.filter=c),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}(e)}function TQe(e){return jt(e)?e:{type:e||"pad"}}const O1=e=>+e||0;function RQe(e){return jt(e)?e.signal?e:{top:O1(e.top),bottom:O1(e.bottom),left:O1(e.left),right:O1(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(O1(e))}const Po=e=>jt(e)&&!ot(e)?Xn({},e):{value:e};function pue(e,t,n,i){return null!=n?(jt(n)&&!ot(n)||ot(n)&&n.length&&jt(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function rs(e,t,n){for(const i in t)pue(e,i,t[i]);for(const i in n)pue(e,i,n[i],"update")}function Iv(e,t,n){for(const i in t)n&&bn(n,i)||(e[i]=Xn(e[i]||{},t[i]));return e}function Fv(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const L4="mark",N4="frame",$4="scope",gue="legend-label";function B4(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const mue=e=>zt(e)?kt(e):e.signal?`(${e.signal})`:_ue(e);function uD(e){if(null!=e.gradient)return function ZQe(e){const t=[e.start,e.stop,e.count].map(n=>null==n?null:kt(n));for(;t.length&&null==pi(t);)t.pop();return t.unshift(mue(e.gradient)),`gradient(${t.join(",")})`}(e);let t=e.signal?`(${e.signal})`:e.color?function KQe(e){return e.c?dD("hcl",e.h,e.c,e.l):e.h||e.s?dD("hsl",e.h,e.s,e.l):e.l||e.a?dD("lab",e.l,e.a,e.b):e.r||e.g||e.b?dD("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?_ue(e.field):void 0!==e.value?kt(e.value):void 0;return null!=e.scale&&(t=function QQe(e,t){const n=mue(e.scale);return null!=e.range?t=`lerp(_range(${n}), ${+e.range})`:(void 0!==t&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(1==+e.band?"":"*"+fD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),null==t&&(t="0")),t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t=`pow(${t},${fD(e.exponent)})`),null!=e.mult&&(t+=`*${fD(e.mult)}`),null!=e.offset&&(t+=`+${fD(e.offset)}`),e.round&&(t=`round(${t})`),t}const dD=(e,t,n,i)=>`(${e}(${[t,n,i].map(uD).join(",")})+'')`;function fD(e){return jt(e)?"("+uD(e)+")":e}function _ue(e){return yue(jt(e)?e:{datum:e})}function yue(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):nt("Invalid field reference: "+kt(e));return e.signal||(i=zt(i)?xu(i).map(kt).join("]["):yue(i)),t+"["+i+"]"}function vue(e,t,n,i,r,o){const s={};(o=o||{}).encoders={$encode:s},e=function XQe(e,t,n,i,r){const o={},s={};let a,l,c,u;for(l in l="lineBreak","text"===t&&null!=r[l]&&!Fv(l,e)&&B4(o,l,r[l]),("legend"==n||String(n).startsWith("axis"))&&(n=null),u=n===N4?r.group:n===L4?Xn({},r.mark,r[t]):null,u)c=Fv(l,e)||("fill"===l||"stroke"===l)&&(Fv("fill",e)||Fv("stroke",e)),c||B4(o,l,u[l]);for(l in Ht(i).forEach(d=>{const f=r.style&&r.style[d];for(const h in f)Fv(h,e)||B4(o,h,f[h])}),e=Xn({},e),o)u=o[l],u.signal?(a=a||{})[l]=u:s[l]=u;return e.enter=Xn(s,e.enter),a&&(e.update=Xn(a,e.update)),e}(e,t,n,i,r.config);for(const a in e)s[a]=eJe(e[a],t,o,r);return o}function eJe(e,t,n,i){const r={},o={};for(const s in e)null!=e[s]&&(r[s]=nJe(tJe(e[s]),i,n,o));return{$expr:{marktype:t,channels:r},$fields:Object.keys(o),$output:Object.keys(e)}}function tJe(e){return ot(e)?function JQe(e){let t="";return e.forEach(n=>{const i=uD(n);t+=n.test?`(${n.test})?${i}:`:i}),":"===pi(t)&&(t+="null"),t}(e):uD(e)}function nJe(e,t,n,i){const r=qu(e,t);return r.$fields.forEach(o=>i[o]=1),Xn(n,r.$params),r.$expr}const rJe=["value","update","init","react","bind"];function bue(e,t){nt(e+' for "outer" push: '+kt(t))}function wue(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||bue("No prior signal definition",n),rJe.forEach(i=>{void 0!==e[i]&&bue("Invalid property ",i)});else{const i=t.addSignal(n,e.value);!1===e.react&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function z4(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function hD(e,t,n,i){return new z4(e,t,n,i)}function pD(e,t){return hD("operator",e,t)}function Cn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function D1(e,t){return t?{$field:e,$name:t}:{$field:e}}const H4=D1("key");function Cue(e,t){return{$compare:e,$order:t}}function gD(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const V4="scope",U4="view";function Co(e){return e&&e.signal}function mD(e){if(Co(e))return!0;if(jt(e))for(const t in e)if(mD(e[t]))return!0;return!1}function Fc(e,t){return e??t}function tm(e){return e&&e.signal||e}function T1(e,t){return(e.merge?dJe:e.stream?fJe:e.type?hJe:nt("Invalid stream specification: "+kt(e)))(e,t)}function dJe(e,t){const i=j4({merge:e.merge.map(r=>T1(r,t))},e,t);return t.addStream(i).id}function fJe(e,t){const i=j4({stream:T1(e.stream,t)},e,t);return t.addStream(i).id}function hJe(e,t){let n;"timer"===e.type?(n=t.event("timer",e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function uJe(e){return e===V4?U4:e||U4}(e.source),e.type);const i=j4({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function j4(e,t,n){let i=t.between;return i&&(2!==i.length&&nt('Stream "between" parameter must have 2 entries: '+kt(t)),e.between=[T1(i[0],n),T1(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(function pJe(e,t,n){const i="event.item";return i+(e&&"*"!==e?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===V4&&i.push("inScope(event.item)"),i.length&&(e.filter=qu("("+i.join(")&&(")+")",n).$expr),null!=(i=t.throttle)&&(e.throttle=+i),null!=(i=t.debounce)&&(e.debounce=+i),t.consume&&(e.consume=!0),e}const gJe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function yJe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}const tr=e=>(t,n,i)=>hD(e,n,t||void 0,i),xue=tr("aggregate"),bJe=tr("axisticks"),Eue=tr("bound"),Lc=tr("collect"),Sue=tr("compare"),wJe=tr("datajoin"),kue=tr("encode"),CJe=tr("expression"),MJe=tr("facet"),xJe=tr("field"),EJe=tr("key"),SJe=tr("legendentries"),kJe=tr("load"),AJe=tr("mark"),OJe=tr("multiextent"),DJe=tr("multivalues"),TJe=tr("overlap"),PJe=tr("params"),Aue=tr("prefacet"),RJe=tr("projection"),IJe=tr("proxy"),FJe=tr("relay"),Oue=tr("render"),LJe=tr("scale"),nm=tr("sieve"),NJe=tr("sortitems"),Due=tr("viewlayout"),$Je=tr("values");let BJe=0;const Tue={min:"min",max:"max",count:"sum"};function HJe(e,t){const n=t.getScale(e.name).params;let i;for(i in n.domain=Pue(e.domain,e,t),null!=e.range&&(n.range=Iue(e,t,n)),null!=e.interpolate&&function ZJe(e,t){t.interpolate=jl(e.type||e),null!=e.gamma&&(t.interpolateGamma=jl(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=function KJe(e){return jt(e)?{interval:jl(e.interval),step:jl(e.step)}:jl(e)}(e.nice)),null!=e.bins&&(n.bins=function XJe(e,t){return e.signal||ot(e)?_D(e,t):t.objectProperty(e)}(e.bins,t)),e)bn(n,i)||"name"===i||(n[i]=jl(e[i],t))}function jl(e,t){return jt(e)?e.signal?t.signalRef(e.signal):nt("Unsupported object: "+kt(e)):e}function _D(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>jl(n,t))}function yD(e){nt("Can not find data set: "+kt(e))}function Pue(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(ot(e)?VJe:e.fields?jJe:UJe)(e,t,n);(null!=t.domainMin||null!=t.domainMax)&&nt("No scale domain defined for domainMin/domainMax to override.")}function VJe(e,t,n){return e.map(i=>jl(i,n))}function UJe(e,t,n){const i=n.getData(e.data);return i||yD(e.data),rv(t.type)?i.valuesRef(n,e.field,Rue(e.sort,!1)):Yie(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function jJe(e,t,n){const i=e.data,r=e.fields.reduce((o,s)=>(s=zt(s)?{data:i,field:s}:ot(s)||s.signal?function WJe(e,t){const n="_:vega:_"+BJe++,i=Lc({});if(ot(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+kt(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,nm({})]),{data:n,field:"data"}}(s,n):s,o.push(s),o),[]);return(rv(t.type)?GJe:Yie(t.type)?qJe:YJe)(e,n,r)}function GJe(e,t,n){const i=Rue(e.sort,!0);let r,o;const s=n.map(c=>{const u=t.getData(c.data);return u||yD(c.data),u.countsRef(t,c.field,i)}),a={groupby:H4,pulse:s};i&&(r=i.op||"count",o=i.field?gD(r,i.field):"count",a.ops=[Tue[r]],a.fields=[t.fieldRef(o)],a.as=[o]),r=t.add(xue(a));const l=t.add(Lc({pulse:Cn(r)}));return o=t.add($Je({field:H4,sort:t.sortRef(i),pulse:Cn(l)})),Cn(o)}function Rue(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!Tue[e.op]&&nt("Multiple domain scales can not be sorted using "+e.op):nt("No field provided for sort aggregate op: "+e.op):jt(e)?e.field="key":e={field:"key"}),e}function qJe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||yD(r.data),o.domainRef(t,r.field)});return Cn(t.add(DJe({values:i})))}function YJe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||yD(r.data),o.extentRef(t,r.field)});return Cn(t.add(OJe({extents:i})))}function Iue(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(zt(r)){if(i&&bn(i,r))return Iue(e=Xn({},e,{range:i[r]}),t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=rv(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:nt("Unrecognized scale range value: "+kt(r))}else{if(r.scheme)return n.scheme=ot(r.scheme)?_D(r.scheme,t):jl(r.scheme,t),r.extent&&(n.schemeExtent=_D(r.extent,t)),void(r.count&&(n.schemeCount=jl(r.count,t)));if(r.step)return void(n.rangeStep=jl(r.step,t));if(rv(e.type)&&!ot(r))return Pue(r,e,t);ot(r)||nt("Unsupported range type: "+kt(r))}return r.map(o=>(ot(o)?_D:jl)(o,t))}function W4(e,t,n){return ot(e)?e.map(i=>W4(i,t,n)):jt(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:nt("Unsupported parameter object: "+kt(e)):e}const Nc="top",Jh="bottom",q4="label",Wl="value",P1="guide-label",Y4="guide-title",vD="gradient",X4="discrete",Z4=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],R1={name:1,style:1,interactive:1},bi={value:0},Gl={value:1},bD="group",Q4="rule",im="text";function I1(e){return e.type=bD,e.interactive=e.interactive||!1,e}function Da(e,t){const n=(i,r)=>Fc(e[i],Fc(t[i],r));return n.isVertical=i=>"vertical"===Fc(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Fc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Fc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Fc(e.columns,Fc(t.columns,+n.isVertical(!0))),n}function $ue(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function wD(e,t,n){return`item.anchor === 'start' ? ${e} : item.anchor === 'end' ? ${t} : ${n}`}const J4=wD(kt("left"),kt("right"),kt("center"));function Bue(e,t){return t?e?jt(e)?Object.assign({},e,{offset:Bue(e.offset,t)}):{value:e,offset:t}:t:e}function hl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Iv(e.encode,t,R1)):e.interactive=!1,e}function det(e,t,n,i){const r=Da(e,n),o=r.isVertical(),s=r.gradientThickness(),a=r.gradientLength();let l,c,u,d,f;o?(c=[0,1],u=[0,0],d=s,f=a):(c=[0,0],u=[1,0],d=a,f=s);const h={enter:l={opacity:bi,x:bi,y:bi,width:Po(d),height:Po(f)},update:Xn({},l,{opacity:Gl,fill:{gradient:t,start:c,stop:u}}),exit:{opacity:bi}};return rs(h,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),hl({type:"rect",role:"legend-gradient",encode:h},i)}function fet(e,t,n,i,r){const o=Da(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let c,u,d,f,h="";s?(c="y",d="y2",u="x",f="width",h="1-"):(c="x",d="x2",u="y",f="height");const y={opacity:bi,fill:{scale:t,field:Wl}};y[c]={signal:h+"datum.perc",mult:l},y[u]=bi,y[d]={signal:h+"datum.perc2",mult:l},y[f]=Po(a);const b={enter:y,update:Xn({},y,{opacity:Gl}),exit:{opacity:bi}};return rs(b,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),hl({type:"rect",role:"legend-band",key:Wl,from:r,encode:b},i)}const pet=`datum.perc<=0?"${Jh}":datum.perc>=1?"top":"middle"`;function zue(e,t,n,i){const r=Da(e,t),o=r.isVertical(),s=Po(r.gradientThickness()),a=r.gradientLength();let c,u,d,f,l=r("labelOverlap"),h="";const y={enter:c={opacity:bi},update:u={opacity:Gl,text:{field:q4}},exit:{opacity:bi}};return rs(y,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Fc(e.labelLimit,t.gradientLabelLimit)}),o?(c.align={value:"left"},c.baseline=u.baseline={signal:pet},d="y",f="x",h="1-"):(c.align=u.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},c.baseline={value:"top"},d="x",f="y"),c[d]=u[d]={signal:h+"datum.perc",mult:a},c[f]=u[f]=s,s.offset=Fc(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum.index"}:void 0,hl({type:im,role:gue,style:P1,key:Wl,from:i,encode:y,overlap:l},n)}function get(e,t,n,i,r){const o=Da(e,t),s=n.entries,a=!(!s||!s.interactive),l=s?s.name:void 0,c=o("clipHeight"),u=o("symbolOffset"),d={data:"value"},f=`(${r}) ? datum.offset : datum.size`,h=c?Po(c):{field:"size"},y="datum.index",b=`max(1, ${r})`;let C,k,O,I,z;h.mult=.5,C={enter:k={opacity:bi,x:{signal:f,mult:.5,offset:u},y:h},update:O={opacity:Gl,x:k.x,y:k.y},exit:{opacity:bi}};let q=null,ne=null;e.fill||(q=t.symbolBaseFillColor,ne=t.symbolBaseStrokeColor),rs(C,{fill:o("symbolFillColor",q),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",ne),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),Z4.forEach(ge=>{e[ge]&&(O[ge]=k[ge]={scale:e[ge],field:Wl})});const K=hl({type:"symbol",role:"legend-symbol",key:Wl,from:d,clip:!!c||void 0,encode:C},n.symbols),le=Po(u);le.offset=o("labelOffset"),C={enter:k={opacity:bi,x:{signal:f,offset:le},y:h},update:O={opacity:Gl,text:{field:q4},x:k.x,y:k.y},exit:{opacity:bi}},rs(C,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const me=hl({type:im,role:gue,style:P1,key:Wl,from:d,encode:C},n.labels);return C={enter:{noBound:{value:!c},width:bi,height:c?Po(c):bi,opacity:bi},exit:{opacity:bi},update:O={opacity:Gl,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(I=`ceil(item.mark.items.length / ${b})`,O.row.signal=`${y}%${I}`,O.column.signal=`floor(${y} / ${I})`,z={field:["row",y]}):(O.row.signal=`floor(${y} / ${b})`,O.column.signal=`${y} % ${b}`,z={field:y}),O.column.signal=`(${r})?${O.column.signal}:${y}`,I1({role:$4,from:i={facet:{data:i,name:"value",groupby:"index"}},encode:Iv(C,s,R1),marks:[K,me],name:l,interactive:a,sort:z})}const eH='item.orient === "left"',tH='item.orient === "right"',CD=`(${eH} || ${tH})`,_et=`datum.vgrad && ${CD}`,yet=wD('"top"','"bottom"','"middle"'),bet=`datum.vgrad && ${tH} ? (${wD('"right"','"left"','"center"')}) : (${CD} && !(datum.vgrad && ${eH})) ? "left" : ${J4}`,wet=`item._anchor || (${CD} ? "middle" : "start")`,Cet=`${_et} ? (${eH} ? -90 : 90) : 0`,Met=`${CD} ? (datum.vgrad ? (${tH} ? "bottom" : "top") : ${yet}) : "top"`;function Eet(e,t){let n;return jt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Hue(e.path)+")":e.sphere&&(n="geoShape("+Hue(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Hue(e){return jt(e)&&e.signal?e.signal:kt(e)}function Vue(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===bD?$4:t||L4:t}function ket(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Vue(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Aet(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function nH(e,t){const n=Rte(e.type);n||nt("Unrecognized transform type: "+kt(e.type));const i=hD(n.type.toLowerCase(),null,Uue(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function Uue(e,t,n){const i={},r=e.params.length;for(let o=0;o<r;++o){const s=e.params[o];i[s.name]=Oet(s,t,n)}return i}function Oet(e,t,n){const i=e.type,r=t[e.name];return"index"===i?function Det(e,t,n){return zt(t.from)||nt('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==r?"param"===i?function Tet(e,t,n){const i=t[e.name];return e.array?(ot(i)||nt("Expected an array of sub-parameters. Instead: "+kt(i)),i.map(r=>Wue(e,r,n))):Wue(e,i,n)}(e,t,n):"projection"===i?n.projectionRef(t[e.name]):e.array&&!Co(r)?r.map(o=>jue(e,o,n)):jue(e,r,n):void(e.required&&nt("Missing required "+kt(t.type)+" parameter: "+kt(e.name)))}function jue(e,t,n){const i=e.type;if(Co(t))return Gue(i)?nt("Expression references can not be signals."):iH(i)?n.fieldRef(t):que(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||iH(i);return r&&Pet(t)?n.exprRef(t.expr,t.as):r&&Ret(t)?D1(t.field,t.as):Gue(i)?qu(t,n):Iet(i)?Cn(n.getData(t).values):iH(i)?D1(t):que(i)?n.compareRef(t):t}}function Wue(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const a in r.key)if(r.key[a]!==t[a]){r=null;break}if(r)break}r||nt("Unsupported parameter: "+kt(t));const o=Xn(Uue(r,t,n),r.key);return Cn(n.add(PJe(o)))}const Pet=e=>e&&e.expr,Ret=e=>e&&e.field,Iet=e=>"data"===e,Gue=e=>"expr"===e,iH=e=>"field"===e,que=e=>"compare"===e;function MD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Cn(t.getData(e.data).output)}function rm(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}function Yue(e){return zt(e)?e:null}function Xue(e,t,n){const i=gD(n.op,n.field);let r;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function F1(e,t,n,i,r,o,s){const a=t[n]||(t[n]={}),l=function lJe(e){return jt(e)?("descending"===e.order?"-":"+")+gD(e.op,e.field):""}(o);let u,d,c=Yue(r);if(null!=c&&(e=t.scope,c+=l?"|"+l:"",u=a[c]),!u){const f=o?{field:H4,pulse:t.countsRef(e,r,o)}:{field:e.fieldRef(r),pulse:Cn(t.output)};l&&(f.sort=e.sortRef(o)),d=e.add(hD(i,void 0,f)),s&&(t.index[r]=d),u=Cn(d),null!=c&&(a[c]=u)}return u}function Kue(e,t,n){const i=e.remove,r=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(pD()),u=qu("if("+e.trigger+',modify("'+n+'",'+[r,i,o,s,a].map(d=>d??"null").join(",")+"),0)",t);l.update=u.$expr,l.params=u.$params}function xD(e,t){const n=Vue(e),i=e.type===bD,r=e.from&&e.from.facet,o=e.overlap;let a,l,c,u,d,f,h,s=e.layout||n===$4||n===N4;const y=n===L4||s||r,b=function Fet(e,t,n){let i,r,o,s,a;return e?(i=e.facet)&&(t||nt("Only group marks can be faceted."),null!=i.field?s=a=MD(i,n):(e.data?a=Cn(n.getData(e.data).aggregate):(o=nH(Xn({type:"aggregate",groupby:Ht(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=MD(i,n),s=a=Cn(n.add(o))),r=n.keyRef(i.groupby,!0))):s=Cn(n.add(Lc(null,[{}]))),s||(s=MD(e,n)),{key:r,pulse:s,parent:a}}(e.from,i,t);l=t.add(wJe({key:b.key||(e.key?D1(e.key):void 0),pulse:b.pulse,clean:!i}));const C=Cn(l);l=c=t.add(Lc({pulse:C})),l=t.add(AJe({markdef:ket(e),interactive:Aet(e.interactive,t),clip:Eet(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Cn(l)}));const k=Cn(l);l=u=t.add(kue(vue(e.encode,e.type,n,e.style,t,{mod:!1,pulse:k}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(ne=>{const K=nH(ne,t),le=K.metadata;(le.generates||le.changes)&&nt("Mark transforms should not generate new data."),le.nomod||(u.params.mod=!0),K.params.pulse=Cn(l),t.add(l=K)}),e.sort&&(l=t.add(NJe({sort:t.compareRef(e.sort),pulse:Cn(l)})));const O=Cn(l);(r||s)&&(s=t.add(Due({layout:t.objectProperty(e.layout),legends:t.legends,mark:k,pulse:O})),f=Cn(s));const I=t.add(Eue({mark:k,pulse:f||O}));h=Cn(I),i&&(y&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(O,f||h,C),r?function Let(e,t,n){const i=e.from.facet,r=i.name,o=MD(i,t);let s;i.name||nt("Facet must have a name: "+kt(i)),i.data||nt("Facet must reference a data set: "+kt(i)),i.field?s=t.add(Aue({field:t.fieldRef(i.field),pulse:o})):i.groupby?s=t.add(MJe({key:t.keyRef(i.groupby),group:Cn(t.proxy(n.parent)),pulse:o})):nt("Facet must specify groupby or field: "+kt(i));const a=t.fork(),l=a.add(Lc()),c=a.add(nm({pulse:Cn(l)}));a.addData(r,new rm(a,l,l,c)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}(e,t,b):y?function Net(e,t,n){const i=t.add(Aue({pulse:n.pulse})),r=t.fork();r.add(nm()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}(e,t,b):t.parse(e),t.popState(),y&&(s&&a.push(s),a.push(I))),o&&(h=function $et(e,t,n){const i=e.method,r=e.bound,o=e.separation,s={separation:Co(o)?n.signalRef(o.signal):o,method:Co(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const a=r.tolerance;s.boundTolerance=Co(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Cn(n.add(TJe(s)))}(o,h,t));const z=t.add(Oue({pulse:h})),q=t.add(nm({pulse:Cn(z)},void 0,t.parent()));null!=e.name&&(d=e.name,t.addData(d,new rm(t,c,z,q)),e.on&&e.on.forEach(ne=>{(ne.insert||ne.remove||ne.toggle)&&nt("Marks only support modify triggers."),Kue(ne,t,d)}))}function Vet(e,t,n){const i={enter:{},update:{}};return rs(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function Zue(e,t,n){return t[e]?`scale("${t[e]}",datum)`:$ue(e,n[0].encode)}function Yet(e,t){const n={enter:{},update:{}};return rs(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:J4},angle:{signal:'item.orient==="left"?-90:item.orient==="right"?90:0'},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Iv(n,t,R1)}function om(e){const t=Lc({},e);return t.metadata={source:!0},t}function Que(e,t){return kJe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}rm.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let o=t[0],s=null,a=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Cn(t[a-1]),e.add(t[a]),"aggregate"===t[a].type&&(s=t[a]);return new rm(e,o,r,i,s)},rm.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),o=Yue(t);let s,a,l;return null!=o&&(e=i.scope,s=r[o]),s?n&&n.field&&Xue(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Cn(i.output)},n&&n.field&&Xue(e,l,n),a=e.add(xue(l)),s=e.add(Lc({pulse:Cn(a)})),s={agg:a,ref:Cn(s)},null!=o&&(r[o]=s)),s.ref},tuplesRef(){return Cn(this.values)},extentRef(e,t){return F1(e,this,"extent","extent",t,!1)},domainRef(e,t){return F1(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return F1(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return F1(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return F1(e,this,"indata","tupleindex",t,!0,!0)}};const Jue=e=>e===Jh||e===Nc,ED=(e,t,n)=>Co(e)?ntt(e.signal,t,n):"left"===e||e===Nc?t:n,Ro=(e,t,n)=>Co(e)?ett(e.signal,t,n):Jue(e)?t:n,$c=(e,t,n)=>Co(e)?ttt(e.signal,t,n):Jue(e)?n:t,ede=(e,t,n)=>Co(e)?itt(e.signal,t,n):e===Nc?{value:t}:{value:n},ett=(e,t,n)=>tde(`${e} === 'top' || ${e} === '${Jh}'`,t,n),ttt=(e,t,n)=>tde(`${e} !== 'top' && ${e} !== '${Jh}'`,t,n),ntt=(e,t,n)=>rH(`${e} === 'left' || ${e} === 'top'`,t,n),itt=(e,t,n)=>rH(`${e} === 'top'`,t,n),tde=(e,t,n)=>(t=null!=t?Po(t):t,n=null!=n?Po(n):n,nde(t)&&nde(n)?{signal:`${e} ? (${t=t?t.signal||kt(t.value):null}) : (${n=n?n.signal||kt(n.value):null})`}:[Xn({test:e},t)].concat(n||[])),nde=e=>null==e||1===Object.keys(e).length,rH=(e,t,n)=>({signal:`${e} ? (${Bv(t)}) : (${Bv(n)})`}),ott=(e,t,n,i,r)=>({signal:(null!=i?`${e} === 'left' ? (${Bv(i)}) : `:"")+(null!=n?`${e} === '${Jh}' ? (${Bv(n)}) : `:"")+(null!=r?`${e} === 'right' ? (${Bv(r)}) : `:"")+(null!=t?`${e} === 'top' ? (${Bv(t)}) : `:"")+"(null)"}),Bv=e=>Co(e)?e.signal:null==e?null:kt(e),zv=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Hv(e,t,n,i){let r;if(t&&bn(t,e))return t[e];if(bn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[Y4][r]}if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[P1][r]}return null}function ide(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function rde(e,t){return{scale:e.scale,range:t}}function oH(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function ftt(e,t,n,i,r,o){const s=Da(e,t),a=e.orient,l=e.scale,c=ED(a,-1,1),u=tm(s("labelFlush")),d=tm(s("labelFlushOffset")),f=s("labelAlign"),h=s("labelBaseline");let b,y=0===u||!!u;const C=Po(r);C.mult=c,C.offset=Po(s("labelPadding")||0),C.offset.mult=c;const k={scale:l,field:Wl,band:.5,offset:Bue(o.offset,s("labelOffset"))},O=Ro(a,y?oH(l,u,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>Co(e)?((e,t,n)=>rH(`${e} === 'right'`,t,n))(e.signal,t,n):"right"===e?{value:t}:{value:n})(a,"left","right")),I=Ro(a,ede(a,"bottom","top"),y?oH(l,u,'"top"','"bottom"','"middle"'):{value:"middle"}),z=oH(l,u,`-(${d})`,d,0);y=y&&d;const q={opacity:bi,x:Ro(a,k,C),y:$c(a,k,C)},ne={enter:q,update:b={opacity:Gl,text:{field:q4},x:q.x,y:q.y,align:O,baseline:I},exit:{opacity:bi,x:q.x,y:q.y}};rs(ne,{dx:!f&&y?Ro(a,z):null,dy:!h&&y?$c(a,z):null}),rs(ne,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:f,baseline:h});const K=s("labelBound");let le=s("labelOverlap");return le=le||K?{separation:s("labelSeparation"),method:le,order:"datum.index",bound:K?{scale:l,orient:a,tolerance:K}:null}:void 0,b.align!==O&&(b.align=zv(b.align,O)),b.baseline!==I&&(b.baseline=zv(b.baseline,I)),hl({type:im,role:"axis-label",style:P1,key:Wl,from:i,encode:ne,overlap:le},n)}function gtt(e,t){const n=function att(e,t){var a,l,c,n=t.config,i=n.style,r=n.axis,o="band"===t.scaleType(e.scale)&&n.axisBand,s=e.orient;if(Co(s)){const d=ide([n.axisX,n.axisY]),f=ide([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);for(c of(a={},d))a[c]=Ro(s,Hv(c,n.axisX,r,i),Hv(c,n.axisY,r,i));for(c of(l={},f))l[c]=ott(s.signal,Hv(c,n.axisTop,r,i),Hv(c,n.axisBottom,r,i),Hv(c,n.axisLeft,r,i),Hv(c,n.axisRight,r,i))}else a=s===Nc||s===Jh?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Xn({},r,a,l,o):r}(e,t),i=e.encode||{},r=i.axis||{},o=r.name||void 0,s=r.interactive,a=r.style,l=Da(e,n),c=function uet(e){const t=e("tickBand");let i,r,n=e("tickOffset");return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},jt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):"extent"===t?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}(l),u={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=e.title},d=Cn(t.add(Lc({},[u]))),f=Cn(t.add(bJe({scale:t.scaleRef(e.scale),extra:t.property(c.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let y;return u.grid&&h.push(function ctt(e,t,n,i,r){const o=Da(e,t),s=e.orient,a=e.gridScale,l=ED(s,1,-1),c=function utt(e,t){if(1!==t)if(jt(e)){let n=e=Xn({},e);for(;null!=n.mult;){if(!jt(n.mult))return n.mult=Co(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n=n.mult=Xn({},n.mult)}n.mult=t}else e=Co(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);return e}(e.offset,l);let u,d,f;const h={enter:u={opacity:bi},update:f={opacity:Gl},exit:d={opacity:bi}};rs(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const y={scale:e.scale,field:Wl,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")},b=Ro(s,{signal:"height"},{signal:"width"}),C=a?{scale:a,range:0,mult:l,offset:c}:{value:0,offset:c},k=a?{scale:a,range:1,mult:l,offset:c}:Xn(b,{mult:l,offset:c});return u.x=f.x=Ro(s,y,C),u.y=f.y=$c(s,y,C),u.x2=f.x2=$c(s,k),u.y2=f.y2=Ro(s,k),d.x=Ro(s,y),d.y=$c(s,y),hl({type:Q4,role:"axis-grid",key:Wl,from:i,encode:h},n)}(e,n,i.grid,f,c)),u.ticks&&(y=l("tickSize"),h.push(function dtt(e,t,n,i,r,o){const s=Da(e,t),a=e.orient,l=ED(a,-1,1);let c,u,d;const f={enter:c={opacity:bi},update:d={opacity:Gl},exit:u={opacity:bi}};rs(f,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Po(r);h.mult=l;const y={scale:e.scale,field:Wl,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return d.y=c.y=Ro(a,bi,y),d.y2=c.y2=Ro(a,h),u.x=Ro(a,y),d.x=c.x=$c(a,bi,y),d.x2=c.x2=$c(a,h),u.y=$c(a,y),hl({type:Q4,role:"axis-tick",key:Wl,from:i,encode:f},n)}(e,n,i.ticks,f,y,c))),u.labels&&(y=u.ticks?y:0,h.push(ftt(e,n,i.labels,f,y,c))),u.domain&&h.push(function ltt(e,t,n,i){const r=Da(e,t),o=e.orient;let s,a;const l={enter:s={opacity:bi},update:a={opacity:Gl},exit:{opacity:bi}};rs(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const c=rde(e,0),u=rde(e,1);return s.x=a.x=Ro(o,c,bi),s.x2=a.x2=Ro(o,u),s.y=a.y=$c(o,c,bi),s.y2=a.y2=$c(o,u),hl({type:Q4,role:"axis-domain",from:i,encode:l},n)}(e,n,i.domain,d)),u.title&&h.push(function htt(e,t,n,i){const r=Da(e,t),o=e.orient,s=ED(o,-1,1);let a,l;const c={enter:a={opacity:bi,anchor:Po(r("titleAnchor",null)),align:{signal:J4}},update:l=Xn({},a,{opacity:Gl,text:Po(e.title)}),exit:{opacity:bi}},u={signal:`lerp(range("${e.scale}"), ${wD(0,1,.5)})`};return l.x=Ro(o,u),l.y=$c(o,u),a.angle=Ro(o,bi,((e,t)=>Co(e)?{signal:`(${e.signal}) * 90`}:{value:90*e})(s)),a.baseline=Ro(o,ede(o,Jh,Nc),{value:Jh}),l.angle=a.angle,l.baseline=a.baseline,rs(c,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),function ptt(e,t,n,i){const r=(a,l)=>null!=a?(n.update[l]=zv(Po(a),n.update[l]),!1):!Fv(l,i),o=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===o?Po(s):Ro(t,Po(s),Po(o))}(r,o,c,n),c.update.align=zv(c.update.align,a.align),c.update.angle=zv(c.update.angle,a.angle),c.update.baseline=zv(c.update.baseline,a.baseline),hl({type:im,role:"axis-title",style:Y4,from:i,encode:c},n)}(e,n,i.title,d)),xD(I1({role:"axis",from:d,encode:Iv(mtt(l,e),r,R1),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function mtt(e,t){const n={enter:{},update:{}};return rs(n,{orient:e("orient"),offset:e("offset")||0,position:Fc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function ode(e,t,n){const i=Ht(e.signals),r=Ht(e.scales);return n||i.forEach(o=>wue(o,t)),Ht(e.projections).forEach(o=>function QJe(e,t){const n=t.config.projection||{},i={};for(const r in e)"name"!==r&&(i[r]=W4(e[r],r,t));for(const r in n)null==i[r]&&(i[r]=W4(n[r],r,t));t.addProjection(e.name,i)}(o,t)),r.forEach(o=>function zJe(e,t){const n=e.type||"linear";Wie(n)||nt("Unrecognized scale type: "+kt(n)),t.addScale(e.name,{type:n,domain:void 0})}(o,t)),Ht(e.data).forEach(o=>function Zet(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(nH(i,t))}),e.on&&e.on.forEach(i=>{Kue(i,t,e.name)}),t.addDataPipeline(e.name,function Qet(e,t,n){const i=[];let a,l,c,u,d,r=null,o=!1,s=!1;for(e.values?Co(e.values)||mD(e.format)?(i.push(Que(t,e)),i.push(r=om())):i.push(r=om({$ingest:e.values,$format:e.format})):e.url?mD(e.url)||mD(e.format)?(i.push(Que(t,e)),i.push(r=om())):i.push(r=om({$request:e.url,$format:e.format})):e.source&&(r=a=Ht(e.source).map(f=>Cn(t.getData(f).output)),i.push(null)),l=0,c=n.length;l<c;++l)u=n[l],d=u.metadata,!r&&!d.source&&i.push(r=om()),i.push(u),d.generates&&(s=!0),d.modifies&&!s&&(o=!0),d.source?r=u:d.changes&&(r=null);return a&&(c=a.length-1,i[0]=FJe({derive:o,pulse:c?a:a[0]}),(o||c)&&i.splice(1,0,om())),r||i.push(om()),i.push(nm({})),i}(e,t,n))}(o,t)),r.forEach(o=>HJe(o,t)),(n||i).forEach(o=>function vJe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?nt("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=qu(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>function mJe(e,t,n){const i=e.encode,r={target:n};let o=e.events,s=e.update,a=[];o||nt("Signal update missing events specification."),zt(o)&&(o=Qh(o,t.isSubscope()?V4:U4)),o=Ht(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[yJe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),null!=i&&(s&&nt("Signal encode and update are mutually exclusive."),s="encode(item(),"+kt(i)+")"),r.update=zt(s)?qu(s,t):null!=s.expr?qu(s.expr,t):null!=s.value?s.value:null!=s.signal?{$expr:gJe,$params:{$value:t.signalRef(s.signal)}}:nt("Invalid signal update specification."),e.force&&(r.options={force:!0}),a.forEach(l=>t.addUpdate(Xn(function _Je(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):T1(e,t)}}(l,t),r)))}(r,t,n.id))}(o,t)),Ht(e.axes).forEach(o=>gtt(o,t)),Ht(e.marks).forEach(o=>xD(o,t)),Ht(e.legends).forEach(o=>function Bet(e,t){const n=t.config.legend,i=e.encode||{},r=Da(e,n),o=i.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,c={};let d,f,h,u=0;Z4.forEach(I=>e[I]?(c[I]=e[I],u=u||e[I]):0),u||nt("Missing valid scale for legend.");const y=function zet(e,t){let n=e.type||"symbol";return!e.type&&1===function Het(e){return Z4.reduce((t,n)=>t+(e[n]?1:0),0)}(e)&&(e.fill||e.stroke)&&(n=P3(t)?vD:R3(t)?X4:"symbol"),n!==vD?n:R3(t)?X4:vD}(e,t.scaleType(u)),b={title:null!=e.title,scales:c,type:y,vgrad:"symbol"!==y&&r.isVertical()},C=Cn(t.add(Lc(null,[b]))),O=Cn(t.add(SJe(f={type:y,scale:t.scaleRef(u),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return y===vD?(h=[det(e,u,n,i.gradient),zue(e,n,i.labels,O)],f.count=f.count||t.signalRef(`max(2,2*floor((${tm(r.gradientLength())})/100))`)):y===X4?h=[fet(e,u,n,i.gradient,O),zue(e,n,i.labels,O)]:(d=function met(e,t){const n=Da(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),h=[get(e,n,i,O,tm(d.columns))],f.size=function Uet(e,t,n){const i=tm(Zue("size",e,n)),r=tm(Zue("strokeWidth",e,n)),o=tm(function jet(e,t,n){return $ue("fontSize",e)||function cet(e,t,n){const i=t.config.style[n];return i&&i[e]}("fontSize",t,n)}(n[1].encode,t,P1));return qu(`max(ceil(sqrt(${i})+${r}),${o})`,t)}(e,t,h[0].marks)),h=[I1({role:"legend-entry",from:C,encode:{enter:{x:{value:0},y:{value:0}}},marks:h,layout:d,interactive:a})],b.title&&h.push(function xet(e,t,n,i){const r=Da(e,t),o={enter:{opacity:bi},update:{opacity:Gl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:bi}};return rs(o,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:wet},angle:{signal:Cet},align:{signal:bet},baseline:{signal:Met},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),hl({type:im,role:"legend-title",style:Y4,from:i,encode:o},n)}(e,n,i.title,C)),xD(I1({role:"legend",from:C,encode:Iv(Vet(r,e,n),o,R1),marks:h,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:a,style:l}),t)}(o,t)),e.title&&function Get(e,t){const n=Da(e=zt(e)?{text:e}:e,t.config.title),i=e.encode||{},r=i.group||{},o=r.name||void 0,s=r.interactive,a=r.style,l=[],u=Cn(t.add(Lc(null,[{}])));return l.push(function Xet(e,t,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return rs(s,{text:e.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hl({type:im,role:"title-text",style:"group-title",from:i,encode:s},n)}(e,n,function qet(e){const t=e.encode;return t&&t.title||Xn({name:e.name,interactive:e.interactive,style:e.style},t)}(e),u)),e.subtitle&&l.push(function Ket(e,t,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return rs(s,{text:e.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),hl({type:im,role:"title-subtitle",style:"group-subtitle",from:i,encode:s},n)}(e,n,i.subtitle,u)),xD(I1({role:"title",from:u,encode:Yet(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}(e.title,t),t.parseLambdas(),t}function L1(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function sde(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function ade(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function sH(e){return(ot(e)?btt:wtt)(e)}function btt(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(jt(r)?r.signal||sH(r):kt(r))}return n+"]"}function wtt(e){let i,r,t="{",n=0;for(i in e)r=e[i],t+=(++n>1?",":"")+kt(i)+":"+(jt(r)?r.signal||sH(r):kt(r));return t+"}"}function Mtt(e,t,n){return jt(e)||nt("Input Vega specification must be an object."),function ytt(e,t){const n=t.config,i=Cn(t.root=t.add(pD())),r=function vtt(e,t){const n=s=>Fc(e[s],t[s]),i=[L1("background",n("background")),L1("autosize",TQe(n("autosize"))),L1("padding",RQe(n("padding"))),L1("width",n("width")||0),L1("height",n("height")||0)],r=i.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return Ht(e.signals).forEach(s=>{bn(r,s.name)?s=Xn(r[s.name],s):i.push(s),o[s.name]=s}),Ht(t.signals).forEach(s=>{!bn(o,s.name)&&!bn(r,s.name)&&i.push(s)}),i}(e,n);r.forEach(c=>wue(c,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Lc()),s=t.add(kue(vue((e=>Iv({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),bD,N4,e.style,t,{pulse:Cn(o)}))),a=t.add(Due({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Cn(s)}));t.operators.pop(),t.pushState(Cn(s),Cn(a),null),ode(e,t,r),t.operators.push(a);let l=t.add(Eue({mark:i,pulse:Cn(a)}));return l=t.add(Oue({pulse:Cn(l)})),l=t.add(nm({pulse:Cn(l)})),t.addData("root",new rm(t,o,o,l)),t}(e,new sde(t=Ly(function Ctt(){const e="sans-serif",i="#4c78a8",r="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}sde.prototype=ade.prototype={parse(e){return ode(e,this)},fork(){return new ade(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof z4?Cn(e):e;return this.add(IJe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,o){let s,a;i&&(s=i.data||(i.data={}),a=s[r]||(s[r]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Cn(this.add(nm({pulse:e})))),this._parent.push(t),this._lookup.push(n?Cn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return pi(this._parent)},encode(){return pi(this._encode)},lookup(){return pi(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(zt(e))return D1(e,t);e.signal||nt("Unsupported field reference: "+kt(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Cn(this.add(xJe(r)))}return i},compareRef(e){let t=!1;const n=o=>Co(o)?(t=!0,this.signalRef(o.signal)):function cJe(e){return e&&e.expr}(o)?(t=!0,this.exprRef(o.expr)):o,i=Ht(e.field).map(n),r=Ht(e.order).map(n);return t?Cn(this.add(Sue({fields:i,orders:r}))):Cue(i,r)},keyRef(e,t){let n=!1;const r=this.signals;return e=Ht(e).map(o=>Co(o)?(n=!0,Cn(r[o.signal])):o),n?Cn(this.add(EJe({fields:e,flat:t}))):function oJe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef(e){if(!e)return e;const t=gD(e.op,e.field),n=e.order||"ascending";return n.signal?Cn(this.add(Sue({fields:t,orders:this.signalRef(n.signal)}))):Cue(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return bn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&nt("Duplicate signal name: "+kt(e));const n=t instanceof z4?t:this.add(pD(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||nt("Unrecognized signal name: "+kt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Cn(this.signals[e]):(bn(this.lambdas,e)||(this.lambdas[e]=this.add(pD(null))),Cn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=qu(i,this),o=this.lambdas[i];o.params=r.$params,o.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&jt(e)?this.signalRef(e.signal||sH(e)):e},exprRef(e,t){const n={expr:qu(e,this)};return t&&(n.expr.$name=t),Cn(this.add(CJe(n)))},addBinding(e,t){this.bindings||nt("Nested signals do not support binding: "+kt(e)),this.bindings.push(Xn({signal:e},t))},addScaleProj(e,t){bn(this.scales,e)&&nt("Duplicate scale or projection name: "+kt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,LJe(t))},addProjection(e,t){this.addScaleProj(e,RJe(t))},getScale(e){return this.scales[e]||nt("Unrecognized scale name: "+kt(e)),this.scales[e]},scaleRef(e){return Cn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return bn(this.data,e)&&nt("Duplicate data set name: "+kt(e)),this.data[e]=t},getData(e){return this.data[e]||nt("Undefined data set name: "+kt(e)),this.data[e]},addDataPipeline(e,t){return bn(this.data,e)&&nt("Duplicate data set name: "+kt(e)),this.addData(e,rm.fromEntries(this,t))}};var xtt="5.25.0";Xn(Qy,T,B,E,M,g,_,m,p,v,w,x);var Stt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},ktt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Att={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Ott=Array.prototype.slice,sm=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Ott.call(t,1))};var Ttt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,n,i,r,o,s)=>new Date(e,t||0,n??1,i||0,r||0,o||0,s||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return sm("join",arguments)},indexof:function(){return sm("indexOf",arguments)},lastindexof:function(){return sm("lastIndexOf",arguments)},slice:function(){return sm("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return sm("substring",arguments,String)},split:function(){return sm("split",arguments,String)},replace:function(){return sm("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Ptt=["view","item","group","xy","x","y"],aH=new Set([Function,eval,setTimeout,setInterval]);"function"==typeof setImmediate&&aH.add(setImmediate);const Rtt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:"datum"===n?e.datum:"event"===n?e.event:"item"===n?e.item:Stt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),!aH.has(i[r]))return i[r];console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`)},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),"if"===i?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||Ttt[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>ktt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Att[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>"&&"===t.operator?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,aH.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function N1(e,t,n,i,r,o){const s=a=>Rtt[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=o,Ptt.forEach(a=>s.fn[a]=function(){return r.vega[a](...arguments)}),s(e)}var Itt={operator(e,t){const n=t.ast,i=e.functions;return r=>N1(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,o)=>N1(n,i,o,r)},event(e,t){const n=t.ast,i=e.functions;return r=>N1(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,o)=>N1(n,i,r,o.item&&o.item.datum,o)},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,o="group"===n||"image"===n||"rect"===n;return(s,a)=>{const l=s.datum;let u,c=0;for(const d in i)u=N1(i[d].ast,r,a,l,void 0,s),s[d]!==u&&(s[d]=u,c=1);return"rule"!==n&&function Ett(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}(s,i,o),c}}},Ltt=Me(478),Ntt=Me.n(Ltt),$tt=Me(559),Btt=Me.n($tt),ztt=Me(245),lH=Me.n(ztt);function cH(e){return!!e.or}function uH(e){return!!e.and}function dH(e){return!!e.not}function SD(e,t){if(dH(e))SD(e.not,t);else if(uH(e))for(const n of e.and)SD(n,t);else if(cH(e))for(const n of e.or)SD(n,t);else t(e)}function Vv(e,t){return dH(e)?{not:Vv(e.not,t)}:uH(e)?{and:e.and.map(n=>Vv(n,t))}:cH(e)?{or:e.or.map(n=>Vv(n,t))}:t(e)}const Yu=Btt(),In=Ntt();function lde(e){throw new Error(e)}function Uv(e,t){const n={};for(const i of t)bn(e,i)&&(n[i]=e[i]);return n}function Ta(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>lH()(e)).join(",")})`};const dr=lH();function di(e){if(Xi(e))return e;const t=zt(e)?e:lH()(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;return n}function fH(e){return!1===e||null===e}function fi(e,t){return e.includes(t)}function am(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function hH(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function cde(e,...t){for(const n of t)Htt(e,n??{});return e}function Htt(e,t){for(const n of ft(t))Ny(e,n,t[n],!0)}function Xu(e,t){const n=[],i={};let r;for(const o of e)r=t(o),!(r in i)&&(i[r]=1,n.push(o));return n}function Vtt(e,t){const n=ft(e),i=ft(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function ude(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function pH(e,t){for(const n of e)if(t.has(n))return!0;return!1}function gH(e){const t=new Set;for(const n of e){const r=xu(n).map((s,a)=>0===a?s:`[${s}]`),o=r.map((s,a)=>r.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function mH(e,t){return void 0===e||void 0===t||pH(gH(e),gH(t))}function nr(e){return 0===ft(e).length}const ft=Object.keys,os=Object.values,ep=Object.entries;function $1(e){return!0===e||!1===e}function Er(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function B1(e,t){return dH(e)?`!(${B1(e.not,t)})`:uH(e)?`(${e.and.map(n=>B1(n,t)).join(") && (")})`:cH(e)?`(${e.or.map(n=>B1(n,t)).join(") || (")})`:t(e)}function kD(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&kD(e[n],t)&&delete e[n],nr(e)}function z1(e){return e.charAt(0).toUpperCase()+e.substr(1)}function _H(e,t="datum"){const n=xu(e),i=[];for(let r=1;r<=n.length;r++){const o=`[${n.slice(0,r).map(kt).join("][")}]`;i.push(`${t}${o}`)}return i.join(" && ")}function dde(e,t="datum"){return`${t}[${kt(xu(e).join("."))}]`}function Utt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ql(e){return`${xu(e).map(Utt).join("\\.")}`}function lm(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function yH(e){return`${xu(e).join(".")}`}function jv(e){return e?xu(e).length:0}function Kr(...e){for(const t of e)if(void 0!==t)return t}let fde=42;function hde(e){const t=++fde;return e?String(e)+t:t}function jtt(){fde=42}function pde(e){return gde(e)?e:`__${e}`}function gde(e){return e.startsWith("__")}function H1(e){if(void 0!==e)return(e%360+360)%360}function AD(e){return!!Xi(e)||!isNaN(e)&&!isNaN(parseFloat(e))}const hf="row",pf="column",OD="facet",Sr="x",Io="y",Bc="x2",Ku="y2",tp="xOffset",Wv="yOffset",zc="radius",gf="radius2",Yl="theta",mf="theta2",Hc="latitude",Vc="longitude",Uc="latitude2",Xl="longitude2",Pa="color",Zu="fill",Qu="stroke",Ra="shape",_f="size",cm="angle",yf="opacity",np="fillOpacity",ip="strokeOpacity",rp="strokeWidth",op="strokeDash",V1="text",Gv="order",U1="detail",DD="key",um="tooltip",TD="href",PD="url",RD="description",mde={theta:1,theta2:1,radius:1,radius2:1};function _de(e){return e in mde}const vH={longitude:1,longitude2:1,latitude:1,latitude2:1};function yde(e){switch(e){case Hc:return"y";case Uc:return"y2";case Vc:return"x";case Xl:return"x2"}}function vde(e){return e in vH}const Gtt=ft(vH),bH={x:1,y:1,x2:1,y2:1,...mde,...vH,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function qv(e){return e===Pa||e===Zu||e===Qu}const bde={row:1,column:1,facet:1},Kl=ft(bde),wH={...bH,...bde},qtt=ft(wH),{order:fSt,detail:hSt,tooltip:pSt,...wde}=wH,{row:gSt,column:mSt,facet:_St,...Cde}=wde;function Ytt(e){return!!Cde[e]}function Mde(e){return!!wH[e]}ft(wde),ft(Cde);const Xtt=[Bc,Ku,Uc,Xl,mf,gf];function xde(e){return dm(e)!==e}function dm(e){switch(e){case Bc:return Sr;case Ku:return Io;case Uc:return Hc;case Xl:return Vc;case mf:return Yl;case gf:return zc}return e}function sp(e){if(_de(e))switch(e){case Yl:return"startAngle";case mf:return"endAngle";case zc:return"outerRadius";case gf:return"innerRadius"}return e}function Ju(e){switch(e){case Sr:return Bc;case Io:return Ku;case Hc:return Uc;case Vc:return Xl;case Yl:return mf;case zc:return gf}}function Ia(e){switch(e){case Sr:case Bc:return"width";case Io:case Ku:return"height"}}function Ede(e){switch(e){case Sr:return"xOffset";case Io:return"yOffset";case Bc:return"x2Offset";case Ku:return"y2Offset";case Yl:return"thetaOffset";case zc:return"radiusOffset";case mf:return"theta2Offset";case gf:return"radius2Offset"}}function CH(e){switch(e){case Sr:return"xOffset";case Io:return"yOffset"}}function Sde(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Ktt=ft(bH),{x:bSt,y:wSt,x2:CSt,y2:MSt,xOffset:xSt,yOffset:ESt,latitude:SSt,longitude:kSt,latitude2:ASt,longitude2:OSt,theta:DSt,theta2:TSt,radius:PSt,radius2:RSt,...MH}=bH,Ztt=ft(MH),xH={x:1,y:1},ed=ft(xH);function Fo(e){return e in xH}const EH={theta:1,radius:1},Qtt=ft(EH);function ID(e){return"width"===e?Sr:Io}const SH={xOffset:1,yOffset:1};function Yv(e){return e in SH}ft(SH);const{text:FSt,tooltip:LSt,href:NSt,url:$St,description:BSt,detail:zSt,key:HSt,order:VSt,...kde}=MH,Jtt=ft(kde),Ade={...xH,...EH,...SH,...kde},FD=ft(Ade);function vf(e){return!!Ade[e]}const Ode={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:USt,...int}=Ode;function kH(e){switch(e){case Sr:case Io:case Yl:case zc:case tp:case Wv:case _f:case cm:case rp:case yf:case np:case ip:case Bc:case Ku:case mf:case gf:return;case OD:case hf:case pf:case Ra:case op:case V1:case um:case TD:case PD:case RD:return"discrete";case Pa:case Zu:case Qu:return"flexible";case Hc:case Vc:case Uc:case Xl:case U1:case DD:case Gv:return}}const ont={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},snt={count:1,min:1,max:1};function bf(e){return!!e&&!!e.argmin}function ap(e){return!!e&&!!e.argmax}function AH(e){return zt(e)&&!!ont[e]}const ant=new Set(["count","valid","missing","distinct"]);function Dde(e){return zt(e)&&ant.has(e)}const cnt=new Set(["count","sum","distinct","valid","missing"]),unt=new Set(["mean","average","median","q1","q3","min","max"]);function Tde(e){return ph(e)&&(e=nT(e,void 0)),"bin"+ft(e).map(t=>LD(e[t])?Er(`_${t}_${ep(e[t])}`):Er(`_${t}_${e[t]}`)).join("")}function fr(e){return!0===e||fm(e)&&!e.binned}function ss(e){return"binned"===e||fm(e)&&!0===e.binned}function fm(e){return jt(e)}function LD(e){return e?.param}function Pde(e){switch(e){case hf:case pf:case _f:case Pa:case Zu:case Qu:case rp:case yf:case np:case ip:case Ra:return 6;case op:return 4;default:return 10}}function j1(e){return!!e?.expr}function Fa(e){const t=ft(e||{}),n={};for(const i of t)n[i]=pl(e[i]);return n}function Rde(e){const{anchor:t,frame:n,offset:i,orient:r,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:c,subtitleFontSize:u,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:y,...b}=e,k={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...void 0!==o?{angle:o}:{},...void 0!==s?{limit:s}:{}},O={...l?{subtitleColor:l}:{},...c?{subtitleFont:c}:{},...u?{subtitleFontSize:u}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...y?{subtitlePadding:y}:{}};return{titleMarkConfig:{...b,...a?{fill:a}:{}},subtitleMarkConfig:Uv(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:k,subtitle:O}}function lp(e){return zt(e)||ot(e)&&zt(e[0])}function hn(e){return!!e?.signal}function cp(e){return!!e.step}function wf(e){return!ot(e)&&"field"in e&&"data"in e}const hnt=ft({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),pnt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},OH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Ide(e){const t=ot(e.condition)?e.condition.map(Fde):Fde(e.condition);return{...pl(e),condition:t}}function pl(e){if(j1(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Fde(e){if(j1(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function vr(e){if(j1(e)){const{expr:t,...n}=e;return{signal:t,...n}}return hn(e)?e:void 0!==e?{value:e}:void 0}function gnt(e){return hn(e)?e.signal:kt(e)}function Lde(e){return hn(e)?e.signal:kt(e.value)}function jc(e){return hn(e)?e.signal:null==e?null:kt(e)}function mnt(e,t,n){for(const i of n){const r=Cf(i,t.markDef,t.config);void 0!==r&&(e[i]=vr(r))}return e}function Nde(e){return[].concat(e.type,e.style??[])}function Wi(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:o}=i;return r&&void 0!==t[r]?t[r]:void 0!==t[e]?t[e]:!o||r&&r!==e?Cf(e,t,n,i):void 0}function Cf(e,t,n,{vgChannel:i}={}){return Kr(i?ND(e,t,n.style):void 0,ND(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function ND(e,t,n){return $de(e,Nde(t),n)}function $de(e,t,n){let i;t=Ht(t);for(const r of t){const o=n[r];o&&void 0!==o[e]&&(i=o[e])}return i}function Bde(e,t){return Ht(e).reduce((n,i)=>(n.field.push(Ft(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function zde(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(Yu(r,i))return;n.push(i)}),n}function Hde(e,t){return Yu(e,t)||!t?e:e?[...Ht(e),...Ht(t)].join(", "):t}function Vde(e,t){const n=e.value,i=t.value;if(null==n||null===i)return{explicit:e.explicit,value:null};if((lp(n)||hn(n))&&(lp(i)||hn(i)))return{explicit:e.explicit,value:Hde(n,i)};if(lp(n)||hn(n))return{explicit:e.explicit,value:n};if(lp(i)||hn(i))return{explicit:e.explicit,value:i};if(!(lp(n)||hn(n)||lp(i)||hn(i)))return{explicit:e.explicit,value:zde(n,i)};throw new Error("It should never reach here")}function DH(e){return`Invalid specification ${dr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}function Ude(e){return("width"==e?"Width":"Height")+' "container" only works for single views and layered views.'}function jde(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function Wde(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ia(e)}.`:'Dropping "fit" because spec has discrete size.'}function TH(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Gde(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function ynt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function qde(e){return`Selection not supported for ${e} yet.`}function Yde(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}function Xde(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function Tnt(e){return`Ignoring an invalid transform: ${dr(e)}.`}function Kde(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Fnt(e){return`${e}Offset dropped because ${e} is continuous`}function Lnt(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function Zde(e){return`Invalid field type "${e}".`}function Qde(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function PH(e,t){return`Dropping ${dr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}function $D(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function Vnt(e){return`${e} encoding has no scale, so specified scale is ignored.`}function Unt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function jnt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Wnt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function RH(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function Qnt(e){return`Using unaggregated domain with raw field has no effect (${dr(e)}).`}function Jnt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function eit(e){return`Unaggregated domain is currently unsupported for log scale (${dr(e)}).`}function Jde(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function efe(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const tfe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function BD(e,t){return`Invalid ${e}: ${dr(t)}.`}function nfe(e){return`1D error band does not support ${e}.`}function ife(e){return`Channel ${e} is required for "binned" bin.`}const rfe=iN(nN);let td=rfe;function wt(...e){td.warn(...e)}function hm(e){if(e&&jt(e))for(const t of FH)if(t in e)return!0;return!1}const sfe=["january","february","march","april","may","june","july","august","september","october","november","december"],xit=sfe.map(e=>e.substr(0,3)),afe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Eit=afe.map(e=>e.substr(0,3));function IH(e,t){const n=[];if(t&&void 0!==e.day&&ft(e).length>1&&(wt(function pit(e){return`Dropping day from datetime ${dr(e)} as day cannot be combined with other units.`}(e)),delete(e=In(e)).day),n.push(void 0!==e.year?e.year:2012),void 0!==e.month){const i=t?function kit(e){if(AD(e)&&(e=+e),Xi(e))return e-1;{const t=e.toLowerCase(),n=sfe.indexOf(t);if(-1!==n)return n;const i=t.substr(0,3),r=xit.indexOf(i);if(-1!==r)return r;throw new Error(BD("month",e))}}(e.month):e.month;n.push(i)}else if(void 0!==e.quarter){const i=t?function Sit(e){if(AD(e)&&(e=+e),Xi(e))return e>4&&wt(BD("quarter",e)),e-1;throw new Error(BD("quarter",e))}(e.quarter):e.quarter;n.push(Xi(i)?3*i:`${i}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const i=t?function Ait(e){if(AD(e)&&(e=+e),Xi(e))return e%7;{const t=e.toLowerCase(),n=afe.indexOf(t);if(-1!==n)return n;const i=t.substr(0,3),r=Eit.indexOf(i);if(-1!==r)return r;throw new Error(BD("day",e))}}(e.day):e.day;n.push(Xi(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function pm(e){const n=IH(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}const lfe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},FH=ft(lfe);function gm(e){return jt(e)?e.binned:cfe(e)}function cfe(e){return e&&e.startsWith("binned")}function LH(e){return e.startsWith("utc")}const Rit={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function zD(e){return FH.filter(t=>dfe(e,t))}function ufe(e){const t=zD(e);return t[t.length-1]}function dfe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&"seconds"===t&&"i"===e.charAt(n-1)||e.length>n+3&&"day"===t&&"o"===e.charAt(n+3)||n>0&&"year"===t&&"f"===e.charAt(n-1))}function ffe(e){if(!e)return;const t=zD(e);return`timeUnitSpecifier(${dr(t)}, ${dr(Rit)})`}function Lo(e){if(!e)return;let t;return zt(e)?t=cfe(e)?{unit:e.substring(6),binned:!0}:{unit:e}:jt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),LH(t.unit)&&(t.utc=!0,t.unit=function Pit(e){return e.substring(3)}(t.unit)),t}function hfe(e,t=(n=>n)){const n=Lo(e),i=ufe(n.unit);if(i&&"day"!==i){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=pfe(i,n.step);return`${t(pm({...r,[s]:+r[s]+o}))} - ${t(pm(r))}`}}const Nit={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function pfe(e,t=1){if(function $it(e){return!!Nit[e]}(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:3*t};case"week":return{part:"date",step:7*t}}}function NH(e){return!!e?.field&&void 0!==e.equal}function $H(e){return!!e?.field&&void 0!==e.lt}function BH(e){return!!e?.field&&void 0!==e.lte}function zH(e){return!!e?.field&&void 0!==e.gt}function HH(e){return!!e?.field&&void 0!==e.gte}function VH(e){if(e?.field){if(ot(e.range)&&2===e.range.length)return!0;if(hn(e.range))return!0}return!1}function UH(e){return!!e?.field&&(ot(e.oneOf)||ot(e.in))}function gfe(e){return UH(e)||NH(e)||VH(e)||$H(e)||zH(e)||BH(e)||HH(e)}function nd(e,t){return iT(e,{timeUnit:t,wrapTime:!0})}function mfe(e,t=!0){const{field:n}=e,i=Lo(e.timeUnit),{unit:r,binned:o}=i||{},s=Ft(e,{expr:"datum"}),a=r?`time(${o?s:function Iit(e,t,{end:n}={end:!1}){const i=_H(t),r=LH(e)?"utc":"";function o(l){return"quarter"===l?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const a={};for(const l of FH)dfe(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),function Oit(e){const n=IH(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}(a)}(r,n)})`:s;if(NH(e))return`${a}===${nd(e.equal,r)}`;if($H(e))return`${a}<${nd(e.lt,r)}`;if(zH(e))return`${a}>${nd(e.gt,r)}`;if(BH(e))return`${a}<=${nd(e.lte,r)}`;if(HH(e))return`${a}>=${nd(e.gte,r)}`;if(UH(e))return`indexof([${function Hit(e,t){return e.map(n=>nd(n,t))}(e.oneOf,r).join(",")}], ${a}) !== -1`;if(function zit(e){return!!e?.field&&void 0!==e.valid}(e))return jH(a,e.valid);if(VH(e)){const{range:l}=e,c=hn(l)?{signal:`${l.signal}[0]`}:l[0],u=hn(l)?{signal:`${l.signal}[1]`}:l[1];if(null!==c&&null!==u&&t)return"inrange("+a+", ["+nd(c,r)+", "+nd(u,r)+"])";const d=[];return null!==c&&d.push(`${a} >= ${nd(c,r)}`),null!==u&&d.push(`${a} <= ${nd(u,r)}`),d.length>0?d.join(" && "):"true"}throw new Error(`Invalid field predicate: ${dr(e)}`)}function jH(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Vit(e){return gfe(e)&&e.timeUnit?{...e,timeUnit:Lo(e.timeUnit)}:e}const mm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Uit(e){return"quantitative"===e||"temporal"===e}function _fe(e){return"ordinal"===e||"nominal"===e}const _m=mm.quantitative,WH=mm.ordinal,Xv=mm.temporal,GH=mm.nominal,Kv=mm.geojson;ft(mm);const HD={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Wit(e,t){const n=HD[e],i=HD[t];return n===i||"ordinal-position"===n&&"time"===i||"ordinal-position"===i&&"time"===n}ft(HD);const Git={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function yfe(e){return Git[e]}const vfe=new Set(["linear","log","pow","sqrt","symlog"]),bfe=new Set([...vfe,"time","utc"]);function wfe(e){return vfe.has(e)}const Cfe=new Set(["quantile","quantize","threshold"]),qit=new Set([...bfe,...Cfe,"sequential","identity"]),Yit=new Set(["ordinal","bin-ordinal","point","band"]);function No(e){return Yit.has(e)}function gl(e){return qit.has(e)}function Wc(e){return bfe.has(e)}function Zv(e){return Cfe.has(e)}function Mfe(e){return e?.param}const xfe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:ukt,domain:dkt,range:fkt,rangeMax:hkt,rangeMin:pkt,scheme:gkt,...Jit}=(ft(xfe),xfe),ert=ft(Jit);function qH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Wc(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return Wc(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Wc(e);case"nice":return Wc(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return gl(e)&&!fi(["log","time","utc","threshold","quantile"],e)}}function Efe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return qv(e)?void 0:function Knt(e){return`Cannot use the scale property "${e}" with non-color channel.`}(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const As={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Sfe=As.arc,VD=As.area,UD=As.bar,irt=As.image,jD=As.line,WD=As.point,rrt=As.rect,GD=As.rule,kfe=As.text,YH=As.tick,ort=As.trail,XH=As.circle,KH=As.square,Afe=As.geoshape;function dp(e){return["line","area","trail"].includes(e)}function ZH(e){return["rect","bar","image","arc"].includes(e)}const Ofe=new Set(ft(As));function Gc(e){return e.type}const lrt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],Dfe=ft({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),Tfe=ft({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function ym(e){return e&&null!=e.band}const drt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]};function QH(e){const{channel:t,channelDef:n,markDef:i,scale:r,config:o}=e,s=e6(e);return Mt(n)&&!Dde(n.aggregate)&&r&&Wc(r.get("type"))?function mrt({fieldDef:e,channel:t,markDef:n,ref:i,config:r}){return dp(n.type)?i:null===Wi("invalid",n,r)?[_rt(e,t),i]:i}({fieldDef:n,channel:t,markDef:i,ref:s,config:o}):s}function _rt(e,t){return{test:JH(e,!0),..."y"===dm(t)?{field:{group:"height"}}:{value:0}}}function JH(e,t=!0){return jH(zt(e)?e:Ft(e,{expr:"datum"}),!t)}function vm(e,t,n,i){const r={};if(t&&(r.scale=t),rd(e)){const{datum:o}=e;hm(o)?r.signal=pm(o):hn(o)?r.signal=o.signal:j1(o)?r.signal=o.expr:r.value=o}else r.field=Ft(e,n);if(i){const{offset:o,band:s}=i;o&&(r.offset=o),s&&(r.band=s)}return r}function qD({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,bandPosition:o=.5}){const s=0<o&&o<1?"datum":void 0,a=Ft(t,{expr:s,suffix:r}),l=void 0!==n?Ft(n,{expr:s}):Ft(t,{suffix:"end",expr:s}),c={};if(0===o||1===o)c.scale=e,c.field=0===o?a:l;else{const u=hn(o)?`${o.signal} * ${a} + (1-${o.signal}) * ${l}`:`${o} * ${a} + ${1-o} * ${l}`;c.signal=`scale("${e}", ${u})`}return i&&(c.offset=i),c}function e6({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:c,bandPosition:u}){if(t){if($n(t)){const d=s?.get("type");if(sa(t)){u??(u=Ufe({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:f,timeUnit:h,type:y}=t;if(fr(f)||u&&h&&y===Xv)return a?.impute?vm(t,o,{binSuffix:"mid"},{offset:l}):u&&!No(d)?qD({scaleName:o,fieldOrDatumDef:t,bandPosition:u,offset:l}):vm(t,o,K1(t,e)?{binSuffix:"range"}:{},{offset:l});if(ss(f)){if(Mt(n))return qD({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:l});wt(ife(e===Sr?Bc:Ku))}}return vm(t,o,No(d)?{binSuffix:"range"}:{},{offset:l,band:"band"===d?u??t.bandPosition??.5:void 0})}if(Yc(t)){const f=l?{offset:l}:{};return{...G1(e,t.value),...f}}}return Yn(c)&&(c=c()),c&&{...c,...l?{offset:l}:{}}}function G1(e,t){return fi(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:fi(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:vr(t)}function bm(e){return e&&"number"!==e&&"time"!==e}function Rfe(e,t,n){return`${e}(${t}${n?`, ${dr(n)}`:""})`}function t6({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o}){if(bm(n))return qc({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:o});const s=Ife(e,i,r),a=Qv(e);if(void 0===t&&void 0===n&&o.customFormatTypes){if("quantitative"===a){if(r&&o.normalizedNumberFormatType)return qc({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return qc({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if("temporal"===a&&o.timeFormatType&&Mt(e)&&void 0===e.timeUnit)return qc({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(nb(e)){const l=function Crt({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:o}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:`${o?"utc":"time"}Format(${e}, '${n=zt(n)?n:r}')`:function Fit(e,t,n){if(!e)return;const i=ffe(e);return`${n||LH(e)?"utc":"time"}Format(${t}, ${i})`}(t,e,o)}({field:s,timeUnit:Mt(e)?Lo(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:wm(e)&&"utc"===e.scale?.type});return l?{signal:l}:void 0}return t=n6({type:a,specifiedFormat:t,config:o,normalizeStack:r}),Mt(e)&&fr(e.bin)?{signal:q1(s,Ft(e,{expr:i,binSuffix:"end"}),t,n,o)}:t||"quantitative"===Qv(e)?{signal:`${Nfe(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function Ife(e,t,n){return Mt(e)?n?`${Ft(e,{expr:t,suffix:"end"})}-${Ft(e,{expr:t,suffix:"start"})}`:Ft(e,{expr:t}):function yrt(e){const{datum:t}=e;return hm(t)?pm(t):`${dr(t)}`}(e)}function qc({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o,field:s}){return s??(s=Ife(e,i,r)),"datum.value"!==s&&Mt(e)&&fr(e.bin)?{signal:q1(s,Ft(e,{expr:i,binSuffix:"end"}),t,n,o)}:{signal:Rfe(n,s,t)}}function Ffe(e,t,n,i,r,o){if(!(zt(i)&&bm(i)||void 0===n&&void 0===i&&r.customFormatTypes&&"quantitative"===Qv(e)&&(r.normalizedNumberFormatType&&Jv(e)&&"normalize"===e.stack||r.numberFormatType))){if(Jv(e)&&"normalize"===e.stack&&r.normalizedNumberFormat)return n6({type:"quantitative",config:r,normalizeStack:!0});if(nb(e)){const s=Mt(e)?Lo(e.timeUnit)?.unit:void 0;return void 0===s&&r.customFormatTypes&&r.timeFormatType?void 0:function wrt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:ffe(t)}:i?void 0:n.timeFormat)}({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:o})}return n6({type:t,specifiedFormat:n,config:r})}}function Lfe(e,t,n){return e&&(hn(e)||"number"===e||"time"===e)?e:nb(t)&&"time"!==n&&"utc"!==n?Mt(t)&&Lo(t?.timeUnit)?.utc?"utc":"time":void 0}function n6({type:e,specifiedFormat:t,config:n,normalizeStack:i}){return zt(t)?t:e===_m?i?n.normalizedNumberFormat:n.numberFormat:void 0}function Nfe(e,t){return`format(${e}, "${t||""}")`}function $fe(e,t,n,i){return bm(n)?Rfe(n,e,t):Nfe(e,(zt(t)?t:void 0)??i.numberFormat)}function q1(e,t,n,i,r){if(void 0===n&&void 0===i&&r.customFormatTypes&&r.numberFormatType)return q1(e,t,r.numberFormat,r.numberFormatType,r);const o=$fe(e,n,i,r),s=$fe(t,n,i,r);return`${jH(e,!1)} ? "null" : ${o} + " \u2013 " + ${s}`}const YD="min",Mrt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Bfe(e){return e in Mrt}function zfe(e){return!!e?.encoding}function id(e){return e&&("count"===e.op||!!e.field)}function Hfe(e){return e&&ot(e)}function Y1(e){return"row"in e||"column"in e}function i6(e){return!!e&&"header"in e}function XD(e){return"facet"in e}function Vfe(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function r6(e){return"sort"in e}function Ufe({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if($n(e)&&void 0!==e.bandPosition)return e.bandPosition;if(Mt(e)){const{timeUnit:r,bin:o}=e;if(r&&!t)return ZH(n.type)?0:Cf("timeUnitBandPosition",n,i);if(fr(o))return.5}}function jfe({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:o,useVlSizeChannel:s}){const a=Ia(e),l=Wi(s?"size":a,i,r,{vgChannel:a});if(void 0!==l)return l;if(Mt(t)){const{timeUnit:c,bin:u}=t;if(c&&!n)return{band:Cf("timeUnitBandSize",i,r)};if(fr(u)&&!No(o))return{band:1}}return ZH(i.type)?o?No(o)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize:void 0}function Wfe(e,t,n,i){return!!(fr(e.bin)||e.timeUnit&&sa(e)&&"temporal"===e.type)&&void 0!==Ufe({fieldDef:e,fieldDef2:t,markDef:n,config:i})}function Gfe(e){return e&&!!e.sort&&!e.field}function KD(e){return e&&"condition"in e}function ZD(e){const t=e?.condition;return!!t&&!ot(t)&&Mt(t)}function X1(e){const t=e?.condition;return!!t&&!ot(t)&&$n(t)}function Mt(e){return e&&(!!e.field||"count"===e.aggregate)}function Qv(e){return e?.type}function rd(e){return e&&"datum"in e}function fp(e){return sa(e)&&!JD(e)||QD(e)}function qfe(e){return sa(e)&&"quantitative"===e.type&&!e.bin||QD(e)}function QD(e){return rd(e)&&Xi(e.datum)}function $n(e){return Mt(e)||rd(e)}function sa(e){return e&&("field"in e||"count"===e.aggregate)&&"type"in e}function Yc(e){return e&&"value"in e&&"value"in e}function wm(e){return e&&("scale"in e||"sort"in e)}function Jv(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Yfe(e){return e&&"legend"in e}function Xfe(e){return e&&("format"in e||"formatType"in e)}function krt(e){return Ta(e,["legend","axis","header","scale"])}function Ft(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,o="";if(function Drt(e){return"count"===e.aggregate}(e))n=pde("count");else{let s;if(!t.nofn)if(function Art(e){return"op"in e}(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:c}=e;fr(a)?(s=Tde(a),r=(t.binSuffix??"")+(t.suffix??"")):l?ap(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):bf(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):c&&!gm(c)&&(s=function Lit(e){const{utc:t,...n}=Lo(e);return n.unit?(t?"utc":"")+ft(n).map(i=>Er(`${"unit"===i?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+ft(n).map(i=>Er(`_${i}_${n[i]}`)).join("")}(c),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?yH(n):t.expr?dde(n,t.expr)+o:ql(n)+o}function JD(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Mt(e)&&!!e.bin;case"temporal":return!1}throw new Error(Zde(e.type))}const Kfe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function Prt(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(ap(t))return`${r} for argmax(${t.argmax})`;if(bf(t))return`${r} for argmin(${t.argmin})`;const o=i&&!gm(i)?Lo(i):void 0,s=t||o?.unit||o?.maxbins&&"timeunit"||fr(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}(e);default:return function Trt(e,t){const{field:n,bin:i,timeUnit:r,aggregate:o}=e;if("count"===o)return t.countTitle;if(fr(i))return`${n} (binned)`;if(r&&!gm(r)){const s=Lo(r)?.unit;if(s)return`${n} (${zD(s).join("-")})`}else if(o)return ap(o)?`${n} for max ${o.argmax}`:bf(o)?`${n} for min ${o.argmin}`:`${z1(o)} of ${n}`;return n}(e,t)}};let Zfe=Kfe;function Qfe(e){Zfe=e}function eb(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=o6(e)?.title;if(!Mt(e))return r??e.title;const o=e,s=i?s6(o,t):void 0;return n?Kr(r,o.title,s):r??o.title??s}function o6(e){return Jv(e)&&e.axis?e.axis:Yfe(e)&&e.legend?e.legend:i6(e)&&e.header?e.header:void 0}function s6(e,t){return Zfe(e,t)}function eT(e){if(Xfe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=o6(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function od(e){return Mt(e)?e:ZD(e)?e.condition:void 0}function Mo(e){return $n(e)?e:X1(e)?e.condition:void 0}function Jfe(e,t,n,i={}){return zt(e)||Xi(e)||ph(e)?(wt(function Nnt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${dr(n)}}.`}(t,zt(e)?"string":Xi(e)?"number":"boolean",e)),{value:e}):$n(e)?tT(e,t,n,i):X1(e)?{...e,condition:tT(e.condition,t,n,i)}:e}function tT(e,t,n,i){if(Xfe(e)){const{format:r,formatType:o,...s}=e;if(bm(o)&&!n.customFormatTypes)return wt(Kde(t)),tT(s,t,n,i)}else{const r=Jv(e)?"axis":Yfe(e)?"legend":i6(e)?"header":null;if(r&&e[r]){const{format:o,formatType:s,...a}=e[r];if(bm(s)&&!n.customFormatTypes)return wt(Kde(t)),tT({...e,[r]:a},t,n,i)}}return Mt(e)?a6(e,t,i):function Frt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Xi(n)?"quantitative":zt(n)?"nominal":hm(n)?"temporal":void 0,{...e,type:t}}(e)}function a6(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:o,field:s}=e,a={...e};if(!n&&i&&!AH(i)&&!ap(i)&&!bf(i)&&(wt(function Bnt(e){return`Invalid aggregation operator "${e}".`}(i)),delete a.aggregate),r&&(a.timeUnit=Lo(r)),s&&(a.field=`${s}`),fr(o)&&(a.bin=nT(o,t)),ss(o)&&!Fo(t)&&wt(function yit(e){return`Channel ${e} should not be used with "binned" bin.`}(t)),sa(a)){const{type:l}=a,c=function jit(e){if(e)switch(e=e.toLowerCase(),e){case"q":case _m:return"quantitative";case"t":case Xv:return"temporal";case"o":case WH:return"ordinal";case"n":case GH:return"nominal";case Kv:return"geojson"}}(l);l!==c&&(a.type=c),"quantitative"!==l&&Dde(i)&&(wt(function $nt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}(l,i)),a.type="quantitative")}else if(!xde(t)){const l=function Irt(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(r6(e)&&ot(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!ap(n)&&!bf(n))return"quantitative";if(wm(e)&&e.scale?.type)switch(HD[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(a,t);a.type=l}if(sa(a)){const{compatible:l,warning:c}=function Lrt(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case hf:case pf:case OD:return JD(e)?tb:{compatible:!1,warning:jnt(t)};case Sr:case Io:case tp:case Wv:case Pa:case Zu:case Qu:case V1:case U1:case DD:case um:case TD:case PD:case cm:case Yl:case zc:case RD:return tb;case Vc:case Xl:case Hc:case Uc:return n!==_m?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:tb;case yf:case np:case ip:case rp:case _f:case mf:case gf:case Bc:case Ku:return"nominal"!==n||e.sort?tb:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case Ra:case op:return JD(e)||function Ort(e){return wm(e)&&Zv(e.scale?.type)}(e)?tb:{compatible:!1,warning:Wnt(t)};case Gv:return"nominal"!==e.type||"sort"in e?tb:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(a,t)||{};!1===l&&wt(c)}if(r6(a)&&zt(a.sort)){const{sort:l}=a;if(Bfe(l))return{...a,sort:{encoding:l}};const c=l.substr(1);if("-"===l.charAt(0)&&Bfe(c))return{...a,sort:{encoding:c,order:"descending"}}}if(i6(a)){const{header:l}=a;if(l){const{orient:c,...u}=l;if(c)return{...a,header:{...u,labelOrient:l.labelOrient||c,titleOrient:l.titleOrient||c}}}}return a}function nT(e,t){return ph(e)?{maxbins:Pde(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:Pde(t)}}const tb={compatible:!0};function nb(e){const{formatType:t}=eT(e);return"time"===t||!t&&function Nrt(e){return e&&("temporal"===e.type||Mt(e)&&!!e.timeUnit)}(e)}function iT(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const o=t&&Lo(t)?.unit;let a,s=o||"temporal"===n;return j1(e)?a=e.expr:hn(e)?a=e.signal:hm(e)?(s=!0,a=pm(e)):(zt(e)||Xi(e))&&s&&(a=`datetime(${dr(e)})`,function Tit(e){return!!lfe[e]}(o)&&(Xi(e)&&e<1e4||zt(e)&&isNaN(Date.parse(e)))&&(a=pm({[o]:e}))),a?i&&s?`time(${a})`:a:r?void 0:dr(e)}function ehe(e,t){const{type:n}=e;return t.map(i=>{const o=iT(i,{timeUnit:Mt(e)&&!gm(e.timeUnit)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==o?{signal:o}:i})}function K1(e,t){return fr(e.bin)?vf(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const the={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Z1(e){return e?.condition}const nhe=["domain","grid","labels","ticks","title"],$rt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},ihe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},rhe={...ihe,style:1,labelExpr:1,encoding:1};function ohe(e){return!!rhe[e]}ft(rhe);const she=ft({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function Mf(e){return"mark"in e}class rT{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return!!Mf(t)&&function grt(e){return Gc(e)?e.type:e}(t.mark)===this.name}}function Cm(e,t){const n=e&&e[t];return!!n&&(ot(n)?am(n,i=>!!i.field):Mt(n)||ZD(n))}function ahe(e,t){const n=e&&e[t];return!!n&&(ot(n)?am(n,i=>!!i.field):Mt(n)||rd(n)||X1(n))}function l6(e,t){if(Fo(t)){const n=e[t];if((Mt(n)||rd(n))&&(_fe(n.type)||Mt(n)&&n.timeUnit))return ahe(e,CH(t))}return!1}function c6(e){return am(qtt,t=>{if(Cm(e,t)){const n=e[t];if(ot(n))return am(n,i=>!!i.aggregate);{const i=od(n);return i&&!!i.aggregate}}return!1})}function lhe(e,t){const n=[],i=[],r=[],o=[],s={};return u6(e,(a,l)=>{if(Mt(a)){const{field:c,aggregate:u,bin:d,timeUnit:f,...h}=a;if(u||f||d){const b=o6(a)?.title;let C=Ft(a,{forAs:!0});const k={...b?[]:{title:eb(a,t,{allowDisabling:!0})},...h,field:C};if(u){let O;if(ap(u)?(O="argmax",C=Ft({op:"argmax",field:u.argmax},{forAs:!0}),k.field=`${C}.${c}`):bf(u)?(O="argmin",C=Ft({op:"argmin",field:u.argmin},{forAs:!0}),k.field=`${C}.${c}`):"boxplot"!==u&&"errorbar"!==u&&"errorband"!==u&&(O=u),O){const I={op:O,as:C};c&&(I.field=c),o.push(I)}}else if(n.push(C),sa(a)&&fr(d))i.push({bin:d,field:c,as:C}),n.push(Ft(a,{binSuffix:"end"})),K1(a,l)&&n.push(Ft(a,{binSuffix:"range"})),Fo(l)&&(s[`${l}2`]={field:`${C}_end`}),k.bin="binned",xde(l)||(k.type=_m);else if(f&&!gm(f)){r.push({timeUnit:f,field:c,as:C});const O=sa(a)&&a.type!==Xv&&"time";O&&(l===V1||l===um?k.formatType=O:function ent(e){return!!MH[e]}(l)?k.legend={formatType:O,...k.legend}:Fo(l)&&(k.axis={formatType:O,...k.axis}))}s[l]=k}else n.push(c),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:o,groupby:n,encoding:s}}function Brt(e,t,n){const i=function nnt(e,t){return function rnt(e){switch(e){case Pa:case Zu:case Qu:case RD:case U1:case DD:case um:case TD:case Gv:case yf:case np:case ip:case rp:case OD:case hf:case pf:return Ode;case Sr:case Io:case tp:case Wv:case Hc:case Vc:return int;case Bc:case Ku:case Uc:case Xl:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case _f:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case op:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ra:return{point:"always",geoshape:"always"};case V1:return{text:"always"};case cm:return{point:"always",square:"always",text:"always"};case PD:return{image:"always"};case Yl:case zc:return{text:"always",arc:"always"};case mf:case gf:return{arc:"always"}}}(e)[t]}(t,n);if(!i)return!1;if("binned"===i){const r=e[t===Bc?Sr:Io];return!!(Mt(r)&&Mt(e[t])&&ss(r.bin))}return!0}function oT(e,t){const n={};for(const i of ft(e)){const r=Jfe(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function u6(e,t,n){if(e)for(const i of ft(e)){const r=e[i];if(ot(r))for(const o of r)t.call(n,o,i);else t.call(n,r,i)}}function che(e,t){return ft(t).reduce((n,i)=>{switch(i){case Sr:case Io:case TD:case RD:case PD:case Bc:case Ku:case tp:case Wv:case Yl:case mf:case zc:case gf:case Hc:case Vc:case Uc:case Xl:case V1:case Ra:case cm:case um:return n;case Gv:if("line"===e||"trail"===e)return n;case U1:case DD:{const r=t[i];if(ot(r)||Mt(r))for(const o of Ht(r))o.aggregate||n.push(Ft(o,{}));return n}case _f:if("trail"===e)return n;case Pa:case Zu:case Qu:case yf:case np:case ip:case op:case rp:{const r=od(t[i]);return r&&!r.aggregate&&n.push(Ft(r,{})),n}}},[])}function d6(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=i?` of ${f6(t)}`:"";return{field:s+t.field,type:t.type,title:hn(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=function Hrt(e){const t=[];for(const n of ft(e))if(Cm(e,n)){const r=Ht(e[n]);for(const o of r)Mt(o)?t.push(o):ZD(o)&&t.push(o.condition)}return t}(n).map(krt);return{tooltip:[...r,...Xu(o,di)]}}function f6(e){const{title:t,field:n}=e;return Kr(t,n)}function h6(e,t,n,i,r){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:c,endPositionPrefix:u,extraEncoding:d={}})=>{const f=f6(n);return uhe(e,a,r,{mark:l,encoding:{[t]:{field:`${c}_${n.field}`,type:n.type,...void 0!==f?{title:f}:{},...void 0!==o?{scale:o}:{},...void 0!==s?{axis:s}:{}},...zt(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{},...i,...d}})}}function uhe(e,t,n,i){const{clip:r,color:o,opacity:s}=e,a=e.type;return e[t]||void 0===e[t]&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...o?{color:o}:{},...s?{opacity:s}:{},...Gc(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(t)}`,...ph(e[t])?{}:e[t]}}]:[]}function dhe(e,t,n){const{encoding:i}=e,r="vertical"===t?"y":"x",s=i[`${r}2`],a=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:sT(i[r],n),continuousAxisChannelDef2:sT(s,n),continuousAxisChannelDefError:sT(a,n),continuousAxisChannelDefError2:sT(l,n),continuousAxis:r}}function sT(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&wt(function _it(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}(n,t)),i}return e}function fhe(e,t){const{mark:n,encoding:i}=e,{x:r,y:o}=i;if(Gc(n)&&n.orient)return n.orient;if(fp(r)){if(fp(o)){const s=Mt(r)&&r.aggregate,a=Mt(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return nb(o)&&!nb(r)?"horizontal":"vertical"}return"horizontal"}if(fp(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const aT="boxplot",Wrt=new rT(aT,phe);function hhe(e){return Xi(e)?"tukey":e}function phe(e,{config:t}){e={...e,encoding:oT(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:o,...s}=e,a=Gc(n)?n:{type:n};r&&wt(qde("boxplot"));const l=a.extent??t.boxplot.extent,c=Wi("size",a,t),u=a.invalid,d=hhe(l),{bins:f,timeUnits:h,transform:y,continuousAxisChannelDef:b,continuousAxis:C,groupby:k,aggregate:O,encodingWithoutContinuousAxis:I,ticksOrient:z,boxOrient:q,customTooltipWithoutAggregatedField:ne}=function Grt(e,t,n){const i=fhe(e,aT),{continuousAxisChannelDef:r,continuousAxis:o}=dhe(e,i,aT),s=r.field,a=hhe(t),l=[...ghe(s),{op:"median",field:s,as:`mid_box_${s}`},{op:"min",field:s,as:("min-max"===a?"lower_whisker_":"min_")+s},{op:"max",field:s,as:("min-max"===a?"upper_whisker_":"max_")+s}],c="min-max"===a||"tukey"===a?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],{[o]:u,...d}=e.encoding,{customTooltipWithoutAggregatedField:f,filteredEncoding:h}=function Urt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(ot(t)){for(const o of t)o.aggregate?(i||(i=[]),i.push(o)):(r||(r=[]),r.push(o));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return ot(r)&&1===r.length&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}(d),{bins:y,timeUnits:b,aggregate:C,groupby:k,encoding:O}=lhe(h,n),I="vertical"===i?"horizontal":"vertical",z=i;return{bins:y,timeUnits:b,transform:[...y,...b,{aggregate:[...C,...l],groupby:k},...c],groupby:k,aggregate:C,continuousAxisChannelDef:r,continuousAxis:o,encodingWithoutContinuousAxis:O,ticksOrient:I,boxOrient:z,customTooltipWithoutAggregatedField:f}}(e,l,t),{color:K,size:le,...me}=I,ge=sn=>h6(a,C,b,sn,t.boxplot),ye=ge(me),Se=ge(I),ve=ge({...me,...le?{size:le}:{}}),Z=d6([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],b,I),ae={type:"tick",color:"black",opacity:1,orient:z,invalid:u,aria:!1},oe="min-max"===d?Z:d6([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,I),de=[...ye({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:oe}),...ye({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:oe}),...ye({partName:"ticks",mark:ae,positionPrefix:"lower_whisker",extraEncoding:oe}),...ye({partName:"ticks",mark:ae,positionPrefix:"upper_whisker",extraEncoding:oe})],ce=[..."tukey"!==d?de:[],...Se({partName:"box",mark:{type:"bar",...c?{size:c}:{},orient:q,invalid:u,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:Z}),...ve({partName:"median",mark:{type:"tick",invalid:u,...jt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...c?{size:c}:{},orient:z,aria:!1},positionPrefix:"mid_box",extraEncoding:Z})];if("min-max"===d)return{...s,transform:(s.transform??[]).concat(y),layer:ce};const he=`datum["lower_box_${b.field}"]`,pe=`datum["upper_box_${b.field}"]`,Ee=`(${pe} - ${he})`,Oe=`${he} - ${l} * ${Ee}`,Ie=`${pe} + ${l} * ${Ee}`,De=`datum["${b.field}"]`,$e={joinaggregate:ghe(b.field),groupby:k},st={transform:[{filter:`(${Oe} <= ${De}) && (${De} <= ${Ie})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${b.field}`},{op:"max",field:b.field,as:`upper_whisker_${b.field}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${b.field}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${b.field}`},...O],groupby:k}],layer:de},{tooltip:ze,...mt}=me,{scale:Be,axis:rt}=b,ut=f6(b),Ne=Ta(rt,["title"]),Ot=uhe(a,"outliers",t.boxplot,{transform:[{filter:`(${De} < ${Oe}) || (${De} > ${Ie})`}],mark:"point",encoding:{[C]:{field:b.field,type:b.type,...void 0!==ut?{title:ut}:{},...void 0!==Be?{scale:Be}:{},...nr(Ne)?{}:{axis:Ne}},...mt,...K?{color:K}:{},...ne?{tooltip:ne}:{}}})[0];let qt;const kn=[...f,...h,$e];return Ot?qt={transform:kn,layer:[Ot,st]}:(qt=st,qt.transform.unshift(...kn)),{...s,layer:[qt,{transform:y,layer:ce}]}}function ghe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}const p6="errorbar",Yrt=new rT(p6,mhe);function mhe(e,{config:t}){e={...e,encoding:oT(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:c}=_he(e,p6,t);delete o.size;const u=h6(a,r,i,o,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:s,aria:!1,...void 0!==d?{thickness:d}:{},...void 0!==f?{size:f}:{}},y=[...u({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:c}),...u({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:c}),...u({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==d?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return{...l,transform:n,...y.length>1?{layer:y}:{...y[0]}}}function _he(e,t,n){const{mark:i,encoding:r,params:o,projection:s,...a}=e,l=Gc(i)?i:{type:i};o&&wt(qde(t));const{orient:c,inputType:u}=function Xrt(e,t){const{encoding:n}=e;if(function Krt(e){return($n(e.x)||$n(e.y))&&!$n(e.x2)&&!$n(e.y2)&&!$n(e.xError)&&!$n(e.xError2)&&!$n(e.yError)&&!$n(e.yError2)}(n))return{orient:fhe(e,t),inputType:"raw"};const i=function Zrt(e){return $n(e.x2)||$n(e.y2)}(n),r=function Qrt(e){return $n(e.xError)||$n(e.xError2)||$n(e.yError)||$n(e.yError2)}(n),o=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if($n(a)&&$n(l))throw new Error(`${t} cannot have both x2 and y2`);if($n(a)){if(fp(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if($n(l)){if(fp(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const a=n.xError,c=n.yError,u=n.yError2;if($n(n.xError2)&&!$n(a))throw new Error(`${t} cannot have xError2 without xError`);if($n(u)&&!$n(c))throw new Error(`${t} cannot have yError2 without yError`);if($n(a)&&$n(c))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if($n(a)){if(fp(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if($n(c)){if(fp(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:y,continuousAxis:b}=dhe(e,c,t),{errorBarSpecificAggregate:C,postAggregateCalculates:k,tooltipSummary:O,tooltipTitleWithFieldName:I}=function Jrt(e,t,n,i,r,o,s,a){let l=[],c=[];const u=t.field;let d,f=!1;if("raw"===o){const h=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":a.errorbar.center,y=e.extent?e.extent:"mean"===h?"stderr":"iqr";if("median"===h!=("iqr"===y)&&wt(function mit(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}(h,y,s)),"stderr"===y||"stdev"===y)l=[{op:y,field:u,as:`extent_${u}`},{op:h,field:u,as:`center_${u}`}],c=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],d=[{fieldPrefix:"center_",titlePrefix:z1(h)},{fieldPrefix:"upper_",titlePrefix:yhe(h,y,"+")},{fieldPrefix:"lower_",titlePrefix:yhe(h,y,"-")}],f=!0;else{let b,C,k;"ci"===y?(b="mean",C="ci0",k="ci1"):(b="median",C="q1",k="q3"),l=[{op:C,field:u,as:`lower_${u}`},{op:k,field:u,as:`upper_${u}`},{op:b,field:u,as:`center_${u}`}],d=[{fieldPrefix:"upper_",titlePrefix:eb({field:u,aggregate:k,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:eb({field:u,aggregate:C,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:eb({field:u,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&wt(function git(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}(e.center,e.extent)),"aggregated-upper-lower"===o?(d=[],c=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):"aggregated-error"===o&&(d=[{fieldPrefix:"",titlePrefix:u}],c=[{calculate:`datum["${u}"] + datum["${i.field}"]`,as:`upper_${u}`}],c.push(r?{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`lower_${u}`}:{calculate:`datum["${u}"] - datum["${i.field}"]`,as:`lower_${u}`}));for(const h of c)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:lm(lm(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}(l,d,f,h,y,u,t,n),{[b]:z,["x"===b?"x2":"y2"]:q,["x"===b?"xError":"yError"]:ne,["x"===b?"xError2":"yError2"]:K,...le}=r,{bins:me,timeUnits:ge,aggregate:ye,groupby:Se,encoding:ve}=lhe(le,n),Z=[...ye,...C],ae="raw"!==u?[]:Se,oe=d6(O,d,ve,I);return{transform:[...a.transform??[],...me,...ge,...0===Z.length?[]:[{aggregate:Z,groupby:ae}],...k],groupby:ae,continuousAxisChannelDef:d,continuousAxis:b,encodingWithoutContinuousAxis:ve,ticksOrient:"vertical"===c?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:oe}}function yhe(e,t,n){return`${z1(e)} ${n} ${t}`}const g6="errorband",tot=new rT(g6,vhe);function vhe(e,{config:t}){e={...e,encoding:oT(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=_he(e,g6,t),c=s,u=h6(c,r,i,o,t.errorband),d=void 0!==e.encoding.x&&void 0!==e.encoding.y;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const y={...c.interpolate?{interpolate:c.interpolate}:{},...c.tension&&c.interpolate?{tension:c.tension}:{}};return d?(f={...f,...y,ariaRoleDescription:"errorband"},h={...h,...y,aria:!1}):c.interpolate?wt(nfe("interpolate")):c.tension&&wt(nfe("tension")),{...a,transform:n,layer:[...u({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...u({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...u({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const m6={};function _6(e,t,n){const i=new rT(e,t);m6[e]={normalizer:i,parts:n}}_6(aT,phe,["box","median","outliers","rule","ticks"]),_6(p6,mhe,["ticks","rule"]),_6(g6,vhe,["band","borders"]);const iot=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],bhe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},whe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},rot=ft(bhe),oot=ft(whe),Che=ft({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Mhe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],xhe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Xc=(ft(xhe),"_vgsid_"),aot={point:{on:"click",fields:[Xc],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function y6(e){return"legend"===e||!!e?.legend}function v6(e){return y6(e)&&jt(e)}function b6(e){return!!e?.select}function Ehe(e){const t=[];for(const n of e||[]){if(b6(n))continue;const{expr:i,bind:r,...o}=n;if(r&&i){const s={...o,bind:r,init:i};t.push(s)}else{const s={...o,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function w6(e){return"concat"in e}function lT(e){return"vconcat"in e}function C6(e){return"hconcat"in e}function She({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function sd(e){return jt(e)&&void 0!==e.step}function khe(e){return e.view||e.width||e.height}const cot=ft({align:1,bounds:1,center:1,columns:1,spacing:1});function M6(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function cT(e,t){const n=uT(e,t);return sd(n)?n.step:Ohe}function uT(e,t){return Kr(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const Ohe=20,fot={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Ohe},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:aot,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},xf=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Dhe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},The={blue:xf[0],orange:xf[1],red:xf[2],teal:xf[3],green:xf[4],yellow:xf[5],purple:xf[6],pink:xf[7],brown:xf[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Phe(e){const t=ft(e||{}),n={};for(const i of t){const r=e[i];n[i]=Z1(r)?Ide(r):pl(r)}return n}const _ot=[...Tfe,...she,...Che,"background","padding","legend","lineBreak","scale","style","title","view"];function Rhe(e={}){const{color:t,font:n,fontSize:i,selection:r,...o}=e,s=Ly({},In(fot),n?function got(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function hot(e={}){return{signals:[{name:"color",value:jt(e)?{...The,...e}:The}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},i?function pot(e){return{signals:[{name:"fontSize",value:jt(e)?{...Dhe,...e}:Dhe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(i):{},o||{});r&&Ny(s,"selection",r,!0);const a=Ta(s,_ot);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=pl(s[l]));for(const l of Tfe)s[l]&&(a[l]=Fa(s[l]));for(const l of she)s[l]&&(a[l]=Phe(s[l]));for(const l of Che)s[l]&&(a[l]=Fa(s[l]));return s.legend&&(a.legend=Fa(s.legend)),s.scale&&(a.scale=Fa(s.scale)),s.style&&(a.style=function mot(e){const t=ft(e),n={};for(const i of t)n[i]=Phe(e[i]);return n}(s.style)),s.title&&(a.title=Fa(s.title)),s.view&&(a.view=Fa(s.view)),a}const yot=new Set(["view",...Ofe]),vot=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],bot={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]};function Mot(e,t,n,i){"view"===t&&(n="cell");const o={...i?e[t][i]:e[t],...e.style[n??t]};nr(o)||(e.style[n??t]=o),i||delete e[t]}function dT(e){return"layer"in e}class x6{map(t,n){return XD(t)?this.mapFacet(t,n):function xot(e){return"repeat"in e}(t)?this.mapRepeat(t,n):C6(t)?this.mapHConcat(t,n):lT(t)?this.mapVConcat(t,n):w6(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(dT(t))return this.mapLayer(t,n);if(Mf(t))return this.mapUnit(t,n);throw new Error(DH(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Sot={zero:1,center:1,normalize:1},Aot=new Set([Sfe,UD,VD,GD,WD,XH,KH,jD,kfe,YH]),Oot=new Set([UD,VD,Sfe]);function ib(e){return Mt(e)&&"quantitative"===Qv(e)&&!e.bin}function Ihe(e,t,{orient:n,type:i}){const r="x"===t?"y":"radius",o="x"===t,s=e[t],a=e[r];if(Mt(s)&&Mt(a))if(ib(s)&&ib(a)){if(s.stack)return t;if(a.stack)return r;const l=Mt(s)&&!!s.aggregate;if(l!==(Mt(a)&&!!a.aggregate))return l?t:r;if(o&&["bar","area"].includes(i)){if("vertical"===n)return r;if("horizontal"===n)return t}}else{if(ib(s))return t;if(ib(a))return r}else{if(ib(s))return t;if(ib(a))return r}}function Fhe(e,t){const n=Gc(e)?e:{type:e},i=n.type;if(!Aot.has(i))return null;const r=Ihe(t,"x",n)||Ihe(t,"theta",n);if(!r)return null;const o=t[r],s=Mt(o)?Ft(o,{}):void 0,a=function Dot(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(r),l=[],c=new Set;if(t[a]){const f=t[a],h=Mt(f)?Ft(f,{}):void 0;h&&h!==s&&(l.push(a),c.add(h));const y="x"===a?"xOffset":"yOffset",b=t[y],C=Mt(b)?Ft(b,{}):void 0;C&&C!==s&&(l.push(y),c.add(C))}const u=Ztt.reduce((f,h)=>{if("tooltip"!==h&&Cm(t,h)){const y=t[h];for(const b of Ht(y)){const C=od(b);if(C.aggregate)continue;const k=Ft(C,{});(!k||!c.has(k))&&f.push({channel:h,fieldDef:C})}}return f},[]);let d;return void 0!==o.stack?d=ph(o.stack)?o.stack?"zero":null:o.stack:Oot.has(i)&&(d="zero"),!d||!function kot(e){return e in Sot}(d)||c6(t)&&0===u.length?null:o?.scale?.type&&"linear"!==o?.scale?.type?(o?.stack&&wt(function fit(e){return`Cannot stack non-linear scale (${e}).`}(o.scale.type)),null):$n(t[Ju(r)])?(void 0!==o.stack&&wt(function dit(e){return`Cannot stack "${e}" if there is already "${e}2".`}(r)),null):(Mt(o)&&o.aggregate&&!cnt.has(o.aggregate)&&wt(function hit(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}(o.aggregate)),{groupbyChannels:l,groupbyFields:c,fieldChannel:r,impute:null!==o.impute&&dp(i),stackBy:u,offset:d})}function Lhe(e,t,n){const i=Fa(e),r=Wi("orient",i,n);if(i.orient=function Iot(e,t,n){switch(e){case WD:case XH:case KH:case kfe:case rrt:case irt:return}const{x:i,y:r,x2:o,y2:s}=t;switch(e){case UD:if(Mt(i)&&(ss(i.bin)||Mt(r)&&r.aggregate&&!i.aggregate))return"vertical";if(Mt(r)&&(ss(r.bin)||Mt(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(Mt(i)&&i.type===_m&&!fr(i.bin)||QD(i))&&Mt(r)&&ss(r.bin)?"horizontal":"vertical";if(!s)return(Mt(r)&&r.type===_m&&!fr(r.bin)||QD(r))&&Mt(i)&&ss(i.bin)?"vertical":"horizontal"}case GD:if(o&&(!Mt(i)||!ss(i.bin))&&s&&(!Mt(r)||!ss(r.bin)))return;case VD:if(s)return Mt(r)&&ss(r.bin)?"horizontal":"vertical";if(o)return Mt(i)&&ss(i.bin)?"vertical":"horizontal";if(e===GD){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case jD:case YH:{const a=qfe(i),l=qfe(r);if(n)return n;if(a&&!l)return"tick"!==e?"horizontal":"vertical";if(!a&&l)return"tick"!==e?"vertical":"horizontal";if(a&&l)return"vertical";{const c=sa(i)&&i.type===Xv,u=sa(r)&&r.type===Xv;if(c&&!u)return"vertical";if(!c&&u)return"horizontal"}return}}return"vertical"}(i.type,t,r),void 0!==r&&r!==i.orient&&wt(function Xnt(e,t){return`Specified orient "${e}" overridden with "${t}".`}(i.orient,r)),"bar"===i.type&&i.orient){const a=Wi("cornerRadiusEnd",i,n);if(void 0!==a){const l="horizontal"===i.orient&&t.x2||"vertical"===i.orient&&t.y2?["cornerRadius"]:drt[i.orient];for(const c of l)i[c]=a;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}return void 0===Wi("opacity",i,n)&&(i.opacity=function Pot(e,t){if(fi([WD,YH,XH,KH],e)&&!c6(t))return.7}(i.type,t)),void 0===Wi("cursor",i,n)&&(i.cursor=function Tot(e,t,n){return t.href||e.href||Wi("href",e,n)?"pointer":e.cursor}(i,t,n)),i}function Fot(e){const{point:t,line:n,...i}=e;return ft(i).length>1?i:i.type}function Lot(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Ta(e[t],["point","line"])});return e}function E6(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?jt(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?jt(t.point)?t.point:{}:void 0}function Nhe(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class Not{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Mf(t)){const{mark:i,encoding:r}=t,o=Gc(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!E6(o,n[o.type],r);case"area":return!!E6(o,n[o.type],r)||!!Nhe(o,n[o.type])}}return!1}run(t,n,i){const{config:r}=n,{params:o,projection:s,mark:a,name:l,encoding:c,...u}=t,d=oT(c,r),f=Gc(a)?a:{type:a},h=E6(f,r[f.type],d),y="area"===f.type&&Nhe(f,r[f.type]),b=[{name:l,...o?{params:o}:{},mark:Fot({..."area"===f.type&&void 0===f.opacity&&void 0===f.fillOpacity?{opacity:.7}:{},...f}),encoding:Ta(d,["shape"])}],C=Fhe(Lhe(f,d,r),d);let k=d;if(C){const{fieldChannel:O,offset:I}=C;k={...d,[O]:{...d[O],...I?{stack:I}:{}}}}return k=Ta(k,["y2","x2"]),y&&b.push({...s?{projection:s}:{},mark:{type:"line",...Uv(f,["clip","interpolate","tension","tooltip"]),...y},encoding:k}),h&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Uv(f,["clip","tooltip"]),...h},encoding:k}),i({...u,layer:b},{...n,config:Lot(r)})}}function $ot(e,t){return t?Y1(e)?Hhe(e,t):$he(e,t):e}function S6(e,t){return t?Hhe(e,t):e}function k6(e,t,n){const i=t[e];return function Ert(e){return e&&!zt(e)&&"repeat"in e}(i)?i.repeat in n?{...t,[e]:n[i.repeat]}:void wt(function knt(e){return`Unknown repeated value "${e}".`}(i.repeat)):t}function $he(e,t){if(void 0!==(e=k6("field",e,t))){if(null===e)return null;if(r6(e)&&id(e.sort)){const n=k6("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Bhe(e,t){if(Mt(e))return $he(e,t);{const n=k6("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function zhe(e,t){if(!$n(e)){if(X1(e)){const n=Bhe(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}{const n=Bhe(e,t);if(n)return n;if(KD(e))return{condition:e.condition}}}function Hhe(e,t){const n={};for(const i in e)if(bn(e,i)){const r=e[i];if(ot(r))n[i]=r.map(o=>zhe(o,t)).filter(o=>o);else{const o=zhe(r,t);void 0!==o&&(n[i]=o)}}return n}class Bot{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Mf(t)){const{encoding:n,mark:i}=t;if("line"===i||Gc(i)&&"line"===i.type)for(const r of Xtt){const s=n[dm(r)];if(n[r]&&(Mt(s)&&!ss(s.bin)||rd(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:o}=t;return wt(function Ynt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}(!!r.x2,!!r.y2)),i({...t,mark:jt(o)?{...o,type:"rule"}:"rule"},n)}}function Vhe({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...ft(e),...ft(t)]);for(const o of r){const s=t[o],a=e[o];if($n(s)){const l={...a,...s};i[o]=l}else X1(s)?i[o]={...s,condition:{...a,...s.condition}}:s||null===s?i[o]=s:(n||Yc(a)||hn(a)||$n(a)||ot(a))&&(i[o]=a)}}else i=t;return!i||nr(i)?void 0:i}function Uhe(e){const{parentProjection:t,projection:n}=e;return t&&n&&wt(function Rnt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${dr(t)} is overridden by a child projection ${dr(n)}.`}({parentProjection:t,projection:n})),n??t}function A6(e){return"filter"in e}function Hot(e){return void 0!==e?.stop}function jhe(e){return"lookup"in e}function jot(e){return"pivot"in e}function Wot(e){return"density"in e}function Got(e){return"quantile"in e}function qot(e){return"regression"in e}function Yot(e){return"loess"in e}function Xot(e){return"sample"in e}function Kot(e){return"window"in e}function Zot(e){return"joinaggregate"in e}function Qot(e){return"flatten"in e}function Jot(e){return"calculate"in e}function Whe(e){return"bin"in e}function est(e){return"impute"in e}function tst(e){return"timeUnit"in e}function nst(e){return"aggregate"in e}function ist(e){return"stack"in e}function rst(e){return"fold"in e}function ost(e){return"extent"in e&&!("density"in e)}function Ghe(e,t){const{transform:n,...i}=e;return n?{...i,transform:n.map(o=>{if(A6(o))return{filter:O6(o,t)};if(Whe(o)&&fm(o.bin))return{...o,bin:Yhe(o.bin)};if(jhe(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o})}:e}function qhe(e,t){const n=In(e);if(Mt(n)&&fm(n.bin)&&(n.bin=Yhe(n.bin)),wm(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(KD(n))if(ot(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:o,test:s,...a}=i;return o?i:{...a,test:O6(i,t)}});else{const{selection:i,param:r,test:o,...s}=qhe(n.condition,t);n.condition=r?n.condition:{...s,test:O6(n.condition,t)}}return n}function Yhe(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function O6(e,t){const n=i=>Vv(i,r=>{var o;const a={param:r,empty:t.emptySelections[r]??!0};return(o=t.selectionPredicates)[r]??(o[r]=[]),t.selectionPredicates[r].push(a),a});return e.selection?n(e.selection):Vv(e.test||e.filter,i=>i.selection?n(i.selection):i)}class D6 extends x6{map(t,n){const i=n.selections??[];if(t.params&&!Mf(t)){const r=[];for(const o of t.params)b6(o)?i.push(o):r.push(o);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),o=[];for(const s of i)if(s.views&&s.views.length)for(const a of s.views)(zt(a)&&(a===t.name||r.includes(a))||ot(a)&&a.map(l=>r.indexOf(l)).every((l,c,u)=>-1!==l&&(0===c||l>u[c-1])))&&o.push(s);else o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=D6.prototype[e];D6.prototype[e]=function(n,i){return t.call(this,n,lst(n,i))}}function lst(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Xhe(e,t){void 0===t&&(t=Rhe(e.config));const n=function fst(e,t={}){const n={config:t};return dst.map(cst.map(ust.map(e,n),n),n)}(e,t),{width:i,height:r}=e,o=function hst(e,t,n){let{width:i,height:r}=t;const o=Mf(e)||dT(e),s={};o?"container"==i&&"container"==r?(s.type="fit",s.contains="padding"):"container"==i?(s.type="fit-x",s.contains="padding"):"container"==r&&(s.type="fit-y",s.contains="padding"):("container"==i&&(wt(Ude("width")),i=void 0),"container"==r&&(wt(Ude("height")),r=void 0));const a={type:"pad",...s,...n?Khe(n.autosize):{},...Khe(e.autosize)};if("fit"===a.type&&!o&&(wt('Autosize "fit" only works for single views and layered views.'),a.type="pad"),"container"==i&&!("fit"==a.type||"fit-x"==a.type)&&wt(jde("width")),"container"==r&&!("fit"==a.type||"fit-y"==a.type)&&wt(jde("height")),!Yu(a,{type:"pad"}))return a}(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const cst=new class zot extends x6{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Wrt,Yrt,tot,new Not,new Bot]}map(t,n){if(Mf(t)){const i=Cm(t.encoding,hf),r=Cm(t.encoding,pf),o=Cm(t.encoding,OD);if(i||r||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,o=S6(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return function Eot(e){return!ot(e.repeat)&&e.repeat.layer}(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...o}=t,{row:s,column:a,layer:l}=i,{repeater:c={},repeaterPrefix:u=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:r}},n):{...o,layer:l.map(d=>{const f={...c,layer:d},h=`${(r.name?`${r.name}_`:"")+u}child__layer_${Er(d)}`,y=this.mapLayerOrUnit(r,{...n,repeater:f,repeaterPrefix:h});return y.name=h,y})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:o,...s}=t;!ot(i)&&t.columns&&(t=Ta(t,["columns"]),wt(Yde("repeat")));const a=[],{repeater:l={},repeaterPrefix:c=""}=n,u=!ot(i)&&i.row||[l?l.row:null],d=!ot(i)&&i.column||[l?l.column:null],f=ot(i)&&i||[l?l.repeat:null];for(const y of f)for(const b of u)for(const C of d){const k={repeat:y,row:b,column:C,layer:l.layer},O=(r.name?`${r.name}_`:"")+c+"child__"+(ot(i)?`${Er(y)}`:(i.row?`row_${Er(b)}`:"")+(i.column?`column_${Er(C)}`:"")),I=this.map(r,{...n,repeater:k,repeaterPrefix:O});I.name=O,a.push(Ta(I,["data"]))}const h=ot(i)?t.columns:i.column?i.column.length:1;return{data:r.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:i}=t;return Y1(i)&&t.columns&&(t=Ta(t,["columns"]),wt(Yde("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=Uhe({parentProjection:s,projection:r}),c=Vhe({parentEncoding:o,encoding:S6(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...c?{encoding:c}:{}},{config:a})}mapFacetedUnit(t,n){const{row:i,column:r,facet:o,...s}=t.encoding,{mark:a,width:l,projection:c,height:u,view:d,params:f,encoding:h,...y}=t,{facetMapping:b,layout:C}=this.getFacetMappingAndLayout({row:i,column:r,facet:o},n),k=S6(s,n.repeater);return this.mapFacet({...y,...C,facet:b,spec:{...l?{width:l}:{},...u?{height:u}:{},...d?{view:d}:{},...c?{projection:c}:{},mark:a,encoding:k,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:o}=t;if(i||r){o&&wt(function Gnt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}([...i?[hf]:[],...r?[pf]:[]]));const s={},a={};for(const l of[hf,pf]){const c=t[l];if(c){const{align:u,center:d,spacing:f,columns:h,...y}=c;s[l]=y;for(const b of["align","center","spacing"])void 0!==c[b]&&(a[b]??(a[b]={}),a[b][l]=c[b])}}return{facetMapping:s,layout:a}}{const{align:s,center:a,spacing:l,columns:c,...u}=o;return{facetMapping:$ot(u,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...c?{columns:c}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:o,projection:s,...a}=t,l={...r,parentEncoding:Vhe({parentEncoding:n,encoding:o,layer:!0}),parentProjection:Uhe({parentProjection:i,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}},l)}},ust=new class ast extends x6{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Ghe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if((t=Ghe(t,n)).encoding){const i={};for(const[r,o]of ep(t.encoding))i[r]=qhe(o,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:ep(i).map(([o,s])=>{const{init:a,bind:l,empty:c,...u}=s;"single"===u.type?(u.type="point",u.toggle=!1):"multi"===u.type&&(u.type="point"),n.emptySelections[o]="none"!==c;for(const d of os(n.selectionPredicates[o]??{}))d.empty="none"!==c;return{name:o,value:a,select:u,bind:l}})}:t}},dst=new D6;function Khe(e){return zt(e)?{type:e}:e??{}}const mst=["background","padding"];function Zhe(e,t){const n={};for(const i of mst)e&&void 0!==e[i]&&(n[i]=pl(e[i]));return t&&(n.params=e.params),n}class Ef{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Ef(In(this.explicit),In(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Kr(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){void 0!==n&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){void 0!==n[t]?this.set(t,n[t],!0):void 0!==i[t]&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){void 0!==n[t]&&this.set(t,n[t],!0)}copyAll(t){for(const n of ft(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function ad(e){return{explicit:!0,value:e}}function ml(e){return{explicit:!1,value:e}}function Qhe(e){return(t,n,i,r)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:fT(t,n,i,r)}}function fT(e,t,n,i){return e.explicit&&t.explicit&&wt(function rit(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${dr(n)} and ${dr(i)}). Using ${dr(n)}.`}(n,i,e.value,t.value)),e}function hp(e,t,n,i,r=fT){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Yu(e.value,t.value)?e:r(e,t,n,i)}class _st extends Ef{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function rb(e){return"url"in e}function Q1(e){return"values"in e}function Jhe(e){return"name"in e&&!rb(e)&&!Q1(e)&&!pp(e)}function pp(e){return e&&(epe(e)||tpe(e)||T6(e))}function epe(e){return"sequence"in e}function tpe(e){return"sphere"in e}function T6(e){return"graticule"in e}var ar=(()=>(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"}(ar||(ar={})),ar))();function npe(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=ql(r.field),r}function Mm(e,t=!0,n=vs){if(ot(e)){const i=e.map(r=>Mm(r,t,n));return t?`[${i.join(", ")}]`:i}return hm(e)?n(t?pm(e):function Dit(e){const t=IH(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(dr(e)):e}function yst(e,t){for(const n of os(e.component.selection??{})){const i=n.name;let r=`${i}${mp}, ${"global"===n.resolve?"true":`{unit: ${Em(e)}}`}`;for(const o of _T)!o.defined(n)||(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(r=o.modifyExpr(e,n,r)));t.push({name:i+Zst,on:[{events:{signal:n.name+mp},update:`modify(${kt(n.name+xm)}, ${r})`}]})}return P6(t)}function vst(e,t){if(e.component.selection&&ft(e.component.selection).length){const n=kt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Qh("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return P6(t)}function ipe(e,t){for(const n of os(e.component.selection??{}))for(const i of _T)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function P6(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Zi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){this._children.includes(t)?wt("Attempt to add the same child twice."):void 0!==n?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class aa extends Zi{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${hde()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function R6(e){return void 0!==e.as}function rpe(e){return`${e}_end`}class ld extends Zi{clone(){return new ld(null,In(this.formula))}constructor(t,n){super(t),this.formula=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o)=>{const{field:s,timeUnit:a}=o;if(a){let l;if(gm(a)){if(jr(n)){const{mark:c}=n;(ZH(c)||o.bandPosition)&&(l={timeUnit:Lo(a),field:s})}}else l={as:Ft(o,{forAs:!0}),field:s,timeUnit:a};l&&(r[di(l)]=l)}return r},{});return nr(i)?null:new ld(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},s={...r,timeUnit:Lo(i)};return new ld(t,{[di(s)]:s})}merge(t){this.formula={...this.formula};for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of ep(this.formula)){const o=R6(r)?r.as:`${r.field}_end`;t.has(o)||(n[i]=r)}this.formula=n}producedFields(){return new Set(os(this.formula).map(t=>R6(t)?t.as:rpe(t.field)))}dependentFields(){return new Set(os(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${di(this.formula)}`}assemble(){const t=[];for(const n of os(this.formula))if(R6(n)){const{field:i,as:r,timeUnit:o}=n,{unit:s,utc:a,...l}=Lo(o);t.push({field:ql(i),type:"timeunit",...s?{units:zD(s)}:{},...a?{timezone:"utc"}:{},...l,as:[r,`${r}_end`]})}else if(n){const{field:i,timeUnit:r}=n,o=ufe(r?.unit),{part:s,step:a}=pfe(o,r.step);t.push({type:"formula",expr:`timeOffset('${s}', datum['${i}'], ${a})`,as:rpe(i)})}return t}}const J1="_tuple_fields";class xst{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Est={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new xst),o={},s={},a=new Set,l=(y,b)=>{const C="visual"===b?y.channel:y.field;let k=Er(`${i}_${C}`);for(let O=1;a.has(k);O++)k=Er(`${i}_${C}_${O}`);return a.add(k),{[b]:k}},c=t.type,u=e.config.selection[c],d=void 0!==n.value?Ht(n.value):null;let{fields:f,encodings:h}=jt(n.select)?n.select:{};if(!f&&!h&&d)for(const y of d)if(jt(y))for(const b of ft(y))Ytt(b)?(h||(h=[])).push(b):"interval"===c?(wt('Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.'),h=u.encodings):(f??(f=[])).push(b);!f&&!h&&(h=u.encodings,"fields"in u&&(f=u.fields));for(const y of h??[]){const b=e.fieldDef(y);if(b){let C=b.field;if(b.aggregate){wt(ynt(y,b.aggregate));continue}if(!C){wt(Gde(y));continue}if(b.timeUnit&&!gm(b.timeUnit)){C=e.vgField(y);const k={timeUnit:b.timeUnit,as:C,field:b.field};s[di(k)]=k}if(!o[C]){const O={field:C,channel:y,type:"interval"===c&&vf(y)&&gl(e.getScaleComponent(y).get("type"))?"R":b.bin?"R-RE":"E",index:r.items.length};O.signals={...l(O,"data"),...l(O,"visual")},r.items.push(o[C]=O),r.hasField[C]=o[C],r.hasSelectionId=r.hasSelectionId||C===Xc,vde(y)?(O.geoChannel=y,O.channel=yde(y),r.hasChannel[O.channel]=o[C]):r.hasChannel[y]=o[C]}}else wt(Gde(y))}for(const y of f??[]){if(r.hasField[y])continue;const b={type:"E",field:y,index:r.items.length};b.signals={...l(b,"data")},r.items.push(b),r.hasField[y]=b,r.hasSelectionId=r.hasSelectionId||y===Xc}d&&(t.init=d.map(y=>r.items.map(b=>jt(y)?void 0!==y[b.geoChannel||b.channel]?y[b.geoChannel||b.channel]:y[b.field]:y))),nr(s)||(r.timeUnit=new ld(null,s))},signals:(e,t,n)=>{const i=t.name+J1;return n.filter(o=>o.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(npe)})}},Sf={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!vf(r))continue;const o=e.getScaleComponent(r),s=o?o.get("type"):void 0;o&&gl(s)?(o.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)):wt("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>0===n.filter(a=>a.name===s.signals.data).length);if(!e.parent||ope(e)||0===i.length)return n;const r=n.filter(s=>s.name===t.name)[0];let o=r.update;if(o.indexOf(Ape)>=0)r.update=`{${i.map(s=>`${kt(ql(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const a=`${kt(ql(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}r.update=o}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!ope(e))for(const i of t.scales){const r=n.filter(o=>o.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return n}};function I6(e,t){return`domain(${kt(e.scaleName(t))})`}function ope(e){return e.parent&&pb(e.parent)&&!e.parent.parent}const ob="_brush",spe="_scale_trigger",eM="geo_interval_init_tick",kst={defined:e=>"interval"===e.type,parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...jt(n.select)?n.select:{}};r.fields=[Xc],r.encodings||(r.encodings=n.value?ft(n.value):[Vc,Hc]),n.select={type:"interval",...r}}if(t.translate&&!Sf.defined(t)){const r=`!event.item || event.item.mark.name !== ${kt(t.name+ob)}`;for(const o of t.events){if(!o.between){wt(`${o} is not an ordered event stream for interval selections.`);continue}const s=Ht((i=o.between[0]).filter??(i.filter=[]));s.indexOf(r)<0&&s.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+mp,o=os(t.project.hasChannel).filter(a=>a.channel===Sr||a.channel===Io),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(function Ast(e,t,n,i){const r=!e.hasProjection,o=n.channel,s=n.signals.visual,a=kt(r?e.scaleName(o):e.projectionName()),l=f=>`scale(${a}, ${f})`,c=e.getSizeSignalRef(o===Sr?"width":"height").signal,u=`${o}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${u}, ${u}]`},{events:h,update:`[${s}[0], clamp(${u}, 0, ${c})]`}],[]);if(r){const f=n.signals.data,h=Sf.defined(t),y=e.getScaleComponent(o),b=y?y.get("type"):void 0,C=i?{init:Mm(i,!0,l)}:{value:[]};return d.push({events:{signal:t.name+spe},update:gl(b)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:s,...C,on:d},{name:f,...i?{init:Mm(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}{const f=o===Sr?0:1,h=t.name+"_init";return[{name:s,...i?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]},on:d}]}}(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=kt(e.projectionName()),l=e.projectionName()+"_center",{x:c,y:u}=t.project.hasChannel,d=c&&c.signals.visual,f=u&&u.signals.visual,h=c?s&&s[c.index]:`${l}[0]`,y=u?s&&s[u.index]:`${l}[1]`,b=q=>e.getSizeSignalRef(q).signal,C=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":b("width")}, ${f?f+"[1]":b("height")}]]`;s&&(n.unshift({name:i+"_init",init:`[scale(${a}, [${c?h[0]:h}, ${u?y[0]:y}]), scale(${a}, [${c?h[1]:h}, ${u?y[1]:y}])]`}),(!c||!u)&&(n.find(ne=>ne.name===l)||n.unshift({name:l,update:`invert(${a}, [${b("width")}/2, ${b("height")}/2])`})));const I=`vlSelectionTuples(intersect(${C}, {markname: ${kt(e.getName("marks"))}}, unit.mark), {unit: ${Em(e)}})`,z=o.map(q=>q.signals.visual);return n.concat({name:r,on:[{events:[...z.length?[{signal:z.join(" || ")}]:[],...s?[{signal:eM}]:[]],update:I}]})}{if(!Sf.defined(t)){const c=i+spe,u=o.map(d=>{const f=d.channel,{data:h,visual:y}=d.signals,b=kt(e.scaleName(f)),k=gl(e.getScaleComponent(f).get("type"))?"+":"";return`(!isArray(${h}) || (${k}invert(${b}, ${y})[0] === ${k}${h}[0] && ${k}invert(${b}, ${y})[1] === ${k}${h}[1]))`});u.length&&n.push({name:c,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:u.join(" && ")+` ? ${c} : {}`}]})}const a=o.map(c=>c.signals.data),l=`unit: ${Em(e)}, fields: ${i+J1}, values`;return n.concat({name:r,...s?{init:`{${l}: ${Mm(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(jr(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===eM).length||n.unshift({name:eM,value:null,on:[{events:"timer{1}",update:`${eM} === null ? {} : ${eM}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:o}=t.project.hasChannel,s=r?.signals.visual,a=o?.signals.visual,l=`data(${kt(t.name+xm)})`;if(Sf.defined(t)||!r&&!o)return n;const c={x:void 0!==r?{signal:`${s}[0]`}:{value:0},y:void 0!==o?{signal:`${a}[0]`}:{value:0},x2:void 0!==r?{signal:`${s}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${a}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const b of ft(c))c[b]=[{test:`${l}.length && ${l}[0].unit === ${Em(e)}`,...c[b]},{value:0}];const{fill:u,fillOpacity:d,cursor:f,...h}=t.mark,y=ft(h).reduce((b,C)=>(b[C]=[{test:[void 0!==r&&`${s}[0] !== ${s}[1]`,void 0!==o&&`${a}[0] !== ${a}[1]`].filter(k=>k).join(" && "),value:h[C]},{value:null}],b),{});return[{name:`${i+ob}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:d}},update:c}},...n,{name:i+ob,type:"rect",clip:!0,encode:{enter:{...f?{cursor:{value:f}}:{},fill:{value:"transparent"}},update:{...c,...y}}}]}},Ost={defined:e=>"point"===e.type,signals:(e,t,n)=>{const i=t.name,r=i+J1,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=os(e.component.selection??{}).reduce((d,f)=>"interval"===f.type?d.concat(f.name+ob):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(a?` && ${a}`:"");let c=`unit: ${Em(e)}, `;c+=t.project.hasSelectionId?`${Xc}: ${s}[${kt(Xc)}]`:`fields: ${r}, values: [${o.items.map(f=>e.fieldDef(f.channel)?.bin?`[${s}[${kt(e.vgField(f.channel,{}))}], ${s}[${kt(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${kt(f.field)}]`).join(", ")}]`;const u=t.events;return n.concat([{name:i+mp,on:u?[{events:u,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}};function sb(e,t,n,i){const r=KD(t)&&t.condition,o=i(t);return r?{[n]:[...Ht(r).map(l=>{const c=i(l);if(function xrt(e){return e.param}(l)){const{param:u,empty:d}=l;return{test:Ppe(e,{param:u,empty:d}),...c}}return{test:yT(e,l.test),...c}}),...void 0!==o?[o]:[]]}:void 0!==o?{[n]:o}:{}}function F6(e,t="text"){return sb(e,e.encoding[t],t,i=>hT(i,e.config))}function hT(e,t,n="datum"){if(e){if(Yc(e))return vr(e.value);if($n(e)){const{format:i,formatType:r}=eT(e);return t6({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function lpe(e,t={}){const{encoding:n,markDef:i,config:r,stack:o}=e,s=n.tooltip;if(ot(s))return{tooltip:upe({tooltip:s},o,r,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return sb(e,s,"tooltip",l=>{const c=hT(l,r,a);if(c)return c;if(null===l)return;let u=Wi("tooltip",i,r);return!0===u&&(u={content:"encoding"}),zt(u)?{value:u}:jt(u)?hn(u)?u:"encoding"===u.content?upe(n,o,r,t):{signal:a}:void 0})}}function cpe(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},o={},s=i?"datum.datum":"datum",a=[];function l(u,d){const f=dm(d),h=sa(u)?u:{...u,type:e[f].type},b=Ht(h.title||s6(h,r)).join(", ").replaceAll(/"/g,'\\"');let C;if(Fo(d)){const k="x"===d?"x2":"y2",O=od(e[k]);if(ss(h.bin)&&O){const I=Ft(h,{expr:s}),z=Ft(O,{expr:s}),{format:q,formatType:ne}=eT(h);C=q1(I,z,q,ne,r),o[k]=!0}}if((Fo(d)||d===Yl||d===zc)&&t&&t.fieldChannel===d&&"normalize"===t.offset){const{format:k,formatType:O}=eT(h);C=t6({fieldOrDatumDef:h,format:k,formatType:O,expr:s,config:r,normalizeStack:!0}).signal}C??(C=hT(h,r,s).signal),a.push({channel:d,key:b,value:C})}u6(e,(u,d)=>{Mt(u)?l(u,d):ZD(u)&&l(u.condition,d)});const c={};for(const{channel:u,key:d,value:f}of a)!o[u]&&!c[d]&&(c[d]=f);return c}function upe(e,t,n,{reactiveGeom:i}={}){const r=cpe(e,t,n,{reactiveGeom:i}),o=ep(r).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Dst(e){const{markDef:t,config:n}=e,i=Wi("aria",t,n);return!1===i?{}:{...i?{aria:i}:{},...Tst(e),...Pst(e)}}function Tst(e){const{mark:t,markDef:n,config:i}=e;if(!1===i.aria)return{};const r=Wi("ariaRoleDescription",n,i);return null!=r?{ariaRoleDescription:{value:r}}:t in pnt?{}:{ariaRoleDescription:{value:t}}}function Pst(e){const{encoding:t,markDef:n,config:i,stack:r}=e,o=t.description;if(o)return sb(e,o,"description",l=>hT(l,e.config));const s=Wi("description",n,i);if(null!=s)return{description:vr(s)};if(!1===i.aria)return{};const a=cpe(t,r,i);return nr(a)?void 0:{description:{signal:ep(a).map(([l,c],u)=>`"${u>0?"; ":""}${l}: " + (${c})`).join(" + ")}}}function $o(e,t,n={}){const{markDef:i,encoding:r,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;return void 0===a&&(l??(l=Wi(e,i,o,{vgChannel:s,ignoreVgConfig:!0})),void 0!==l&&(a=vr(l))),sb(t,r[e],s??e,u=>e6({channel:e,channelDef:u,markDef:i,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function dpe(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:o}=n,s=t.filled??Wi("filled",n,r),a=fi(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Wi(!0===s?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[!0===s&&"color"]??a,c=Wi(!1===s?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[!1===s&&"color"],u=s?"fill":"stroke",d={...l?{fill:vr(l)}:{},...c?{stroke:vr(c)}:{}};return n.color&&(s?n.fill:n.stroke)&&wt(Qde("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...$o("color",e,{vgChannel:u,defaultValue:s?l:c}),...$o("fill",e,{defaultValue:i.fill?l:void 0}),...$o("stroke",e,{defaultValue:i.stroke?c:void 0})}}function Rst(e){const{encoding:t,mark:n}=e,i=t.order;return!dp(n)&&Yc(i)?sb(e,i,"zindex",r=>vr(r.value)):{}}function ab({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const o=`${e}Offset`,s=t[o],a=n[o];if(("xOffset"===o||"yOffset"===o)&&a)return{offsetType:"encoding",offset:e6({channel:o,channelDef:a,markDef:t,config:i?.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:vr(s),bandPosition:r})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Os(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:o,config:s,stack:a}=t,l=r[e],c=r[Ju(e)],u=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=ab({channel:e,markDef:o,encoding:r,model:t,bandPosition:.5}),y=L6({model:t,defaultPos:n,channel:e,scaleName:u,scale:d}),b=!l&&Fo(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:function Ist(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:o,markDef:s}=e;if($n(n)&&r&&t===r.fieldChannel){if(Mt(n)){let a=n.bandPosition;if(void 0===a&&"text"===s.type&&("radius"===t||"theta"===t)&&(a=.5),void 0!==a)return qD({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return vm(n,i,{suffix:"end"},{offset:o})}return QH(e)}({channel:e,channelDef:l,channel2Def:c,markDef:o,config:s,scaleName:u,scale:d,stack:a,offset:f,defaultRef:y,bandPosition:"encoding"===h?0:void 0});return b?{[i||e]:b}:void 0}function L6({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:o,config:s}=e;return()=>{const a=dm(n),l=sp(n),c=Wi(n,o,s,{vgChannel:l});if(void 0!==c)return G1(n,c);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){if(!fi(["log","time","utc"],r.get("type"))&&r.domainDefinitelyIncludesZero())return{scale:i,value:0}}if("zeroOrMin"===t)return"y"===a?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Ia(n)],mult:.5}}}}const Fst={left:"x",center:"xc",right:"x2"},Lst={top:"y",middle:"yc",bottom:"y2"};function fpe(e,t,n,i="middle"){if("radius"===e||"theta"===e)return sp(e);const r="x"===e?"align":"baseline",o=Wi(r,t,n);let s;return hn(o)?(wt(function qnt(e){return`The ${e} for range marks cannot be an expression`}(r)),s=void 0):s=o,"x"===e?Fst[s||("top"===i?"left":"center")]:Lst[s||i]}function pT(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?hpe(e,t,{defaultPos:n,defaultPos2:i}):Os(e,t,{defaultPos:n})}function hpe(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:o}=t,s=Ju(e),a=Ia(e),l=function Nst(e,t,n){const{encoding:i,mark:r,markDef:o,stack:s,config:a}=e,l=dm(n),c=Ia(n),u=sp(n),d=i[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:y}=ab(n in i||n in o?{channel:n,markDef:o,encoding:i,model:e}:{channel:l,markDef:o,encoding:i,model:e});if(!d&&("x2"===n||"y2"===n)&&(i.latitude||i.longitude)){const C=Ia(n),k=e.markDef[C];return null!=k?{[C]:{value:k}}:{[u]:{field:e.getName(n)}}}const b=function $st({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:c}){return $n(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?vm(t,o,{suffix:"start"},{offset:l}):QH({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:i,config:r,offset:l,defaultRef:c})}({channel:n,channelDef:d,channel2Def:i[n],markDef:o,config:a,scaleName:f,scale:h,stack:s,offset:y,defaultRef:void 0});return void 0!==b?{[u]:b}:gT(n,o)||gT(n,{[n]:ND(n,o,a.style),[c]:ND(c,o,a.style)})||gT(n,a[r])||gT(n,a.mark)||{[u]:L6({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}(t,i,s);return{...Os(e,t,{defaultPos:n,vgChannel:l[a]?fpe(e,r,o):sp(e)}),...l}}function gT(e,t){const n=Ia(e),i=sp(e);if(void 0!==t[i])return{[i]:G1(e,t[i])};if(void 0!==t[e])return{[i]:G1(e,t[e])};if(t[n]){const r=t[n];if(!ym(r))return{[n]:G1(e,r)};wt(function znt(e){return`Position range does not support relative band size for ${e}.`}(n))}}function gp(e,t){const{config:n,encoding:i,markDef:r}=e,o=r.type,s=Ju(t),a=Ia(t),l=i[t],c=i[s],u=e.getScaleComponent(t),d=u?u.get("type"):void 0,f=r.orient,h=i[a]??i.size??Wi("size",r,n,{vgChannel:a}),y=Ede(t),b="bar"===o&&("x"===t?"vertical"===f:"horizontal"===f);return!Mt(l)||!(fr(l.bin)||ss(l.bin)||l.timeUnit&&!c)||h&&!ym(h)||i[y]||No(d)?($n(l)&&No(d)||b)&&!c?function zst(e,t,n){const{markDef:i,encoding:r,config:o,stack:s}=n,a=i.orient,l=n.scaleName(t),c=n.getScaleComponent(t),u=Ia(t),d=Ju(t),f=Ede(t),h=n.scaleName(f),y=n.getScaleComponent(CH(t)),b="horizontal"===a&&"y"===t||"vertical"===a&&"x"===t;let C;(r.size||i.size)&&(b?C=$o("size",n,{vgChannel:u,defaultRef:vr(i.size)}):wt(function tit(e){return`Cannot apply size to non-oriented mark "${e}".`}(i.type)));const k=!!C,O=jfe({channel:t,fieldDef:e,markDef:i,config:o,scaleType:c?.get("type"),useVlSizeChannel:b});C=C||{[u]:Bst(u,h||l,y||c,o,O,!!e,i.type)};const z=fpe(t,i,o,"band"===c?.get("type")&&ym(O)&&!k?"top":"middle"),q="xc"===z||"yc"===z,{offset:ne,offsetType:K}=ab({channel:t,markDef:i,encoding:r,model:n,bandPosition:q?.5:0}),le=QH({channel:t,channelDef:e,markDef:i,config:o,scaleName:l,scale:c,stack:s,offset:ne,defaultRef:L6({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:c}),bandPosition:q?"encoding"===K?0:.5:hn(O)?{signal:`(1-${O})/2`}:ym(O)?(1-O.band)/2:0});if(u)return{[z]:le,...C};{const me=sp(d),ge=C[u],ye=ne?{...ge,offset:ne}:ge;return{[z]:le,[me]:ot(le)?[le[0],{...le[1],offset:ye}]:{...le,offset:ye}}}}(l,t,e):hpe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function Hst({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:o,encoding:s}=i,a=i.getScaleComponent(n),l=i.scaleName(n),c=a?a.get("type"):void 0,u=a.get("reverse"),d=jfe({channel:n,fieldDef:e,markDef:o,config:r,scaleType:c}),h=i.component.axes[n]?.[0]?.get("translate")??.5,y=Fo(n)?Wi("binSpacing",o,r)??0:0,b=Ju(n),C=sp(n),k=sp(b),O=Cf("minBandSize",o,r),{offset:I}=ab({channel:n,markDef:o,encoding:s,model:i,bandPosition:0}),{offset:z}=ab({channel:b,markDef:o,encoding:s,model:i,bandPosition:0}),q=function vrt({scaleName:e,fieldDef:t}){const n=Ft(t,{expr:"datum"});return`abs(scale("${e}", ${Ft(t,{expr:"datum",suffix:"end"})}) - scale("${e}", ${n}))`}({fieldDef:e,scaleName:l}),ne=ppe(n,y,u,h,I,O,q),K=ppe(b,y,u,h,z??I,O,q),le=hn(d)?{signal:`(1-${d.signal})/2`}:ym(d)?(1-d.band)/2:.5;if(fr(e.bin)||e.timeUnit)return{[k]:gpe({fieldDef:e,scaleName:l,bandPosition:le,offset:K}),[C]:gpe({fieldDef:e,scaleName:l,bandPosition:hn(le)?{signal:`1-${le.signal}`}:1-le,offset:ne})};if(ss(e.bin)){const me=vm(e,l,{},{offset:K});if(Mt(t))return{[k]:me,[C]:vm(t,l,{},{offset:ne})};if(fm(e.bin)&&e.bin.step)return{[k]:me,[C]:{signal:`scale("${l}", ${Ft(e,{expr:"datum"})} + ${e.bin.step})`,offset:ne}}}wt(ife(b))}({fieldDef:l,fieldDef2:c,channel:t,model:e})}function Bst(e,t,n,i,r,o,s){if(ym(r)){if(!n)return{mult:r.band,field:{group:e}};{const l=n.get("type");if("band"===l){let c=`bandwidth('${t}')`;1!==r.band&&(c=`${r.band} * ${c}`);const u=Cf("minBandSize",{type:s},i);return{signal:u?`max(${jc(u)}, ${c})`:c}}1!==r.band&&(wt(function Znt(e){return`Cannot use the relative band size with ${e} scale.`}(l)),r=void 0)}}else{if(hn(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(cp(l)&&Xi(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:c,rectBandPaddingInner:u}=i.scale,d=Kr(l,"bar"===s?c:u);if(hn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Xi(d))return{signal:`${1-d} * ${e}`}}return{value:cT(i.view,e)-2}}function ppe(e,t,n,i,r,o,s){if(_de(e))return 0;const a="x"===e||"y2"===e,l=a?-t/2:t/2;if(hn(n)||hn(r)||hn(i)||o){const c=jc(n),u=jc(r),d=jc(i),f=jc(o),y=o?`(${s} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${s})) : ${l})`:l;return{signal:(d?`${d} + `:"")+(c?`(${c} ? -1 : 1) * `:"")+(u?`(${u} + ${y})`:y)}}return r=r||0,i+(n?-r-l:+r+l)}function gpe({fieldDef:e,scaleName:t,bandPosition:n,offset:i}){return qD({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i})}const Vst=new Set(["aria","width","height"]);function Zl(e,t){const{fill:n,stroke:i}="include"===t.color?dpe(e):{};return{...Ust(e.markDef,t),...mpe(e,"fill",n),...mpe(e,"stroke",i),...$o("opacity",e),...$o("fillOpacity",e),...$o("strokeOpacity",e),...$o("strokeWidth",e),...$o("strokeDash",e),...Rst(e),...lpe(e),...F6(e,"href"),...Dst(e)}}function mpe(e,t,n){const{config:i,mark:r,markDef:o}=e;if("hide"===Wi("invalid",o,i)&&n&&!dp(r)){const a=function jst(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const l=a.get("type"),c=e.vgField(s,{expr:"datum"});c&&gl(l)&&(o[c]=!0)}return o},{}),r=ft(i);if(r.length>0){const o=t?"||":"&&";return r.map(s=>JH(s,t)).join(` ${o} `)}}(e,{invalid:!0,channels:FD});if(a)return{[t]:[{test:a,value:null},...Ht(n)]}}return n?{[t]:n}:{}}function Ust(e,t){return hnt.reduce((n,i)=>(!Vst.has(i)&&void 0!==e[i]&&"ignore"!==t[i]&&(n[i]=vr(e[i])),n),{})}function N6(e){const{config:t,markDef:n}=e;if(Wi("invalid",n,t)){const r=function Wst(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const l=a.get("type"),c=e.vgField(s,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});c&&gl(l)&&(o[c]=!0)}return o},{}),r=ft(i);if(r.length>0){const o=t?"||":"&&";return r.map(s=>JH(s,t)).join(` ${o} `)}}(e,{channels:ed});if(r)return{defined:{signal:r}}}return{}}function _pe(e,t){if(void 0!==t)return{[e]:vr(t)}}const $6="voronoi",ype={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName($6)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,o=e.mark;if(dp(o))return wt(function vnt(e){return`The "nearest" transform is not supported for ${e} marks.`}(o)),n;const s={name:e.getName($6),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...lpe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((c,u)=>{const d=c.name??"";d===e.component.mark[0].name?a=u:d.indexOf($6)>=0&&(l=!0)}),l||n.splice(a+1,0,s),n}},vpe={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!y6(e.bind),parse:(e,t,n)=>Ope(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,o=t.bind,s=t.init&&t.init[0],a=ype.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,c)=>{const u=Er(`${i}_${l.field}`);n.filter(f=>f.name===u).length||n.unshift({name:u,...s?{init:Mm(s[c])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${kt(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.filter(c=>c.name===i+mp)[0],s=i+J1,a=r.items.map(c=>Er(`${i}_${c.field}`)),l=a.map(c=>`${c} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},mT="_toggle",bpe={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+mT,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+mp,i=t.name+mT;return`${i} ? null : ${n}, `+("global"===t.resolve?`${i} ? null : true, `:`${i} ? null : {unit: ${Em(e)}}, `)+`${i} ? ${n} : null`}},Gst={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=zt(t.clear)?Qh(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(vpe.defined(t))for(const i of t.project.items){const r=n.findIndex(o=>o.name===Er(`${t.name}_${i.field}`));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,o){-1!==r&&n[r].on&&n[r].on.push({events:t.clear,update:o})}if("interval"===t.type)for(const r of t.project.items){const o=n.findIndex(s=>s.name===r.signals.visual);i(o,"[0, 0]"),-1===o&&i(n.findIndex(a=>a.name===r.signals.data),"null")}else{let r=n.findIndex(o=>o.name===t.name+mp);i(r,"null"),bpe.defined(t)&&(r=n.findIndex(o=>o.name===t.name+mT),i(r,"false"))}return n}},wpe={defined:e=>{const t="global"===e.resolve&&e.bind&&y6(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Xc;return t&&!n&&wt("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:(e,t,n)=>{const i=In(n);if(i.select=zt(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},Ope(t,i),jt(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Ht(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const r=v6(t.bind)?t.bind.legend:"click",o=zt(r)?Qh(r,"view"):Ht(r);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=v6(t.bind)&&t.bind.legend,o=s=>a=>{const l=In(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Er(s.field)}_legend`,l=`${i}_${a}`;if(0===n.filter(u=>u.name===l).length){const u=r.merge.map(o(`${a}_symbols`)).concat(r.merge.map(o(`${a}_labels`))).concat(r.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(f=>f.name===i+mp),s=i+J1,a=r.items.filter(f=>f.hasLegend).map(f=>Er(`${i}_${Er(f.field)}_legend`)),c=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(f=>({signal:f})),update:c}):a.length>0&&(o.update=c,delete o.value,delete o.on);const u=n.find(f=>f.name===i+mT),d=v6(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push({...u.on[0],events:d}):u.on[0].events=d),n}},Cpe="_translate_anchor",Mpe="_translate_delta",Xst={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Sf.defined(t),o=i+Cpe,{x:s,y:a}=t.project.hasChannel;let l=Qh(t.translate,"scope");return r||(l=l.map(c=>(c.between[0].markname=i+ob,c))),n.push({name:o,value:{},on:[{events:l.map(c=>c.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==s?`, extent_x: ${r?I6(e,Sr):`slice(${s.signals.visual})`}`:"")+(void 0!==a?`, extent_y: ${r?I6(e,Io):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+Mpe,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==s&&xpe(e,t,s,"width",n),void 0!==a&&xpe(e,t,a,"height",n),n}};function xpe(e,t,n,i,r){const o=t.name,s=o+Cpe,a=o+Mpe,l=n.channel,c=Sf.defined(t),u=r.filter(q=>q.name===n.signals[c?"data":"visual"])[0],d=e.getSizeSignalRef(i).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),y=f&&f.get("reverse"),C=`${s}.extent_${l}`,z=`${c&&f?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${C}, ${c?l===Sr?y?"":"-":y?"-":"":""}${a}.${l} / ${c?`${d}`:`span(${C})`}${c?"pow"===h?`, ${f.get("exponent")??1}`:"symlog"===h?`, ${f.get("constant")??1}`:"":""})`;u.on.push({events:{signal:a},update:c?z:`clampRange(${z}, 0, ${d})`})}const Epe="_zoom_anchor",Spe="_zoom_delta",Kst={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Sf.defined(t),o=i+Spe,{x:s,y:a}=t.project.hasChannel,l=kt(e.scaleName(Sr)),c=kt(e.scaleName(Io));let u=Qh(t.zoom,"scope");return r||(u=u.map(d=>(d.markname=i+ob,d))),n.push({name:i+Epe,on:[{events:u,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&kpe(e,t,s,"width",n),void 0!==a&&kpe(e,t,a,"height",n),n}};function kpe(e,t,n,i,r){const o=t.name,s=n.channel,a=Sf.defined(t),l=r.filter(O=>O.name===n.signals[a?"data":"visual"])[0],c=e.getSizeSignalRef(i).signal,u=e.getScaleComponent(s),d=u&&u.get("type"),f=a?I6(e,s):l.name,h=o+Spe,k=`${a&&u?"log"===d?"zoomLog":"symlog"===d?"zoomSymlog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear"}(${f}, ${o}${Epe}.${s}, ${h}${a?"pow"===d?`, ${u.get("exponent")??1}`:"symlog"===d?`, ${u.get("constant")??1}`:"":""})`;l.on.push({events:{signal:h},update:a?k:`clampRange(${k}, 0, ${c})`})}const xm="_store",mp="_tuple",Zst="_modify",Ape="vlSelectionResolve",_T=[Ost,kst,Est,bpe,vpe,Sf,wpe,Gst,Xst,Kst,ype];function Em(e,{escape:t}={escape:!0}){let n=t?kt(e.name):e.name;const i=function Qst(e){let t=e.parent;for(;t&&!Qc(t);)t=t.parent;return t}(e);if(i){const{facet:r}=i;for(const o of Kl)r[o]&&(n+=` + '__facet_${o}_' + (facet[${kt(i.vgField(o))}])`)}return n}function B6(e){return os(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Ope(e,t){(zt(t.select)||!t.select.on)&&delete e.events,(zt(t.select)||!t.select.clear)&&delete e.clear,(zt(t.select)||!t.select.toggle)&&delete e.toggle}function z6(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...z6(e.object)),t.push(...z6(e.property))),t)}function Dpe(e){return"MemberExpression"===e.object.type?Dpe(e.object):"datum"===e.object.name}function Tpe(e){const t=e4(e),n=new Set;return t.visit(i=>{"MemberExpression"===i.type&&Dpe(i)&&n.add(z6(i).slice(1).join("."))}),n}class lb extends Zi{clone(){return new lb(null,this.model,In(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=yT(this.model,this.filter,this),this._dependentFields=Tpe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Ppe(e,t,n,i="datum"){const r=zt(t)?t:t.param,o=Er(r),s=kt(o+xm);let a;try{a=e.getSelectionComponent(o,r)}catch{return`!!${o}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const u=`${a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${s}, ${i}${"global"===a.resolve?")":`, ${kt(a.resolve)})`}`,d=`length(data(${s}))`;return!1===t.empty?`${d} && ${u}`:`!${d} || ${u}`}function Rpe(e,t,n){const i=Er(t),r=n.encoding;let s,o=n.field;try{s=e.getSelectionComponent(i,t)}catch{return i}if(r||o){if(r&&!o){const a=s.project.items.filter(l=>l.channel===r);!a.length||a.length>1?(o=s.project.items[0].field,wt((a.length?"Multiple ":"No ")+`matching ${kt(r)} encoding found for selection ${kt(n.param)}. Using "field": ${kt(o)}.`)):o=a[0].field}}else o=s.project.items[0].field,s.project.items.length>1&&wt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${kt(o)}.`);return`${s.name}[${kt(ql(o))}]`}function yT(e,t,n){return B1(t,i=>zt(i)?i:function Bit(e){return e?.param}(i)?Ppe(e,i,n):mfe(i))}function H6(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function tM(e,t,n,i={header:!1}){const{disable:r,orient:o,scale:s,labelExpr:a,title:l,zindex:c,...u}=e.combine();if(!r){for(const d in u){const f=$rt[d],h=u[d];if(f&&f!==t&&"both"!==f)delete u[d];else if(Z1(h)){const{condition:y,...b}=h,C=Ht(y),k=the[d];if(k){const{vgProp:O,part:I}=k;H6(u,I,O,[...C.map(q=>{const{test:ne,...K}=q;return{test:yT(null,ne),...K}}),b]),delete u[d]}else if(null===k){const O={signal:C.map(I=>{const{test:z,...q}=I;return`${yT(null,z)} ? ${Lde(q)} : `}).join("")+Lde(b)};u[d]=O}}else if(hn(h)){const y=the[d];if(y){const{vgProp:b,part:C}=y;H6(u,C,b,h),delete u[d]}}fi(["labelAlign","labelBaseline"],d)&&null===u[d]&&delete u[d]}if("grid"===t){if(!u.grid)return;if(u.encode){const{grid:d}=u.encode;u.encode={...d?{grid:d}:{}},nr(u.encode)&&delete u.encode}return{scale:s,orient:o,...u,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Kr(c,0)}}{if(!i.header&&e.mainExtracted)return;if(void 0!==a){let f=a;u.encode?.labels?.update&&hn(u.encode.labels.update.text)&&(f=lm(a,"datum.label",u.encode.labels.update.text.signal)),H6(u,"labels","text",{signal:f})}if(null===u.labelAlign&&delete u.labelAlign,u.encode){for(const f of nhe)e.hasAxisPart(f)||delete u.encode[f];nr(u.encode)&&delete u.encode}const d=function tat(e,t){if(e)return ot(e)&&!lp(e)?e.map(n=>s6(n,t)).join(", "):e}(l,n);return{scale:s,orient:o,grid:!1,...d?{title:d}:{},...u,...!1===n.aria?{aria:!1}:{},zindex:Kr(c,0)}}}}function Ipe(e){const{axes:t}=e.component,n=[];for(const i of ed)if(t[i])for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const o="x"===i?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}return n}function Fpe(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if("axisOrient"===r){const o="x"===n?"bottom":"left",s=t["x"===n?"axisBottom":"axisLeft"]||{},a=t["x"===n?"axisTop":"axisRight"]||{},l=new Set([...ft(s),...ft(a)]),c={};for(const u of l.values())c[u]={signal:`${i.signal} === "${o}" ? ${jc(s[u])} : ${jc(a[u])}`};return c}return t[r]})])}function rat(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=Ht(r);for(const o of r)n.push(t.style[o])}}return Object.assign.apply(null,n)}function V6(e,t,n,i={}){const r=$de(e,n,t);if(void 0!==r)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==i[o]?.[e])return{configFrom:o,configValue:i[o][e]};return{}}const Lpe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function oat(e,t){return!No(e)&&Mt(t)&&!fr(t?.bin)&&!ss(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function sat(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||$pe(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||Npe(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function lat(e,t){if("x"===t&&fi(["quantitative","temporal"],e))return!0}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function cat(e,t,n,i){if(n&&!jt(i)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy"}(t.type,n,Mt(t)&&!!t.timeUnit,Mt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const o="x"===e?"width":"y"===e?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function dat({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!No(t)&&"log"!==t){if(Mt(e)){if(fr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&fi(["month","hours","day","quarter"],Lo(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:function fat({format:e,fieldOrDatumDef:t}){if("d"===e)return 1;if(Mt(t)){const{timeUnit:n}=t;if(n){const i=hfe(n);if(i)return{signal:i}}}},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const i=Bpe(t,n);if(void 0!==i)return i;const r=t.typedFieldDef(n),s=t.fieldDef("x"===n?"x2":"y2");return zde(r?[Vfe(r)]:[],Mt(s)?[Vfe(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function hat(e,t){const n=e.values;return ot(n)?ehe(t,n):hn(n)?n:void 0}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function pat(e,t){return"rect"===e&&JD(t)?1:0}(n,t)};function U6(e){return`(((${e.signal} % 360) + 360) % 360)`}function Npe(e,t,n,i){if(void 0!==e){if("x"===n){if(hn(e)){const r=U6(e);return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${hn(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}return 45<e&&e<135||225<e&&e<315?"middle":hn(t)?{signal:`${t.signal} ${e<=45||315<=e?"===":"!=="} "top" ? "bottom" : "top"`}:(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(hn(e)){const r=U6(e);return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${hn(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}return e<=45||315<=e||135<=e&&e<=225?i?"middle":null:hn(t)?{signal:`${t.signal} ${45<=e&&e<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function $pe(e,t,n){if(void 0===e)return;const i="x"===n,r=i?0:90,o=i?"bottom":"left";if(hn(e)){const s=U6(e);return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${hn(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}return(e+r)%180==0?i?null:"center":hn(t)?{signal:`${t.signal} ${r<e&&e<180+r?"===":"!=="} "${o}" ? "left" : "right"`}:(r<e&&e<180+r)==(t===o)?"left":"right"}function Bpe(e,t){const n="x"===t?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),o=i?i.title:void 0,s=r?r.title:void 0;return o&&s?Hde(o,s):o||s||(void 0!==o?o:void 0!==s?s:void 0)}class cb extends Zi{clone(){return new cb(null,In(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Tpe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(wm(i)&&Hfe(i.sort)){const{field:o,timeUnit:s}=i,a=i.sort,l=a.map((c,u)=>`${mfe({field:o,timeUnit:s,equal:c})} ? ${u} : `).join("")+a.length;t=new cb(t,{calculate:l,as:ub(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${di(this.transform)}`}}function ub(e,t,n){return Ft(e,{prefix:t,suffix:"sort_index",...n??{}})}function vT(e,t){return fi(["top","bottom"],t)?"column":fi(["left","right"],t)||"row"===e?"row":"column"}function db(e,t,n,i){return Kr((t||{})[e],("row"===i?n.headerRow:"column"===i?n.headerColumn:n.headerFacet)[e],n.header[e])}function bT(e,t,n,i){const r={};for(const o of e){const s=db(o,t||{},n,i);void 0!==s&&(r[o]=s)}return r}const j6=["row","column"],W6=["header","footer"];function gat(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=bT(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=vT(t,a),c=H1(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...Hpe(c,l),...zpe(l,c,o),...Vpe(i,r,t,rot,bhe)}}}function zpe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=$pe(t,"row"===e?"left":"top","row"===e?"y":"x");return i?{align:i}:{}}function Hpe(e,t){const n=Npe(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function mat(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of W6)if(n[r])for(const o of n[r]){const s=yat(e,t,r,n,o);null!=s&&i.push(s)}return i}function _at(e,t){const{sort:n}=e;return id(n)?{field:Ft(n,{expr:"datum"}),order:n.order??"ascending"}:ot(n)?{field:ub(e,t,{expr:"datum"}),order:"ascending"}:{field:Ft(e,{expr:"datum"}),order:n??"ascending"}}function G6(e,t,n){const{format:i,formatType:r,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=bT(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),c=t6({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,u=vT(t,a);return{text:{signal:l?lm(lm(l,"datum.label",c),"datum.value",Ft(e,{expr:"parent"})):c},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...Hpe(o,u),...zpe(u,o,s),...Vpe(n,e,t,oot,whe)}}function yat(e,t,n,i,r){if(r){let o=null;const{facetFieldDef:s}=i,a=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:d}=bT(["labelOrient"],s.header,a,t);("row"===t&&!fi(["top","bottom"],d)||"column"===t&&!fi(["left","right"],d))&&(o=G6(s,t,a))}const l=Qc(e)&&!Y1(e.facet),c=r.axes,u=c?.length>0;if(o||u){const d="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:_at(s,t)}:{},...u&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{},...u?{axes:c}:{}}}}return null}const vat={column:{start:0,end:1},row:{start:1,end:0}};function bat(e,t){return vat[t][e]}function Vpe(e,t,n,i,r){const o={};for(const s of i){if(!r[s])continue;const a=db(s,t?.header,e,n);void 0!==a&&(o[r[s]]=a)}return o}function q6(e){return[...wT(e,"width"),...wT(e,"height"),...wT(e,"childWidth"),...wT(e,"childHeight")]}function wT(e,t){const n="width"===t?"x":"y",i=e.component.layoutSize.get(t);if(!i||"merged"===i)return[];const r=e.getSizeSignalRef(t).signal;if("step"===i){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(No(s)&&cp(a)){const l=e.scaleName(n);return Qc(e.parent)&&"independent"===e.parent.component.resolve.scale[n]?[Upe(l,a)]:[Upe(l,a),{name:r,update:jpe(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==i){const o=r.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",l=`isFinite(${s}) ? ${s} : ${M6(e.config.view,o?"width":"height")}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}return[{name:r,value:i}]}function Upe(e,t){const n=`${e}_step`;return hn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function jpe(e,t,n){const i=t.get("type"),r=t.get("padding"),o=Kr(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s="band"===i?void 0!==s?s:r:1,`bandspace(${n}, ${jc(s)}, ${jc(o)}) * ${e}_step`}function Wpe(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Gpe(e,t){return ft(e).reduce((n,i)=>({...n,...sb(t,e[i],i,o=>vr(o.value))}),{})}function qpe(e,t){if(Qc(t))return"theta"===e?"independent":"shared";if(pb(t))return"shared";if(lV(t))return Fo(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function Y6(e,t){const n=e.scale[t],i=Fo(t)?"axis":"legend";return"independent"===n?("shared"===e[i][t]&&wt(function sit(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(t)),"independent"):e[i][t]||"shared"}const Cat={...xhe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Ype=ft(Cat);class Mat extends Ef{}const Xpe={symbols:function xat(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:o}){if("symbol"!==o)return;const{markDef:s,encoding:a,config:l,mark:c}=n,u=s.filled&&"trail"!==c;let d={...mnt({},n,lrt),...dpe(n,{filled:u})};const f=r.get("symbolOpacity")??l.legend.symbolOpacity,h=r.get("symbolFillColor")??l.legend.symbolFillColor,y=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,b=void 0===f?Kpe(a.opacity)??s.opacity:void 0;if(d.fill)if("fill"===i||u&&i===Pa)delete d.fill;else if(d.fill.field)h?delete d.fill:(d.fill=vr(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=vr(b??1));else if(ot(d.fill)){const C=X6(a.fill??a.color)??s.fill??(u&&s.color);C&&(d.fill=vr(C))}if(d.stroke)if("stroke"===i||!u&&i===Pa)delete d.stroke;else if(d.stroke.field||y)delete d.stroke;else if(ot(d.stroke)){const C=Kr(X6(a.stroke||a.color),s.stroke,u?s.color:void 0);C&&(d.stroke={value:C})}if(i!==yf){const C=Mt(t)&&Qpe(0,r,t);C?d.opacity=[{test:C,...vr(b??1)},vr(l.legend.unselectedOpacity)]:b&&(d.opacity=vr(b))}return d={...d,...e},nr(d)?void 0:d},gradient:function Eat(e,{model:t,legendType:n,legendCmpt:i}){if("gradient"!==n)return;const{config:r,markDef:o,encoding:s}=t;let a={};const c=void 0===(i.get("gradientOpacity")??r.legend.gradientOpacity)?Kpe(s.opacity)||o.opacity:void 0;return c&&(a.opacity=vr(c)),a={...a,...e},nr(a)?void 0:a},labels:function Sat(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const o=n.legend(i)||{},s=n.config,a=Mt(t)?Qpe(0,r,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:c,formatType:u}=o;let d;bm(u)?d=qc({fieldOrDatumDef:t,field:"datum.value",format:c,formatType:u,config:s}):void 0===c&&void 0===u&&s.customFormatTypes&&("quantitative"===t.type&&s.numberFormatType?d=qc({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):"temporal"===t.type&&s.timeFormatType&&Mt(t)&&void 0===t.timeUnit&&(d=qc({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return nr(f)?void 0:f},entries:function kat(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function Kpe(e){return Zpe(e,(t,n)=>Math.max(t,n.value))}function X6(e){return Zpe(e,(t,n)=>Kr(t,n.value))}function Zpe(e,t){return function Srt(e){const t=e?.condition;return!!t&&(ot(t)||Yc(t))}(e)?Ht(e.condition).reduce(t,e.value):Yc(e)?e.value:void 0}function Qpe(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=kt(n.field);return i.map(o=>`(!length(data(${kt(Er(o)+xm)})) || (${o}[${r}] && indexof(${o}[${r}], datum.value) >= 0))`).join(" || ")}const Jpe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return Ffe(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return Lfe(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function Iat({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Wc(r))return"horizontal"===n?"top"===i||"bottom"===i?ege(t,"width",s,o):s:ege(t,"height",l,a)}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function Fat(e){if(fi(["quantile","threshold","log","symlog"],e))return"greedy"}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??function Oat(e,t,n,i){if("shape"!==t){const r=X6(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>eb(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(qv(n)&&Wc(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function Aat(e,t){const n=e.values;return ot(n)?ehe(t,n):hn(n)?n:void 0}(t,e)};function ege(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function tge(e){const t=jr(e)?function Lat(e){const{encoding:t}=e,n={};for(const i of[Pa,...Mhe]){const r=Mo(t[i]);!r||!e.getScaleComponent(i)||i===Ra&&Mt(r)&&r.type===Kv||(n[i]=Bat(e,i))}return n}(e):function zat(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){tge(i);for(const r of ft(i.component.legends))n.legend[r]=Y6(e.component.resolve,r),"shared"===n.legend[r]&&(t[r]=nge(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of ft(t))for(const r of e.children)!r.component.legends[i]||"shared"===n.legend[i]&&delete r.component.legends[i];return t}(e);return e.component.legends=t,t}function $at(e,t,n,i){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===i?.title)return!0}return e===(n||{})[t]}function Bat(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:o}=e,s=o.legend,a=new Mat({},function Nat(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function Yst(e,t,n){const i=e.fieldDef(t)?.field;for(const r of os(e.component.selection??{})){const o=r.project.hasField[i]??r.project.hasChannel[t];if(o&&wpe.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),o.hasLegend=!0}}}(e,t,a);const l=void 0!==n?!n:s.disable;if(a.set("disable",l,void 0!==n),l)return a;n=n||{};const c=e.getScaleComponent(t).get("type"),u=Mo(r[t]),d=Mt(u)?Lo(u.timeUnit)?.unit:void 0,f=n.orient||o.legend.orient||"right",h=function Dat(e){const{legend:t}=e;return Kr(t.type,function Tat({channel:e,timeUnit:t,scaleType:n}){if(qv(e)){if(fi(["quarter","month","day"],t))return"symbol";if(Wc(n))return"gradient"}return"symbol"}(e))}({legend:n,channel:t,timeUnit:d,scaleType:c}),y=function Pat({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??function Rat(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}({legend:n,legendType:h,orient:f,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:u,legendConfig:s,config:o,scaleType:c,orient:f,legendType:h,direction:y};for(const z of Ype){if("gradient"===h&&z.startsWith("symbol")||"symbol"===h&&z.startsWith("gradient"))continue;const q=z in Jpe?Jpe[z](b):n[z];if(void 0!==q){const ne=$at(q,z,n,e.fieldDef(t));(ne||void 0===o.legend[z])&&a.set(z,q,ne)}}const C=n?.encoding??{},k=a.get("selections"),O={},I={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:a,legendType:h};for(const z of["labels","legend","title","symbols","gradient","entries"]){const q=Gpe(C[z]??{},e),ne=z in Xpe?Xpe[z](q,I):q;void 0!==ne&&!nr(ne)&&(O[z]={...k?.length&&Mt(u)?{name:`${Er(u.field)}_legend_${z}`}:{},...k?.length?{interactive:!!k}:{},update:ne})}return nr(O)||a.set("encode",O,!!n?.encoding),a}function nge(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const o of Ype){const s=hp(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(a,l)=>{switch(o){case"symbolType":return Hat(a,l);case"title":return Vde(a,l);case"type":return r=!0,ml("symbol")}return fT(a,l,o,"legend")});e.setWithExplicit(o,s)}return r&&(e.implicit?.encode?.gradient&&kD(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&kD(e.explicit,["encode","gradient"])),e}function Hat(e,t){return"circle"===t.value?t:e}function ige(e){const t=e.component.legends,n={};for(const r of ft(t)){const o=e.getScaleComponent(r),s=dr(o.get("domains"));if(n[s])for(const a of n[s])nge(a,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return os(n).flat().map(r=>function Uat(e,t){const{disable:n,labelExpr:i,selections:r,...o}=e.combine();if(!n){if(!1===t.aria&&null==o.aria&&(o.aria=!1),o.encode?.symbols){const s=o.encode.symbols.update;s.fill&&"transparent"!==s.fill.value&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(const a of Mhe)o[a]&&delete s[a]}if(o.title||delete o.title,void 0!==i){let s=i;o.encode?.labels?.update&&hn(o.encode.labels.update.text)&&(s=lm(i,"datum.label",o.encode.labels.update.text.signal)),function Vat(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}(o,"labels","text",{signal:s})}return o}}(r,e.config)).filter(r=>void 0!==r)}function rge(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=hn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return fi(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const Gat=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class oge extends Ef{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function sge(e){e.component.projection=jr(e)?function qat(e){if(e.hasProjection){const t=Fa(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?function Yat(e){const t=[],{encoding:n}=e;for(const i of[[Vc,Hc],[Xl,Uc]])(Mo(n[i[0]])||Mo(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ra)&&e.typedFieldDef(Ra).type===Kv&&t.push({signal:e.getName(`geojson_${t.length}`)}),0===t.length&&t.push(e.requestDataName(ar.Main)),t}(e):void 0,o=new oge(e.projectionName(!0),{...Fa(e.config.projection)??{},...t??{}},i,r);return o.get("type")||o.set("type","equalEarth",!1),o}}(e):function Kat(e){if(0===e.children.length)return;let t;for(const i of e.children)sge(i);const n=hH(e.children,i=>{const r=i.component.projection;if(r){if(t){const o=function Xat(e,t){const n=hH(Gat,r=>!!(!bn(e.explicit,r)&&!bn(t.explicit,r)||bn(e.explicit,r)&&bn(t.explicit,r)&&Yu(e.get(r),t.get(r))));if(Yu(e.size,t.size)){if(n)return e;if(Yu(e.explicit,{}))return t;if(Yu(t.explicit,{}))return e}return null}(t,r);return o&&(t=o),!!o}return t=r,!0}return!0});if(t&&n){const i=e.projectionName(!0),r=new oge(i,t.specifiedProjection,t.size,In(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&r.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),i),s.merged=!0)}return r}}(e)}function Zat(e,t,n,i){if(K1(t,n)){const r=jr(e)?e.axis(n)??e.legend(n)??{}:{},o=Ft(t,{expr:"datum"}),s=Ft(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ft(t,{binSuffix:"range",forAs:!0}),formula:q1(o,s,r.format,r.formatType,i)}}return{}}function age(e,t){return`${Tde(e)}_${t}`}function K6(e,t,n){const r=age(nT(n,void 0)??{},t);return e.getName(`${r}_bins`)}function lge(e,t,n){let i,r;i=function Jat(e){return"as"in e}(e)?zt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[Ft(e,{forAs:!0}),Ft(e,{binSuffix:"end",forAs:!0})];const o={...nT(t,void 0)},s=age(o,e.field),{signal:a,extentSignal:l}=function Qat(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,s);if(LD(o.extent)){const u=o.extent;r=Rpe(n,u.param,u),delete o.extent}return{key:s,binComponent:{bin:o,field:e.field,as:[i],...a?{signal:a}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}}}}class cd extends Zi{clone(){return new cd(null,In(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,s)=>{if(sa(o)&&fr(o.bin)){const{key:a,binComponent:l}=lge(o,o.bin,n);r[a]={...l,...r[a],...Zat(n,o,s,n.config)}}return r},{});return nr(i)?null:new cd(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:o}=lge(n,n.bin,i);return new cd(t,{[r]:o})}merge(t,n){for(const i of ft(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Xu([...this.bins[i].as,...t.bins[i].as],di)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(os(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(os(this.bins).map(t=>t.field))}hash(){return`Bin ${di(this.bins)}`}assemble(){return os(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:ql(t.field),as:i,signal:t.signal,...LD(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:ql(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of r)for(let c=0;c<2;c++)n.push({type:"formula",expr:Ft({field:i[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}class Kc extends Zi{clone(){return new Kc(null,new Set(this.dimensions),In(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},o=new Set;return i&&(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:c}=s;if(l)if("count"===l)r["*"]??(r["*"]={}),r["*"].count=new Set([Ft(s,{forAs:!0})]);else{if(bf(l)||ap(l)){const u=bf(l)?"argmin":"argmax",d=l[u];r[d]??(r[d]={}),r[d][u]=new Set([Ft({op:u,field:d},{forAs:!0})])}else r[c]??(r[c]={}),r[c][l]=new Set([Ft(s,{forAs:!0})]);vf(a)&&"unaggregated"===n.scaleDomain(a)&&(r[c]??(r[c]={}),r[c].min=new Set([Ft({field:c,aggregate:"min"},{forAs:!0})]),r[c].max=new Set([Ft({field:c,aggregate:"max"},{forAs:!0})]))}else!function elt(e,t,n,i){const r=jr(i)?i.encoding[Ju(t)]:void 0;if(sa(n)&&jr(i)&&Wfe(n,r,i.markDef,i.config))e.add(Ft(n,{})),e.add(Ft(n,{suffix:"end"})),n.bin&&K1(n,t)&&e.add(Ft(n,{binSuffix:"range"}));else if(vde(t)){const o=yde(t);e.add(i.getName(o))}else e.add(Ft(n));return wm(n)&&function Qit(e){return jt(e)&&"field"in e}(n.scale?.range)&&e.add(n.scale.range.field),e}(o,a,s,n)}),o.size+ft(r).length!==0)?new Kc(t,o,r):null}static makeFromTransform(t,n){const i=new Set,r={};for(const o of n.aggregate){const{op:s,field:a,as:l}=o;s&&("count"===s?(r["*"]??(r["*"]={}),r["*"].count=new Set([l||Ft(o,{forAs:!0})])):(r[a]??(r[a]={}),r[a][s]=new Set([l||Ft(o,{forAs:!0})])))}for(const o of n.groupby??[])i.add(o);return i.size+ft(r).length===0?null:new Kc(t,i,r)}merge(t){return ude(this.dimensions,t.dimensions)?(function tlt(e,t){for(const n of ft(t)){const i=t[n];for(const r of ft(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}(this.measures,t.measures),!0):(function Mit(...e){td.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ft(this.measures)])}producedFields(){const t=new Set;for(const n of ft(this.measures))for(const i of ft(this.measures[n])){const r=this.measures[n][i];0===r.size?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${di({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const o of ft(this.measures))for(const s of ft(this.measures[o]))for(const a of this.measures[o][s])i.push(a),t.push(s),n.push("*"===o?null:ql(o));return{type:"aggregate",groupby:[...this.dimensions].map(ql),ops:t,fields:n,as:i}}}class fb extends Zi{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const o of Kl){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[Ft(s),...fr(a)?[Ft(s,{binSuffix:"end"})]:[]],...id(l)?{sortField:l}:ot(l)?{sortIndexField:ub(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Kl)this[n]&&(t+=` ${n.charAt(0)}:${di(this[n])}`);return t}get fields(){const t=[];for(const n of Kl)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Kl)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of ed){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),o=i.get("range");if(No(r)&&cp(o)){const a=sV(MT(this.childModel,n));a?t[n]=a:wt(TH(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];r&&i&&i[r]&&(n?(o.push(`distinct_${i[r]}`),s.push("max")):(o.push(i[r]),s.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:c}=this[t];if(l){const{op:u=YD,field:d}=l;o.push(d),s.push(u),a.push(Ft(l,{forAs:!0}))}else c&&(o.push(c),s.push("max"),a.push(c));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],o={};for(const l of j6){for(const c of W6){const u=(i[l]&&i[l][c])??[];for(const d of u)if(d.axes?.length>0){o[l]=!0;break}}if(o[l]){const c=`length(data("${this.facet.name}"))`;r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:"row"===l?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c}}]})}}const{row:s,column:a}=o;return(s||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:o,facet:s}=this;if(r&&o&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(i.x??[],i.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[pf,hf])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,i));if(s){const a=this.assembleFacetHeaderData(i);a&&t.push(...a)}return t}}function cge(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ilt(e){const t={};return SD(e.filter,n=>{if(gfe(n)){let i=null;NH(n)?i=pl(n.equal):BH(n)?i=pl(n.lte):$H(n)?i=pl(n.lt):zH(n)?i=pl(n.gt):HH(n)?i=pl(n.gte):VH(n)?i=n.range[0]:UH(n)&&(i=(n.oneOf??n.in)[0]),i&&(hm(i)?t[n.field]="date":Xi(i)?t[n.field]="number":zt(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}class Ds extends Zi{clone(){return new Ds(null,In(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${di(this._parse)}`}static makeExplicit(t,n,i){let r={};const o=n.data;return!pp(o)&&o?.format?.parse&&(r=o.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const a of ft(i)){const l=r.getWithExplicit(a);void 0!==l.value&&(l.explicit||l.value===i[a]||"derived"===l.value||"flatten"===i[a]?delete i[a]:wt(Xde(a,i[a],l.value)))}for(const a of ft(n)){const l=r.get(a);void 0!==l&&(l===n[a]?delete n[a]:wt(Xde(a,n[a],l)))}const o=new Ef(n,i);r.copyAll(o);const s={};for(const a of ft(o.combine())){const l=o.get(a);null!==l&&(s[a]=l)}return 0===ft(s).length||r.parseNothing?null:new Ds(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ft(this._parse)){const i=this._parse[n];1===jv(n)&&(t[n]=i)}return t}producedFields(){return new Set(ft(this._parse))}dependentFields(){return new Set(ft(this._parse))}assembleTransforms(t=!1){return ft(this._parse).filter(n=>!t||jv(n)>1).map(n=>{const i=function nlt(e,t){const n=_H(e);return"number"===t?`toNumber(${n})`:"boolean"===t?`toBoolean(${n})`:"string"===t?`toString(${n})`:"date"===t?`toDate(${n})`:"flatten"===t?n:t.startsWith("date:")?`timeParse(${n},'${cge(t.slice(5,t.length))}')`:t.startsWith("utc:")?`utcParse(${n},'${cge(t.slice(4,t.length))}')`:(wt(function Ont(e){return`Unrecognized parse "${e}".`}(t)),null)}(n,this._parse[n]);return i?{type:"formula",expr:i,as:yH(n)}:null}).filter(n=>null!==n)}}class _p extends Zi{clone(){return new _p(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Xc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Xc}}}class nM extends Zi{clone(){return new nM(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${di(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class iM extends Zi{clone(){return new iM(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${di(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Sm extends Zi{constructor(t){let n;if(super(null),t??(t={name:"source"}),pp(t)||(n=t.format?{...Ta(t.format,["parse"])}:{}),Q1(t))this._data={values:t.values};else if(rb(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];fi(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else tpe(t)?this._data={values:[{type:"Sphere"}]}:(Jhe(t)||pp(t))&&(this._data={});this._generator=pp(t),t.name&&(this._name=t.name),n&&!nr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var rM,uge=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n};function Z6(e){return e instanceof Sm||e instanceof nM||e instanceof iM}class Q6{constructor(){rM.set(this,void 0),uge(this,rM,!1,"f")}setModified(){uge(this,rM,!0,"f")}get modifiedFlag(){return function(e,t,n,i){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}(this,rM)}}rM=new WeakMap;class km extends Q6{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,o)=>o[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class J6 extends Q6{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class alt extends J6{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)void 0===i[n[r]]?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of ft(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class llt extends J6{constructor(t){super(),this.requiresSelectionId=t&&B6(t)}run(t){t instanceof _p&&(this.requiresSelectionId&&(Z6(t.parent)||t.parent instanceof Kc||t.parent instanceof Ds)||(this.setModified(),t.remove()))}}class clt extends Q6{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof ld&&(i=t.producedFields(),pH(i,n)&&(this.setModified(),t.removeFormulas(n),0===t.producedFields.length&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class ult extends J6{constructor(){super()}run(t){t instanceof aa&&!t.isRequired()&&(this.setModified(),t.remove())}}class dlt extends km{run(t){if(!(Z6(t)||t.numChildren()>1))for(const n of t.children)if(n instanceof Ds)if(t instanceof Ds)this.setModified(),t.merge(n);else{if(mH(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}class flt extends km{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Ds);if(t.numChildren()>1&&i.length>=1){const r={},o=new Set;for(const s of i){const a=s.parse;for(const l of ft(a))l in r?r[l]!==a[l]&&o.add(l):r[l]=a[l]}for(const s of o)delete r[s];if(!nr(r)){this.setModified();const s=new Ds(t,r);for(const a of n){if(a instanceof Ds)for(const l of ft(r))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Ds&&0===ft(a.parse).length&&a.remove()}}}}}class hlt extends km{run(t){t instanceof aa||t.numChildren()>0||t instanceof fb||t instanceof Sm||(this.setModified(),t.remove())}}class plt extends km{run(t){const n=t.children.filter(r=>r instanceof ld),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class glt extends km{run(t){const n=t.children.filter(r=>r instanceof Kc),i={};for(const r of n){const o=di(r.groupBy);o in i||(i[o]=[]),i[o].push(r)}for(const r of ft(i)){const o=i[r];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class mlt extends km{constructor(t){super(),this.model=t}run(t){const n=!(Z6(t)||t instanceof lb||t instanceof Ds||t instanceof _p),i=[],r=[];for(const o of t.children)o instanceof cd&&(n&&!mH(t.producedFields(),o.dependentFields())?i.push(o):r.push(o));if(i.length>0){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof cd?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(r.length>1){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class _lt extends km{run(t){const n=[...t.children];if(!am(n,s=>s instanceof aa)||t.numChildren()<=1)return;const r=[];let o;for(const s of n)if(s instanceof aa){let a=s;for(;1===a.numChildren();){const[l]=a.children;if(!(l instanceof aa))break;a=l}r.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=o}}}class Am extends Zi{clone(){return new Am(null,In(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Xu(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ft(t)}hash(){return`JoinAggregateTransform ${di(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),t.push(void 0===o.field?null:o.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...void 0!==r?{groupby:r}:{}}}}class kf extends Zi{clone(){return new kf(null,In(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:o,offset:s="zero"}=n,a=[],l=[];if(void 0!==n.sort)for(const d of n.sort)a.push(d.field),l.push(Kr(d.order,"ascending"));const c={field:a,order:l};let u;return u=function vlt(e){return ot(e)&&e.every(t=>zt(t))&&e.length>1}(o)?o:zt(o)?[o,`${o}_end`]:[`${n.stack}_start`,`${n.stack}_end`],new kf(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:c,facetby:[],as:u})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=i,c=o.map(h=>od(r[h])).filter(h=>!!h),u=function ylt(e){return e.stack.stackBy.reduce((t,n)=>{const r=Ft(n.fieldDef);return r&&t.push(r),t},[])}(n),d=n.encoding.order;let f;if(ot(d)||Mt(d))f=Bde(d);else{const h=Gfe(d)?d.sort:"y"===s?"descending":"ascending";f=u.reduce((y,b)=>(y.field.push(b),y.order.push(h),y),{field:[],order:[]})}return new kf(t,{dimensionFieldDefs:c,stackField:n.vgField(s),facetby:[],stackby:u,sort:f,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${di(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[Ft(r,{binSuffix:"mid"})]:[Ft(r,{}),Ft(r,{binSuffix:"end"})]:[Ft(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:o,sort:s,offset:a,impute:l,as:c}=this._stack;if(l)for(const u of i){const{bandPosition:d=.5,bin:f}=u;if(f){const h=Ft(u,{expr:"datum"}),y=Ft(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${d}*${h}+${1-d}*${y}`,as:Ft(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...o,...n],key:Ft(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:c,offset:a}),t}}class hb extends Zi{clone(){return new hb(null,In(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Xu(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>void 0!==n).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ft(t)}hash(){return`WindowTransform ${di(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const d of this.transform.window)n.push(d.op),i.push(this.getDefaultName(d)),r.push(void 0===d.param?null:d.param),t.push(void 0===d.field?null:d.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&n.every(d=>AH(d)))return{type:"joinaggregate",as:i,ops:n,fields:t,...void 0!==s?{groupby:s}:{}};const a=[],l=[];if(void 0!==this.transform.sort)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const u=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:{field:a,order:l},...void 0!==u?{ignorePeers:u}:{},...void 0!==s?{groupby:s}:{},...void 0!==o?{frame:o}:{}}}}function eV(e){if(e instanceof fb)if(1!==e.numChildren()||e.children[0]instanceof aa){const t=e.model.component.data.main;dge(t);const n=function blt(e){return function t(n){if(!(n instanceof fb)){const i=n.clone();if(i instanceof aa){const r=tV+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof Kc||i instanceof kf||i instanceof hb||i instanceof Am)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}}(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else{const t=e.children[0];(t instanceof Kc||t instanceof kf||t instanceof hb||t instanceof Am)&&t.addDimensions(e.fields),t.swapWithParent(),eV(e)}else e.children.map(eV)}function dge(e){if(e instanceof aa&&e.type===ar.Main&&1===e.numChildren()){const t=e.children[0];t instanceof fb||(t.swapWithParent(),dge(e))}}const tV="scale_";function nV(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!nV(t.children))return!1}return!0}function Zc(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function fge(e,t,n){let i=e.sources,r=!1;return r=Zc(new ult,i)||r,r=Zc(new llt(t),i)||r,i=i.filter(o=>o.numChildren()>0),r=Zc(new hlt,i)||r,i=i.filter(o=>o.numChildren()>0),n||(r=Zc(new dlt,i)||r,r=Zc(new mlt(t),i)||r,r=Zc(new clt,i)||r,r=Zc(new flt,i)||r,r=Zc(new glt,i)||r,r=Zc(new plt,i)||r,r=Zc(new alt,i)||r,r=Zc(new _lt,i)||r),e.sources=i,r}class Na{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Na(()=>t(n))}}function hge(e){jr(e)?function Clt(e){const t=e.component.scales;for(const n of ft(t)){const i=Elt(e,n);if(t[n].setWithExplicit("domains",i),klt(e,n),e.component.data.isFaceted){let o=e;for(;!Qc(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[n])for(const a of i.value)wf(a)&&(a.data=tV+a.data.replace(tV,""))}}}(e):function Mlt(e){for(const n of e.children)hge(n);const t=e.component.scales;for(const n of ft(t)){let i,r=null;for(const o of e.children){const s=o.component.scales[n];if(s){i=void 0===i?s.getWithExplicit("domains"):hp(i,s.getWithExplicit("domains"),"domains","scale",oV);const a=s.get("selectionExtent");r&&a&&r.param!==a.param&&wt("The same selection must be used to override scale domains in a layered view."),r=a}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}(e)}function Elt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=function xlt(e,t,n,i){if("unaggregated"===e){const{valid:r,reason:o}=pge(t,n);if(!r)return void wt(o)}else if(void 0===e&&i.useUnaggregatedDomain){const{valid:r}=pge(t,n);if(r)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),"x"===t&&Mo(i.x2)?Mo(i.x)?hp(yp(n,r,e,"x"),yp(n,r,e,"x2"),"domain","scale",oV):yp(n,r,e,"x2"):"y"===t&&Mo(i.y2)?Mo(i.y)?hp(yp(n,r,e,"y"),yp(n,r,e,"y2"),"domain","scale",oV):yp(n,r,e,"y2"):yp(n,r,e,t)}function iV(e,t,n){const i=Lo(n)?.unit;return"temporal"===t||i?function Slt(e,t,n){return e.map(i=>({signal:`{data: ${iT(i,{timeUnit:n,type:t})}}`}))}(e,t,i):[e]}function yp(e,t,n,i){const{encoding:r}=n,o=Mo(r[i]),{type:s}=o,a=o.timeUnit;if(function Zit(e){return e?.unionWith}(t)){const d=yp(e,void 0,n,i);return ad([...iV(t.unionWith,s,a),...d.value])}if(hn(t))return ad([t]);if(t&&"unaggregated"!==t&&!Mfe(t))return ad(iV(t,s,a));const l=n.stack;if(l&&i===l.fieldChannel){if("normalize"===l.offset)return ml([[0,1]]);const d=n.requestDataName(ar.Main);return ml([{data:d,field:n.vgField(i,{suffix:"start"})},{data:d,field:n.vgField(i,{suffix:"end"})}])}const c=vf(i)&&Mt(o)?function Alt(e,t,n){if(!No(n))return;const i=e.fieldDef(t),r=i.sort;if(Hfe(r))return{op:"min",field:ub(i,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(id(r))return rV(r,o&&!s.has(r.field));if(zfe(r)){const{encoding:a,order:l}=r,c=e.fieldDef(a),{aggregate:u,field:d}=c,f=o&&!s.has(d);if(bf(u)||ap(u))return rV({field:Ft(c),order:l},f);if(AH(u)||!u)return rV({op:u,field:d,order:l},f)}else{if("descending"===r)return{op:"min",field:e.vgField(t),order:"descending"};if(fi(["ascending",void 0],r))return!0}}(n,i,e):void 0;if(rd(o))return ml(iV([o.datum],s,a));const u=o;if("unaggregated"===t){const d=n.requestDataName(ar.Main),{field:f}=o;return ml([{data:d,field:Ft({field:f,aggregate:"min"})},{data:d,field:Ft({field:f,aggregate:"max"})}])}if(fr(u.bin)){if(No(e))return ml("bin-ordinal"===e?[]:[{data:$1(c)?n.requestDataName(ar.Main):n.requestDataName(ar.Raw),field:n.vgField(i,K1(u,i)?{binSuffix:"range"}:{}),sort:!0!==c&&jt(c)?c:{field:n.vgField(i,{}),op:"min"}}]);{const{bin:d}=u;if(fr(d)){const f=K6(n,u.field,d);return ml([new Na(()=>{const h=n.getSignalName(f);return`[${h}.start, ${h}.stop]`})])}return ml([{data:n.requestDataName(ar.Main),field:n.vgField(i,{})}])}}if(u.timeUnit&&fi(["time","utc"],e)&&Wfe(u,jr(n)?n.encoding[Ju(i)]:void 0,n.markDef,n.config)){const d=n.requestDataName(ar.Main);return ml([{data:d,field:n.vgField(i)},{data:d,field:n.vgField(i,{suffix:"end"})}])}return ml(c?[{data:$1(c)?n.requestDataName(ar.Main):n.requestDataName(ar.Raw),field:n.vgField(i),sort:c}]:[{data:n.requestDataName(ar.Main),field:n.vgField(i)}])}function rV(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":YD),...i?{field:ql(i)}:{},...r?{order:r}:{}}}function klt(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,o=Mfe(i)&&i,s=fm(r)&&LD(r.extent)&&r.extent;(o||s)&&n.set("selectionExtent",o??s,!0)}function pge(e,t){const{aggregate:n,type:i}=e;return n?zt(n)&&!unt.has(n)?{valid:!1,reason:Jnt(n)}:"quantitative"===i&&"log"===t?{valid:!1,reason:eit(e)}:{valid:!0}:{valid:!1,reason:Qnt(e)}}function oV(e,t,n,i){return e.explicit&&t.explicit&&wt(function oit(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${dr(n)} and ${dr(i)}). Using the union of the two domains.`}(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function sV(e){if(wf(e)&&zt(e.field))return e.field;if(function dnt(e){return!ot(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(wf(n)&&zt(n.field))if(t){if(t!==n.field)return wt("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=n.field;return wt("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),t}if(function fnt(e){return!ot(e)&&"fields"in e&&"data"in e}(e)){wt("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const t=e.fields[0];return zt(t)?t:void 0}}function MT(e,t){return function Olt(e){const t=Xu(e.map(s=>{if(wf(s)){const{sort:a,...l}=s;return l}return s}),di),n=Xu(e.map(s=>{if(wf(s)){const a=s.sort;return void 0!==a&&!$1(a)&&("op"in a&&"count"===a.op&&delete a.field,"ascending"===a.order&&delete a.order),a}}).filter(s=>void 0!==s),di);if(0===t.length)return;if(1===t.length){const s=e[0];if(wf(s)&&n.length>0){let a=n[0];if(n.length>1){wt(tfe);const l=n.filter(c=>jt(c)&&"op"in c&&"min"!==c.op);a=!n.every(c=>jt(c)&&"op"in c)||1!==l.length||l[0]}else jt(a)&&"field"in a&&s.field===a.field&&(a=!a.order||{order:a.order});return{...s,sort:a}}return s}const i=Xu(n.map(s=>$1(s)||!("op"in s)||zt(s.op)&&s.op in snt?s:(wt(function ait(e){return`Dropping sort property ${dr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(s)),!0)),di);let r;1===i.length?r=i[0]:i.length>1&&(wt(tfe),r=!0);const o=Xu(e.map(s=>wf(s)?s.data:null),s=>s);return 1===o.length&&null!==o[0]?{data:o[0],fields:t.map(a=>a.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}(e.component.scales[t].get("domains").map(r=>(wf(r)&&(r.data=e.lookupDataSource(r.data)),r)))}function gge(e){return pb(e)||lV(e)?e.children.reduce((t,n)=>t.concat(gge(n)),mge(e)):mge(e)}function mge(e){return ft(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:c,reverse:u,...d}=r,f=function Dlt(e,t,n,i){if(Fo(n)){if(cp(e))return{step:{signal:`${t}_step`}}}else if(jt(e)&&wf(e))return{...e,data:i.lookupDataSource(e.data)};return e}(r.range,o,n,e),h=MT(e,n),y=a?function Mst(e,t,n,i){const r=Rpe(e,t.param,t);return{signal:gl(n.get("type"))&&ot(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}(e,a,i,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...y?{domainRaw:y}:{},range:f,...void 0!==u?{reverse:u}:{},...d}),t},[])}class _ge extends Ef{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||am(this.get("domains"),t=>ot(t)&&2===t.length&&t[0]<=0&&t[1]>=0)}}const Tlt=["range","scheme"];function yge(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,o=Ia(t),s=e.getName(o);if(jt(i)&&i.binned&&void 0!==i.step)return new Na(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(fr(i)){const a=K6(e,r,i);return new Na(()=>{const l=e.getSignalName(a),c=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${c})`})}}}function Rlt(e,t){const n=t.specifiedScales[e],{size:i}=t,o=t.getScaleComponent(e).get("type");for(const d of Tlt)if(void 0!==n[d]){const f=qH(o,d),h=Efe(e,d);if(f)if(h)wt(h);else switch(d){case"range":{const y=n.range;if(ot(y)){if(Fo(e))return ad(y.map(b=>{if("width"===b||"height"===b){const C=t.getName(b),k=t.getSignalName.bind(t);return Na.fromName(k,C)}return b}))}else if(jt(y))return ad({data:t.requestDataName(ar.Main),field:y.field,sort:{op:"min",field:t.vgField(e)}});return ad(y)}case"scheme":return ad(Ilt(n[d]))}else wt(Jde(o,d,e))}const s=e===Sr||"xOffset"===e?"width":"height",a=i[s];if(sd(a))if(Fo(e))if(No(o)){const d=vge(a,t,e);if(d)return ad({step:d})}else wt(efe(s));else if(Yv(e)&&"band"===t.getScaleComponent(e===tp?"x":"y").get("type")){const y=bge(a,o);if(y)return ad(y)}const{rangeMin:l,rangeMax:c}=n,u=function Flt(e,t){const{size:n,config:i,mark:r,encoding:o}=t,s=t.getSignalName.bind(t),{type:a}=Mo(o[e]),c=t.getScaleComponent(e).get("type"),{domain:u,domainMid:d}=t.specifiedScales[e];switch(e){case Sr:case Io:{if(fi(["point","band"],c)){const y=wge(e,n,i.view);if(sd(y))return{step:vge(y,t,e)}}const f=Ia(e),h=t.getName(f);return e===Io&&gl(c)?[Na.fromName(s,h),0]:[0,Na.fromName(s,h)]}case tp:case Wv:return function Llt(e,t,n){const i=e===tp?"x":"y",o=t.getScaleComponent(i).get("type"),s=t.scaleName(i);if("band"===o){const a=wge(i,t.size,t.config.view);if(sd(a)){const l=bge(a,n);if(l)return l}return[0,{signal:`bandwidth('${s}')`}]}{const a=t.encoding[i];if(Mt(a)&&a.timeUnit){const l=hfe(a.timeUnit,u=>`scale('${s}', ${u})`),c=t.config.scale.bandWithNestedOffsetPaddingInner;return c?[{signal:`${hn(c)?`${c.signal}/2`:""+c/2} * (${l})`},{signal:`${hn(c)?`(1 - ${c.signal}/2)`:""+(1-c/2)} * (${l})`}]:[0,{signal:l}]}return lde(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}(e,t,c);case _f:{const h=Cge(r,t.component.scales[e].get("zero"),i),y=function Blt(e,t,n,i){const r={x:yge(n,"x"),y:yge(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==i.scale.maxBandSize)return i.scale.maxBandSize;const o=xge(t,r,i.view);return Xi(o)?o-1:new Na(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=xge(t,r,i.view);return Xi(o)?Math.pow(.95*o,2):new Na(()=>`pow(0.95 * ${o.signal}, 2)`)}}throw new Error($D("size",e))}(r,n,t,i);return Zv(c)?function $lt(e,t,n){const i=()=>{const r=jc(t),o=jc(e),s=`(${r} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${r} + ${s}, ${s})`};return hn(t)?new Na(i):{signal:i()}}(h,y,function Nlt(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&ot(n)?n.length+1:(wt(function vit(e){return`Domain for ${e} is required for threshold scale.`}(i)),3)}}(c,i,u,e)):[h,y]}case Yl:return[0,2*Math.PI];case cm:return[0,360];case zc:return[0,new Na(()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`)];case rp:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case op:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ra:return"symbol";case Pa:case Zu:case Qu:return"ordinal"===c?"nominal"===a?"category":"ordinal":void 0!==d?"diverging":"rect"===r||"geoshape"===r?"heatmap":"ramp";case yf:case np:case ip:return[i.scale.minOpacity,i.scale.maxOpacity]}}(e,t);return(void 0!==l||void 0!==c)&&qH(o,"rangeMin")&&ot(u)&&2===u.length?ad([l??u[0],c??u[1]]):ml(u)}function Ilt(e){return function Kit(e){return!zt(e)&&!!e.name}(e)?{scheme:e.name,...Ta(e,["name"])}:{scheme:e}}function vge(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),o=CH(n),s=i[o];if("offset"===She({step:e,offsetIsDiscrete:$n(s)&&_fe(s.type)})&&ahe(i,o)){const l=t.getScaleComponent(o);let u=`domain('${t.scaleName(o)}').length`;"band"===l.get("type")&&(u=`bandspace(${u}, ${l.get("paddingInner")??l.get("padding")??0}, ${l.get("paddingOuter")??l.get("padding")??0})`);const d=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${u} / (1-${gnt(d)})`}}return e.step}function bge(e,t){if("offset"===She({step:e,offsetIsDiscrete:No(t)}))return{step:e.step}}function wge(e,t,n){const i=e===Sr?"width":"height";return t[i]||uT(n,i)}function Cge(e,t,n){if(t)return hn(t)?{signal:`${t.signal} ? 0 : ${Cge(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error($D("size",e))}function xge(e,t,n){const i=sd(e.width)?e.width.step:cT(n,"width"),r=sd(e.height)?e.height.step:cT(n,"height");return t.x||t.y?new Na(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function Ege(e,t){jr(e)?function zlt(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:o,specifiedScales:s}=e;for(const a of ft(n)){const l=s[a],c=n[a],u=e.getScaleComponent(a),d=Mo(r[a]),f=l[t],h=u.get("type"),y=u.get("padding"),b=u.get("paddingInner"),C=qH(h,t),k=Efe(a,t);if(void 0!==f&&(C?k&&wt(k):wt(Jde(h,t,a))),C&&void 0===k)if(void 0!==f){const O=d.timeUnit,I=d.type;switch(t){case"domainMax":case"domainMin":hm(l[t])||"temporal"===I||O?c.set(t,{signal:iT(l[t],{type:I,timeUnit:O})},!0):c.set(t,l[t],!0);break;default:c.copyKeyFromObject(t,l)}}else{const O=t in Sge?Sge[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:y,scalePaddingInner:b,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:l6(r,a),hasSecondaryRangeChannel:!!r[Ju(a)]}):i.scale[t];void 0!==O&&c.set(t,O,!1)}}}(e,t):Age(e,t)}const Sge={bins:({model:e,fieldOrDatumDef:t})=>Mt(t)?function Hlt(e,t){const n=t.bin;if(fr(n)){const i=K6(e,t.field,n);return new Na(()=>e.getSignalName(i))}if(ss(n)&&fm(n)&&void 0!==n.step)return{step:n.step}}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function Vlt(e,t){if(fi([Pa,Zu,Qu],e)&&"nominal"!==t)return"hcl"}(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:o})=>function Ult(e,t,n,i,r,o){if(!(od(o)?.bin||ot(n)||null!=r||null!=i||fi(["time","utc"],e)))return!!Fo(t)||void 0}(e,t,n,i,r,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>function jlt(e,t,n,i,r,o){if(Fo(e)){if(Wc(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:s,orient:a}=r;if("bar"===s&&(!Mt(i)||!i.bin&&!i.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if("point"===t)return n.pointPadding}}(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:o})=>function Wlt(e,t,n,i,r,o=!1){if(void 0===e){if(Fo(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=r;return o?c:Kr(s,"bar"===n?a:l)}if(Yv(t)&&"band"===i)return r.offsetBandPaddingInner}}(e,t,n.type,i,r.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:o})=>function Glt(e,t,n,i,r,o=!1){if(void 0===e)if(Fo(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=r;if(o)return a;if("band"===n)return Kr(s,hn(i)?{signal:`${i.signal}/2`}:i/2)}else if(Yv(t)){if("point"===n)return.5;if("band"===n)return r.offsetBandPaddingOuter}}(e,t,n,i,r.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>function qlt(e,t,n,i){return"x"===n&&void 0!==i.xReverse?gl(e)&&"descending"===t?hn(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse:!(!gl(e)||"descending"!==t)||void 0}(t,Mt(e)?e.sort:void 0,n,i.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:o,hasSecondaryRangeChannel:s})=>function Ylt(e,t,n,i,r,o,s){if(n&&"unaggregated"!==n&&gl(r)){if(ot(n)){const c=n[n.length-1];if(n[0]<=0&&c>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!Zv(r))return!0;if((!Mt(t)||!t.bin)&&fi([...ed,...Qtt],e)){const{orient:l,type:c}=i;return(!fi(["bar","area","line","trail"],c)||!("horizontal"===l&&"y"===e||"vertical"===l&&"x"===e))&&(!(!fi(["bar","area"],c)||s)||o?.zero)}return!1}(e,t,n,i,r,o.scale,s)};function kge(e){jr(e)?function Plt(e){const t=e.component.scales;for(const n of FD){const i=t[n];if(!i)continue;const r=Rlt(n,e);i.setWithExplicit("range",r)}}(e):Age(e,"range")}function Age(e,t){const n=e.component.scales;for(const i of e.children)"range"===t?kge(i):Ege(i,t);for(const i of ft(n)){let r;for(const o of e.children){const s=o.component.scales[i];s&&(r=hp(r,s.getWithExplicit(t),t,"scale",Qhe((l,c)=>"range"===t&&l.step&&c.step?l.step-c.step:0)))}n[i].setWithExplicit(t,r)}}function Xlt(e,t,n,i,r=!1){const o=function Klt(e,t,n,i){switch(t.type){case"nominal":case"ordinal":if(qv(e)||"discrete"===kH(e))return"shape"===e&&"ordinal"===t.type&&wt(RH(e,"ordinal")),"ordinal";if(Fo(e)||Yv(e)){if(fi(["rect","bar","image","rule"],n.type)||i)return"band"}else if("arc"===n.type&&e in EH)return"band";return ym(n[Ia(e)])||Jv(t)&&t.axis?.tickBand?"band":"point";case"temporal":return qv(e)?"time":"discrete"===kH(e)?(wt(RH(e,"temporal")),"ordinal"):Mt(t)&&t.timeUnit&&Lo(t.timeUnit).utc?"utc":"time";case"quantitative":return qv(e)?Mt(t)&&fr(t.bin)?"bin-ordinal":"linear":"discrete"===kH(e)?(wt(RH(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Zde(t.type))}(t,n,i,r),{type:s}=e;return vf(t)?void 0!==s?function nrt(e,t,n=!1){if(!vf(e))return!1;switch(e){case Sr:case Io:case tp:case Wv:case Yl:case zc:return!(!Wc(t)&&"band"!==t)||"point"===t&&!n;case _f:case rp:case yf:case np:case ip:case cm:return Wc(t)||Zv(t)||fi(["band","point","ordinal"],t);case Pa:case Zu:case Qu:return"band"!==t;case op:case Ra:return"ordinal"===t||Zv(t)}}(t,s)?Mt(n)&&!function trt(e,t){return fi([WH,GH],t)?void 0===e||No(e):t===Xv?fi(["time","utc",void 0],e):t!==_m||wfe(e)||Zv(e)||void 0===e}(s,n.type)?(wt(function iit(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}(s,o)),o):s:(wt(function nit(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}(t,s,o)),o):o:null}function Oge(e){e.component.scales=jr(e)?function Qlt(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const o of FD){const s=Mo(t[o]);if(s&&n===Afe&&o===Ra&&s.type===Kv)continue;let a=s&&s.scale;if(!Yv(o)||l6(t,Sde(o))){if(s&&null!==a&&!1!==a){a??(a={});const c=Xlt(a,o,s,i,l6(t,o));r[o]=new _ge(e.scaleName(`${o}`,!0),{value:c,explicit:a.type===c})}}else a&&wt(Vnt(o))}return r}(e):function ect(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const o of e.children){Oge(o);for(const s of ft(o.component.scales))if((t=r.scale)[s]??(t[s]=qpe(s,e)),"shared"===r.scale[s]){const a=i[s],l=o.component.scales[s].getWithExplicit("type");a?Wit(a.value,l.value)?i[s]=hp(a,l,"type","scale",Jlt):(r.scale[s]="independent",delete i[s]):i[s]=l}}for(const o of ft(i)){const s=e.scaleName(o,!0);n[o]=new _ge(s,i[o]);for(const l of e.children){const c=l.component.scales[o];c&&(l.renameScale(c.get("name"),s),c.merged=!0)}}return n}(e)}const Jlt=Qhe((e,t)=>yfe(e)-yfe(t));class aV{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return void 0!==this.nameMap[t]}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function jr(e){return"unit"===e?.type}function Qc(e){return"facet"===e?.type}function lV(e){return"concat"===e?.type}function pb(e){return"layer"===e?.type}class cV{constructor(t,n,i,r,o,s,a){this.type=n,this.parent=i,this.config=o,this.correctDataNames=l=>(l.from?.data&&(l.from.data=this.lookupDataSource(l.from.data)),l.from?.facet?.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l),this.parent=i,this.config=o,this.view=Fa(a),this.name=t.name??r,this.title=lp(t.title)?{text:t.title}:t.title?Fa(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new aV,this.projectionNameMap=i?i.projectionNameMap:new aV,this.signalNameMap=i?i.signalNameMap:new aV,this.data=t.data,this.description=t.description,this.transforms=function sst(e){return e.map(t=>A6(t)?{filter:Vv(t.filter,Vit)}:t)}(t.transform??[]),this.layout="layer"===n||"unit"===n?{}:function uot(e,t,n){const i=n[t],r={},{spacing:o,columns:s}=i;void 0!==o&&(r.spacing=o),void 0!==s&&(XD(e)&&!Y1(e.facet)||w6(e))&&(r.columns=s),lT(e)&&(r.columns=1);for(const a of cot)if(void 0!==e[a])if("spacing"===a){const l=e[a];r[a]=Xi(l)?l:{row:l.row??o,column:l.column??o}}else r[a]=e[a];return r}(t,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:XD(t)||i?.component.data.isFaceted&&void 0===t.data},layoutSize:new Ef,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?In(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function Zlt(e,{ignoreRange:t}={}){Oge(e),hge(e);for(const n of ert)Ege(e,n);t||kge(e)}(this)}parseProjection(){sge(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){tge(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const o of ft(i)){const s=i[o];void 0!==s&&(r[o]=vr(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),t||(this.description&&(n.description=vr(this.description)),"unit"!==this.type&&"layer"!==this.type)?nr(n)?void 0:n:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,o=function wat(e,t){const n={};for(const i of Kl){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:o,titleOrient:s}=bT(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),a=vT(i,s),l=bat(o,a);void 0!==l&&(n[a]=l)}}return nr(n)?void 0:n}(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Kl)t[i].title&&n.push(gat(this,i));for(const i of j6)n=n.concat(mat(this,i));return n}assembleAxes(){return function nat(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>tM(r,"grid",t)),...i.map(r=>tM(r,"grid",t)),...n.map(r=>tM(r,"main",t)),...i.map(r=>tM(r,"main",t))].filter(r=>r)}(this.component.axes,this.config)}assembleLegends(){return ige(this)}assembleProjections(){return function jat(e){return pb(e)||lV(e)?function Wat(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),rge(e))}(e):rge(e)}(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...Rde(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return fi(["unit","layer"],this.type)?fi(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),nr(i)?void 0:i}assembleGroup(t=[]){const n={};(t=t.concat(this.assembleSignals())).length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Qc(this.parent)?gge(this):[];r.length>0&&(n.scales=r);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Er((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ar[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Qc(this.parent)){const i=ID(Wpe(t)),r=this.component.scales[i];if(r&&!r.merged){const o=r.get("type"),s=r.get("range");if(No(o)&&cp(s)){const a=r.get("name"),c=sV(MT(this,i));return c?{signal:jpe(a,r,Ft({aggregate:"distinct",field:c},{expr:"datum"}))}:(wt(TH(i)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){return n?this.getName(t):Mde(t)&&vf(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(function bnt(e){return`Cannot find a selection named "${e}".`}(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class Dge extends cV{vgField(t,n={}){const i=this.fieldDef(t);if(i)return Ft(i,n)}reduceFieldDef(t,n){return function Vrt(e,t,n,i){return e?ft(e).reduce((r,o)=>{const s=e[o];return ot(s)?s.reduce((a,l)=>t.call(i,a,l,o),r):t.call(i,r,s,o)},n):n}(this.getMapping(),(i,r,o)=>{const s=od(r);return s?t(i,s,o):i},n)}forEachFieldDef(t,n){u6(this.getMapping(),(i,r)=>{const o=od(i);o&&t(o,r)},n)}}class xT extends Zi{clone(){return new xT(null,In(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=In(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"],n.groupby&&null==n.minsteps&&null==n.maxsteps&&null==n.steps&&(this.transform.steps=200)}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${di(this.transform)}`}assemble(){const{density:t,...n}=this.transform;return{type:"kde",field:t,...n}}}class ET extends Zi{clone(){return new ET(null,In(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=In(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${di(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class oM extends Zi{clone(){return new oM(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:i,mark:r,markDef:o}=n;if("filter"!==Wi("invalid",o,i))return null;const a=n.reduceFieldDef((l,c,u)=>{const d=vf(u)&&n.getScaleComponent(u);return d&&gl(d.get("type"))&&"count"!==c.aggregate&&!dp(r)&&(l[c.field]=c),l},{});return ft(a).length?new oM(t,a):null}dependentFields(){return new Set(ft(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${di(this.filter)}`}assemble(){const t=ft(this.filter).reduce((n,i)=>{const r=this.filter[i],o=Ft(r,{expr:"datum"});return null!==r&&("temporal"===r.type?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):"quantitative"===r.type&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class ST extends Zi{clone(){return new ST(this.parent,In(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=In(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((o,s)=>r[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${di(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class kT extends Zi{clone(){return new kT(null,In(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=In(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${di(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class gb extends Zi{clone(){return new gb(null,In(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Vc,Hc],[Xl,Uc]]){const o=r.map(s=>{const a=Mo(n.encoding[s]);return Mt(a)?a.field:rd(a)?{expr:`${a.datum}`}:Yc(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new gb(t,o,null,n.getName("geojson_"+i++)))}if(n.channelHasField(Ra)){const r=n.typedFieldDef(Ra);r.type===Kv&&(t=new gb(t,null,r.field,n.getName("geojson_"+i++)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(zt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${di(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class sM extends Zi{clone(){return new sM(null,this.projection,In(this.fields),In(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Vc,Hc],[Xl,Uc]]){const r=i.map(s=>{const a=Mo(n.encoding[s]);return Mt(a)?a.field:rd(a)?{expr:`${a.datum}`}:Yc(a)?{expr:`${a.value}`}:void 0}),o=i[0]===Xl?"2":"";(r[0]||r[1])&&(t=new sM(t,n.projectionName(),r,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(zt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${di(this.fields)} ${di(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Om extends Zi{clone(){return new Om(null,In(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Om(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,o=i.y;if(Mt(r)&&Mt(o)){const s=r.impute?r:o.impute?o:void 0;if(void 0===s)return;const a=r.impute?o:o.impute?r:void 0,{method:l,value:c,frame:u,keyvals:d}=s.impute,f=che(n.mark,i);return new Om(t,{impute:s.field,key:a.field,...l?{method:l}:{},...void 0!==c?{value:c}:{},...u?{frame:u}:{},...void 0!==d?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${di(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:Hot(i)?this.processSequence(i):i}:{},method:"value",...o?{groupby:o}:{},value:r&&"value"!==r?null:s};return r&&"value"!==r?[l,{type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},{type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t}]:[l]}}class AT extends Zi{clone(){return new AT(null,In(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=In(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${di(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class aM extends Zi{clone(){return new aM(null,In(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const o=n.component.data.sources,{from:s}=i;let a=null;if(function Vot(e){return"data"in e}(s)){let l=Ige(s.data,o);l||(l=new Sm(s.data),o.push(l));const c=n.getName(`lookup_${r}`);a=new aa(l,c,ar.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=a}else if(function Uot(e){return"param"in e}(s)){const l=s.param;let c;i={as:l,...i};try{c=n.getSelectionComponent(Er(l),l)}catch{throw new Error(function Mnt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}(l))}if(a=c.materialized,!a)throw new Error(function xnt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(l))}return new aM(t,i,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ht(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${di({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Ht(this.transform.as)}:{}};else{let n=this.transform.as;zt(n)||(wt('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class OT extends Zi{clone(){return new OT(null,In(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=In(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${di(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class DT extends Zi{clone(){return new DT(null,In(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=In(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${di(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class TT extends Zi{clone(){return new TT(null,In(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Xu((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${di(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:o}=this.transform;return{type:"pivot",field:t,value:n,...void 0!==r?{limit:r}:{},...void 0!==o?{op:o}:{},...void 0!==i?{groupby:i}:{}}}}class PT extends Zi{clone(){return new PT(null,In(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${di(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Tge(e){let t=0;return function n(i,r){if(i instanceof Sm&&!i.isGenerator&&!rb(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Ds&&(i.parent instanceof Sm&&!r.source?(r.format={...r.format??{},parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof fb)return r.name||(r.name="data_"+t++),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,void e.push(...i.assemble());switch((i instanceof nM||i instanceof iM||i instanceof oM||i instanceof lb||i instanceof cb||i instanceof sM||i instanceof Kc||i instanceof aM||i instanceof hb||i instanceof Am||i instanceof kT||i instanceof ST||i instanceof xT||i instanceof AT||i instanceof OT||i instanceof DT||i instanceof _p||i instanceof PT||i instanceof TT||i instanceof ET)&&r.transform.push(i.assemble()),(i instanceof cd||i instanceof ld||i instanceof Om||i instanceof kf||i instanceof gb)&&r.transform.push(...i.assemble()),i instanceof aa&&(r.source&&0===r.transform.length?i.setSource(r.source):i.parent instanceof aa?i.setSource(r.name):(r.name||(r.name="data_"+t++),i.setSource(r.name),1===i.numChildren()&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof aa&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name="data_"+t++);let o=r.name;!r.source||r.transform.length>0?e.push(r):o=r.source;for(const s of i.children)n(s,{name:null,source:o,transform:[]});break}}}}function ict(e){return"top"===e||"left"===e||hn(e)?"header":"footer"}function oct(e,t){const{facet:n,config:i,child:r,component:o}=e;if(e.channelHasField(t)){const s=n[t],a=db("title",null,i,t);let l=eb(s,i,{allowDisabling:!0,includeDefault:void 0===a||!!a});r.component.layoutHeaders[t].title&&(l=ot(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const c=db("labelOrient",s.header,i,t),u=null!==s.header&&Kr(s.header?.labels,i.header.labels,!0),d=fi(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:null!==s.header?l:null,facetFieldDef:s,[d]:"facet"===t?[]:[Pge(e,t,u)]}}}function Pge(e,t,n){const i="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function Rge(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=Y6(r,t),"shared"===r.axis[t]){const o="x"===t?"column":"row",s=i[o];for(const a of n.component.axes[t]){const l=ict(a.get("orient"));s[l]??(s[l]=[Pge(e,o,!1)]);const c=tM(a,"main",e.config,{header:!0});c&&s[l][0].axes.push(c),a.mainExtracted=!0}}}}function uV(e){for(const t of e.children)t.parseLayoutSize()}function RT(e,t){const n=Wpe(t),i=ID(n),r=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),c=r.scale[i]??qpe(i,e);if("independent"===c&&"step"===l.value){s=void 0;break}if(s){if("independent"===c&&s.value!==l.value){s=void 0;break}s=hp(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function cct(e,t){const i=e.config,r=e.getScaleComponent("width"===t?"x":"y");if(r){const o=r.get("type"),s=r.get("range");if(No(o)){const a=uT(i.view,t);return cp(s)||sd(a)?"step":a}return M6(i.view,t)}if(e.hasProjection||"arc"===e.mark)return M6(i.view,t);{const o=uT(i.view,t);return sd(o)?o.step:o}}function dV(e,t,n){return Ft(t,{suffix:`by_${Ft(e)}`,...n??{}})}class lM extends Dge{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=mV(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Y1(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ft(t),i={};for(const r of n){if(![hf,pf].includes(r)){wt($D(r,"facet"));break}const o=t[r];if(void 0===o.field){wt(PH(o,r));break}i[r]=this.initFacetFieldDef(o,r)}return i}initFacetFieldDef(t,n){const i=a6(t,n);return i.header?i.header=Fa(i.header):null===i.header&&(i.header=null),i}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=IT(this),this.child.parseData()}parseLayoutSize(){uV(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function rct(e){for(const t of Kl)oct(e,t);Rge(e,"x"),Rge(e,"y")}(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Kl)for(const i of W6){const r=this.component.layoutHeaders[n],o=r[i],{facetFieldDef:s}=r;if(s){const a=db("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=vT(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o?.[0]){const a="row"===n?"height":"width",l="header"===i?"headerBand":"footerBand";"facet"!==n&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset["row"===n?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&"independent"===this.component.resolve.scale.x||!t&&"independent"===this.component.resolve.scale.y)&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof lM))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof lM?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ft(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof lM){if(this.child.channelHasField("column")){const r=Ft(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of ed){const o=this.child.component.scales[r];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(No(s)&&cp(a)){const c=sV(MT(this.child,r));c?(t.push(c),n.push("distinct"),i.push(`distinct_${c}`)):wt(TH(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const u of Kl){const d=this.facet[u];if(d){l.push(Ft(d));const{bin:f,sort:h}=d;if(fr(f)&&l.push(Ft(d,{binSuffix:"end"})),id(h)){const{field:y,op:b=YD}=h,C=dV(d,h);i&&r?(o.push(C),s.push("max"),a.push(C)):(o.push(y),s.push(b),a.push(C))}else if(ot(h)){const y=ub(d,u);o.push(y),s.push("max"),a.push(y)}}}const c=!!i&&!!r;return{name:t,data:n,groupby:l,...c||o.length>0?{aggregate:{...c?{cross:c}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?id(i.sort)?[dV(i,i.sort,{expr:"datum"})]:ot(i.sort)?[ub(i,t,{expr:"datum"})]:[Ft(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(id(r)?r.order:!ot(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return G6(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of j6)if(t[r]){const o=db("labelOrient",t[r]?.header,n,r);if(i[r].includes(o))return G6(t[r],r,n)}}assembleMarks(){const{child:t}=this,i=function tct(e){const t=[],n=Tge(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Kl.map(l=>this.facetSortFields(l)).flat(),order:Kl.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(vst(this,[]))}]}getMapping(){return this.facet}}function Ige(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,o=i.format?.feature;if(r&&o)continue;const s=e.format?.feature;if((s||o)&&s!==o)continue;const a=i.format?.mesh;if(!r&&!a||r===a)if(Q1(e)&&Q1(i)){if(Yu(e.values,i.values))return n}else if(rb(e)&&rb(i)){if(e.url===i.url)return n}else if(Jhe(e)&&e.name===n.dataName)return n}return null}function IT(e){let t=function dct(e,t){if(e.data||!e.parent){if(null===e.data){const i=new Sm({values:[]});return t.push(i),i}const n=Ige(e.data,t);if(n)return pp(e.data)||(n.data.format=cde({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Sm(e.data);return t.push(i),i}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=r&&(pp(r)||rb(r)||Q1(r))||!e.parent?new _st:e.parent.component.data.ancestorParse.clone();pp(r)?(epe(r)?t=new iM(t,r.sequence):T6(r)&&(t=new nM(t,r.graticule)),s.parseNothing=!0):null===r?.format?.parse&&(s.parseNothing=!0),t=Ds.makeExplicit(t,e,s)??t,t=new _p(t);const a=e.parent&&pb(e.parent);(jr(e)||Qc(e))&&a&&(t=cd.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function fct(e,t,n){let i=0;for(const r of t.transforms){let o,s;if(Jot(r))s=e=new cb(e,r),o="derived";else if(A6(r)){const a=ilt(r);s=e=Ds.makeWithAncestors(e,{},a,n)??e,e=new lb(e,t,r.filter)}else if(Whe(r))s=e=cd.makeFromTransform(e,r,t),o="number";else if(tst(r))o="date",void 0===n.getWithExplicit(r.field).value&&(e=new Ds(e,{[r.field]:o}),n.set(r.field,o,!1)),s=e=ld.makeFromTransform(e,r);else if(nst(r))s=e=Kc.makeFromTransform(e,r),o="number",B6(t)&&(e=new _p(e));else if(jhe(r))s=e=aM.make(e,t,r,i++),o="derived";else if(Kot(r))s=e=new hb(e,r),o="number";else if(Zot(r))s=e=new Am(e,r),o="number";else if(ist(r))s=e=kf.makeFromTransform(e,r),o="derived";else if(rst(r))s=e=new kT(e,r),o="derived";else if(ost(r))s=e=new ET(e,r),o="derived";else if(Qot(r))s=e=new ST(e,r),o="derived";else if(jot(r))s=e=new TT(e,r),o="derived";else if(Xot(r))e=new PT(e,r);else if(est(r))s=e=Om.makeFromTransform(e,r),o="derived";else if(Wot(r))s=e=new xT(e,r),o="derived";else if(Got(r))s=e=new OT(e,r),o="derived";else if(qot(r))s=e=new DT(e,r),o="derived";else{if(!Yot(r)){wt(Tnt(r));continue}s=e=new AT(e,r),o="derived"}if(s&&void 0!==o)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}(t,e,s));const l=function olt(e){const t={};if(jr(e)&&e.component.selection)for(const n of ft(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&jv(r.field)>1&&(t[r.field]="flatten")}return t}(e),c=function rlt(e){const t={};function n(i){nb(i)?t[i.field]="date":"quantitative"===i.type&&function lnt(e){return zt(e)&&fi(["min","max"],e)}(i.aggregate)?t[i.field]="number":jv(i.field)>1?i.field in t||(t[i.field]="flatten"):wm(i)&&id(i.sort)&&jv(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((jr(e)||Qc(e))&&e.forEachFieldDef((i,r)=>{if(sa(i))n(i);else{const o=dm(r),s=e.fieldDef(o);n({...i,type:s.type})}}),jr(e)){const{mark:i,markDef:r,encoding:o}=e;if(dp(i)&&!e.encoding.order){const a=o["horizontal"===r.orient?"y":"x"];Mt(a)&&"quantitative"===a.type&&!(a.field in t)&&(t[a.field]="number")}}return t}(e);t=Ds.makeWithAncestors(t,{},{...l,...c},s)??t,jr(e)&&(t=gb.parseAll(t,e),t=sM.parseAll(t,e)),(jr(e)||Qc(e))&&(a||(t=cd.makeFromEncoding(t,e)??t),t=ld.makeFromEncoding(t,e)??t,t=cb.parseAllForSortIndex(t,e));const u=e.getDataName(ar.Raw),d=new aa(t,u,ar.Raw,i);if(n[u]=d,t=d,jr(e)){const b=Kc.makeFromEncoding(t,e);b&&(t=b,B6(e)&&(t=new _p(t))),t=Om.makeFromEncoding(t,e)??t,t=kf.makeFromEncoding(t,e)??t}jr(e)&&(t=oM.make(t,e)??t);const f=e.getDataName(ar.Main),h=new aa(t,f,ar.Main,i);n[f]=h,t=h,jr(e)&&function eat(e,t){for(const[n,i]of ep(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new aa(new lb(t,e,{param:n}),r,ar.Lookup,e.component.data.outputNodeRefCounts)}}(e,h);let y=null;if(Qc(e)){const b=e.getName("facet");t=function uct(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const o of[n,i])if(id(o.sort)){const{field:s,op:a=YD}=o.sort;e=r=new Am(e,{joinaggregate:[{op:a,field:s,as:dV(o,o.sort,{forAs:!0})}],groupby:[Ft(o)]})}return r}return null}(t,e.facet)??t,y=new fb(t,e,b,h.getSource()),n[b]=y}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:h,facetRoot:y,ancestorParse:s}}class hct extends cV{constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),("shared"===t.resolve?.axis?.x||"shared"===t.resolve?.axis?.y)&&wt("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(t).map((o,s)=>mV(o,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=IT(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ft(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return lT(t)?t.vconcat:C6(t)?t.hconcat:t.concat}parseLayoutSize(){!function act(e){uV(e);const n=void 0===e.layout.columns?"height":"childHeight";RT(e,1===e.layout.columns?"width":"childWidth"),RT(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=q6(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...null!=t?{columns:t}:{},bounds:"full",align:"each"}}}const gct={disable:1,gridScale:1,scale:1,...ihe,labelExpr:1,encode:1},Fge=ft(gct);class fV extends Ef{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new fV(In(this.explicit),In(this.implicit),this.mainExtracted)}hasAxisPart(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!function pct(e){return!1===e||null===e}(this.get(t)))}hasOrientSignalRef(){return hn(this.explicit.orient)}}const yct={bottom:"top",top:"bottom",left:"right",right:"left"};function bct(e,t){if(!e)return t.map(n=>n.clone());{if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],o=t[i];if(!!r!=!!o)return;if(r&&o){const s=r.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[i]=wct(r,o)}}}return e}function wct(e,t){for(const n of Fge){const i=hp(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,o)=>{switch(n){case"title":return Vde(r,o);case"gridScale":return{explicit:r.explicit,value:Kr(r.value,o.value)}}return fT(r,o,n,"axis")});e.setWithExplicit(n,i)}return e}function Cct(e,t,n,i,r){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(hn(n.labelAngle)?n.labelAngle:H1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Bpe(i,r))return!0}return e===n[t]}const Mct=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function xct(e,t){let n=t.axis(e);const i=new fV,r=Mo(t.encoding[e]),{mark:o,config:s}=t,a=n?.orient||s["x"===e?"axisX":"axisY"]?.orient||s.axis?.orient||function uat(e){return"x"===e?"bottom":"left"}(e),l=t.getScaleComponent(e).get("type"),c=function iat(e,t,n,i){const r="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:wfe(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],o="x"===e?"axisX":"axisY",s=hn(n)?"axisOrient":`axis${z1(n)}`,a=[...r,...r.map(c=>o+c.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:Fpe(a,i,e,n),vgAxisConfig:Fpe(l,i,e,n),axisConfigStyle:rat([...l,...a],i)}}(e,l,a,t.config),u=void 0!==n?!n:V6("disable",s.style,n?.style,c).configValue;if(i.set("disable",u,void 0!==n),u)return i;n=n||{};const d=function aat(e,t,n,i,r){const o=t?.labelAngle;if(void 0!==o)return hn(o)?o:H1(o);{const{configValue:s}=V6("labelAngle",i,t?.style,r);return void 0!==s?H1(s):n!==Sr||!fi([GH,WH],e.type)||Mt(e)&&e.timeUnit?void 0:270}}(r,n,e,s.style,c),f=Lfe(n.formatType,r,l),h=Ffe(r,r.type,n.format,n.formatType,s,!0),y={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:o,config:s};for(const k of Fge){const O=k in Lpe?Lpe[k](y):ohe(k)?n[k]:void 0,I=void 0!==O,z=Cct(O,k,n,t,e);if(I&&z)i.set(k,O,z);else{const{configValue:q,configFrom:ne}=ohe(k)&&"values"!==k?V6(k,s.style,n.style,c):{},K=void 0!==q;I&&!K?i.set(k,O,z):("vgAxisConfig"!==ne||Mct.has(k)&&K||Z1(q)||hn(q))&&i.set(k,q,!1)}}const b=n.encoding??{},C=nhe.reduce((k,O)=>{if(!i.hasAxisPart(O))return k;const I=Gpe(b[O]??{},t),z="labels"===O?function mct(e,t,n){const{encoding:i,config:r}=e,o=Mo(i[t])??Mo(i[Ju(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(bm(l))return{text:qc({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:r}),...n};if(void 0===a&&void 0===l&&r.customFormatTypes){if("quantitative"===Qv(o)){if(Jv(o)&&"normalize"===o.stack&&r.normalizedNumberFormatType)return{text:qc({fieldOrDatumDef:o,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:qc({fieldOrDatumDef:o,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if("temporal"===Qv(o)&&r.timeFormatType&&Mt(o)&&!o.timeUnit)return{text:qc({fieldOrDatumDef:o,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}(t,e,I):I;return void 0!==z&&!nr(z)&&(k[O]={update:z}),k},{});return nr(C)||i.set("encode",C,!!n.encoding||void 0!==n.labelAngle),i}const Sct={vgMark:"arc",encodeEntry:e=>({...Zl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Os("x",e,{defaultPos:"mid"}),...Os("y",e,{defaultPos:"mid"}),...gp(e,"radius"),...gp(e,"theta")})},kct={vgMark:"area",encodeEntry:e=>({...Zl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...pT("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...pT("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...N6(e)})},Act={vgMark:"rect",encodeEntry:e=>({...Zl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...gp(e,"x"),...gp(e,"y")})},Oct={vgMark:"shape",encodeEntry:e=>({...Zl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Mt(n)&&n.type===Kv?{field:Ft(n,{expr:"datum"})}:{}}]}},Dct={vgMark:"image",encodeEntry:e=>({...Zl(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...gp(e,"x"),...gp(e,"y"),...F6(e,"url")})},Tct={vgMark:"line",encodeEntry:e=>({...Zl(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Os("x",e,{defaultPos:"mid"}),...Os("y",e,{defaultPos:"mid"}),...$o("size",e,{vgChannel:"strokeWidth"}),...N6(e)})},Pct={vgMark:"trail",encodeEntry:e=>({...Zl(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Os("x",e,{defaultPos:"mid"}),...Os("y",e,{defaultPos:"mid"}),...$o("size",e),...N6(e)})};function hV(e,t){const{config:n}=e;return{...Zl(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Os("x",e,{defaultPos:"mid"}),...Os("y",e,{defaultPos:"mid"}),...$o("size",e),...$o("angle",e),...Rct(e,0,t)}}function Rct(e,t,n){return n?{shape:{value:n}}:$o("shape",e)}const Ict={vgMark:"symbol",encodeEntry:e=>hV(e)},Fct={vgMark:"symbol",encodeEntry:e=>hV(e,"circle")},Lct={vgMark:"symbol",encodeEntry:e=>hV(e,"square")},Nct={vgMark:"rect",encodeEntry:e=>({...Zl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...gp(e,"x"),...gp(e,"y")})},$ct={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...Zl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pT("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...pT("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...$o("size",e,{vgChannel:"strokeWidth"})}:{}}},Bct={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Zl(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Os("x",e,{defaultPos:"mid"}),...Os("y",e,{defaultPos:"mid"}),...F6(e),...$o("size",e,{vgChannel:"fontSize"}),...$o("angle",e),..._pe("align",zct(e.markDef,0,t)),..._pe("baseline",Hct(e.markDef,0,t)),...Os("radius",e,{defaultPos:null}),...Os("theta",e,{defaultPos:null})}}};function zct(e,t,n){if(void 0===Wi("align",e,n))return"center"}function Hct(e,t,n){if(void 0===Wi("baseline",e,n))return"middle"}const Vct={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r="horizontal"===i?"width":"height",o="horizontal"===i?"height":"width";return{...Zl(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Os("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Os("y",e,{defaultPos:"mid",vgChannel:"yc"}),...$o("size",e,{defaultValue:Uct(e),vgChannel:r}),[o]:vr(Wi("thickness",n,t))}}};function Uct(e){const{config:t,markDef:n}=e,{orient:i}=n,r="horizontal"===i?"width":"height",o=e.getScaleComponent("horizontal"===i?"x":"y"),s=Wi("size",n,t,{vgChannel:r})??t.tick.bandSize;if(void 0!==s)return s;{const a=o?o.get("range"):void 0;return a&&cp(a)&&Xi(a.step)?3*a.step/4:3*cT(t.view,r)/4}}const FT={arc:Sct,area:kct,bar:Act,circle:Fct,geoshape:Oct,image:Dct,line:Tct,point:Ict,rect:Nct,rule:$ct,square:Lct,text:Bct,tick:Vct,trail:Pct};const Lge="faceted_path_",Nge="stack_group_";function pV(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:o}=e,s=Kr(i.clip,function Yct(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!(!t?.get("selectionExtent")&&!n?.get("selectionExtent"))||void 0}(e),function Xct(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),a=Nde(i),l=r.key,c=function qct(e){const{encoding:t,stack:n,mark:i,markDef:r,config:o}=e,s=t.order;if(!(!ot(s)&&Yc(s)&&fH(s.value)||!s&&fH(Wi("order",r,o)))){if((ot(s)||Mt(s))&&!n)return Bde(s,{expr:"datum"});if(dp(i)){const a="horizontal"===r.orient?"y":"x",l=t[a];if(Mt(l)){const c=l.sort;return ot(c)?{field:Ft(l,{prefix:a,suffix:"sort_index",expr:"datum"})}:id(c)?{field:Ft({aggregate:c6(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:zfe(c)?{field:Ft(e.fieldDef(c.encoding),{expr:"datum"}),order:c.order}:null===c?void 0:{field:Ft(l,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}(e),u=function Kct(e){if(!e.component.selection)return null;const t=ft(e.component.selection).length;let n=t,i=e.parent;for(;i&&0===n;)n=ft(i.component.selection).length,i=i.parent;return n?{interactive:t>0||"geoshape"===e.mark||!!e.encoding.tooltip}:null}(e),d=Wi("aria",i,o),f=FT[n].postEncodingTransform?FT[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:FT[n].vgMark,...s?{clip:!0}:{},...a?{style:a}:{},...l?{key:l.field}:{},...c?{sort:c}:{},...u||{},...!1===d?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(ar.Main)},encode:{update:FT[n].encodeEntry(e)},...f?{transform:f}:{}}]}class $ge extends Dge{constructor(t,n,i,r={},o){super(t,"unit",n,i,o,void 0,khe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=Gc(t.mark)?{...t.mark}:{type:t.mark},a=s.type;void 0===s.filled&&(s.filled=function Rot(e,t,{graticule:n}){if(n)return!1;const i=Cf("filled",e,t),r=e.type;return Kr(i,r!==WD&&r!==jD&&r!==GD)}(s,o,{graticule:t.data&&T6(t.data)}));const l=this.encoding=function zrt(e,t,n,i){const r={};for(const o of ft(e))Mde(o)||wt(Unt(o));for(let o of Ktt){if(!e[o])continue;const s=e[o];if(Yv(o)){const a=Sde(o),l=r[a];if(Mt(l)){if(Uit(l.type)&&Mt(s)&&!l.timeUnit){wt(Fnt(a));continue}}else o=a,wt(Lnt(a))}if("angle"===o&&"arc"===t&&!e.theta&&(wt("Arc marks uses theta channel rather than angle, replacing angle with theta."),o=Yl),Brt(e,o,t))if(o===_f&&"line"===t&&od(e[o])?.aggregate)wt("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");else if(o===Pa&&(n?"fill"in e:"stroke"in e))wt(Qde("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(o===U1||o===Gv&&!ot(s)&&!Yc(s)||o===um&&ot(s)){if(s){if(o===Gv){const a=e[o];if(Gfe(a)){r[o]=a;continue}}r[o]=Ht(s).reduce((a,l)=>(Mt(l)?a.push(a6(l,o)):wt(PH(l,o)),a),[])}}else{if(o===um&&null===s)r[o]=null;else if(!(Mt(s)||rd(s)||Yc(s)||KD(s)||hn(s))){wt(PH(s,o));continue}r[o]=Jfe(s,o,i)}else wt($D(o,t))}return r}(t.encoding||{},a,s.filled,o);this.markDef=Lhe(s,l,o),this.size=function Ect({encoding:e,size:t}){for(const n of ed){const i=Ia(n);sd(t[i])&&fp(e[n])&&(delete t[i],wt(efe(i)))}return t}({encoding:l,size:khe(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=Fhe(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(c=>b6(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===Afe,i=t&&Gtt.some(r=>$n(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return FD.reduce((i,r)=>{const o=Mo(n[r]);return o&&(i[r]=this.initScale(o.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Fa(t);return ot(n)&&(r.domain=n.map(pl)),ot(i)&&(r.range=i.map(pl)),r}initAxes(t){return ed.reduce((n,i)=>{const r=t[i];if($n(r)||i===Sr&&$n(t.x2)||i===Io&&$n(t.y2)){const o=$n(r)?r.axis:void 0;n[i]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=ft(t),i={};for(const r of n){const o=t[r];i[r]=Z1(o)?Ide(o):pl(o)}return i}initLegends(t){return Jtt.reduce((n,i)=>{const r=Mo(t[i]);if(r&&function tnt(e){switch(e){case Pa:case Zu:case Qu:case _f:case Ra:case yf:case rp:case op:return!0;case np:case ip:case cm:return!1}}(i)){const o=r.legend;n[i]=o&&Fa(o)}return n},{})}parseData(){this.component.data=IT(this)}parseLayoutSize(){!function lct(e){const{size:t,component:n}=e;for(const i of ed){const r=Ia(i);if(t[r]){const o=t[r];n.layoutSize.set(r,sd(o)?"step":o,!0)}else{const o=cct(e,r);n.layoutSize.set(r,o,!1)}}}(this)}parseSelections(){this.component.selection=function Jst(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const r of t){const o=Er(r.name),s=r.select,a=zt(s)?s:s.type,l=jt(s)?In(s):{type:a},c=i[a];for(const f in c)"fields"===f||"encodings"===f||("mark"===f&&(l[f]={...c[f],...l[f]}),(void 0===l[f]||!0===l[f])&&(l[f]=In(c[f]??l[f])));const u=n[o]={...l,name:o,type:a,init:r.value,bind:r.bind,events:zt(l.on)?Qh(l.on,"scope"):Ht(In(l.on))},d=In(r);for(const f of _T)f.defined(u)&&f.parse&&f.parse(e,u,d)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=function jct(e){if(fi([jD,VD,ort],e.mark)){const t=che(e.mark,e.encoding);if(t.length>0)return function Wct(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Lge+e.requestDataName(ar.Main),data:e.requestDataName(ar.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:pV(e,{fromPrefix:Lge})}]}(e,t)}else if(e.mark===UD){const t=OH.some(n=>Wi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return function Gct(e){const[t]=pV(e,{fromPrefix:Nge}),n=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),r=(c,u)=>`${c}(${[i({prefix:"min",suffix:"start",expr:u}),i({prefix:"max",suffix:"start",expr:u}),i({prefix:"min",suffix:"end",expr:u}),i({prefix:"max",suffix:"end",expr:u})].map(f=>`scale('${n}',${f})`).join(",")})`;let o,s;"x"===e.stack.fieldChannel?(o={...Uv(t.encode.update,["y","yc","y2","height",...OH]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Ta(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Uv(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Ta(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of OH){const u=Cf(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):u&&(o[c]=vr(u)),u&&(t.encode.update[c]={value:0})}const a=[];if(e.stack.groupbyChannels?.length>0)for(const c of e.stack.groupbyChannels){const u=e.fieldDef(c),d=Ft(u);d&&a.push(d),(u?.bin||u?.timeUnit)&&a.push(Ft(u,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,u)=>{if(t.encode.update[u])return{...c,[u]:t.encode.update[u]};{const d=Cf(u,e.markDef,e.config);return void 0!==d?{...c,[u]:vr(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ar.Main),name:Nge+e.requestDataName(ar.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}(e)}return pV(e)}(this)}parseAxesAndHeaders(){this.component.axes=function _ct(e){return ed.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[xct(n,e)]),t),{})}(this)}assembleSelectionTopLevelSignals(t){return function bst(e,t){let n=!1;for(const i of os(e.component.selection??{})){const r=i.name,o=kt(r+xm);if(0===t.filter(a=>a.name===r).length){const l="point"===i.type?", true, true)":")";t.push({name:i.name,update:`${Ape}(${o}, ${kt("global"===i.resolve?"union":i.resolve)}${l}`})}n=!0;for(const a of _T)a.defined(i)&&a.topLevelSignals&&(t=a.topLevelSignals(e,i,t))}return n&&0===t.filter(r=>"unit"===r.name).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),P6(t)}(this,t)}assembleSignals(){return[...Ipe(this),...yst(this,[])]}assembleSelectionData(t){return function wst(e,t){const n=[...t],i=Em(e,{escape:!1});for(const r of os(e.component.selection??{})){const o={name:r.name+xm};if(r.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Xc}}]),r.init){const a=r.project.items.map(npe);o.values=r.init.map(r.project.hasSelectionId?l=>({unit:i,[Xc]:Mm(l,!1)[0]}):l=>({unit:i,fields:a,values:Mm(l,!1)}))}n.filter(a=>a.name===r.name+xm).length||n.push(o)}return n}(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return q6(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!pb(this.parent))&&(t=ipe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return void 0!==t?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Cm(this.encoding,t)}fieldDef(t){return od(this.encoding[t])}typedFieldDef(t){const n=this.fieldDef(t);return sa(n)?n:null}}class gV extends cV{constructor(t,n,i,r,o){super(t,"layer",n,i,o,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(dT(a))return new gV(a,this,this.getName(`layer_${l}`),s,o);if(Mf(a))return new $ge(a,this,this.getName(`layer_${l}`),s,o);throw new Error(DH(a))})}parseData(){this.component.data=IT(this);for(const t of this.children)t.parseData()}parseLayoutSize(){!function sct(e){uV(e),RT(e,"width"),RT(e,"height")}(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ft(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){!function vct(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const o of ft(r.component.axes))n.axis[o]=Y6(e.component.resolve,o),"shared"===n.axis[o]&&(t[o]=bct(t[o],r.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const r of ed){for(const o of e.children)if(o.component.axes[r]){if("independent"===n.axis[r]){t[r]=(t[r]??[]).concat(o.component.axes[r]);for(const s of o.component.axes[r]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!hn(a)){if(i[a]>0&&!l){const c=yct[a];i[a]>i[c]&&s.set("orient",c,!1)}i[a]++}}}delete o.component.axes[r]}if("independent"===n.axis[r]&&t[r]&&t[r].length>1)for(const[o,s]of(t[r]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Ipe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),q6(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Ht(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:1===n.length?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return function Cst(e,t){for(const n of e.children)jr(n)&&(t=ipe(n,t));return t}(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),ige(this))}}function mV(e,t,n,i,r){if(XD(e))return new lM(e,t,n,r);if(dT(e))return new gV(e,t,n,i,r);if(Mf(e))return new $ge(e,t,n,i,r);if(function lot(e){return lT(e)||C6(e)||w6(e)}(e))return new hct(e,t,n,r);throw new Error(DH(e))}function Zct(e,t={}){t.logger&&function Cit(e){td=e}(t.logger),t.fieldTitle&&Qfe(t.fieldTitle);try{const n=Rhe(Ly(t.config,e.config)),i=Xhe(e,n),r=mV(i,null,"",void 0,n);return r.parse(),function wlt(e,t){nV(e.sources);let n=0,i=0;for(let r=0;r<5&&fge(e,t,!0);r++)n++;e.sources.map(eV);for(let r=0;r<5&&fge(e,t,!1);r++)i++;nV(e.sources),5===Math.max(n,i)&&wt("Maximum optimization runs(5) reached.")}(r.component.data,r),{spec:Jct(r,Qct(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&function ofe(){return td=rfe,td}(),t.fieldTitle&&function Rrt(){Qfe(Kfe)}()}}function Qct(e,t,n,i){const r=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):zt(t)&&(t={type:t}),r&&o&&function pst(e){return"fit"===e||"fit-x"===e||"fit-y"===e}(t.type))if("step"===r&&"step"===o)wt(Wde()),t.type="pad";else if("step"===r||"step"===o){const s="step"===r?"width":"height";wt(Wde(ID(s))),t.type=function gst(e){return e?`fit-${ID(e)}`:"fit"}("width"===s?"height":"width")}return{...1===ft(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...Zhe(n,!1),...Zhe(e,!0)}}function Jct(e,t,n={},i){const r=e.config?function wot(e){e=In(e);for(const t of vot)delete e[t];if(e.axis)for(const t in e.axis)Z1(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of iot)delete e.legend[t];if(e.mark){for(const t of Dfe)delete e.mark[t];e.mark.tooltip&&jt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Ehe(e.params)),delete e.params);for(const t of yot){for(const i of Dfe)delete e[t][i];const n=bot[t];if(n)for(const i of n)delete e[t][i];Mot(e,t)}for(const t of function not(){return ft(m6)}())delete e[t];!function Cot(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=Rde(e.title);nr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),nr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),nr(i)?delete e.title:e.title=i}(e);for(const t in e)jt(e[t])&&nr(e[t])&&delete e[t];return nr(e)?void 0:e}(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function nct(e,t){const n=[],i=Tge(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName="source_"+r++);const a=s.assemble();i(s,a)}for(const s of n)0===s.transform.length&&delete s.transform;let o=0;for(const[s,a]of n.entries())0===(a.transform??[]).length&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])"lookup"===a.type&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let u=e.assembleLayoutSignals();u=u.filter(h=>"width"!==h.name&&"height"!==h.name||void 0===h.value||(t[h.name]=+h.value,!1));const{params:d,...f}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...f,...a?{title:a}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...Ehe(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const eut="5.14.1",Bge=function tut(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}};const mb="#fff",wut={background:"#333",view:{stroke:"#888"},title:{color:mb,subtitleColor:mb},style:{"guide-label":{fill:mb},"guide-title":{fill:mb}},axis:{domainColor:mb,gridColor:"#888",tickColor:mb}},Dm="#4572a7",Cut={background:"#fff",arc:{fill:Dm},area:{fill:Dm},line:{stroke:Dm,strokeWidth:2},path:{stroke:Dm},rect:{fill:Dm},shape:{stroke:Dm},symbol:{fill:Dm,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Tm="#30a2da",_V="#cbcbcb",Eut={arc:{fill:Tm},area:{fill:Tm},axis:{domainColor:_V,grid:!0,gridColor:_V,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:_V,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:Tm,strokeWidth:2},path:{stroke:Tm,strokeWidth:.5},rect:{fill:Tm},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Tm},bar:{binSpacing:2,fill:Tm,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Pm="#000",Sut={group:{fill:"#e5e5e5"},arc:{fill:Pm},area:{fill:Pm},line:{stroke:Pm},path:{stroke:Pm},rect:{fill:Pm},shape:{stroke:Pm},symbol:{fill:Pm,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Uge="Benton Gothic, sans-serif",Rm="#82c6df",yV="Benton Gothic Bold, sans-serif",cM={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Dut={background:"#ffffff",title:{anchor:"start",color:"#000000",font:yV,fontSize:22,fontWeight:"normal"},arc:{fill:Rm},area:{fill:Rm},line:{stroke:Rm,strokeWidth:2},path:{stroke:Rm},rect:{fill:Rm},shape:{stroke:Rm},symbol:{fill:Rm,size:30},axis:{labelFont:Uge,labelFontSize:11.5,labelFontWeight:"normal",titleFont:yV,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Uge,labelFontSize:11.5,symbolType:"square",titleFont:yV,titleFontSize:13,titleFontWeight:"normal"},range:{category:cM["category-6"],diverging:cM["fireandice-6"],heatmap:cM["fire-7"],ordinal:cM["fire-7"],ramp:cM["fire-7"]}},Im="#ab5787",LT="#979797",Tut={background:"#f9f9f9",arc:{fill:Im},area:{fill:Im},line:{stroke:Im},path:{stroke:Im},rect:{fill:Im},shape:{stroke:Im},symbol:{fill:Im,size:30},axis:{domainColor:LT,domainWidth:.5,gridWidth:.2,labelColor:LT,tickColor:LT,tickWidth:.2,titleColor:LT},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Fm="#3e5c69",Put={background:"#fff",arc:{fill:Fm},area:{fill:Fm},line:{stroke:Fm},path:{stroke:Fm},rect:{fill:Fm},shape:{stroke:Fm},symbol:{fill:Fm},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ql="#1696d2",NT="Lato",vV="Lato",uM={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Nut={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:NT},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:vV,labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:NT},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:vV,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:NT,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:vV,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:NT,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:uM["six-groups-cat-1"],diverging:uM["diverging-colors"],heatmap:uM["diverging-colors"],ordinal:uM["six-groups-seq"],ramp:uM["shades-blue"]},area:{fill:Ql},rect:{fill:Ql},line:{color:Ql,stroke:Ql,strokeWidth:5},trail:{color:Ql,stroke:Ql,strokeWidth:0,size:1},path:{stroke:Ql,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Ql,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ql,stroke:null}},arc:{fill:Ql},shape:{stroke:Ql},symbol:{fill:Ql,size:30}},Lm="#3366CC",$T="Arial, sans-serif",$ut={arc:{fill:Lm},area:{fill:Lm},path:{stroke:Lm},rect:{fill:Lm},shape:{stroke:Lm},symbol:{stroke:Lm},circle:{fill:Lm},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:$T,fontSize:12},"guide-title":{font:$T,fontSize:12},"group-title":{font:$T,fontSize:12}},title:{font:$T,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},bV=e=>e*(1/3+1),Xge=bV(9),Kge=bV(10),Zge=bV(12),dM="Segoe UI",Qge="wf_standard-font, helvetica, arial, sans-serif",fM="#605E5C",eme="transparent",Jc="#118DFF",ime=["#DEEFFF","#118DFF"],qut={view:{stroke:eme},background:eme,font:dM,header:{titleFont:Qge,titleFontSize:Zge,titleColor:"#252423",labelFont:dM,labelFontSize:Kge,labelColor:fM},axis:{ticks:!1,grid:!1,domain:!1,labelColor:fM,labelFontSize:Xge,titleFont:Qge,titleColor:"#252423",titleFontSize:Zge,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Jc},line:{stroke:Jc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:dM,fontSize:Xge,fill:fM},arc:{fill:Jc},area:{fill:Jc,line:!0,opacity:.6},path:{stroke:Jc},rect:{fill:Jc},point:{fill:Jc,filled:!0,size:75},shape:{stroke:Jc},symbol:{fill:Jc,strokeWidth:1.5,size:50},legend:{titleFont:dM,titleFontWeight:"bold",titleColor:fM,labelFont:dM,labelFontSize:Kge,labelColor:fM,symbolType:"circle",symbolSize:75},range:{category:[Jc,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:ime,heatmap:ime,ordinal:["#DEEFFF","#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff","#118DFF"]}},wV='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Yut=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Xut=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function BT({type:e,background:t}){const n="dark"===e?"#161616":"#ffffff",i="dark"===e?"#f4f4f4":"#161616",o="dark"===e?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:wV,fontWeight:600},axis:{labelColor:i,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:i,labelAngle:0},style:{"guide-label":{font:wV,fill:i,fontWeight:400},"guide-title":{font:wV,fill:i,fontWeight:400}},range:{category:"dark"===e?Yut:Xut,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Kut=BT({type:"light",background:"#ffffff"}),Zut=BT({type:"light",background:"#f4f4f4"}),Qut=BT({type:"dark",background:"#262626"}),Jut=BT({type:"dark",background:"#161616"}),edt="2.14.0";function hM(e){return(hM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Mdt(e,t,n){return(t=function Cdt(e){var t=function wdt(e,t){if("object"!==hM(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==hM(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hM(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Sdt=["title","image"];function ome(e,t){return JSON.stringify(e,function Adt(e){const t=[];return function(n,i){if("object"!=typeof i||null===i)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}(t))}const sme="vg-tooltip-element",Ddt={offsetX:10,offsetY:10,id:sme,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function Tdt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function kdt(e,t,n){if(ot(e))return`[${e.map(i=>t(zt(i)?i:ome(i,n))).join(", ")}]`;if(jt(e)){let i="";const r=e,{title:o,image:s}=r,a=function Edt(e,t){if(null==e)return{};var i,r,n=function xdt(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)!(t.indexOf(r=i[o])>=0)&&(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)!(t.indexOf(i=o[r])>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,i)||(n[i]=e[i]))}return n}(r,Sdt);o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${t(s)}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const c of l){let u=a[c];void 0!==u&&(jt(u)&&(u=ome(u,n)),i+=`<tr><td class="key">${t(c)}:</td><td class="value">${t(u)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}};function ame(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function lme(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ame(Object(n),!0).forEach(function(i){Mdt(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ame(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}class cme{constructor(t){this.options=lme(lme({},Ddt),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=function Pdt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n".toString().replace(sme,e)}(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=function Rdt(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let o=e.clientY+i;return o+t.height>window.innerHeight&&(o=+e.clientY-i-t.height),{x:r,y:o}}(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}function pM(e){return(pM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ldt(e,t,n){return(t=function Fdt(e){var t=function Idt(e,t){if("object"!==pM(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==pM(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pM(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ndt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CV,ume,Bdt=Oi;function Oi(e){var t=this;if(t instanceof Oi||(t=new Oi),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function zdt(e,t,n){var i=t===e.head?new Nm(n,null,t,e):new Nm(n,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}function Hdt(e,t){e.tail=new Nm(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Vdt(e,t){e.head=new Nm(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Nm(e,t,n,i){if(!(this instanceof Nm))return new Nm(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}Oi.Node=Nm,Oi.create=Oi,Oi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},Oi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Oi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Oi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Hdt(this,arguments[e]);return this.length},Oi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Vdt(this,arguments[e]);return this.length},Oi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Oi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Oi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;null!==n;i++)e.call(t,n.value,i,this),n=n.next},Oi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;null!==n;i--)e.call(t,n.value,i,this),n=n.prev},Oi.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},Oi.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},Oi.prototype.map=function(e,t){t=t||this;for(var n=new Oi,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},Oi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Oi,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},Oi.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,n=this.head.value}for(var r=0;null!==i;r++)n=e(n,i.value,r),i=i.next;return n},Oi.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,n=this.tail.value}for(var r=this.length-1;null!==i;r--)n=e(n,i.value,r),i=i.prev;return n},Oi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},Oi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},Oi.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Oi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;null!==r&&i<e;i++)r=r.next;for(;null!==r&&i<t;i++,r=r.next)n.push(r.value);return n},Oi.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Oi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;null!==r&&i>t;i--)r=r.prev;for(;null!==r&&i>e;i--,r=r.prev)n.push(r.value);return n},Oi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;null!==r&&i<e;i++)r=r.next;var o=[];for(i=0;r&&i<t;i++)o.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),i=0;i<n.length;i++)r=zdt(this,r,n[i]);return o},Oi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};try{!function $dt(){return ume||(ume=1,CV=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),CV}()(Oi)}catch{}const Udt=Bdt,$m=Symbol("max"),Af=Symbol("length"),_b=Symbol("lengthCalculator"),gM=Symbol("allowStale"),Bm=Symbol("maxAge"),Of=Symbol("dispose"),dme=Symbol("noDisposeOnSet"),Bo=Symbol("lruList"),eu=Symbol("cache"),fme=Symbol("updateAgeOnGet"),MV=()=>1,xV=(e,t,n)=>{const i=e[eu].get(t);if(i){const r=i.value;if(zT(e,r)){if(yb(e,i),!e[gM])return}else n&&(e[fme]&&(i.value.now=Date.now()),e[Bo].unshiftNode(i));return r.value}},zT=(e,t)=>{if(!t||!t.maxAge&&!e[Bm])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Bm]&&n>e[Bm]},mM=e=>{if(e[Af]>e[$m])for(let t=e[Bo].tail;e[Af]>e[$m]&&null!==t;){const n=t.prev;yb(e,t),t=n}},yb=(e,t)=>{if(t){const n=t.value;e[Of]&&e[Of](n.key,n.value),e[Af]-=n.length,e[eu].delete(n.key),e[Bo].removeNode(t)}};class Wdt{constructor(t,n,i,r,o){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=o||0}}const hme=(e,t,n,i)=>{let r=n.value;zT(e,r)&&(yb(e,n),e[gM]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};const qdt=Object.freeze({loose:!0}),Ydt=Object.freeze({});var EV=e=>e?"object"!=typeof e?qdt:e:Ydt,SV={exports:{}},kV={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},HT="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=kV,i=HT,r=(t=e.exports={}).re=[],o=t.src=[],s=t.t={};let a=0;const l=(c,u,d)=>{const f=a++;i(c,f,u),s[c]=f,o[f]=u,r[f]=new RegExp(u,d?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),l("FULL",`^${o[s.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),l("LOOSE",`^${o[s.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),l("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",o[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(SV,SV.exports);var AV=SV.exports;const pme=/^[0-9]+$/,gme=(e,t)=>{const n=pme.test(e),i=pme.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};var Qdt={compareIdentifiers:gme,rcompareIdentifiers:(e,t)=>gme(t,e)};const VT=HT,{MAX_LENGTH:mme,MAX_SAFE_INTEGER:UT}=kV,{re:_me,t:yme}=AV,Jdt=EV,{compareIdentifiers:vb}=Qdt;var OV=class fd{constructor(t,n){if(n=Jdt(n),t instanceof fd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid Version: ${t}`);if(t.length>mme)throw new TypeError(`version is longer than ${mme} characters`);VT("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?_me[yme.LOOSE]:_me[yme.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>UT||this.major<0)throw new TypeError("Invalid major version");if(this.minor>UT||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>UT||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=i[4]?i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const o=+r;if(o>=0&&o<UT)return o}return r}):[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(VT("SemVer.compare",this.version,this.options,t),!(t instanceof fd)){if("string"==typeof t&&t===this.version)return 0;t=new fd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof fd||(t=new fd(t,this.options)),vb(this.major,t.major)||vb(this.minor,t.minor)||vb(this.patch,t.patch)}comparePre(t){if(t instanceof fd||(t=new fd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=t.prerelease[n];if(VT("prerelease compare",n,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return vb(i,r)}while(++n)}compareBuild(t){t instanceof fd||(t=new fd(t,this.options));let n=0;do{const i=this.build[n],r=t.build[n];if(VT("prerelease compare",n,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return vb(i,r)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}if(n){const r=Number(i)?1:0;0===vb(this.prerelease[0],n)?isNaN(this.prerelease[1])&&(this.prerelease=[n,r]):this.prerelease=[n,r]}break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};const vme=OV;var bb=(e,t,n)=>new vme(e,n).compare(new vme(t,n));const eft=bb,nft=bb,rft=bb,sft=bb,lft=bb,uft=bb;var DV,bme,TV,wme,yft=(e,t,n,i)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return((e,t,n)=>0===eft(e,t,n))(e,n,i);case"!=":return((e,t,n)=>0!==nft(e,t,n))(e,n,i);case">":return((e,t,n)=>rft(e,t,n)>0)(e,n,i);case">=":return((e,t,n)=>sft(e,t,n)>=0)(e,n,i);case"<":return((e,t,n)=>lft(e,t,n)<0)(e,n,i);case"<=":return((e,t,n)=>uft(e,t,n)<=0)(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};const bft=function Cme(){if(wme)return TV;wme=1;class e{constructor(Z,ae){if(ae=i(ae),Z instanceof e)return Z.loose===!!ae.loose&&Z.includePrerelease===!!ae.includePrerelease?Z:new e(Z.raw,ae);if(Z instanceof r)return this.raw=Z.value,this.set=[[Z]],this.format(),this;if(this.options=ae,this.loose=!!ae.loose,this.includePrerelease=!!ae.includePrerelease,this.raw=Z,this.set=Z.split("||").map(oe=>this.parseRange(oe.trim())).filter(oe=>oe.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${Z}`);if(this.set.length>1){const oe=this.set[0];if(this.set=this.set.filter(de=>!y(de[0])),0===this.set.length)this.set=[oe];else if(this.set.length>1)for(const de of this.set)if(1===de.length&&b(de[0])){this.set=[de];break}}this.format()}format(){return this.range=this.set.map(Z=>Z.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(Z){Z=Z.trim();const oe=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+Z,de=n.get(oe);if(de)return de;const ce=this.options.loose;Z=Z.replace(ce?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE],ye(this.options.includePrerelease)),o("hyphen replace",Z),Z=Z.replace(a[l.COMPARATORTRIM],c),o("comparator trim",Z);let pe=(Z=(Z=(Z=Z.replace(a[l.TILDETRIM],u)).replace(a[l.CARETTRIM],d)).split(/\s+/).join(" ")).split(" ").map(De=>k(De,this.options)).join(" ").split(/\s+/).map(De=>ge(De,this.options));ce&&(pe=pe.filter(De=>(o("loose invalid filter",De,this.options),!!De.match(a[l.COMPARATORLOOSE])))),o("range list",pe);const Ee=new Map,Oe=pe.map(De=>new r(De,this.options));for(const De of Oe){if(y(De))return[De];Ee.set(De.value,De)}Ee.size>1&&Ee.has("")&&Ee.delete("");const Ie=[...Ee.values()];return n.set(oe,Ie),Ie}intersects(Z,ae){if(!(Z instanceof e))throw new TypeError("a Range is required");return this.set.some(oe=>C(oe,ae)&&Z.set.some(de=>C(de,ae)&&oe.every(ce=>de.every(he=>ce.intersects(he,ae)))))}test(Z){if(!Z)return!1;if("string"==typeof Z)try{Z=new s(Z,this.options)}catch{return!1}for(let ae=0;ae<this.set.length;ae++)if(Se(this.set[ae],Z,this.options))return!0;return!1}}TV=e;const n=new class jdt{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[$m]=t.max||1/0;const n=t.length||MV;if(this[_b]="function"!=typeof n?MV:n,this[gM]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[Bm]=t.maxAge||0,this[Of]=t.dispose,this[dme]=t.noDisposeOnSet||!1,this[fme]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[$m]=t||1/0,mM(this)}get max(){return this[$m]}set allowStale(t){this[gM]=!!t}get allowStale(){return this[gM]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[Bm]=t,mM(this)}get maxAge(){return this[Bm]}set lengthCalculator(t){"function"!=typeof t&&(t=MV),t!==this[_b]&&(this[_b]=t,this[Af]=0,this[Bo].forEach(n=>{n.length=this[_b](n.value,n.key),this[Af]+=n.length})),mM(this)}get lengthCalculator(){return this[_b]}get length(){return this[Af]}get itemCount(){return this[Bo].length}rforEach(t,n){n=n||this;for(let i=this[Bo].tail;null!==i;){const r=i.prev;hme(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(let i=this[Bo].head;null!==i;){const r=i.next;hme(this,t,i,n),i=r}}keys(){return this[Bo].toArray().map(t=>t.key)}values(){return this[Bo].toArray().map(t=>t.value)}reset(){this[Of]&&this[Bo]&&this[Bo].length&&this[Bo].forEach(t=>this[Of](t.key,t.value)),this[eu]=new Map,this[Bo]=new Udt,this[Af]=0}dump(){return this[Bo].map(t=>!zT(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Bo]}set(t,n,i){if((i=i||this[Bm])&&"number"!=typeof i)throw new TypeError("maxAge must be a number");const r=i?Date.now():0,o=this[_b](n,t);if(this[eu].has(t)){if(o>this[$m])return yb(this,this[eu].get(t)),!1;const l=this[eu].get(t).value;return this[Of]&&(this[dme]||this[Of](t,l.value)),l.now=r,l.maxAge=i,l.value=n,this[Af]+=o-l.length,l.length=o,this.get(t),mM(this),!0}const s=new Wdt(t,n,o,r,i);return s.length>this[$m]?(this[Of]&&this[Of](t,n),!1):(this[Af]+=s.length,this[Bo].unshift(s),this[eu].set(t,this[Bo].head),mM(this),!0)}has(t){if(!this[eu].has(t))return!1;const n=this[eu].get(t).value;return!zT(this,n)}get(t){return xV(this,t,!0)}peek(t){return xV(this,t,!1)}pop(){const t=this[Bo].tail;return t?(yb(this,t),t.value):null}del(t){yb(this,this[eu].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],o=r.e||0;if(0===o)this.set(r.k,r.v);else{const s=o-n;s>0&&this.set(r.k,r.v,s)}}}prune(){this[eu].forEach((t,n)=>xV(this,n,!1))}}({max:1e3}),i=EV,r=function vft(){if(bme)return DV;bme=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,d){if(d=n(d),u instanceof t){if(u.loose===!!d.loose)return u;u=u.value}s("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.value=this.semver===e?"":this.operator+this.semver.version,s("comp",this)}parse(u){const f=u.match(this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR]);if(!f)throw new TypeError(`Invalid comparator: ${u}`);this.operator=void 0!==f[1]?f[1]:"","="===this.operator&&(this.operator=""),this.semver=f[2]?new a(f[2],this.options.loose):e}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if("string"==typeof u)try{u=new a(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(u.value,d).test(this.value):""===u.operator?""===u.value||new l(this.value,d).test(u.semver):!((d=n(d)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===u.value)||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))||!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}DV=t;const n=EV,{re:i,t:r}=AV,o=yft,s=HT,a=OV,l=Cme();return DV}(),o=HT,s=OV,{re:a,t:l,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:d}=AV,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=kV,y=ve=>"<0.0.0-0"===ve.value,b=ve=>""===ve.value,C=(ve,Z)=>{let ae=!0;const oe=ve.slice();let de=oe.pop();for(;ae&&oe.length;)ae=oe.every(ce=>de.intersects(ce,Z)),de=oe.pop();return ae},k=(ve,Z)=>(o("comp",ve,Z),ve=q(ve,Z),o("caret",ve),ve=I(ve,Z),o("tildes",ve),ve=K(ve,Z),o("xrange",ve),ve=me(ve,Z),o("stars",ve),ve),O=ve=>!ve||"x"===ve.toLowerCase()||"*"===ve,I=(ve,Z)=>ve.trim().split(/\s+/).map(ae=>z(ae,Z)).join(" "),z=(ve,Z)=>ve.replace(Z.loose?a[l.TILDELOOSE]:a[l.TILDE],(oe,de,ce,he,pe)=>{let Ee;return o("tilde",ve,oe,de,ce,he,pe),O(de)?Ee="":O(ce)?Ee=`>=${de}.0.0 <${+de+1}.0.0-0`:O(he)?Ee=`>=${de}.${ce}.0 <${de}.${+ce+1}.0-0`:pe?(o("replaceTilde pr",pe),Ee=`>=${de}.${ce}.${he}-${pe} <${de}.${+ce+1}.0-0`):Ee=`>=${de}.${ce}.${he} <${de}.${+ce+1}.0-0`,o("tilde return",Ee),Ee}),q=(ve,Z)=>ve.trim().split(/\s+/).map(ae=>ne(ae,Z)).join(" "),ne=(ve,Z)=>{o("caret",ve,Z);const oe=Z.includePrerelease?"-0":"";return ve.replace(Z.loose?a[l.CARETLOOSE]:a[l.CARET],(de,ce,he,pe,Ee)=>{let Oe;return o("caret",ve,de,ce,he,pe,Ee),O(ce)?Oe="":O(he)?Oe=`>=${ce}.0.0${oe} <${+ce+1}.0.0-0`:O(pe)?Oe="0"===ce?`>=${ce}.${he}.0${oe} <${ce}.${+he+1}.0-0`:`>=${ce}.${he}.0${oe} <${+ce+1}.0.0-0`:Ee?(o("replaceCaret pr",Ee),Oe="0"===ce?"0"===he?`>=${ce}.${he}.${pe}-${Ee} <${ce}.${he}.${+pe+1}-0`:`>=${ce}.${he}.${pe}-${Ee} <${ce}.${+he+1}.0-0`:`>=${ce}.${he}.${pe}-${Ee} <${+ce+1}.0.0-0`):(o("no pr"),Oe="0"===ce?"0"===he?`>=${ce}.${he}.${pe}${oe} <${ce}.${he}.${+pe+1}-0`:`>=${ce}.${he}.${pe}${oe} <${ce}.${+he+1}.0-0`:`>=${ce}.${he}.${pe} <${+ce+1}.0.0-0`),o("caret return",Oe),Oe})},K=(ve,Z)=>(o("replaceXRanges",ve,Z),ve.split(/\s+/).map(ae=>le(ae,Z)).join(" ")),le=(ve,Z)=>(ve=ve.trim()).replace(Z.loose?a[l.XRANGELOOSE]:a[l.XRANGE],(oe,de,ce,he,pe,Ee)=>{o("xRange",ve,oe,de,ce,he,pe,Ee);const Oe=O(ce),Ie=Oe||O(he),De=Ie||O(pe);return"="===de&&De&&(de=""),Ee=Z.includePrerelease?"-0":"",Oe?oe=">"===de||"<"===de?"<0.0.0-0":"*":de&&De?(Ie&&(he=0),pe=0,">"===de?(de=">=",Ie?(ce=+ce+1,he=0,pe=0):(he=+he+1,pe=0)):"<="===de&&(de="<",Ie?ce=+ce+1:he=+he+1),"<"===de&&(Ee="-0"),oe=`${de+ce}.${he}.${pe}${Ee}`):Ie?oe=`>=${ce}.0.0${Ee} <${+ce+1}.0.0-0`:De&&(oe=`>=${ce}.${he}.0${Ee} <${ce}.${+he+1}.0-0`),o("xRange return",oe),oe}),me=(ve,Z)=>(o("replaceStars",ve,Z),ve.trim().replace(a[l.STAR],"")),ge=(ve,Z)=>(o("replaceGTE0",ve,Z),ve.trim().replace(a[Z.includePrerelease?l.GTE0PRE:l.GTE0],"")),ye=ve=>(Z,ae,oe,de,ce,he,pe,Ee,Oe,Ie,De,$e,st)=>`${ae=O(oe)?"":O(de)?`>=${oe}.0.0${ve?"-0":""}`:O(ce)?`>=${oe}.${de}.0${ve?"-0":""}`:he?`>=${ae}`:`>=${ae}${ve?"-0":""}`} ${Ee=O(Oe)?"":O(Ie)?`<${+Oe+1}.0.0-0`:O(De)?`<${Oe}.${+Ie+1}.0-0`:$e?`<=${Oe}.${Ie}.${De}-${$e}`:ve?`<${Oe}.${Ie}.${+De+1}-0`:`<=${Ee}`}`.trim(),Se=(ve,Z,ae)=>{for(let oe=0;oe<ve.length;oe++)if(!ve[oe].test(Z))return!1;if(Z.prerelease.length&&!ae.includePrerelease){for(let oe=0;oe<ve.length;oe++)if(o(ve[oe].semver),ve[oe].semver!==r.ANY&&ve[oe].semver.prerelease.length>0){const de=ve[oe].semver;if(de.major===Z.major&&de.minor===Z.minor&&de.patch===Z.patch)return!0}return!1}return!0};return TV}();var wft=(e,t,n)=>{try{t=new bft(t,n)}catch{return!1}return t.test(e)},Mme=Ndt(wft);function Cft(e,t,n){const i=e.open(t),{origin:s}=new URL(t);let a=40;e.addEventListener("message",function l(u){u.source===i&&(a=0,e.removeEventListener("message",l,!1))},!1),setTimeout(function c(){a<=0||(i.postMessage(n,s),setTimeout(c,250),a-=1)},250)}var Mft='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function xme(e,...t){for(const n of t)xft(e,n);return e}function xft(e,t){for(const n of Object.keys(t))Ny(e,n,t[n],!0)}function Eme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function vp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eme(Object(n),!0).forEach(function(i){Ldt(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eme(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const ud=A;let _M=R;const Sme=typeof window<"u"?window:void 0;void 0===_M&&Sme?.vl?.compile&&(_M=Sme.vl);const qft={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Yft={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},yM={vega:"Vega","vega-lite":"Vega-Lite"},jT={vega:ud.version,"vega-lite":_M?_M.version:"not available"},Xft={vega:e=>e,"vega-lite":(e,t)=>_M.compile(e,{config:t}).spec},Kft='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Zft="chart-wrapper";function Qft(e){return"function"==typeof e}function kme(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+o),s.document.title=`${yM[i]} JSON Source`}function Jft(e,t){if(e.$schema){const n=Bge(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${yM[n.library]}, but mode argument sets ${yM[t]??t}.`);const i=n.library;return Mme(jT[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${yM[i]} ${n.version}, but the current version of ${yM[i]} is v${jT[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Ame(e){return function eht(e){return!(!e||!("load"in e))}(e)?e:ud.loader(e)}function tht(e){const t=e.usermeta?.embedOptions??{};return zt(t.defaultStyle)&&(t.defaultStyle=!1),t}function PV(){return PV=Pr(function*(e,t,n={}){let i,r;zt(t)?(r=Ame(n.loader),i=JSON.parse(yield r.load(t))):i=t;const o=tht(i),s=o.loader;(!r||s)&&(r=Ame(n.loader??s));const a=yield Ome(o,r),l=yield Ome(n,r),c=vp(vp({},xme(l,a)),{},{config:Ly(l.config??{},a.config??{})});return yield rht(e,i,c,r)}),PV.apply(this,arguments)}function Ome(e,t){return RV.apply(this,arguments)}function RV(){return RV=Pr(function*(e,t){const n=zt(e.config)?JSON.parse(yield t.load(e.config)):e.config??{},i=zt(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return vp(vp(vp({},e),i?{patch:i}:{}),n?{config:n}:{})}),RV.apply(this,arguments)}function iht(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}function rht(e,t){return IV.apply(this,arguments)}function IV(){return IV=Pr(function*(e,t,n={},i){const r=n.theme?Ly(U[n.theme],n.config??{}):n.config,o=ph(n.actions)?n.actions:xme({},qft,n.actions??{}),s=vp(vp({},Yft),n.i18n),a=n.renderer??"canvas",l=n.logLevel??ud.Warn,c=n.downloadFileName??"visualization",u="string"==typeof e?document.querySelector(e):e;if(!u)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const q="vega-embed-style",{root:ne,rootContainer:K}=iht(u);if(!ne.getElementById(q)){const le=document.createElement("style");le.id=q,le.innerHTML=void 0===n.defaultStyle||!0===n.defaultStyle?Mft.toString():n.defaultStyle,K.appendChild(le)}}const d=Jft(t,n.mode);let f=Xft[d](t,r);if("vega-lite"===d&&f.$schema){const q=Bge(f.$schema);Mme(jT.vega,`^${q.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${q.version}, but current version is v${jT.vega}.`)}u.classList.add("vega-embed"),o&&u.classList.add("has-actions"),u.innerHTML="";let h=u;if(o){const q=document.createElement("div");q.classList.add(Zft),u.appendChild(q),h=q}const y=n.patch;if(y&&(f=y instanceof Function?y(f):ik(f,y,!0,!1).newDocument),n.formatLocale&&ud.formatLocale(n.formatLocale),n.timeFormatLocale&&ud.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const q in n.expressionFunctions){const ne=n.expressionFunctions[q];"fn"in ne?ud.expressionFunction(q,ne.fn,ne.visitor):ne instanceof Function&&ud.expressionFunction(q,ne)}const{ast:b}=n,C=ud.parse(f,"vega-lite"===d?{}:r,{ast:b}),k=new(n.viewClass||ud.View)(C,vp({loader:i,logLevel:l,renderer:a},b?{expr:ud.expressionInterpreter??n.expr??Itt}:{}));if(k.addSignalListener("autosize",(q,ne)=>{const{type:K}=ne;"fit-x"==K?(h.classList.add("fit-x"),h.classList.remove("fit-y")):"fit-y"==K?(h.classList.remove("fit-x"),h.classList.add("fit-y")):"fit"==K?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),!1!==n.tooltip){const q=Qft(n.tooltip)?n.tooltip:new cme(!0===n.tooltip?{}:n.tooltip).call;k.tooltip(q)}let I,{hover:O}=n;if(void 0===O&&(O="vega"===d),O){const{hoverSet:q,updateSet:ne}="boolean"==typeof O?{}:O;k.hover(q,ne)}if(n&&(null!=n.width&&k.width(n.width),null!=n.height&&k.height(n.height),null!=n.padding&&k.padding(n.padding)),yield k.initialize(h,n.bind).runAsync(),!1!==o){let q=u;if(!1!==n.defaultStyle){const K=document.createElement("details");K.title=s.CLICK_TO_VIEW_ACTIONS,u.append(K),q=K;const le=document.createElement("summary");le.innerHTML=Kft,K.append(le),I=me=>{K.contains(me.target)||K.removeAttribute("open")},document.addEventListener("click",I)}const ne=document.createElement("div");if(q.append(ne),ne.classList.add("vega-actions"),!0===o||!1!==o.export)for(const K of["svg","png"])if(!0===o||!0===o.export||o.export[K]){const le=s[`${K.toUpperCase()}_ACTION`],me=document.createElement("a"),ge=jt(n.scaleFactor)?n.scaleFactor[K]:n.scaleFactor;me.text=le,me.href="#",me.target="_blank",me.download=`${c}.${K}`,me.addEventListener("mousedown",function(){var ye=Pr(function*(Se){Se.preventDefault();const ve=yield k.toImageURL(K,ge);this.href=ve});return function(Se){return ye.apply(this,arguments)}}()),ne.append(me)}if(!0===o||!1!==o.source){const K=document.createElement("a");K.text=s.SOURCE_ACTION,K.href="#",K.addEventListener("click",function(le){kme(eN()(t),n.sourceHeader??"",n.sourceFooter??"",d),le.preventDefault()}),ne.append(K)}if("vega-lite"===d&&(!0===o||!1!==o.compiled)){const K=document.createElement("a");K.text=s.COMPILED_ACTION,K.href="#",K.addEventListener("click",function(le){kme(eN()(f),n.sourceHeader??"",n.sourceFooter??"","vega"),le.preventDefault()}),ne.append(K)}if(!0===o||!1!==o.editor){const K=n.editorUrl??"https://vega.github.io/editor/",le=document.createElement("a");le.text=s.EDITOR_ACTION,le.href="#",le.addEventListener("click",function(me){Cft(window,K,{config:r,mode:d,renderer:a,spec:eN()(t)}),me.preventDefault()}),ne.append(le)}}return{view:k,spec:t,vgSpec:f,finalize:function z(){I&&document.removeEventListener("click",I),k.finalize()},embedOptions:n}}),IV.apply(this,arguments)}function oht(e,t){1&e&&Un(0,"div",9)}function sht(e,t){if(1&e&&(Ve(0,"span",10),At(1),Ge()),2&e){const n=on().$implicit;Ye(1),Fi(n.description)}}function aht(e,t){if(1&e&&(Ve(0,"section",11),Un(1,"ngx-json-viewer",12),Ge()),2&e){const n=on().$implicit,i=on();Ye(1),it("json",n.value)("expanded",i.expanded)("depth",i.depth)("_currentDepth",i._currentDepth+1)}}const lht=function(e){return["segment",e]},cht=function(e,t){return{"segment-main":!0,expandable:e,expanded:t}};function uht(e,t){if(1&e){const n=Xa();Ve(0,"section",2)(1,"section",3),fn("click",function(){const o=lo(n).$implicit;return co(on().toggle(o))}),tn(2,oht,1,0,"div",4),Ve(3,"span",5),At(4),Ge(),Ve(5,"span",6),At(6,": "),Ge(),tn(7,sht,2,1,"span",7),Ge(),tn(8,aht,2,4,"section",8),Ge()}if(2&e){const n=t.$implicit,i=on();it("ngClass",zs(6,lht,"segment-type-"+n.type)),Ye(1),it("ngClass",function VW(e,t,n,i,r){return jW(ht(),Fs(),e,t,n,i,r)}(8,cht,i.isExpandable(n),n.expanded)),Ye(1),it("ngIf",i.isExpandable(n)),Ye(2),Fi(n.key),Ye(3),it("ngIf",!n.expanded||!i.isExpandable(n)),Ye(1),it("ngIf",n.expanded&&i.isExpandable(n))}}let dht=(()=>{class e{constructor(){this.expanded=!0,this.depth=-1,this._currentDepth=0,this.segments=[]}ngOnChanges(){this.segments=[],this.json=this.decycle(this.json),"object"==typeof this.json?Object.keys(this.json).forEach(n=>{this.segments.push(this.parseKeyValue(n,this.json[n]))}):this.segments.push(this.parseKeyValue(`(${typeof this.json})`,this.json))}isExpandable(n){return"object"===n.type||"array"===n.type}toggle(n){this.isExpandable(n)&&(n.expanded=!n.expanded)}parseKeyValue(n,i){const r={key:n,value:i,type:void 0,description:""+i,expanded:this.isExpanded()};switch(typeof r.value){case"number":r.type="number";break;case"boolean":r.type="boolean";break;case"function":r.type="function";break;case"string":r.type="string",r.description='"'+r.value+'"';break;case"undefined":r.type="undefined",r.description="undefined";break;case"object":null===r.value?(r.type="null",r.description="null"):Array.isArray(r.value)?(r.type="array",r.description="Array["+r.value.length+"] "+JSON.stringify(r.value)):r.value instanceof Date?r.type="date":(r.type="object",r.description="Object "+JSON.stringify(r.value))}return r}isExpanded(){return this.expanded&&!(this.depth>-1&&this._currentDepth>=this.depth)}decycle(n){const i=new WeakMap;return function r(o,s){let a,l;return"object"!=typeof o||null===o||o instanceof Boolean||o instanceof Date||o instanceof Number||o instanceof RegExp||o instanceof String?o:(a=i.get(o),void 0!==a?{$ref:a}:(i.set(o,s),Array.isArray(o)?(l=[],o.forEach(function(c,u){l[u]=r(c,s+"["+u+"]")})):(l={},Object.keys(o).forEach(function(c){l[c]=r(o[c],s+"["+JSON.stringify(c)+"]")})),l))}(n,"$")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ir({type:e,selectors:[["ngx-json-viewer"]],inputs:{json:"json",expanded:"expanded",depth:"depth",_currentDepth:"_currentDepth"},features:[_t],decls:2,vars:1,consts:[[1,"ngx-json-viewer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click"],["class","toggler",4,"ngIf"],[1,"segment-key"],[1,"segment-separator"],["class","segment-value",4,"ngIf"],["class","children",4,"ngIf"],[1,"toggler"],[1,"segment-value"],[1,"children"],[3,"json","expanded","depth","_currentDepth"]],template:function(n,i){1&n&&(Ve(0,"section",0),tn(1,uht,9,11,"section",1),Ge()),2&n&&(Ye(1),it("ngForOf",i.segments))},dependencies:[Zp,ny,_u,e],styles:['@charset "UTF-8";.ngx-json-viewer[_ngcontent-%COMP%]{font-family:var(--ngx-json-font-family, monospace);font-size:var(--ngx-json-font-size, 1em);width:100%;height:100%;overflow:hidden;position:relative}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{padding:2px;margin:1px 1px 1px 12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]{word-wrap:break-word}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{position:absolute;margin-left:-14px;margin-top:3px;font-size:.8em;line-height:1.2em;vertical-align:middle;color:var(--ngx-json-toggler, #787878)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]:after{display:inline-block;content:"\\25ba";transition:transform .1s ease-in}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-key[_ngcontent-%COMP%]{color:var(--ngx-json-key, #4E187C)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-separator[_ngcontent-%COMP%]{color:var(--ngx-json-separator, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-value, #000)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-string[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-string, #FF6B6B)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-number[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-number, #009688)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-boolean[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-boolean, #B938A4)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-date[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-date, #05668D)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-array, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-object, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-function[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-function, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-null, #fff)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-undefined, #fff)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:var(--ngx-json-null-bg, red)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-key[_ngcontent-%COMP%]{color:var(--ngx-json-undefined-key, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:var(--ngx-json-undefined-key, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%]{white-space:nowrap}.ngx-json-viewer[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]{cursor:pointer}']}),e})(),fht=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fa]}),e})();const hht=["diagrams"],pht=["diagramsSelected"],ght=["chartDummy"],mht=["legend"],_ht=["zommedChart"],yht=function(e,t,n){return{data:e,mark:t,encoding:n}},vht=function(e){return{violations:e}};function bht(e,t){if(1&e&&(Ve(0,"div",22)(1,"div",23),At(2," Specification "),Un(3,"ngx-json-viewer",24),Ge(),Ve(4,"div",25),At(5," Violations "),Un(6,"ngx-json-viewer",24),Ge()()),2&e){const n=on();Ye(3),it("json",xx(4,yht,n._legendData.spec.data,n._legendData.spec.mark,n._legendData.spec.encoding))("depth",0),Ye(3),it("json",zs(8,vht,n._legendData.model.violations))("depth",0)}}const wht=function(e,t,n){return{visibility:e,bottom:t,left:n}},Cht=function(e){return{"legend-fade-out":e}};let Mht=(()=>{class e{constructor(n,i){this.knowledgeBaseSerice=n,this.renderer=i,this.selectedVizRecSets=[],this.subscriptions=[],this._legendVisible=!1,this._legendData={title:"",id:null,description:null,model:null,spec:null,visEl:null,weight:0,hasContent:!1},this._legendPos={left:0,top:0,right:0,bottom:0},this._legendHovered=!1,this._legendFadeOut=!1;const r=this.knowledgeBaseSerice.selectedHypergraphSet.subscribe(s=>{s&&(this.selectedHypergraphSet=s,this.showConstraintsViolations(s))}),o=this.knowledgeBaseSerice.hoveredHypergraphSet.subscribe(s=>{s&&(this.hoveredHypergraphSet=s,this.showConstraintsViolations(s))});this.subscriptions.push(r),this.subscriptions.push(o)}set data(n){this._data=n,n&&n.specs&&n.specs.length>0&&this.draw()}ngOnInit(){}ngAfterViewInit(){}ngOnDestroy(){this.subscriptions.forEach(n=>{n&&n.unsubscribe()})}showConstraintsViolations(n){const i=or(".chart");i.classed("violated",!1),i.selectAll(".rec>.cost").style("display","block");let r=[],o=[],s=!1;n.length>0&&this._data.models.forEach((a,l)=>{if(n.forEach((c,u)=>{const d=a.violations.filter(f=>c.name==f.name&&c.constraintType==f.type);0!=d.length&&(r.push(d.length*d[0].weight),s=!0),d.length>1&&o.push(d)}),s){Zn("#chart-"+l+">.rec>.cost").style("display","none"),Zn("#chart-"+l).classed("violated",!0);const c=Zn("#chart-"+l+">.overlay.cost");c.select("span:first-child").html(""+GI(r)),c.select("span:last-child").html("/"+this._data.models[l].costs[0]),Zn("#chart-"+l+">.overlay.number-multiples").html(o.length>0?o.length+" rule"+(o.length>1?"s":"")+" multiple times":""),Zn("#chart-"+l+">.overlay.number-violations").html(r.length+" violated rule"+(r.length>1?"s":"")),s=!1,o=[],r=[]}})}draw(){let n=this;this.diagrams.nativeElement.innerHTML="";const i={width:150,height:150,padding:10,renderer:"canvas",actions:!0};this._data.specs.forEach((r,o)=>{const s=this._data.models[o].costs[0],a=Zn(this.chartDummy.nativeElement).clone(!0),l=a.select(".vega");a.select(".cost>span").html(""+s),this.embedVis(l.node(),r,i),a.select(".title").text("Chart "+(o+1)),a.attr("id","chart-"+o).classed("hidden",!1).on("click",function(c){const u=+this.id.split("-")[1];n.selectedVizRecSets.forEach((b,C)=>{Zn(".selected-"+C).classed("selected-"+C,!1)});const h=n.selectedVizRecSets.map(b=>b.index).includes(o),y=Zn(a.node());if(y.classed("locked",!h&&y.classed("locked")),y.classed("selected",!h),h)if(h&&n.selectedVizRecSets.length-1>0){const b=n.selectedVizRecSets.map(C=>C.index).indexOf(o);n.selectedVizRecSets.splice(b,1)}else n.selectedVizRecSets=[];else n.selectedVizRecSets.push({model:n._data.models[u],spec:n._data.specs[u],index:u});if(n.selectedVizRecSets.length>2&&Zn("#chart-"+n.selectedVizRecSets.shift().index).classed("locked",!1).classed("selected",!1),n.diagramsSelected.nativeElement.innerHTML="",n.selectedVizRecSets.forEach((b,C)=>{const k=Zn("#chart-"+b.index);k.classed("selected-"+C,!0),k.select(".multi-selection-number").text(C+1)}),n.selectedVizRecSets.length>0){const b=n.selectedVizRecSets[n.selectedVizRecSets.length-1];n._legendVisible=!0,n._legendFadeOut=!1,n._legendData.title="Chart "+(b.index+1),n._legendData.id=b.index,n._legendData.hasContent=!0,n._legendData.weight=b.model.costs[0],n._legendData.model=b.model,n._legendData.spec=b.spec,n._legendHovered=!1,n._legendVisible=!0}else n._legendVisible=!1,n._legendFadeOut=!0,n._legendHovered=!1;n.knowledgeBaseSerice.setSelectedVizRecSets(n.selectedVizRecSets)}).on("mouseenter",function(c){const u=+this.id.split("-")[1],d=n._data.models[u],f=n._data.specs[u];n.selectedVizRecSets.map(y=>y.index).includes(o)||(n.hoveredVizRecSet={model:d,spec:f,index:u},n.knowledgeBaseSerice.setHoveredVizRecSet(n.hoveredVizRecSet))}).on("mouseleave",function(c){n.knowledgeBaseSerice.setHoveredVizRecSet(null)}),a.select(".multiple-selection").on("click",function(c){const u=Zn(a.node()),d=u.classed("locked");u.classed("locked",!d)}),this.diagrams.nativeElement.appendChild(a.node())})}cloneCanvas(n){var i=document.createElement("canvas"),r=i.getContext("2d");return i.width=n.width,i.height=n.height,r.drawImage(n,0,0),i}replaceCanvas(n,i){n.getContext("2d").drawImage(i,0,0)}embedVis(n,i,r){(function nht(e,t){return PV.apply(this,arguments)})(n,i,r).then(o=>{})}updateTooltipVis(n){if(n){const i=this.zommedChart.nativeElement.childNodes;for(let r of i)this.renderer.removeChild(this.zommedChart.nativeElement,r);this.renderer.appendChild(this.zommedChart.nativeElement,n)}}closeLegend(){this._legendVisible=!1,this._legendFadeOut=!0,this._legendHovered=!1}}return e.\u0275fac=function(n){return new(n||e)(Pe(xL),Pe(Sl))},e.\u0275cmp=ir({type:e,selectors:[["app-recommendations"]],viewQuery:function(n,i){if(1&n&&(br(hht,5),br(pht,5),br(ght,5),br(mht,5),br(_ht,5)),2&n){let r;ii(r=ri())&&(i.diagrams=r.first),ii(r=ri())&&(i.diagramsSelected=r.first),ii(r=ri())&&(i.chartDummy=r.first),ii(r=ri())&&(i.legend=r.first),ii(r=ri())&&(i.zommedChart=r.first)}},inputs:{data:"data"},decls:37,vars:11,consts:[[1,"diagrams-selected"],[1,"diagrams"],["diagramsSelected",""],["diagrams",""],[1,"chart","hidden"],["chartDummy",""],[1,"rec"],[1,"vega"],[1,"cost"],[1,"violations"],[1,"title"],[1,"overlay","multi-selection-number"],[1,"overlay","bg"],[1,"overlay","gradient"],[1,"overlay","cost"],[1,"overlay","number-violations"],[1,"overlay","number-multiples"],[1,"legend",3,"ngStyle","ngClass"],["legend",""],["zommedChart",""],["class","content",4,"ngIf"],[1,"close",3,"click"],[1,"content"],[1,"json-viewer",2,"padding-bottom","5px","border-bottom","1px solid #ccc"],[3,"json","depth"],[1,"json-viewer"]],template:function(n,i){1&n&&(Ve(0,"div",0)(1,"div"),At(2,"Selected"),Ge(),Un(3,"div",1,2),Ge(),Un(5,"div",1,3),Ve(7,"div",4,5)(9,"div",6),Un(10,"div",7),Ve(11,"div",8),At(12,"Cost "),Un(13,"span"),Ge(),Un(14,"div",9),Ge(),Un(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13),Ve(19,"div",14),At(20,"Cost "),Un(21,"span")(22,"span"),Ge(),Un(23,"div",15)(24,"div",16),Ge(),Ve(25,"div",17,18)(27,"div",10)(28,"h3"),At(29),Ve(30,"small"),At(31),Ge()()(),Un(32,"div",null,19),tn(34,bht,7,10,"div",20),Ve(35,"div",21),fn("click",function(){return i.closeLegend()}),At(36,"\u2716"),Ge()()),2&n&&(Ye(25),it("ngStyle",xx(5,wht,i._legendVisible||i._legendFadeOut?"visible":"none",i._legendPos.bottom+"px",i._legendPos.left+"px"))("ngClass",zs(9,Cht,i._legendFadeOut)),Ye(4),ua("",i._legendData.title," "),Ye(2),ua("(cost ",i._legendData.weight,")"),Ye(3),it("ngIf",i._legendData.hasContent))},dependencies:[Zp,_u,O0,dht],styles:['.mat-badge-content[_ngcontent-%COMP%]{font-weight:600;font-size:12px;font-family:Roboto,Helvetica Neue,sans-serif}.mat-badge-small[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:9px}.mat-badge-large[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:24px}.mat-h1[_ngcontent-%COMP%], .mat-headline[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font:400 24px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h2[_ngcontent-%COMP%], .mat-title[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-title[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h3[_ngcontent-%COMP%], .mat-subheading-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-subheading-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font:400 16px/28px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h4[_ngcontent-%COMP%], .mat-subheading-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-subheading-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:400 15px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font:400 11.62px/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:400 9.38px/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-body-strong[_ngcontent-%COMP%], .mat-body-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-strong[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.mat-small[_ngcontent-%COMP%], .mat-caption[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-small[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{font:400 12px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-display-4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-4[_ngcontent-%COMP%]{font:300 112px/112px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.05em;margin:0 0 56px}.mat-display-3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-3[_ngcontent-%COMP%]{font:400 56px/56px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.02em;margin:0 0 64px}.mat-display-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-2[_ngcontent-%COMP%]{font:400 45px/48px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.005em;margin:0 0 64px}.mat-display-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-1[_ngcontent-%COMP%]{font:400 34px/40px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 64px}.mat-bottom-sheet-container[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-button[_ngcontent-%COMP%], .mat-raised-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-fab[_ngcontent-%COMP%], .mat-mini-fab[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-button-toggle[_ngcontent-%COMP%], .mat-card[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:20px}.mat-card-subtitle[_ngcontent-%COMP%], .mat-card-content[_ngcontent-%COMP%]{font-size:14px}.mat-checkbox[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-checkbox-layout[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{line-height:24px}.mat-chip[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-chip[_ngcontent-%COMP%]   .mat-chip-trailing-icon.mat-icon[_ngcontent-%COMP%], .mat-chip[_ngcontent-%COMP%]   .mat-chip-remove.mat-icon[_ngcontent-%COMP%]{font-size:18px}.mat-table[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-header-cell[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{font-size:14px}.mat-calendar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-calendar-body[_ngcontent-%COMP%]{font-size:13px}.mat-calendar-body-label[_ngcontent-%COMP%], .mat-calendar-period-button[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-calendar-table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.mat-dialog-title[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-expansion-panel-header[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:15px;font-weight:400}.mat-expansion-panel-content[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field[_ngcontent-%COMP%]{font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.34375em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:150%;line-height:1.125}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:1.5em;width:1.5em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:1.125em;line-height:1.125}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5em 0;border-top:.84375em solid transparent}.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34375em) scale(.75);width:133.3333333333%}.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34374em) scale(.75);width:133.3333433333%}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-.84375em;padding-top:.84375em}.mat-form-field-label[_ngcontent-%COMP%]{top:1.34375em}.mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.34375em}.mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{font-size:75%;margin-top:.6666666667em;top:calc(100% - 1.7916666667em)}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.4375em 0}.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);width:133.3333333333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);width:133.3333433333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);width:133.3333533333%}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.28125em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{margin-top:.5416666667em;top:calc(100% - 1.6666666667em)}@media print{.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28122em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28121em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.2812em) scale(.75)}}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.25em 0 .75em}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.09375em;margin-top:-.5em}.mat-form-field-appearance-fill.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59374em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:1em 0}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.84375em;margin-top:-.25em}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59374em) scale(.75);width:133.3333433333%}.mat-grid-tile-header[_ngcontent-%COMP%], .mat-grid-tile-footer[_ngcontent-%COMP%]{font-size:14px}.mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%], .mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2), .mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}input.mat-input-element[_ngcontent-%COMP%]{margin-top:-.0625em}.mat-menu-item[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:400}.mat-paginator[_ngcontent-%COMP%], .mat-paginator-page-size[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px}.mat-radio-button[_ngcontent-%COMP%], .mat-select[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-select-trigger[_ngcontent-%COMP%]{height:1.125em}.mat-slide-toggle-content[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-slider-thumb-label-text[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px;font-weight:500}.mat-stepper-vertical[_ngcontent-%COMP%], .mat-stepper-horizontal[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-step-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.mat-step-sub-label-error[_ngcontent-%COMP%]{font-weight:400}.mat-step-label-error[_ngcontent-%COMP%]{font-size:14px}.mat-step-label-selected[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-tab-group[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-toolbar[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0}.mat-tooltip[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:10px;padding-top:6px;padding-bottom:6px}.mat-tooltip-handset[_ngcontent-%COMP%]{font-size:14px;padding-top:8px;padding-bottom:8px}.mat-list-item[_ngcontent-%COMP%], .mat-list-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px;font-weight:500}.mat-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:16px}.mat-optgroup-label[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-simple-snackbar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px}.mat-simple-snackbar-action[_ngcontent-%COMP%]{line-height:1;font-family:inherit;font-size:inherit;font-weight:500}.mat-tree[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-tree-node[_ngcontent-%COMP%], .mat-nested-tree-node[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.mat-ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative}.mat-ripple[_ngcontent-%COMP%]:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded[_ngcontent-%COMP%]{overflow:visible}.mat-ripple-element[_ngcontent-%COMP%]{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0,0,.2,1);transform:scale3d(0,0,0)}.cdk-high-contrast-active[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{display:none}.cdk-visually-hidden[_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl][_ngcontent-%COMP%]   .cdk-visually-hidden[_ngcontent-%COMP%]{left:auto;right:0}.cdk-overlay-container[_ngcontent-%COMP%], .cdk-global-overlay-wrapper[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}.cdk-high-contrast-active[_ngcontent-%COMP%]   .cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%]{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation[_ngcontent-%COMP%]{transition:none}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}textarea.cdk-textarea-autosize[_ngcontent-%COMP%]{resize:none}textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:auto!important;overflow:hidden!important}textarea.cdk-textarea-autosize-measuring-firefox[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:0!important}@keyframes cdk-text-field-autofill-start{}@keyframes cdk-text-field-autofill-end{}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}.mat-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-focus-indicator[_ngcontent-%COMP%]:before{inset:0;position:absolute;box-sizing:border-box;pointer-events:none;display:none;display:var(--mat-focus-indicator-display, none);border:3px solid transparent;border:var(--mat-focus-indicator-border-width, 3px) var(--mat-focus-indicator-border-style, solid) var(--mat-focus-indicator-border-color, transparent);border-radius:4px;border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator[_ngcontent-%COMP%]:focus:before{content:""}.cdk-high-contrast-active[_ngcontent-%COMP%]{--mat-focus-indicator-display: block}.mat-mdc-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-mdc-focus-indicator[_ngcontent-%COMP%]:before{inset:0;position:absolute;box-sizing:border-box;pointer-events:none;display:none;display:var(--mat-mdc-focus-indicator-display, none);border:3px solid transparent;border:var(--mat-mdc-focus-indicator-border-width, 3px) var(--mat-mdc-focus-indicator-border-style, solid) var(--mat-mdc-focus-indicator-border-color, transparent);border-radius:4px;border-radius:var(--mat-mdc-focus-indicator-border-radius, 4px)}.mat-mdc-focus-indicator[_ngcontent-%COMP%]:focus:before{content:""}.cdk-high-contrast-active[_ngcontent-%COMP%]{--mat-mdc-focus-indicator-display: block}.mat-tab-nav-bar[_ngcontent-%COMP%], .mat-tab-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.12)}.mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-nav-bar[_ngcontent-%COMP%], .mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.12);border-bottom:none}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#ffffff80}.mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#ffffff80}.mat-tab-group[class*=mat-background-][_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar[class*=mat-background-][_ngcontent-%COMP%]{border-bottom:none;border-top:none}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#c2c4c64d}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#343a40}.mat-tab-group.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#ffedbc4d}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#ffc421}.mat-tab-group.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#000}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#f8bbd04d}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#e91e63}.mat-tab-group.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#c2c4c64d}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#343a40}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#fff6}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff;opacity:.4}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#fff;opacity:.12}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#ffedbc4d}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#ffc421}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#000}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#0006}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#000}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#000;opacity:.4}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000;opacity:.12}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#f8bbd04d}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#e91e63}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#fff6}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff;opacity:.4}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#fff;opacity:.12}  .diagrams-selected{height:0;opacity:0;padding-bottom:15px;background-color:#ddd;border-bottom:1px solid #ccc}  .diagrams{position:relative;box-sizing:border-box;padding:0;display:flex;flex-wrap:wrap}  .chart{box-sizing:border-box;display:block;width:214px;height:214px;position:relative;padding:3px;margin:1px;border:4px solid transparent;background-color:#fff}  .chart:hover,   .chart.hovered{border:4px solid #8d8d8d}  .chart:hover>.overlay.multiple-selection,   .chart.hovered>.overlay.multiple-selection{display:block;opacity:1}  .chart:hover>.multi-selection-number,   .chart.hovered>.multi-selection-number{color:#8d8d8d}  .chart.selected>.multi-selection-number{display:block;opacity:1}  .chart.selected.selected-0{border:4px solid #0E5C8C}  .chart.selected.selected-0>.multi-selection-number{color:#0e5c8c}  .chart.selected.selected-1{border:4px solid #8b0000}  .chart.selected.selected-1>.multi-selection-number{color:#8b0000}  .chart.locked>.overlay.multiple-selection{display:block!important;opacity:1!important}  .chart.locked>.overlay.multiple-selection>mat-icon{font-size:19px;color:#8b0000}  .chart.violated>.rec{opacity:.8}  .chart.violated>.overlay.bg{opacity:.2;display:block}  .chart.violated>.overlay.gradient{opacity:1;display:block}  .chart.violated>.overlay.cost,   .chart.violated>.overlay.number-violations,   .chart.violated>.overlay.number-multiples{opacity:1;display:block}  .chart .title{position:absolute;top:-6px;left:10px;background-color:#fff;padding:1px 3px;z-index:1000;line-height:1;font-size:10px}  .chart .overlay{position:absolute;opacity:0;line-height:1;display:none}  .chart .overlay.multi-selection-number{left:2px;top:2px;width:24px;height:30px;opacity:1;font-size:24px;font-weight:700;color:#8b0000}  .chart .overlay.multiple-selection{right:2px;top:34px;width:24px;height:24px;opacity:1}  .chart .overlay.multiple-selection>mat-icon{font-size:18px;color:#8d8d8d}  .chart .overlay.bg,   .chart .overlay.gradient{top:0;left:0;width:100%;height:100%;z-index:998}  .chart .overlay.bg{background-color:#8b0000}  .chart .overlay.gradient{background:-webkit-gradient(linear,100% 80%,100% 100%,from(rgba(0,0,0,0)),to(rgba(137,0,0,.2)))}  .chart .overlay.cost,   .chart .overlay.number-violations,   .chart .overlay.number-multiples{z-index:999;color:#8b0000}  .chart .overlay.cost{right:4px;bottom:2px;text-align:right;font-size:12px}  .chart .overlay.cost>span:first-child{font-size:40px}  .chart .overlay.cost>span:last-child{font-size:12px}  .chart .overlay.number-violations{left:5px;bottom:5px;font-size:12px;text-align:left;width:100%}  .chart .overlay.number-multiples{left:5px;bottom:20px;font-size:12px;text-align:left;width:100%}  .chart:not(.locked)>.multiple-selection .lock-open{display:block;color:#8b0000}  .chart:not(.locked)>.multiple-selection .lock-closed{display:none;color:#8b0000}  .chart:not(.locked)>.multiple-selection:hover .lock-open{display:none}  .chart:not(.locked)>.multiple-selection:hover .lock-closed{display:block}  .chart.locked>.multiple-selection .lock-open{display:none;color:#8b0000}  .chart.locked>.multiple-selection .lock-closed{display:block;color:#8b0000}  .chart.locked>.multiple-selection:hover .lock-open{display:block}  .chart.locked>.multiple-selection:hover .lock-closed{display:none}  .chart,   .chart-wrapper{cursor:pointer!important}  .chart canvas{width:auto!important;width:initial!important;height:auto!important;height:initial!important}  .chart .vega,   .chart canvas,   .chart svg{max-width:200px!important;max-height:180px!important;-o-object-fit:scale-down;object-fit:scale-down}  .vega-embed{position:static!important;position:initial!important}.rec[_ngcontent-%COMP%] > .cost[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#3d444b}.hidden[_ngcontent-%COMP%]{display:none}.legend[_ngcontent-%COMP%]{z-index:1101;width:100%;max-width:none;position:sticky;display:block;visibility:hidden}.legend[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:4px 8px}.legend[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{padding:4px 8px 8px}.legend[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:14px}.legend[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#8b0000}.legend[_ngcontent-%COMP%]  .json-viewer{line-height:1!important}.legend[_ngcontent-%COMP%]  .json-viewer .ngx-json-viewer>.segment{padding:1px 0!important}.legend[_ngcontent-%COMP%]  .json-viewer .ngx-json-viewer .segment .segment-main .toggler{margin-top:-3px!important;margin-left:-17px!important}.legend[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:5px;right:7px;z-index:1102;color:#333;cursor:pointer;font-size:12px;line-height:1;padding:2px}.legend[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#8b0000;font-size:14px;right:6px}']}),e})(),Dme=(()=>{class e{transform(n){return Object.values(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Uo({name:"enumToArray",type:e,pure:!0}),e})(),xht=(()=>{class e{transform(n,i){return i?n.filter(r=>r.asp.includes(i)||r.name.includes(i)||r.description.includes(i)||r.weight==i):n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Uo({name:"constraintsFilter",type:e,pure:!0}),e})();function Eht(e,t){if(1&e&&(Ve(0,"mat-option",8),At(1),Yp(2,"titlecase"),Ge()),2&e){const n=t.$implicit;it("value",n),Ye(1),ua("",Z_(2,2,n)," Constraints")}}function Sht(e,t){if(1&e){const n=Xa();Ve(0,"button",9),fn("click",function(){return lo(n),co(on().filter=null)}),Ve(1,"mat-icon"),At(2,"close"),Ge()()}}function kht(e,t){if(1&e&&(Ve(0,"small"),At(1),Ge()),2&e){const n=on().$implicit;Ye(1),ua("(cost ",n.weight,")")}}function Aht(e,t){if(1&e&&(Ve(0,"div",10)(1,"div",11),At(2),tn(3,kht,2,1,"small",12),Ge(),Ve(4,"div",13),At(5),Ge(),Ve(6,"div",14),At(7),Ge()()),2&e){const n=t.$implicit;Ye(2),ua("",n.name," "),Ye(1),it("ngIf",n.weight&&-1!=n.weight||null!=n.weight&&0==n.weight),Ye(2),Fi(n.description),Ye(2),Fi(n.asp)}}let Oht=(()=>{class e{constructor(n){this.databaseService=n,this.constraintTypes=_r,this.filter=null,this.constraints=[],this.type=_r.SOFT}ngOnInit(){}ngAfterViewInit(){this.getConstraints(this.type)}getConstraints(n){this.databaseService.getAll(n==_r.SOFT?_r.SOFT:_r.HARD).subscribe(i=>{this.constraints=i})}}return e.\u0275fac=function(n){return new(n||e)(Pe($S))},e.\u0275cmp=ir({type:e,selectors:[["app-constraints-inspector"]],decls:14,vars:11,consts:[["appearance","outline",1,"constraints-selection-form",2,"margin-right","10px"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"constraints-filter-form"],["matInput","","type","text",3,"ngModel","value","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"constraints"],["class","constraint",4,"ngFor","ngForOf"],[3,"value"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"constraint"],[1,"title"],[4,"ngIf"],[1,"description"],[1,"asp"]],template:function(n,i){1&n&&(Ve(0,"mat-form-field",0)(1,"mat-label"),At(2,"Choose constraints"),Ge(),Ve(3,"mat-select",1),fn("ngModelChange",function(o){return i.type=o})("selectionChange",function(){return i.getConstraints(i.type)}),tn(4,Eht,3,4,"mat-option",2),Yp(5,"enumToArray"),Ge()(),Ve(6,"mat-form-field",3)(7,"mat-label"),At(8,"Type to filter ..."),Ge(),Ve(9,"input",4),fn("ngModelChange",function(o){return i.filter=o}),Ge(),tn(10,Sht,3,0,"button",5),Ge(),Ve(11,"div",6),tn(12,Aht,8,4,"div",7),Yp(13,"constraintsFilter"),Ge()),2&n&&(Ye(3),it("ngModel",i.type),Ye(1),it("ngForOf",Z_(5,6,i.constraintTypes)),Ye(5),it("ngModel",i.filter)("value",i.filter),Ye(1),it("ngIf",i.filter),Ye(2),it("ngForOf",function YW(e,t,n,i){const r=e+22,o=ht(),s=m_(o,r);return M0(o,r)?jW(o,Fs(),t,s.transform,n,i,s):s.transform(n,i)}(13,8,i.constraints,i.filter)))},dependencies:[ny,_u,Tw,OL,XS,uJ,ZS,aJ,hJ,mL,pJ,vJ,qF,tI,Dme,xht],styles:[".constraints[_ngcontent-%COMP%]{font-size:12px;overflow-y:auto;height:calc(100% - 46px)}.constraints[_ngcontent-%COMP%]   .constraint[_ngcontent-%COMP%]{background-color:#f6f6f6;margin-bottom:4px;padding:3px}.constraints[_ngcontent-%COMP%]   .constraint[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.constraints[_ngcontent-%COMP%]   .constraint[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#8b0000}.constraints[_ngcontent-%COMP%]   .constraint[_ngcontent-%COMP%]   .asp[_ngcontent-%COMP%]{font:12px/normal Monaco,Menlo,Ubuntu Mono,Consolas,source-code-pro,monospace}.constraints[_ngcontent-%COMP%]   .constraint[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{padding:2px 0 4px;background-color:#f6f6f6;color:#757a80;font-size:11px;line-height:1.1}"]}),e})();const Dht=["editor"],Tht=["categoriesFilterSelect"];function Pht(e,t){1&e&&(Ve(0,"div",38)(1,"h1"),At(2,"Vis Recommender"),Ge()())}function Rht(e,t){1&e&&Un(0,"div",39)}function Iht(e,t){1&e&&(Ve(0,"div",40)(1,"div"),At(2,"Setting up recommender knowledge base ..."),Ge(),Un(3,"mat-spinner",41),Ge())}function Fht(e,t){if(1&e){const n=Xa();Ve(0,"button",42),fn("click",function(){return lo(n),co(on().numModels=1)}),Ve(1,"mat-icon"),At(2,"close"),Ge()()}}function Lht(e,t){if(1&e){const n=Xa();Ve(0,"button",13),fn("click",function(){return lo(n),co(on().parse())}),At(1,"Parse"),Ge()}}function Nht(e,t){if(1&e&&(Ve(0,"mat-option",43),At(1),Yp(2,"titlecase"),Ge()),2&e){const n=t.$implicit;it("value",n),Ye(1),ua("",Z_(2,2,n)," Constraints")}}function $ht(e,t){if(1&e&&(Ve(0,"mat-option",43),At(1),Ge()),2&e){const n=t.$implicit;it("value",n),Ye(1),Fi(n.title_plural)}}function Bht(e,t){if(1&e){const n=Xa();Ve(0,"mat-option",44),fn("click",function(){return lo(n),co(on().optionClick())}),At(1),Ge()}if(2&e){const n=t.$implicit;it("value",n),Ye(1),ua(" ",n.name," ")}}function zht(e,t){if(1&e){const n=Xa();Ve(0,"as-split-area",45)(1,"div",5),fn("click",function(r){lo(n);const o=on();return co(o.collapseOrExpand(r,"inner",2,o.gutter.inspector))}),Ve(2,"h2",6)(3,"mat-icon",7),At(4),Ge(),Ve(5,"span"),At(6,"Knowledge Base Inspector "),Ve(7,"small"),At(8),Ge()()()(),Ve(9,"div",8),Un(10,"app-constraints-inspector",46),Ge()()}if(2&e){const n=on();it("size",n.gutter.inspector.size[0])("minSize",n.gutter.inspector.minSize)("maxSize",n.gutter.inspector.maxSize)("lockSize",n.gutter.inspector.lock)("ngClass",n.gutter.inspector.current),Ye(4),Fi("collapsed"==n.gutter.inspector.current?"keyboard_arrow_down":"keyboard_arrow_up"),Ye(4),Fi("expanded"==n.gutter.inspector.current?"(click to close)":"(click to open)")}}function Hht(e,t){1&e&&(Ve(0,"span"),At(1,", "),Ge())}function Vht(e,t){if(1&e&&(Ve(0,"span"),At(1),tn(2,Hht,2,0,"span",37),Ge()),2&e){const n=t.$implicit,i=t.index,r=on(4);Ye(1),Fi(n.text),Ye(1),it("ngIf",i<(null==r.aspFeatures?null:r.aspFeatures.facts.length)-1)}}function Uht(e,t){if(1&e&&(Ve(0,"div")(1,"div")(2,"b"),At(3,"Facts:"),Ge()(),tn(4,Vht,3,2,"span",48),Ge()),2&e){const n=on(3);Ye(4),it("ngForOf",n.aspFeatures.facts)}}function jht(e,t){1&e&&(Ve(0,"span"),At(1,", "),Ge())}function Wht(e,t){if(1&e&&(Ve(0,"span"),At(1),tn(2,jht,2,0,"span",37),Ge()),2&e){const n=t.$implicit,i=t.index,r=on(4);Ye(1),Fi(n.text),Ye(1),it("ngIf",i<(null==r.aspFeatures?null:r.aspFeatures.variables.length)-1)}}function Ght(e,t){if(1&e&&(Ve(0,"div")(1,"div")(2,"b"),At(3,"Variables:"),Ge()(),tn(4,Wht,3,2,"span",48),Ge()),2&e){const n=on(3);Ye(4),it("ngForOf",n.aspFeatures.variables)}}function qht(e,t){1&e&&(Ve(0,"span"),At(1,", "),Ge())}function Yht(e,t){if(1&e&&(Ve(0,"span"),At(1),tn(2,qht,2,0,"span",37),Ge()),2&e){const n=t.$implicit,i=t.index,r=on(4);Ye(1),Fi(n.text),Ye(1),it("ngIf",i<(null==r.aspFeatures?null:r.aspFeatures.integrity_constraints.length)-1)}}function Xht(e,t){if(1&e&&(Ve(0,"div")(1,"div")(2,"b"),At(3,"Integrity Constraints:"),Ge()(),tn(4,Yht,3,2,"span",48),Ge()),2&e){const n=on(3);Ye(4),it("ngForOf",n.aspFeatures.integrity_constraints)}}function Kht(e,t){1&e&&(Ve(0,"span"),At(1,", "),Ge())}function Zht(e,t){if(1&e&&(Ve(0,"span"),At(1),tn(2,Kht,2,0,"span",37),Ge()),2&e){const n=t.$implicit,i=t.index,r=on(4);Ye(1),Fi(n.text),Ye(1),it("ngIf",i<(null==r.aspFeatures?null:r.aspFeatures.identifiers.length)-1)}}function Qht(e,t){if(1&e&&(Ve(0,"div")(1,"div")(2,"b"),At(3,"Identifiers:"),Ge()(),tn(4,Zht,3,2,"span",48),Ge()),2&e){const n=on(3);Ye(4),it("ngForOf",n.aspFeatures.identifiers)}}function Jht(e,t){if(1&e&&(Ve(0,"div"),tn(1,Uht,5,1,"div",37),tn(2,Ght,5,1,"div",37),tn(3,Xht,5,1,"div",37),tn(4,Qht,5,1,"div",37),Ge()),2&e){const n=on(2);Ye(1),it("ngIf",(null==n.aspFeatures?null:n.aspFeatures.facts.length)>0),Ye(1),it("ngIf",(null==n.aspFeatures?null:n.aspFeatures.variables.length)>0),Ye(1),it("ngIf",(null==n.aspFeatures?null:n.aspFeatures.integrity_constraints.length)>0),Ye(1),it("ngIf",(null==n.aspFeatures?null:n.aspFeatures.identifiers.length)>0)}}function ept(e,t){1&e&&(Ve(0,"div"),At(1," Invalid ASP "),Ge())}function tpt(e,t){if(1&e&&(Ve(0,"as-split-area")(1,"div",47)(2,"div",6),At(3,"Features of Input"),Ge()(),Ve(4,"div",8),tn(5,Jht,5,4,"div",37),tn(6,ept,2,0,"div",37),Ge()()),2&e){const n=on();Ye(5),it("ngIf",n.astSuccess&&n.ast),Ye(1),it("ngIf",!n.astSuccess&&n.ast)}}const Tme=function(e){return{display:e}},npt=function(){return{standalone:!0}};let Pme=(()=>{class e{constructor(n,i,r,o){this.dracoSerice=n,this.knowledgeBaseService=i,this.parserSerice=r,this.databaseService=o,this.knowledgeBaseDataLoading=!0,this.direction=window.innerWidth<992?"vertical":"horizontal",this.gutter={recommender:{current:"expanded",minSize:32,maxSize:301,lock:!1,size:[301,301]},recommendations:{current:"expanded",minSize:30,maxSize:"*",lock:!1,size:[3*window.innerWidth/10,3*window.innerWidth/10]},knowledgeBaseInspector:{current:"expanded",minSize:30,maxSize:"*",lock:!1,size:["*","*"]},inspector:{current:"expanded",minSize:350,maxSize:350,lock:!0,size:[350,30,350]}},this.filtered=!1,this.subscriptions=[],this.numModels=30,this.constraintTypes=_r,this.selectedConstraintType=_r.SOFT,this.featureTypes=BS,this.features=NS,this.selectedFeature=NS[0],this.sample1='% ====== Data definitions ======\n  data("assets/data/cars.json").\n  num_rows(142).\n\n  fieldtype(horsepower,number).\n  cardinality(horsepower,94).\n\n  % ====== Query constraints ======\n  encoding(e0).\n  :- not field(e0,horsepower).\n  :- not bin(e0,_).\n\n\n  ',this.sample2='% ====== Data definitions ======\n  data("assets/data/cars.json").\n  num_rows(142).\n\n  fieldtype(horsepower,number).\n  cardinality(horsepower,94).\n\n  fieldtype(cylinders,string).\n  cardinality(cylinders,5).\n\n  fieldtype(acceleration,number).\n  cardinality(acceleration,94).\n\n  fieldtype(origin,string).\n  cardinality(origin,3).\n\n  % ====== Query constraints ======\n  encoding(e0).\n  :- not field(e0,horsepower).\n\n  encoding(e1).\n  :- not field(e1,cylinders).\n  :- not type(e1,nominal).\n  :- not channel(e1,color).\n\n  encoding(e2).\n  :- not field(e2,acceleration).\n\n  encoding(e3).\n  :- not field(e3,origin).\n  :- not channel(e3,column).\n\n  ',this.sample3='% ====== Data definitions ======\n  data("assets/data/cars.json").\n  num_rows(142).\n\n  fieldtype(horsepower,number).\n  cardinality(horsepower,94).\n\n  fieldtype(miles_per_gallon,number).\n  cardinality(miles_per_gallon,94).\n\n  fieldtype(cylinders,string).\n  cardinality(cylinders,5).\n\n  % ====== Query constraints ======\n  encoding(e0).\n  :- not field(e0,horsepower).\n\n  encoding(e1).\n  :- not field(e1,miles_per_gallon).\n\n  encoding(e2).\n  :- not field(e2,cylinders).\n  :- not channel(e2, color).\n  :- not type(e2,nominal).\n\n\n  ',this.aspFeatures={asps:[],variables:[],identifiers:[],facts:[],integrity_constraints:[],choice_rules:[],cardinality_constraints:[],weight_constraints:[],optimisation_constructs:[]},this.astSuccess=!0,this.visible_diagrams=!1,this.visible_hypergraph=!1,this.visible_variables=!1,this.categoriesFilterData=null,this.selectedCategories=null,this.allCategoriesSelected=!1,this.allSelectionProcess=!1,this.categoryOptionChanged=!1,this.dracoSerice.init().then(()=>{});const s=this.knowledgeBaseService.loaded.subscribe(u=>{this.knowledgeBaseDataLoading=!u});this.subscriptions.push(s);let a=this.knowledgeBaseService.selectedVizRecSets.subscribe(u=>this.mapToDatabaseConstraints(u,Br.SELECTED)),l=this.knowledgeBaseService.hoveredVizRecSet.subscribe(u=>this.mapToDatabaseConstraints(u?[u]:null,Br.HOVERED));this.subscriptions.push(a),this.subscriptions.push(l);const c=this.knowledgeBaseService.filteredHypergraphSet.subscribe(u=>{(u||this.filtered)&&(this.filtered=!!u,this.updateRadialHypergraph())});this.subscriptions.push(c)}ngOnInit(){}ngOnDestroy(){this.subscriptions.forEach(n=>{n&&n.unsubscribe()})}ngAfterViewInit(){EL.config.set("fontSize","12px"),EL.config.set("basePath","assets/ace/"),this.aceEditor=EL.edit(this.editor.nativeElement),this.aceEditor.session.setValue(this.sample3),this.aceEditor.setTheme("ace/theme/twilight"),this.aceEditor.session.setMode("ace/mode/gringo")}onResized(n){this.direction=window.innerWidth<992?"vertical":"horizontal",this.gutter.recommender.size=[301,301],this.gutter.recommendations.size=[3*window.innerWidth/10,3*window.innerWidth/10],this.gutter.knowledgeBaseInspector.size=["*","*"],this.gutter.inspector.size=[350,30,350]}collapseOrExpand(n,i,r,o){if(o&&o.lock)o.current=o.size[0]==o.size[2]?"collapsed":"expanded",o.size[0]==o.size[2]?(o.size[0]=o.size[1],o.minSize=o.size[1],o.maxSize=o.size[1]):(o.size[0]=o.size[2],o.minSize=o.size[2],o.maxSize=o.size[2]);else if("outer"===i){const a=this.gutter.recommender.size[0]!=this.gutter.recommender.minSize;this.gutter.recommender.current=a?"collapsed":"expanded",this.gutter.recommender.size=[a?this.gutter.recommender.minSize:this.gutter.recommender.size[1],this.gutter.recommender.size[1]]}else if("inner"===i&&this.gutter.recommendations==o){const a="*"==this.gutter.recommendations.size[0]||this.gutter.recommendations.size[0]!=this.gutter.recommendations.minSize,l="*"==this.gutter.knowledgeBaseInspector.size[0];o.size[0]=a?o.minSize:o.size[1],this.gutter.knowledgeBaseInspector.size[0]="*",this.gutter.recommendations.current=a?"collapsed":"expanded",this.gutter.knowledgeBaseInspector.current=a&&!l?"expanded":this.gutter.knowledgeBaseInspector.current}else if("inner"===i&&this.gutter.knowledgeBaseInspector==o){const a=this.gutter.recommendations.size[0]!=this.gutter.recommendations.minSize,l="*"==this.gutter.knowledgeBaseInspector.size[0];o.size[0]=l?o.minSize:o.size[1],this.gutter.recommendations.size[0]=l?"*":this.gutter.recommendations.size[1],this.gutter.knowledgeBaseInspector.current=l?"collapsed":"expanded",this.gutter.recommendations.current=a&&!l?"expanded":this.gutter.recommendations.current}}mapToDatabaseConstraints(n,i){if(n&&n.length>0){let r=[];n.forEach((o,s)=>{let a=[];const l=o.model.facts;l.forEach((c,u)=>{if(this.parserSerice.isConstraint(c+".")){const f=this.parserSerice.constraints2json("% @constraint .\n            "+c+":-.\n            ");this.databaseService.getByKey(_r.SOFT,"name",f[0].name).subscribe(h=>{a.push({...h,constraintType:_r.SOFT}),u==l.length-1&&r.push(a),s==n.length-1&&u==l.length-1&&i==Br.SELECTED?this.selectedVizRecConstraints=r:s==n.length-1&&u==l.length-1&&i==Br.HOVERED&&(this.hoveredVizRecConstraints=r)})}})})}else i==Br.SELECTED?this.selectedVizRecConstraints=[]:i==Br.HOVERED&&(this.hoveredVizRecConstraints=[])}updateAce(){this.parse()}recommend(){this.dracoSerice.solve(this.aceEditor.getValue(),{models:this.numModels,relaxHard:!1}).pipe(pc()).subscribe(n=>{console.log(n),this.solutionSet=n,this.radialHypergraphData||this.knowledgeBaseService.getRadialHypergraphData(this.selectedConstraintType,this.selectedFeature).pipe(pc()).subscribe(i=>{this.radialHypergraphData=i,this.categoriesFilterData=i.hierarchy[0].map(r=>({...r,selected:!0})),this.selectedCategories=this.categoriesFilterData,this.allCategoriesSelected=!0}),this.visible_diagrams=!0,this.visible_hypergraph=!0})}setSelectedConstraints(n){this.knowledgeBaseService.setSelectedHypergraphSet(n)}setHoveredConstraints(n){this.knowledgeBaseService.setHoveredHypergraphSet(n)}setFilteredConstraints(n){this.knowledgeBaseService.setFilteredHypergraphSet(n)}toggleAllConstraintCategoriesSelection(){this.categoryOptionChanged=!0,this.allCategoriesSelected?this.selectAllConstraintCategories():this.deselectAllConstraintCategories()}selectAllConstraintCategories(){this.categoriesFilterSelect.options.forEach((n,i)=>n.select())}deselectAllConstraintCategories(){this.categoriesFilterSelect.options.forEach((n,i)=>n.deselect())}optionClick(){this.categoryOptionChanged=!0;let n=!0;this.categoriesFilterSelect.options.forEach(i=>{i.selected||(n=!1)}),this.allCategoriesSelected=n}applyFilter(){if(this.categoryOptionChanged&&this.selectedCategories.length>0){const n=this.selectedCategories.map(r=>r.ids).reduce((r,o)=>r.concat(o)),i=this.radialHypergraphData.graph.nodes.filter(r=>n.find(o=>o==r.id));this.knowledgeBaseService.setFilteredHypergraphSet(i.length>0?i:null),this.categoryOptionChanged=!1}else 0==this.selectedCategories.length&&(this.knowledgeBaseService.setFilteredHypergraphSet(null),this.categoryOptionChanged=!1);this.categoriesFilterSelect.close()}removeAllFilters(){this.knowledgeBaseService.setFilteredHypergraphSet(null),this.categoriesFilterSelect.close()}updateRadialHypergraph(){this.knowledgeBaseService.getRadialHypergraphData(this.selectedConstraintType,this.selectedFeature).pipe(pc()).subscribe(n=>{this.categoriesFilterData=n.hierarchy[0].map(i=>({...i,selected:!0})),this.selectedCategories=this.categoriesFilterData,this.allCategoriesSelected=!0,this.radialHypergraphData=n})}parse(){this.ast=this.parserSerice.getAST(this.aceEditor.getValue()),this.astSuccess=null!=this.ast,this.visible_variables=this.astSuccess,this.astSuccess&&(this.aspFeatures.asps=this.ast.children,this.aspFeatures.facts=this.parserSerice.getFeature(this.ast,_g.fact),this.aspFeatures.integrity_constraints=this.parserSerice.getFeature(this.ast,_g.integrity_constraint),this.aspFeatures.variables=this.parserSerice.getFeature(this.ast,_g.VARIABLE),this.aspFeatures.identifiers=this.parserSerice.getFeature(this.ast,_g.ID))}}return e.\u0275fac=function(n){return new(n||e)(Pe(K$e),Pe(xL),Pe(CL),Pe($S))},e.\u0275cmp=ir({type:e,selectors:[["app-recommender"]],viewQuery:function(n,i){if(1&n&&(br(Dht,5),br(Tht,5)),2&n){let r;ii(r=ri())&&(i.editor=r.first),ii(r=ri())&&(i.categoriesFilterSelect=r.first)}},hostBindings:function(n,i){1&n&&fn("resize",function(){return i.onResized()},0,DR)},decls:78,vars:53,consts:[["class","page-header",4,"ngIf"],["style","display:block;width:100%;height:100%",4,"ngIf"],["class","spinner",4,"ngIf"],["direction","vertical",1,"recommender-layout",3,"ngClass","unit","useTransition","gutterClick"],[1,"vertical",3,"size","minSize","maxSize","ngClass"],[1,"header",3,"click"],[1,"title"],["aria-hidden","false"],[1,"content"],[2,"padding","5px 10px"],["appearance","outline",1,"example-form-field",2,"margin-right","10px"],["matInput","","type","number",3,"ngModel","value","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["mat-stroked-button","",2,"margin-right","10px",3,"click"],["mat-stroked-button","","style","margin-right:10px",3,"click",4,"ngIf"],[1,"app-ace-editor",2,"width","100%","height","200px",3,"change"],["editor",""],[3,"visible"],[1,"last-gutter-hide",3,"direction","unit","useTransition","gutterClick"],[1,"horizontal",3,"size","minSize","ngStyle","ngClass"],["diagrams",""],[3,"data"],[1,"controls"],["appearance","outline",2,"margin-right","10px"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline"],["multiple","",3,"ngModel","ngModelChange"],["categoriesFilterSelect",""],[2,"margin","5px 17px","cursor","pointer",3,"click"],["ngDefaultControl","",3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"value","click",4,"ngFor","ngForOf"],[1,"constraint-categories-filter-buttons",3,"click"],[1,"apply",3,"click"],[1,"remove",3,"click"],[3,"data","selected","hovered","selectConstraints","hoverConstraints","filterConstraints"],["class","horizontal",3,"size","minSize","maxSize","lockSize","ngClass",4,"ngIf"],[4,"ngIf"],[1,"page-header"],[2,"display","block","width","100%","height","100%"],[1,"spinner"],["diameter","60"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],[3,"value","click"],[1,"horizontal",3,"size","minSize","maxSize","lockSize","ngClass"],[2,"display","block","height","100%"],[1,"sticky-header","horizontal"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(tn(0,Pht,3,0,"div",0),tn(1,Rht,1,0,"div",1),tn(2,Iht,4,0,"div",2),Ve(3,"as-split",3),fn("gutterClick",function(o){return i.collapseOrExpand(o,"outer")}),Ve(4,"as-split-area",4)(5,"div",5),fn("click",function(o){return i.collapseOrExpand(o,"outer",0,i.gutter.recommender)}),Ve(6,"h2",6)(7,"mat-icon",7),At(8),Ge(),Ve(9,"span"),At(10,"Recommendation Query "),Ve(11,"small"),At(12),Ge()()()(),Ve(13,"div",8)(14,"div",9)(15,"mat-form-field",10)(16,"mat-label"),At(17,"Models"),Ge(),Ve(18,"input",11),fn("ngModelChange",function(o){return i.numModels=o}),Ge(),tn(19,Fht,3,0,"button",12),Ge(),Ve(20,"button",13),fn("click",function(){return i.recommend()}),At(21,"Recommend"),Ge(),tn(22,Lht,2,0,"button",14),Ge(),Ve(23,"div",15,16),fn("change",function(){return i.updateAce()}),Ge()()(),Ve(25,"as-split-area",17)(26,"as-split",18),fn("gutterClick",function(o){return i.collapseOrExpand(o,"inner")}),Ve(27,"as-split-area",19,20)(29,"div",5),fn("click",function(o){return i.collapseOrExpand(o,"inner",0,i.gutter.recommendations)}),Ve(30,"h2",6)(31,"mat-icon",7),At(32),Ge(),Ve(33,"span"),At(34,"Recommendations "),Ve(35,"small"),At(36),Ge()()()(),Ve(37,"div",8),Un(38,"app-recommendations",21),Ge()(),Ve(39,"as-split-area",19)(40,"div",5),fn("click",function(o){return i.collapseOrExpand(o,"inner",1,i.gutter.knowledgeBaseInspector)}),Ve(41,"h2",6)(42,"mat-icon",7),At(43),Ge(),Ve(44,"span"),At(45,"Knowledge Base Viewer "),Ve(46,"small"),At(47),Ge()()()(),Ve(48,"div",8)(49,"div",22)(50,"mat-form-field",23)(51,"mat-label"),At(52,"Choose constraints"),Ge(),Ve(53,"mat-select",24),fn("ngModelChange",function(o){return i.selectedConstraintType=o})("selectionChange",function(){return i.updateRadialHypergraph()}),tn(54,Nht,3,4,"mat-option",25),Yp(55,"enumToArray"),Ge()(),Ve(56,"mat-form-field",23)(57,"mat-label"),At(58,"Choose connection type"),Ge(),Ve(59,"mat-select",24),fn("ngModelChange",function(o){return i.selectedFeature=o})("selectionChange",function(){return i.updateRadialHypergraph()}),tn(60,$ht,2,2,"mat-option",25),Ge()(),Ve(61,"mat-form-field",26)(62,"mat-label"),At(63,"Constraint Categories"),Ge(),Ve(64,"mat-select",27,28),fn("ngModelChange",function(o){return i.selectedCategories=o}),Ve(66,"div",29),fn("click",function(){return i.toggleAllConstraintCategoriesSelection()}),Ve(67,"mat-checkbox",30),fn("ngModelChange",function(o){return i.allCategoriesSelected=o})("change",function(){return i.toggleAllConstraintCategoriesSelection()}),At(68,"Select All"),Ge()(),tn(69,Bht,2,2,"mat-option",31),Ve(70,"div",32),fn("click",function(){return i.applyFilter()}),Ve(71,"div",33),fn("click",function(){return i.applyFilter()}),At(72,"Apply filter"),Ge(),Ve(73,"div",34),fn("click",function(){return i.removeAllFilters()}),At(74,"Remove all filters"),Ge()()()()(),Ve(75,"app-radial-hypergraph",35),fn("selectConstraints",function(o){return i.setSelectedConstraints(o)})("hoverConstraints",function(o){return i.setHoveredConstraints(o)})("filterConstraints",function(o){return i.setFilteredConstraints(o)}),Ge()()(),tn(76,zht,11,7,"as-split-area",36),Ge()(),tn(77,tpt,7,2,"as-split-area",37),Ge()),2&n&&(it("ngIf",!1),Ye(1),it("ngIf",i.knowledgeBaseDataLoading),Ye(1),it("ngIf",i.knowledgeBaseDataLoading),Ye(1),it("ngClass",i.knowledgeBaseDataLoading?"loading":"loaded")("unit","pixel")("useTransition",!0),Ye(1),it("size",i.gutter.recommender.size[0])("minSize",i.gutter.recommender.minSize)("maxSize",i.gutter.recommender.maxSize)("ngClass",i.gutter.recommender.current),Ye(4),Fi("collapsed"==i.gutter.recommender.current?"keyboard_arrow_down":"keyboard_arrow_up"),Ye(4),Fi("expanded"==i.gutter.recommender.current?"(click to close)":"(click to open)"),Ye(6),it("ngModel",i.numModels)("value",i.numModels),Ye(1),it("ngIf",i.numModels),Ye(3),it("ngIf",!1),Ye(3),it("visible",i.visible_diagrams),Ye(1),it("direction",i.direction)("unit","pixel")("useTransition",!0),Ye(1),it("size",i.gutter.recommendations.size[0])("minSize",i.gutter.recommendations.minSize)("ngStyle",zs(48,Tme,i.visible_diagrams?"block":"none"))("ngClass",i.gutter.recommendations.current),Ye(5),Fi("collapsed"==i.gutter.recommendations.current?"keyboard_arrow_up":"keyboard_arrow_down"),Ye(4),Fi("expanded"==i.gutter.recommendations.current?"(click to close)":"(click to open)"),Ye(2),it("data",i.solutionSet),Ye(1),it("size",i.gutter.knowledgeBaseInspector.size[0])("minSize",i.gutter.knowledgeBaseInspector.minSize)("ngStyle",zs(50,Tme,i.visible_hypergraph?"block":"none"))("ngClass",i.gutter.knowledgeBaseInspector.current),Ye(4),Fi("collapsed"==i.gutter.knowledgeBaseInspector.current?"keyboard_arrow_down":"keyboard_arrow_up"),Ye(4),Fi("expanded"==i.gutter.knowledgeBaseInspector.current?"(click to close)":"(click to open)"),Ye(6),it("ngModel",i.selectedConstraintType),Ye(1),it("ngForOf",Z_(55,46,i.constraintTypes)),Ye(5),it("ngModel",i.selectedFeature),Ye(1),it("ngForOf",i.features),Ye(4),it("ngModel",i.selectedCategories),Ye(3),it("ngModel",i.allCategoriesSelected)("ngModelOptions",function HW(e,t,n){const i=Fs()+e,r=ht();return r[i]===zn?du(r,i,n?t.call(n):t()):function d0(e,t){return e[t]}(r,i)}(52,npt)),Ye(2),it("ngForOf",i.categoriesFilterData),Ye(6),it("data",i.radialHypergraphData)("selected",i.selectedVizRecConstraints)("hovered",i.hoveredVizRecConstraints),Ye(1),it("ngIf",i.visible_diagrams),Ye(1),it("ngIf",i.visible_variables&&!1))},dependencies:[Zp,ny,_u,O0,Tw,BL,OL,XS,WZ,uJ,ZS,aJ,hJ,mL,pJ,vJ,qF,EJ,sze,AJ,_c,Mht,Oht,tI,Dme],styles:['.mat-badge-content[_ngcontent-%COMP%]{font-weight:600;font-size:12px;font-family:Roboto,Helvetica Neue,sans-serif}.mat-badge-small[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:9px}.mat-badge-large[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-size:24px}.mat-h1[_ngcontent-%COMP%], .mat-headline[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font:400 24px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h2[_ngcontent-%COMP%], .mat-title[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-title[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h3[_ngcontent-%COMP%], .mat-subheading-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-subheading-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font:400 16px/28px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h4[_ngcontent-%COMP%], .mat-subheading-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-subheading-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:400 15px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font:400 11.62px/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:400 9.38px/20px Roboto,Helvetica Neue,sans-serif;margin:0 0 12px}.mat-body-strong[_ngcontent-%COMP%], .mat-body-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-strong[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.mat-small[_ngcontent-%COMP%], .mat-caption[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-small[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{font:400 12px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-display-4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-4[_ngcontent-%COMP%]{font:300 112px/112px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.05em;margin:0 0 56px}.mat-display-3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-3[_ngcontent-%COMP%]{font:400 56px/56px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.02em;margin:0 0 64px}.mat-display-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-2[_ngcontent-%COMP%]{font:400 45px/48px Roboto,Helvetica Neue,sans-serif;letter-spacing:-.005em;margin:0 0 64px}.mat-display-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-display-1[_ngcontent-%COMP%]{font:400 34px/40px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0 0 64px}.mat-bottom-sheet-container[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-button[_ngcontent-%COMP%], .mat-raised-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-fab[_ngcontent-%COMP%], .mat-mini-fab[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-button-toggle[_ngcontent-%COMP%], .mat-card[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:20px}.mat-card-subtitle[_ngcontent-%COMP%], .mat-card-content[_ngcontent-%COMP%]{font-size:14px}.mat-checkbox[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-checkbox-layout[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{line-height:24px}.mat-chip[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-chip[_ngcontent-%COMP%]   .mat-chip-trailing-icon.mat-icon[_ngcontent-%COMP%], .mat-chip[_ngcontent-%COMP%]   .mat-chip-remove.mat-icon[_ngcontent-%COMP%]{font-size:18px}.mat-table[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-header-cell[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{font-size:14px}.mat-calendar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-calendar-body[_ngcontent-%COMP%]{font-size:13px}.mat-calendar-body-label[_ngcontent-%COMP%], .mat-calendar-period-button[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-calendar-table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.mat-dialog-title[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-expansion-panel-header[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:15px;font-weight:400}.mat-expansion-panel-content[_ngcontent-%COMP%]{font:400 14px/20px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field[_ngcontent-%COMP%]{font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.34375em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:150%;line-height:1.125}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:1.5em;width:1.5em}.mat-form-field-prefix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:1.125em;line-height:1.125}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5em 0;border-top:.84375em solid transparent}.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34375em) scale(.75);width:133.3333333333%}.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.34374em) scale(.75);width:133.3333433333%}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-.84375em;padding-top:.84375em}.mat-form-field-label[_ngcontent-%COMP%]{top:1.34375em}.mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.34375em}.mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{font-size:75%;margin-top:.6666666667em;top:calc(100% - 1.7916666667em)}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.4375em 0}.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);width:133.3333333333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);width:133.3333433333%}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);width:133.3333533333%}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.28125em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.25em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-subscript-wrapper[_ngcontent-%COMP%]{margin-top:.5416666667em;top:calc(100% - 1.6666666667em)}@media print{.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28122em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-form-field-autofill-control[_ngcontent-%COMP%]:-webkit-autofill + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.28121em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.2812em) scale(.75)}}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.25em 0 .75em}.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.09375em;margin-top:-.5em}.mat-form-field-appearance-fill.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-fill.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-.59374em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:1em 0}.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{top:1.84375em;margin-top:-.25em}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%], .mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[_ngcontent-%COMP%]:focus + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-outline.mat-form-field-can-float[_ngcontent-%COMP%]   .mat-input-server[label][_ngcontent-%COMP%]:not(:label-shown) + .mat-form-field-label-wrapper[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{transform:translateY(-1.59374em) scale(.75);width:133.3333433333%}.mat-grid-tile-header[_ngcontent-%COMP%], .mat-grid-tile-footer[_ngcontent-%COMP%]{font-size:14px}.mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%], .mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2), .mat-grid-tile-footer[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}input.mat-input-element[_ngcontent-%COMP%]{margin-top:-.0625em}.mat-menu-item[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:400}.mat-paginator[_ngcontent-%COMP%], .mat-paginator-page-size[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px}.mat-radio-button[_ngcontent-%COMP%], .mat-select[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-select-trigger[_ngcontent-%COMP%]{height:1.125em}.mat-slide-toggle-content[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-slider-thumb-label-text[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px;font-weight:500}.mat-stepper-vertical[_ngcontent-%COMP%], .mat-stepper-horizontal[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-step-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.mat-step-sub-label-error[_ngcontent-%COMP%]{font-weight:400}.mat-step-label-error[_ngcontent-%COMP%]{font-size:14px}.mat-step-label-selected[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.mat-tab-group[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-toolbar[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:500 20px/32px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal;margin:0}.mat-tooltip[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:10px;padding-top:6px;padding-bottom:6px}.mat-tooltip-handset[_ngcontent-%COMP%]{font-size:14px;padding-top:8px;padding-bottom:8px}.mat-list-item[_ngcontent-%COMP%], .mat-list-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:16px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:14px}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]:nth-child(n+2){font-size:12px}.mat-list-base[dense][_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:12px;font-weight:500}.mat-option[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:16px}.mat-optgroup-label[_ngcontent-%COMP%]{font:500 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-simple-snackbar[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px}.mat-simple-snackbar-action[_ngcontent-%COMP%]{line-height:1;font-family:inherit;font-size:inherit;font-weight:500}.mat-tree[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.mat-tree-node[_ngcontent-%COMP%], .mat-nested-tree-node[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.mat-ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative}.mat-ripple[_ngcontent-%COMP%]:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded[_ngcontent-%COMP%]{overflow:visible}.mat-ripple-element[_ngcontent-%COMP%]{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0,0,.2,1);transform:scale3d(0,0,0)}.cdk-high-contrast-active[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{display:none}.cdk-visually-hidden[_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl][_ngcontent-%COMP%]   .cdk-visually-hidden[_ngcontent-%COMP%]{left:auto;right:0}.cdk-overlay-container[_ngcontent-%COMP%], .cdk-global-overlay-wrapper[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}.cdk-high-contrast-active[_ngcontent-%COMP%]   .cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%]{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation[_ngcontent-%COMP%]{transition:none}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}textarea.cdk-textarea-autosize[_ngcontent-%COMP%]{resize:none}textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:auto!important;overflow:hidden!important}textarea.cdk-textarea-autosize-measuring-firefox[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:0!important}@keyframes cdk-text-field-autofill-start{}@keyframes cdk-text-field-autofill-end{}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}.mat-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-focus-indicator[_ngcontent-%COMP%]:before{inset:0;position:absolute;box-sizing:border-box;pointer-events:none;display:none;display:var(--mat-focus-indicator-display, none);border:3px solid transparent;border:var(--mat-focus-indicator-border-width, 3px) var(--mat-focus-indicator-border-style, solid) var(--mat-focus-indicator-border-color, transparent);border-radius:4px;border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator[_ngcontent-%COMP%]:focus:before{content:""}.cdk-high-contrast-active[_ngcontent-%COMP%]{--mat-focus-indicator-display: block}.mat-mdc-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-mdc-focus-indicator[_ngcontent-%COMP%]:before{inset:0;position:absolute;box-sizing:border-box;pointer-events:none;display:none;display:var(--mat-mdc-focus-indicator-display, none);border:3px solid transparent;border:var(--mat-mdc-focus-indicator-border-width, 3px) var(--mat-mdc-focus-indicator-border-style, solid) var(--mat-mdc-focus-indicator-border-color, transparent);border-radius:4px;border-radius:var(--mat-mdc-focus-indicator-border-radius, 4px)}.mat-mdc-focus-indicator[_ngcontent-%COMP%]:focus:before{content:""}.cdk-high-contrast-active[_ngcontent-%COMP%]{--mat-mdc-focus-indicator-display: block}.mat-tab-nav-bar[_ngcontent-%COMP%], .mat-tab-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.12)}.mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-nav-bar[_ngcontent-%COMP%], .mat-tab-group-inverted-header[_ngcontent-%COMP%]   .mat-tab-header[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.12);border-bottom:none}.mat-tab-label[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#ffffff80}.mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff}.mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#ffffff80}.mat-tab-group[class*=mat-background-][_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar[class*=mat-background-][_ngcontent-%COMP%]{border-bottom:none;border-top:none}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#c2c4c64d}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#343a40}.mat-tab-group.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-primary.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#ffedbc4d}.mat-tab-group.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#ffc421}.mat-tab-group.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-accent.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#000}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#f8bbd04d}.mat-tab-group.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#e91e63}.mat-tab-group.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-group.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-warn.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#c2c4c64d}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#343a40}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#fff6}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#fff}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff;opacity:.4}.mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#fff;opacity:.12}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#ffedbc4d}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#ffc421}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#000}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#0006}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#000}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#000;opacity:.4}.mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#000;opacity:.12}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-group.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-label.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-keyboard-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled), .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]   .mat-tab-link.cdk-program-focused[_ngcontent-%COMP%]:not(.mat-tab-disabled){background-color:#f8bbd04d}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]{background-color:#e91e63}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-label.mat-tab-disabled[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{color:#fff6}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before, .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-focus-indicator[_ngcontent-%COMP%]:before{border-color:#fff}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination-disabled[_ngcontent-%COMP%]   .mat-tab-header-pagination-chevron[_ngcontent-%COMP%]{border-color:#fff;opacity:.4}.mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-group.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-link-container[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .mat-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%] > .mat-tab-header-pagination[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{background-color:#fff;opacity:.12}.spinner[_ngcontent-%COMP%]{width:400px;margin-left:-150px;margin-top:-35px}.spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.spinner[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:absolute;left:50%;margin-left:-35px}.page-header[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;width:100%;background-color:#343a40;color:#ffc421;padding:10px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:0;margin:0}.recommender-layout[_ngcontent-%COMP%]{height:calc(100% + -0px)}.recommender-layout[_ngcontent-%COMP%]   as-split-area[_ngcontent-%COMP%], .recommender-layout[_ngcontent-%COMP%]   as-split[_ngcontent-%COMP%]{box-sizing:border-box}app-recommendations[_ngcontent-%COMP%], app-radial-hypergraph[_ngcontent-%COMP%]{position:relative;display:block;height:100%;width:100%}  .mat-select,   .mat-select-value,   .mat-select-panel,   .mat-select-content,   .mat-form-field-outline-start,   .mat-form-field-outline-gap,   .mat-form-field-outline-end{background-color:#fff!important;opacity:1!important}  .mat-form-field-wrapper{padding-bottom:0}  .constraint-categories-filter-buttons{position:sticky;bottom:0;width:100%;background-color:#f0f0f0;color:#343a40;box-sizing:border-box;cursor:pointer}  .constraint-categories-filter-buttons>div{display:inline-block;box-sizing:border-box;padding:5px 17px;width:50%;text-align:center}  .constraint-categories-filter-buttons>div:hover{background-color:#dcdcdc;color:#343a40}.app-ace-editor[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026;box-sizing:border-box}as-split.loading[_ngcontent-%COMP%]{opacity:.5}as-split[_ngcontent-%COMP%]     .as-split-gutter-icon{filter:invert(100%)}as-split[_ngcontent-%COMP%]   as-split-area[_ngcontent-%COMP%]{display:flex!important}as-split[_ngcontent-%COMP%]     .first-gutter-hide>.as-split-gutter:first-child, as-split[_ngcontent-%COMP%]     .middle-gutter-hide>.as-split-gutter:nth-child(2), as-split[_ngcontent-%COMP%]     .last-gutter-hide>.as-split-gutter:last-child{display:none}as-split[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:block;box-sizing:border-box;cursor:pointer;padding:5px;background-color:#3d444b;color:#fff}as-split[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline-flex;vertical-align:middle;margin:0;line-height:1;font-size:16px}as-split[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;position:relative;bottom:3px}as-split[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px;padding-top:1px}as-split[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#ccc;opacity:.7}as-split[_ngcontent-%COMP%]   as-split-area.horizontal[_ngcontent-%COMP%]{flex-direction:row;position:relative;overflow-y:hidden}as-split[_ngcontent-%COMP%]   as-split-area.horizontal[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{transform-origin:0 0;transform:rotate(90deg);position:absolute;left:30px;top:0;height:30px;width:100vw;flex:30px 0 0}as-split[_ngcontent-%COMP%]   as-split-area.horizontal[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{overflow:auto;width:100%;margin-left:30px;flex:1;padding:5px}as-split[_ngcontent-%COMP%]   as-split-area.vertical[_ngcontent-%COMP%]{flex-direction:column;overflow-y:hidden}as-split[_ngcontent-%COMP%]   as-split-area.vertical[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{position:sticky;top:0;background-color:transparent;z-index:900}as-split[_ngcontent-%COMP%]   as-split-area.expanded[_ngcontent-%COMP%]{padding:0}as-split[_ngcontent-%COMP%]   as-split-area.collapsed[_ngcontent-%COMP%]{padding:0}as-split[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{position:absolute;top:0;background-color:transparent;z-index:900}@media (max-width: 992px){.recommender-layout[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-auto-rows:auto;grid-template-areas:"ace" "meta" "diagrams" "hypergraph";width:100%}}']}),e})();const ipt=[{path:"",redirectTo:"recommender",pathMatch:"full"},{path:"explorer",component:W$e},{path:"recommender",component:Pme},{path:"**",redirectTo:"recommender",pathMatch:"full"}];let rpt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[oY.forRoot(ipt,{relativeLinkResolution:"legacy"}),oY]}),e})(),opt=(()=>{class e{constructor(n){this.db=n,this.title="vis-for-draco-kb"}deleteDatabase(){this.db.deleteDatabase().subscribe(n=>{n&&window.location.reload()})}}return e.\u0275fac=function(n){return new(n||e)(Pe(ML))},e.\u0275cmp=ir({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,i){1&n&&Un(0,"router-outlet")},dependencies:[TI],styles:[".deleteDatabase[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;z-index:1500;background-color:#fff;color:#333;border:1px solid #ffc421;padding:7px;opacity:.3;cursor:pointer}.deleteDatabase[_ngcontent-%COMP%]:hover{background-color:#fff3d1;opacity:1}"]}),e})(),Rme=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fa,oJ,pK,WLe,_L,qNe,oJ]}),e})(),spt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fa,Rme]}),e})(),cpt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[aK,mr,aK,mr]}),e})(),ppt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fa,mr,CZ,gS,dS,nK,mr]}),e})(),gpt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fa,Rme,cpt,EBe,_L,TBe,bJ,aze,_L,ppt,bJ,YF,bze,pK,fht]}),e})();const mpt={name:"knowledgebase",version:1,objectStoresMeta:[{store:"soft",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]},{store:"hard",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]},{store:"features",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}}]},{store:"hierarchies",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"constraintType",keypath:"constraintType",options:{unique:!1}},{name:"featureType",keypath:"featureType",options:{unique:!1}}]},{store:"hyperlinks",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"name",keypath:"name",options:{unique:!0}},{name:"constraintType",keypath:"constraintType",options:{unique:!1}},{name:"featureType",keypath:"featureType",options:{unique:!1}}]}]};let _pt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({imports:[fa,spt,gpt,U$e.forRoot(mpt)]}),e})();function Fme(e){return new at(3e3,!1)}function Qpt(){return typeof window<"u"&&typeof window.document<"u"}function FV(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function bp(e){switch(e.length){case 0:return new Dw;case 1:return e[0];default:return new zZ(e)}}function Lme(e,t,n,i,r=new Map,o=new Map){const s=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.get("offset"),f=d==l,h=f&&c||new Map;u.forEach((y,b)=>{let C=b,k=y;if("offset"!==b)switch(C=t.normalizePropertyName(C,s),k){case"!":k=r.get(b);break;case Vd:k=o.get(b);break;default:k=t.normalizeStyleValue(b,C,k,s)}h.set(C,k)}),f||a.push(h),c=h,l=d}),s.length)throw function zpt(e){return new at(3502,!1)}();return a}function LV(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&NV(n,"start",e)));break;case"done":e.onDone(()=>i(n&&NV(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&NV(n,"destroy",e)))}}function NV(e,t,n){const o=$V(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,n.totalTime??e.totalTime,!!n.disabled),s=e._data;return null!=s&&(o._data=s),o}function $V(e,t,n,i,r="",o=0,s){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function _l(e,t,n){let i=e.get(t);return i||e.set(t,i=n),i}function Nme(e){const t=e.indexOf(":");return[e.substring(1,t),e.slice(t+1)]}let BV=(e,t)=>!1,$me=(e,t,n)=>[],Bme=null;function zV(e){const t=e.parentNode||e.host;return t===Bme?null:t}(FV()||typeof Element<"u")&&(Qpt()?(Bme=(()=>document.documentElement)(),BV=(e,t)=>{for(;t;){if(t===e)return!0;t=zV(t)}return!1}):BV=(e,t)=>e.contains(t),$me=(e,t,n)=>{if(n)return Array.from(e.querySelectorAll(t));const i=e.querySelector(t);return i?[i]:[]});let Hm=null,zme=!1;const Hme=BV,Vme=$me;let Ume=(()=>{class e{validateStyleProperty(n){return function egt(e){Hm||(Hm=function tgt(){return typeof document<"u"?document.body:null}()||{},zme=!!Hm.style&&"WebkitAppearance"in Hm.style);let t=!0;return Hm.style&&!function Jpt(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in Hm.style,!t&&zme&&(t="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in Hm.style)),t}(n)}matchesElement(n,i){return!1}containsElement(n,i){return Hme(n,i)}getParentElement(n){return zV(n)}query(n,i,r){return Vme(n,i,r)}computeStyle(n,i,r){return r||""}animate(n,i,r,o,s,a=[],l){return new Dw(r,o)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})(),HV=(()=>{class e{}return e.NOOP=new Ume,e})();const VV="ng-enter",WT="ng-leave",GT="ng-trigger",qT=".ng-trigger",Wme="ng-animating",UV=".ng-animating";function Df(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:jV(parseFloat(t[1]),t[2])}function jV(e,t){return"s"===t?1e3*e:e}function YT(e,t,n){return e.hasOwnProperty("duration")?e:function rgt(e,t,n){let r,o=0,s="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(Fme()),{duration:0,delay:0,easing:""};r=jV(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=jV(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=e;if(!n){let a=!1,l=t.length;r<0&&(t.push(function ypt(){return new at(3100,!1)}()),a=!0),o<0&&(t.push(function vpt(){return new at(3101,!1)}()),a=!0),a&&t.splice(l,0,Fme())}return{duration:r,delay:o,easing:s}}(e,t,n)}function vM(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Gme(e){const t=new Map;return Object.keys(e).forEach(n=>{t.set(n,e[n])}),t}function wp(e,t=new Map,n){if(n)for(let[i,r]of n)t.set(i,r);for(let[i,r]of e)t.set(i,r);return t}function Yme(e,t,n){return n?t+":"+n+";":""}function Xme(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=Yme(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=Yme(0,lgt(n),e.style[n]));e.setAttribute("style",t)}function dd(e,t,n){e.style&&(t.forEach((i,r)=>{const o=GV(r);n&&!n.has(r)&&n.set(r,e.style[o]),e.style[o]=i}),FV()&&Xme(e))}function Vm(e,t){e.style&&(t.forEach((n,i)=>{const r=GV(i);e.style[r]=""}),FV()&&Xme(e))}function bM(e){return Array.isArray(e)?1==e.length?e[0]:$Z(e):e}const WV=new RegExp("{{\\s*(.+?)\\s*}}","g");function Kme(e){let t=[];if("string"==typeof e){let n;for(;n=WV.exec(e);)t.push(n[1]);WV.lastIndex=0}return t}function wM(e,t,n){const i=e.toString(),r=i.replace(WV,(o,s)=>{let a=t[s];return null==a&&(n.push(function wpt(e){return new at(3003,!1)}()),a=""),a.toString()});return r==i?e:r}function XT(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const agt=/-+([a-z0-9])/g;function GV(e){return e.replace(agt,(...t)=>t[1].toUpperCase())}function lgt(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function yl(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw function Cpt(e){return new at(3004,!1)}()}}function Zme(e,t){return window.getComputedStyle(e)[t]}function pgt(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(i=>function ggt(e,t,n){if(":"==e[0]){const l=function mgt(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return t.push(function Lpt(e){return new at(3016,!1)}()),"* => *"}}(e,n);if("function"==typeof l)return void t.push(l);e=l}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(function Fpt(e){return new at(3015,!1)}()),t;const r=i[1],o=i[2],s=i[3];t.push(Qme(r,s));"<"==o[0]&&!("*"==r&&"*"==s)&&t.push(Qme(s,r))}(i,n,t)):n.push(e),n}const JT=new Set(["true","1"]),eP=new Set(["false","0"]);function Qme(e,t){const n=JT.has(e)||eP.has(e),i=JT.has(t)||eP.has(t);return(r,o)=>{let s="*"==e||e==r,a="*"==t||t==o;return!s&&n&&"boolean"==typeof r&&(s=r?JT.has(e):eP.has(e)),!a&&i&&"boolean"==typeof o&&(a=o?JT.has(t):eP.has(t)),s&&a}}const _gt=new RegExp("s*:selfs*,?","g");function qV(e,t,n,i){return new ygt(e).build(t,n,i)}class ygt{constructor(t){this._driver=t}build(t,n,i){const r=new wgt(n);return this._resetContextStyleTimingState(r),yl(this,bM(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,n){let i=n.queryCount=0,r=n.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&n.errors.push(function xpt(){return new at(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,n))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,n);i+=l.queryCount,r+=l.depCount,s.push(l)}else n.errors.push(function Ept(){return new at(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,n){const i=this.visitStyle(t.styles,n),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Kme(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(XT(o.values()),n.errors.push(function Spt(e,t){return new at(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const i=yl(this,bM(t.animation),n);return{type:1,matchers:pgt(t.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:Um(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(i=>yl(this,i,n)),options:Um(t.options)}}visitGroup(t,n){const i=n.currentTime;let r=0;const o=t.steps.map(s=>{n.currentTime=i;const a=yl(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:o,options:Um(t.options)}}visitAnimate(t,n){const i=function Mgt(e,t){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return YV(YT(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=YV(0,0,"");return o.dynamic=!0,o.strValue=n,o}const r=YT(n,t);return YV(r.duration,r.delay,r.easing)}(t.timings,n.errors);n.currentAnimateTimings=i;let r,o=t.styles?t.styles:mo({});if(5==o.type)r=this.visitKeyframes(o,n);else{let s=t.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=mo(c)}n.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,n){const i=this._makeStyleAst(t,n);return this._validateStyleAst(i,n),i}_makeStyleAst(t,n){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===Vd?i.push(a):n.errors.push(new at(3002,!1)):i.push(Gme(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,n){const i=n.currentAnimateTimings;let r=n.currentTime,o=n.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=n.collectedStyles.get(n.currentQuerySelector),u=c.get(l);let d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(n.errors.push(function Apt(e,t,n,i,r){return new at(3010,!1)}()),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:r}),n.options&&function sgt(e,t,n){const i=t.params||{},r=Kme(e);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||n.push(function bpt(e){return new at(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(t,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function Opt(){return new at(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const u=t.steps.map(k=>{const O=this._makeStyleAst(k,n);let I=null!=O.offset?O.offset:function Cgt(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(n instanceof Map&&n.has("offset")){const i=n;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}return t}(O.styles),z=0;return null!=I&&(o++,z=O.offset=I),l=l||z<0||z>1,a=a||z<c,c=z,s.push(z),O});l&&n.errors.push(function Dpt(){return new at(3012,!1)}()),a&&n.errors.push(function Tpt(){return new at(3200,!1)}());const d=t.steps.length;let f=0;o>0&&o<d?n.errors.push(function Ppt(){return new at(3202,!1)}()):0==o&&(f=1/(d-1));const h=d-1,y=n.currentTime,b=n.currentAnimateTimings,C=b.duration;return u.forEach((k,O)=>{const I=f>0?O==h?1:f*O:s[O],z=I*C;n.currentTime=y+b.delay+z,b.duration=z,this._validateStyleAst(k,n),k.offset=I,i.styles.push(k)}),i}visitReference(t,n){return{type:8,animation:yl(this,bM(t.animation),n),options:Um(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:Um(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:Um(t.options)}}visitQuery(t,n){const i=n.currentQuerySelector,r=t.options||{};n.queryCount++,n.currentQuery=t;const[o,s]=function vgt(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(_gt,"")),e=e.replace(/@\*/g,qT).replace(/@\w+/g,n=>qT+"-"+n.slice(1)).replace(/:animating/g,UV),[e,t]}(t.selector);n.currentQuerySelector=i.length?i+" "+o:o,_l(n.collectedStyles,n.currentQuerySelector,new Map);const a=yl(this,bM(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:Um(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function Rpt(){return new at(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:YT(t.timings,n.errors,!0);return{type:12,animation:yl(this,bM(t.animation),n),timings:i,options:null}}}class wgt{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Um(e){return e?(e=vM(e)).params&&(e.params=function bgt(e){return e?vM(e):null}(e.params)):e={},e}function YV(e,t,n){return{duration:e,delay:t,easing:n}}function XV(e,t,n,i,r,o,s=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class tP{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Sgt=new RegExp(":enter","g"),Agt=new RegExp(":leave","g");function KV(e,t,n,i,r,o=new Map,s=new Map,a,l,c=[]){return(new Ogt).buildKeyframes(e,t,n,i,r,o,s,a,l,c)}class Ogt{buildKeyframes(t,n,i,r,o,s,a,l,c,u=[]){c=c||new tP;const d=new ZV(t,n,c,r,o,u,[]);d.options=l;const f=l.delay?Df(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([s],null,d.errors,l),yl(this,i,d);const h=d.timelines.filter(y=>y.containsAnimation());if(h.length&&a.size){let y;for(let b=h.length-1;b>=0;b--){const C=h[b];if(C.element===n){y=C;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,d.errors,l)}return h.length?h.map(y=>y.buildKeyframes()):[XV(n,[],[],[],0,f,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const i=n.subInstructions.get(n.element);if(i){const r=n.createSubContext(t.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=t}visitAnimateRef(t,n){const i=n.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],n,i),this.visitReference(t.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=t}_applyAnimationRefDelays(t,n,i){for(const r of t){const o=r?.delay;if(o){const s="number"==typeof o?o:Df(wM(o,r?.params??{},n.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,n,i){let o=n.currentTimeline.currentTime;const s=null!=i.duration?Df(i.duration):null,a=null!=i.delay?Df(i.delay):null;return 0!==s&&t.forEach(l=>{const c=n.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,n){n.updateOptions(t.options,!0),yl(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const i=n.subContextCount;let r=n;const o=t.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=nP);const s=Df(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>yl(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const i=[];let r=n.currentTimeline.currentTime;const o=t.options&&t.options.delay?Df(t.options.delay):0;t.steps.forEach(s=>{const a=n.createSubContext(t.options);o&&a.delayNextStep(o),yl(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const i=t.strValue;return YT(n.params?wM(i,n.params,n.errors):i,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const i=n.currentAnimateTimings=this._visitTiming(t.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,n):(n.incrementTime(i.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const i=n.currentAnimateTimings,r=n.currentTimeline.duration,o=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=t}visitQuery(t,n){const i=n.currentTimeline.currentTime,r=t.options||{},o=r.delay?Df(r.delay):0;o&&(6===n.previousNode.type||0==i&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=nP);let s=i;const a=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{n.currentQueryIndex=u;const d=n.createSubContext(t.options,c);o&&d.delayNextStep(o),c===n.element&&(l=d.currentTimeline),yl(this,t.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const i=n.parentContext,r=n.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1);let l=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=n.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;yl(this,t.animation,n),n.previousNode=t,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const nP={};class ZV{constructor(t,n,i,r,o,s,a,l){this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nP,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new iP(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Df(i.duration)),null!=i.delay&&(r.delay=Df(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=wM(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const i=t.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return t}createSubContext(t=null,n,i){const r=n||this.element,o=new ZV(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=nP,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,i){const r={duration:n??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new Dgt(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Sgt,"."+this._enterClassName)).replace(Agt,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function Ipt(e){return new at(3014,!1)}()),a}}class iP{constructor(t,n,i,r){this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new iP(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles.set(t,n),this._globalTimelineStyles.set(t,n),this._styleSummary.set(t,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||Vd),this._currentKeyframe.set(n,Vd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,i,r){n&&this._previousKeyframe.set("easing",n);const o=r&&r.params||{},s=function Tgt(e,t){const n=new Map;let i;return e.forEach(r=>{if("*"===r){i=i||t.keys();for(let o of i)n.set(o,Vd)}else wp(r,n)}),n}(t,this._globalTimelineStyles);for(let[a,l]of s){const c=wM(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Vd),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,n)=>{this._currentKeyframe.set(n,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,t)}))}snapshotCurrentStyles(){for(let[t,n]of this._localTimelineStyles)this._pendingStyles.set(t,n),this._updateStyle(t,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((n,i)=>{const r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=wp(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?t.add(d):u===Vd&&n.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const o=t.size?XT(t.values()):[],s=n.size?XT(n.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return XV(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class Dgt extends iP{constructor(t,n,i,r,o,s,a=!1){super(t,n,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const o=[],s=i+n,a=n/s,l=wp(t[0]);l.set("offset",0),o.push(l);const c=wp(t[0]);c.set("offset",t_e(a)),o.push(c);const u=t.length-1;for(let d=1;d<=u;d++){let f=wp(t[d]);const h=f.get("offset");f.set("offset",t_e((n+h*i)/s)),o.push(f)}i=s,n=0,r="",t=o}return XV(this.element,t,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}function t_e(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class QV{}const Pgt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Rgt extends QV{normalizePropertyName(t,n){return GV(t)}normalizeStyleValue(t,n,i,r){let o="";const s=i.toString().trim();if(Pgt.has(n)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Mpt(e,t){return new at(3005,!1)}())}return s+o}}function n_e(e,t,n,i,r,o,s,a,l,c,u,d,f){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:f}}const JV={};class i_e{constructor(t,n,i){this._triggerName=t,this.ast=n,this._stateStyles=i}match(t,n,i,r){return function Igt(e,t,n,i,r){return e.some(o=>o(t,n,i,r))}(this.ast.matchers,t,n,i,r)}buildStyles(t,n,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(n,i):new Map}build(t,n,i,r,o,s,a,l,c,u){const d=[],f=this.ast.options&&this.ast.options.params||JV,y=this.buildStyles(i,a&&a.params||JV,d),b=l&&l.params||JV,C=this.buildStyles(r,b,d),k=new Set,O=new Map,I=new Map,z="void"===r,q={params:Fgt(b,f),delay:this.ast.options?.delay},ne=u?[]:KV(t,n,this.ast.animation,o,s,y,C,q,c,d);let K=0;if(ne.forEach(me=>{K=Math.max(me.duration+me.delay,K)}),d.length)return n_e(n,this._triggerName,i,r,z,y,C,[],[],O,I,K,d);ne.forEach(me=>{const ge=me.element,ye=_l(O,ge,new Set);me.preStyleProps.forEach(ve=>ye.add(ve));const Se=_l(I,ge,new Set);me.postStyleProps.forEach(ve=>Se.add(ve)),ge!==n&&k.add(ge)});const le=XT(k.values());return n_e(n,this._triggerName,i,r,z,y,C,ne,le,O,I,K)}}function Fgt(e,t){const n=vM(t);for(const i in e)e.hasOwnProperty(i)&&null!=e[i]&&(n[i]=e[i]);return n}class Lgt{constructor(t,n,i){this.styles=t,this.defaultParams=n,this.normalizer=i}buildStyles(t,n){const i=new Map,r=vM(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=wM(s,r,n));const l=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,l,s,n),i.set(l,s)})}),i}}class $gt{constructor(t,n,i){this.name=t,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{this.states.set(r.name,new Lgt(r.style,r.options&&r.options.params||{},i))}),r_e(this.states,"true","1"),r_e(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new i_e(t,r,this.states))}),this.fallbackTransition=function Bgt(e,t,n){return new i_e(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,i,r){return this.transitionFactories.find(s=>s.match(t,n,i,r))||null}matchStyles(t,n,i){return this.fallbackTransition.buildStyles(t,n,i)}}function r_e(e,t,n){e.has(t)?e.has(n)||e.set(n,e.get(t)):e.has(n)&&e.set(t,e.get(n))}const zgt=new tP;class Hgt{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,n){const i=[],o=qV(this._driver,n,i,[]);if(i.length)throw function Hpt(e){return new at(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,n,i){const r=t.element,o=Lme(0,this._normalizer,0,t.keyframes,n,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,n,i={}){const r=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=KV(this._driver,n,o,VV,WT,new Map,new Map,i,zgt,r),s.forEach(u=>{const d=_l(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(r.push(function Vpt(){return new at(3300,!1)}()),s=[]),r.length)throw function Upt(e){return new at(3504,!1)}();a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,Vd))})});const c=bp(s.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const n=this._getPlayer(t);n.destroy(),this._playersById.delete(t);const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(t){const n=this._playersById.get(t);if(!n)throw function jpt(e){return new at(3301,!1)}();return n}listen(t,n,i,r){const o=$V(n,"","","");return LV(this._getPlayer(t),i,o,r),()=>{}}command(t,n,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,n,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const o_e="ng-animate-queued",eU="ng-animate-disabled",Ggt=[],s_e={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qgt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Jl="__ng_removed";class tU{constructor(t,n=""){this.namespaceId=n;const i=t&&t.hasOwnProperty("value");if(this.value=function Zgt(e){return e??null}(i?t.value:t),i){const o=vM(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const i=this.options.params;Object.keys(n).forEach(r=>{null==i[r]&&(i[r]=n[r])})}}}const CM="void",nU=new tU(CM);class Ygt{constructor(t,n,i){this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ec(n,this._hostClassName)}listen(t,n,i,r){if(!this._triggers.has(n))throw function Wpt(e,t){return new at(3302,!1)}();if(null==i||0==i.length)throw function Gpt(e){return new at(3303,!1)}();if(!function Qgt(e){return"start"==e||"done"==e}(i))throw function qpt(e,t){return new at(3400,!1)}();const o=_l(this._elementListeners,t,[]),s={name:n,phase:i,callback:r};o.push(s);const a=_l(this._engine.statesByElement,t,new Map);return a.has(n)||(ec(t,GT),ec(t,GT+"-"+n),a.set(n,nU)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(t,n){return!this._triggers.has(t)&&(this._triggers.set(t,n),!0)}_getTrigger(t){const n=this._triggers.get(t);if(!n)throw function Ypt(e){return new at(3401,!1)}();return n}trigger(t,n,i,r=!0){const o=this._getTrigger(n),s=new iU(this.id,n,t);let a=this._engine.statesByElement.get(t);a||(ec(t,GT),ec(t,GT+"-"+n),this._engine.statesByElement.set(t,a=new Map));let l=a.get(n);const c=new tU(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(n,c),l||(l=nU),c.value!==CM&&l.value===c.value){if(!function tmt(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const o=n[r];if(!t.hasOwnProperty(o)||e[o]!==t[o])return!1}return!0}(l.params,c.params)){const b=[],C=o.matchStyles(l.value,l.params,b),k=o.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{Vm(t,C),dd(t,k)})}return}const f=_l(this._engine.playersByElement,t,[]);f.forEach(b=>{b.namespaceId==this.id&&b.triggerName==n&&b.queued&&b.destroy()});let h=o.matchTransition(l.value,c.value,t,c.params),y=!1;if(!h){if(!r)return;h=o.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:h,fromState:l,toState:c,player:s,isFallbackTransition:y}),y||(ec(t,o_e),s.onStart(()=>{wb(t,o_e)})),s.onDone(()=>{let b=this.players.indexOf(s);b>=0&&this.players.splice(b,1);const C=this._engine.playersByElement.get(t);if(C){let k=C.indexOf(s);k>=0&&C.splice(k,1)}}),this.players.push(s),f.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(n=>n.delete(t)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const i=this._engine.driver.query(t,qT,!0);i.forEach(r=>{if(r[Jl])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,n,i,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const u=this.trigger(t,c,CM,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,s),i&&bp(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(n&&i){const r=new Set;n.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||nU,u=new tU(CM),d=new iU(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(t,n){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,n);else{const o=t[Jl];(!o||o===s_e)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,n))}}insertNode(t,n){ec(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=$V(o,i.triggerName,i.fromState.value,i.toState.value);l._data=t,LV(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(i=>i.element===t)||n,n}}class Xgt{constructor(t,n,i){this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,n){const i=new Ygt(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,n){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return r.set(n,t),t}register(t,n){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,n)),i}registerTrigger(t,n,i){let r=this._namespaceLookup[t];r&&r.register(n,i)&&this.totalAnimations++}destroy(t,n){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}return n}trigger(t,n,i,r){if(rP(n)){const o=this._fetchNamespace(t);if(o)return o.trigger(n,i,r),!0}return!1}insertNode(t,n,i,r){if(!rP(n))return;const o=n[Jl];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ec(t,eU)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),wb(t,eU))}removeNode(t,n,i,r){if(rP(n)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(n,r):this.markElementAsRemoved(t,n,!1,r),i){const s=this.namespacesByHostElement.get(n);s&&s.id!==t&&s.removeNode(n,r)}}else this._onRemovalComplete(n,r)}markElementAsRemoved(t,n,i,r,o){this.collectedLeaveElements.push(n),n[Jl]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,n,i,r,o){return rP(n)?this._fetchNamespace(t).listen(n,i,r,o):()=>{}}_buildInstruction(t,n,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,n,o)}destroyInnerAnimations(t){let n=this.driver.query(t,qT,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,UV,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return bp(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[Jl];if(n&&n.setForRemoval){if(t[Jl]=s_e,n.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}t.classList?.contains(eU)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ec(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?bp(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function Xpt(e){return new at(3402,!1)}()}_flushAnimations(t,n){const i=new tP,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(oe=>{u.add(oe);const de=this.driver.query(oe,".ng-animate-queued",!0);for(let ce=0;ce<de.length;ce++)u.add(de[ce])});const d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=c_e(f,this.collectedEnterElements),y=new Map;let b=0;h.forEach((oe,de)=>{const ce=VV+b++;y.set(de,ce),oe.forEach(he=>ec(he,ce))});const C=[],k=new Set,O=new Set;for(let oe=0;oe<this.collectedLeaveElements.length;oe++){const de=this.collectedLeaveElements[oe],ce=de[Jl];ce&&ce.setForRemoval&&(C.push(de),k.add(de),ce.hasAnimation?this.driver.query(de,".ng-star-inserted",!0).forEach(he=>k.add(he)):O.add(de))}const I=new Map,z=c_e(f,Array.from(k));z.forEach((oe,de)=>{const ce=WT+b++;I.set(de,ce),oe.forEach(he=>ec(he,ce))}),t.push(()=>{h.forEach((oe,de)=>{const ce=y.get(de);oe.forEach(he=>wb(he,ce))}),z.forEach((oe,de)=>{const ce=I.get(de);oe.forEach(he=>wb(he,ce))}),C.forEach(oe=>{this.processLeaveNode(oe)})});const q=[],ne=[];for(let oe=this._namespaceList.length-1;oe>=0;oe--)this._namespaceList[oe].drainQueuedTransitions(n).forEach(ce=>{const he=ce.player,pe=ce.element;if(q.push(he),this.collectedEnterElements.length){const ze=pe[Jl];if(ze&&ze.setForMove){if(ze.previousTriggersValues&&ze.previousTriggersValues.has(ce.triggerName)){const mt=ze.previousTriggersValues.get(ce.triggerName),Be=this.statesByElement.get(ce.element);if(Be&&Be.has(ce.triggerName)){const rt=Be.get(ce.triggerName);rt.value=mt,Be.set(ce.triggerName,rt)}}return void he.destroy()}}const Ee=!d||!this.driver.containsElement(d,pe),Oe=I.get(pe),Ie=y.get(pe),De=this._buildInstruction(ce,i,Ie,Oe,Ee);if(De.errors&&De.errors.length)return void ne.push(De);if(Ee)return he.onStart(()=>Vm(pe,De.fromStyles)),he.onDestroy(()=>dd(pe,De.toStyles)),void r.push(he);if(ce.isFallbackTransition)return he.onStart(()=>Vm(pe,De.fromStyles)),he.onDestroy(()=>dd(pe,De.toStyles)),void r.push(he);const $e=[];De.timelines.forEach(ze=>{ze.stretchStartingKeyframe=!0,this.disabledNodes.has(ze.element)||$e.push(ze)}),De.timelines=$e,i.append(pe,De.timelines),s.push({instruction:De,player:he,element:pe}),De.queriedElements.forEach(ze=>_l(a,ze,[]).push(he)),De.preStyleProps.forEach((ze,mt)=>{if(ze.size){let Be=l.get(mt);Be||l.set(mt,Be=new Set),ze.forEach((rt,ut)=>Be.add(ut))}}),De.postStyleProps.forEach((ze,mt)=>{let Be=c.get(mt);Be||c.set(mt,Be=new Set),ze.forEach((rt,ut)=>Be.add(ut))})});if(ne.length){const oe=[];ne.forEach(de=>{oe.push(function Kpt(e,t){return new at(3505,!1)}())}),q.forEach(de=>de.destroy()),this.reportError(oe)}const K=new Map,le=new Map;s.forEach(oe=>{const de=oe.element;i.has(de)&&(le.set(de,de),this._beforeAnimationBuild(oe.player.namespaceId,oe.instruction,K))}),r.forEach(oe=>{const de=oe.element;this._getPreviousPlayers(de,!1,oe.namespaceId,oe.triggerName,null).forEach(he=>{_l(K,de,[]).push(he),he.destroy()})});const me=C.filter(oe=>d_e(oe,l,c)),ge=new Map;l_e(ge,this.driver,O,c,Vd).forEach(oe=>{d_e(oe,l,c)&&me.push(oe)});const Se=new Map;h.forEach((oe,de)=>{l_e(Se,this.driver,new Set(oe),l,"!")}),me.forEach(oe=>{const de=ge.get(oe),ce=Se.get(oe);ge.set(oe,new Map([...Array.from(de?.entries()??[]),...Array.from(ce?.entries()??[])]))});const ve=[],Z=[],ae={};s.forEach(oe=>{const{element:de,player:ce,instruction:he}=oe;if(i.has(de)){if(u.has(de))return ce.onDestroy(()=>dd(de,he.toStyles)),ce.disabled=!0,ce.overrideTotalTime(he.totalTime),void r.push(ce);let pe=ae;if(le.size>1){let Oe=de;const Ie=[];for(;Oe=Oe.parentNode;){const De=le.get(Oe);if(De){pe=De;break}Ie.push(Oe)}Ie.forEach(De=>le.set(De,pe))}const Ee=this._buildAnimation(ce.namespaceId,he,K,o,Se,ge);if(ce.setRealPlayer(Ee),pe===ae)ve.push(ce);else{const Oe=this.playersByElement.get(pe);Oe&&Oe.length&&(ce.parentPlayer=bp(Oe)),r.push(ce)}}else Vm(de,he.fromStyles),ce.onDestroy(()=>dd(de,he.toStyles)),Z.push(ce),u.has(de)&&r.push(ce)}),Z.forEach(oe=>{const de=o.get(oe.element);if(de&&de.length){const ce=bp(de);oe.setRealPlayer(ce)}}),r.forEach(oe=>{oe.parentPlayer?oe.syncPlayerEvents(oe.parentPlayer):oe.destroy()});for(let oe=0;oe<C.length;oe++){const de=C[oe],ce=de[Jl];if(wb(de,WT),ce&&ce.hasAnimation)continue;let he=[];if(a.size){let Ee=a.get(de);Ee&&Ee.length&&he.push(...Ee);let Oe=this.driver.query(de,UV,!0);for(let Ie=0;Ie<Oe.length;Ie++){let De=a.get(Oe[Ie]);De&&De.length&&he.push(...De)}}const pe=he.filter(Ee=>!Ee.destroyed);pe.length?Jgt(this,de,pe):this.processLeaveNode(de)}return C.length=0,ve.forEach(oe=>{this.players.push(oe),oe.onDone(()=>{oe.destroy();const de=this.players.indexOf(oe);this.players.splice(de,1)}),oe.play()}),ve}elementContainsData(t,n){let i=!1;const r=n[Jl];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(t).elementContainsData(n)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,i,r,o){let s=[];if(n){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==CM;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,n,i){const o=n.element,s=n.isRemovalTransition?void 0:t,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const c=l.element,u=c!==o,d=_l(i,c,[]);this._getPreviousPlayers(c,u,s,a,n.toState).forEach(h=>{const y=h.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),h.destroy(),d.push(h)})}Vm(o,n.fromStyles)}_buildAnimation(t,n,i,r,o,s){const a=n.triggerName,l=n.element,c=[],u=new Set,d=new Set,f=n.timelines.map(y=>{const b=y.element;u.add(b);const C=b[Jl];if(C&&C.removedBeforeQueried)return new Dw(y.duration,y.delay);const k=b!==l,O=function emt(e){const t=[];return u_e(e,t),t}((i.get(b)||Ggt).map(K=>K.getRealPlayer())).filter(K=>!!K.element&&K.element===b),I=o.get(b),z=s.get(b),q=Lme(0,this._normalizer,0,y.keyframes,I,z),ne=this._buildPlayer(y,q,O);if(y.subTimeline&&r&&d.add(b),k){const K=new iU(t,a,b);K.setRealPlayer(ne),c.push(K)}return ne});c.forEach(y=>{_l(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>function Kgt(e,t,n){let i=e.get(t);if(i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&e.delete(t)}return i}(this.playersByQueriedElement,y.element,y))}),u.forEach(y=>ec(y,Wme));const h=bp(f);return h.onDestroy(()=>{u.forEach(y=>wb(y,Wme)),dd(l,n.toStyles)}),d.forEach(y=>{_l(r,y,[]).push(h)}),h}_buildPlayer(t,n,i){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,i):new Dw(t.duration,t.delay)}}class iU{constructor(t,n,i){this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new Dw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>LV(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){_l(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function rP(e){return e&&1===e.nodeType}function a_e(e,t){const n=e.style.display;return e.style.display=t??"none",n}function l_e(e,t,n,i,r){const o=[];n.forEach(l=>o.push(a_e(l)));const s=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const f=t.computeStyle(c,d,r);u.set(d,f),(!f||0==f.length)&&(c[Jl]=qgt,s.push(c))}),e.set(c,u)});let a=0;return n.forEach(l=>a_e(l,o[a++])),s}function c_e(e,t){const n=new Map;if(e.forEach(a=>n.set(a,[])),0==t.length)return n;const r=new Set(t),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=n.has(c)?c:r.has(c)?1:s(c),o.set(a,l),l}return t.forEach(a=>{const l=s(a);1!==l&&n.get(l).push(a)}),n}function ec(e,t){e.classList?.add(t)}function wb(e,t){e.classList?.remove(t)}function Jgt(e,t,n){bp(n).onDone(()=>e.processLeaveNode(t))}function u_e(e,t){for(let n=0;n<e.length;n++){const i=e[n];i instanceof zZ?u_e(i.players,t):t.push(i)}}function d_e(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(o=>r.add(o)):t.set(e,i),n.delete(e),!0}class oP{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Xgt(t,n,i),this._timelineEngine=new Hgt(t,n,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,n,i,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],u=qV(this._driver,o,l,[]);if(l.length)throw function Bpt(e,t){return new at(3404,!1)}();a=function Ngt(e,t,n){return new $gt(e,t,n)}(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,i,r){this._transitionEngine.insertNode(t,n,i,r)}onRemove(t,n,i,r){this._transitionEngine.removeNode(t,n,r||!1,i)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,i,r){if("@"==i.charAt(0)){const[o,s]=Nme(i);this._timelineEngine.command(o,n,s,r)}else this._transitionEngine.trigger(t,n,i,r)}listen(t,n,i,r,o){if("@"==i.charAt(0)){const[s,a]=Nme(i);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(t,n,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let imt=(()=>{class e{constructor(n,i,r){this._element=n,this._startStyles=i,this._endStyles=r,this._state=0;let o=e.initialStylesByElement.get(n);o||e.initialStylesByElement.set(n,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&dd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dd(this._element,this._initialStyles),this._endStyles&&(dd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Vm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vm(this._element,this._endStyles),this._endStyles=null),dd(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function rU(e){let t=null;return e.forEach((n,i)=>{(function rmt(e){return"display"===e||"position"===e})(i)&&(t=t||new Map,t.set(i,n))}),t}class f_e{constructor(t,n,i,r){this.element=t,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const n=[];return t.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(t,n,i){return t.animate(this._convertKeyframesToObject(n),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:Zme(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const n="start"===t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class omt{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,n){return!1}containsElement(t,n){return Hme(t,n)}getParentElement(t){return zV(t)}query(t,n,i){return Vme(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}animate(t,n,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,u=s.filter(h=>h instanceof f_e);(function cgt(e,t){return 0===e||0===t})(i,r)&&u.forEach(h=>{h.currentSnapshot.forEach((y,b)=>c.set(b,y))});let d=function ogt(e){return e.length?e[0]instanceof Map?e:e.map(t=>Gme(t)):[]}(n).map(h=>wp(h));d=function ugt(e,t,n){if(n.size&&t.length){let i=t[0],r=[];if(n.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,Zme(e,a)))}}return t}(t,d,c);const f=function nmt(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=rU(t[0]),t.length>1&&(i=rU(t[t.length-1]))):t instanceof Map&&(n=rU(t)),n||i?new imt(e,n,i):null}(t,d);return new f_e(t,d,l,f)}}let smt=(()=>{class e extends NZ{constructor(n,i){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(i.body,{id:"0",encapsulation:Cl.None,styles:[],data:{animation:[]}})}build(n){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(n)?$Z(n):n;return h_e(this._renderer,null,i,"register",[r]),new amt(i,this._renderer)}}return e.\u0275fac=function(n){return new(n||e)(qe(a0),qe(Jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();class amt extends class PNe{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new lmt(this._id,t,n||{},this._renderer)}}class lmt{constructor(t,n,i,r){this.id=t,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return h_e(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function h_e(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}const p_e="@.disabled";let cmt=(()=>{class e{constructor(n,i,r){this.delegate=n,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(n,i){const o=this.delegate.createRenderer(n,i);if(!(n&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(o);return u||(u=new g_e("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,u)),u}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(s,a,n,u.name,u)};return i.data.animation.forEach(l),new umt(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,i,r){n>=0&&n<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(n){return new(n||e)(qe(a0),qe(oP),qe(jn))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();class g_e{constructor(t,n,i,r){this.namespaceId=t,this.delegate=n,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>n.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,i,r=!0){this.delegate.insertBefore(t,n,i),this.engine.onInsert(this.namespaceId,n,t,r)}removeChild(t,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){"@"==n.charAt(0)&&n==p_e?this.disableAnimations(t,!!i):this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.delegate.listen(t,n,i)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class umt extends g_e{constructor(t,n,i,r,o){super(n,i,r,o),this.factory=t,this.namespaceId=n}setProperty(t,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==p_e?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,n.slice(1),i):this.delegate.setProperty(t,n,i)}listen(t,n,i){if("@"==n.charAt(0)){const r=function dmt(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let o=n.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function fmt(e){const t=e.indexOf(".");return[e.substring(0,t),e.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,n,i)}}let hmt=(()=>{class e extends oP{constructor(n,i,r,o){super(n.body,i,r)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(n){return new(n||e)(qe(Jn),qe(HV),qe(QV),qe(ty))},e.\u0275prov=Nt({token:e,factory:e.\u0275fac}),e})();const m_e=[{provide:NZ,useClass:smt},{provide:QV,useFactory:function pmt(){return new Rgt}},{provide:oP,useClass:hmt},{provide:a0,useFactory:function gmt(e,t,n){return new cmt(e,t,n)},deps:[eE,oP,jn]}],oU=[{provide:HV,useFactory:()=>new omt},{provide:uc,useValue:"BrowserAnimations"},...m_e],__e=[{provide:HV,useClass:Ume},{provide:uc,useValue:"NoopAnimations"},...m_e];let mmt=(()=>{class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?__e:oU}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e}),e.\u0275inj=Rn({providers:oU,imports:[VG]}),e})(),_mt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Dn({type:e,bootstrap:[opt]}),e.\u0275inj=Rn({imports:[VG,rpt,_pt,mmt]}),e})();FEe().bootstrapModule(_mt).catch(e=>console.error(e))},682:(pn,Ue,Me)=>{pn=Me.nmd(pn),function(){var ie=function(){return this}();!ie&&typeof window<"u"&&(ie=window);var xe=function(g,m,_){"string"==typeof g?(2==arguments.length&&(_=m),xe.modules[g]||(xe.payloads[g]=_,xe.modules[g]=null)):xe.original?xe.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};xe.modules={},xe.payloads={};var T=function(g,m,_){if("string"==typeof m){var p=E(g,m);if(null!=p)return _&&_(),p}else if("[object Array]"===Object.prototype.toString.call(m)){for(var v=[],w=0,x=m.length;w<x;++w){var A=E(g,m[w]);if(null==A&&re.original)return;v.push(A)}return _&&_.apply(null,v)||!0}},re=function(g,m){var _=T("",g,m);return null==_&&re.original?re.original.apply(this,arguments):_},B=function(g,m){if(-1!==m.indexOf("!")){var _=m.split("!");return B(g,_[0])+"!"+B(g,_[1])}if("."==m.charAt(0))for(m=g.split("/").slice(0,-1).join("/")+"/"+m;-1!==m.indexOf(".")&&v!=m;){var v=m;m=m.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return m},E=function(g,m){m=B(g,m);var _=xe.modules[m];if(!_){if("function"==typeof(_=xe.payloads[m])){var p={},v={id:m,uri:"",exports:p,packaged:!0},x=_(function(A,R){return T(m,A,R)},p,v);xe.modules[m]=p=x||v.exports,delete xe.payloads[m]}_=xe.modules[m]=p||_}return _};!function M(g){var m=ie;g&&(ie[g]||(ie[g]={}),m=ie[g]),(!m.define||!m.define.packaged)&&(xe.original=m.define,m.define=xe,m.define.packaged=!0),(!m.require||!m.require.packaged)&&(re.original=m.require,m.require=re,m.require.packaged=!0)}("ace")}(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(Q,ie,xe){function T(re,B,E){Object.defineProperty(re,B,{value:E,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||T(String.prototype,"startsWith",function(re,B){return this.lastIndexOf(re,B=B||0)===B}),String.prototype.endsWith||T(String.prototype,"endsWith",function(re,B){var E=this;(void 0===B||B>E.length)&&(B=E.length);var M=E.indexOf(re,B-=re.length);return-1!==M&&M===B}),String.prototype.repeat||T(String.prototype,"repeat",function(re){for(var B="",E=this;re>0;)1&re&&(B+=E),(re>>=1)&&(E+=E);return B}),String.prototype.includes||T(String.prototype,"includes",function(re,B){return-1!=this.indexOf(re,B)}),Object.assign||(Object.assign=function(re){if(null==re)throw new TypeError("Cannot convert undefined or null to object");for(var B=Object(re),E=1;E<arguments.length;E++){var M=arguments[E];null!=M&&Object.keys(M).forEach(function(g){B[g]=M[g]})}return B}),Object.values||(Object.values=function(re){return Object.keys(re).map(function(B){return re[B]})}),Array.prototype.find||T(Array.prototype,"find",function(re){for(var B=this.length,E=arguments[1],M=0;M<B;M++){var g=this[M];if(re.call(E,g,M,this))return g}}),Array.prototype.findIndex||T(Array.prototype,"findIndex",function(re){for(var B=this.length,E=arguments[1],M=0;M<B;M++){var g=this[M];if(re.call(E,g,M,this))return M}}),Array.prototype.includes||T(Array.prototype,"includes",function(re,B){return-1!=this.indexOf(re,B)}),Array.prototype.fill||T(Array.prototype,"fill",function(re){for(var B=this,E=B.length>>>0,M=arguments[1],g=M>>0,m=g<0?Math.max(E+g,0):Math.min(g,E),_=arguments[2],p=void 0===_?E:_>>0,v=p<0?Math.max(E+p,0):Math.min(p,E);m<v;)B[m]=re,m++;return B}),Array.of||T(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(Q,ie,xe){"use strict";Q("./es6-shim")}),ace.define("ace/lib/lang",["require","exports","module"],function(Q,ie,xe){"use strict";ie.last=function(B){return B[B.length-1]},ie.stringReverse=function(B){return B.split("").reverse().join("")},ie.stringRepeat=function(B,E){for(var M="";E>0;)1&E&&(M+=B),(E>>=1)&&(B+=B);return M};var T=/^\s\s*/,re=/\s\s*$/;ie.stringTrimLeft=function(B){return B.replace(T,"")},ie.stringTrimRight=function(B){return B.replace(re,"")},ie.copyObject=function(B){var E={};for(var M in B)E[M]=B[M];return E},ie.copyArray=function(B){for(var E=[],M=0,g=B.length;M<g;M++)E[M]=B[M]&&"object"==typeof B[M]?this.copyObject(B[M]):B[M];return E},ie.deepCopy=function B(E){if("object"!=typeof E||!E)return E;var M;if(Array.isArray(E)){M=[];for(var g=0;g<E.length;g++)M[g]=B(E[g]);return M}if("[object Object]"!==Object.prototype.toString.call(E))return E;for(var g in M={},E)M[g]=B(E[g]);return M},ie.arrayToMap=function(B){for(var E={},M=0;M<B.length;M++)E[B[M]]=1;return E},ie.createMap=function(B){var E=Object.create(null);for(var M in B)E[M]=B[M];return E},ie.arrayRemove=function(B,E){for(var M=0;M<=B.length;M++)E===B[M]&&B.splice(M,1)},ie.escapeRegExp=function(B){return B.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},ie.escapeHTML=function(B){return(""+B).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},ie.getMatchOffsets=function(B,E){var M=[];return B.replace(E,function(g){M.push({offset:arguments[arguments.length-2],length:g.length})}),M},ie.deferredCall=function(B){var E=null,M=function(){E=null,B()},g=function(m){return g.cancel(),E=setTimeout(M,m||0),g};return g.schedule=g,g.call=function(){return this.cancel(),B(),g},g.cancel=function(){return clearTimeout(E),E=null,g},g.isPending=function(){return E},g},ie.delayedCall=function(B,E){var M=null,g=function(){M=null,B()},m=function(_){null==M&&(M=setTimeout(g,_||E))};return m.delay=function(_){M&&clearTimeout(M),M=setTimeout(g,_||E)},m.schedule=m,m.call=function(){this.cancel(),B()},m.cancel=function(){M&&clearTimeout(M),M=null},m.isPending=function(){return M},m}}),ace.define("ace/lib/useragent",["require","exports","module"],function(Q,ie,xe){"use strict";ie.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},ie.getOS=function(){return ie.isMac?ie.OS.MAC:ie.isLinux?ie.OS.LINUX:ie.OS.WINDOWS};var T="object"==typeof navigator?navigator:{},re=(/mac|win|linux/i.exec(T.platform)||["other"])[0].toLowerCase(),B=T.userAgent||"",E=T.appName||"";ie.isWin="win"==re,ie.isMac="mac"==re,ie.isLinux="linux"==re,ie.isIE="Microsoft Internet Explorer"==E||E.indexOf("MSAppHost")>=0?parseFloat((B.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((B.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),ie.isOldIE=ie.isIE&&ie.isIE<9,ie.isGecko=ie.isMozilla=B.match(/ Gecko\/\d+/),ie.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),ie.isWebKit=parseFloat(B.split("WebKit/")[1])||void 0,ie.isChrome=parseFloat(B.split(" Chrome/")[1])||void 0,ie.isEdge=parseFloat(B.split(" Edge/")[1])||void 0,ie.isAIR=B.indexOf("AdobeAIR")>=0,ie.isAndroid=B.indexOf("Android")>=0,ie.isChromeOS=B.indexOf(" CrOS ")>=0,ie.isIOS=/iPad|iPhone|iPod/.test(B)&&!window.MSStream,ie.isIOS&&(ie.isMac=!0),ie.isMobile=ie.isIOS||ie.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(Q,ie,xe){"use strict";var T=Q("./useragent");ie.buildDom=function _(p,v,w){if("string"==typeof p&&p){var x=document.createTextNode(p);return v&&v.appendChild(x),x}if(!Array.isArray(p))return p&&p.appendChild&&v&&v.appendChild(p),p;if("string"!=typeof p[0]||!p[0]){for(var A=[],R=0;R<p.length;R++){var U=_(p[R],v,w);U&&A.push(U)}return A}var L=document.createElement(p[0]),W=p[1],H=1;for(W&&"object"==typeof W&&!Array.isArray(W)&&(H=2),R=H;R<p.length;R++)_(p[R],L,w);return 2==H&&Object.keys(W).forEach(function(P){var $=W[P];"class"===P?L.className=Array.isArray($)?$.join(" "):$:"function"==typeof $||"value"==P||"$"==P[0]?L[P]=$:"ref"===P?w&&(w[$]=L):"style"===P?"string"==typeof $&&(L.style.cssText=$):null!=$&&L.setAttribute(P,$)}),v&&v.appendChild(L),L},ie.getDocumentHead=function(_){return _||(_=document),_.head||_.getElementsByTagName("head")[0]||_.documentElement},ie.createElement=function(_,p){return document.createElementNS?document.createElementNS(p||"http://www.w3.org/1999/xhtml",_):document.createElement(_)},ie.removeChildren=function(_){_.innerHTML=""},ie.createTextNode=function(_,p){return(p?p.ownerDocument:document).createTextNode(_)},ie.createFragment=function(_){return(_?_.ownerDocument:document).createDocumentFragment()},ie.hasCssClass=function(_,p){return-1!==(_.className+"").split(/\s+/g).indexOf(p)},ie.addCssClass=function(_,p){ie.hasCssClass(_,p)||(_.className+=" "+p)},ie.removeCssClass=function(_,p){for(var v=_.className.split(/\s+/g);;){var w=v.indexOf(p);if(-1==w)break;v.splice(w,1)}_.className=v.join(" ")},ie.toggleCssClass=function(_,p){for(var v=_.className.split(/\s+/g),w=!0;;){var x=v.indexOf(p);if(-1==x)break;w=!1,v.splice(x,1)}return w&&v.push(p),_.className=v.join(" "),w},ie.setCssClass=function(_,p,v){v?ie.addCssClass(_,p):ie.removeCssClass(_,p)},ie.hasCssString=function(_,p){var w,v=0;if(w=(p=p||document).querySelectorAll("style"))for(;v<w.length;)if(w[v++].id===_)return!0},ie.removeElementById=function(_,p){(p=p||document).getElementById(_)&&p.getElementById(_).remove()};var B,E=[];function M(){var _=E;E=null,_&&_.forEach(function(p){g(p[0],p[1])})}function g(_,p,v){if(!(typeof document>"u")){if(E)if(v)M();else if(!1===v)return E.push([_,p]);if(!B){var w=v;v&&v.getRootNode?(!(w=v.getRootNode())||w==v)&&(w=document):w=document;var x=w.ownerDocument||w;if(p&&ie.hasCssString(p,w))return null;p&&(_+="\n/*# sourceURL=ace/css/"+p+" */");var A=ie.createElement("style");A.appendChild(x.createTextNode(_)),p&&(A.id=p),w==x&&(w=ie.getDocumentHead(x)),w.insertBefore(A,w.firstChild)}}}if(ie.useStrictCSP=function(_){B=_,0==_?M():E||(E=[])},ie.importCssString=g,ie.importCssStylsheet=function(_,p){ie.buildDom(["link",{rel:"stylesheet",href:_}],ie.getDocumentHead(p))},ie.scrollbarWidth=function(_){var p=ie.createElement("ace_inner");p.style.width="100%",p.style.minWidth="0px",p.style.height="200px",p.style.display="block";var v=ie.createElement("ace_outer"),w=v.style;w.position="absolute",w.left="-10000px",w.overflow="hidden",w.width="200px",w.minWidth="0px",w.height="150px",w.display="block",v.appendChild(p);var x=_&&_.documentElement||document&&document.documentElement;if(!x)return 0;x.appendChild(v);var A=p.offsetWidth;w.overflow="scroll";var R=p.offsetWidth;return A===R&&(R=v.clientWidth),x.removeChild(v),A-R},ie.computedStyle=function(_,p){return window.getComputedStyle(_,"")||{}},ie.setStyle=function(_,p,v){_[p]!==v&&(_[p]=v)},ie.HAS_CSS_ANIMATION=!1,ie.HAS_CSS_TRANSFORMS=!1,ie.HI_DPI=!T.isWin||typeof window<"u"&&window.devicePixelRatio>=1.5,T.isChromeOS&&(ie.HI_DPI=!1),typeof document<"u"){var m=document.createElement("div");ie.HI_DPI&&void 0!==m.style.transform&&(ie.HAS_CSS_TRANSFORMS=!0),!T.isEdge&&typeof m.style.animationName<"u"&&(ie.HAS_CSS_ANIMATION=!0),m=null}ie.translate=ie.HAS_CSS_TRANSFORMS?function(_,p,v){_.style.transform="translate("+Math.round(p)+"px, "+Math.round(v)+"px)"}:function(_,p,v){_.style.top=Math.round(v)+"px",_.style.left=Math.round(p)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(Q,ie,xe){"use strict";var T=Q("./dom");ie.get=function(re,B){var E=new XMLHttpRequest;E.open("GET",re,!0),E.onreadystatechange=function(){4===E.readyState&&B(E.responseText)},E.send(null)},ie.loadScript=function(re,B){var E=T.getDocumentHead(),M=document.createElement("script");M.src=re,E.appendChild(M),M.onload=M.onreadystatechange=function(g,m){(m||!M.readyState||"loaded"==M.readyState||"complete"==M.readyState)&&(M=M.onload=M.onreadystatechange=null,m||B())}},ie.qualifyURL=function(re){var B=document.createElement("a");return B.href=re,B.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(Q,ie,xe){"use strict";ie.inherits=function(T,re){T.super_=re,T.prototype=Object.create(re.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}})},ie.mixin=function(T,re){for(var B in re)T[B]=re[B];return T},ie.implement=function(T,re){ie.mixin(T,re)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(Q,ie,xe){"use strict";var T={},re=function(){this.propagationStopped=!0},B=function(){this.defaultPrevented=!0};T._emit=T._dispatchEvent=function(E,M){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var g=this._eventRegistry[E]||[],m=this._defaultHandlers[E];if(g.length||m){("object"!=typeof M||!M)&&(M={}),M.type||(M.type=E),M.stopPropagation||(M.stopPropagation=re),M.preventDefault||(M.preventDefault=B),g=g.slice();for(var _=0;_<g.length&&(g[_](M,this),!M.propagationStopped);_++);if(m&&!M.defaultPrevented)return m(M,this)}},T._signal=function(E,M){var g=(this._eventRegistry||{})[E];if(g){g=g.slice();for(var m=0;m<g.length;m++)g[m](M,this)}},T.once=function(E,M){var g=this;if(this.on(E,function m(){g.off(E,m),M.apply(null,arguments)}),!M)return new Promise(function(m){M=m})},T.setDefaultHandler=function(E,M){var g=this._defaultHandlers;if(g||(g=this._defaultHandlers={_disabled_:{}}),g[E]){var m=g[E],_=g._disabled_[E];_||(g._disabled_[E]=_=[]),_.push(m);var p=_.indexOf(M);-1!=p&&_.splice(p,1)}g[E]=M},T.removeDefaultHandler=function(E,M){var g=this._defaultHandlers;if(g){var m=g._disabled_[E];if(g[E]==M)m&&this.setDefaultHandler(E,m.pop());else if(m){var _=m.indexOf(M);-1!=_&&m.splice(_,1)}}},T.on=T.addEventListener=function(E,M,g){this._eventRegistry=this._eventRegistry||{};var m=this._eventRegistry[E];return m||(m=this._eventRegistry[E]=[]),-1==m.indexOf(M)&&m[g?"unshift":"push"](M),M},T.off=T.removeListener=T.removeEventListener=function(E,M){this._eventRegistry=this._eventRegistry||{};var g=this._eventRegistry[E];if(g){var m=g.indexOf(M);-1!==m&&g.splice(m,1)}},T.removeAllListeners=function(E){E||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[E]=void 0),this._defaultHandlers&&(this._defaultHandlers[E]=void 0)},ie.EventEmitter=T}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(Q,ie,xe){var T=Q("./oop"),re=Q("./event_emitter").EventEmitter,B={setOptions:function(_){Object.keys(_).forEach(function(p){this.setOption(p,_[p])},this)},getOptions:function(_){var p={};if(_)Array.isArray(_)||(p=_,_=Object.keys(p));else{var v=this.$options;_=Object.keys(v).filter(function(w){return!v[w].hidden})}return _.forEach(function(w){p[w]=this.getOption(w)},this),p},setOption:function(_,p){if(this["$"+_]!==p){var v=this.$options[_];if(!v)return E('misspelled option "'+_+'"');if(v.forwardTo)return this[v.forwardTo]&&this[v.forwardTo].setOption(_,p);v.handlesSet||(this["$"+_]=p),v&&v.set&&v.set.call(this,p)}},getOption:function(_){var p=this.$options[_];return p?p.forwardTo?this[p.forwardTo]&&this[p.forwardTo].getOption(_):p&&p.get?p.get.call(this):this["$"+_]:E('misspelled option "'+_+'"')}};function E(_){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var g,m=function(){function _(){this.$defaultOptions={}}return _.prototype.defineOptions=function(p,v,w){return p.$options||(this.$defaultOptions[v]=p.$options={}),Object.keys(w).forEach(function(x){var A=w[x];"string"==typeof A&&(A={forwardTo:A}),A.name||(A.name=x),p.$options[A.name]=A,"initialValue"in A&&(p["$"+A.name]=A.initialValue)}),T.implement(p,B),this},_.prototype.resetOptions=function(p){Object.keys(p.$options).forEach(function(v){var w=p.$options[v];"value"in w&&p.setOption(v,w.value)})},_.prototype.setDefaultValue=function(p,v,w){if(!p){for(p in this.$defaultOptions)if(this.$defaultOptions[p][v])break;if(!this.$defaultOptions[p][v])return!1}var x=this.$defaultOptions[p]||(this.$defaultOptions[p]={});x[v]&&(x.forwardTo?this.setDefaultValue(x.forwardTo,v,w):x[v].value=w)},_.prototype.setDefaultValues=function(p,v){Object.keys(v).forEach(function(w){this.setDefaultValue(p,w,v[w])},this)},_.prototype.setMessages=function(p){g=p},_.prototype.nls=function(p,v){g&&!g[p]&&E("No message found for '"+p+"' in the provided messages, falling back to default English message.");var w=g&&g[p]||p;return v&&(w=w.replace(/\$(\$|[\d]+)/g,function(x,A){return"$"==A?"$":v[A]})),w},_}();m.prototype.warn=E,m.prototype.reportError=function M(_,p){var v=new Error(_);v.data=p,"object"==typeof console&&console.error&&console.error(v),setTimeout(function(){throw v})},T.implement(m.prototype,re),ie.AppConfig=m}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(Q,ie,xe){xe.exports='.ace-tm .ace_gutter {\n  background: #f0f0f0;\n  color: #333;\n}\n\n.ace-tm .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-tm .ace_fold {\n    background-color: #6B72E6;\n}\n\n.ace-tm {\n  background-color: #FFFFFF;\n  color: black;\n}\n\n.ace-tm .ace_cursor {\n  color: black;\n}\n        \n.ace-tm .ace_invisible {\n  color: rgb(191, 191, 191);\n}\n\n.ace-tm .ace_storage,\n.ace-tm .ace_keyword {\n  color: blue;\n}\n\n.ace-tm .ace_constant {\n  color: rgb(197, 6, 11);\n}\n\n.ace-tm .ace_constant.ace_buildin {\n  color: rgb(88, 72, 246);\n}\n\n.ace-tm .ace_constant.ace_language {\n  color: rgb(88, 92, 246);\n}\n\n.ace-tm .ace_constant.ace_library {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_invalid {\n  background-color: rgba(255, 0, 0, 0.1);\n  color: red;\n}\n\n.ace-tm .ace_support.ace_function {\n  color: rgb(60, 76, 114);\n}\n\n.ace-tm .ace_support.ace_constant {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_support.ace_type,\n.ace-tm .ace_support.ace_class {\n  color: rgb(109, 121, 222);\n}\n\n.ace-tm .ace_keyword.ace_operator {\n  color: rgb(104, 118, 135);\n}\n\n.ace-tm .ace_string {\n  color: rgb(3, 106, 7);\n}\n\n.ace-tm .ace_comment {\n  color: rgb(76, 136, 107);\n}\n\n.ace-tm .ace_comment.ace_doc {\n  color: rgb(0, 102, 255);\n}\n\n.ace-tm .ace_comment.ace_doc.ace_tag {\n  color: rgb(128, 159, 191);\n}\n\n.ace-tm .ace_constant.ace_numeric {\n  color: rgb(0, 0, 205);\n}\n\n.ace-tm .ace_variable {\n  color: rgb(49, 132, 149);\n}\n\n.ace-tm .ace_xml-pe {\n  color: rgb(104, 104, 91);\n}\n\n.ace-tm .ace_entity.ace_name.ace_function {\n  color: #0000A2;\n}\n\n\n.ace-tm .ace_heading {\n  color: rgb(12, 7, 255);\n}\n\n.ace-tm .ace_list {\n  color:rgb(185, 6, 144);\n}\n\n.ace-tm .ace_meta.ace_tag {\n  color:rgb(0, 22, 142);\n}\n\n.ace-tm .ace_string.ace_regex {\n  color: rgb(255, 0, 0)\n}\n\n.ace-tm .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n.ace-tm.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n.ace-tm .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-tm .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-tm .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-tm .ace_marker-layer .ace_active-line {\n  background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-tm .ace_gutter-active-line {\n    background-color : #dcdcdc;\n}\n\n.ace-tm .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-tm .ace_indent-guide {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n}\n\n.ace-tm .ace_indent-guide-active {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;\n}\n'}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(Q,ie,xe){"use strict";ie.isDark=!1,ie.cssClass="ace-tm",ie.cssText=Q("./textmate-css"),ie.$id="ace/theme/textmate",Q("../lib/dom").importCssString(ie.cssText,ie.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(Q,ie,xe){var T=Q("./lib/lang"),re=Q("./lib/net"),B=Q("./lib/dom"),E=Q("./lib/app_config").AppConfig;xe.exports=ie=new E;var m,M={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};ie.get=function(p){if(!M.hasOwnProperty(p))throw new Error("Unknown config key: "+p);return M[p]},ie.set=function(p,v){if(M.hasOwnProperty(p))M[p]=v;else if(0==this.setDefaultValue("",p,v))throw new Error("Unknown config key: "+p);"useStrictCSP"==p&&B.useStrictCSP(v)},ie.all=function(){return T.copyObject(M)},ie.$modes={},ie.moduleUrl=function(p,v){if(M.$moduleUrls[p])return M.$moduleUrls[p];var w=p.split("/"),x="snippets"==(v=v||w[w.length-2]||"")?"/":"-",A=w[w.length-1];if("worker"==v&&"-"==x){var R=new RegExp("^"+v+"[\\-_]|[\\-_]"+v+"$","g");A=A.replace(R,"")}(!A||A==v)&&w.length>1&&(A=w[w.length-2]);var U=M[v+"Path"];return null==U?U=M.basePath:"/"==x&&(v=x=""),U&&"/"!=U.slice(-1)&&(U+="/"),U+v+x+A+this.get("suffix")},ie.setModuleUrl=function(p,v){return M.$moduleUrls[p]=v},ie.setLoader=function(p){m=p},ie.dynamicModules=Object.create(null),ie.$loading={},ie.$loaded={},ie.loadModule=function(p,v){var w,x;Array.isArray(p)&&(x=p[0],p=p[1]);var A=function(R){if(R&&!ie.$loading[p])return v&&v(R);if(ie.$loading[p]||(ie.$loading[p]=[]),ie.$loading[p].push(v),!(ie.$loading[p].length>1)){var U=function(){!function(p,v){"ace/theme/textmate"===p||"./theme/textmate"===p?v(0,Q("./theme/textmate")):m?m(p,v):console.error("loader is not configured")}(p,function(L,W){W&&(ie.$loaded[p]=W),ie._emit("load.module",{name:p,module:W});var H=ie.$loading[p];ie.$loading[p]=null,H.forEach(function(P){P&&P(W)})})};if(!ie.get("packaged"))return U();re.loadScript(ie.moduleUrl(p,x),U),_()}};if(ie.dynamicModules[p])ie.dynamicModules[p]().then(function(R){A(R.default?R.default:R)});else{try{w=this.$require(p)}catch{}A(w||ie.$loaded[p])}},ie.$require=function(p){if("function"==typeof xe.require)return xe.require(p)},ie.setModuleLoader=function(p,v){ie.dynamicModules[p]=v};var _=function(){!M.basePath&&!M.workerPath&&!M.modePath&&!M.themePath&&!Object.keys(M.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),_=function(){})};ie.version="1.23.4"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(Q,ie,xe){"use strict";Q("./lib/fixoldbrowsers");var T=Q("./config");T.setLoader(function(M,g){Q([M],function(m){g(null,m)})});var re=function(){return this||typeof window<"u"&&window}();function B(M){if(re&&re.document){T.set("packaged",M||Q.packaged||xe.packaged||re.define&&Me.amdD.packaged);var g={},m="",_=document.currentScript||document._currentScript,p=_&&_.ownerDocument||document;_&&_.src&&(m=_.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var v=p.getElementsByTagName("script"),w=0;w<v.length;w++){var x=v[w],A=x.src||x.getAttribute("src");if(A){for(var R=x.attributes,U=0,L=R.length;U<L;U++){var W=R[U];0===W.name.indexOf("data-ace-")&&(g[E(W.name.replace(/^data-ace-/,""))]=W.value)}var H=A.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);H&&(m=H[1])}}for(var P in m&&(g.base=g.base||m,g.packaged=!0),g.basePath=g.base,g.workerPath=g.workerPath||g.base,g.modePath=g.modePath||g.base,g.themePath=g.themePath||g.base,delete g.base,g)typeof g[P]<"u"&&T.set(P,g[P])}}function E(M){return M.replace(/-(.)/g,function(g,m){return m.toUpperCase()})}xe.exports=function(M){T.init=B,T.$require=Q,M.require=Q,M.define=Me.amdD},B(!0)}),ace.define("ace/range",["require","exports","module"],function(Q,ie,xe){"use strict";var re=function(){function B(E,M,g,m){this.start={row:E,column:M},this.end={row:g,column:m}}return B.prototype.isEqual=function(E){return this.start.row===E.start.row&&this.end.row===E.end.row&&this.start.column===E.start.column&&this.end.column===E.end.column},B.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},B.prototype.contains=function(E,M){return 0==this.compare(E,M)},B.prototype.compareRange=function(E){var M,g=E.end,m=E.start;return 1==(M=this.compare(g.row,g.column))?1==(M=this.compare(m.row,m.column))?2:0==M?1:0:-1==M?-2:-1==(M=this.compare(m.row,m.column))?-1:1==M?42:0},B.prototype.comparePoint=function(E){return this.compare(E.row,E.column)},B.prototype.containsRange=function(E){return 0==this.comparePoint(E.start)&&0==this.comparePoint(E.end)},B.prototype.intersects=function(E){var M=this.compareRange(E);return-1==M||0==M||1==M},B.prototype.isEnd=function(E,M){return this.end.row==E&&this.end.column==M},B.prototype.isStart=function(E,M){return this.start.row==E&&this.start.column==M},B.prototype.setStart=function(E,M){"object"==typeof E?(this.start.column=E.column,this.start.row=E.row):(this.start.row=E,this.start.column=M)},B.prototype.setEnd=function(E,M){"object"==typeof E?(this.end.column=E.column,this.end.row=E.row):(this.end.row=E,this.end.column=M)},B.prototype.inside=function(E,M){return 0==this.compare(E,M)&&!(this.isEnd(E,M)||this.isStart(E,M))},B.prototype.insideStart=function(E,M){return 0==this.compare(E,M)&&!this.isEnd(E,M)},B.prototype.insideEnd=function(E,M){return 0==this.compare(E,M)&&!this.isStart(E,M)},B.prototype.compare=function(E,M){return this.isMultiLine()||E!==this.start.row?E<this.start.row?-1:E>this.end.row?1:this.start.row===E?M>=this.start.column?0:-1:this.end.row===E?M<=this.end.column?0:1:0:M<this.start.column?-1:M>this.end.column?1:0},B.prototype.compareStart=function(E,M){return this.start.row==E&&this.start.column==M?-1:this.compare(E,M)},B.prototype.compareEnd=function(E,M){return this.end.row==E&&this.end.column==M?1:this.compare(E,M)},B.prototype.compareInside=function(E,M){return this.end.row==E&&this.end.column==M?1:this.start.row==E&&this.start.column==M?-1:this.compare(E,M)},B.prototype.clipRows=function(E,M){if(this.end.row>M)var g={row:M+1,column:0};else this.end.row<E&&(g={row:E,column:0});if(this.start.row>M)var m={row:M+1,column:0};else this.start.row<E&&(m={row:E,column:0});return B.fromPoints(m||this.start,g||this.end)},B.prototype.extend=function(E,M){var g=this.compare(E,M);if(0==g)return this;if(-1==g)var m={row:E,column:M};else var _={row:E,column:M};return B.fromPoints(m||this.start,_||this.end)},B.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},B.prototype.isMultiLine=function(){return this.start.row!==this.end.row},B.prototype.clone=function(){return B.fromPoints(this.start,this.end)},B.prototype.collapseRows=function(){return new B(this.start.row,0,0==this.end.column?Math.max(this.start.row,this.end.row-1):this.end.row,0)},B.prototype.toScreenRange=function(E){var M=E.documentToScreenPosition(this.start),g=E.documentToScreenPosition(this.end);return new B(M.row,M.column,g.row,g.column)},B.prototype.moveBy=function(E,M){this.start.row+=E,this.start.column+=M,this.end.row+=E,this.end.column+=M},B}();re.fromPoints=function(B,E){return new re(B.row,B.column,E.row,E.column)},re.comparePoints=function(B,E){return B.row-E.row||B.column-E.column},re.comparePoints=function(B,E){return B.row-E.row||B.column-E.column},ie.Range=re}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(Q,ie,xe){"use strict";var T=Q("./oop"),re=function(){var E,M,B={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(M in B.PRINTABLE_KEYS[173]="-",B.FUNCTION_KEYS)E=B.FUNCTION_KEYS[M].toLowerCase(),B[E]=parseInt(M,10);for(M in B.PRINTABLE_KEYS)E=B.PRINTABLE_KEYS[M].toLowerCase(),B[E]=parseInt(M,10);return T.mixin(B,B.MODIFIER_KEYS),T.mixin(B,B.PRINTABLE_KEYS),T.mixin(B,B.FUNCTION_KEYS),B.enter=B.return,B.escape=B.esc,B.del=B.delete,function(){for(var g=["cmd","ctrl","alt","shift"],m=Math.pow(2,g.length);m--;)B.KEY_MODS[m]=g.filter(function(_){return m&B.KEY_MODS[_]}).join("-")+"-"}(),B.KEY_MODS[0]="",B.KEY_MODS[-1]="input-",B}();T.mixin(ie,re),ie.default=ie,ie.keyCodeToString=function(B){var E=re[B];return"string"!=typeof E&&(E=String.fromCharCode(B)),E.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(Q,ie,xe){"use strict";var M,T=Q("./keys"),re=Q("./useragent"),B=null,E=0;function m(){return null==M&&function g(){M=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){M={passive:!1}}})}catch{}}(),M}function _(U,L,W){this.elem=U,this.type=L,this.callback=W}_.prototype.destroy=function(){v(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var p=ie.addListener=function(U,L,W,H){U.addEventListener(L,W,m()),H&&H.$toDestroy.push(new _(U,L,W))},v=ie.removeListener=function(U,L,W){U.removeEventListener(L,W,m())};ie.stopEvent=function(U){return ie.stopPropagation(U),ie.preventDefault(U),!1},ie.stopPropagation=function(U){U.stopPropagation&&U.stopPropagation()},ie.preventDefault=function(U){U.preventDefault&&U.preventDefault()},ie.getButton=function(U){return"dblclick"==U.type?0:"contextmenu"==U.type||re.isMac&&U.ctrlKey&&!U.altKey&&!U.shiftKey?2:U.button},ie.capture=function(U,L,W){var H=U&&U.ownerDocument||document;function P($){L&&L($),W&&W($),v(H,"mousemove",L),v(H,"mouseup",P),v(H,"dragstart",P)}return p(H,"mousemove",L),p(H,"mouseup",P),p(H,"dragstart",P),P},ie.addMouseWheelListener=function(U,L,W){p(U,"wheel",function(H){var $=H.deltaX||0,X=H.deltaY||0;switch(H.deltaMode){case H.DOM_DELTA_PIXEL:H.wheelX=.15*$,H.wheelY=.15*X;break;case H.DOM_DELTA_LINE:H.wheelX=15*$,H.wheelY=15*X;break;case H.DOM_DELTA_PAGE:H.wheelX=150*$,H.wheelY=150*X}L(H)},W)},ie.addMultiMouseDownListener=function(U,L,W,H,P){var X,V,N,$=0,te={2:"dblclick",3:"tripleclick",4:"quadclick"};function G(D){if(0!==ie.getButton(D)?$=0:D.detail>1?++$>4&&($=1):$=1,re.isIE){var Y=Math.abs(D.clientX-X)>5||Math.abs(D.clientY-V)>5;(!N||Y)&&($=1),N&&clearTimeout(N),N=setTimeout(function(){N=null},L[$-1]||600),1==$&&(X=D.clientX,V=D.clientY)}if(D._clicks=$,W[H]("mousedown",D),$>4)$=0;else if($>1)return W[H](te[$],D)}Array.isArray(U)||(U=[U]),U.forEach(function(D){p(D,"mousedown",G,P)})};var w=function(U){return 0|(U.ctrlKey?1:0)|(U.altKey?2:0)|(U.shiftKey?4:0)|(U.metaKey?8:0)};function x(U,L,W){var H=w(L);if(!re.isMac&&B){if(L.getModifierState&&(L.getModifierState("OS")||L.getModifierState("Win"))&&(H|=8),B.altGr){if(3==(3&H))return;B.altGr=0}if(18===W||17===W){var P="location"in L?L.location:L.keyLocation;17===W&&1===P?1==B[W]&&(E=L.timeStamp):18===W&&3===H&&2===P&&L.timeStamp-E<50&&(B.altGr=!0)}}if(W in T.MODIFIER_KEYS&&(W=-1),H||13!==W||3!==(P="location"in L?L.location:L.keyLocation)||(U(L,H,-W),!L.defaultPrevented)){if(re.isChromeOS&&8&H){if(U(L,H,W),L.defaultPrevented)return;H&=-9}return!!(H||W in T.FUNCTION_KEYS||W in T.PRINTABLE_KEYS)&&U(L,H,W)}}function A(){B=Object.create(null)}if(ie.getModifierString=function(U){return T.KEY_MODS[w(U)]},ie.addCommandKeyListener=function(U,L,W){if(re.isOldGecko||re.isOpera&&!("KeyboardEvent"in window)){var H=null;p(U,"keydown",function($){H=$.keyCode},W),p(U,"keypress",function($){return x(L,$,H)},W)}else{var P=null;p(U,"keydown",function($){B[$.keyCode]=(B[$.keyCode]||0)+1;var X=x(L,$,$.keyCode);return P=$.defaultPrevented,X},W),p(U,"keypress",function($){P&&($.ctrlKey||$.altKey||$.shiftKey||$.metaKey)&&(ie.stopEvent($),P=null)},W),p(U,"keyup",function($){B[$.keyCode]=null},W),B||(A(),p(window,"focus",A))}},"object"==typeof window&&window.postMessage&&!re.isOldIE){var R=1;ie.nextTick=function(U,L){L=L||window;var W="zero-timeout-message-"+R++,H=function(P){P.data==W&&(ie.stopPropagation(P),v(L,"message",H),U())};p(L,"message",H),L.postMessage(W,"*")}}ie.$idleBlocked=!1,ie.onIdle=function(U,L){return setTimeout(function W(){ie.$idleBlocked?setTimeout(W,100):U()},L)},ie.$idleBlockId=null,ie.blockIdle=function(U){ie.$idleBlockId&&clearTimeout(ie.$idleBlockId),ie.$idleBlocked=!0,ie.$idleBlockId=setTimeout(function(){ie.$idleBlocked=!1},U||100)},ie.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),ie.nextFrame=ie.nextFrame?ie.nextFrame.bind(window):function(U){setTimeout(U,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(Q,ie,xe){"use strict";var T;xe.exports={lineMode:!1,pasteCancelled:function(){return!!(T&&T>Date.now()-50)||(T=!1)},cancel:function(){T=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(Q,ie,xe){"use strict";var T=Q("../lib/event"),re=Q("../config").nls,B=Q("../lib/useragent"),E=Q("../lib/dom"),M=Q("../lib/lang"),g=Q("../clipboard"),m=B.isChrome<18,_=B.isIE,p=B.isChrome>63,v=400,w=Q("../lib/keys"),x=w.KEY_MODS,A=B.isIOS,R=A?/\s/:/\n/,U=B.isMobile;ie.TextInput=function(W,H){var P=E.createElement("textarea");P.className="ace_text-input",P.setAttribute("wrap","off"),P.setAttribute("autocorrect","off"),P.setAttribute("autocapitalize","off"),P.setAttribute("spellcheck",!1),P.style.opacity="0",W.insertBefore(P,W.firstChild);var $=!1,X=!1,V=!1,N=!1,te="";U||(P.style.fontSize="1px");var G=!1,D=!1,Y="",ee=0,fe=0,_e=0;try{var we=document.activeElement===P}catch{}this.setAriaOptions=function(Je){Je.activeDescendant?(P.setAttribute("aria-haspopup","true"),P.setAttribute("aria-autocomplete",Je.inline?"both":"list"),P.setAttribute("aria-activedescendant",Je.activeDescendant)):(P.setAttribute("aria-haspopup","false"),P.setAttribute("aria-autocomplete","both"),P.removeAttribute("aria-activedescendant")),Je.role&&P.setAttribute("role",Je.role)},this.setAriaLabel=function(){if(H.session&&H.renderer.enableKeyboardAccessibility){var Je=H.session.selection.cursor.row;P.setAttribute("aria-roledescription",re("editor")),P.setAttribute("aria-label",re("Cursor at row $0",[Je+1]))}else P.removeAttribute("aria-roledescription"),P.removeAttribute("aria-label")},this.setAriaOptions({role:"textbox"}),this.setAriaLabel(),T.addListener(P,"blur",function(Je){D||(H.onBlur(Je),we=!1)},H),T.addListener(P,"focus",function(Je){if(!D){if(we=!0,B.isEdge)try{if(!document.hasFocus())return}catch{}H.onFocus(Je),B.isEdge?setTimeout(ke):ke()}},H),this.$focusScroll=!1,this.focus=function(){if(this.setAriaLabel(),te||p||"browser"==this.$focusScroll)return P.focus({preventScroll:!0});var Je=P.style.top;P.style.position="fixed",P.style.top="0px";try{var Tt=0!=P.getBoundingClientRect().top}catch{return}var pt=[];if(Tt)for(var Qt=P.parentElement;Qt&&1==Qt.nodeType;)pt.push(Qt),Qt.setAttribute("ace_nocontext",!0),Qt=!Qt.parentElement&&Qt.getRootNode?Qt.getRootNode().host:Qt.parentElement;P.focus({preventScroll:!0}),Tt&&pt.forEach(function(ni){ni.removeAttribute("ace_nocontext")}),setTimeout(function(){P.style.position="","0px"==P.style.top&&(P.style.top=Je)},0)},this.blur=function(){P.blur()},this.isFocused=function(){return we},H.on("beforeEndOperation",function(){var Je=H.curOp,Tt=Je&&Je.command&&Je.command.name;"insertstring"!=Tt&&(V&&Tt&&(Je.docChanged||Je.selectionChanged)&&(Y=P.value="",dn()),ke())});var ke=A?function(Je){if(we&&(!$||Je)&&!N){Je||(Je="");var Tt="\n ab"+Je+"cde fg\n";Tt!=P.value&&(P.value=Y=Tt);var Qt=4+(Je.length||(H.selection.isEmpty()?0:1));(4!=ee||fe!=Qt)&&P.setSelectionRange(4,Qt),ee=4,fe=Qt}}:function(){if(!V&&!N&&(we||Le)){V=!0;var Je=0,Tt=0,pt="";if(H.session){var Qt=H.selection,ni=Qt.getRange(),xt=Qt.cursor.row;if(Je=ni.start.column,Tt=ni.end.column,pt=H.session.getLine(xt),ni.start.row!=xt){var Xe=H.session.getLine(xt-1);Je=ni.start.row<xt-1?0:Je,Tt+=Xe.length+1,pt=Xe+"\n"+pt}else if(ni.end.row!=xt){var yn=H.session.getLine(xt+1);Tt=ni.end.row>xt+1?yn.length:Tt,Tt+=pt.length+1,pt=pt+"\n"+yn}else U&&xt>0&&(pt="\n"+pt,Tt+=1,Je+=1);pt.length>v&&(Je<v&&Tt<v?pt=pt.slice(0,v):(pt="\n",Je==Tt?Je=Tt=0:(Je=0,Tt=1)))}var Fe=pt+"\n\n";if(Fe!=Y&&(P.value=Y=Fe,ee=fe=Fe.length),Le&&(ee=P.selectionStart,fe=P.selectionEnd),fe!=Tt||ee!=Je||P.selectionEnd!=fe)try{P.setSelectionRange(Je,Tt),ee=Je,fe=Tt}catch{}V=!1}};this.resetSelection=ke,we&&H.onFocus();var Te=null;this.setInputHandler=function(Je){Te=Je},this.getInputHandler=function(){return Te};var Le=!1,et=function(Je,Tt){if(Le&&(Le=!1),X)return ke(),Je&&H.onPaste(Je),X=!1,"";for(var pt=P.selectionStart,Qt=P.selectionEnd,ni=ee,xt=Y.length-fe,Xe=Je,yn=Je.length-pt,Fe=Je.length-Qt,Ke=0;ni>0&&Y[Ke]==Je[Ke];)Ke++,ni--;for(Xe=Xe.slice(Ke),Ke=1;xt>0&&Y.length-Ke>ee-1&&Y[Y.length-Ke]==Je[Je.length-Ke];)Ke++,xt--;yn-=Ke-1,Fe-=Ke-1;var Qn=Xe.length-Ke+1;if(Qn<0&&(ni=-Qn,Qn=0),Xe=Xe.slice(0,Qn),!(Tt||Xe||yn||ni||xt||Fe))return"";N=!0;var Wr=!1;return B.isAndroid&&". "==Xe&&(Xe="  ",Wr=!0),Xe&&!ni&&!xt&&!yn&&!Fe||G?H.onTextInput(Xe):H.onTextInput(Xe,{extendLeft:ni,extendRight:xt,restoreStart:yn,restoreEnd:Fe}),N=!1,Y=Je,ee=pt,fe=Qt,_e=Fe,Wr?"\n":Xe},Bt=function(Je){if(V)return Vt();if(Je&&Je.inputType){if("historyUndo"==Je.inputType)return H.execCommand("undo");if("historyRedo"==Je.inputType)return H.execCommand("redo")}var Tt=P.value,pt=et(Tt,!0);(Tt.length>500||R.test(pt)||U&&ee<1&&ee==fe)&&ke()},Dt=function(Je,Tt,pt){var Qt=Je.clipboardData||window.clipboardData;if(Qt&&!m){var ni=_||pt?"Text":"text/plain";try{return Tt?!1!==Qt.setData(ni,Tt):Qt.getData(ni)}catch(xt){if(!pt)return Dt(xt,Tt,!0)}}},Lt=function(Je,Tt){var pt=H.getCopyText();if(!pt)return T.preventDefault(Je);Dt(Je,pt)?(A&&(ke(pt),$=pt,setTimeout(function(){$=!1},10)),Tt?H.onCut():H.onCopy(),T.preventDefault(Je)):($=!0,P.value=pt,P.select(),setTimeout(function(){$=!1,ke(),Tt?H.onCut():H.onCopy()}))},He=function(Je){Lt(Je,!0)},lt=function(Je){Lt(Je,!1)},Pt=function(Je){var Tt=Dt(Je);g.pasteCancelled()||("string"==typeof Tt?(Tt&&H.onPaste(Tt,Je),B.isIE&&setTimeout(ke),T.preventDefault(Je)):(P.value="",X=!0))};T.addCommandKeyListener(P,H.onCommandKey.bind(H),H),T.addListener(P,"select",function(Je){V||($?$=!1:function(Je){return 0===Je.selectionStart&&Je.selectionEnd>=Y.length&&Je.value===Y&&Y&&Je.selectionEnd!==fe}(P)?(H.selectAll(),ke()):U&&P.selectionStart!=ee&&ke())},H),T.addListener(P,"input",Bt,H),T.addListener(P,"cut",He,H),T.addListener(P,"copy",lt,H),T.addListener(P,"paste",Pt,H),(!("oncut"in P)||!("oncopy"in P)||!("onpaste"in P))&&T.addListener(W,"keydown",function(Je){if((!B.isMac||Je.metaKey)&&Je.ctrlKey)switch(Je.keyCode){case 67:lt(Je);break;case 86:Pt(Je);break;case 88:He(Je)}},H);var Vt=function(){if(V&&H.onCompositionUpdate&&!H.$readOnly){if(G)return Zt();V.useTextareaForIME?H.onCompositionUpdate(P.value):(et(P.value),V.markerRange&&(V.context&&(V.markerRange.start.column=V.selectionStart=V.context.compositionStartOffset),V.markerRange.end.column=V.markerRange.start.column+fe-V.selectionStart+_e))}},dn=function(Je){!H.onCompositionEnd||H.$readOnly||(V=!1,H.onCompositionEnd(),H.off("mousedown",Zt),Je&&Bt())};function Zt(){D=!0,P.blur(),P.focus(),D=!1}var Di,dt=M.delayedCall(Vt,50).schedule.bind(null,null);function Gi(){clearTimeout(Di),Di=setTimeout(function(){te&&(P.style.cssText=te,te=""),H.renderer.$isMousePressed=!1,H.renderer.$keepTextAreaAtCursor&&H.renderer.$moveTextAreaToCursor()},0)}T.addListener(P,"compositionstart",function(Je){if(!V&&H.onCompositionStart&&!H.$readOnly&&(V={},!G)){Je.data&&(V.useTextareaForIME=!1),setTimeout(Vt,0),H._signal("compositionStart"),H.on("mousedown",Zt);var Tt=H.getSelectionRange();Tt.end.row=Tt.start.row,Tt.end.column=Tt.start.column,V.markerRange=Tt,V.selectionStart=ee,H.onCompositionStart(V),V.useTextareaForIME?(Y=P.value="",ee=0,fe=0):(P.msGetInputContext&&(V.context=P.msGetInputContext()),P.getInputContext&&(V.context=P.getInputContext()))}},H),T.addListener(P,"compositionupdate",Vt,H),T.addListener(P,"keyup",function Vn(Je){27==Je.keyCode&&P.value.length<P.selectionStart&&(V||(Y=P.value),ee=fe=-1,ke()),dt()},H),T.addListener(P,"keydown",dt,H),T.addListener(P,"compositionend",dn,H),this.getElement=function(){return P},this.setCommandMode=function(Je){G=Je,P.readOnly=!1},this.setReadOnly=function(Je){G||(P.readOnly=Je)},this.setCopyWithEmptySelection=function(Je){},this.onContextMenu=function(Je){Le=!0,ke(),H._emit("nativecontextmenu",{target:H,domEvent:Je}),this.moveToMouse(Je,!0)},this.moveToMouse=function(Je,Tt){te||(te=P.style.cssText),P.style.cssText=(Tt?"z-index:100000;":"")+(B.isIE?"opacity:0.1;":"")+"text-indent: -"+(ee+fe)*H.renderer.characterWidth*.5+"px;";var pt=H.container.getBoundingClientRect(),Qt=E.computedStyle(H.container),ni=pt.top+(parseInt(Qt.borderTopWidth)||0),xt=pt.left+(parseInt(pt.borderLeftWidth)||0),Xe=pt.bottom-ni-P.clientHeight-2,yn=function(Fe){E.translate(P,Fe.clientX-xt-2,Math.min(Fe.clientY-ni-2,Xe))};yn(Je),"mousedown"==Je.type&&(H.renderer.$isMousePressed=!0,clearTimeout(Di),B.isWin&&T.capture(H.container,yn,Gi))},this.onContextMenuClose=Gi;var hr=function(Je){H.textInput.onContextMenu(Je),Gi()};T.addListener(P,"mouseup",hr,H),T.addListener(P,"mousedown",function(Je){Je.preventDefault(),Gi()},H),T.addListener(H.renderer.scroller,"contextmenu",hr,H),T.addListener(P,"contextmenu",hr,H),A&&function Yt(Je,Tt,pt){var Qt=null,ni=!1;pt.addEventListener("keydown",function(Xe){Qt&&clearTimeout(Qt),ni=!0},!0),pt.addEventListener("keyup",function(Xe){Qt=setTimeout(function(){ni=!1},100)},!0);var xt=function(Xe){if(document.activeElement===pt&&!(ni||V||Tt.$mouseHandler.isMousePressed)&&!$){var yn=pt.selectionStart,Fe=pt.selectionEnd,Ke=null,Qn=0;if(0==yn?Ke=w.up:1==yn?Ke=w.home:Fe>fe&&"\n"==Y[Fe]?Ke=w.end:yn<ee&&" "==Y[yn-1]?(Ke=w.left,Qn=x.option):yn<ee||yn==ee&&fe!=ee&&yn==Fe?Ke=w.left:Fe>fe&&Y.slice(0,Fe).split("\n").length>2?Ke=w.down:Fe>fe&&" "==Y[Fe-1]?(Ke=w.right,Qn=x.option):(Fe>fe||Fe==fe&&fe!=ee&&yn==Fe)&&(Ke=w.right),yn!==Fe&&(Qn|=x.shift),Ke){if(!Tt.onCommandKey({},Qn,Ke)&&Tt.commands){Ke=w.keyCodeToString(Ke);var pr=Tt.commands.findKeyCommand(Qn,Ke);pr&&Tt.execCommand(pr)}ee=yn,fe=Fe,ke("")}}};document.addEventListener("selectionchange",xt),Tt.on("destroy",function(){document.removeEventListener("selectionchange",xt)})}(0,H,P),this.destroy=function(){P.parentElement&&P.parentElement.removeChild(P)}},ie.$setUserAgentForTests=function(W,H){U=W,A=H}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(Q,ie,xe){"use strict";var T=Q("../lib/useragent"),E=function(){function m(_){_.$clickSelection=null;var p=_.editor;p.setDefaultHandler("mousedown",this.onMouseDown.bind(_)),p.setDefaultHandler("dblclick",this.onDoubleClick.bind(_)),p.setDefaultHandler("tripleclick",this.onTripleClick.bind(_)),p.setDefaultHandler("quadclick",this.onQuadClick.bind(_)),p.setDefaultHandler("mousewheel",this.onMouseWheel.bind(_)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(w){_[w]=this[w]},this),_.selectByLines=this.extendSelectionBy.bind(_,"getLineRange"),_.selectByWords=this.extendSelectionBy.bind(_,"getWordRange")}return m.prototype.onMouseDown=function(_){var p=_.inSelection(),v=_.getDocumentPosition();this.mousedownEvent=_;var w=this.editor,x=_.getButton();return 0!==x?((w.getSelectionRange().isEmpty()||1==x)&&w.selection.moveToPosition(v),void(2==x&&(w.textInput.onContextMenu(_.domEvent),T.isMozilla||_.preventDefault()))):(this.mousedownEvent.time=Date.now(),!p||w.isFocused()||(w.focus(),!this.$focusTimeout||this.$clickSelection||w.inMultiSelectMode)?(this.captureMouse(_),this.startSelect(v,_.domEvent._clicks>1),_.preventDefault()):(this.setState("focusWait"),void this.captureMouse(_)))},m.prototype.startSelect=function(_,p){_=_||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var v=this.editor;!this.mousedownEvent||(this.mousedownEvent.getShiftKey()?v.selection.selectToPosition(_):p||v.selection.moveToPosition(_),p||this.select(),v.setStyle("ace_selecting"),this.setState("select"))},m.prototype.select=function(){var _,p=this.editor,v=p.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var w=this.$clickSelection.comparePoint(v);if(-1==w)_=this.$clickSelection.end;else if(1==w)_=this.$clickSelection.start;else{var x=g(this.$clickSelection,v);v=x.cursor,_=x.anchor}p.selection.setSelectionAnchor(_.row,_.column)}p.selection.selectToPosition(v),p.renderer.scrollCursorIntoView()},m.prototype.extendSelectionBy=function(_){var p,v=this.editor,w=v.renderer.screenToTextCoordinates(this.x,this.y),x=v.selection[_](w.row,w.column);if(this.$clickSelection){var A=this.$clickSelection.comparePoint(x.start),R=this.$clickSelection.comparePoint(x.end);if(-1==A&&R<=0)p=this.$clickSelection.end,(x.end.row!=w.row||x.end.column!=w.column)&&(w=x.start);else if(1==R&&A>=0)p=this.$clickSelection.start,(x.start.row!=w.row||x.start.column!=w.column)&&(w=x.end);else if(-1==A&&1==R)w=x.end,p=x.start;else{var U=g(this.$clickSelection,w);w=U.cursor,p=U.anchor}v.selection.setSelectionAnchor(p.row,p.column)}v.selection.selectToPosition(w),v.renderer.scrollCursorIntoView()},m.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},m.prototype.focusWait=function(){var _=function M(m,_,p,v){return Math.sqrt(Math.pow(p-m,2)+Math.pow(v-_,2))}(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),p=Date.now();(_>0||p-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},m.prototype.onDoubleClick=function(_){var p=_.getDocumentPosition(),v=this.editor,x=v.session.getBracketRange(p);x?(x.isEmpty()&&(x.start.column--,x.end.column++),this.setState("select")):(x=v.selection.getWordRange(p.row,p.column),this.setState("selectByWords")),this.$clickSelection=x,this.select()},m.prototype.onTripleClick=function(_){var p=_.getDocumentPosition(),v=this.editor;this.setState("selectByLines");var w=v.getSelectionRange();w.isMultiLine()&&w.contains(p.row,p.column)?(this.$clickSelection=v.selection.getLineRange(w.start.row),this.$clickSelection.end=v.selection.getLineRange(w.end.row).end):this.$clickSelection=v.selection.getLineRange(p.row),this.select()},m.prototype.onQuadClick=function(_){var p=this.editor;p.selectAll(),this.$clickSelection=p.getSelectionRange(),this.setState("selectAll")},m.prototype.onMouseWheel=function(_){if(!_.getAccelKey()){_.getShiftKey()&&_.wheelY&&!_.wheelX&&(_.wheelX=_.wheelY,_.wheelY=0);var p=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var v=this.$lastScroll,w=_.domEvent.timeStamp,x=w-v.t,A=x?_.wheelX/x:v.vx,R=x?_.wheelY/x:v.vy;x<550&&(A=(A+v.vx)/2,R=(R+v.vy)/2);var U=Math.abs(A/R),L=!1;if(U>=1&&p.renderer.isScrollableBy(_.wheelX*_.speed,0)&&(L=!0),U<=1&&p.renderer.isScrollableBy(0,_.wheelY*_.speed)&&(L=!0),L?v.allowed=w:w-v.allowed<550&&(Math.abs(A)<=1.5*Math.abs(v.vx)&&Math.abs(R)<=1.5*Math.abs(v.vy)?(L=!0,v.allowed=w):v.allowed=0),v.t=w,v.vx=A,v.vy=R,L)return p.renderer.scrollBy(_.wheelX*_.speed,_.wheelY*_.speed),_.stop()}},m}();function g(m,_){if(m.start.row==m.end.row)var p=2*_.column-m.start.column-m.end.column;else if(m.start.row!=m.end.row-1||m.start.column||m.end.column)p=2*_.row-m.start.row-m.end.row;else p=_.column-4;return p<0?{cursor:m.start,anchor:m.end}:{cursor:m.end,anchor:m.start}}E.prototype.selectEnd=E.prototype.selectByLinesEnd,E.prototype.selectAllEnd=E.prototype.selectByLinesEnd,E.prototype.selectByWordsEnd=E.prototype.selectByLinesEnd,ie.DefaultHandlers=E}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/range"],function(Q,ie,xe){"use strict";var v,T=this&&this.__extends||(v=function(w,x){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(A[U]=R[U])})(w,x)},function(w,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function A(){this.constructor=w}v(w,x),w.prototype=null===x?Object.create(x):(A.prototype=x.prototype,new A)}),re=this&&this.__values||function(v){var w="function"==typeof Symbol&&Symbol.iterator,x=w&&v[w],A=0;if(x)return x.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&A>=v.length&&(v=void 0),{value:v&&v[A++],done:!v}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},B=Q("./lib/dom"),E=Q("./range").Range,M="ace_tooltip",g=function(){function v(w){this.isOpen=!1,this.$element=null,this.$parentNode=w}return v.prototype.$init=function(){return this.$element=B.createElement("div"),this.$element.className=M,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},v.prototype.getElement=function(){return this.$element||this.$init()},v.prototype.setText=function(w){this.getElement().textContent=w},v.prototype.setHtml=function(w){this.getElement().innerHTML=w},v.prototype.setPosition=function(w,x){this.getElement().style.left=w+"px",this.getElement().style.top=x+"px"},v.prototype.setClassName=function(w){B.addCssClass(this.getElement(),w)},v.prototype.setTheme=function(w){this.$element.className=M+" "+(w.isDark?"ace_dark ":"")+(w.cssClass||"")},v.prototype.show=function(w,x,A){null!=w&&this.setText(w),null!=x&&null!=A&&this.setPosition(x,A),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},v.prototype.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=M,this.isOpen=!1)},v.prototype.getHeight=function(){return this.getElement().offsetHeight},v.prototype.getWidth=function(){return this.getElement().offsetWidth},v.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},v}(),m=function(){function v(){this.popups=[]}return v.prototype.addPopup=function(w){this.popups.push(w),this.updatePopups()},v.prototype.removePopup=function(w){var x=this.popups.indexOf(w);-1!==x&&(this.popups.splice(x,1),this.updatePopups())},v.prototype.updatePopups=function(){var w,x,A,R;this.popups.sort(function(N,te){return te.priority-N.priority});var U=[];try{for(var L=re(this.popups),W=L.next();!W.done;W=L.next()){var H=W.value,P=!0;try{for(var $=(A=void 0,re(U)),X=$.next();!X.done;X=$.next())if(this.doPopupsOverlap(X.value,H)){P=!1;break}}catch(N){A={error:N}}finally{try{X&&!X.done&&(R=$.return)&&R.call($)}finally{if(A)throw A.error}}P?U.push(H):H.hide()}}catch(N){w={error:N}}finally{try{W&&!W.done&&(x=L.return)&&x.call(L)}finally{if(w)throw w.error}}},v.prototype.doPopupsOverlap=function(w,x){var A=w.getElement().getBoundingClientRect(),R=x.getElement().getBoundingClientRect();return A.left<R.right&&A.right>R.left&&A.top<R.bottom&&A.bottom>R.top},v}(),_=new m;ie.popupManager=_,ie.Tooltip=g;var p=function(v){function w(x){void 0===x&&(x=document.body);var A=v.call(this,x)||this;A.timeout=void 0,A.lastT=0,A.idleTime=350,A.lastEvent=void 0,A.onMouseOut=A.onMouseOut.bind(A),A.onMouseMove=A.onMouseMove.bind(A),A.waitForHover=A.waitForHover.bind(A),A.hide=A.hide.bind(A);var R=A.getElement();return R.style.whiteSpace="pre-wrap",R.style.pointerEvents="auto",R.addEventListener("mouseout",A.onMouseOut),R.tabIndex=-1,R.addEventListener("blur",function(){R.contains(document.activeElement)||this.hide()}.bind(A)),A}return T(w,v),w.prototype.addToEditor=function(x){x.on("mousemove",this.onMouseMove),x.on("mousedown",this.hide),x.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},w.prototype.removeFromEditor=function(x){x.off("mousemove",this.onMouseMove),x.off("mousedown",this.hide),x.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},w.prototype.onMouseMove=function(x,A){this.lastEvent=x,this.lastT=Date.now();var R=A.$mouseHandler.isMousePressed;if(this.isOpen){var U=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(U.row,U.column)||R||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||R||(this.lastEvent=x,this.timeout=setTimeout(this.waitForHover,this.idleTime))},w.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var x=Date.now()-this.lastT;this.idleTime-x>10?this.timeout=setTimeout(this.waitForHover,this.idleTime-x):(this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor))},w.prototype.isOutsideOfText=function(x){var A=x.editor,R=x.getDocumentPosition(),U=A.session.getLine(R.row);if(R.column==U.length){var L=A.renderer.pixelToScreenCoordinates(x.clientX,x.clientY),W=A.session.documentToScreenPosition(R.row,R.column);if(W.column!=L.column||W.row!=L.row)return!0}return!1},w.prototype.setDataProvider=function(x){this.$gatherData=x},w.prototype.showForRange=function(x,A,R,U){if(!(U&&U!=this.lastEvent||this.isOpen&&document.activeElement==this.getElement())){var L=x.renderer;this.isOpen||(_.addPopup(this),this.$registerCloseEvents(),this.setTheme(L.theme)),this.isOpen=!0,this.addMarker(A,x.session),this.range=E.fromPoints(A.start,A.end);var W=this.getElement();W.innerHTML="",W.appendChild(R),W.style.display="block";var H=L.textToScreenCoordinates(A.start.row,A.start.column),P=x.getCursorPosition(),$=W.clientHeight,X=L.scroller.getBoundingClientRect(),V=!0;this.row>P.row?V=!0:this.row<P.row&&(V=!1),H.pageY-$+L.lineHeight<X.top?V=!0:H.pageY+$>X.bottom&&(V=!1),V?H.pageY+=L.lineHeight:H.pageY-=$,W.style.maxWidth=X.width-(H.pageX-X.left)+"px",this.setPosition(H.pageX,H.pageY)}},w.prototype.addMarker=function(x,A){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=A,this.marker=A&&A.addMarker(x,"ace_highlight-marker","text")},w.prototype.hide=function(x){!x&&document.activeElement==this.getElement()||x&&x.target&&("keydown"!=x.type||x.ctrlKey||x.metaKey)&&this.$element.contains(x.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,_.removePopup(this)))},w.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("mousewheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},w.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("mousewheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},w.prototype.onMouseOut=function(x){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!x.relatedTarget||x.relatedTarget==this.getElement()||x&&x.currentTarget.contains(x.relatedTarget)||x.relatedTarget.classList.contains("ace_content")||this.hide())},w}(g);ie.HoverTooltip=p}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(Q,ie,xe){"use strict";var p,T=this&&this.__extends||(p=function(v,w){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var R in A)Object.prototype.hasOwnProperty.call(A,R)&&(x[R]=A[R])})(v,w)},function(v,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function x(){this.constructor=v}p(v,w),v.prototype=null===w?Object.create(w):(x.prototype=w.prototype,new x)}),re=this&&this.__values||function(p){var v="function"==typeof Symbol&&Symbol.iterator,w=v&&p[v],x=0;if(w)return w.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&x>=p.length&&(p=void 0),{value:p&&p[x++],done:!p}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},B=Q("../lib/dom"),E=Q("../lib/event"),M=Q("../tooltip").Tooltip,g=Q("../config").nls;ie.GutterHandler=function m(p){var A,R,v=p.editor,w=v.renderer.$gutterLayer,x=new _(v);function L(){A&&(A=clearTimeout(A)),x.isOpen&&(x.hideTooltip(),v.off("mousewheel",L))}function W(H){x.setPosition(H.x,H.y)}p.editor.setDefaultHandler("guttermousedown",function(H){if(v.isFocused()&&0==H.getButton()&&"foldWidgets"!=w.getRegion(H)){var $=H.getDocumentPosition().row,X=v.session.selection;if(H.getShiftKey())X.selectTo($,0);else{if(2==H.domEvent.detail)return v.selectAll(),H.preventDefault();p.$clickSelection=v.selection.getLineRange($)}return p.setState("selectByLines"),p.captureMouse(H),H.preventDefault()}}),p.editor.setDefaultHandler("guttermousemove",function(H){if(B.hasCssClass(H.domEvent.target||H.domEvent.srcElement,"ace_fold-widget"))return L();x.isOpen&&p.$tooltipFollowsMouse&&W(H),R=H,!A&&(A=setTimeout(function(){A=null,R&&!p.isMousePressed?function U(){var H=R.getDocumentPosition().row;if(H==v.session.getLength()){var $=v.renderer.pixelToScreenCoordinates(0,R.y).row,X=R.$pos;if($>v.session.documentToScreenRow(X.row,X.column))return L()}if(x.showTooltip(H),x.isOpen)if(v.on("mousewheel",L),p.$tooltipFollowsMouse)W(R);else{var V=R.getGutterRow(),N=w.$lines.get(V);if(N){var G=N.element.querySelector(".ace_gutter_annotation").getBoundingClientRect(),D=x.getElement().style;D.left=G.right+"px",D.top=G.bottom+"px"}else W(R)}}():L()},50))}),E.addListener(v.renderer.$gutter,"mouseout",function(H){R=null,x.isOpen&&!A&&(A=setTimeout(function(){A=null,L()},50))},v),v.on("changeSession",L),v.on("input",L)};var _=function(p){function v(w){var x=p.call(this,w.container)||this;return x.editor=w,x}return T(v,p),v.prototype.setPosition=function(w,x){var A=window.innerWidth||document.documentElement.clientWidth,R=window.innerHeight||document.documentElement.clientHeight,U=this.getWidth(),L=this.getHeight();(w+=15)+U>A&&(w-=w+U-A),(x+=15)+L>R&&(x-=20+L),M.prototype.setPosition.call(this,w,x)},Object.defineProperty(v,"annotationLabels",{get:function(){return{error:{singular:g("error"),plural:g("errors")},warning:{singular:g("warning"),plural:g("warnings")},info:{singular:g("information message"),plural:g("information messages")}}},enumerable:!1,configurable:!0}),v.prototype.showTooltip=function(w){var R,x=this.editor.renderer.$gutterLayer,A=x.$annotations[w];R=A?{text:Array.from(A.text),type:Array.from(A.type)}:{text:[],type:[]};var U=x.session.getFoldLine(w);if(U&&x.$showFoldedAnnotations){for(var W,L={error:[],warning:[],info:[]},H=w+1;H<=U.end.row;H++)if(x.$annotations[H])for(var P=0;P<x.$annotations[H].text.length;P++){var $=x.$annotations[H].type[P];L[$].push(x.$annotations[H].text[P]),"error"!==$?"warning"!==$||(W="warning_fold"):W="error_fold"}if("error_fold"===W||"warning_fold"===W){var X="".concat(v.annotationsToSummaryString(L)," in folded code.");R.text.push(X),R.type.push(W)}}if(0===R.text.length)return this.hide();var V={error:[],warning:[],info:[]},N=x.$useSvgGutterIcons?"ace_icon_svg":"ace_icon";for(H=0;H<R.text.length;H++){var te="<span class='ace_".concat(R.type[H]," ").concat(N,"' aria-label='").concat(v.annotationLabels[R.type[H].replace("_fold","")].singular,"' role=img> </span> ").concat(R.text[H]);V[R.type[H].replace("_fold","")].push(te)}var G=[].concat(V.error,V.warning,V.info).join("<br>");this.setHtml(G),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},v.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},v.annotationsToSummaryString=function(w){var x,A,R=[];try{for(var L=re(["error","warning","info"]),W=L.next();!W.done;W=L.next()){var H=W.value;if(w[H].length){var P=1===w[H].length?v.annotationLabels[H].singular:v.annotationLabels[H].plural;R.push("".concat(w[H].length," ").concat(P))}}}catch($){x={error:$}}finally{try{W&&!W.done&&(A=L.return)&&A.call(L)}finally{if(x)throw x.error}}return R.join(", ")},v}(M);ie.GutterTooltip=_}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(Q,ie,xe){"use strict";var T=Q("../lib/event"),re=Q("../lib/useragent"),B=function(){function E(M,g){this.domEvent=M,this.editor=g,this.x=this.clientX=M.clientX,this.y=this.clientY=M.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return E.prototype.stopPropagation=function(){T.stopPropagation(this.domEvent),this.propagationStopped=!0},E.prototype.preventDefault=function(){T.preventDefault(this.domEvent),this.defaultPrevented=!0},E.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},E.prototype.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},E.prototype.getGutterRow=function(){var M=this.getDocumentPosition().row;return this.editor.session.documentToScreenRow(M,0)-this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0)},E.prototype.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var g=this.editor.getSelectionRange();if(g.isEmpty())this.$inSelection=!1;else{var m=this.getDocumentPosition();this.$inSelection=g.contains(m.row,m.column)}return this.$inSelection},E.prototype.getButton=function(){return T.getButton(this.domEvent)},E.prototype.getShiftKey=function(){return this.domEvent.shiftKey},E.prototype.getAccelKey=function(){return re.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},E}();ie.MouseEvent=B}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(Q,ie,xe){"use strict";var T=Q("../lib/dom"),re=Q("../lib/event"),B=Q("../lib/useragent");function m(p){var v=p.editor,w=T.createElement("div");w.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",w.textContent="\xa0",["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(Te){p[Te]=this[Te]},this),v.on("mousedown",this.onMouseDown.bind(p));var R,U,L,W,H,P,X,V,N,te,G,A=v.container,$=0;function ee(){var Te=P;(function D(Te,Le){var et=Date.now();te&&Le&&Te.row==Le.row&&Le&&Te.column==Le.column?_(G.x,G.y,U,L)>5?te=null:et-te>=200&&(v.renderer.scrollCursorIntoView(),te=null):(v.moveCursorToPosition(Te),te=et,G={x:U,y:L})})(P=v.renderer.screenToTextCoordinates(U,L),Te),function Y(Te,Le){var et=Date.now(),Bt=v.renderer.layerConfig.lineHeight,Dt=v.renderer.layerConfig.characterWidth,Lt=v.renderer.scroller.getBoundingClientRect(),He={x:{left:U-Lt.left,right:Lt.right-U},y:{top:L-Lt.top,bottom:Lt.bottom-L}},lt=Math.min(He.x.left,He.x.right),Pt=Math.min(He.y.top,He.y.bottom),ct={row:Te.row,column:Te.column};lt/Dt<=2&&(ct.column+=He.x.left<He.x.right?-3:2),Pt/Bt<=1&&(ct.row+=He.y.top<He.y.bottom?-1:1),Te.row!=ct.row||Te.column!=ct.column&&Le&&Te.row==Le.row?N?et-N>=200&&v.renderer.scrollCursorIntoView(ct):N=et:N=null}(P,Te)}function fe(){H=v.selection.toOrientedRange(),R=v.session.addMarker(H,"ace_selection",v.getSelectionStyle()),v.clearSelection(),v.isFocused()&&v.renderer.$cursorLayer.setBlinking(!1),clearInterval(W),ee(),W=setInterval(ee,20),$=0,re.addListener(document,"mousemove",ke)}function _e(){clearInterval(W),v.session.removeMarker(R),R=null,v.selection.fromOrientedRange(H),v.isFocused()&&!V&&v.$resetCursorStyle(),H=null,P=null,$=0,N=null,te=null,re.removeListener(document,"mousemove",ke)}this.onDragStart=function(Te){if(this.cancelDrag||!A.draggable){var Le=this;return setTimeout(function(){Le.startSelect(),Le.captureMouse(Te)},0),Te.preventDefault()}H=v.getSelectionRange();var et=Te.dataTransfer;et.effectAllowed=v.getReadOnly()?"copy":"copyMove",v.container.appendChild(w),et.setDragImage&&et.setDragImage(w,0,0),setTimeout(function(){v.container.removeChild(w)}),et.clearData(),et.setData("Text",v.session.getTextRange()),V=!0,this.setState("drag")},this.onDragEnd=function(Te){A.draggable=!1,V=!1,this.setState(null),v.getReadOnly()||(!X&&"move"==Te.dataTransfer.dropEffect&&v.session.remove(v.getSelectionRange()),v.$resetCursorStyle()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(Te){if(!v.getReadOnly()&&Ce(Te.dataTransfer))return U=Te.clientX,L=Te.clientY,R||fe(),$++,Te.dataTransfer.dropEffect=X=We(Te),re.preventDefault(Te)},this.onDragOver=function(Te){if(!v.getReadOnly()&&Ce(Te.dataTransfer))return U=Te.clientX,L=Te.clientY,R||(fe(),$++),null!==we&&(we=null),Te.dataTransfer.dropEffect=X=We(Te),re.preventDefault(Te)},this.onDragLeave=function(Te){if(--$<=0&&R)return _e(),X=null,re.preventDefault(Te)},this.onDrop=function(Te){if(P){var Le=Te.dataTransfer;if(V)switch(X){case"move":H=H.contains(P.row,P.column)?{start:P,end:P}:v.moveText(H,P);break;case"copy":H=v.moveText(H,P,!0)}else{var et=Le.getData("Text");H={start:P,end:v.session.insert(P,et)},v.focus(),X=null}return _e(),re.preventDefault(Te)}},re.addListener(A,"dragstart",this.onDragStart.bind(p),v),re.addListener(A,"dragend",this.onDragEnd.bind(p),v),re.addListener(A,"dragenter",this.onDragEnter.bind(p),v),re.addListener(A,"dragover",this.onDragOver.bind(p),v),re.addListener(A,"dragleave",this.onDragLeave.bind(p),v),re.addListener(A,"drop",this.onDrop.bind(p),v);var we=null;function ke(){null==we&&(we=setTimeout(function(){null!=we&&R&&_e()},20))}function Ce(Te){var Le=Te.types;return!Le||Array.prototype.some.call(Le,function(et){return"text/plain"==et||"Text"==et})}function We(Te){var Le=["copy","copymove","all","uninitialized"],Bt=B.isMac?Te.altKey:Te.ctrlKey,Dt="uninitialized";try{Dt=Te.dataTransfer.effectAllowed.toLowerCase()}catch{}var Lt="none";return Bt&&Le.indexOf(Dt)>=0?Lt="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(Dt)>=0?Lt="move":Le.indexOf(Dt)>=0&&(Lt="copy"),Lt}}function _(p,v,w,x){return Math.sqrt(Math.pow(w-p,2)+Math.pow(x-v,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(p){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var p=this.editor;p.container.draggable=!0,p.renderer.$cursorLayer.setBlinking(!1),p.setStyle("ace_dragging"),p.renderer.setCursorStyle(B.isWin?"default":"move"),this.setState("dragReady")},this.onMouseDrag=function(p){var v=this.editor.container;B.isIE&&"dragReady"==this.state&&_(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&v.dragDrop(),"dragWait"===this.state&&_(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(v.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(p){if(this.$dragEnabled){this.mousedownEvent=p;var v=this.editor,w=p.inSelection(),x=p.getButton();if(1===(p.domEvent.detail||1)&&0===x&&w){if(p.editor.inMultiSelectMode&&(p.getAccelKey()||p.getShiftKey()))return;this.mousedownEvent.time=Date.now();var R=p.domEvent.target||p.domEvent.srcElement;"unselectable"in R&&(R.unselectable="on"),v.getDragDelay()?(B.isWebKit&&(this.cancelDrag=!0,v.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(p,this.onMouseDrag.bind(this)),p.defaultPrevented=!0}}}}).call(m.prototype),ie.DragdropHandler=m}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(Q,ie,xe){"use strict";var T=Q("./mouse_event").MouseEvent,re=Q("../lib/event"),B=Q("../lib/dom");ie.addTouchListeners=function(E,M){var m,_,p,v,w,x,R,H,P,g="scroll",A=0,U=0,L=0,W=0;function X(){P||function $(){var D=window.navigator&&window.navigator.clipboard,Y=!1,fe=function(_e){var we=_e.target.getAttribute("action");if("more"==we||!Y)return Y=!Y,function(){var _e=M.getCopyText(),we=M.session.getUndoManager().hasUndo();P.replaceChild(B.buildDom(Y?["span",!_e&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],_e&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],_e&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],D&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],we&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Palette"]]:["span"]),P.firstChild)}();"paste"==we?D.readText().then(function(ke){M.execCommand(we,ke)}):we&&(("cut"==we||"copy"==we)&&(D?D.writeText(M.getCopyText()):document.execCommand("copy")),M.execCommand(we)),P.firstChild.style.display="none",Y=!1,"openCommandPallete"!=we&&M.focus()};P=B.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(_e){g="menu",_e.stopPropagation(),_e.preventDefault(),M.textInput.focus()},ontouchend:function(_e){_e.stopPropagation(),_e.preventDefault(),fe(_e)},onclick:fe},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],M.container)}();var D=M.selection.cursor,Y=M.renderer.textToScreenCoordinates(D.row,D.column),ee=M.renderer.textToScreenCoordinates(0,0).pageX,fe=M.renderer.scrollLeft,_e=M.container.getBoundingClientRect();P.style.top=Y.pageY-_e.top-3+"px",Y.pageX-_e.left<_e.width-70?(P.style.left="",P.style.right="10px"):(P.style.right="",P.style.left=ee+fe-_e.left+"px"),P.style.display="",P.firstChild.style.display="none",M.on("input",V)}function V(D){P&&(P.style.display="none"),M.off("input",V)}function N(){w=null,clearTimeout(w);var D=M.selection.getRange(),Y=D.contains(R.row,R.column);(D.isEmpty()||!Y)&&(M.selection.moveToPosition(R),M.selection.selectWord()),g="wait",X()}re.addListener(E,"contextmenu",function(D){H&&M.textInput.getElement().focus()},M),re.addListener(E,"touchstart",function(D){var Y=D.touches;if(w||Y.length>1)return clearTimeout(w),w=null,p=-1,void(g="zoom");H=M.$mouseHandler.isMousePressed=!0;var ee=M.renderer.layerConfig.lineHeight,fe=M.renderer.layerConfig.lineHeight,_e=D.timeStamp;v=_e;var we=Y[0],ke=we.clientX,Ce=we.clientY;Math.abs(m-ke)+Math.abs(_-Ce)>ee&&(p=-1),m=D.clientX=ke,_=D.clientY=Ce,L=W=0;var We=new T(D,M);if(R=We.getDocumentPosition(),_e-p<500&&1==Y.length&&!A)U++,D.preventDefault(),D.button=0,function te(){w=null,clearTimeout(w),M.selection.moveToPosition(R);var D=U>=2?M.selection.getLineRange(R.row):M.session.getBracketRange(R);D&&!D.isEmpty()?M.selection.setRange(D):M.selection.selectWord(),g="wait"}();else{U=0;var Te=M.selection.cursor,Le=M.selection.isEmpty()?Te:M.selection.anchor,et=M.renderer.$cursorLayer.getPixelPosition(Te,!0),Bt=M.renderer.$cursorLayer.getPixelPosition(Le,!0),Dt=M.renderer.scroller.getBoundingClientRect(),Lt=M.renderer.layerConfig.offset,He=M.renderer.scrollLeft,lt=function(Vt,dn){return(Vt/=fe)*Vt+(dn=dn/ee-.75)*dn};if(D.clientX<Dt.left)return void(g="zoom");var Pt=lt(D.clientX-Dt.left-et.left+He,D.clientY-Dt.top-et.top+Lt),ct=lt(D.clientX-Dt.left-Bt.left+He,D.clientY-Dt.top-Bt.top+Lt);Pt<3.5&&ct<3.5&&(g=Pt>ct?"cursor":"anchor"),g=ct<3.5?"anchor":Pt<3.5?"cursor":"scroll",w=setTimeout(N,450)}p=_e},M),re.addListener(E,"touchend",function(D){H=M.$mouseHandler.isMousePressed=!1,x&&clearInterval(x),"zoom"==g?(g="",A=0):w?(M.selection.moveToPosition(R),A=0,X()):"scroll"==g?(function G(){A+=60,x=setInterval(function(){A--<=0&&(clearInterval(x),x=null),Math.abs(L)<.01&&(L=0),Math.abs(W)<.01&&(W=0),A<20&&(L*=.9),A<20&&(W*=.9);var D=M.session.getScrollTop();M.renderer.scrollBy(10*L,10*W),D==M.session.getScrollTop()&&(A=0)},10)}(),V()):X(),clearTimeout(w),w=null},M),re.addListener(E,"touchmove",function(D){w&&(clearTimeout(w),w=null);var Y=D.touches;if(!(Y.length>1||"zoom"==g)){var ee=Y[0],fe=m-ee.clientX,_e=_-ee.clientY;if("wait"==g){if(!(fe*fe+_e*_e>4))return D.preventDefault();g="cursor"}m=ee.clientX,_=ee.clientY,D.clientX=ee.clientX,D.clientY=ee.clientY;var we=D.timeStamp,ke=we-v;if(v=we,"scroll"==g){var Ce=new T(D,M);Ce.speed=1,Ce.wheelX=fe,Ce.wheelY=_e,10*Math.abs(fe)<Math.abs(_e)&&(fe=0),10*Math.abs(_e)<Math.abs(fe)&&(_e=0),0!=ke&&(L=fe/ke,W=_e/ke),M._emit("mousewheel",Ce),Ce.propagationStopped||(L=W=0)}else{var Te=new T(D,M).getDocumentPosition();"cursor"==g?M.selection.moveCursorToPosition(Te):"anchor"==g&&M.selection.setSelectionAnchor(Te.row,Te.column),M.renderer.scrollCursorIntoView(Te),D.preventDefault()}}},M)}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(Q,ie,xe){"use strict";var T=Q("../lib/event"),re=Q("../lib/useragent"),B=Q("./default_handlers").DefaultHandlers,E=Q("./default_gutter_handler").GutterHandler,M=Q("./mouse_event").MouseEvent,g=Q("./dragdrop_handler").DragdropHandler,m=Q("./touch_handler").addTouchListeners,_=Q("../config"),p=function(){function v(w){var x=this;this.editor=w,new B(this),new E(this),new g(this);var A=function(L){(!document.hasFocus||!document.hasFocus()||!w.isFocused()&&document.activeElement==(w.textInput&&w.textInput.getElement()))&&window.focus(),w.focus(),setTimeout(function(){w.isFocused()||w.focus()})},R=w.renderer.getMouseEventTarget();T.addListener(R,"click",this.onMouseEvent.bind(this,"click"),w),T.addListener(R,"mousemove",this.onMouseMove.bind(this,"mousemove"),w),T.addMultiMouseDownListener([R,w.renderer.scrollBarV&&w.renderer.scrollBarV.inner,w.renderer.scrollBarH&&w.renderer.scrollBarH.inner,w.textInput&&w.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",w),T.addMouseWheelListener(w.container,this.onMouseWheel.bind(this,"mousewheel"),w),m(w.container,w);var U=w.renderer.$gutter;T.addListener(U,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),w),T.addListener(U,"click",this.onMouseEvent.bind(this,"gutterclick"),w),T.addListener(U,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),w),T.addListener(U,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),w),T.addListener(R,"mousedown",A,w),T.addListener(U,"mousedown",A,w),re.isIE&&w.renderer.scrollBarV&&(T.addListener(w.renderer.scrollBarV.element,"mousedown",A,w),T.addListener(w.renderer.scrollBarH.element,"mousedown",A,w)),w.on("mousemove",function(L){if(!x.state&&!x.$dragDelay&&x.$dragEnabled){var W=w.renderer.screenToTextCoordinates(L.x,L.y),H=w.session.selection.getRange(),P=w.renderer;!H.isEmpty()&&H.insideStart(W.row,W.column)?P.setCursorStyle("default"):P.setCursorStyle("")}},w)}return v.prototype.onMouseEvent=function(w,x){!this.editor.session||this.editor._emit(w,new M(x,this.editor))},v.prototype.onMouseMove=function(w,x){var A=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!A||!A.length||this.editor._emit(w,new M(x,this.editor))},v.prototype.onMouseWheel=function(w,x){var A=new M(x,this.editor);A.speed=2*this.$scrollSpeed,A.wheelX=x.wheelX,A.wheelY=x.wheelY,this.editor._emit(w,A)},v.prototype.setState=function(w){this.state=w},v.prototype.captureMouse=function(w,x){this.x=w.x,this.y=w.y,this.isMousePressed=!0;var A=this.editor,R=this.editor.renderer;R.$isMousePressed=!0;var U=this,L=function(X){if(X){if(re.isWebKit&&!X.which&&U.releaseMouse)return U.releaseMouse();U.x=X.clientX,U.y=X.clientY,x&&x(X),U.mouseEvent=new M(X,U.editor),U.$mouseMoved=!0}},W=function(X){A.off("beforeEndOperation",P),clearInterval($),A.session&&H(),U[U.state+"End"]&&U[U.state+"End"](X),U.state="",U.isMousePressed=R.$isMousePressed=!1,R.$keepTextAreaAtCursor&&R.$moveTextAreaToCursor(),U.$onCaptureMouseMove=U.releaseMouse=null,X&&U.onMouseEvent("mouseup",X),A.endOperation()},H=function(){U[U.state]&&U[U.state](),U.$mouseMoved=!1};if(re.isOldIE&&"dblclick"==w.domEvent.type)return setTimeout(function(){W(w)});var P=function(X){!U.releaseMouse||A.curOp.command.name&&A.curOp.selectionChanged&&(U[U.state+"End"]&&U[U.state+"End"](),U.state="",U.releaseMouse())};A.on("beforeEndOperation",P),A.startOperation({command:{name:"mouse"}}),U.$onCaptureMouseMove=L,U.releaseMouse=T.capture(this.editor.container,L,W);var $=setInterval(H,20)},v.prototype.cancelContextMenu=function(){var w=function(x){x&&x.domEvent&&"contextmenu"!=x.domEvent.type||(this.editor.off("nativecontextmenu",w),x&&x.domEvent&&T.stopEvent(x.domEvent))}.bind(this);setTimeout(w,10),this.editor.on("nativecontextmenu",w)},v.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},v}();p.prototype.releaseMouse=null,_.defineOptions(p.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:re.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),ie.MouseHandler=p}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(Q,ie,xe){"use strict";var T=Q("../lib/dom");ie.FoldHandler=function B(E){E.on("click",function(M){var g=M.getDocumentPosition(),m=E.session,_=m.getFoldAt(g.row,g.column,1);_&&(M.getAccelKey()?m.removeFold(_):m.expandFold(_),M.stop());var p=M.domEvent&&M.domEvent.target;p&&T.hasCssClass(p,"ace_inline_button")&&T.hasCssClass(p,"ace_toggle_wrap")&&(m.setOption("wrap",!m.getUseWrapMode()),E.renderer.scrollCursorIntoView())}),E.on("gutterclick",function(M){if("foldWidgets"==E.renderer.$gutterLayer.getRegion(M)){var m=M.getDocumentPosition().row,_=E.session;_.foldWidgets&&_.foldWidgets[m]&&E.session.onFoldWidgetClick(m,M),E.isFocused()||E.focus(),M.stop()}}),E.on("gutterdblclick",function(M){if("foldWidgets"==E.renderer.$gutterLayer.getRegion(M)){var m=M.getDocumentPosition().row,_=E.session,p=_.getParentFoldRangeData(m,!0),v=p.range||p.firstRange;if(v){var w=_.getFoldAt(m=v.start.row,_.getLine(m).length,1);w?_.removeFold(w):(_.addFold("...",v),E.renderer.scrollCursorIntoView({row:v.start.row,column:0}))}M.stop()}})}}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(Q,ie,xe){"use strict";var T=Q("../lib/keys"),re=Q("../lib/event"),B=function(){function E(M){this.$editor=M,this.$data={editor:M},this.$handlers=[],this.setDefaultHandler(M.commands)}return E.prototype.setDefaultHandler=function(M){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=M,this.addKeyboardHandler(M,0)},E.prototype.setKeyboardHandler=function(M){var g=this.$handlers;if(g[g.length-1]!=M){for(;g[g.length-1]&&g[g.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(g[g.length-1]);this.addKeyboardHandler(M,1)}},E.prototype.addKeyboardHandler=function(M,g){if(M){"function"==typeof M&&!M.handleKeyboard&&(M.handleKeyboard=M);var m=this.$handlers.indexOf(M);-1!=m&&this.$handlers.splice(m,1),null==g?this.$handlers.push(M):this.$handlers.splice(g,0,M),-1==m&&M.attach&&M.attach(this.$editor)}},E.prototype.removeKeyboardHandler=function(M){var g=this.$handlers.indexOf(M);return-1!=g&&(this.$handlers.splice(g,1),M.detach&&M.detach(this.$editor),!0)},E.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},E.prototype.getStatusText=function(){var M=this.$data,g=M.editor;return this.$handlers.map(function(m){return m.getStatusText&&m.getStatusText(g,M)||""}).filter(Boolean).join(" ")},E.prototype.$callKeyboardHandlers=function(M,g,m,_){for(var p,v=!1,w=this.$editor.commands,x=this.$handlers.length;x--&&!((p=this.$handlers[x].handleKeyboard(this.$data,M,g,m,_))&&p.command&&(v="null"==p.command||w.exec(p.command,this.$editor,p.args,_),v&&_&&-1!=M&&1!=p.passEvent&&1!=p.command.passEvent&&re.stopEvent(_),v)););return!v&&-1==M&&(p={command:"insertstring"},v=w.exec("insertstring",this.$editor,g)),v&&this.$editor._signal&&this.$editor._signal("keyboardActivity",p),v},E.prototype.onCommandKey=function(M,g,m){var _=T.keyCodeToString(m);return this.$callKeyboardHandlers(g,_,m,M)},E.prototype.onTextInput=function(M){return this.$callKeyboardHandlers(-1,M)},E}();ie.KeyBinding=B}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(Q,ie,xe){"use strict";var B=0,E=0,M=!1,m=!1,_=!1,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D=11,We=[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,4,4,D,D,D,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,4,D,D,D,D,4,4,4,4,0,4,4,18,4,4,D,D,2,2,4,0,4,4,4,2,0,4,4,4,4,4],Te=[8,8,8,8,8,8,8,8,8,8,8,18,18,18,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,D,D,D,D,D,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function et(He,lt,Pt){if(!(E<He)){if(1==He&&1==B&&!m)return void Pt.reverse();for(var dn,Zt,dt,Vn,ct=Pt.length,Vt=0;Vt<ct;){if(lt[Vt]>=He){for(dn=Vt+1;dn<ct&&lt[dn]>=He;)dn++;for(Zt=Vt,dt=dn-1;Zt<dt;Zt++,dt--)Vn=Pt[Zt],Pt[Zt]=Pt[dt],Pt[dt]=Vn;Vt=dn}Vt++}}}function Bt(He,lt,Pt,ct){var dn,Zt,dt,Vn,Vt=lt[ct];switch(Vt){case 0:case 1:M=!1;case 4:case 3:return Vt;case 2:return M?3:2;case 7:return M=!0,1;case 8:return 4;case 9:return ct<1||ct+1>=lt.length||2!=(dn=Pt[ct-1])&&3!=dn||2!=(Zt=lt[ct+1])&&3!=Zt?4:(M&&(Zt=3),Zt==dn?Zt:4);case 10:return 2==(dn=ct>0?Pt[ct-1]:5)&&ct+1<lt.length&&2==lt[ct+1]?2:4;case D:if(ct>0&&2==Pt[ct-1])return 2;if(M)return 4;for(Vn=ct+1,dt=lt.length;Vn<dt&&lt[Vn]==D;)Vn++;return Vn<dt&&2==lt[Vn]?2:4;case 12:for(dt=lt.length,Vn=ct+1;Vn<dt&&12==lt[Vn];)Vn++;if(Vn<dt){var Di=He[ct];if(dn=lt[Vn],(Di>=1425&&Di<=2303||64286==Di)&&(1==dn||7==dn))return 1}return ct<1||5==(dn=lt[ct-1])?4:Pt[ct-1];case 5:return M=!1,m=!0,B;case 6:return _=!0,4;case 13:case 14:case 16:case 17:case 15:M=!1;case 18:return 4}}function Dt(He){var lt=He.charCodeAt(0),Pt=lt>>8;return 0==Pt?lt>191?0:We[lt]:5==Pt?/[\u0591-\u05f4]/.test(He)?1:0:6==Pt?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(He)?12:/[\u0660-\u0669\u066b-\u066c]/.test(He)?3:1642==lt?D:/[\u06f0-\u06f9]/.test(He)?2:7:32==Pt&&lt<=8287?Te[255&lt]:254==Pt&&lt>=65136?7:4}ie.L=0,ie.R=1,ie.EN=2,ie.ON_R=3,ie.AN=4,ie.R_H=5,ie.B=6,ie.RLE=7,ie.DOT="\xb7",ie.doBidiReorder=function(He,lt,Pt){if(He.length<2)return{};var ct=He.split(""),Vt=new Array(ct.length),dn=new Array(ct.length),Zt=[];B=Pt?1:0,function Le(He,lt,Pt,ct){var Vt=B?x:w,dn=null,Zt=null,dt=null,Vn=0,Di=null,hr=-1,Yt=null,Je=null,Tt=[];if(!ct)for(Yt=0,ct=[];Yt<Pt;Yt++)ct[Yt]=Dt(He[Yt]);for(E=B,M=!1,m=!1,_=!1,Je=0;Je<Pt;Je++){if(dn=Vn,Tt[Je]=Zt=Bt(He,ct,Tt,Je),Di=240&(Vn=Vt[dn][Zt]),lt[Je]=dt=Vt[Vn&=15][5],Di>0)if(16==Di){for(Yt=hr;Yt<Je;Yt++)lt[Yt]=1;hr=-1}else hr=-1;if(Vt[Vn][6])-1==hr&&(hr=Je);else if(hr>-1){for(Yt=hr;Yt<Je;Yt++)lt[Yt]=dt;hr=-1}5==ct[Je]&&(lt[Je]=0),E|=dt}if(_)for(Yt=0;Yt<Pt;Yt++)if(6==ct[Yt]){lt[Yt]=B;for(var pt=Yt-1;pt>=0&&8==ct[pt];pt--)lt[pt]=B}}(ct,Zt,ct.length,lt);for(var dt=0;dt<Vt.length;Vt[dt]=dt,dt++);for(et(2,Zt,Vt),et(1,Zt,Vt),dt=0;dt<Vt.length-1;dt++)3===lt[dt]?Zt[dt]=ie.AN:1===Zt[dt]&&(lt[dt]>7&&lt[dt]<13||4===lt[dt]||18===lt[dt])?Zt[dt]=ie.ON_R:dt>0&&"\u0644"===ct[dt-1]&&/\u0622|\u0623|\u0625|\u0627/.test(ct[dt])&&(Zt[dt-1]=Zt[dt]=ie.R_H,dt++);for(ct[ct.length-1]===ie.DOT&&(Zt[ct.length-1]=ie.B),"\u202b"===ct[0]&&(Zt[0]=ie.RLE),dt=0;dt<Vt.length;dt++)dn[dt]=Zt[Vt[dt]];return{logicalFromVisual:Vt,bidiLevels:dn}},ie.hasBidiCharacters=function(He,lt){for(var Pt=!1,ct=0;ct<He.length;ct++)lt[ct]=Dt(He.charAt(ct)),!Pt&&(1==lt[ct]||7==lt[ct]||3==lt[ct])&&(Pt=!0);return Pt},ie.getVisualFromLogicalIdx=function(He,lt){for(var Pt=0;Pt<lt.logicalFromVisual.length;Pt++)if(lt.logicalFromVisual[Pt]==He)return Pt;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(Q,ie,xe){"use strict";var T=Q("./lib/bidiutil"),re=Q("./lib/lang"),B=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,E=function(){function M(g){this.session=g,this.bidiMap={},this.currentRow=null,this.bidiUtil=T,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=B.test(g.getValue())}return M.prototype.isBidiRow=function(g,m,_){return!!this.seenBidi&&(g!==this.currentRow&&(this.currentRow=g,this.updateRowLine(m,_),this.updateBidiMap()),this.bidiMap.bidiLevels)},M.prototype.onChange=function(g){this.seenBidi?this.currentRow=null:"insert"==g.action&&B.test(g.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},M.prototype.getDocumentRow=function(){var g=0,m=this.session.$screenRowCache;if(m.length){var _=this.session.$getRowCacheIndex(m,this.currentRow);_>=0&&(g=this.session.$docRowCache[_])}return g},M.prototype.getSplitIndex=function(){var g=0,m=this.session.$screenRowCache;if(m.length)for(var _,p=this.session.$getRowCacheIndex(m,this.currentRow);this.currentRow-g>0&&(_=this.session.$getRowCacheIndex(m,this.currentRow-g-1))===p;)p=_,g++;else g=this.currentRow;return g},M.prototype.updateRowLine=function(g,m){void 0===g&&(g=this.getDocumentRow());var p=g===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(g),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var v=this.session.$wrapData[g];v&&(void 0===m&&(m=this.getSplitIndex()),m>0&&v.length?(this.wrapIndent=v.indent,this.wrapOffset=this.wrapIndent*this.charWidths[T.L],this.line=m<v.length?this.line.substring(v[m-1],v[m]):this.line.substring(v[v.length-1])):this.line=this.line.substring(0,v[m]),m==v.length&&(this.line+=this.showInvisibles?p:T.DOT))}else this.line+=this.showInvisibles?p:T.DOT;var A,w=this.session,x=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(R,U){return"\t"===R||w.isFullWidth(R.charCodeAt(0))?(A="\t"===R?w.getScreenTabSize(U+x):2,x+=A-1,re.stringRepeat(T.DOT,A)):R}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==T.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},M.prototype.updateBidiMap=function(){var g=[];this.bidiMap=T.hasBidiCharacters(this.line,g)||this.isRtlDir?T.doBidiReorder(this.line,g,this.isRtlDir):{}},M.prototype.markAsDirty=function(){this.currentRow=null},M.prototype.updateCharacterWidths=function(g){if(this.characterWidth!==g.$characterSize.width){this.fontMetrics=g;var m=this.characterWidth=g.$characterSize.width,_=g.$measureCharWidth("\u05d4");this.charWidths[T.L]=this.charWidths[T.EN]=this.charWidths[T.ON_R]=m,this.charWidths[T.R]=this.charWidths[T.AN]=_,this.charWidths[T.R_H]=.45*_,this.charWidths[T.B]=this.charWidths[T.RLE]=0,this.currentRow=null}},M.prototype.setShowInvisibles=function(g){this.showInvisibles=g,this.currentRow=null},M.prototype.setEolChar=function(g){this.EOL=g},M.prototype.setContentWidth=function(g){this.contentWidth=g},M.prototype.isRtlLine=function(g){return!!this.$isRtl||(null!=g?this.session.getLine(g).charAt(0)==this.RLE:this.isRtlDir)},M.prototype.setRtlDirection=function(g,m){for(var _=g.getCursorPosition(),p=g.selection.getSelectionAnchor().row;p<=_.row;p++)m||g.session.getLine(p).charAt(0)!==g.session.$bidiHandler.RLE?m&&g.session.getLine(p).charAt(0)!==g.session.$bidiHandler.RLE&&g.session.doc.insert({column:0,row:p},g.session.$bidiHandler.RLE):g.session.doc.removeInLine(p,0,1)},M.prototype.getPosLeft=function(g){g-=this.wrapIndent;var m=this.line.charAt(0)===this.RLE?1:0,_=g>m?this.session.getOverwrite()?g:g-1:m,p=T.getVisualFromLogicalIdx(_,this.bidiMap),v=this.bidiMap.bidiLevels,w=0;!this.session.getOverwrite()&&g<=m&&v[p]%2!=0&&p++;for(var x=0;x<p;x++)w+=this.charWidths[v[x]];return!this.session.getOverwrite()&&g>m&&v[p]%2==0&&(w+=this.charWidths[v[p]]),this.wrapIndent&&(w+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(w+=this.rtlLineOffset),w},M.prototype.getSelections=function(g,m){var v,_=this.bidiMap,p=_.bidiLevels,w=[],x=0,A=Math.min(g,m)-this.wrapIndent,R=Math.max(g,m)-this.wrapIndent,U=!1,L=!1,W=0;this.wrapIndent&&(x+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var H,P=0;P<p.length;P++)v=p[P],(U=(H=_.logicalFromVisual[P])>=A&&H<R)&&!L?W=x:!U&&L&&w.push({left:W,width:x-W}),x+=this.charWidths[v],L=U;if(U&&P===p.length&&w.push({left:W,width:x-W}),this.isRtlDir)for(var $=0;$<w.length;$++)w[$].left+=this.rtlLineOffset;return w},M.prototype.offsetToCol=function(_){this.isRtlDir&&(_-=this.rtlLineOffset);var m=0,p=(_=Math.max(_,0),0),v=0,w=this.bidiMap.bidiLevels,x=this.charWidths[w[v]];for(this.wrapIndent&&(_-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);_>p+x/2;){if(p+=x,v===w.length-1){x=0;break}x=this.charWidths[w[++v]]}return v>0&&w[v-1]%2!=0&&w[v]%2==0?(_<p&&v--,m=this.bidiMap.logicalFromVisual[v]):v>0&&w[v-1]%2==0&&w[v]%2!=0?m=1+(_>p?this.bidiMap.logicalFromVisual[v]:this.bidiMap.logicalFromVisual[v-1]):this.isRtlDir&&v===w.length-1&&0===x&&w[v-1]%2==0||!this.isRtlDir&&0===v&&w[v]%2!=0?m=1+this.bidiMap.logicalFromVisual[v]:(v>0&&w[v-1]%2!=0&&0!==x&&v--,m=this.bidiMap.logicalFromVisual[v]),0===m&&this.isRtlDir&&m++,m+this.wrapIndent},M}();ie.BidiHandler=E}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(Q,ie,xe){"use strict";var T=Q("./lib/oop"),re=Q("./lib/lang"),B=Q("./lib/event_emitter").EventEmitter,E=Q("./range").Range,M=function(g){this.session=g,this.doc=g.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var m=this;this.cursor.on("change",function(_){m.$cursorChanged=!0,m.$silent||m._emit("changeCursor"),!m.$isEmpty&&!m.$silent&&m._emit("changeSelection"),!m.$keepDesiredColumnOnChange&&_.old.column!=_.value.column&&(m.$desiredColumn=null)}),this.anchor.on("change",function(){m.$anchorChanged=!0,!m.$isEmpty&&!m.$silent&&m._emit("changeSelection")})};(function(){T.implement(this,B),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setAnchor=function(g,m){this.$isEmpty=!1,this.anchor.setPosition(g,m)},this.setSelectionAnchor=this.setAnchor,this.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionAnchor=this.getAnchor,this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var g=this.anchor,m=this.lead;return g.row>m.row||g.row==m.row&&g.column>m.column},this.getRange=function(){var g=this.anchor,m=this.lead;return this.$isEmpty?E.fromPoints(m,m):this.isBackwards()?E.fromPoints(m,g):E.fromPoints(g,m)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(g,m){var _=m?g.end:g.start,p=m?g.start:g.end;this.$setSelection(_.row,_.column,p.row,p.column)},this.$setSelection=function(g,m,_,p){if(!this.$silent){var v=this.$isEmpty,w=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(g,m),this.cursor.setPosition(_,p),this.$isEmpty=!E.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||v!=this.$isEmpty||w)&&this._emit("changeSelection")}},this.$moveSelection=function(g){var m=this.lead;this.$isEmpty&&this.setSelectionAnchor(m.row,m.column),g.call(this)},this.selectTo=function(g,m){this.$moveSelection(function(){this.moveCursorTo(g,m)})},this.selectToPosition=function(g){this.$moveSelection(function(){this.moveCursorToPosition(g)})},this.moveTo=function(g,m){this.clearSelection(),this.moveCursorTo(g,m)},this.moveToPosition=function(g){this.clearSelection(),this.moveCursorToPosition(g)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(g,m){if(typeof m>"u"){var _=g||this.lead;g=_.row,m=_.column}return this.session.getWordRange(g,m)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var g=this.getCursor(),m=this.session.getAWordRange(g.row,g.column);this.setSelectionRange(m)},this.getLineRange=function(g,m){var p,_="number"==typeof g?g:this.lead.row,v=this.session.getFoldLine(_);return v?(_=v.start.row,p=v.end.row):p=_,!0===m?new E(_,0,p,this.session.getLine(p).length):new E(_,0,p+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(g,m,_){var p=g.column,v=g.column+m;return _<0&&(p=g.column-m,v=g.column),this.session.isTabStop(g)&&this.doc.getLine(g.row).slice(p,v).split(" ").length-1==m},this.moveCursorLeft=function(){var m,g=this.lead.getPosition();if(m=this.session.getFoldAt(g.row,g.column,-1))this.moveCursorTo(m.start.row,m.start.column);else if(0===g.column)g.row>0&&this.moveCursorTo(g.row-1,this.doc.getLine(g.row-1).length);else{var _=this.session.getTabSize();this.wouldMoveIntoSoftTab(g,_,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-_):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var m,g=this.lead.getPosition();if(m=this.session.getFoldAt(g.row,g.column,1))this.moveCursorTo(m.end.row,m.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var _=this.session.getTabSize();this.wouldMoveIntoSoftTab(g=this.lead,_,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,_):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var g=this.lead.row,m=this.lead.column,_=this.session.documentToScreenRow(g,m),p=this.session.screenToDocumentPosition(_,0),w=this.session.getDisplayLine(g,null,p.row,p.column).match(/^\s*/);w[0].length!=m&&!this.session.$useEmacsStyleLineStart&&(p.column+=w[0].length),this.moveCursorToPosition(p)},this.moveCursorLineEnd=function(){var g=this.lead,m=this.session.getDocumentLastRowColumnPosition(g.row,g.column);if(this.lead.column==m.column){var _=this.session.getLine(m.row);if(m.column==_.length){var p=_.search(/\s+$/);p>0&&(m.column=p)}}this.moveCursorTo(m.row,m.column)},this.moveCursorFileEnd=function(){var g=this.doc.getLength()-1,m=this.doc.getLine(g).length;this.moveCursorTo(g,m)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var g=this.lead.row,m=this.lead.column,_=this.doc.getLine(g),p=_.substring(m);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var v=this.session.getFoldAt(g,m,1);if(!v)return this.session.nonTokenRe.exec(p)&&(m+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,p=_.substring(m)),m>=_.length?(this.moveCursorTo(g,_.length),this.moveCursorRight(),void(g<this.doc.getLength()-1&&this.moveCursorWordRight())):(this.session.tokenRe.exec(p)&&(m+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(g,m));this.moveCursorTo(v.end.row,v.end.column)},this.moveCursorLongWordLeft=function(){var _,g=this.lead.row,m=this.lead.column;if(_=this.session.getFoldAt(g,m,-1))this.moveCursorTo(_.start.row,_.start.column);else{var p=this.session.getFoldStringAt(g,m,-1);null==p&&(p=this.doc.getLine(g).substring(0,m));var v=re.stringReverse(p);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(v)&&(m-=this.session.nonTokenRe.lastIndex,v=v.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),m<=0)return this.moveCursorTo(g,0),this.moveCursorLeft(),void(g>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(v)&&(m-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(g,m)}},this.$shortWordEndIndex=function(g){var _,m=0,p=/\s/,v=this.session.tokenRe;if(v.lastIndex=0,this.session.tokenRe.exec(g))m=this.session.tokenRe.lastIndex;else{for(;(_=g[m])&&p.test(_);)m++;if(m<1)for(v.lastIndex=0;(_=g[m])&&!v.test(_);)if(v.lastIndex=0,m++,p.test(_)){if(m>2){m--;break}for(;(_=g[m])&&p.test(_);)m++;if(m>2)break}}return v.lastIndex=0,m},this.moveCursorShortWordRight=function(){var g=this.lead.row,m=this.lead.column,_=this.doc.getLine(g),p=_.substring(m),v=this.session.getFoldAt(g,m,1);if(v)return this.moveCursorTo(v.end.row,v.end.column);if(m==_.length){var w=this.doc.getLength();do{g++,p=this.doc.getLine(g)}while(g<w&&/^\s*$/.test(p));/^\s+/.test(p)||(p=""),m=0}var x=this.$shortWordEndIndex(p);this.moveCursorTo(g,m+x)},this.moveCursorShortWordLeft=function(){var _,g=this.lead.row,m=this.lead.column;if(_=this.session.getFoldAt(g,m,-1))return this.moveCursorTo(_.start.row,_.start.column);var p=this.session.getLine(g).substring(0,m);if(0===m){do{g--,p=this.doc.getLine(g)}while(g>0&&/^\s*$/.test(p));m=p.length,/\s+$/.test(p)||(p="")}var v=re.stringReverse(p),w=this.$shortWordEndIndex(v);return this.moveCursorTo(g,m-w)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(g,m){var p,_=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===m&&(0!==g&&(this.session.$bidiHandler.isBidiRow(_.row,this.lead.row)?(p=this.session.$bidiHandler.getPosLeft(_.column),_.column=Math.round(p/this.session.$bidiHandler.charWidths[0])):p=_.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?_.column=this.$desiredColumn:this.$desiredColumn=_.column),0!=g&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var v=this.session.lineWidgets[this.lead.row];g<0?g-=v.rowsAbove||0:g>0&&(g+=v.rowCount-(v.rowsAbove||0))}var w=this.session.screenToDocumentPosition(_.row+g,_.column,p);this.moveCursorTo(w.row,w.column+m,0===m)},this.moveCursorToPosition=function(g){this.moveCursorTo(g.row,g.column)},this.moveCursorTo=function(g,m,_){var p=this.session.getFoldAt(g,m,1);p&&(g=p.start.row,m=p.start.column),this.$keepDesiredColumnOnChange=!0;var v=this.session.getLine(g);/[\uDC00-\uDFFF]/.test(v.charAt(m))&&v.charAt(m-1)&&(this.lead.row==g&&this.lead.column==m+1?m-=1:m+=1),this.lead.setPosition(g,m),this.$keepDesiredColumnOnChange=!1,_||(this.$desiredColumn=null)},this.moveCursorToScreen=function(g,m,_){var p=this.session.screenToDocumentPosition(g,m);this.moveCursorTo(p.row,p.column,_)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(g){this.setSelectionRange(g,g.cursor==g.start),this.$desiredColumn=g.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(g){var m=this.getRange();return g?(g.start.column=m.start.column,g.start.row=m.start.row,g.end.column=m.end.column,g.end.row=m.end.row):g=m,g.cursor=this.isBackwards()?g.start:g.end,g.desiredColumn=this.$desiredColumn,g},this.getRangeOfMovements=function(g){var m=this.getCursor();try{g(this);var _=this.getCursor();return E.fromPoints(m,_)}catch{return E.fromPoints(m,m)}finally{this.moveCursorToPosition(m)}},this.toJSON=function(){if(this.rangeCount)var g=this.ranges.map(function(m){var _=m.clone();return _.isBackwards=m.cursor==m.start,_});else(g=this.getRange()).isBackwards=this.isBackwards();return g},this.fromJSON=function(g){if(null==g.start){if(this.rangeList&&g.length>1){this.toSingleRange(g[0]);for(var m=g.length;m--;){var _=E.fromPoints(g[m].start,g[m].end);g[m].isBackwards&&(_.cursor=_.start),this.addRange(_,!0)}return}g=g[0]}this.rangeList&&this.toSingleRange(g),this.setSelectionRange(g,g.isBackwards)},this.isEqual=function(g){if((g.length||this.rangeCount)&&g.length!=this.rangeCount)return!1;if(!g.length||!this.ranges)return this.getRange().isEqual(g);for(var m=this.ranges.length;m--;)if(!this.ranges[m].isEqual(g[m]))return!1;return!0}}).call(M.prototype),ie.Selection=M}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(Q,ie,xe){"use strict";var T=Q("./config"),re=2e3,B=function(){function E(M){for(var g in this.states=M,this.regExps={},this.matchMappings={},this.states){for(var m=this.states[g],_=[],p=0,v=this.matchMappings[g]={defaultToken:"text"},w="g",x=[],A=0;A<m.length;A++){var R=m[A];if(R.defaultToken&&(v.defaultToken=R.defaultToken),R.caseInsensitive&&-1===w.indexOf("i")&&(w+="i"),R.unicode&&-1===w.indexOf("u")&&(w+="u"),null!=R.regex){R.regex instanceof RegExp&&(R.regex=R.regex.toString().slice(1,-1));var U=R.regex,L=new RegExp("(?:("+U+")|(.))").exec("a").length-2;Array.isArray(R.token)?1==R.token.length||1==L?R.token=R.token[0]:L-1!=R.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:R,groupCount:L-1}),R.token=R.token[0]):(R.tokenArray=R.token,R.token=null,R.onMatch=this.$arrayTokens):"function"==typeof R.token&&!R.onMatch&&(R.onMatch=L>1?this.$applyToken:R.token),L>1&&(/\\\d/.test(R.regex)?U=R.regex.replace(/\\([0-9]+)/g,function(W,H){return"\\"+(parseInt(H,10)+p+1)}):(L=1,U=this.removeCapturingGroups(R.regex)),!R.splitRegex&&"string"!=typeof R.token&&x.push(R)),v[p]=A,p+=L,_.push(U),R.onMatch||(R.onMatch=null)}}_.length||(v[0]=0,_.push("$")),x.forEach(function(W){W.splitRegex=this.createSplitterRegexp(W.regex,w)},this),this.regExps[g]=new RegExp("("+_.join(")|(")+")|($)",w)}}return E.prototype.$setMaxTokenCount=function(M){re=0|M},E.prototype.$applyToken=function(M){var g=this.splitRegex.exec(M).slice(1),m=this.token.apply(this,g);if("string"==typeof m)return[{type:m,value:M}];for(var _=[],p=0,v=m.length;p<v;p++)g[p]&&(_[_.length]={type:m[p],value:g[p]});return _},E.prototype.$arrayTokens=function(M){if(!M)return[];var g=this.splitRegex.exec(M);if(!g)return"text";for(var m=[],_=this.tokenArray,p=0,v=_.length;p<v;p++)g[p+1]&&(m[m.length]={type:_[p],value:g[p+1]});return m},E.prototype.removeCapturingGroups=function(M){return M.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(m,_){return _?"(?:":m})},E.prototype.createSplitterRegexp=function(M,g){if(-1!=M.indexOf("(?=")){var m=0,_=!1,p={};M.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(v,w,x,A,R,U){return _?_="]"!=R:R?_=!0:A?(m==p.stack&&(p.end=U+1,p.stack=-1),m--):x&&(m++,1!=x.length&&(p.stack=m,p.start=U)),v}),null!=p.end&&/^\)*$/.test(M.substr(p.end))&&(M=M.substring(0,p.start)+M.substr(p.end))}return"^"!=M.charAt(0)&&(M="^"+M),"$"!=M.charAt(M.length-1)&&(M+="$"),new RegExp(M,(g||"").replace("g",""))},E.prototype.getLineTokens=function(M,g){if(g&&"string"!=typeof g){var m=g.slice(0);"#tmp"===(g=m[0])&&(m.shift(),g=m.shift())}else m=[];var _=g||"start",p=this.states[_];p||(p=this.states[_="start"]);var v=this.matchMappings[_],w=this.regExps[_];w.lastIndex=0;for(var x,A=[],R=0,U=0,L={type:null,value:""};x=w.exec(M);){var W=v.defaultToken,H=null,P=x[0],$=w.lastIndex;if($-P.length>R){var X=M.substring(R,$-P.length);L.type==W?L.value+=X:(L.type&&A.push(L),L={type:W,value:X})}for(var V=0;V<x.length-2;V++)if(void 0!==x[V+1]){W=(H=p[v[V]]).onMatch?H.onMatch(P,_,m,M):H.token,H.next&&(_="string"==typeof H.next?H.next:H.next(_,m),(p=this.states[_])||(this.reportError("state doesn't exist",_),p=this.states[_="start"]),v=this.matchMappings[_],R=$,(w=this.regExps[_]).lastIndex=$),H.consumeLineEnd&&(R=$);break}if(P)if("string"==typeof W)H&&!1===H.merge||L.type!==W?(L.type&&A.push(L),L={type:W,value:P}):L.value+=P;else if(W)for(L.type&&A.push(L),L={type:null,value:""},V=0;V<W.length;V++)A.push(W[V]);if(R==M.length)break;if(R=$,U++>re){for(U>2*M.length&&this.reportError("infinite loop with in ace tokenizer",{startState:g,line:M});R<M.length;)L.type&&A.push(L),L={value:M.substring(R,R+=500),type:"overflow"};_="start",m=[];break}}return L.type&&A.push(L),m.length>1&&m[0]!==_&&m.unshift("#tmp",_),{tokens:A,state:m.length?m:_}},E}();B.prototype.reportError=T.reportError,ie.Tokenizer=B}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(Q,ie,xe){"use strict";var T=Q("../lib/lang"),re=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(M,g){if(g)for(var m in M){for(var _=M[m],p=0;p<_.length;p++){var v=_[p];(v.next||v.onMatch)&&("string"==typeof v.next&&0!==v.next.indexOf(g)&&(v.next=g+v.next),v.nextState&&0!==v.nextState.indexOf(g)&&(v.nextState=g+v.nextState))}this.$rules[g+m]=_}else for(var m in M)this.$rules[m]=M[m]},this.getRules=function(){return this.$rules},this.embedRules=function(M,g,m,_,p){var v="function"==typeof M?(new M).getRules():M;if(_)for(var w=0;w<_.length;w++)_[w]=g+_[w];else for(var x in _=[],v)_.push(g+x);if(this.addRules(v,g),m){var A=Array.prototype[p?"push":"unshift"];for(w=0;w<_.length;w++)A.apply(this.$rules[_[w]],T.deepCopy(m))}this.$embeds||(this.$embeds=[]),this.$embeds.push(g)},this.getEmbeds=function(){return this.$embeds};var B=function(M,g){return("start"!=M||g.length)&&g.unshift(this.nextState,M),this.nextState},E=function(M,g){return g.shift(),g.shift()||"start"};this.normalizeRules=function(){var M=0,g=this.$rules;Object.keys(g).forEach(function m(_){var p=g[_];p.processed=!0;for(var v=0;v<p.length;v++){var w=p[v],x=null;Array.isArray(w)&&(x=w,w={}),!w.regex&&w.start&&(w.regex=w.start,w.next||(w.next=[]),w.next.push({defaultToken:w.token},{token:w.token+".end",regex:w.end||w.start,next:"pop"}),w.token=w.token+".start",w.push=!0);var A=w.next||w.push;if(A&&Array.isArray(A)){var R=w.stateName;R||("string"!=typeof(R=w.token)&&(R=R[0]||""),g[R]&&(R+=M++)),g[R]=A,w.next=R,m(R)}else"pop"==A&&(w.next=E);if(w.push&&(w.nextState=w.next||w.push,w.next=B,delete w.push),w.rules)for(var U in w.rules)g[U]?g[U].push&&g[U].push.apply(g[U],w.rules[U]):g[U]=w.rules[U];var L="string"==typeof w?w:w.include;if(L&&("$self"===L&&(L="start"),x=Array.isArray(L)?L.map(function(H){return g[H]}):g[L]),x){var W=[v,1].concat(x);w.noEscape&&(W=W.filter(function(H){return!H.next})),p.splice.apply(p,W),v--}w.keywordMap&&(w.token=this.createKeywordMapper(w.keywordMap,w.defaultToken||"text",w.caseInsensitive),delete w.defaultToken)}},this)},this.createKeywordMapper=function(M,g,m,_){var p=Object.create(null);return this.$keywordList=[],Object.keys(M).forEach(function(v){for(var x=M[v].split(_||"|"),A=x.length;A--;){var R=x[A];this.$keywordList.push(R),m&&(R=R.toLowerCase()),p[R]=v}},this),M=null,m?function(v){return p[v.toLowerCase()]||g}:function(v){return p[v]||g}},this.getKeywords=function(){return this.$keywords}}).call(re.prototype),ie.TextHighlightRules=re}),ace.define("ace/mode/behaviour",["require","exports","module"],function(Q,ie,xe){"use strict";var T=function(){this.$behaviours={}};(function(){this.add=function(re,B,E){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[re]:this.$behaviours[re]={}}this.$behaviours[re][B]=E},this.addBehaviours=function(re){for(var B in re)for(var E in re[B])this.add(B,E,re[B][E])},this.remove=function(re){this.$behaviours&&this.$behaviours[re]&&delete this.$behaviours[re]},this.inherit=function(re,B){if("function"==typeof re)var E=(new re).getBehaviours(B);else E=re.getBehaviours(B);this.addBehaviours(E)},this.getBehaviours=function(re){if(re){for(var B={},E=0;E<re.length;E++)this.$behaviours[re[E]]&&(B[re[E]]=this.$behaviours[re[E]]);return B}return this.$behaviours}}).call(T.prototype),ie.Behaviour=T}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(Q,ie,xe){"use strict";var T=Q("./range").Range,re=function(){function B(E,M,g){this.$session=E,this.$row=M,this.$rowTokens=E.getTokens(M);var m=E.getTokenAt(M,g);this.$tokenIndex=m?m.index:-1}return B.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},B.prototype.stepForward=function(){this.$tokenIndex+=1;for(var E;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,E||(E=this.$session.getLength()),this.$row>=E)return this.$row=E-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},B.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},B.prototype.getCurrentTokenRow=function(){return this.$row},B.prototype.getCurrentTokenColumn=function(){var E=this.$rowTokens,M=this.$tokenIndex,g=E[M].start;if(void 0!==g)return g;for(g=0;M>0;)g+=E[M-=1].value.length;return g},B.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},B.prototype.getCurrentTokenRange=function(){var E=this.$rowTokens[this.$tokenIndex],M=this.getCurrentTokenColumn();return new T(this.$row,M,this.$row,M+E.value.length)},B}();ie.TokenIterator=re}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(Q,ie,xe){"use strict";var m,T=Q("../../lib/oop"),re=Q("../behaviour").Behaviour,B=Q("../../token_iterator").TokenIterator,E=Q("../../lib/lang"),M=["text","paren.rparen","rparen","paren","punctuation.operator"],g=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],_={},p={'"':'"',"'":"'"},v=function(A){var R=-1;if(A.multiSelect&&(R=A.selection.index,_.rangeCount!=A.multiSelect.rangeCount&&(_={rangeCount:A.multiSelect.rangeCount})),_[R])return m=_[R];m=_[R]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},w=function(A,R,U,L){var W=A.end.row-A.start.row;return{text:U+R+L,selection:[0,A.start.column+1,W,A.end.column+(W?0:1)]}},x=function(A){A=A||{},this.add("braces","insertion",function(R,U,L,W,H){var P=L.getCursorPosition(),$=W.doc.getLine(P.row);if("{"==H){v(L);var X=L.getSelectionRange(),V=W.doc.getTextRange(X);if(""!==V&&"{"!==V&&L.getWrapBehavioursEnabled())return w(X,V,"{","}");if(x.isSaneInsertion(L,W))return/[\]\}\)]/.test($[P.column])||L.inMultiSelectMode||A.braces?(x.recordAutoInsert(L,W,"}"),{text:"{}",selection:[1,1]}):(x.recordMaybeInsert(L,W,"{"),{text:"{",selection:[1,1]})}else if("}"==H){if(v(L),"}"==$.substring(P.column,P.column+1)&&null!==W.$findOpeningBracket("}",{column:P.column+1,row:P.row})&&x.isAutoInsertedClosing(P,$,H))return x.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==H||"\r\n"==H){v(L);var G="";if(x.isMaybeInsertedClosing(P,$)&&(G=E.stringRepeat("}",m.maybeInsertedBrackets),x.clearMaybeInsertedClosing()),"}"===$.substring(P.column,P.column+1)){var D=W.findMatchingBracket({row:P.row,column:P.column+1},"}");if(!D)return null;var Y=this.$getIndent(W.getLine(D.row))}else{if(!G)return void x.clearMaybeInsertedClosing();Y=this.$getIndent($)}var ee=Y+W.getTabString();return{text:"\n"+ee+"\n"+Y+G,selection:[1,ee.length,1,ee.length]}}x.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(R,U,L,W,H){var P=W.doc.getTextRange(H);if(!H.isMultiLine()&&"{"==P){if(v(L),"}"==W.doc.getLine(H.start.row).substring(H.end.column,H.end.column+1))return H.end.column++,H;m.maybeInsertedBrackets--}}),this.add("parens","insertion",function(R,U,L,W,H){if("("==H){v(L);var P=L.getSelectionRange(),$=W.doc.getTextRange(P);if(""!==$&&L.getWrapBehavioursEnabled())return w(P,$,"(",")");if(x.isSaneInsertion(L,W))return x.recordAutoInsert(L,W,")"),{text:"()",selection:[1,1]}}else if(")"==H){v(L);var X=L.getCursorPosition(),V=W.doc.getLine(X.row);if(")"==V.substring(X.column,X.column+1)&&null!==W.$findOpeningBracket(")",{column:X.column+1,row:X.row})&&x.isAutoInsertedClosing(X,V,H))return x.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("parens","deletion",function(R,U,L,W,H){var P=W.doc.getTextRange(H);if(!H.isMultiLine()&&"("==P&&(v(L),")"==W.doc.getLine(H.start.row).substring(H.start.column+1,H.start.column+2)))return H.end.column++,H}),this.add("brackets","insertion",function(R,U,L,W,H){if("["==H){v(L);var P=L.getSelectionRange(),$=W.doc.getTextRange(P);if(""!==$&&L.getWrapBehavioursEnabled())return w(P,$,"[","]");if(x.isSaneInsertion(L,W))return x.recordAutoInsert(L,W,"]"),{text:"[]",selection:[1,1]}}else if("]"==H){v(L);var X=L.getCursorPosition(),V=W.doc.getLine(X.row);if("]"==V.substring(X.column,X.column+1)&&null!==W.$findOpeningBracket("]",{column:X.column+1,row:X.row})&&x.isAutoInsertedClosing(X,V,H))return x.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("brackets","deletion",function(R,U,L,W,H){var P=W.doc.getTextRange(H);if(!H.isMultiLine()&&"["==P&&(v(L),"]"==W.doc.getLine(H.start.row).substring(H.start.column+1,H.start.column+2)))return H.end.column++,H}),this.add("string_dquotes","insertion",function(R,U,L,W,H){var P=W.$mode.$quotes||p;if(1==H.length&&P[H]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(H))return;v(L);var $=H,X=L.getSelectionRange(),V=W.doc.getTextRange(X);if(""!==V&&(1!=V.length||!P[V])&&L.getWrapBehavioursEnabled())return w(X,V,$,$);if(!V){var N=L.getCursorPosition(),te=W.doc.getLine(N.row),G=te.substring(N.column-1,N.column),D=te.substring(N.column,N.column+1),Y=W.getTokenAt(N.row,N.column),ee=W.getTokenAt(N.row,N.column+1);if("\\"==G&&Y&&/escape/.test(Y.type))return null;var we,fe=Y&&/string|escape/.test(Y.type),_e=!ee||/string|escape/.test(ee.type);if(D==$)(we=fe!==_e)&&/string\.end/.test(ee.type)&&(we=!1);else{if(fe&&!_e||fe&&_e)return null;var ke=W.$mode.tokenRe;ke.lastIndex=0;var Ce=ke.test(G);ke.lastIndex=0;var We=ke.test(D),Te=W.$mode.$pairQuotesAfter;if(!(Te&&Te[$]&&Te[$].test(G))&&Ce||We||D&&!/[\s;,.})\]\\]/.test(D))return null;var et=te[N.column-2];if(G==$&&(et==$||ke.test(et)))return null;we=!0}return{text:we?$+$:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(R,U,L,W,H){var P=W.$mode.$quotes||p,$=W.doc.getTextRange(H);if(!H.isMultiLine()&&P.hasOwnProperty($)&&(v(L),W.doc.getLine(H.start.row).substring(H.start.column+1,H.start.column+2)==$))return H.end.column++,H}),!1!==A.closeDocComment&&this.add("doc comment end","insertion",function(R,U,L,W,H){if("doc-start"===R&&("\n"===H||"\r\n"===H)&&L.selection.isEmpty()){var P=L.getCursorPosition(),$=W.doc.getLine(P.row),X=W.doc.getLine(P.row+1),V=this.$getIndent($);if(/\s*\*/.test(X))return/^\s*\*/.test($)?{text:H+V+"* ",selection:[1,3+V.length,1,3+V.length]}:{text:H+V+" * ",selection:[1,3+V.length,1,3+V.length]};if(/\/\*\*/.test($.substring(0,P.column)))return{text:H+V+" * "+H+" "+V+"*/",selection:[1,4+V.length,1,4+V.length]}}})};x.isSaneInsertion=function(A,R){var U=A.getCursorPosition(),L=new B(R,U.row,U.column);if(!this.$matchTokenType(L.getCurrentToken()||"text",M)){if(/[)}\]]/.test(A.session.getLine(U.row)[U.column]))return!0;var W=new B(R,U.row,U.column+1);if(!this.$matchTokenType(W.getCurrentToken()||"text",M))return!1}return L.stepForward(),L.getCurrentTokenRow()!==U.row||this.$matchTokenType(L.getCurrentToken()||"text",g)},x.$matchTokenType=function(A,R){return R.indexOf(A.type||A)>-1},x.recordAutoInsert=function(A,R,U){var L=A.getCursorPosition(),W=R.doc.getLine(L.row);this.isAutoInsertedClosing(L,W,m.autoInsertedLineEnd[0])||(m.autoInsertedBrackets=0),m.autoInsertedRow=L.row,m.autoInsertedLineEnd=U+W.substr(L.column),m.autoInsertedBrackets++},x.recordMaybeInsert=function(A,R,U){var L=A.getCursorPosition(),W=R.doc.getLine(L.row);this.isMaybeInsertedClosing(L,W)||(m.maybeInsertedBrackets=0),m.maybeInsertedRow=L.row,m.maybeInsertedLineStart=W.substr(0,L.column)+U,m.maybeInsertedLineEnd=W.substr(L.column),m.maybeInsertedBrackets++},x.isAutoInsertedClosing=function(A,R,U){return m.autoInsertedBrackets>0&&A.row===m.autoInsertedRow&&U===m.autoInsertedLineEnd[0]&&R.substr(A.column)===m.autoInsertedLineEnd},x.isMaybeInsertedClosing=function(A,R){return m.maybeInsertedBrackets>0&&A.row===m.maybeInsertedRow&&R.substr(A.column)===m.maybeInsertedLineEnd&&R.substr(0,A.column)==m.maybeInsertedLineStart},x.popAutoInsertedClosing=function(){m.autoInsertedLineEnd=m.autoInsertedLineEnd.substr(1),m.autoInsertedBrackets--},x.clearMaybeInsertedClosing=function(){m&&(m.maybeInsertedBrackets=0,m.maybeInsertedRow=-1)},T.inherits(x,re),ie.CstyleBehaviour=x}),ace.define("ace/unicode",["require","exports","module"],function(Q,ie,xe){"use strict";for(var T=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],re=0,B=[],E=0;E<T.length;E+=2)B.push(re+=T[E]),T[E+1]&&B.push(45,re+=T[E+1]);ie.wordChars=String.fromCharCode.apply(null,B)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(Q,ie,xe){"use strict";var T=Q("../config"),re=Q("../tokenizer").Tokenizer,B=Q("./text_highlight_rules").TextHighlightRules,E=Q("./behaviour/cstyle").CstyleBehaviour,M=Q("../unicode"),g=Q("../lib/lang"),m=Q("../token_iterator").TokenIterator,_=Q("../range").Range,p=function(){this.HighlightRules=B};(function(){this.$defaultBehaviour=new E,this.tokenRe=new RegExp("^["+M.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+M.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new re(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(v,w,x,A){var R=w.doc,U=!0,L=!0,W=1/0,H=w.getTabSize(),P=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var V=this.lineCommentStart.map(g.escapeRegExp).join("|"),$=this.lineCommentStart[0];else V=g.escapeRegExp(this.lineCommentStart),$=this.lineCommentStart;V=new RegExp("^(\\s*)(?:"+V+") ?"),P=w.getUseSoftTabs();var G=function(We,Te){var Le=We.match(V);if(Le){var et=Le[1].length,Bt=Le[0].length;!ee(We,et,Bt)&&" "==Le[0][Bt-1]&&Bt--,R.removeInLine(Te,et,Bt)}},Y=$+" ",te=function(We,Te){(!U||/\S/.test(We))&&(ee(We,W,W)?R.insertInLine({row:Te,column:W},Y):R.insertInLine({row:Te,column:W},$))},D=function(We,Te){return V.test(We)},ee=function(We,Te,Le){for(var et=0;Te--&&" "==We.charAt(Te);)et++;if(et%H!=0)return!1;for(et=0;" "==We.charAt(Le++);)et++;return H>2?et%H!=H-1:et%H==0}}else{if(!this.blockComment)return!1;$=this.blockComment.start;var X=this.blockComment.end,N=(V=new RegExp("^(\\s*)(?:"+g.escapeRegExp($)+")"),new RegExp("(?:"+g.escapeRegExp(X)+")\\s*$"));te=function(we,ke){D(we,ke)||(!U||/\S/.test(we))&&(R.insertInLine({row:ke,column:we.length},X),R.insertInLine({row:ke,column:W},$))},G=function(we,ke){var Ce;(Ce=we.match(N))&&R.removeInLine(ke,we.length-Ce[0].length,we.length),(Ce=we.match(V))&&R.removeInLine(ke,Ce[1].length,Ce[0].length)},D=function(we,ke){if(V.test(we))return!0;for(var Ce=w.getTokens(ke),We=0;We<Ce.length;We++)if("comment"===Ce[We].type)return!0}}function fe(we){for(var ke=x;ke<=A;ke++)we(R.getLine(ke),ke)}var _e=1/0;fe(function(we,ke){var Ce=we.search(/\S/);-1!==Ce?(Ce<W&&(W=Ce),L&&!D(we,ke)&&(L=!1)):_e>we.length&&(_e=we.length)}),W==1/0&&(W=_e,U=!1,L=!1),P&&W%H!=0&&(W=Math.floor(W/H)*H),fe(L?G:te)},this.toggleBlockComment=function(v,w,x,A){var R=this.blockComment;if(R){!R.start&&R[0]&&(R=R[0]);var P,$,L=(U=new m(w,A.row,A.column)).getCurrentToken(),H=w.selection.toOrientedRange();if(L&&/comment/.test(L.type)){for(var X,V;L&&/comment/.test(L.type);){if(-1!=(N=L.value.indexOf(R.start))){var te=U.getCurrentTokenRow(),G=U.getCurrentTokenColumn()+N;X=new _(te,G,te,G+R.start.length);break}L=U.stepBackward()}var U;for(L=(U=new m(w,A.row,A.column)).getCurrentToken();L&&/comment/.test(L.type);){var N;if(-1!=(N=L.value.indexOf(R.end))){te=U.getCurrentTokenRow(),G=U.getCurrentTokenColumn()+N,V=new _(te,G,te,G+R.end.length);break}L=U.stepForward()}V&&w.remove(V),X&&(w.remove(X),P=X.start.row,$=-R.start.length)}else $=R.start.length,P=x.start.row,w.insert(x.end,R.end),w.insert(x.start,R.start);H.start.row==P&&(H.start.column+=$),H.end.row==P&&(H.end.column+=$),w.selection.fromOrientedRange(H)}},this.getNextLineIndent=function(v,w,x){return this.$getIndent(w)},this.checkOutdent=function(v,w,x){return!1},this.autoOutdent=function(v,w,x){},this.$getIndent=function(v){return v.match(/^\s*/)[0]},this.createWorker=function(v){return null},this.createModeDelegates=function(v){for(var w in this.$embeds=[],this.$modes={},v)if(v[w]){var x=v[w],A=x.prototype.$id,R=T.$modes[A];R||(T.$modes[A]=R=new x),T.$modes[w]||(T.$modes[w]=R),this.$embeds.push(w),this.$modes[w]=R}var U=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(w=0;w<U.length;w++)!function(W){var H=U[w],P=W[H];W[U[w]]=function(){return this.$delegator(H,arguments,P)}}(this)},this.$delegator=function(v,w,x){var A=w[0]||"start";if("string"!=typeof A){if(Array.isArray(A[2])&&(U=this.$modes[A[2][A[2].length-1]]))return U[v].apply(U,[A[1]].concat([].slice.call(w,1)));A=A[0]||"start"}for(var L=0;L<this.$embeds.length;L++)if(this.$modes[this.$embeds[L]]){var U,W=A.split(this.$embeds[L]);if(!W[0]&&W[1])return w[0]=W[1],(U=this.$modes[this.$embeds[L]])[v].apply(U,w)}var H=x.apply(this,w);return x?H:void 0},this.transformAction=function(v,w,x,A,R){if(this.$behaviour){var U=this.$behaviour.getBehaviours();for(var L in U)if(U[L][w]){var W=U[L][w].apply(this,arguments);if(W)return W}}},this.getKeywords=function(v){if(!this.completionKeywords){var w=this.$tokenizer.rules,x=[];for(var A in w)for(var R=w[A],U=0,L=R.length;U<L;U++)if("string"==typeof R[U].token)/keyword|support|storage/.test(R[U].token)&&x.push(R[U].regex);else if("object"==typeof R[U].token)for(var W=0,H=R[U].token.length;W<H;W++)/keyword|support|storage/.test(R[U].token[W])&&(A=R[U].regex.match(/\(.+?\)/g)[W],x.push(A.substr(1,A.length-2)));this.completionKeywords=x}return v?x.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(v,w,x,A){return(this.$keywordList||this.$createKeywordList()).map(function(U){return{name:U,value:U,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(p.prototype),ie.Mode=p}),ace.define("ace/apply_delta",["require","exports","module"],function(Q,ie,xe){"use strict";ie.applyDelta=function(E,M,g){var m=M.start.row,_=M.start.column,p=E[m]||"";switch(M.action){case"insert":if(1===M.lines.length)E[m]=p.substring(0,_)+M.lines[0]+p.substring(_);else{var w=[m,1].concat(M.lines);E.splice.apply(E,w),E[m]=p.substring(0,_)+E[m],E[m+M.lines.length-1]+=p.substring(_)}break;case"remove":var x=M.end.column,A=M.end.row;m===A?E[m]=p.substring(0,_)+p.substring(x):E.splice(m,A-m+1,p.substring(0,_)+E[A].substring(x))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(Q,ie,xe){"use strict";var T=Q("./lib/oop"),re=Q("./lib/event_emitter").EventEmitter,B=function(){function g(m,_,p){this.$onChange=this.onChange.bind(this),this.attach(m),typeof p>"u"?this.setPosition(_.row,_.column):this.setPosition(_,p)}return g.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},g.prototype.getDocument=function(){return this.document},g.prototype.onChange=function(m){if(!(m.start.row==m.end.row&&m.start.row!=this.row||m.start.row>this.row)){var _=function M(g,m,_){var p="insert"==g.action,v=(p?1:-1)*(g.end.row-g.start.row),w=(p?1:-1)*(g.end.column-g.start.column),x=g.start,A=p?x:g.end;return E(m,x,_)?{row:m.row,column:m.column}:E(A,m,!_)?{row:m.row+v,column:m.column+(m.row==A.row?w:0)}:{row:x.row,column:x.column}}(m,{row:this.row,column:this.column},this.$insertRight);this.setPosition(_.row,_.column,!0)}},g.prototype.setPosition=function(m,_,p){var v;if(v=p?{row:m,column:_}:this.$clipPositionToDocument(m,_),this.row!=v.row||this.column!=v.column){var w={row:this.row,column:this.column};this.row=v.row,this.column=v.column,this._signal("change",{old:w,value:v})}},g.prototype.detach=function(){this.document.off("change",this.$onChange)},g.prototype.attach=function(m){this.document=m||this.document,this.document.on("change",this.$onChange)},g.prototype.$clipPositionToDocument=function(m,_){var p={};return m>=this.document.getLength()?(p.row=Math.max(0,this.document.getLength()-1),p.column=this.document.getLine(p.row).length):m<0?(p.row=0,p.column=0):(p.row=m,p.column=Math.min(this.document.getLine(p.row).length,Math.max(0,_))),_<0&&(p.column=0),p},g}();function E(g,m,_){return g.row<m.row||g.row==m.row&&(_?g.column<=m.column:g.column<m.column)}B.prototype.$insertRight=!1,T.implement(B.prototype,re),ie.Anchor=B}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(Q,ie,xe){"use strict";var T=Q("./lib/oop"),re=Q("./apply_delta").applyDelta,B=Q("./lib/event_emitter").EventEmitter,E=Q("./range").Range,M=Q("./anchor").Anchor,g=function(){function m(_){this.$lines=[""],0===_.length?this.$lines=[""]:Array.isArray(_)?this.insertMergedLines({row:0,column:0},_):this.insert({row:0,column:0},_)}return m.prototype.setValue=function(_){var p=this.getLength()-1;this.remove(new E(0,0,p,this.getLine(p).length)),this.insert({row:0,column:0},_||"")},m.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},m.prototype.createAnchor=function(_,p){return new M(this,_,p)},m.prototype.$detectNewLine=function(_){var p=_.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=p?p[1]:"\n",this._signal("changeNewLineMode")},m.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},m.prototype.setNewLineMode=function(_){this.$newLineMode!==_&&(this.$newLineMode=_,this._signal("changeNewLineMode"))},m.prototype.getNewLineMode=function(){return this.$newLineMode},m.prototype.isNewLine=function(_){return"\r\n"==_||"\r"==_||"\n"==_},m.prototype.getLine=function(_){return this.$lines[_]||""},m.prototype.getLines=function(_,p){return this.$lines.slice(_,p+1)},m.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},m.prototype.getLength=function(){return this.$lines.length},m.prototype.getTextRange=function(_){return this.getLinesForRange(_).join(this.getNewLineCharacter())},m.prototype.getLinesForRange=function(_){var p;if(_.start.row===_.end.row)p=[this.getLine(_.start.row).substring(_.start.column,_.end.column)];else{(p=this.getLines(_.start.row,_.end.row))[0]=(p[0]||"").substring(_.start.column);var v=p.length-1;_.end.row-_.start.row==v&&(p[v]=p[v].substring(0,_.end.column))}return p},m.prototype.insertLines=function(_,p){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(_,p)},m.prototype.removeLines=function(_,p){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(_,p)},m.prototype.insertNewLine=function(_){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(_,["",""])},m.prototype.insert=function(_,p){return this.getLength()<=1&&this.$detectNewLine(p),this.insertMergedLines(_,this.$split(p))},m.prototype.insertInLine=function(_,p){var v=this.clippedPos(_.row,_.column),w=this.pos(_.row,_.column+p.length);return this.applyDelta({start:v,end:w,action:"insert",lines:[p]},!0),this.clonePos(w)},m.prototype.clippedPos=function(_,p){var v=this.getLength();void 0===_?_=v:_<0?_=0:_>=v&&(_=v-1,p=void 0);var w=this.getLine(_);return null==p&&(p=w.length),{row:_,column:p=Math.min(Math.max(p,0),w.length)}},m.prototype.clonePos=function(_){return{row:_.row,column:_.column}},m.prototype.pos=function(_,p){return{row:_,column:p}},m.prototype.$clipPosition=function(_){var p=this.getLength();return _.row>=p?(_.row=Math.max(0,p-1),_.column=this.getLine(p-1).length):(_.row=Math.max(0,_.row),_.column=Math.min(Math.max(_.column,0),this.getLine(_.row).length)),_},m.prototype.insertFullLines=function(_,p){var v=0;(_=Math.min(Math.max(_,0),this.getLength()))<this.getLength()?(p=p.concat([""]),v=0):(p=[""].concat(p),_--,v=this.$lines[_].length),this.insertMergedLines({row:_,column:v},p)},m.prototype.insertMergedLines=function(_,p){var v=this.clippedPos(_.row,_.column),w={row:v.row+p.length-1,column:(1==p.length?v.column:0)+p[p.length-1].length};return this.applyDelta({start:v,end:w,action:"insert",lines:p}),this.clonePos(w)},m.prototype.remove=function(_){var p=this.clippedPos(_.start.row,_.start.column),v=this.clippedPos(_.end.row,_.end.column);return this.applyDelta({start:p,end:v,action:"remove",lines:this.getLinesForRange({start:p,end:v})}),this.clonePos(p)},m.prototype.removeInLine=function(_,p,v){var w=this.clippedPos(_,p),x=this.clippedPos(_,v);return this.applyDelta({start:w,end:x,action:"remove",lines:this.getLinesForRange({start:w,end:x})},!0),this.clonePos(w)},m.prototype.removeFullLines=function(_,p){_=Math.min(Math.max(0,_),this.getLength()-1);var v=(p=Math.min(Math.max(0,p),this.getLength()-1))==this.getLength()-1&&_>0,w=p<this.getLength()-1,x=v?_-1:_,A=v?this.getLine(x).length:0,R=w?p+1:p,U=w?0:this.getLine(R).length,L=new E(x,A,R,U),W=this.$lines.slice(_,p+1);return this.applyDelta({start:L.start,end:L.end,action:"remove",lines:this.getLinesForRange(L)}),W},m.prototype.removeNewLine=function(_){_<this.getLength()-1&&_>=0&&this.applyDelta({start:this.pos(_,this.getLine(_).length),end:this.pos(_+1,0),action:"remove",lines:["",""]})},m.prototype.replace=function(_,p){return _ instanceof E||(_=E.fromPoints(_.start,_.end)),0===p.length&&_.isEmpty()?_.start:p==this.getTextRange(_)?_.end:(this.remove(_),p?this.insert(_.start,p):_.start)},m.prototype.applyDeltas=function(_){for(var p=0;p<_.length;p++)this.applyDelta(_[p])},m.prototype.revertDeltas=function(_){for(var p=_.length-1;p>=0;p--)this.revertDelta(_[p])},m.prototype.applyDelta=function(_,p){var v="insert"==_.action;(v?_.lines.length<=1&&!_.lines[0]:!E.comparePoints(_.start,_.end))||(v&&_.lines.length>2e4?this.$splitAndapplyLargeDelta(_,2e4):(re(this.$lines,_,p),this._signal("change",_)))},m.prototype.$safeApplyDelta=function(_){var p=this.$lines.length;("remove"==_.action&&_.start.row<p&&_.end.row<p||"insert"==_.action&&_.start.row<=p)&&this.applyDelta(_)},m.prototype.$splitAndapplyLargeDelta=function(_,p){for(var v=_.lines,w=v.length-p+1,x=_.start.row,A=_.start.column,R=0,U=0;R<w;R=U){var L=v.slice(R,U+=p-1);L.push(""),this.applyDelta({start:this.pos(x+R,A),end:this.pos(x+U,A=0),action:_.action,lines:L},!0)}_.lines=v.slice(R),_.start.row=x+R,_.start.column=A,this.applyDelta(_,!0)},m.prototype.revertDelta=function(_){this.$safeApplyDelta({start:this.clonePos(_.start),end:this.clonePos(_.end),action:"insert"==_.action?"remove":"insert",lines:_.lines.slice()})},m.prototype.indexToPosition=function(_,p){for(var v=this.$lines||this.getAllLines(),w=this.getNewLineCharacter().length,x=p||0,A=v.length;x<A;x++)if((_-=v[x].length+w)<0)return{row:x,column:_+v[x].length+w};return{row:A-1,column:_+v[A-1].length+w}},m.prototype.positionToIndex=function(_,p){for(var v=this.$lines||this.getAllLines(),w=this.getNewLineCharacter().length,x=0,A=Math.min(_.row,v.length),R=p||0;R<A;++R)x+=v[R].length+w;return x+_.column},m.prototype.$split=function(_){return _.split(/\r\n|\r|\n/)},m}();g.prototype.$autoNewLine="",g.prototype.$newLineMode="auto",T.implement(g.prototype,B),ie.Document=g}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(Q,ie,xe){"use strict";var T=Q("./lib/oop"),re=Q("./lib/event_emitter").EventEmitter,B=function(){function E(M,g){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=M;var m=this;this.$worker=function(){if(m.running){for(var _=new Date,p=m.currentLine,v=-1,w=m.doc,x=p;m.lines[p];)p++;var A=w.getLength(),R=0;for(m.running=!1;p<A;){m.$tokenizeRow(p),v=p;do{p++}while(m.lines[p]);if(++R%5==0&&new Date-_>20){m.running=setTimeout(m.$worker,20);break}}m.currentLine=p,-1==v&&(v=p),x<=v&&m.fireUpdateEvent(x,v)}}}return E.prototype.setTokenizer=function(M){this.tokenizer=M,this.lines=[],this.states=[],this.start(0)},E.prototype.setDocument=function(M){this.doc=M,this.lines=[],this.states=[],this.stop()},E.prototype.fireUpdateEvent=function(M,g){this._signal("update",{data:{first:M,last:g}})},E.prototype.start=function(M){this.currentLine=Math.min(M||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},E.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},E.prototype.$updateOnChange=function(M){var g=M.start.row,m=M.end.row-g;if(0===m)this.lines[g]=null;else if("remove"==M.action)this.lines.splice(g,m+1,null),this.states.splice(g,m+1,null);else{var _=Array(m+1);_.unshift(g,1),this.lines.splice.apply(this.lines,_),this.states.splice.apply(this.states,_)}this.currentLine=Math.min(g,this.currentLine,this.doc.getLength()),this.stop()},E.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},E.prototype.getTokens=function(M){return this.lines[M]||this.$tokenizeRow(M)},E.prototype.getState=function(M){return this.currentLine==M&&this.$tokenizeRow(M),this.states[M]||"start"},E.prototype.$tokenizeRow=function(M){var g=this.doc.getLine(M),_=this.tokenizer.getLineTokens(g,this.states[M-1],M);return this.states[M]+""!=_.state+""?(this.states[M]=_.state,this.lines[M+1]=null,this.currentLine>M+1&&(this.currentLine=M+1)):this.currentLine==M&&(this.currentLine=M+1),this.lines[M]=_.tokens},E.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},E}();T.implement(B.prototype,re),ie.BackgroundTokenizer=B}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(Q,ie,xe){"use strict";var T=Q("./lib/lang"),re=Q("./range").Range,B=function(){function E(M,g,m){void 0===m&&(m="text"),this.setRegexp(M),this.clazz=g,this.type=m}return E.prototype.setRegexp=function(M){this.regExp+""!=M+""&&(this.regExp=M,this.cache=[])},E.prototype.update=function(M,g,m,_){if(this.regExp)for(var v=_.lastRow,w={},x=_.firstRow;x<=v;x++){var A=this.cache[x];null==A&&((A=T.getMatchOffsets(m.getLine(x),this.regExp)).length>this.MAX_RANGES&&(A=A.slice(0,this.MAX_RANGES)),A=A.map(function(W){return new re(x,W.offset,x,W.offset+W.length)}),this.cache[x]=A.length?A:"");for(var R=A.length;R--;){var U=A[R].toScreenRange(m),L=U.toString();w[L]||(w[L]=!0,g.drawSingleLineMarker(M,U,this.clazz,_))}}},E}();B.prototype.MAX_RANGES=500,ie.SearchHighlight=B}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(Q,ie,xe){"use strict";var T=Q("../range").Range,re=function(){function B(E,M){this.foldData=E,Array.isArray(M)?this.folds=M:M=this.folds=[M];var g=M[M.length-1];this.range=new T(M[0].start.row,M[0].start.column,g.end.row,g.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(m){m.setFoldLine(this)},this)}return B.prototype.shiftRow=function(E){this.start.row+=E,this.end.row+=E,this.folds.forEach(function(M){M.start.row+=E,M.end.row+=E})},B.prototype.addFold=function(E){if(E.sameRow){if(E.start.row<this.startRow||E.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(E),this.folds.sort(function(M,g){return-M.range.compareEnd(g.start.row,g.start.column)}),this.range.compareEnd(E.start.row,E.start.column)>0?(this.end.row=E.end.row,this.end.column=E.end.column):this.range.compareStart(E.end.row,E.end.column)<0&&(this.start.row=E.start.row,this.start.column=E.start.column)}else if(E.start.row==this.end.row)this.folds.push(E),this.end.row=E.end.row,this.end.column=E.end.column;else{if(E.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(E),this.start.row=E.start.row,this.start.column=E.start.column}E.foldLine=this},B.prototype.containsRow=function(E){return E>=this.start.row&&E<=this.end.row},B.prototype.walk=function(E,M,g){var p,v,m=0,_=this.folds,x=!0;null==M&&(M=this.end.row,g=this.end.column);for(var A=0;A<_.length;A++){if(-1==(v=(p=_[A]).range.compareStart(M,g)))return void E(null,M,g,m,x);if(!E(null,p.start.row,p.start.column,m,x)&&E(p.placeholder,p.start.row,p.start.column,m)||0===v)return;x=!p.sameRow,m=p.end.column}E(null,M,g,m,x)},B.prototype.getNextFoldTo=function(E,M){for(var g,m,_=0;_<this.folds.length;_++){if(-1==(m=(g=this.folds[_]).range.compareEnd(E,M)))return{fold:g,kind:"after"};if(0===m)return{fold:g,kind:"inside"}}return null},B.prototype.addRemoveChars=function(E,M,g){var _,p,m=this.getNextFoldTo(E,M);if(m)if(_=m.fold,"inside"==m.kind&&_.start.column!=M&&_.start.row!=E)window.console&&window.console.log(E,M,_);else if(_.start.row==E){var v=(p=this.folds).indexOf(_);for(0===v&&(this.start.column+=g);v<p.length;v++){if((_=p[v]).start.column+=g,!_.sameRow)return;_.end.column+=g}this.end.column+=g}},B.prototype.split=function(E,M){var g=this.getNextFoldTo(E,M);if(!g||"inside"==g.kind)return null;var _=this.folds,p=this.foldData,v=_.indexOf(g.fold),w=_[v-1];this.end.row=w.end.row,this.end.column=w.end.column;var x=new B(p,_=_.splice(v,_.length-v));return p.splice(p.indexOf(this)+1,0,x),x},B.prototype.merge=function(E){for(var M=E.folds,g=0;g<M.length;g++)this.addFold(M[g]);var m=this.foldData;m.splice(m.indexOf(E),1)},B.prototype.toString=function(){var E=[this.range.toString()+": ["];return this.folds.forEach(function(M){E.push("  "+M.toString())}),E.push("]"),E.join("\n")},B.prototype.idxToPosition=function(E){for(var M=0,g=0;g<this.folds.length;g++){var m=this.folds[g];if((E-=m.start.column-M)<0)return{row:m.start.row,column:m.start.column+E};if((E-=m.placeholder.length)<0)return m.start;M=m.end.column}return{row:this.end.row,column:this.end.column+E}},B}();ie.FoldLine=re}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(Q,ie,xe){"use strict";var re=Q("./range").Range.comparePoints,B=function(){function E(){this.ranges=[],this.$bias=1}return E.prototype.pointIndex=function(M,g,m){for(var _=this.ranges,p=m||0;p<_.length;p++){var v=_[p],w=re(M,v.end);if(!(w>0)){var x=re(M,v.start);return 0===w?g&&0!==x?-p-2:p:x>0||0===x&&!g?p:-p-1}}return-p-1},E.prototype.add=function(M){var g=!M.isEmpty(),m=this.pointIndex(M.start,g);m<0&&(m=-m-1);var _=this.pointIndex(M.end,g,m);return _<0?_=-_-1:_++,this.ranges.splice(m,_-m,M)},E.prototype.addList=function(M){for(var g=[],m=M.length;m--;)g.push.apply(g,this.add(M[m]));return g},E.prototype.substractPoint=function(M){var g=this.pointIndex(M);if(g>=0)return this.ranges.splice(g,1)},E.prototype.merge=function(){for(var _,M=[],g=this.ranges,m=(g=g.sort(function(w,x){return re(w.start,x.start)}))[0],p=1;p<g.length;p++){var v=re((_=m).end,(m=g[p]).start);v<0||0==v&&!_.isEmpty()&&!m.isEmpty()||(re(_.end,m.end)<0&&(_.end.row=m.end.row,_.end.column=m.end.column),g.splice(p,1),M.push(m),m=_,p--)}return this.ranges=g,M},E.prototype.contains=function(M,g){return this.pointIndex({row:M,column:g})>=0},E.prototype.containsPoint=function(M){return this.pointIndex(M)>=0},E.prototype.rangeAtPoint=function(M){var g=this.pointIndex(M);if(g>=0)return this.ranges[g]},E.prototype.clipRows=function(M,g){var m=this.ranges;if(m[0].start.row>g||m[m.length-1].start.row<M)return[];var _=this.pointIndex({row:M,column:0});_<0&&(_=-_-1);var p=this.pointIndex({row:g,column:0},_);p<0&&(p=-p-1);for(var v=[],w=_;w<p;w++)v.push(m[w]);return v},E.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},E.prototype.attach=function(M){this.session&&this.detach(),this.session=M,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},E.prototype.detach=function(){!this.session||(this.session.removeListener("change",this.onChange),this.session=null)},E.prototype.$onChange=function(M){for(var g=M.start,m=M.end,_=g.row,p=m.row,v=this.ranges,w=0,x=v.length;w<x&&!((A=v[w]).end.row>=_);w++);if("insert"==M.action){for(var R=p-_,U=-g.column+m.column;w<x&&!((A=v[w]).start.row>_);w++)if(A.start.row==_&&A.start.column>=g.column&&(A.start.column==g.column&&this.$bias<=0||(A.start.column+=U,A.start.row+=R)),A.end.row==_&&A.end.column>=g.column){if(A.end.column==g.column&&this.$bias<0)continue;A.end.column==g.column&&U>0&&w<x-1&&A.end.column>A.start.column&&A.end.column==v[w+1].start.column&&(A.end.column-=U),A.end.column+=U,A.end.row+=R}}else for(R=_-p,U=g.column-m.column;w<x&&!((A=v[w]).start.row>p);w++)A.end.row<p&&(_<A.end.row||_==A.end.row&&g.column<A.end.column)?(A.end.row=_,A.end.column=g.column):A.end.row==p?A.end.column<=m.column?(R||A.end.column>g.column)&&(A.end.column=g.column,A.end.row=g.row):(A.end.column+=U,A.end.row+=R):A.end.row>p&&(A.end.row+=R),A.start.row<p&&(_<A.start.row||_==A.start.row&&g.column<A.start.column)?(A.start.row=_,A.start.column=g.column):A.start.row==p?A.start.column<=m.column?(R||A.start.column>g.column)&&(A.start.column=g.column,A.start.row=g.row):(A.start.column+=U,A.start.row+=R):A.start.row>p&&(A.start.row+=R);if(0!=R&&w<x)for(;w<x;w++){var A;(A=v[w]).start.row+=R,A.end.row+=R}},E}();B.prototype.comparePoints=re,ie.RangeList=B}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(Q,ie,xe){"use strict";var _,T=this&&this.__extends||(_=function(p,v){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,x){w.__proto__=x}||function(w,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(w[A]=x[A])})(p,v)},function(p,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function w(){this.constructor=p}_(p,v),p.prototype=null===v?Object.create(v):(w.prototype=v.prototype,new w)}),B=function(_){function p(v,w){var x=_.call(this)||this;return x.foldLine=null,x.placeholder=w,x.range=v,x.start=v.start,x.end=v.end,x.sameRow=v.start.row==v.end.row,x.subFolds=x.ranges=[],x}return T(p,_),p.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},p.prototype.setFoldLine=function(v){this.foldLine=v,this.subFolds.forEach(function(w){w.setFoldLine(v)})},p.prototype.clone=function(){var w=new p(this.range.clone(),this.placeholder);return this.subFolds.forEach(function(x){w.subFolds.push(x.clone())}),w.collapseChildren=this.collapseChildren,w},p.prototype.addSubFold=function(v){if(!this.range.isEqual(v)){!function M(_,p){E(_.start,p),E(_.end,p)}(v,this.start);for(var U=v.start.row,L=v.start.column,w=0,x=-1;w<this.subFolds.length&&1==(x=this.subFolds[w].range.compare(U,L));w++);var A=this.subFolds[w],R=0;if(0==x){if(A.range.containsRange(v))return A.addSubFold(v);R=1}U=v.range.end.row,L=v.range.end.column;var W=w;for(x=-1;W<this.subFolds.length&&1==(x=this.subFolds[W].range.compare(U,L));W++);0==x&&W++;for(var H=this.subFolds.splice(w,W-w,v),P=0==x?H.length-1:H.length,$=R;$<P;$++)v.addSubFold(H[$]);return v.setFoldLine(this.foldLine),v}},p.prototype.restoreRange=function(v){return function m(_,p){g(_.start,p),g(_.end,p)}(v,this.start)},p}(Q("../range_list").RangeList);function E(_,p){_.row-=p.row,0==_.row&&(_.column-=p.column)}function g(_,p){0==_.row&&(_.column+=p.column),_.row+=p.row}ie.Fold=B}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(Q,ie,xe){"use strict";var T=Q("../range").Range,re=Q("./fold_line").FoldLine,B=Q("./fold").Fold,E=Q("../token_iterator").TokenIterator,M=Q("../mouse/mouse_event").MouseEvent;ie.Folding=function g(){this.getFoldAt=function(m,_,p){var v=this.getFoldLine(m);if(!v)return null;for(var w=v.folds,x=0;x<w.length;x++){var A=w[x].range;if(A.contains(m,_)){if(1==p&&A.isEnd(m,_)&&!A.isEmpty())continue;if(-1==p&&A.isStart(m,_)&&!A.isEmpty())continue;return w[x]}}},this.getFoldsInRange=function(m){var _=m.start,p=m.end,v=this.$foldData,w=[];_.column+=1,p.column-=1;for(var x=0;x<v.length;x++){var A=v[x].range.compareRange(m);if(2!=A){if(-2==A)break;for(var R=v[x].folds,U=0;U<R.length;U++){var L=R[U];if(-2==(A=L.range.compareRange(m)))break;if(2!=A){if(42==A)break;w.push(L)}}}}return _.column-=1,p.column+=1,w},this.getFoldsInRangeList=function(m){if(Array.isArray(m)){var _=[];m.forEach(function(p){_=_.concat(this.getFoldsInRange(p))},this)}else _=this.getFoldsInRange(m);return _},this.getAllFolds=function(){for(var m=[],_=this.$foldData,p=0;p<_.length;p++)for(var v=0;v<_[p].folds.length;v++)m.push(_[p].folds[v]);return m},this.getFoldStringAt=function(m,_,p,v){if(!(v=v||this.getFoldLine(m)))return null;for(var x,A,w={end:{column:0}},R=0;R<v.folds.length;R++){var U=(A=v.folds[R]).range.compareEnd(m,_);if(-1==U){x=this.getLine(A.start.row).substring(w.end.column,A.start.column);break}if(0===U)return null;w=A}return x||(x=this.getLine(A.start.row).substring(w.end.column)),-1==p?x.substring(0,_-w.end.column):1==p?x.substring(_-w.end.column):x},this.getFoldLine=function(m,_){var p=this.$foldData,v=0;for(_&&(v=p.indexOf(_)),-1==v&&(v=0);v<p.length;v++){var w=p[v];if(w.start.row<=m&&w.end.row>=m)return w;if(w.end.row>m)return null}return null},this.getNextFoldLine=function(m,_){var p=this.$foldData,v=0;for(_&&(v=p.indexOf(_)),-1==v&&(v=0);v<p.length;v++){var w=p[v];if(w.end.row>=m)return w}return null},this.getFoldedRowCount=function(m,_){for(var p=this.$foldData,v=_-m+1,w=0;w<p.length;w++){var x=p[w],A=x.end.row,R=x.start.row;if(A>=_){R<_&&(R>=m?v-=_-R:v=0);break}A>=m&&(v-=R>=m?A-R:A-m+1)}return v},this.$addFoldLine=function(m){return this.$foldData.push(m),this.$foldData.sort(function(_,p){return _.start.row-p.start.row}),m},this.addFold=function(m,_){var w,p=this.$foldData,v=!1;m instanceof B?w=m:(w=new B(_,m)).collapseChildren=_.collapseChildren,this.$clipRangeToDocument(w.range);var x=w.start.row,A=w.start.column,R=w.end.row,U=w.end.column,L=this.getFoldAt(x,A,1),W=this.getFoldAt(R,U,-1);if(L&&W==L)return L.addSubFold(w);L&&!L.range.isStart(x,A)&&this.removeFold(L),W&&!W.range.isEnd(R,U)&&this.removeFold(W);var H=this.getFoldsInRange(w.range);H.length>0&&(this.removeFolds(H),w.collapseChildren||H.forEach(function(V){w.addSubFold(V)}));for(var P=0;P<p.length;P++){var $=p[P];if(R==$.start.row){$.addFold(w),v=!0;break}if(x==$.end.row){if($.addFold(w),v=!0,!w.sameRow){var X=p[P+1];if(X&&X.start.row==R){$.merge(X);break}}break}if(R<=$.start.row)break}return v||($=this.$addFoldLine(new re(this.$foldData,w))),this.$useWrapMode?this.$updateWrapData($.start.row,$.start.row):this.$updateRowLengthCache($.start.row,$.start.row),this.$modified=!0,this._signal("changeFold",{data:w,action:"add"}),w},this.addFolds=function(m){m.forEach(function(_){this.addFold(_)},this)},this.removeFold=function(m){var _=m.foldLine,p=_.start.row,v=_.end.row,w=this.$foldData,x=_.folds;if(1==x.length)w.splice(w.indexOf(_),1);else if(_.range.isEnd(m.end.row,m.end.column))x.pop(),_.end.row=x[x.length-1].end.row,_.end.column=x[x.length-1].end.column;else if(_.range.isStart(m.start.row,m.start.column))x.shift(),_.start.row=x[0].start.row,_.start.column=x[0].start.column;else if(m.sameRow)x.splice(x.indexOf(m),1);else{var A=_.split(m.start.row,m.start.column);(x=A.folds).shift(),A.start.row=x[0].start.row,A.start.column=x[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(p,v):this.$updateRowLengthCache(p,v)),this.$modified=!0,this._signal("changeFold",{data:m,action:"remove"})},this.removeFolds=function(m){for(var _=[],p=0;p<m.length;p++)_.push(m[p]);_.forEach(function(v){this.removeFold(v)},this),this.$modified=!0},this.expandFold=function(m){this.removeFold(m),m.subFolds.forEach(function(_){m.restoreRange(_),this.addFold(_)},this),m.collapseChildren>0&&this.foldAll(m.start.row+1,m.end.row,m.collapseChildren-1),m.subFolds=[]},this.expandFolds=function(m){m.forEach(function(_){this.expandFold(_)},this)},this.unfold=function(m,_){var p,v;if(null==m)p=new T(0,0,this.getLength(),0),null==_&&(_=!0);else if("number"==typeof m)p=new T(m,0,m,this.getLine(m).length);else if("row"in m)p=T.fromPoints(m,m);else{if(Array.isArray(m))return v=[],m.forEach(function(x){v=v.concat(this.unfold(x))},this),v;p=m}for(var w=v=this.getFoldsInRangeList(p);1==v.length&&T.comparePoints(v[0].start,p.start)<0&&T.comparePoints(v[0].end,p.end)>0;)this.expandFolds(v),v=this.getFoldsInRangeList(p);if(0!=_?this.removeFolds(v):this.expandFolds(v),w.length)return w},this.isRowFolded=function(m,_){return!!this.getFoldLine(m,_)},this.getRowFoldEnd=function(m,_){var p=this.getFoldLine(m,_);return p?p.end.row:m},this.getRowFoldStart=function(m,_){var p=this.getFoldLine(m,_);return p?p.start.row:m},this.getFoldDisplayLine=function(m,_,p,v,w){null==v&&(v=m.start.row),null==w&&(w=0),null==_&&(_=m.end.row),null==p&&(p=this.getLine(_).length);var x=this.doc,A="";return m.walk(function(R,U,L,W){if(!(U<v)){if(U==v){if(L<w)return;W=Math.max(w,W)}A+=null!=R?R:x.getLine(U).substring(W,L)}},_,p),A},this.getDisplayLine=function(m,_,p,v){var x,w=this.getFoldLine(m);return w?this.getFoldDisplayLine(w,m,_,p,v):(x=this.doc.getLine(m)).substring(v||0,_||x.length)},this.$cloneFoldData=function(){var m=[];return m=this.$foldData.map(function(_){var p=_.folds.map(function(v){return v.clone()});return new re(m,p)})},this.toggleFold=function(m){var v,w,p=this.selection.getRange();if(p.isEmpty()){var x=p.start;if(v=this.getFoldAt(x.row,x.column))return void this.expandFold(v);(w=this.findMatchingBracket(x))?1==p.comparePoint(w)?p.end=w:(p.start=w,p.start.column++,p.end.column--):(w=this.findMatchingBracket({row:x.row,column:x.column+1}))?(1==p.comparePoint(w)?p.end=w:p.start=w,p.start.column++):p=this.getCommentFoldRange(x.row,x.column)||p}else{var A=this.getFoldsInRange(p);if(m&&A.length)return void this.expandFolds(A);1==A.length&&(v=A[0])}if(v||(v=this.getFoldAt(p.start.row,p.start.column)),v&&v.range.toString()==p.toString())this.expandFold(v);else{var R="...";if(!p.isMultiLine()){if((R=this.getTextRange(p)).length<4)return;R=R.trim().substring(0,2)+".."}this.addFold(R,p)}},this.getCommentFoldRange=function(m,_,p){var v=new E(this,m,_),w=v.getCurrentToken(),x=w&&w.type;if(w&&/^comment|string/.test(x)){"comment"==(x=x.match(/comment|string/)[0])&&(x+="|doc-start|\\.doc");var A=new RegExp(x),R=new T;if(1!=p){do{w=v.stepBackward()}while(w&&A.test(w.type)&&!/^comment.end/.test(w.type));w=v.stepForward()}if(R.start.row=v.getCurrentTokenRow(),R.start.column=v.getCurrentTokenColumn()+(/^comment.start/.test(w.type)?w.value.length:2),v=new E(this,m,_),-1!=p){var U=-1;do{if(w=v.stepForward(),-1==U){var L=this.getState(v.$row);A.test(L)||(U=v.$row)}else if(v.$row>U)break}while(w&&A.test(w.type)&&!/^comment.start/.test(w.type));w=v.stepBackward()}else w=v.getCurrentToken();return R.end.row=v.getCurrentTokenRow(),R.end.column=v.getCurrentTokenColumn(),/^comment.end/.test(w.type)||(R.end.column+=w.value.length-2),R}},this.foldAll=function(m,_,p,v){null==p&&(p=1e5);var w=this.foldWidgets;if(w){_=_||this.getLength();for(var x=m=m||0;x<_;x++)if(null==w[x]&&(w[x]=this.getFoldWidget(x)),"start"==w[x]&&(!v||v(x))){var A=this.getFoldWidgetRange(x);A&&A.isMultiLine()&&A.end.row<=_&&A.start.row>=m&&(x=A.end.row,A.collapseChildren=p,this.addFold("...",A))}}},this.foldToLevel=function(m){for(this.foldAll();m-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var m=this;this.foldAll(null,null,null,function(_){for(var p=m.getTokens(_),v=0;v<p.length;v++){var w=p[v];if("text"!=w.type||!/^\s+$/.test(w.value))return!!/comment/.test(w.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(m){if(!this.$foldStyles[m])throw new Error("invalid fold style: "+m+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=m){this.$foldStyle=m,"manual"==m&&this.unfold();var _=this.$foldMode;this.$setFolding(null),this.$setFolding(_)}},this.$setFolding=function(m){if(this.$foldMode!=m){if(this.$foldMode=m,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!m||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=m.getFoldWidget.bind(m,this,this.$foldStyle),this.getFoldWidgetRange=m.getFoldWidgetRange.bind(m,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(m,_){var p=this.foldWidgets;if(!p||_&&p[m])return{};for(var w,v=m-1;v>=0;){var x=p[v];if(null==x&&(x=p[v]=this.getFoldWidget(v)),"start"==x){var A=this.getFoldWidgetRange(v);if(w||(w=A),A&&A.end.row>=m)break}v--}return{range:-1!==v&&A,firstRange:w}},this.onFoldWidgetClick=function(m,_){if(_ instanceof M&&(_=_.domEvent),!this.$toggleFoldWidget(m,{children:_.shiftKey,all:_.ctrlKey||_.metaKey,siblings:_.altKey})){var w=_.target||_.srcElement;w&&/ace_fold-widget/.test(w.className)&&(w.className+=" ace_invalid")}},this.$toggleFoldWidget=function(m,_){if(this.getFoldWidget){var p=this.getFoldWidget(m),v=this.getLine(m),w="end"===p?-1:1,x=this.getFoldAt(m,-1===w?0:v.length,w);if(x)return _.children||_.all?this.removeFold(x):this.expandFold(x),x;var A=this.getFoldWidgetRange(m,!0);if(A&&!A.isMultiLine()&&(x=this.getFoldAt(A.start.row,A.start.column,1))&&A.isEqual(x.range))return this.removeFold(x),x;if(_.siblings){var R=this.getParentFoldRangeData(m);if(R.range)var U=R.range.start.row+1,L=R.range.end.row;this.foldAll(U,L,_.all?1e4:0)}else _.children?(L=A?A.end.row:this.getLength(),this.foldAll(m+1,L,_.all?1e4:0)):A&&(_.all&&(A.collapseChildren=1e4),this.addFold("...",A));return A}},this.toggleFoldWidget=function(m){var _=this.selection.getCursor().row;_=this.getRowFoldStart(_);var p=this.$toggleFoldWidget(_,{});if(!p){var v=this.getParentFoldRangeData(_,!0);if(p=v.range||v.firstRange){var w=this.getFoldAt(_=p.start.row,this.getLine(_).length,1);w?this.removeFold(w):this.addFold("...",p)}}},this.updateFoldWidgets=function(m){var _=m.start.row,p=m.end.row-_;if(0===p)this.foldWidgets[_]=null;else if("remove"==m.action)this.foldWidgets.splice(_,p+1,null);else{var v=Array(p+1);v.unshift(_,1),this.foldWidgets.splice.apply(this.foldWidgets,v)}},this.tokenizerUpdateFoldWidgets=function(m){var _=m.data;_.first!=_.last&&this.foldWidgets.length>_.first&&this.foldWidgets.splice(_.first,this.foldWidgets.length)}}}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(Q,ie,xe){"use strict";var T=Q("../token_iterator").TokenIterator,re=Q("../range").Range;ie.BracketMatch=function B(){this.findMatchingBracket=function(E,M){if(0==E.column)return null;var g=M||this.getLine(E.row).charAt(E.column-1);if(""==g)return null;var m=g.match(/([\(\[\{])|([\)\]\}])/);return m?m[1]?this.$findClosingBracket(m[1],E):this.$findOpeningBracket(m[2],E):null},this.getBracketRange=function(E){var m,M=this.getLine(E.row),g=!0,_=M.charAt(E.column-1),p=_&&_.match(/([\(\[\{])|([\)\]\}])/);if(p||(_=M.charAt(E.column),E={row:E.row,column:E.column+1},p=_&&_.match(/([\(\[\{])|([\)\]\}])/),g=!1),!p)return null;if(p[1]){if(!(v=this.$findClosingBracket(p[1],E)))return null;m=re.fromPoints(E,v),g||(m.end.column++,m.start.column--),m.cursor=m.end}else{var v;if(!(v=this.$findOpeningBracket(p[2],E)))return null;m=re.fromPoints(v,E),g||(m.start.column++,m.end.column--),m.cursor=m.start}return m},this.getMatchingBracketRanges=function(E,M){var g=this.getLine(E.row),m=/([\(\[\{])|([\)\]\}])/,_=!M&&g.charAt(E.column-1),p=_&&_.match(m);if(p||(_=(void 0===M||M)&&g.charAt(E.column),E={row:E.row,column:E.column+1},p=_&&_.match(m)),!p)return null;var v=new re(E.row,E.column-1,E.row,E.column),w=p[1]?this.$findClosingBracket(p[1],E):this.$findOpeningBracket(p[2],E);return w?[v,new re(w.row,w.column,w.row,w.column+1)]:[v]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(E,M,g){var m=this.$brackets[E],_=1,p=new T(this,M.row,M.column),v=p.getCurrentToken();if(v||(v=p.stepForward()),v){g||(g=new RegExp("(\\.?"+v.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var w=M.column-p.getCurrentTokenColumn()-2,x=v.value;;){for(;w>=0;){var A=x.charAt(w);if(A==m){if(0==(_-=1))return{row:p.getCurrentTokenRow(),column:w+p.getCurrentTokenColumn()}}else A==E&&(_+=1);w-=1}do{v=p.stepBackward()}while(v&&!g.test(v.type));if(null==v)break;w=(x=v.value).length-1}return null}},this.$findClosingBracket=function(E,M,g){var m=this.$brackets[E],_=1,p=new T(this,M.row,M.column),v=p.getCurrentToken();if(v||(v=p.stepForward()),v){g||(g=new RegExp("(\\.?"+v.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var w=M.column-p.getCurrentTokenColumn();;){for(var x=v.value,A=x.length;w<A;){var R=x.charAt(w);if(R==m){if(0==(_-=1))return{row:p.getCurrentTokenRow(),column:w+p.getCurrentTokenColumn()}}else R==E&&(_+=1);w+=1}do{v=p.stepForward()}while(v&&!g.test(v.type));if(null==v)break;w=0}return null}},this.getMatchingTags=function(E){var M=new T(this,E.row,E.column),g=this.$findTagName(M);if(g)return"<"===M.stepBackward().value?this.$findClosingTag(M,g):this.$findOpeningTag(M,g)},this.$findTagName=function(E){var M=E.getCurrentToken(),g=!1,m=!1;if(M&&-1===M.type.indexOf("tag-name"))do{(M=m?E.stepBackward():E.stepForward())&&("/>"===M.value?m=!0:-1!==M.type.indexOf("tag-name")&&(g=!0))}while(M&&!g);return M},this.$findClosingTag=function(E,M){var g,m=M.value,_=M.value,p=0,v=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+1);M=E.stepForward();var w=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+M.value.length),x=!1;do{if(g=M,M=E.stepForward()){if(">"===M.value&&!x){var A=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+1);x=!0}if(-1!==M.type.indexOf("tag-name")){if(_===(m=M.value))if("<"===g.value)p++;else if("</"===g.value&&--p<0){E.stepBackward();var R=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+2);M=E.stepForward();var U=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+M.value.length);if(!(M=E.stepForward())||">"!==M.value)return;var L=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+1)}}else _===m&&"/>"===M.value&&--p<0&&(L=U=R=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+2),A=new re(w.end.row,w.end.column,w.end.row,w.end.column+1))}}while(M&&p>=0);if(v&&A&&R&&L&&w&&U)return{openTag:new re(v.start.row,v.start.column,A.end.row,A.end.column),closeTag:new re(R.start.row,R.start.column,L.end.row,L.end.column),openTagName:w,closeTagName:U}},this.$findOpeningTag=function(E,M){var g=E.getCurrentToken(),m=M.value,_=0,p=E.getCurrentTokenRow(),v=E.getCurrentTokenColumn(),w=v+2,x=new re(p,v,p,w);E.stepForward();var A=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+M.value.length);if((M=E.stepForward())&&">"===M.value){var R=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+1);E.stepBackward(),E.stepBackward();do{if(M=g,p=E.getCurrentTokenRow(),w=(v=E.getCurrentTokenColumn())+M.value.length,g=E.stepBackward(),M)if(-1!==M.type.indexOf("tag-name")){if(m===M.value)if("<"===g.value){if(++_>0){var U=new re(p,v,p,w),L=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+1);do{M=E.stepForward()}while(M&&">"!==M.value);var W=new re(E.getCurrentTokenRow(),E.getCurrentTokenColumn(),E.getCurrentTokenRow(),E.getCurrentTokenColumn()+1)}}else"</"===g.value&&_--}else if("/>"===M.value){for(var H=0,P=g;P;){if(-1!==P.type.indexOf("tag-name")&&P.value===m){_--;break}if("<"===P.value)break;P=E.stepBackward(),H++}for(var $=0;$<H;$++)E.stepForward()}}while(g&&_<=0);if(L&&W&&x&&R&&U&&A)return{openTag:new re(L.start.row,L.start.column,W.end.row,W.end.column),closeTag:new re(x.start.row,x.start.column,R.end.row,R.end.column),openTagName:U,closeTagName:A}}}}}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(Q,ie,xe){"use strict";var T=Q("./lib/oop"),re=Q("./lib/lang"),B=Q("./bidihandler").BidiHandler,E=Q("./config"),M=Q("./lib/event_emitter").EventEmitter,g=Q("./selection").Selection,m=Q("./mode/text").Mode,_=Q("./range").Range,p=Q("./document").Document,v=Q("./background_tokenizer").BackgroundTokenizer,w=Q("./search_highlight").SearchHighlight,x=function(){function V(N,te){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++V.$uid,this.$foldData.toString=function(){return this.join("\n")},this.bgTokenizer=new v((new m).getTokenizer(),this);var G=this;this.bgTokenizer.on("update",function(D){G._signal("tokenizerUpdate",D)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),("object"!=typeof N||!N.getLine)&&(N=new p(N)),this.setDocument(N),this.selection=new g(this),this.$bidiHandler=new B(this),E.resetOptions(this),this.setMode(te),E._signal("session",this),this.destroyed=!1}return V.prototype.setDocument=function(N){this.doc&&this.doc.off("change",this.$onChange),this.doc=N,N.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},V.prototype.getDocument=function(){return this.doc},V.prototype.$resetRowCache=function(N){if(!N)return this.$docRowCache=[],void(this.$screenRowCache=[]);var te=this.$docRowCache.length,G=this.$getRowCacheIndex(this.$docRowCache,N)+1;te>G&&(this.$docRowCache.splice(G,te),this.$screenRowCache.splice(G,te))},V.prototype.$getRowCacheIndex=function(N,te){for(var G=0,D=N.length-1;G<=D;){var Y=G+D>>1,ee=N[Y];if(te>ee)G=Y+1;else{if(!(te<ee))return Y;D=Y-1}}return G-1},V.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},V.prototype.onChangeFold=function(N){this.$resetRowCache(N.data.start.row)},V.prototype.onChange=function(N){this.$modified=!0,this.$bidiHandler.onChange(N),this.$resetRowCache(N.start.row);var te=this.$updateInternalDataOnChange(N);!this.$fromUndo&&this.$undoManager&&(te&&te.length&&(this.$undoManager.add({action:"removeFolds",folds:te},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(N,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(N),this._signal("change",N)},V.prototype.setValue=function(N){this.doc.setValue(N),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},V.prototype.toString=function(){return this.doc.getValue()},V.prototype.getSelection=function(){return this.selection},V.prototype.getState=function(N){return this.bgTokenizer.getState(N)},V.prototype.getTokens=function(N){return this.bgTokenizer.getTokens(N)},V.prototype.getTokenAt=function(N,te){var D,G=this.bgTokenizer.getTokens(N),Y=0;if(null==te){var ee=G.length-1;Y=this.getLine(N).length}else for(ee=0;ee<G.length&&!((Y+=G[ee].value.length)>=te);ee++);return(D=G[ee])?(D.index=ee,D.start=Y-D.value.length,D):null},V.prototype.setUndoManager=function(N){if(this.$undoManager=N,this.$informUndoManager&&this.$informUndoManager.cancel(),N){var te=this;N.addSession(this),this.$syncInformUndoManager=function(){te.$informUndoManager.cancel(),te.mergeUndoDeltas=!1},this.$informUndoManager=re.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},V.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},V.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},V.prototype.getTabString=function(){return this.getUseSoftTabs()?re.stringRepeat(" ",this.getTabSize()):"\t"},V.prototype.setUseSoftTabs=function(N){this.setOption("useSoftTabs",N)},V.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},V.prototype.setTabSize=function(N){this.setOption("tabSize",N)},V.prototype.getTabSize=function(){return this.$tabSize},V.prototype.isTabStop=function(N){return this.$useSoftTabs&&N.column%this.$tabSize==0},V.prototype.setNavigateWithinSoftTabs=function(N){this.setOption("navigateWithinSoftTabs",N)},V.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},V.prototype.setOverwrite=function(N){this.setOption("overwrite",N)},V.prototype.getOverwrite=function(){return this.$overwrite},V.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},V.prototype.addGutterDecoration=function(N,te){this.$decorations[N]||(this.$decorations[N]=""),this.$decorations[N]+=" "+te,this._signal("changeBreakpoint",{})},V.prototype.removeGutterDecoration=function(N,te){this.$decorations[N]=(this.$decorations[N]||"").replace(" "+te,""),this._signal("changeBreakpoint",{})},V.prototype.getBreakpoints=function(){return this.$breakpoints},V.prototype.setBreakpoints=function(N){this.$breakpoints=[];for(var te=0;te<N.length;te++)this.$breakpoints[N[te]]="ace_breakpoint";this._signal("changeBreakpoint",{})},V.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},V.prototype.setBreakpoint=function(N,te){void 0===te&&(te="ace_breakpoint"),te?this.$breakpoints[N]=te:delete this.$breakpoints[N],this._signal("changeBreakpoint",{})},V.prototype.clearBreakpoint=function(N){delete this.$breakpoints[N],this._signal("changeBreakpoint",{})},V.prototype.addMarker=function(N,te,G,D){var Y=this.$markerId++,ee={range:N,type:G||"line",renderer:"function"==typeof G?G:null,clazz:te,inFront:!!D,id:Y};return D?(this.$frontMarkers[Y]=ee,this._signal("changeFrontMarker")):(this.$backMarkers[Y]=ee,this._signal("changeBackMarker")),Y},V.prototype.addDynamicMarker=function(N,te){if(N.update){var G=this.$markerId++;return N.id=G,N.inFront=!!te,te?(this.$frontMarkers[G]=N,this._signal("changeFrontMarker")):(this.$backMarkers[G]=N,this._signal("changeBackMarker")),N}},V.prototype.removeMarker=function(N){var te=this.$frontMarkers[N]||this.$backMarkers[N];te&&(delete(te.inFront?this.$frontMarkers:this.$backMarkers)[N],this._signal(te.inFront?"changeFrontMarker":"changeBackMarker"))},V.prototype.getMarkers=function(N){return N?this.$frontMarkers:this.$backMarkers},V.prototype.highlight=function(N){if(!this.$searchHighlight){var te=new w(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(te)}this.$searchHighlight.setRegexp(N)},V.prototype.highlightLines=function(N,te,G,D){"number"!=typeof te&&(G=te,te=N),G||(G="ace_step");var Y=new _(N,0,te,1/0);return Y.id=this.addMarker(Y,G,"fullLine",D),Y},V.prototype.setAnnotations=function(N){this.$annotations=N,this._signal("changeAnnotation",{})},V.prototype.getAnnotations=function(){return this.$annotations||[]},V.prototype.clearAnnotations=function(){this.setAnnotations([])},V.prototype.$detectNewLine=function(N){var te=N.match(/^.*?(\r?\n)/m);this.$autoNewLine=te?te[1]:"\n"},V.prototype.getWordRange=function(N,te){var G=this.getLine(N),D=!1;if(te>0&&(D=!!G.charAt(te-1).match(this.tokenRe)),D||(D=!!G.charAt(te).match(this.tokenRe)),D)var Y=this.tokenRe;else Y=/^\s+$/.test(G.slice(te-1,te+1))?/\s/:this.nonTokenRe;var ee=te;if(ee>0){do{ee--}while(ee>=0&&G.charAt(ee).match(Y));ee++}for(var fe=te;fe<G.length&&G.charAt(fe).match(Y);)fe++;return new _(N,ee,N,fe)},V.prototype.getAWordRange=function(N,te){for(var G=this.getWordRange(N,te),D=this.getLine(G.end.row);D.charAt(G.end.column).match(/[ \t]/);)G.end.column+=1;return G},V.prototype.setNewLineMode=function(N){this.doc.setNewLineMode(N)},V.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},V.prototype.setUseWorker=function(N){this.setOption("useWorker",N)},V.prototype.getUseWorker=function(){return this.$useWorker},V.prototype.onReloadTokenizer=function(N){this.bgTokenizer.start(N.data.first),this._signal("tokenizerUpdate",N)},V.prototype.setMode=function(N,te){if(N&&"object"==typeof N){if(N.getTokenizer)return this.$onChangeMode(N);var G=N,D=N.path}else D=N||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new m),this.$modes[D]&&!G)return this.$onChangeMode(this.$modes[D]),void(te&&te());this.$modeId=D,E.loadModule(["mode",D],function(Y){if(this.$modeId!==D)return te&&te();this.$modes[D]&&!G?this.$onChangeMode(this.$modes[D]):Y&&Y.Mode&&(Y=new Y.Mode(G),G||(this.$modes[D]=Y,Y.$id=D),this.$onChangeMode(Y)),te&&te()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},V.prototype.$onChangeMode=function(N,te){if(te||(this.$modeId=N.$id),this.$mode!==N){var G=this.$mode;this.$mode=N,this.$stopWorker(),this.$useWorker&&this.$startWorker();var D=N.getTokenizer();if(void 0!==D.on){var Y=this.onReloadTokenizer.bind(this);D.on("update",Y)}this.bgTokenizer.setTokenizer(D),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=N.tokenRe,this.nonTokenRe=N.nonTokenRe,te||(N.attachToSession&&N.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(N.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:G,mode:N}))}},V.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},V.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(N){E.warn("Could not load worker",N),this.$worker=null}},V.prototype.getMode=function(){return this.$mode},V.prototype.setScrollTop=function(N){this.$scrollTop===N||isNaN(N)||(this.$scrollTop=N,this._signal("changeScrollTop",N))},V.prototype.getScrollTop=function(){return this.$scrollTop},V.prototype.setScrollLeft=function(N){this.$scrollLeft===N||isNaN(N)||(this.$scrollLeft=N,this._signal("changeScrollLeft",N))},V.prototype.getScrollLeft=function(){return this.$scrollLeft},V.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},V.prototype.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var N=0;return this.lineWidgets.forEach(function(te){te&&te.screenWidth>N&&(N=te.screenWidth)}),this.lineWidgetWidth=N},V.prototype.$computeWidth=function(N){if(this.$modified||N){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var te=this.doc.getAllLines(),G=this.$rowLengthCache,D=0,Y=0,ee=this.$foldData[Y],fe=ee?ee.start.row:1/0,_e=te.length,we=0;we<_e;we++){if(we>fe){if((we=ee.end.row+1)>=_e)break;fe=(ee=this.$foldData[Y++])?ee.start.row:1/0}null==G[we]&&(G[we]=this.$getStringScreenWidth(te[we])[0]),G[we]>D&&(D=G[we])}this.screenWidth=D}},V.prototype.getLine=function(N){return this.doc.getLine(N)},V.prototype.getLines=function(N,te){return this.doc.getLines(N,te)},V.prototype.getLength=function(){return this.doc.getLength()},V.prototype.getTextRange=function(N){return this.doc.getTextRange(N||this.selection.getRange())},V.prototype.insert=function(N,te){return this.doc.insert(N,te)},V.prototype.remove=function(N){return this.doc.remove(N)},V.prototype.removeFullLines=function(N,te){return this.doc.removeFullLines(N,te)},V.prototype.undoChanges=function(N,te){if(N.length){this.$fromUndo=!0;for(var G=N.length-1;-1!=G;G--){var D=N[G];"insert"==D.action||"remove"==D.action?this.doc.revertDelta(D):D.folds&&this.addFolds(D.folds)}!te&&this.$undoSelect&&(N.selectionBefore?this.selection.fromJSON(N.selectionBefore):this.selection.setRange(this.$getUndoSelection(N,!0))),this.$fromUndo=!1}},V.prototype.redoChanges=function(N,te){if(N.length){this.$fromUndo=!0;for(var G=0;G<N.length;G++){var D=N[G];("insert"==D.action||"remove"==D.action)&&this.doc.$safeApplyDelta(D)}!te&&this.$undoSelect&&(N.selectionAfter?this.selection.fromJSON(N.selectionAfter):this.selection.setRange(this.$getUndoSelection(N,!1))),this.$fromUndo=!1}},V.prototype.setUndoSelect=function(N){this.$undoSelect=N},V.prototype.$getUndoSelection=function(N,te){function G(_e){return te?"insert"!==_e.action:"insert"===_e.action}for(var D,Y,ee=0;ee<N.length;ee++){var fe=N[ee];if(fe.start){if(!D){D=G(fe)?_.fromPoints(fe.start,fe.end):_.fromPoints(fe.start,fe.start);continue}G(fe)?(-1==D.compare((Y=fe.start).row,Y.column)&&D.setStart(Y),1==D.compare((Y=fe.end).row,Y.column)&&D.setEnd(Y)):-1==D.compare((Y=fe.start).row,Y.column)&&(D=_.fromPoints(fe.start,fe.start))}}return D},V.prototype.replace=function(N,te){return this.doc.replace(N,te)},V.prototype.moveText=function(N,te,G){var D=this.getTextRange(N),Y=this.getFoldsInRange(N),ee=_.fromPoints(te,te);if(G||(this.remove(N),(_e=(fe=N.start.row-N.end.row)?-N.end.column:N.start.column-N.end.column)&&(ee.start.row==N.end.row&&ee.start.column>N.end.column&&(ee.start.column+=_e),ee.end.row==N.end.row&&ee.end.column>N.end.column&&(ee.end.column+=_e)),fe&&ee.start.row>=N.end.row&&(ee.start.row+=fe,ee.end.row+=fe)),ee.end=this.insert(ee.start,D),Y.length){var we=N.start,ke=ee.start,fe=ke.row-we.row,_e=ke.column-we.column;this.addFolds(Y.map(function(Te){return(Te=Te.clone()).start.row==we.row&&(Te.start.column+=_e),Te.end.row==we.row&&(Te.end.column+=_e),Te.start.row+=fe,Te.end.row+=fe,Te}))}return ee},V.prototype.indentRows=function(N,te,G){G=G.replace(/\t/g,this.getTabString());for(var D=N;D<=te;D++)this.doc.insertInLine({row:D,column:0},G)},V.prototype.outdentRows=function(N){for(var te=N.collapseRows(),G=new _(0,0,0,0),D=this.getTabSize(),Y=te.start.row;Y<=te.end.row;++Y){var ee=this.getLine(Y);G.start.row=Y,G.end.row=Y;for(var fe=0;fe<D&&" "==ee.charAt(fe);++fe);fe<D&&"\t"==ee.charAt(fe)?(G.start.column=fe,G.end.column=fe+1):(G.start.column=0,G.end.column=fe),this.remove(G)}},V.prototype.$moveLines=function(N,te,G){if(N=this.getRowFoldStart(N),te=this.getRowFoldEnd(te),G<0){if((D=this.getRowFoldStart(N+G))<0)return 0;var Y=D-N}else if(G>0){var D;if((D=this.getRowFoldEnd(te+G))>this.doc.getLength()-1)return 0;Y=D-te}else N=this.$clipRowToDocument(N),Y=(te=this.$clipRowToDocument(te))-N+1;var ee=new _(N,0,te,Number.MAX_VALUE),fe=this.getFoldsInRange(ee).map(function(we){return(we=we.clone()).start.row+=Y,we.end.row+=Y,we}),_e=0==G?this.doc.getLines(N,te):this.doc.removeFullLines(N,te);return this.doc.insertFullLines(N+Y,_e),fe.length&&this.addFolds(fe),Y},V.prototype.moveLinesUp=function(N,te){return this.$moveLines(N,te,-1)},V.prototype.moveLinesDown=function(N,te){return this.$moveLines(N,te,1)},V.prototype.duplicateLines=function(N,te){return this.$moveLines(N,te,0)},V.prototype.$clipRowToDocument=function(N){return Math.max(0,Math.min(N,this.doc.getLength()-1))},V.prototype.$clipColumnToRow=function(N,te){return te<0?0:Math.min(this.doc.getLine(N).length,te)},V.prototype.$clipPositionToDocument=function(N,te){if(te=Math.max(0,te),N<0)N=0,te=0;else{var G=this.doc.getLength();N>=G?(N=G-1,te=this.doc.getLine(G-1).length):te=Math.min(this.doc.getLine(N).length,te)}return{row:N,column:te}},V.prototype.$clipRangeToDocument=function(N){N.start.row<0?(N.start.row=0,N.start.column=0):N.start.column=this.$clipColumnToRow(N.start.row,N.start.column);var te=this.doc.getLength()-1;return N.end.row>te?(N.end.row=te,N.end.column=this.doc.getLine(te).length):N.end.column=this.$clipColumnToRow(N.end.row,N.end.column),N},V.prototype.setUseWrapMode=function(N){if(N!=this.$useWrapMode){if(this.$useWrapMode=N,this.$modified=!0,this.$resetRowCache(0),N){var te=this.getLength();this.$wrapData=Array(te),this.$updateWrapData(0,te-1)}this._signal("changeWrapMode")}},V.prototype.getUseWrapMode=function(){return this.$useWrapMode},V.prototype.setWrapLimitRange=function(N,te){(this.$wrapLimitRange.min!==N||this.$wrapLimitRange.max!==te)&&(this.$wrapLimitRange={min:N,max:te},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},V.prototype.adjustWrapLimit=function(N,te){var G=this.$wrapLimitRange;G.max<0&&(G={min:te,max:te});var D=this.$constrainWrapLimit(N,G.min,G.max);return D!=this.$wrapLimit&&D>1&&(this.$wrapLimit=D,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},V.prototype.$constrainWrapLimit=function(N,te,G){return te&&(N=Math.max(te,N)),G&&(N=Math.min(G,N)),N},V.prototype.getWrapLimit=function(){return this.$wrapLimit},V.prototype.setWrapLimit=function(N){this.setWrapLimitRange(N,N)},V.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},V.prototype.$updateInternalDataOnChange=function(N){var te=this.$useWrapMode,G=N.action,D=N.start,Y=N.end,ee=D.row,fe=Y.row,_e=fe-ee,we=null;if(this.$updating=!0,0!=_e)if("remove"===G){this[te?"$wrapData":"$rowLengthCache"].splice(ee,_e);var ke=this.$foldData;we=this.getFoldsInRange(N),this.removeFolds(we);var We=0;if(Ce=this.getFoldLine(Y.row)){Ce.addRemoveChars(Y.row,Y.column,D.column-Y.column),Ce.shiftRow(-_e);var Te=this.getFoldLine(ee);Te&&Te!==Ce&&(Te.merge(Ce),Ce=Te),We=ke.indexOf(Ce)+1}for(;We<ke.length;We++)(Ce=ke[We]).start.row>=Y.row&&Ce.shiftRow(-_e);fe=ee}else{var Le=Array(_e);Le.unshift(ee,0);var et=te?this.$wrapData:this.$rowLengthCache;if(et.splice.apply(et,Le),ke=this.$foldData,We=0,Ce=this.getFoldLine(ee)){var Bt=Ce.range.compareInside(D.row,D.column);0==Bt?(Ce=Ce.split(D.row,D.column))&&(Ce.shiftRow(_e),Ce.addRemoveChars(fe,0,Y.column-D.column)):-1==Bt&&(Ce.addRemoveChars(ee,0,Y.column-D.column),Ce.shiftRow(_e)),We=ke.indexOf(Ce)+1}for(;We<ke.length;We++){var Ce;(Ce=ke[We]).start.row>=ee&&Ce.shiftRow(_e)}}else _e=Math.abs(N.start.column-N.end.column),"remove"===G&&(we=this.getFoldsInRange(N),this.removeFolds(we),_e=-_e),(Ce=this.getFoldLine(ee))&&Ce.addRemoveChars(ee,D.column,_e);return te&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,te?this.$updateWrapData(ee,fe):this.$updateRowLengthCache(ee,fe),we},V.prototype.$updateRowLengthCache=function(N,te,G){this.$rowLengthCache[N]=null,this.$rowLengthCache[te]=null},V.prototype.$updateWrapData=function(N,te){var fe,_e,G=this.doc.getAllLines(),D=this.getTabSize(),Y=this.$wrapData,ee=this.$wrapLimit,we=N;for(te=Math.min(te,G.length-1);we<=te;)(_e=this.getFoldLine(we,_e))?(fe=[],_e.walk(function(ke,Ce,We,Te){var Le;if(null!=ke){(Le=this.$getDisplayTokens(ke,fe.length))[0]=U;for(var et=1;et<Le.length;et++)Le[et]=L}else Le=this.$getDisplayTokens(G[Ce].substring(Te,We),fe.length);fe=fe.concat(Le)}.bind(this),_e.end.row,G[_e.end.row].length+1),Y[_e.start.row]=this.$computeWrapSplits(fe,ee,D),we=_e.end.row+1):(fe=this.$getDisplayTokens(G[we]),Y[we]=this.$computeWrapSplits(fe,ee,D),we++)},V.prototype.$computeWrapSplits=function(N,te,G){if(0==N.length)return[];var D=[],Y=N.length,ee=0,fe=0,_e=this.$wrapAsCode,we=this.$indentedSoftWrap,ke=te<=Math.max(2*G,8)||!1===we?0:Math.floor(te/2);function We(Bt){for(var Dt=Bt-ee,Lt=ee;Lt<Bt;Lt++){var He=N[Lt];(12===He||2===He)&&(Dt-=1)}D.length||(Te=function Ce(){var Bt=0;if(0===ke)return Bt;if(we)for(var Dt=0;Dt<N.length;Dt++){var Lt=N[Dt];if(Lt==H)Bt+=1;else{if(Lt!=P){if(Lt==$)continue;break}Bt+=G}}return _e&&!1!==we&&(Bt+=G),Math.min(Bt,ke)}(),D.indent=Te),D.push(fe+=Dt),ee=Bt}for(var Te=0;Y-ee>te-Te;){var Le=ee+te-Te;if(N[Le-1]>=H&&N[Le]>=H)We(Le);else if(N[Le]!=U&&N[Le]!=L){for(var et=Math.max(Le-(te-(te>>2)),ee-1);Le>et&&N[Le]<U;)Le--;if(_e){for(;Le>et&&N[Le]<U;)Le--;for(;Le>et&&N[Le]==W;)Le--}else for(;Le>et&&N[Le]<H;)Le--;Le>et?We(++Le):(N[Le=ee+te]==R&&Le--,We(Le-Te))}else{for(;Le!=ee-1&&N[Le]!=U;Le--);if(Le>ee){We(Le);continue}for(Le=ee+te;Le<N.length&&N[Le]==L;Le++);if(Le==N.length)break;We(Le)}}return D},V.prototype.$getDisplayTokens=function(N,te){var D,G=[];te=te||0;for(var Y=0;Y<N.length;Y++){var ee=N.charCodeAt(Y);if(9==ee){D=this.getScreenTabSize(G.length+te),G.push(P);for(var fe=1;fe<D;fe++)G.push($)}else 32==ee?G.push(H):ee>39&&ee<48||ee>57&&ee<64?G.push(W):ee>=4352&&X(ee)?G.push(A,R):G.push(A)}return G},V.prototype.$getStringScreenWidth=function(N,te,G){if(0==te)return[0,0];var D,Y;for(null==te&&(te=1/0),G=G||0,Y=0;Y<N.length&&(9==(D=N.charCodeAt(Y))?G+=this.getScreenTabSize(G):D>=4352&&X(D)?G+=2:G+=1,!(G>te));Y++);return[G,Y]},V.prototype.getRowLength=function(N){var te=1;return this.lineWidgets&&(te+=this.lineWidgets[N]&&this.lineWidgets[N].rowCount||0),this.$useWrapMode&&this.$wrapData[N]?this.$wrapData[N].length+te:te},V.prototype.getRowLineCount=function(N){return this.$useWrapMode&&this.$wrapData[N]?this.$wrapData[N].length+1:1},V.prototype.getRowWrapIndent=function(N){if(this.$useWrapMode){var te=this.screenToDocumentPosition(N,Number.MAX_VALUE),G=this.$wrapData[te.row];return G.length&&G[0]<te.column?G.indent:0}return 0},V.prototype.getScreenLastRowColumn=function(N){var te=this.screenToDocumentPosition(N,Number.MAX_VALUE);return this.documentToScreenColumn(te.row,te.column)},V.prototype.getDocumentLastRowColumn=function(N,te){var G=this.documentToScreenRow(N,te);return this.getScreenLastRowColumn(G)},V.prototype.getDocumentLastRowColumnPosition=function(N,te){var G=this.documentToScreenRow(N,te);return this.screenToDocumentPosition(G,Number.MAX_VALUE/10)},V.prototype.getRowSplitData=function(N){if(this.$useWrapMode)return this.$wrapData[N]},V.prototype.getScreenTabSize=function(N){return this.$tabSize-(N%this.$tabSize|0)},V.prototype.screenToDocumentRow=function(N,te){return this.screenToDocumentPosition(N,te).row},V.prototype.screenToDocumentColumn=function(N,te){return this.screenToDocumentPosition(N,te).column},V.prototype.screenToDocumentPosition=function(N,te,G){if(N<0)return{row:0,column:0};var D,fe,Y=0,ee=0,_e=0,we=0,ke=this.$screenRowCache,Ce=this.$getRowCacheIndex(ke,N),We=ke.length;if(We&&Ce>=0){_e=ke[Ce],Y=this.$docRowCache[Ce];var Te=N>ke[We-1]}else Te=!We;for(var Le=this.getLength()-1,et=this.getNextFoldLine(Y),Bt=et?et.start.row:1/0;_e<=N&&!(_e+(we=this.getRowLength(Y))>N||Y>=Le);)_e+=we,++Y>Bt&&(Bt=(et=this.getNextFoldLine(Y=et.end.row+1,et))?et.start.row:1/0),Te&&(this.$docRowCache.push(Y),this.$screenRowCache.push(_e));if(et&&et.start.row<=Y)D=this.getFoldDisplayLine(et),Y=et.start.row;else{if(_e+we<=N||Y>Le)return{row:Le,column:this.getLine(Le).length};D=this.getLine(Y),et=null}var Dt=0,Lt=Math.floor(N-_e);if(this.$useWrapMode){var He=this.$wrapData[Y];He&&(fe=He[Lt],Lt>0&&He.length&&(Dt=He.indent,D=D.substring(ee=He[Lt-1]||He[He.length-1])))}return void 0!==G&&this.$bidiHandler.isBidiRow(_e+Lt,Y,Lt)&&(te=this.$bidiHandler.offsetToCol(G)),ee+=this.$getStringScreenWidth(D,te-Dt)[1],this.$useWrapMode&&ee>=fe&&(ee=fe-1),et?et.idxToPosition(ee):{row:Y,column:ee}},V.prototype.documentToScreenPosition=function(N,te){if(typeof te>"u")var G=this.$clipPositionToDocument(N.row,N.column);else G=this.$clipPositionToDocument(N,te);var ee,D=0,Y=null;(ee=this.getFoldAt(N=G.row,te=G.column,1))&&(N=ee.start.row,te=ee.start.column);var fe,_e=0,we=this.$docRowCache,ke=this.$getRowCacheIndex(we,N),Ce=we.length;if(Ce&&ke>=0){_e=we[ke],D=this.$screenRowCache[ke];var We=N>we[Ce-1]}else We=!Ce;for(var Te=this.getNextFoldLine(_e),Le=Te?Te.start.row:1/0;_e<N;){if(_e>=Le){if((fe=Te.end.row+1)>N)break;Le=(Te=this.getNextFoldLine(fe,Te))?Te.start.row:1/0}else fe=_e+1;D+=this.getRowLength(_e),_e=fe,We&&(this.$docRowCache.push(_e),this.$screenRowCache.push(D))}var et="";Te&&_e>=Le?(et=this.getFoldDisplayLine(Te,N,te),Y=Te.start.row):(et=this.getLine(N).substring(0,te),Y=N);var Bt=0;if(this.$useWrapMode){var Dt=this.$wrapData[Y];if(Dt){for(var Lt=0;et.length>=Dt[Lt];)D++,Lt++;et=et.substring(Dt[Lt-1]||0,et.length),Bt=Lt>0?Dt.indent:0}}return this.lineWidgets&&this.lineWidgets[_e]&&this.lineWidgets[_e].rowsAbove&&(D+=this.lineWidgets[_e].rowsAbove),{row:D,column:Bt+this.$getStringScreenWidth(et)[0]}},V.prototype.documentToScreenColumn=function(N,te){return this.documentToScreenPosition(N,te).column},V.prototype.documentToScreenRow=function(N,te){return this.documentToScreenPosition(N,te).row},V.prototype.getScreenLength=function(){var N=0,te=null;if(this.$useWrapMode)for(var Y=this.$wrapData.length,ee=0,D=0,fe=(te=this.$foldData[D++])?te.start.row:1/0;ee<Y;){var _e=this.$wrapData[ee];N+=_e?_e.length+1:1,++ee>fe&&(ee=te.end.row+1,fe=(te=this.$foldData[D++])?te.start.row:1/0)}else{N=this.getLength();var G=this.$foldData;for(D=0;D<G.length;D++)N-=(te=G[D]).end.row-te.start.row}return this.lineWidgets&&(N+=this.$getWidgetScreenLength()),N},V.prototype.$setFontMetrics=function(N){!this.$enableVarChar||(this.$getStringScreenWidth=function(te,G,D){if(0===G)return[0,0];var Y,ee;for(G||(G=1/0),D=D||0,ee=0;ee<te.length&&!((D+="\t"===(Y=te.charAt(ee))?this.getScreenTabSize(D):N.getCharacterWidth(Y))>G);ee++);return[D,ee]})},V.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},V}();x.$uid=0,x.prototype.$modes=E.$modes,x.prototype.getValue=x.prototype.toString,x.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},x.prototype.$overwrite=!1,x.prototype.$mode=null,x.prototype.$modeId=null,x.prototype.$scrollTop=0,x.prototype.$scrollLeft=0,x.prototype.$wrapLimit=80,x.prototype.$useWrapMode=!1,x.prototype.$wrapLimitRange={min:null,max:null},x.prototype.lineWidgets=null,x.prototype.isFullWidth=X,T.implement(x.prototype,M);var A=1,R=2,U=3,L=4,W=9,H=10,P=11,$=12;function X(V){return!(V<4352)&&(V>=4352&&V<=4447||V>=4515&&V<=4519||V>=4602&&V<=4607||V>=9001&&V<=9002||V>=11904&&V<=11929||V>=11931&&V<=12019||V>=12032&&V<=12245||V>=12272&&V<=12283||V>=12288&&V<=12350||V>=12353&&V<=12438||V>=12441&&V<=12543||V>=12549&&V<=12589||V>=12593&&V<=12686||V>=12688&&V<=12730||V>=12736&&V<=12771||V>=12784&&V<=12830||V>=12832&&V<=12871||V>=12880&&V<=13054||V>=13056&&V<=19903||V>=19968&&V<=42124||V>=42128&&V<=42182||V>=43360&&V<=43388||V>=44032&&V<=55203||V>=55216&&V<=55238||V>=55243&&V<=55291||V>=63744&&V<=64255||V>=65040&&V<=65049||V>=65072&&V<=65106||V>=65108&&V<=65126||V>=65128&&V<=65131||V>=65281&&V<=65376||V>=65504&&V<=65510)}Q("./edit_session/folding").Folding.call(x.prototype),Q("./edit_session/bracket_match").BracketMatch.call(x.prototype),E.defineOptions(x.prototype,"session",{wrap:{set:function(V){if(V&&"off"!=V?"free"==V?V=!0:"printMargin"==V?V=-1:"string"==typeof V&&(V=parseInt(V,10)||!1):V=!1,this.$wrap!=V)if(this.$wrap=V,V){var N="number"==typeof V?V:null;this.setWrapLimitRange(N,N),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(V){(V="auto"==V?"text"!=this.$mode.type:"text"!=V)!=this.$wrapAsCode&&(this.$wrapAsCode=V,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(V){this.$useWorker=V,this.$stopWorker(),V&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(V){(V=parseInt(V))>0&&this.$tabSize!==V&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=V,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(V){this.setFoldStyle(V)},handlesSet:!0},overwrite:{set:function(V){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(V){this.doc.setNewLineMode(V)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(V){this.setMode(V)},get:function(){return this.$modeId},handlesSet:!0}}),ie.EditSession=x}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(Q,ie,xe){"use strict";var T=Q("./lib/lang"),re=Q("./lib/oop"),B=Q("./range").Range,E=function(){function g(){this.$options={}}return g.prototype.set=function(m){return re.mixin(this.$options,m),this},g.prototype.getOptions=function(){return T.copyObject(this.$options)},g.prototype.setOptions=function(m){this.$options=m},g.prototype.find=function(m){var _=this.$options,p=this.$matchIterator(m,_);if(!p)return!1;var v=null;return p.forEach(function(w,x,A,R){return v=new B(w,x,A,R),!(x==R&&_.start&&_.start.start&&0!=_.skipCurrent&&v.isEqual(_.start)&&(v=null,1))}),v},g.prototype.findAll=function(m){var _=this.$options;if(!_.needle)return[];this.$assembleRegExp(_);var p=_.range,v=p?m.getLines(p.start.row,p.end.row):m.doc.getAllLines(),w=[],x=_.re;if(_.$isMultiLine){var U,A=x.length,R=v.length-A;e:for(var L=x.offset||0;L<=R;L++){for(var W=0;W<A;W++)if(-1==v[L+W].search(x[W]))continue e;var H=v[L],P=v[L+A-1],$=H.length-H.match(x[0])[0].length,X=P.match(x[A-1])[0].length;U&&U.end.row===L&&U.end.column>$||(w.push(U=new B(L,$,L+A-1,X)),A>2&&(L=L+A-2))}}else for(var V=0;V<v.length;V++){var N=T.getMatchOffsets(v[V],x);for(W=0;W<N.length;W++){var te=N[W];w.push(new B(V,te.offset,V,te.offset+te.length))}}if(p){var G=p.start.column,D=p.end.column;for(V=0,W=w.length-1;V<W&&w[V].start.column<G&&0==w[V].start.row;)V++;for(var Y=p.end.row-p.start.row;V<W&&w[W].end.column>D&&w[W].end.row==Y;)W--;for(w=w.slice(V,W+1),V=0,W=w.length;V<W;V++)w[V].start.row+=p.start.row,w[V].end.row+=p.start.row}return w},g.prototype.replace=function(m,_){var p=this.$options,v=this.$assembleRegExp(p);if(p.$isMultiLine)return _;if(v){var w=v.exec(m);if(!w||w[0].length!=m.length)return null;if(_=m.replace(v,_),p.preserveCase){_=_.split("");for(var x=Math.min(m.length,m.length);x--;){var A=m[x];_[x]=A&&A.toLowerCase()!=A?_[x].toUpperCase():_[x].toLowerCase()}_=_.join("")}return _}},g.prototype.$assembleRegExp=function(m,_){if(m.needle instanceof RegExp)return m.re=m.needle;var p=m.needle;if(!m.needle)return m.re=!1;m.regExp||(p=T.escapeRegExp(p)),m.wholeWord&&(p=function M(g,m){function _(p){return/\w/.test(p)||m.regExp?"\\b":""}return _(g[0])+g+_(g[g.length-1])}(p,m));var v=m.caseSensitive?"gm":"gmi";if(m.$isMultiLine=!_&&/[\n\r]/.test(p),m.$isMultiLine)return m.re=this.$assembleMultilineRegExp(p,v);try{var w=new RegExp(p,v)}catch{w=!1}return m.re=w},g.prototype.$assembleMultilineRegExp=function(m,_){for(var p=m.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),v=[],w=0;w<p.length;w++)try{v.push(new RegExp(p[w],_))}catch{return!1}return v},g.prototype.$matchIterator=function(m,_){var p=this.$assembleRegExp(_);if(!p)return!1;var v=1==_.backwards,w=0!=_.skipCurrent,x=_.range,A=_.start;A||(A=x?x[v?"end":"start"]:m.selection.getRange()),A.start&&(A=A[w!=v?"end":"start"]);var R=x?x.start.row:0,U=x?x.end.row:m.getLength()-1;if(v)var L=function(P){var $=A.row;if(!H($,A.column,P)){for($--;$>=R;$--)if(H($,Number.MAX_VALUE,P))return;if(0!=_.wrap)for($=U,R=A.row;$>=R;$--)if(H($,Number.MAX_VALUE,P))return}};else L=function($){var X=A.row;if(!H(X,A.column,$)){for(X+=1;X<=U;X++)if(H(X,0,$))return;if(0!=_.wrap)for(X=R,U=A.row;X<=U;X++)if(H(X,0,$))return}};if(_.$isMultiLine)var W=p.length,H=function(P,$,X){var V=v?P-W+1:P;if(!(V<0||V+W>m.getLength())){var N=m.getLine(V),te=N.search(p[0]);if(!(!v&&te<$||-1===te)){for(var G=1;G<W;G++)if(-1==(N=m.getLine(V+G)).search(p[G]))return;var D=N.match(p[W-1])[0].length;if(!(v&&D>$)&&X(V,te,V+W-1,D))return!0}}};else H=v?function($,X,V){var G,N=m.getLine($),te=[],D=0;for(p.lastIndex=0;G=p.exec(N);){if(D=G.index,!(Y=G[0].length)){if(D>=N.length)break;p.lastIndex=D+=1}if(G.index+Y>X)break;te.push(G.index,Y)}for(var ee=te.length-1;ee>=0;ee-=2){var Y,fe=te[ee-1];if(V($,fe,$,fe+(Y=te[ee])))return!0}}:function($,X,V){var te,G,N=m.getLine($);for(p.lastIndex=X;G=p.exec(N);){var D=G[0].length;if(V($,te=G.index,$,te+D))return!0;if(!D&&(p.lastIndex=te+=1,te>=N.length))return!1}};return{forEach:L}},g}();ie.Search=E}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(Q,ie,xe){"use strict";var _,T=this&&this.__extends||(_=function(p,v){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,x){w.__proto__=x}||function(w,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(w[A]=x[A])})(p,v)},function(p,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function w(){this.constructor=p}_(p,v),p.prototype=null===v?Object.create(v):(w.prototype=v.prototype,new w)}),re=Q("../lib/keys"),B=Q("../lib/useragent"),E=re.KEY_MODS,M=function(){function _(p,v){this.$init(p,v,!1)}return _.prototype.$init=function(p,v,w){this.platform=v||(B.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(p),this.$singleCommand=w},_.prototype.addCommand=function(p){this.commands[p.name]&&this.removeCommand(p),this.commands[p.name]=p,p.bindKey&&this._buildKeyHash(p)},_.prototype.removeCommand=function(p,v){var w=p&&("string"==typeof p?p:p.name);p=this.commands[w],v||delete this.commands[w];var x=this.commandKeyBinding;for(var A in x){var R=x[A];if(R==p)delete x[A];else if(Array.isArray(R)){var U=R.indexOf(p);-1!=U&&(R.splice(U,1),1==R.length&&(x[A]=R[0]))}}},_.prototype.bindKey=function(p,v,w){if("object"==typeof p&&p&&(null==w&&(w=p.position),p=p[this.platform]),p){if("function"==typeof v)return this.addCommand({exec:v,bindKey:p,name:v.name||p});p.split("|").forEach(function(x){var A="";if(-1!=x.indexOf(" ")){var R=x.split(/\s+/);x=R.pop(),R.forEach(function(W){var H=this.parseKeys(W);this._addCommandToBinding(A+=(A?" ":"")+(E[H.hashId]+H.key),"chainKeys")},this),A+=" "}var U=this.parseKeys(x);this._addCommandToBinding(A+(E[U.hashId]+U.key),v,w)},this)}},_.prototype._addCommandToBinding=function(p,v,w){var A,x=this.commandKeyBinding;if(v)if(!x[p]||this.$singleCommand)x[p]=v;else{Array.isArray(x[p])?-1!=(A=x[p].indexOf(v))&&x[p].splice(A,1):x[p]=[x[p]],"number"!=typeof w&&(w=g(v));var R=x[p];for(A=0;A<R.length&&!(g(R[A])>w);A++);R.splice(A,0,v)}else delete x[p]},_.prototype.addCommands=function(p){p&&Object.keys(p).forEach(function(v){var w=p[v];if(w){if("string"==typeof w)return this.bindKey(w,v);"function"==typeof w&&(w={exec:w}),"object"==typeof w&&(w.name||(w.name=v),this.addCommand(w))}},this)},_.prototype.removeCommands=function(p){Object.keys(p).forEach(function(v){this.removeCommand(p[v])},this)},_.prototype.bindKeys=function(p){Object.keys(p).forEach(function(v){this.bindKey(v,p[v])},this)},_.prototype._buildKeyHash=function(p){this.bindKey(p.bindKey,p)},_.prototype.parseKeys=function(p){var v=p.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(L){return L}),w=v.pop(),x=re[w];if(re.FUNCTION_KEYS[x])w=re.FUNCTION_KEYS[x].toLowerCase();else{if(!v.length)return{key:w,hashId:-1};if(1==v.length&&"shift"==v[0])return{key:w.toUpperCase(),hashId:-1}}for(var A=0,R=v.length;R--;){var U=re.KEY_MODS[v[R]];if(null==U)return typeof console<"u"&&console.error("invalid modifier "+v[R]+" in "+p),!1;A|=U}return{key:w,hashId:A}},_.prototype.findKeyCommand=function(p,v){return this.commandKeyBinding[E[p]+v]},_.prototype.handleKeyboard=function(p,v,w,x){if(!(x<0)){var A=E[v]+w,R=this.commandKeyBinding[A];return p.$keyChain&&(p.$keyChain+=" "+A,R=this.commandKeyBinding[p.$keyChain]||R),!R||"chainKeys"!=R&&"chainKeys"!=R[R.length-1]?(p.$keyChain&&(v&&4!=v||1!=w.length?(-1==v||x>0)&&(p.$keyChain=""):p.$keyChain=p.$keyChain.slice(0,-A.length-1)),{command:R}):(p.$keyChain=p.$keyChain||A,{command:"null"})}},_.prototype.getStatusText=function(p,v){return v.$keyChain||""},_}();function g(_){return"object"==typeof _&&_.bindKey&&_.bindKey.position||(_.isDefault?-100:0)}var m=function(_){function p(v,w){var x=_.call(this,v,w)||this;return x.$singleCommand=!0,x}return T(p,_),p}(M);m.call=function(_,p,v){M.prototype.$init.call(_,p,v,!0)},M.call=function(_,p,v){M.prototype.$init.call(_,p,v,!1)},ie.HashHandler=m,ie.MultiHashHandler=M}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(Q,ie,xe){"use strict";var g,T=this&&this.__extends||(g=function(m,_){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(p[w]=v[w])})(m,_)},function(m,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function p(){this.constructor=m}g(m,_),m.prototype=null===_?Object.create(_):(p.prototype=_.prototype,new p)}),re=Q("../lib/oop"),B=Q("../keyboard/hash_handler").MultiHashHandler,E=Q("../lib/event_emitter").EventEmitter,M=function(g){function m(_,p){var v=g.call(this,p,_)||this;return v.byName=v.commands,v.setDefaultHandler("exec",function(w){return w.args?w.command.exec(w.editor,w.args,w.event,!1):w.command.exec(w.editor,{},w.event,!0)}),v}return T(m,g),m.prototype.exec=function(_,p,v){if(Array.isArray(_)){for(var w=_.length;w--;)if(this.exec(_[w],p,v))return!0;return!1}if("string"==typeof _&&(_=this.commands[_]),!_||p&&p.$readOnly&&!_.readOnly||0!=this.$checkCommandState&&_.isAvailable&&!_.isAvailable(p))return!1;var x={editor:p,command:_,args:v};return x.returnValue=this._emit("exec",x),this._signal("afterExec",x),!1!==x.returnValue},m.prototype.toggleRecording=function(_){if(!this.$inReplay)return _&&_._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(p){this.macro.push([p.command,p.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},m.prototype.replay=function(_){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(_);try{this.$inReplay=!0,this.macro.forEach(function(p){"string"==typeof p?this.exec(p,_):this.exec(p[0],_,p[1])},this)}finally{this.$inReplay=!1}}},m.prototype.trimMacro=function(_){return _.map(function(p){return"string"!=typeof p[0]&&(p[0]=p[0].name),p[1]||(p=p[0]),p})},m}(B);re.implement(M.prototype,E),ie.CommandManager=M}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(Q,ie,xe){"use strict";var T=Q("../lib/lang"),re=Q("../config"),B=Q("../range").Range;function E(g,m){return{win:g,mac:m}}ie.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:E("Ctrl-,","Command-,"),exec:function(g){re.loadModule("ace/ext/settings_menu",function(m){m.init(g),g.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:E("Alt-E","F4"),exec:function(g){re.loadModule("ace/ext/error_marker",function(m){m.showErrorMarker(g,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:E("Alt-Shift-E","Shift-F4"),exec:function(g){re.loadModule("ace/ext/error_marker",function(m){m.showErrorMarker(g,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:E("Ctrl-A","Command-A"),exec:function(g){g.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:E(null,"Ctrl-L"),exec:function(g){g.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:E("Ctrl-L","Command-L"),exec:function(g,m){"number"==typeof m&&!isNaN(m)&&g.gotoLine(m),g.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:E("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(g){g.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:E("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(g){g.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:E("F2","F2"),exec:function(g){g.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:E("Alt-F2","Alt-F2"),exec:function(g){g.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:E(null,"Ctrl-Command-Option-0"),exec:function(g){g.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:E(null,"Ctrl-Command-Option-0"),exec:function(g){g.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:E("Alt-0","Command-Option-0"),exec:function(g){g.session.foldAll(),g.session.unfold(g.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:E("Alt-Shift-0","Command-Option-Shift-0"),exec:function(g){g.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:E("Ctrl-K","Command-G"),exec:function(g){g.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:E("Ctrl-Shift-K","Command-Shift-G"),exec:function(g){g.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:E("Alt-K","Ctrl-G"),exec:function(g){g.selection.isEmpty()?g.selection.selectWord():g.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:E("Alt-Shift-K","Ctrl-Shift-G"),exec:function(g){g.selection.isEmpty()?g.selection.selectWord():g.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:E("Ctrl-F","Command-F"),exec:function(g){re.loadModule("ace/ext/searchbox",function(m){m.Search(g)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(g){g.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:E("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(g){g.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:E("Ctrl-Home","Command-Home|Command-Up"),exec:function(g){g.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:E("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(g){g.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:E("Up","Up|Ctrl-P"),exec:function(g,m){g.navigateUp(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:E("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(g){g.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:E("Ctrl-End","Command-End|Command-Down"),exec:function(g){g.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:E("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(g){g.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:E("Down","Down|Ctrl-N"),exec:function(g,m){g.navigateDown(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:E("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(g){g.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:E("Ctrl-Left","Option-Left"),exec:function(g){g.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:E("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(g){g.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:E("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(g){g.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:E("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(g){g.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:E("Left","Left|Ctrl-B"),exec:function(g,m){g.navigateLeft(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:E("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(g){g.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:E("Ctrl-Right","Option-Right"),exec:function(g){g.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:E("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(g){g.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:E("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(g){g.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:E("Shift-Right","Shift-Right"),exec:function(g){g.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:E("Right","Right|Ctrl-F"),exec:function(g,m){g.navigateRight(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(g){g.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:E(null,"Option-PageDown"),exec:function(g){g.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:E("PageDown","PageDown|Ctrl-V"),exec:function(g){g.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(g){g.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:E(null,"Option-PageUp"),exec:function(g){g.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(g){g.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:E("Ctrl-Up",null),exec:function(g){g.renderer.scrollBy(0,-2*g.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:E("Ctrl-Down",null),exec:function(g){g.renderer.scrollBy(0,2*g.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(g){g.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(g){g.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:E("Ctrl-Alt-E","Command-Option-E"),exec:function(g){g.commands.toggleRecording(g)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:E("Ctrl-Shift-E","Command-Shift-E"),exec:function(g){g.commands.replay(g)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:E("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(g){g.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:E("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(g){g.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:E("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(g){g.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:E(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(g){},readOnly:!0},{name:"cut",description:"Cut",exec:function(g){var _=g.$copyWithEmptySelection&&g.selection.isEmpty()?g.selection.getLineRange():g.selection.getRange();g._emit("cut",_),_.isEmpty()||g.session.remove(_),g.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(g,m){g.$handlePaste(m)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:E("Ctrl-D","Command-D"),exec:function(g){g.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:E("Ctrl-Shift-D","Command-Shift-D"),exec:function(g){g.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:E("Ctrl-Alt-S","Command-Alt-S"),exec:function(g){g.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:E("Ctrl-/","Command-/"),exec:function(g){g.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:E("Ctrl-Shift-/","Command-Shift-/"),exec:function(g){g.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:E("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(g){g.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:E("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(g){g.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:E("Ctrl-H","Command-Option-F"),exec:function(g){re.loadModule("ace/ext/searchbox",function(m){m.Search(g,!0)})}},{name:"undo",description:"Undo",bindKey:E("Ctrl-Z","Command-Z"),exec:function(g){g.undo()}},{name:"redo",description:"Redo",bindKey:E("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(g){g.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:E("Alt-Shift-Up","Command-Option-Up"),exec:function(g){g.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:E("Alt-Up","Option-Up"),exec:function(g){g.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:E("Alt-Shift-Down","Command-Option-Down"),exec:function(g){g.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:E("Alt-Down","Option-Down"),exec:function(g){g.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:E("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(g){g.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:E("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(g){g.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:E("Shift-Delete",null),exec:function(g){if(!g.selection.isEmpty())return!1;g.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:E("Alt-Backspace","Command-Backspace"),exec:function(g){g.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:E("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(g){g.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:E("Ctrl-Shift-Backspace",null),exec:function(g){var m=g.selection.getRange();m.start.column=0,g.session.remove(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:E("Ctrl-Shift-Delete",null),exec:function(g){var m=g.selection.getRange();m.end.column=Number.MAX_VALUE,g.session.remove(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:E("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(g){g.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:E("Ctrl-Delete","Alt-Delete"),exec:function(g){g.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:E("Shift-Tab","Shift-Tab"),exec:function(g){g.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:E("Tab","Tab"),exec:function(g){g.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:E("Ctrl-[","Ctrl-["),exec:function(g){g.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:E("Ctrl-]","Ctrl-]"),exec:function(g){g.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(g,m){g.insert(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(g,m){g.insert(T.stringRepeat(m.text||"",m.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:E(null,"Ctrl-O"),exec:function(g){g.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:E("Alt-Shift-X","Ctrl-T"),exec:function(g){g.transposeLetters()},multiSelectAction:function(g){g.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:E("Ctrl-U","Ctrl-U"),exec:function(g){g.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:E("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(g){g.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:E(null,null),exec:function(g){g.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:E("Ctrl-Shift-L","Command-Shift-L"),exec:function(g){var m=g.selection.getRange();m.start.column=m.end.column=0,m.end.row++,g.selection.setRange(m,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:E("Ctrl+F3","F3"),exec:function(g){g.openLink()}},{name:"joinlines",description:"Join lines",bindKey:E(null,null),exec:function(g){for(var m=g.selection.isBackwards(),_=m?g.selection.getSelectionLead():g.selection.getSelectionAnchor(),p=m?g.selection.getSelectionAnchor():g.selection.getSelectionLead(),v=g.session.doc.getLine(_.row).length,x=g.session.doc.getTextRange(g.selection.getRange()).replace(/\n\s*/," ").length,A=g.session.doc.getLine(_.row),R=_.row+1;R<=p.row+1;R++){var U=T.stringTrimLeft(T.stringTrimRight(g.session.doc.getLine(R)));0!==U.length&&(U=" "+U),A+=U}p.row+1<g.session.doc.getLength()-1&&(A+=g.session.doc.getNewLineCharacter()),g.clearSelection(),g.session.doc.replace(new B(_.row,0,p.row+2,0),A),x>0?(g.selection.moveCursorTo(_.row,_.column),g.selection.selectTo(_.row,_.column+x)):(v=g.session.doc.getLine(_.row).length>v?v+1:v,g.selection.moveCursorTo(_.row,v))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:E(null,null),exec:function(g){var m=g.session.doc.getLength()-1,_=g.session.doc.getLine(m).length,p=g.selection.rangeList.ranges,v=[];p.length<1&&(p=[g.selection.getRange()]);for(var w=0;w<p.length;w++)w==p.length-1&&(p[w].end.row===m&&p[w].end.column===_||v.push(new B(p[w].end.row,p[w].end.column,m,_))),0===w?0===p[w].start.row&&0===p[w].start.column||v.push(new B(0,0,p[w].start.row,p[w].start.column)):v.push(new B(p[w-1].end.row,p[w-1].end.column,p[w].start.row,p[w].start.column));for(g.exitMultiSelectMode(),g.clearSelection(),w=0;w<v.length;w++)g.selection.addRange(v[w],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(g){g.selection.clearSelection(),g.navigateLineEnd(),g.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(g){g.selection.clearSelection();var m=g.getCursorPosition();g.selection.moveTo(m.row-1,Number.MAX_VALUE),g.insert("\n"),0===m.row&&g.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command palette",bindKey:E("F1","F1"),exec:function(g){g.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:E(null,null),exec:function(g){g.prompt({$type:"modes"})},readOnly:!0}];for(var M=1;M<9;M++)ie.commands.push({name:"foldToLevel"+M,description:"Fold To Level "+M,level:M,exec:function(g){g.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(Q,ie,xe){"use strict";var T=Q("./lib/dom"),re=function(){function B(E){this.session=E,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return B.prototype.getRowLength=function(E){var M;return M=this.lineWidgets&&this.lineWidgets[E]&&this.lineWidgets[E].rowCount||0,this.$useWrapMode&&this.$wrapData[E]?this.$wrapData[E].length+1+M:1+M},B.prototype.$getWidgetScreenLength=function(){var E=0;return this.lineWidgets.forEach(function(M){M&&M.rowCount&&!M.hidden&&(E+=M.rowCount)}),E},B.prototype.$onChangeEditor=function(E){this.attach(E.editor)},B.prototype.attach=function(E){E&&E.widgetManager&&E.widgetManager!=this&&E.widgetManager.detach(),this.editor!=E&&(this.detach(),this.editor=E,E&&(E.widgetManager=this,E.renderer.on("beforeRender",this.measureWidgets),E.renderer.on("afterRender",this.renderWidgets)))},B.prototype.detach=function(E){var M=this.editor;if(M){this.editor=null,M.widgetManager=null,M.renderer.off("beforeRender",this.measureWidgets),M.renderer.off("afterRender",this.renderWidgets);var g=this.session.lineWidgets;g&&g.forEach(function(m){m&&m.el&&m.el.parentNode&&(m._inDocument=!1,m.el.parentNode.removeChild(m.el))})}},B.prototype.updateOnFold=function(E,M){var g=M.lineWidgets;if(g&&E.action){for(var m=E.data,_=m.start.row,p=m.end.row,v="add"==E.action,w=_+1;w<p;w++)g[w]&&(g[w].hidden=v);g[p]&&(v?g[_]?g[p].hidden=v:g[_]=g[p]:(g[_]==g[p]&&(g[_]=void 0),g[p].hidden=v))}},B.prototype.updateOnChange=function(E){var M=this.session.lineWidgets;if(M){var g=E.start.row,m=E.end.row-g;if(0!==m)if("remove"==E.action){var _=M.splice(g+1,m);!M[g]&&_[_.length-1]&&(M[g]=_.pop()),_.forEach(function(v){v&&this.removeLineWidget(v)},this),this.$updateRows()}else{var p=new Array(m);M[g]&&null!=M[g].column&&E.start.column>M[g].column&&g++,p.unshift(g,0),M.splice.apply(M,p),this.$updateRows()}}},B.prototype.$updateRows=function(){var E=this.session.lineWidgets;if(E){var M=!0;E.forEach(function(g,m){if(g)for(M=!1,g.row=m;g.$oldWidget;)g.$oldWidget.row=m,g=g.$oldWidget}),M&&(this.session.lineWidgets=null)}},B.prototype.$registerLineWidget=function(E){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var M=this.session.lineWidgets[E.row];return M&&(E.$oldWidget=M,M.el&&M.el.parentNode&&(M.el.parentNode.removeChild(M.el),M._inDocument=!1)),this.session.lineWidgets[E.row]=E,E},B.prototype.addLineWidget=function(E){if(this.$registerLineWidget(E),E.session=this.session,!this.editor)return E;var M=this.editor.renderer;E.html&&!E.el&&(E.el=T.createElement("div"),E.el.innerHTML=E.html),E.text&&!E.el&&(E.el=T.createElement("div"),E.el.textContent=E.text),E.el&&(T.addCssClass(E.el,"ace_lineWidgetContainer"),E.className&&T.addCssClass(E.el,E.className),E.el.style.position="absolute",E.el.style.zIndex=5,M.container.appendChild(E.el),E._inDocument=!0,E.coverGutter||(E.el.style.zIndex=3),null==E.pixelHeight&&(E.pixelHeight=E.el.offsetHeight)),null==E.rowCount&&(E.rowCount=E.pixelHeight/M.layerConfig.lineHeight);var g=this.session.getFoldAt(E.row,0);if(E.$fold=g,g){var m=this.session.lineWidgets;E.row!=g.end.row||m[g.start.row]?E.hidden=!0:m[g.start.row]=E}return this.session._emit("changeFold",{data:{start:{row:E.row}}}),this.$updateRows(),this.renderWidgets(null,M),this.onWidgetChanged(E),E},B.prototype.removeLineWidget=function(E){if(E._inDocument=!1,E.session=null,E.el&&E.el.parentNode&&E.el.parentNode.removeChild(E.el),E.editor&&E.editor.destroy)try{E.editor.destroy()}catch{}if(this.session.lineWidgets){var M=this.session.lineWidgets[E.row];if(M==E)this.session.lineWidgets[E.row]=E.$oldWidget,E.$oldWidget&&this.onWidgetChanged(E.$oldWidget);else for(;M;){if(M.$oldWidget==E){M.$oldWidget=E.$oldWidget;break}M=M.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:E.row}}}),this.$updateRows()},B.prototype.getWidgetsAtRow=function(E){for(var M=this.session.lineWidgets,g=M&&M[E],m=[];g;)m.push(g),g=g.$oldWidget;return m},B.prototype.onWidgetChanged=function(E){this.session._changedWidgets.push(E),this.editor&&this.editor.renderer.updateFull()},B.prototype.measureWidgets=function(E,M){var g=this.session._changedWidgets,m=M.layerConfig;if(g&&g.length){for(var _=1/0,p=0;p<g.length;p++){var v=g[p];if(v&&v.el&&v.session==this.session){if(!v._inDocument){if(this.session.lineWidgets[v.row]!=v)continue;v._inDocument=!0,M.container.appendChild(v.el)}v.h=v.el.offsetHeight,v.fixedWidth||(v.w=v.el.offsetWidth,v.screenWidth=Math.ceil(v.w/m.characterWidth));var w=v.h/m.lineHeight;v.coverLine&&(w-=this.session.getRowLineCount(v.row))<0&&(w=0),v.rowCount!=w&&(v.rowCount=w,v.row<_&&(_=v.row))}}_!=1/0&&(this.session._emit("changeFold",{data:{start:{row:_}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},B.prototype.renderWidgets=function(E,M){var g=M.layerConfig,m=this.session.lineWidgets;if(m){for(var _=Math.min(this.firstRow,g.firstRow),p=Math.max(this.lastRow,g.lastRow,m.length);_>0&&!m[_];)_--;this.firstRow=g.firstRow,this.lastRow=g.lastRow,M.$cursorLayer.config=g;for(var v=_;v<=p;v++){var w=m[v];if(w&&w.el){if(w.hidden){w.el.style.top=-100-(w.pixelHeight||0)+"px";continue}w._inDocument||(w._inDocument=!0,M.container.appendChild(w.el));var x=M.$cursorLayer.getPixelPosition({row:v,column:0},!0).top;w.coverLine||(x+=g.lineHeight*this.session.getRowLineCount(w.row)),w.el.style.top=x-g.offset+"px";var A=w.coverGutter?0:M.gutterWidth;w.fixedWidth||(A-=M.scrollLeft),w.el.style.left=A+"px",w.fullWidth&&w.screenWidth&&(w.el.style.minWidth=g.width+2*g.padding+"px"),w.el.style.right=w.fixedWidth?M.scrollBar.getWidth()+"px":""}}}},B}();ie.LineWidgets=re}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(Q,ie,xe){"use strict";var T=Q("../lib/keys"),re=Q("../mouse/default_gutter_handler").GutterTooltip,B=function(){function M(g){this.editor=g,this.gutterLayer=g.renderer.$gutterLayer,this.element=g.renderer.$gutter,this.lines=g.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new re(this.editor)}return M.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},M.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},M.prototype.$onGutterKeyDown=function(g){if(this.annotationTooltip.isOpen)return g.preventDefault(),void(g.keyCode===T.escape&&this.annotationTooltip.hideTooltip());if(g.target===this.element){if(g.keyCode!=T.enter)return;g.preventDefault();var m=this.editor.getCursorPosition().row;return this.editor.isRowVisible(m)||this.editor.scrollToLine(m,!0,!0),void setTimeout(function(){var _=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),p=this.$findNearestFoldWidget(_),v=this.$findNearestAnnotation(_);if(null!==p||null!==v)return null===p&&null!==v?(this.activeRowIndex=v,this.activeLane="annotation",void this.$focusAnnotation(this.activeRowIndex)):null!==p&&null===v?(this.activeRowIndex=p,this.activeLane="fold",void this.$focusFoldWidget(this.activeRowIndex)):Math.abs(v-_)<Math.abs(p-_)?(this.activeRowIndex=v,this.activeLane="annotation",void this.$focusAnnotation(this.activeRowIndex)):(this.activeRowIndex=p,this.activeLane="fold",void this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10)}this.$handleGutterKeyboardInteraction(g),setTimeout(function(){this.editor._signal("gutterkeydown",new E(g,this))}.bind(this),10)},M.prototype.$handleGutterKeyboardInteraction=function(g){if(g.keyCode!==T.tab){if(g.keyCode===T.escape)return g.preventDefault(),this.$blurGutter(),this.element.focus(),void(this.lane=null);if(g.keyCode!==T.up)if(g.keyCode!==T.down){if(g.keyCode===T.left)return g.preventDefault(),void this.$switchLane("annotation");if(g.keyCode===T.right)return g.preventDefault(),void this.$switchLane("fold");if(g.keyCode!==T.enter&&g.keyCode!==T.space);else switch(g.preventDefault(),this.activeLane){case"fold":if("start"===this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]){var m=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),g),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==m&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(m),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}if("end"===this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)])break;return;case"annotation":var p=this.lines.cells[this.activeRowIndex].element.childNodes[2].getBoundingClientRect(),v=this.annotationTooltip.getElement().style;v.left=p.right+"px",v.top=p.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex))}}else switch(g.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown()}else switch(g.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp()}}else g.preventDefault()},M.prototype.$blurGutter=function(){if(null!==this.activeRowIndex)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex)}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},M.prototype.$isFoldWidgetVisible=function(g){var m=this.editor.isRowFullyVisible(this.$rowIndexToRow(g)),_="none"!==this.$getFoldWidget(g).style.display;return m&&_},M.prototype.$isAnnotationVisible=function(g){var m=this.editor.isRowFullyVisible(this.$rowIndexToRow(g)),_="none"!==this.$getAnnotation(g).style.display;return m&&_},M.prototype.$getFoldWidget=function(g){return this.lines.get(g).element.childNodes[1]},M.prototype.$getAnnotation=function(g){return this.lines.get(g).element.childNodes[2]},M.prototype.$findNearestFoldWidget=function(g){if(this.$isFoldWidgetVisible(g))return g;for(var m=0;g-m>0||g+m<this.lines.getLength()-1;){if(g-++m>=0&&this.$isFoldWidgetVisible(g-m))return g-m;if(g+m<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(g+m))return g+m}return null},M.prototype.$findNearestAnnotation=function(g){if(this.$isAnnotationVisible(g))return g;for(var m=0;g-m>0||g+m<this.lines.getLength()-1;){if(g-++m>=0&&this.$isAnnotationVisible(g-m))return g-m;if(g+m<=this.lines.getLength()-1&&this.$isAnnotationVisible(g+m))return g+m}return null},M.prototype.$focusFoldWidget=function(g){if(null!=g){var m=this.$getFoldWidget(g);m.classList.add(this.editor.renderer.keyboardFocusClassName),m.focus()}},M.prototype.$focusAnnotation=function(g){if(null!=g){var m=this.$getAnnotation(g);m.classList.add(this.editor.renderer.keyboardFocusClassName),m.focus()}},M.prototype.$blurFoldWidget=function(g){var m=this.$getFoldWidget(g);m.classList.remove(this.editor.renderer.keyboardFocusClassName),m.blur()},M.prototype.$blurAnnotation=function(g){var m=this.$getAnnotation(g);m.classList.remove(this.editor.renderer.keyboardFocusClassName),m.blur()},M.prototype.$moveFoldWidgetUp=function(){for(var g=this.activeRowIndex;g>0;)if(g--,this.$isFoldWidgetVisible(g))return this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=g,void this.$focusFoldWidget(this.activeRowIndex)},M.prototype.$moveFoldWidgetDown=function(){for(var g=this.activeRowIndex;g<this.lines.getLength()-1;)if(g++,this.$isFoldWidgetVisible(g))return this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=g,void this.$focusFoldWidget(this.activeRowIndex)},M.prototype.$moveAnnotationUp=function(){for(var g=this.activeRowIndex;g>0;)if(g--,this.$isAnnotationVisible(g))return this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=g,void this.$focusAnnotation(this.activeRowIndex)},M.prototype.$moveAnnotationDown=function(){for(var g=this.activeRowIndex;g<this.lines.getLength()-1;)if(g++,this.$isAnnotationVisible(g))return this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=g,void this.$focusAnnotation(this.activeRowIndex)},M.prototype.$switchLane=function(g){switch(g){case"annotation":if("annotation"===this.activeLane)break;var m=this.$findNearestAnnotation(this.activeRowIndex);if(null==m)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=m,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if("fold"===this.activeLane)break;var _=this.$findNearestFoldWidget(this.activeRowIndex);if(null==_)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=_,this.$focusFoldWidget(this.activeRowIndex)}},M.prototype.$rowIndexToRow=function(g){var m=this.lines.get(g);return m?m.row:null},M.prototype.$rowToRowIndex=function(g){for(var m=0;m<this.lines.getLength();m++)if(this.lines.get(m).row==g)return m;return null},M}();ie.GutterKeyboardHandler=B;var E=function(){function M(g,m){this.gutterKeyboardHandler=m,this.domEvent=g}return M.prototype.getKey=function(){return T.keyCodeToString(this.domEvent.keyCode)},M.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},M.prototype.isInAnnotationLane=function(){return"annotation"===this.gutterKeyboardHandler.activeLane},M.prototype.isInFoldLane=function(){return"fold"===this.gutterKeyboardHandler.activeLane},M}();ie.GutterKeyboardEvent=E}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(Q,ie,xe){"use strict";var T=this&&this.__values||function(G){var D="function"==typeof Symbol&&Symbol.iterator,Y=D&&G[D],ee=0;if(Y)return Y.call(G);if(G&&"number"==typeof G.length)return{next:function(){return G&&ee>=G.length&&(G=void 0),{value:G&&G[ee++],done:!G}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")},re=Q("./lib/oop"),B=Q("./lib/dom"),E=Q("./lib/lang"),M=Q("./lib/useragent"),g=Q("./keyboard/textinput").TextInput,m=Q("./mouse/mouse_handler").MouseHandler,_=Q("./mouse/fold_handler").FoldHandler,p=Q("./keyboard/keybinding").KeyBinding,v=Q("./edit_session").EditSession,w=Q("./search").Search,x=Q("./range").Range,A=Q("./lib/event_emitter").EventEmitter,R=Q("./commands/command_manager").CommandManager,U=Q("./commands/default_commands").commands,L=Q("./config"),W=Q("./token_iterator").TokenIterator,H=Q("./line_widgets").LineWidgets,P=Q("./keyboard/gutter_handler").GutterKeyboardHandler,$=Q("./config").nls,X=Q("./clipboard"),V=Q("./lib/keys"),N=function(){function G(D,Y,ee){this.$toDestroy=[];var fe=D.getContainerElement();this.container=fe,this.renderer=D,this.id="editor"+ ++G.$uid,this.commands=new R(M.isMac?"mac":"win",U),"object"==typeof document&&(this.textInput=new g(D.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new m(this),new _(this)),this.keyBinding=new p(this),this.$search=(new w).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=E.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(_e,we){we._$emitInputEvent.schedule(31)}),this.setSession(Y||ee&&ee.session||new v("")),L.resetOptions(this),ee&&this.setOptions(ee),L._signal("editor",this)}return G.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=E.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},G.prototype.startOperation=function(D){if(this.curOp){if(!D||this.curOp.command)return;this.prevOp=this.curOp}D||(this.previousCommand=null,D={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:D.command||{},args:D.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},G.prototype.endOperation=function(D){if(this.curOp&&this.session){if(D&&!1===D.returnValue||!this.session)return this.curOp=null;if(1==D&&this.curOp.command&&"mouse"==this.curOp.command.name||(this._signal("beforeEndOperation"),!this.curOp))return;var Y=this.curOp.command,ee=Y&&Y.scrollIntoView;if(ee){switch(ee){case"center-animate":ee="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var fe=this.selection.getRange(),_e=this.renderer.layerConfig;(fe.start.row>=_e.lastRow||fe.end.row<=_e.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==ee&&this.renderer.animateScrolling(this.curOp.scrollTop)}var we=this.selection.toJSON();this.curOp.selectionAfter=we,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(we),this.prevOp=this.curOp,this.curOp=null}},G.prototype.$historyTracker=function(D){if(this.$mergeUndoDeltas){var Y=this.prevOp,ee=this.$mergeableCommands,fe=Y.command&&D.command.name==Y.command.name;if("insertstring"==D.command.name){var _e=D.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),fe=fe&&this.mergeNextCommand&&(!/\s/.test(_e)||/\s/.test(Y.args)),this.mergeNextCommand=!0}else fe=fe&&-1!==ee.indexOf(D.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(fe=!1),fe?this.session.mergeUndoDeltas=!0:-1!==ee.indexOf(D.command.name)&&(this.sequenceStartTime=Date.now())}},G.prototype.setKeyboardHandler=function(D,Y){if(D&&"string"==typeof D&&"ace"!=D){this.$keybindingId=D;var ee=this;L.loadModule(["keybinding",D],function(fe){ee.$keybindingId==D&&ee.keyBinding.setKeyboardHandler(fe&&fe.handler),Y&&Y()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(D),Y&&Y()},G.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},G.prototype.setSession=function(D){if(this.session!=D){this.curOp&&this.endOperation(),this.curOp={};var Y=this.session;if(Y){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var ee=this.session.getSelection();ee.off("changeCursor",this.$onCursorChange),ee.off("changeSelection",this.$onSelectionChange)}this.session=D,D?(this.$onDocumentChange=this.onDocumentChange.bind(this),D.on("change",this.$onDocumentChange),this.renderer.setSession(D),this.$onChangeMode=this.onChangeMode.bind(this),D.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),D.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),D.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),D.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),D.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),D.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=D.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(D)),this._signal("changeSession",{session:D,oldSession:Y}),this.curOp=null,Y&&Y._signal("changeEditor",{oldEditor:this}),D&&D._signal("changeEditor",{editor:this}),D&&!D.destroyed&&D.bgTokenizer.scheduleStart()}},G.prototype.getSession=function(){return this.session},G.prototype.setValue=function(D,Y){return this.session.doc.setValue(D),Y?1==Y?this.navigateFileEnd():-1==Y&&this.navigateFileStart():this.selectAll(),D},G.prototype.getValue=function(){return this.session.getValue()},G.prototype.getSelection=function(){return this.selection},G.prototype.resize=function(D){this.renderer.onResize(D)},G.prototype.setTheme=function(D,Y){this.renderer.setTheme(D,Y)},G.prototype.getTheme=function(){return this.renderer.getTheme()},G.prototype.setStyle=function(D){this.renderer.setStyle(D)},G.prototype.unsetStyle=function(D){this.renderer.unsetStyle(D)},G.prototype.getFontSize=function(){return this.getOption("fontSize")||B.computedStyle(this.container).fontSize},G.prototype.setFontSize=function(D){this.setOption("fontSize",D)},G.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var D=this;this.$highlightPending=!0,setTimeout(function(){D.$highlightPending=!1;var Y=D.session;if(Y&&!Y.destroyed){Y.$bracketHighlight&&(Y.$bracketHighlight.markerIds.forEach(function(Le){Y.removeMarker(Le)}),Y.$bracketHighlight=null);var ee=D.getCursorPosition(),fe=D.getKeyboardHandler(),_e=fe&&fe.$getDirectionForHighlight&&fe.$getDirectionForHighlight(D),we=Y.getMatchingBracketRanges(ee,_e);if(!we){var Ce=new W(Y,ee.row,ee.column).getCurrentToken();if(Ce&&/\b(?:tag-open|tag-name)/.test(Ce.type)){var We=Y.getMatchingTags(ee);We&&(we=[We.openTagName,We.closeTagName])}}if(!we&&Y.$mode.getMatching&&(we=Y.$mode.getMatching(D.session)),!we)return void(D.getHighlightIndentGuides()&&D.renderer.$textLayer.$highlightIndentGuide());var Te="ace_bracket";Array.isArray(we)?1==we.length&&(Te="ace_error_bracket"):we=[we],2==we.length&&(0==x.comparePoints(we[0].end,we[1].start)?we=[x.fromPoints(we[0].start,we[1].end)]:0==x.comparePoints(we[0].start,we[1].end)&&(we=[x.fromPoints(we[1].start,we[0].end)])),Y.$bracketHighlight={ranges:we,markerIds:we.map(function(Le){return Y.addMarker(Le,Te,"text")})},D.getHighlightIndentGuides()&&D.renderer.$textLayer.$highlightIndentGuide()}},50)}},G.prototype.focus=function(){this.textInput.focus()},G.prototype.isFocused=function(){return this.textInput.isFocused()},G.prototype.blur=function(){this.textInput.blur()},G.prototype.onFocus=function(D){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",D))},G.prototype.onBlur=function(D){!this.$isFocused||(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",D))},G.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},G.prototype.onDocumentChange=function(D){this.renderer.updateLines(D.start.row,D.start.row==D.end.row?D.end.row:1/0,this.session.$useWrapMode),this._signal("change",D),this.$cursorChange()},G.prototype.onTokenizerUpdate=function(D){var Y=D.data;this.renderer.updateLines(Y.first,Y.last)},G.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},G.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},G.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},G.prototype.$updateHighlightActiveLine=function(){var Y,D=this.getSession();if(this.$highlightActiveLine&&(("line"!=this.$selectionStyle||!this.selection.isMultiLine())&&(Y=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(Y=!1),this.renderer.$maxLines&&1===this.session.getLength()&&!(this.renderer.$minLines>1)&&(Y=!1)),D.$highlightLineMarker&&!Y)D.removeMarker(D.$highlightLineMarker.id),D.$highlightLineMarker=null;else if(!D.$highlightLineMarker&&Y){var ee=new x(Y.row,Y.column,Y.row,1/0);ee.id=D.addMarker(ee,"ace_active-line","screenLine"),D.$highlightLineMarker=ee}else Y&&(D.$highlightLineMarker.start.row=Y.row,D.$highlightLineMarker.end.row=Y.row,D.$highlightLineMarker.start.column=Y.column,D._signal("changeBackMarker"))},G.prototype.onSelectionChange=function(D){var Y=this.session;if(Y.$selectionMarker&&Y.removeMarker(Y.$selectionMarker),Y.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var ee=this.selection.getRange(),fe=this.getSelectionStyle();Y.$selectionMarker=Y.addMarker(ee,"ace_selection",fe)}var _e=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(_e),this._signal("changeSelection")},G.prototype.$getSelectionHighLightRegexp=function(){var D=this.session,Y=this.getSelectionRange();if(!Y.isEmpty()&&!Y.isMultiLine()){var ee=Y.start.column,fe=Y.end.column,_e=D.getLine(Y.start.row),we=_e.substring(ee,fe);if(!(we.length>5e3)&&/[\w\d]/.test(we)){var ke=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:we}),Ce=_e.substring(ee-1,fe+1);if(ke.test(Ce))return ke}}},G.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},G.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},G.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},G.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},G.prototype.onChangeMode=function(D){this.renderer.updateText(),this._emit("changeMode",D)},G.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},G.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},G.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},G.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},G.prototype.getCopyText=function(){var D=this.getSelectedText(),Y=this.session.doc.getNewLineCharacter(),ee=!1;if(!D&&this.$copyWithEmptySelection){ee=!0;for(var fe=this.selection.getAllRanges(),_e=0;_e<fe.length;_e++){var we=fe[_e];_e&&fe[_e-1].start.row==we.start.row||(D+=this.session.getLine(we.start.row)+Y)}}var ke={text:D};return this._signal("copy",ke),X.lineMode=!!ee&&ke.text,ke.text},G.prototype.onCopy=function(){this.commands.exec("copy",this)},G.prototype.onCut=function(){this.commands.exec("cut",this)},G.prototype.onPaste=function(D,Y){this.commands.exec("paste",this,{text:D,event:Y})},G.prototype.$handlePaste=function(D){"string"==typeof D&&(D={text:D}),this._signal("paste",D);var Y=D.text,ee=Y===X.lineMode,fe=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)ee?fe.insert({row:this.selection.lead.row,column:0},Y):this.insert(Y);else if(ee)this.selection.rangeList.ranges.forEach(function(Te){fe.insert({row:Te.start.row,column:0},Y)});else{var _e=Y.split(/\r\n|\r|\n/),we=this.selection.rangeList.ranges;if(_e.length!=we.length||!(2!=_e.length||_e[0]&&_e[1]))return this.commands.exec("insertstring",this,Y);for(var Ce=we.length;Ce--;){var We=we[Ce];We.isEmpty()||fe.remove(We),fe.insert(We.start,_e[Ce])}}},G.prototype.execCommand=function(D,Y){return this.commands.exec(D,this,Y)},G.prototype.insert=function(D,Y){var ee=this.session,fe=ee.getMode(),_e=this.getCursorPosition();if(this.getBehavioursEnabled()&&!Y){var we=fe.transformAction(ee.getState(_e.row),"insertion",this,ee,D);we&&(D!==we.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),D=we.text)}if("\t"==D&&(D=this.session.getTabString()),this.selection.isEmpty())this.session.getOverwrite()&&-1==D.indexOf("\n")&&((ke=new x.fromPoints(_e,_e)).end.column+=D.length,this.session.remove(ke));else{var ke=this.getSelectionRange();_e=this.session.remove(ke),this.clearSelection()}if("\n"==D||"\r\n"==D){var Le=ee.getLine(_e.row);if(_e.column>Le.search(/\S|$/)){var Ce=Le.substr(_e.column).search(/\S|$/);ee.doc.removeInLine(_e.row,_e.column,_e.column+Ce)}}this.clearSelection();var We=_e.column,Te=ee.getState(_e.row),et=(Le=ee.getLine(_e.row),fe.checkOutdent(Te,Le,D));if(ee.insert(_e,D),we&&we.selection&&this.selection.setSelectionRange(2==we.selection.length?new x(_e.row,We+we.selection[0],_e.row,We+we.selection[1]):new x(_e.row+we.selection[0],we.selection[1],_e.row+we.selection[2],we.selection[3])),this.$enableAutoIndent){if(ee.getDocument().isNewLine(D)){var Bt=fe.getNextLineIndent(Te,Le.slice(0,_e.column),ee.getTabString());ee.insert({row:_e.row+1,column:0},Bt)}et&&fe.autoOutdent(Te,ee,_e.row)}},G.prototype.autoIndent=function(){var ee,fe,D=this.session,Y=D.getMode();if(this.selection.isEmpty())ee=0,fe=D.doc.getLength()-1;else{var _e=this.getSelectionRange();ee=_e.start.row,fe=_e.end.row}for(var We,Te,Le,we="",ke="",Ce="",et=D.getTabString(),Bt=ee;Bt<=fe;Bt++)Bt>0&&(we=D.getState(Bt-1),ke=D.getLine(Bt-1),Ce=Y.getNextLineIndent(we,ke,et)),We=D.getLine(Bt),Ce!==(Te=Y.$getIndent(We))&&(Te.length>0&&(Le=new x(Bt,0,Bt,Te.length),D.remove(Le)),Ce.length>0&&D.insert({row:Bt,column:0},Ce)),Y.autoOutdent(we,D,Bt)},G.prototype.onTextInput=function(D,Y){if(!Y)return this.keyBinding.onTextInput(D);this.startOperation({command:{name:"insertstring"}});var ee=this.applyComposition.bind(this,D,Y);this.selection.rangeCount?this.forEachSelection(ee):ee(),this.endOperation()},G.prototype.applyComposition=function(D,Y){var ee;(Y.extendLeft||Y.extendRight)&&((ee=this.selection.getRange()).start.column-=Y.extendLeft,ee.end.column+=Y.extendRight,ee.start.column<0&&(ee.start.row--,ee.start.column+=this.session.getLine(ee.start.row).length+1),this.selection.setRange(ee),!D&&!ee.isEmpty()&&this.remove()),(D||!this.selection.isEmpty())&&this.insert(D,!0),(Y.restoreStart||Y.restoreEnd)&&((ee=this.selection.getRange()).start.column-=Y.restoreStart,ee.end.column-=Y.restoreEnd,this.selection.setRange(ee))},G.prototype.onCommandKey=function(D,Y,ee){return this.keyBinding.onCommandKey(D,Y,ee)},G.prototype.setOverwrite=function(D){this.session.setOverwrite(D)},G.prototype.getOverwrite=function(){return this.session.getOverwrite()},G.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},G.prototype.setScrollSpeed=function(D){this.setOption("scrollSpeed",D)},G.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},G.prototype.setDragDelay=function(D){this.setOption("dragDelay",D)},G.prototype.getDragDelay=function(){return this.getOption("dragDelay")},G.prototype.setSelectionStyle=function(D){this.setOption("selectionStyle",D)},G.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},G.prototype.setHighlightActiveLine=function(D){this.setOption("highlightActiveLine",D)},G.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},G.prototype.setHighlightGutterLine=function(D){this.setOption("highlightGutterLine",D)},G.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},G.prototype.setHighlightSelectedWord=function(D){this.setOption("highlightSelectedWord",D)},G.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},G.prototype.setAnimatedScroll=function(D){this.renderer.setAnimatedScroll(D)},G.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},G.prototype.setShowInvisibles=function(D){this.renderer.setShowInvisibles(D)},G.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},G.prototype.setDisplayIndentGuides=function(D){this.renderer.setDisplayIndentGuides(D)},G.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},G.prototype.setHighlightIndentGuides=function(D){this.renderer.setHighlightIndentGuides(D)},G.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},G.prototype.setShowPrintMargin=function(D){this.renderer.setShowPrintMargin(D)},G.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},G.prototype.setPrintMarginColumn=function(D){this.renderer.setPrintMarginColumn(D)},G.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},G.prototype.setReadOnly=function(D){this.setOption("readOnly",D)},G.prototype.getReadOnly=function(){return this.getOption("readOnly")},G.prototype.setBehavioursEnabled=function(D){this.setOption("behavioursEnabled",D)},G.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},G.prototype.setWrapBehavioursEnabled=function(D){this.setOption("wrapBehavioursEnabled",D)},G.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},G.prototype.setShowFoldWidgets=function(D){this.setOption("showFoldWidgets",D)},G.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},G.prototype.setFadeFoldWidgets=function(D){this.setOption("fadeFoldWidgets",D)},G.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},G.prototype.remove=function(D){this.selection.isEmpty()&&("left"==D?this.selection.selectLeft():this.selection.selectRight());var Y=this.getSelectionRange();if(this.getBehavioursEnabled()){var ee=this.session,fe=ee.getState(Y.start.row),_e=ee.getMode().transformAction(fe,"deletion",this,ee,Y);if(0===Y.end.column){var we=ee.getTextRange(Y);if("\n"==we[we.length-1]){var ke=ee.getLine(Y.end.row);/^\s+$/.test(ke)&&(Y.end.column=ke.length)}}_e&&(Y=_e)}this.session.remove(Y),this.clearSelection()},G.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},G.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},G.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},G.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var D=this.getSelectionRange();D.start.column==D.end.column&&D.start.row==D.end.row&&(D.end.column=0,D.end.row++),this.session.remove(D),this.clearSelection()},G.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var D=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(D)},G.prototype.setGhostText=function(D,Y){this.session.widgetManager||(this.session.widgetManager=new H(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(D,Y)},G.prototype.removeGhostText=function(){!this.session.widgetManager||this.renderer.removeGhostText()},G.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var D=this.getCursorPosition(),Y=D.column;if(0!==Y){var fe,_e,ee=this.session.getLine(D.row);Y<ee.length?(fe=ee.charAt(Y)+ee.charAt(Y-1),_e=new x(D.row,Y-1,D.row,Y+1)):(fe=ee.charAt(Y-1)+ee.charAt(Y-2),_e=new x(D.row,Y-2,D.row,Y)),this.session.replace(_e,fe),this.session.selection.moveToPosition(_e.end)}}},G.prototype.toLowerCase=function(){var D=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var Y=this.getSelectionRange(),ee=this.session.getTextRange(Y);this.session.replace(Y,ee.toLowerCase()),this.selection.setSelectionRange(D)},G.prototype.toUpperCase=function(){var D=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var Y=this.getSelectionRange(),ee=this.session.getTextRange(Y);this.session.replace(Y,ee.toUpperCase()),this.selection.setSelectionRange(D)},G.prototype.indent=function(){var D=this.session,Y=this.getSelectionRange();if(!(Y.start.row<Y.end.row)){if(Y.start.column<Y.end.column){var fe=D.getTextRange(Y);if(!/^\s+$/.test(fe))return ee=this.$getSelectedRows(),void D.indentRows(ee.first,ee.last,"\t")}var _e=D.getLine(Y.start.row),we=Y.start,ke=D.getTabSize(),Ce=D.documentToScreenColumn(we.row,we.column);if(this.session.getUseSoftTabs())var Te=E.stringRepeat(" ",We=ke-Ce%ke);else{for(var We=Ce%ke;" "==_e[Y.start.column-1]&&We;)Y.start.column--,We--;this.selection.setSelectionRange(Y),Te="\t"}return this.insert(Te)}var ee=this.$getSelectedRows();D.indentRows(ee.first,ee.last,"\t")},G.prototype.blockIndent=function(){var D=this.$getSelectedRows();this.session.indentRows(D.first,D.last,"\t")},G.prototype.blockOutdent=function(){var D=this.session.getSelection();this.session.outdentRows(D.getRange())},G.prototype.sortLines=function(){for(var D=this.$getSelectedRows(),Y=this.session,ee=[],fe=D.first;fe<=D.last;fe++)ee.push(Y.getLine(fe));ee.sort(function(ke,Ce){return ke.toLowerCase()<Ce.toLowerCase()?-1:ke.toLowerCase()>Ce.toLowerCase()?1:0});var _e=new x(0,0,0,0);for(fe=D.first;fe<=D.last;fe++){var we=Y.getLine(fe);_e.start.row=fe,_e.end.row=fe,_e.end.column=we.length,Y.replace(_e,ee[fe-D.first])}},G.prototype.toggleCommentLines=function(){var D=this.session.getState(this.getCursorPosition().row),Y=this.$getSelectedRows();this.session.getMode().toggleCommentLines(D,this.session,Y.first,Y.last)},G.prototype.toggleBlockComment=function(){var D=this.getCursorPosition(),Y=this.session.getState(D.row),ee=this.getSelectionRange();this.session.getMode().toggleBlockComment(Y,this.session,ee,D)},G.prototype.getNumberAt=function(D,Y){var ee=/[\-]?[0-9]+(?:\.[0-9]+)?/g;ee.lastIndex=0;for(var fe=this.session.getLine(D);ee.lastIndex<Y;){var _e=ee.exec(fe);if(_e.index<=Y&&_e.index+_e[0].length>=Y)return{value:_e[0],start:_e.index,end:_e.index+_e[0].length}}return null},G.prototype.modifyNumber=function(D){var Y=this.selection.getCursor().row,ee=this.selection.getCursor().column,fe=new x(Y,ee-1,Y,ee),_e=this.session.getTextRange(fe);if(!isNaN(parseFloat(_e))&&isFinite(_e)){var we=this.getNumberAt(Y,ee);if(we){var ke=we.value.indexOf(".")>=0?we.start+we.value.indexOf(".")+1:we.end,Ce=we.start+we.value.length-ke,We=parseFloat(we.value);We*=Math.pow(10,Ce),We+=D*=ke!==we.end&&ee<ke?Math.pow(10,we.end-ee-1):Math.pow(10,we.end-ee);var Te=(We/=Math.pow(10,Ce)).toFixed(Ce),Le=new x(Y,we.start,Y,we.end);this.session.replace(Le,Te),this.moveCursorTo(Y,Math.max(we.start+1,ee+Te.length-we.value.length))}}else this.toggleWord()},G.prototype.toggleWord=function(){var D=this.selection.getCursor().row,Y=this.selection.getCursor().column;this.selection.selectWord();var ee=this.getSelectedText(),fe=this.selection.getWordRange().start.column,_e=ee.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),we=Y-fe-1;we<0&&(we=0);var ke=0,Ce=0,We=this;ee.match(/[A-Za-z0-9_]+/)&&_e.forEach(function(Pt,ct){Ce=ke+Pt.length,we>=ke&&we<=Ce&&(ee=Pt,We.selection.clearSelection(),We.moveCursorTo(D,ke+fe),We.selection.selectTo(D,Ce+fe)),ke=Ce});for(var Le,Te=this.$toggleWordPairs,et=0;et<Te.length;et++)for(var Bt=Te[et],Dt=0;Dt<=1;Dt++){var Lt=+!Dt,He=ee.match(new RegExp("^\\s?_?("+E.escapeRegExp(Bt[Dt])+")\\s?$","i"));He&&ee.match(new RegExp("([_]|^|\\s)("+E.escapeRegExp(He[1])+")($|\\s)","g"))&&(Le=ee.replace(new RegExp(E.escapeRegExp(Bt[Dt]),"i"),function(Pt){var ct=Bt[Lt];return Pt.toUpperCase()==Pt?ct=ct.toUpperCase():Pt.charAt(0).toUpperCase()==Pt.charAt(0)&&(ct=ct.substr(0,0)+Bt[Lt].charAt(0).toUpperCase()+ct.substr(1)),ct}),this.insert(Le),Le="")}},G.prototype.findLinkAt=function(D,Y){var ee,fe,we=this.session.getLine(D).split(/((?:https?|ftp):\/\/[\S]+)/),ke=Y;ke<0&&(ke=0);var Te,Ce=0,We=0;try{for(var Le=T(we),et=Le.next();!et.done;et=Le.next()){var Bt=et.value;if(We=Ce+Bt.length,ke>=Ce&&ke<=We&&Bt.match(/((?:https?|ftp):\/\/[\S]+)/)){Te=Bt.replace(/[\s:.,'";}\]]+$/,"");break}Ce=We}}catch(Dt){ee={error:Dt}}finally{try{et&&!et.done&&(fe=Le.return)&&fe.call(Le)}finally{if(ee)throw ee.error}}return Te},G.prototype.openLink=function(){var D=this.selection.getCursor(),Y=this.findLinkAt(D.row,D.column);return Y&&window.open(Y,"_blank"),null!=Y},G.prototype.removeLines=function(){var D=this.$getSelectedRows();this.session.removeFullLines(D.first,D.last),this.clearSelection()},G.prototype.duplicateSelection=function(){var D=this.selection,Y=this.session,ee=D.getRange(),fe=D.isBackwards();if(ee.isEmpty()){var _e=ee.start.row;Y.duplicateLines(_e,_e)}else{var we=fe?ee.start:ee.end,ke=Y.insert(we,Y.getTextRange(ee),!1);ee.start=we,ee.end=ke,D.setSelectionRange(ee,fe)}},G.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},G.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},G.prototype.moveText=function(D,Y,ee){return this.session.moveText(D,Y,ee)},G.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},G.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},G.prototype.$moveLines=function(D,Y){var ee,fe,_e=this.selection;if(!_e.inMultiSelectMode||this.inVirtualSelectionMode){var we=_e.toOrientedRange();ee=this.$getSelectedRows(we),fe=this.session.$moveLines(ee.first,ee.last,Y?0:D),Y&&-1==D&&(fe=0),we.moveBy(fe,0),_e.fromOrientedRange(we)}else{var ke=_e.rangeList.ranges;_e.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var Ce=0,We=0,Te=ke.length,Le=0;Le<Te;Le++){var et=Le;ke[Le].moveBy(Ce,0);for(var Bt=(ee=this.$getSelectedRows(ke[Le])).first,Dt=ee.last;++Le<Te;){We&&ke[Le].moveBy(We,0);var Lt=this.$getSelectedRows(ke[Le]);if(Y&&Lt.first!=Dt)break;if(!Y&&Lt.first>Dt+1)break;Dt=Lt.last}for(Le--,Ce=this.session.$moveLines(Bt,Dt,Y?0:D),Y&&-1==D&&(et=Le+1);et<=Le;)ke[et].moveBy(Ce,0),et++;Y||(Ce=0),We+=Ce}_e.fromOrientedRange(_e.ranges[0]),_e.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},G.prototype.$getSelectedRows=function(D){return D=(D||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(D.start.row),last:this.session.getRowFoldEnd(D.end.row)}},G.prototype.onCompositionStart=function(D){this.renderer.showComposition(D)},G.prototype.onCompositionUpdate=function(D){this.renderer.setCompositionText(D)},G.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},G.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},G.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},G.prototype.isRowVisible=function(D){return D>=this.getFirstVisibleRow()&&D<=this.getLastVisibleRow()},G.prototype.isRowFullyVisible=function(D){return D>=this.renderer.getFirstFullyVisibleRow()&&D<=this.renderer.getLastFullyVisibleRow()},G.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},G.prototype.$moveByPage=function(D,Y){var ee=this.renderer,fe=this.renderer.layerConfig,_e=D*Math.floor(fe.height/fe.lineHeight);!0===Y?this.selection.$moveSelection(function(){this.moveCursorBy(_e,0)}):!1===Y&&(this.selection.moveCursorBy(_e,0),this.selection.clearSelection());var we=ee.scrollTop;ee.scrollBy(0,_e*fe.lineHeight),null!=Y&&ee.scrollCursorIntoView(null,.5),ee.animateScrolling(we)},G.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},G.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},G.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},G.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},G.prototype.scrollPageDown=function(){this.$moveByPage(1)},G.prototype.scrollPageUp=function(){this.$moveByPage(-1)},G.prototype.scrollToRow=function(D){this.renderer.scrollToRow(D)},G.prototype.scrollToLine=function(D,Y,ee,fe){this.renderer.scrollToLine(D,Y,ee,fe)},G.prototype.centerSelection=function(){var D=this.getSelectionRange(),Y={row:Math.floor(D.start.row+(D.end.row-D.start.row)/2),column:Math.floor(D.start.column+(D.end.column-D.start.column)/2)};this.renderer.alignCursor(Y,.5)},G.prototype.getCursorPosition=function(){return this.selection.getCursor()},G.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},G.prototype.getSelectionRange=function(){return this.selection.getRange()},G.prototype.selectAll=function(){this.selection.selectAll()},G.prototype.clearSelection=function(){this.selection.clearSelection()},G.prototype.moveCursorTo=function(D,Y){this.selection.moveCursorTo(D,Y)},G.prototype.moveCursorToPosition=function(D){this.selection.moveCursorToPosition(D)},G.prototype.jumpToMatching=function(D,Y){var ee=this.getCursorPosition(),fe=new W(this.session,ee.row,ee.column),_e=fe.getCurrentToken(),we=0;_e&&-1!==_e.type.indexOf("tag-name")&&(_e=fe.stepBackward());var ke=_e||fe.stepForward();if(ke){var Ce,et,We=!1,Te={},Le=ee.column-ke.start,Bt={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(ke.value.match(/[{}()\[\]]/g)){for(;Le<ke.value.length&&!We;Le++)if(Bt[ke.value[Le]])switch(et=Bt[ke.value[Le]]+"."+ke.type.replace("rparen","lparen"),isNaN(Te[et])&&(Te[et]=0),ke.value[Le]){case"(":case"[":case"{":Te[et]++;break;case")":case"]":case"}":Te[et]--,-1===Te[et]&&(Ce="bracket",We=!0)}}else-1!==ke.type.indexOf("tag-name")&&(isNaN(Te[ke.value])&&(Te[ke.value]=0),"<"===_e.value&&we>1?Te[ke.value]++:"</"===_e.value&&Te[ke.value]--,-1===Te[ke.value]&&(Ce="tag",We=!0));We||(_e=ke,we++,ke=fe.stepForward(),Le=0)}while(ke&&!We);if(Ce){var Dt,Lt;if("bracket"===Ce)(Dt=this.session.getBracketRange(ee))||(Lt=(Dt=new x(fe.getCurrentTokenRow(),fe.getCurrentTokenColumn()+Le-1,fe.getCurrentTokenRow(),fe.getCurrentTokenColumn()+Le-1)).start,(Y||Lt.row===ee.row&&Math.abs(Lt.column-ee.column)<2)&&(Dt=this.session.getBracketRange(Lt)));else if("tag"===Ce){if(!ke||-1===ke.type.indexOf("tag-name"))return;if(0===(Dt=new x(fe.getCurrentTokenRow(),fe.getCurrentTokenColumn()-2,fe.getCurrentTokenRow(),fe.getCurrentTokenColumn()-2)).compare(ee.row,ee.column)){var He=this.session.getMatchingTags(ee);He&&(He.openTag.contains(ee.row,ee.column)?Lt=(Dt=He.closeTag).start:(Dt=He.openTag,Lt=He.closeTag.start.row===ee.row&&He.closeTag.start.column===ee.column?Dt.end:Dt.start))}Lt=Lt||Dt.start}(Lt=Dt&&Dt.cursor||Lt)&&(D?Dt&&Y?this.selection.setRange(Dt):Dt&&Dt.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(Lt.row,Lt.column):this.selection.moveTo(Lt.row,Lt.column))}}},G.prototype.gotoLine=function(D,Y,ee){this.selection.clearSelection(),this.session.unfold({row:D-1,column:Y||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(D-1,Y||0),this.isRowFullyVisible(D-1)||this.scrollToLine(D-1,!0,ee)},G.prototype.navigateTo=function(D,Y){this.selection.moveTo(D,Y)},G.prototype.navigateUp=function(D){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var Y=this.selection.anchor.getPosition();return this.moveCursorToPosition(Y)}this.selection.clearSelection(),this.selection.moveCursorBy(-D||-1,0)},G.prototype.navigateDown=function(D){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var Y=this.selection.anchor.getPosition();return this.moveCursorToPosition(Y)}this.selection.clearSelection(),this.selection.moveCursorBy(D||1,0)},G.prototype.navigateLeft=function(D){if(this.selection.isEmpty())for(D=D||1;D--;)this.selection.moveCursorLeft();else{var Y=this.getSelectionRange().start;this.moveCursorToPosition(Y)}this.clearSelection()},G.prototype.navigateRight=function(D){if(this.selection.isEmpty())for(D=D||1;D--;)this.selection.moveCursorRight();else{var Y=this.getSelectionRange().end;this.moveCursorToPosition(Y)}this.clearSelection()},G.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},G.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},G.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},G.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},G.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},G.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},G.prototype.replace=function(D,Y){Y&&this.$search.set(Y);var ee=this.$search.find(this.session),fe=0;return ee&&(this.$tryReplace(ee,D)&&(fe=1),this.selection.setSelectionRange(ee),this.renderer.scrollSelectionIntoView(ee.start,ee.end)),fe},G.prototype.replaceAll=function(D,Y){Y&&this.$search.set(Y);var ee=this.$search.findAll(this.session),fe=0;if(!ee.length)return fe;var _e=this.getSelectionRange();this.selection.moveTo(0,0);for(var we=ee.length-1;we>=0;--we)this.$tryReplace(ee[we],D)&&fe++;return this.selection.setSelectionRange(_e),fe},G.prototype.$tryReplace=function(D,Y){var ee=this.session.getTextRange(D);return null!==(Y=this.$search.replace(ee,Y))?(D.end=this.session.replace(D,Y),D):null},G.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},G.prototype.find=function(D,Y,ee){Y||(Y={}),"string"==typeof D||D instanceof RegExp?Y.needle=D:"object"==typeof D&&re.mixin(Y,D);var fe=this.selection.getRange();null==Y.needle&&((D=this.session.getTextRange(fe)||this.$search.$options.needle)||(fe=this.session.getWordRange(fe.start.row,fe.start.column),D=this.session.getTextRange(fe)),this.$search.set({needle:D})),this.$search.set(Y),Y.start||this.$search.set({start:fe});var _e=this.$search.find(this.session);return Y.preventScroll?_e:_e?(this.revealRange(_e,ee),_e):(Y.backwards?fe.start=fe.end:fe.end=fe.start,void this.selection.setRange(fe))},G.prototype.findNext=function(D,Y){this.find({skipCurrent:!0,backwards:!1},D,Y)},G.prototype.findPrevious=function(D,Y){this.find(D,{skipCurrent:!0,backwards:!0},Y)},G.prototype.revealRange=function(D,Y){this.session.unfold(D),this.selection.setSelectionRange(D);var ee=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(D.start,D.end,.5),!1!==Y&&this.renderer.animateScrolling(ee)},G.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},G.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},G.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(D){D.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},G.prototype.setAutoScrollEditorIntoView=function(D){if(D){var Y,ee=this,fe=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var _e=this.$scrollAnchor;_e.style.cssText="position:absolute",this.container.insertBefore(_e,this.container.firstChild);var we=this.on("changeSelection",function(){fe=!0}),ke=this.renderer.on("beforeRender",function(){fe&&(Y=ee.renderer.container.getBoundingClientRect())}),Ce=this.renderer.on("afterRender",function(){if(fe&&Y&&(ee.isFocused()||ee.searchBox&&ee.searchBox.isFocused())){var We=ee.renderer,Te=We.$cursorLayer.$pixelPos,Le=We.layerConfig,et=Te.top-Le.offset;null!=(fe=Te.top>=0&&et+Y.top<0||!(Te.top<Le.height&&Te.top+Y.top+Le.lineHeight>window.innerHeight)&&null)&&(_e.style.top=et+"px",_e.style.left=Te.left+"px",_e.style.height=Le.lineHeight+"px",_e.scrollIntoView(fe)),fe=Y=null}});this.setAutoScrollEditorIntoView=function(We){We||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",we),this.renderer.off("afterRender",Ce),this.renderer.off("beforeRender",ke))}}},G.prototype.$resetCursorStyle=function(){var D=this.$cursorStyle||"ace",Y=this.renderer.$cursorLayer;!Y||(Y.setSmoothBlinking(/smooth/.test(D)),Y.isBlinking=!this.$readOnly&&"wide"!=D,B.setCssClass(Y.element,"ace_slim-cursors",/slim/.test(D)))},G.prototype.prompt=function(D,Y,ee){var fe=this;L.loadModule("ace/ext/prompt",function(_e){_e.prompt(fe,D,Y,ee)})},G}();N.$uid=0,N.prototype.curOp=null,N.prototype.prevOp={},N.prototype.$mergeableCommands=["backspace","del","insertstring"],N.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],re.implement(N.prototype,A),L.defineOptions(N.prototype,"editor",{selectionStyle:{set:function(G){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:G})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(G){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(G){this.textInput.setReadOnly(G),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(G){this.textInput.setCopyWithEmptySelection(G)},initialValue:!1},cursorStyle:{set:function(G){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(G){this.setAutoScrollEditorIntoView(G)}},keyboardHandler:{set:function(G){this.setKeyboardHandler(G)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(G){this.session.setValue(G)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(G){this.setSession(G)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(G){this.renderer.$gutterLayer.setShowLineNumbers(G),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),G&&this.$relativeLineNumbers?te.attach(this):te.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(G){this.$showLineNumbers&&G?te.attach(this):te.detach(this)}},placeholder:{set:function(G){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var D=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(D&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),B.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(D||this.renderer.placeholderNode)!D&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),B.addCssClass(this.container,"ace_hasPlaceholder");var Y=B.createElement("div");Y.className="ace_placeholder",Y.textContent=this.$placeholder||"",this.renderer.placeholderNode=Y,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(G){var ee,D={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(fe){fe.blur(),fe.renderer.scroller.focus()},readOnly:!0},Y=function(fe){if(fe.target==this.renderer.scroller&&fe.keyCode===V.enter){fe.preventDefault();var _e=this.getCursorPosition().row;this.isRowVisible(_e)||this.scrollToLine(_e,!0,!0),this.focus()}};G?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",$("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",$("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",Y.bind(this)),this.commands.addCommand(D),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",$("editor")),this.renderer.$gutter.setAttribute("aria-label",$("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),ee||(ee=new P(this)),ee.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",Y.bind(this)),this.commands.removeCommand(D),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),ee&&ee.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var te={getText:function(G,D){return(Math.abs(G.selection.lead.row-D)||D+1+(D<9?"\xb7":""))+""},getWidth:function(G,D,Y){return Math.max(D.toString().length,(Y.lastRow+1).toString().length,2)*Y.characterWidth},update:function(G,D){D.renderer.$loop.schedule(D.renderer.CHANGE_GUTTER)},attach:function(G){G.renderer.$gutterLayer.$renderer=this,G.on("changeSelection",this.update),this.update(null,G)},detach:function(G){G.renderer.$gutterLayer.$renderer==this&&(G.renderer.$gutterLayer.$renderer=null),G.off("changeSelection",this.update),this.update(null,G)}};ie.Editor=N}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(Q,ie,xe){"use strict";var T=function(){function P(){this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return P.prototype.addSession=function($){this.$session=$},P.prototype.add=function($,X,V){if(!this.$fromUndo&&$!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),!1===X||!this.lastDeltas){this.lastDeltas=[];var N=this.$undoStack.length;N>this.$undoDepth-1&&this.$undoStack.splice(0,N-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),$.id=this.$rev=++this.$maxRev}("remove"==$.action||"insert"==$.action)&&(this.$lastDelta=$),this.lastDeltas.push($)}},P.prototype.addSelection=function($,X){this.selections.push({value:$,rev:X||this.$rev})},P.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},P.prototype.markIgnored=function($,X){null==X&&(X=this.$rev+1);for(var V=this.$undoStack,N=V.length;N--;){var te=V[N][0];if(te.id<=$)break;te.id<X&&(te.ignore=!0)}this.lastDeltas=null},P.prototype.getSelection=function($,X){for(var V=this.selections,N=V.length;N--;){var te=V[N];if(te.rev<$)return X&&(te=V[N+1]),te}},P.prototype.getRevision=function(){return this.$rev},P.prototype.getDeltas=function($,X){null==X&&(X=this.$rev+1);for(var V=this.$undoStack,N=null,te=0,G=V.length;G--;){var D=V[G][0];if(D.id<X&&!N&&(N=G+1),D.id<=$){te=G+1;break}}return V.slice(te,N)},P.prototype.getChangedRanges=function($,X){null==X&&(X=this.$rev+1)},P.prototype.getChangedLines=function($,X){null==X&&(X=this.$rev+1)},P.prototype.undo=function($,X){this.lastDeltas=null;var V=this.$undoStack;if(function re(P,$){for(var X=$;X--;){var V=P[X];if(V&&!V[0].ignore){for(;X<$-1;){var N=x(P[X],P[X+1]);P[X]=N[0],P[X+1]=N[1],X++}return!0}}}(V,V.length)){$||($=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var N=V.pop(),te=null;return N&&(te=$.undoChanges(N,X),this.$redoStack.push(N),this.$syncRev()),this.$fromUndo=!1,te}},P.prototype.redo=function($,X){if(this.lastDeltas=null,$||($=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var V=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);(function H(P,$){for(var X=0;X<$.length;X++)for(var V=$[X],N=0;N<V.length;N++)W(P,V[N])})(this.$redoStack,V),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(G){G[0].id=++this.$maxRev},this)}var N=this.$redoStack.pop(),te=null;return N&&(te=$.redoChanges(N,X),this.$undoStack.push(N),this.$syncRev()),this.$fromUndo=!1,te},P.prototype.$syncRev=function(){var $=this.$undoStack,X=$[$.length-1],V=X&&X[0].id||0;this.$redoStackBaseRev=V,this.$rev=V},P.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},P.prototype.canUndo=function(){return this.$undoStack.length>0},P.prototype.canRedo=function(){return this.$redoStack.length>0},P.prototype.bookmark=function($){null==$&&($=this.$rev),this.mark=$},P.prototype.isAtBookmark=function(){return this.$rev===this.mark},P.prototype.toJSON=function(){},P.prototype.fromJSON=function(){},P.prototype.$prettyPrint=function($){return $?p($):p(this.$undoStack)+"\n---\n"+p(this.$redoStack)},P}();T.prototype.hasUndo=T.prototype.canUndo,T.prototype.hasRedo=T.prototype.canRedo,T.prototype.isClean=T.prototype.isAtBookmark,T.prototype.markClean=T.prototype.bookmark;var B=Q("./range").Range,E=B.comparePoints;function m(P){return{row:P.row,column:P.column}}function p(P){if(P=P||this,Array.isArray(P))return P.map(p).join("\n");var $="";return P.action?($="insert"==P.action?"+":"-",$+="["+P.lines+"]"):P.value&&($=Array.isArray(P.value)?P.value.map(v).join("\n"):v(P.value)),P.start&&($+=v(P)),(P.id||P.rev)&&($+="\t("+(P.id||P.rev)+")"),$}function v(P){return P.start.row+":"+P.start.column+"=>"+P.end.row+":"+P.end.column}function w(P,$){var X="insert"==P.action,V="insert"==$.action;if(X&&V)if(E($.start,P.end)>=0)R($,P,-1);else{if(!(E($.start,P.start)<=0))return null;R(P,$,1)}else if(X&&!V)if(E($.start,P.end)>=0)R($,P,-1);else{if(!(E($.end,P.start)<=0))return null;R(P,$,-1)}else if(!X&&V)if(E($.start,P.start)>=0)R($,P,1);else{if(!(E($.start,P.start)<=0))return null;R(P,$,1)}else if(!X&&!V)if(E($.start,P.start)>=0)R($,P,1);else{if(!(E($.end,P.start)<=0))return null;R(P,$,-1)}return[$,P]}function x(P,$){for(var X=P.length;X--;)for(var V=0;V<$.length;V++)if(!w(P[X],$[V])){for(;X<P.length;){for(;V--;)w($[V],P[X]);V=$.length,X++}return[P,$]}return P.selectionBefore=$.selectionBefore=P.selectionAfter=$.selectionAfter=null,[$,P]}function A(P,$){var X="insert"==P.action,V="insert"==$.action;if(X&&V)E(P.start,$.start)<0?R($,P,1):R(P,$,1);else if(X&&!V)E(P.start,$.end)>=0?R(P,$,-1):(E(P.start,$.start)<=0||R(P,B.fromPoints($.start,P.start),-1),R($,P,1));else if(!X&&V)E($.start,P.end)>=0?R($,P,-1):(E($.start,P.start)<=0||R($,B.fromPoints(P.start,$.start),-1),R(P,$,1));else if(!X&&!V)if(E($.start,P.end)>=0)R($,P,-1);else{var N,te;if(!(E($.end,P.start)<=0))return E(P.start,$.start)<0&&(N=P,P=L(P,$.start)),E(P.end,$.end)>0&&(te=L(P,$.end)),U($.end,P.start,P.end,-1),te&&!N&&(P.lines=te.lines,P.start=te.start,P.end=te.end,te=P),[$,N,te].filter(Boolean);R(P,$,-1)}return[$,P]}function R(P,$,X){U(P.start,$.start,$.end,X),U(P.end,$.start,$.end,X)}function U(P,$,X,V){P.row==(1==V?$:X).row&&(P.column+=V*(X.column-$.column)),P.row+=V*(X.row-$.row)}function L(P,$){var X=P.lines,V=P.end;P.end=m($);var N=P.end.row-P.start.row,te=X.splice(N,X.length),G=N?$.column:$.column-P.start.column;return X.push(te[0].substring(0,G)),te[0]=te[0].substr(G),{start:m($),end:V,lines:te,action:P.action}}function W(P,$){$=function _(P){return{start:m(P.start),end:m(P.end),action:P.action,lines:P.lines.slice()}}($);for(var X=P.length;X--;){for(var V=P[X],N=0;N<V.length;N++){var G=A(V[N],$);$=G[0],2!=G.length&&(G[2]?(V.splice(N+1,1,G[1],G[2]),N++):G[1]||(V.splice(N,1),N--))}V.length||P.splice(X,1)}return P}ie.UndoManager=T}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(Q,ie,xe){"use strict";var T=Q("../lib/dom"),re=function(){function B(E,M){this.element=E,this.canvasHeight=M||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return B.prototype.moveContainer=function(E){T.translate(this.element,0,-E.firstRowScreen*E.lineHeight%this.canvasHeight-E.offset*this.$offsetCoefficient)},B.prototype.pageChanged=function(E,M){return Math.floor(E.firstRowScreen*E.lineHeight/this.canvasHeight)!==Math.floor(M.firstRowScreen*M.lineHeight/this.canvasHeight)},B.prototype.computeLineTop=function(E,M,g){var _=Math.floor(M.firstRowScreen*M.lineHeight/this.canvasHeight);return g.documentToScreenRow(E,0)*M.lineHeight-_*this.canvasHeight},B.prototype.computeLineHeight=function(E,M,g){return M.lineHeight*g.getRowLineCount(E)},B.prototype.getLength=function(){return this.cells.length},B.prototype.get=function(E){return this.cells[E]},B.prototype.shift=function(){this.$cacheCell(this.cells.shift())},B.prototype.pop=function(){this.$cacheCell(this.cells.pop())},B.prototype.push=function(E){if(Array.isArray(E)){this.cells.push.apply(this.cells,E);for(var M=T.createFragment(this.element),g=0;g<E.length;g++)M.appendChild(E[g].element);this.element.appendChild(M)}else this.cells.push(E),this.element.appendChild(E.element)},B.prototype.unshift=function(E){if(Array.isArray(E)){this.cells.unshift.apply(this.cells,E);for(var M=T.createFragment(this.element),g=0;g<E.length;g++)M.appendChild(E[g].element);this.element.firstChild?this.element.insertBefore(M,this.element.firstChild):this.element.appendChild(M)}else this.cells.unshift(E),this.element.insertAdjacentElement("afterbegin",E.element)},B.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},B.prototype.$cacheCell=function(E){!E||(E.element.remove(),this.cellCache.push(E))},B.prototype.createCell=function(E,M,g,m){var _=this.cellCache.pop();if(!_){var p=T.createElement("div");m&&m(p),this.element.appendChild(p),_={element:p,text:"",row:E}}return _.row=E,_},B}();ie.Lines=re}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(Q,ie,xe){"use strict";var T=Q("../lib/dom"),re=Q("../lib/oop"),B=Q("../lib/lang"),E=Q("../lib/event_emitter").EventEmitter,M=Q("./lines").Lines,g=Q("../config").nls,m=function(){function p(v){this.element=T.createElement("div"),this.element.className="ace_layer ace_gutter-layer",v.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new M(this.element),this.$lines.$offsetCoefficient=1}return p.prototype.setSession=function(v){this.session&&this.session.off("change",this.$updateAnnotations),this.session=v,v&&v.on("change",this.$updateAnnotations)},p.prototype.addGutterDecoration=function(v,w){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(v,w)},p.prototype.removeGutterDecoration=function(v,w){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(v,w)},p.prototype.setAnnotations=function(v){this.$annotations=[];for(var w=0;w<v.length;w++){var x=v[w],A=x.row,R=this.$annotations[A];R||(R=this.$annotations[A]={text:[],type:[]});var U=x.text,L=x.type;U=U?B.escapeHTML(U):x.html||"",-1===R.text.indexOf(U)&&(R.text.push(U),R.type.push(L));var W=x.className;W?R.className=W:"error"==L?R.className=" ace_error":"warning"==L&&" ace_error"!=R.className?R.className=" ace_warning":"info"==L&&!R.className&&(R.className=" ace_info")}},p.prototype.$updateAnnotations=function(v){if(this.$annotations.length){var w=v.start.row,x=v.end.row-w;if(0!==x)if("remove"==v.action)this.$annotations.splice(w,x+1,null);else{var A=new Array(x+1);A.unshift(w,1),this.$annotations.splice.apply(this.$annotations,A)}}},p.prototype.update=function(v){this.config=v;var w=this.session,x=v.firstRow,A=Math.min(v.lastRow+v.gutterOffset,w.getLength()-1);this.oldLastRow=A,this.config=v,this.$lines.moveContainer(v),this.$updateCursorRow();for(var R=w.getNextFoldLine(x),U=R?R.start.row:1/0,L=null,W=-1,H=x;;){if(H>U&&(U=(R=w.getNextFoldLine(H=R.end.row+1,R))?R.start.row:1/0),H>A){for(;this.$lines.getLength()>W+1;)this.$lines.pop();break}(L=this.$lines.get(++W))?L.row=H:(L=this.$lines.createCell(H,v,this.session,_),this.$lines.push(L)),this.$renderCell(L,v,R,H),H++}this._signal("afterRender"),this.$updateGutterWidth(v)},p.prototype.$updateGutterWidth=function(v){var w=this.session,x=w.gutterRenderer||this.$renderer,A=w.$firstLineNumber,R=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||w.$useWrapMode)&&(R=w.getLength()+A-1);var U=x?x.getWidth(w,R,v):R.toString().length*v.characterWidth,L=this.$padding||this.$computePadding();(U+=L.left+L.right)!==this.gutterWidth&&!isNaN(U)&&(this.gutterWidth=U,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",U))},p.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var v=this.session.selection.getCursor();this.$cursorRow!==v.row&&(this.$cursorRow=v.row)}},p.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var v=this.session.selection.cursor.row;if(this.$cursorRow=v,!this.$cursorCell||this.$cursorCell.row!=v){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var w=this.$lines.cells;this.$cursorCell=null;for(var x=0;x<w.length;x++){var A=w[x];if(A.row>=this.$cursorRow){if(A.row>this.$cursorRow){var R=this.session.getFoldLine(this.$cursorRow);if(!(x>0&&R&&R.start.row==w[x-1].row))break;A=w[x-1]}A.element.className="ace_gutter-active-line "+A.element.className,this.$cursorCell=A;break}}}}},p.prototype.scrollLines=function(v){var w=this.config;if(this.config=v,this.$updateCursorRow(),this.$lines.pageChanged(w,v))return this.update(v);this.$lines.moveContainer(v);var x=Math.min(v.lastRow+v.gutterOffset,this.session.getLength()-1),A=this.oldLastRow;if(this.oldLastRow=x,!w||A<v.firstRow)return this.update(v);if(x<w.firstRow)return this.update(v);if(w.firstRow<v.firstRow)for(var R=this.session.getFoldedRowCount(w.firstRow,v.firstRow-1);R>0;R--)this.$lines.shift();if(A>x)for(R=this.session.getFoldedRowCount(x+1,A);R>0;R--)this.$lines.pop();v.firstRow<w.firstRow&&this.$lines.unshift(this.$renderLines(v,v.firstRow,w.firstRow-1)),x>A&&this.$lines.push(this.$renderLines(v,A+1,x)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(v)},p.prototype.$renderLines=function(v,w,x){for(var A=[],R=w,U=this.session.getNextFoldLine(R),L=U?U.start.row:1/0;R>L&&(L=(U=this.session.getNextFoldLine(R=U.end.row+1,U))?U.start.row:1/0),!(R>x);){var W=this.$lines.createCell(R,v,this.session,_);this.$renderCell(W,v,U,R),A.push(W),R++}return A},p.prototype.$renderCell=function(v,w,x,A){var R=v.element,U=this.session,L=R.childNodes[0],W=R.childNodes[1],H=R.childNodes[2],P=H.firstChild,$=U.$firstLineNumber,X=U.$breakpoints,V=U.$decorations,N=U.gutterRenderer||this.$renderer,te=this.$showFoldWidgets&&U.foldWidgets,G=x?x.start.row:Number.MAX_VALUE,D=w.lineHeight+"px",Y=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",ee=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",fe=(N?N.getText(U,A):A+$).toString();if(this.$highlightGutterLine&&(A==this.$cursorRow||x&&A<this.$cursorRow&&A>=G&&this.$cursorRow<=x.end.row)&&(Y+="ace_gutter-active-line ",this.$cursorCell!=v&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=v)),X[A]&&(Y+=X[A]),V[A]&&(Y+=V[A]),this.$annotations[A]&&A!==G&&(Y+=this.$annotations[A].className),te){var _e=te[A];null==_e&&(_e=te[A]=U.getFoldWidget(A))}if(_e){var we="ace_fold-widget ace_"+_e,ke="start"==_e&&A==G&&A<x.end.row;if(ke){we+=" ace_closed";for(var Ce="",We=!1,Te=A+1;Te<=x.end.row;Te++)if(this.$annotations[Te]){if(" ace_error"===this.$annotations[Te].className){We=!0,Ce=" ace_error_fold";break}if(" ace_warning"===this.$annotations[Te].className){We=!0,Ce=" ace_warning_fold";continue}}Y+=Ce}else we+=" ace_open";W.className!=we&&(W.className=we),T.setStyle(W.style,"height",D),T.setStyle(W.style,"display","inline-block"),W.setAttribute("role","button"),W.setAttribute("tabindex","-1");var Le=U.getFoldWidgetRange(A);W.setAttribute("aria-label",Le?g("Toggle code folding, rows $0 through $1",[Le.start.row+1,Le.end.row+1]):x?g("Toggle code folding, rows $0 through $1",[x.start.row+1,x.end.row+1]):g("Toggle code folding, row $0",[A+1])),ke?(W.setAttribute("aria-expanded","false"),W.setAttribute("title",g("Unfold code"))):(W.setAttribute("aria-expanded","true"),W.setAttribute("title",g("Fold code")))}else W&&(T.setStyle(W.style,"display","none"),W.setAttribute("tabindex","0"),W.removeAttribute("role"),W.removeAttribute("aria-label"));return We&&this.$showFoldedAnnotations?(H.className="ace_gutter_annotation",P.className=ee,P.className+=Ce,T.setStyle(P.style,"height",D),T.setStyle(H.style,"display","block"),T.setStyle(H.style,"height",D),H.setAttribute("aria-label",g("Read annotations row $0",[fe])),H.setAttribute("tabindex","-1"),H.setAttribute("role","button")):this.$annotations[A]?(H.className="ace_gutter_annotation",P.className=ee,this.$useSvgGutterIcons?P.className+=this.$annotations[A].className:R.classList.add(this.$annotations[A].className.replace(" ","")),T.setStyle(P.style,"height",D),T.setStyle(H.style,"display","block"),T.setStyle(H.style,"height",D),H.setAttribute("aria-label",g("Read annotations row $0",[fe])),H.setAttribute("tabindex","-1"),H.setAttribute("role","button")):(T.setStyle(H.style,"display","none"),H.removeAttribute("aria-label"),H.removeAttribute("role"),H.setAttribute("tabindex","0")),fe!==L.data&&(L.data=fe),R.className!=Y&&(R.className=Y),T.setStyle(v.element.style,"height",this.$lines.computeLineHeight(A,w,U)+"px"),T.setStyle(v.element.style,"top",this.$lines.computeLineTop(A,w,U)+"px"),v.text=fe,v.element.setAttribute("aria-hidden","none"===H.style.display&&"none"===W.style.display),v},p.prototype.setHighlightGutterLine=function(v){this.$highlightGutterLine=v},p.prototype.setShowLineNumbers=function(v){this.$renderer=!v&&{getWidth:function(){return 0},getText:function(){return""}}},p.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},p.prototype.setShowFoldWidgets=function(v){v?T.addCssClass(this.element,"ace_folding-enabled"):T.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=v,this.$padding=null},p.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},p.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var v=T.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(v.borderLeftWidth)||0)+(parseInt(v.paddingLeft)||0)+1,this.$padding.right=(parseInt(v.borderRightWidth)||0)+(parseInt(v.paddingRight)||0),this.$padding},p.prototype.getRegion=function(v){var w=this.$padding||this.$computePadding(),x=this.element.getBoundingClientRect();return v.x<w.left+x.left?"markers":this.$showFoldWidgets&&v.x>x.right-w.right?"foldWidgets":void 0},p}();function _(p){var v=document.createTextNode("");p.appendChild(v);var w=T.createElement("span");p.appendChild(w);var x=T.createElement("span");p.appendChild(x);var A=T.createElement("span");return x.appendChild(A),p}m.prototype.$fixedWidth=!1,m.prototype.$highlightGutterLine=!0,m.prototype.$renderer="",m.prototype.$showLineNumbers=!0,m.prototype.$showFoldWidgets=!0,re.implement(m.prototype,E),ie.Gutter=m}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(Q,ie,xe){"use strict";var T=Q("../range").Range,re=Q("../lib/dom"),B=function(){function M(g){this.element=re.createElement("div"),this.element.className="ace_layer ace_marker-layer",g.appendChild(this.element)}return M.prototype.setPadding=function(g){this.$padding=g},M.prototype.setSession=function(g){this.session=g},M.prototype.setMarkers=function(g){this.markers=g},M.prototype.elt=function(g,m){var _=-1!=this.i&&this.element.childNodes[this.i];_?this.i++:(_=document.createElement("div"),this.element.appendChild(_),this.i=-1),_.style.cssText=m,_.className=g},M.prototype.update=function(g){if(g){var m;for(var _ in this.config=g,this.i=0,this.markers){var p=this.markers[_];if(p.range){var v=p.range.clipRows(g.firstRow,g.lastRow);if(!v.isEmpty())if(v=v.toScreenRange(this.session),p.renderer){var w=this.$getTop(v.start.row,g);p.renderer(m,v,this.$padding+v.start.column*g.characterWidth,w,g)}else"fullLine"==p.type?this.drawFullLineMarker(m,v,p.clazz,g):"screenLine"==p.type?this.drawScreenLineMarker(m,v,p.clazz,g):v.isMultiLine()?"text"==p.type?this.drawTextMarker(m,v,p.clazz,g):this.drawMultiLineMarker(m,v,p.clazz,g):this.drawSingleLineMarker(m,v,p.clazz+" ace_start ace_br15",g)}else p.update(m,this,this.session,g)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},M.prototype.$getTop=function(g,m){return(g-m.firstRowScreen)*m.lineHeight},M.prototype.drawTextMarker=function(g,m,_,p,v){for(var w=this.session,x=m.start.row,A=m.end.row,R=x,U=0,L=0,W=w.getScreenLastRowColumn(R),H=new T(R,m.start.column,R,L);R<=A;R++)H.start.row=H.end.row=R,H.start.column=R==x?m.start.column:w.getRowWrapIndent(R),H.end.column=W,U=L,L=W,W=R+1<A?w.getScreenLastRowColumn(R+1):R==A?0:m.end.column,this.drawSingleLineMarker(g,H,_+(R==x?" ace_start":"")+" ace_br"+E(R==x||R==x+1&&m.start.column,U<L,L>W,R==A),p,R==A?0:1,v)},M.prototype.drawMultiLineMarker=function(g,m,_,p,v){var U,w=this.$padding,x=p.lineHeight,A=this.$getTop(m.start.row,p),R=w+m.start.column*p.characterWidth;if(v=v||"",this.session.$bidiHandler.isBidiRow(m.start.row)?((U=m.clone()).end.row=U.start.row,U.end.column=this.session.getLine(U.start.row).length,this.drawBidiSingleLineMarker(g,U,_+" ace_br1 ace_start",p,null,v)):this.elt(_+" ace_br1 ace_start","height:"+x+"px;right:0;top:"+A+"px;left:"+R+"px;"+(v||"")),this.session.$bidiHandler.isBidiRow(m.end.row)?((U=m.clone()).start.row=U.end.row,U.start.column=0,this.drawBidiSingleLineMarker(g,U,_+" ace_br12",p,null,v)):(A=this.$getTop(m.end.row,p),this.elt(_+" ace_br12","height:"+x+"px;width:"+m.end.column*p.characterWidth+"px;top:"+A+"px;left:"+w+"px;"+(v||""))),!((x=(m.end.row-m.start.row-1)*p.lineHeight)<=0)){A=this.$getTop(m.start.row+1,p);var W=(m.start.column?1:0)|(m.end.column?0:8);this.elt(_+(W?" ace_br"+W:""),"height:"+x+"px;right:0;top:"+A+"px;left:"+w+"px;"+(v||""))}},M.prototype.drawSingleLineMarker=function(g,m,_,p,v,w){if(this.session.$bidiHandler.isBidiRow(m.start.row))return this.drawBidiSingleLineMarker(g,m,_,p,v,w);var x=p.lineHeight,A=(m.end.column+(v||0)-m.start.column)*p.characterWidth,R=this.$getTop(m.start.row,p);this.elt(_,"height:"+x+"px;width:"+A+"px;top:"+R+"px;left:"+(this.$padding+m.start.column*p.characterWidth)+"px;"+(w||""))},M.prototype.drawBidiSingleLineMarker=function(g,m,_,p,v,w){var x=p.lineHeight,A=this.$getTop(m.start.row,p),R=this.$padding;this.session.$bidiHandler.getSelections(m.start.column,m.end.column).forEach(function(L){this.elt(_,"height:"+x+"px;width:"+(L.width+(v||0))+"px;top:"+A+"px;left:"+(R+L.left)+"px;"+(w||""))},this)},M.prototype.drawFullLineMarker=function(g,m,_,p,v){var w=this.$getTop(m.start.row,p),x=p.lineHeight;m.start.row!=m.end.row&&(x+=this.$getTop(m.end.row,p)-w),this.elt(_,"height:"+x+"px;top:"+w+"px;left:0;right:0;"+(v||""))},M.prototype.drawScreenLineMarker=function(g,m,_,p,v){var w=this.$getTop(m.start.row,p);this.elt(_,"height:"+p.lineHeight+"px;top:"+w+"px;left:0;right:0;"+(v||""))},M}();function E(M,g,m,_){return(M?1:0)|(g?2:0)|(m?4:0)|(_?8:0)}B.prototype.$padding=0,ie.Marker=B}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config"],function(Q,ie,xe){"use strict";var T=Q("../lib/oop"),re=Q("../lib/dom"),B=Q("../lib/lang"),E=Q("./lines").Lines,M=Q("../lib/event_emitter").EventEmitter,g=Q("../config").nls,m=function(){function _(p){this.dom=re,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",p.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new E(this.element)}return _.prototype.$updateEolChar=function(){var p=this.session.doc,w="\n"==p.getNewLineCharacter()&&"windows"!=p.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=w)return this.EOL_CHAR=w,!0},_.prototype.setPadding=function(p){this.$padding=p,this.element.style.margin="0 "+p+"px"},_.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},_.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},_.prototype.$setFontMetrics=function(p){this.$fontMetrics=p,this.$fontMetrics.on("changeCharacterSize",function(v){this._signal("changeCharacterSize",v)}.bind(this)),this.$pollSizeChanges()},_.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},_.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},_.prototype.setSession=function(p){this.session=p,p&&this.$computeTabString()},_.prototype.setShowInvisibles=function(p){return this.showInvisibles!=p&&(this.showInvisibles=p,"string"==typeof p?(this.showSpaces=/tab/i.test(p),this.showTabs=/space/i.test(p),this.showEOL=/eol/i.test(p)):this.showSpaces=this.showTabs=this.showEOL=p,this.$computeTabString(),!0)},_.prototype.setDisplayIndentGuides=function(p){return this.displayIndentGuides!=p&&(this.displayIndentGuides=p,this.$computeTabString(),!0)},_.prototype.setHighlightIndentGuides=function(p){return this.$highlightIndentGuides!==p&&(this.$highlightIndentGuides=p,p)},_.prototype.$computeTabString=function(){var p=this.session.getTabSize();this.tabSize=p;for(var v=this.$tabStrings=[0],w=1;w<p+1;w++)this.showTabs?((x=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",x.textContent=B.stringRepeat(this.TAB_CHAR,w),v.push(x)):v.push(this.dom.createTextNode(B.stringRepeat(" ",w),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var x,A="ace_indent-guide",R=this.showSpaces?" ace_invisible ace_invisible_space":"",U=B.stringRepeat(this.showSpaces?this.SPACE_CHAR:" ",this.tabSize),L=this.showTabs?" ace_invisible ace_invisible_tab":"",W=this.showTabs?B.stringRepeat(this.TAB_CHAR,this.tabSize):U;(x=this.dom.createElement("span")).className=A+R,x.textContent=U,this.$tabStrings[" "]=x,(x=this.dom.createElement("span")).className=A+L,x.textContent=W,this.$tabStrings["\t"]=x}},_.prototype.updateLines=function(p,v,w){if(this.config.lastRow!=p.lastRow||this.config.firstRow!=p.firstRow)return this.update(p);this.config=p;for(var x=Math.max(v,p.firstRow),A=Math.min(w,p.lastRow),R=this.element.childNodes,U=0,W=p.firstRow;W<x;W++){if(H=this.session.getFoldLine(W)){if(H.containsRow(x)){x=H.start.row;break}W=H.end.row}U++}for(var H,L=!1,P=(H=this.session.getNextFoldLine(W=x))?H.start.row:1/0;W>P&&(P=(H=this.session.getNextFoldLine(W=H.end.row+1,H))?H.start.row:1/0),!(W>A);){var $=R[U++];if($){this.dom.removeChildren($),this.$renderLine($,W,W==P&&H),L&&($.style.top=this.$lines.computeLineTop(W,p,this.session)+"px");var X=p.lineHeight*this.session.getRowLength(W)+"px";$.style.height!=X&&(L=!0,$.style.height=X)}W++}if(L)for(;U<this.$lines.cells.length;){var V=this.$lines.cells[U++];V.element.style.top=this.$lines.computeLineTop(V.row,p,this.session)+"px"}},_.prototype.scrollLines=function(p){var v=this.config;if(this.config=p,this.$lines.pageChanged(v,p))return this.update(p);this.$lines.moveContainer(p);var w=p.lastRow;if(!v||(v?v.lastRow:-1)<p.firstRow)return this.update(p);if(w<v.firstRow)return this.update(p);if(!v||v.lastRow<p.firstRow)return this.update(p);if(p.lastRow<v.firstRow)return this.update(p);if(v.firstRow<p.firstRow)for(var A=this.session.getFoldedRowCount(v.firstRow,p.firstRow-1);A>0;A--)this.$lines.shift();if(v.lastRow>p.lastRow)for(A=this.session.getFoldedRowCount(p.lastRow+1,v.lastRow);A>0;A--)this.$lines.pop();p.firstRow<v.firstRow&&this.$lines.unshift(this.$renderLinesFragment(p,p.firstRow,v.firstRow-1)),p.lastRow>v.lastRow&&this.$lines.push(this.$renderLinesFragment(p,v.lastRow+1,p.lastRow)),this.$highlightIndentGuide()},_.prototype.$renderLinesFragment=function(p,v,w){for(var x=[],A=v,R=this.session.getNextFoldLine(A),U=R?R.start.row:1/0;A>U&&(U=(R=this.session.getNextFoldLine(A=R.end.row+1,R))?R.start.row:1/0),!(A>w);){var L=this.$lines.createCell(A,p,this.session),W=L.element;this.dom.removeChildren(W),re.setStyle(W.style,"height",this.$lines.computeLineHeight(A,p,this.session)+"px"),re.setStyle(W.style,"top",this.$lines.computeLineTop(A,p,this.session)+"px"),this.$renderLine(W,A,A==U&&R),W.className=this.$useLineGroups()?"ace_line_group":"ace_line",x.push(L),A++}return x},_.prototype.update=function(p){this.$lines.moveContainer(p),this.config=p;for(var v=p.firstRow,w=p.lastRow,x=this.$lines;x.getLength();)x.pop();x.push(this.$renderLinesFragment(p,v,w))},_.prototype.$renderToken=function(p,v,w,x){for(var L,A=this,R=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,U=this.dom.createFragment(this.element),W=0;L=R.exec(x);){var H=L[1],P=L[2],$=L[3],X=L[4],V=L[5];if(A.showSpaces||!P){var N=W!=L.index?x.slice(W,L.index):"";if(W=L.index+L[0].length,N&&U.appendChild(this.dom.createTextNode(N,this.element)),H){var te=A.session.getScreenTabSize(v+L.index);U.appendChild(A.$tabStrings[te].cloneNode(!0)),v+=te-1}else P?A.showSpaces?((G=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",G.textContent=B.stringRepeat(A.SPACE_CHAR,P.length),U.appendChild(G)):U.appendChild(this.com.createTextNode(P,this.element)):$?((G=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",G.textContent=B.stringRepeat(A.SPACE_CHAR,$.length),U.appendChild(G)):X?(v+=1,(G=this.dom.createElement("span")).style.width=2*A.config.characterWidth+"px",G.className=A.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",G.textContent=A.showSpaces?A.SPACE_CHAR:X,U.appendChild(G)):V&&(v+=1,(G=this.dom.createElement("span")).style.width=2*A.config.characterWidth+"px",G.className="ace_cjk",G.textContent=V,U.appendChild(G))}}if(U.appendChild(this.dom.createTextNode(W?x.slice(W):x,this.element)),this.$textToken[w.type])p.appendChild(U);else{var D="ace_"+w.type.replace(/\./g," ace_"),G=this.dom.createElement("span");"fold"==w.type&&(G.style.width=w.value.length*this.config.characterWidth+"px",G.setAttribute("title",g("Unfold code"))),G.className=D,G.appendChild(U),p.appendChild(G)}return v+x.length},_.prototype.renderIndentGuide=function(p,v,w){var x=v.search(this.$indentGuideRe);if(x<=0||x>=w)return v;if(" "==v[0]){for(var A=(x-=x%this.tabSize)/this.tabSize,R=0;R<A;R++)p.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),v.substr(x)}if("\t"==v[0]){for(R=0;R<x;R++)p.appendChild(this.$tabStrings["\t"].cloneNode(!0));return this.$highlightIndentGuide(),v.substr(x)}return this.$highlightIndentGuide(),v},_.prototype.$highlightIndentGuide=function(){if(this.$highlightIndentGuides&&this.displayIndentGuides){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var p=this.session.doc.$lines;if(p){var v=this.session.selection.getCursor(),w=/^\s*/.exec(this.session.doc.getLine(v.row))[0].length,x=Math.floor(w/this.tabSize);if(this.$highlightIndentGuideMarker={indentLevel:x,start:v.row},this.session.$bracketHighlight)for(var R=this.session.$bracketHighlight.ranges,U=0;U<R.length;U++)if(v.row!==R[U].start.row){this.$highlightIndentGuideMarker.end=R[U].start.row,this.$highlightIndentGuideMarker.dir=v.row>R[U].start.row?-1:1;break}if(!this.$highlightIndentGuideMarker.end&&""!==p[v.row]&&v.column===p[v.row].length)for(this.$highlightIndentGuideMarker.dir=1,U=v.row+1;U<p.length;U++){var L=p[U],W=/^\s*/.exec(L)[0].length;if(""!==L&&(this.$highlightIndentGuideMarker.end=U,W<=w))break}this.$renderHighlightIndentGuide()}}},_.prototype.$clearActiveIndentGuide=function(){for(var p=this.$lines.cells,v=0;v<p.length;v++){var x=p[v].element.childNodes;if(x.length>0)for(var A=0;A<x.length;A++)if(x[A].classList&&x[A].classList.contains("ace_indent-guide-active")){x[A].classList.remove("ace_indent-guide-active");break}}},_.prototype.$setIndentGuideActive=function(p,v){if(""!==this.session.doc.getLine(p.row)){var x=p.element.childNodes;if(x){var A=x[v-1];A&&A.classList&&A.classList.contains("ace_indent-guide")&&A.classList.add("ace_indent-guide-active")}}},_.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var p=this.$lines.cells;this.$clearActiveIndentGuide();var v=this.$highlightIndentGuideMarker.indentLevel;if(0!==v)if(1===this.$highlightIndentGuideMarker.dir)for(var w=0;w<p.length;w++){var x=p[w];if(this.$highlightIndentGuideMarker.end&&x.row>=this.$highlightIndentGuideMarker.start+1){if(x.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(x,v)}}else for(w=p.length-1;w>=0;w--)if(x=p[w],this.$highlightIndentGuideMarker.end&&x.row<this.$highlightIndentGuideMarker.start){if(x.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(x,v)}}},_.prototype.$createLineElement=function(p){var v=this.dom.createElement("div");return v.className="ace_line",v.style.height=this.config.lineHeight+"px",v},_.prototype.$renderWrappedLine=function(p,v,w){var x=0,A=0,R=w[0],U=0,L=this.$createLineElement();p.appendChild(L);for(var W=0;W<v.length;W++){var H=v[W],P=H.value;if(0==W&&this.displayIndentGuides){if(x=P.length,!(P=this.renderIndentGuide(L,P,R)))continue;x-=P.length}if(x+P.length<R)U=this.$renderToken(L,U,H,P),x+=P.length;else{for(;x+P.length>=R;)U=this.$renderToken(L,U,H,P.substring(0,R-x)),P=P.substring(R-x),x=R,L=this.$createLineElement(),p.appendChild(L),L.appendChild(this.dom.createTextNode(B.stringRepeat("\xa0",w.indent),this.element)),U=0,R=w[++A]||Number.MAX_VALUE;0!=P.length&&(x+=P.length,U=this.$renderToken(L,U,H,P))}}w[w.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(L,U,null,"",!0)},_.prototype.$renderSimpleLine=function(p,v){for(var w=0,x=0;x<v.length;x++){var A=v[x],R=A.value;if(0!=x||!this.displayIndentGuides||(R=this.renderIndentGuide(p,R))){if(w+R.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(p,w,A,R);w=this.$renderToken(p,w,A,R)}}},_.prototype.$renderOverflowMessage=function(p,v,w,x,A){w&&this.$renderToken(p,v,w,x.slice(0,this.MAX_LINE_LENGTH-v));var R=this.dom.createElement("span");R.className="ace_inline_button ace_keyword ace_toggle_wrap",R.textContent=A?"<hide>":"<click to see more...>",p.appendChild(R)},_.prototype.$renderLine=function(p,v,w){if(!w&&0!=w&&(w=this.session.getFoldLine(v)),w)var x=this.$getFoldLineTokens(v,w);else x=this.session.getTokens(v);var A=p;if(x.length){var R=this.session.getRowSplitData(v);R&&R.length?(this.$renderWrappedLine(p,x,R),A=p.lastChild):(A=p,this.$useLineGroups()&&(A=this.$createLineElement(),p.appendChild(A)),this.$renderSimpleLine(A,x))}else this.$useLineGroups()&&(A=this.$createLineElement(),p.appendChild(A));if(this.showEOL&&A){w&&(v=w.end.row);var U=this.dom.createElement("span");U.className="ace_invisible ace_invisible_eol",U.textContent=v==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,A.appendChild(U)}},_.prototype.$getFoldLineTokens=function(p,v){var w=this.session,x=[],R=w.getTokens(p);return v.walk(function(U,L,W,H,P){null!=U?x.push({type:"fold",value:U}):(P&&(R=w.getTokens(L)),R.length&&function A(U,L,W){for(var H=0,P=0;P+U[H].value.length<L;)if(P+=U[H].value.length,++H==U.length)return;for(P!=L&&(($=U[H].value.substring(L-P)).length>W-L&&($=$.substring(0,W-L)),x.push({type:U[H].type,value:$}),P=L+$.length,H+=1);P<W&&H<U.length;){var $;x.push(($=U[H].value).length+P>W?{type:U[H].type,value:$.substring(0,W-P)}:U[H]),P+=$.length,H+=1}}(R,H,W))},v.end.row,this.session.getLine(v.end.row).length),x},_.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},_}();m.prototype.$textToken={text:!0,rparen:!0,lparen:!0},m.prototype.EOF_CHAR="\xb6",m.prototype.EOL_CHAR_LF="\xac",m.prototype.EOL_CHAR_CRLF="\xa4",m.prototype.EOL_CHAR=m.prototype.EOL_CHAR_LF,m.prototype.TAB_CHAR="\u2014",m.prototype.SPACE_CHAR="\xb7",m.prototype.$padding=0,m.prototype.MAX_LINE_LENGTH=1e4,m.prototype.showInvisibles=!1,m.prototype.showSpaces=!1,m.prototype.showTabs=!1,m.prototype.showEOL=!1,m.prototype.displayIndentGuides=!0,m.prototype.$highlightIndentGuides=!0,m.prototype.$tabStrings=[],m.prototype.destroy={},m.prototype.onChangeTabSize=m.prototype.$computeTabString,T.implement(m.prototype,M),ie.Text=m}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(Q,ie,xe){"use strict";var T=Q("../lib/dom"),re=function(){function B(E){this.element=T.createElement("div"),this.element.className="ace_layer ace_cursor-layer",E.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),T.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return B.prototype.$updateOpacity=function(E){for(var M=this.cursors,g=M.length;g--;)T.setStyle(M[g].style,"opacity",E?"":"0")},B.prototype.$startCssAnimation=function(){for(var E=this.cursors,M=E.length;M--;)E[M].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&T.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},B.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,T.removeCssClass(this.element,"ace_animate-blinking")},B.prototype.setPadding=function(E){this.$padding=E},B.prototype.setSession=function(E){this.session=E},B.prototype.setBlinking=function(E){E!=this.isBlinking&&(this.isBlinking=E,this.restartTimer())},B.prototype.setBlinkInterval=function(E){E!=this.blinkInterval&&(this.blinkInterval=E,this.restartTimer())},B.prototype.setSmoothBlinking=function(E){E!=this.smoothBlinking&&(this.smoothBlinking=E,T.setCssClass(this.element,"ace_smooth-blinking",E),this.$updateCursors(!0),this.restartTimer())},B.prototype.addCursor=function(){var E=T.createElement("div");return E.className="ace_cursor",this.element.appendChild(E),this.cursors.push(E),E},B.prototype.removeCursor=function(){if(this.cursors.length>1){var E=this.cursors.pop();return E.parentNode.removeChild(E),E}},B.prototype.hideCursor=function(){this.isVisible=!1,T.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},B.prototype.showCursor=function(){this.isVisible=!0,T.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},B.prototype.restartTimer=function(){var E=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,T.removeCssClass(this.element,"ace_smooth-blinking")),E(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&T.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),T.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var M=function(){this.timeoutId=setTimeout(function(){E(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){E(!0),M()},this.blinkInterval),M()}else this.$stopCssAnimation()},B.prototype.getPixelPosition=function(E,M){if(!this.config||!this.session)return{left:0,top:0};E||(E=this.session.selection.getCursor());var g=this.session.documentToScreenPosition(E);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(g.row,E.row)?this.session.$bidiHandler.getPosLeft(g.column):g.column*this.config.characterWidth),top:(g.row-(M?this.config.firstRowScreen:0))*this.config.lineHeight}},B.prototype.isCursorInView=function(E,M){return E.top>=0&&E.top<M.maxHeight},B.prototype.update=function(E){this.config=E;var M=this.session.$selectionMarkers,g=0,m=0;(void 0===M||0===M.length)&&(M=[{cursor:null}]),g=0;for(var _=M.length;g<_;g++){var p=this.getPixelPosition(M[g].cursor,!0);if(!((p.top>E.height+E.offset||p.top<0)&&g>1)){var v=this.cursors[m++]||this.addCursor(),w=v.style;this.drawCursor?this.drawCursor(v,p,E,M[g],this.session):this.isCursorInView(p,E)?(T.setStyle(w,"display","block"),T.translate(v,p.left,p.top),T.setStyle(w,"width",Math.round(E.characterWidth)+"px"),T.setStyle(w,"height",E.lineHeight+"px")):T.setStyle(w,"display","none")}}for(;this.cursors.length>m;)this.removeCursor();var x=this.session.getOverwrite();this.$setOverwrite(x),this.$pixelPos=p,this.restartTimer()},B.prototype.$setOverwrite=function(E){E!=this.overwrite&&(this.overwrite=E,E?T.addCssClass(this.element,"ace_overwrite-cursors"):T.removeCssClass(this.element,"ace_overwrite-cursors"))},B.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},B}();re.prototype.$padding=0,re.prototype.drawCursor=null,ie.Cursor=re}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(Q,ie,xe){"use strict";var v,T=this&&this.__extends||(v=function(w,x){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(A[U]=R[U])})(w,x)},function(w,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function A(){this.constructor=w}v(w,x),w.prototype=null===x?Object.create(x):(A.prototype=x.prototype,new A)}),re=Q("./lib/oop"),B=Q("./lib/dom"),E=Q("./lib/event"),M=Q("./lib/event_emitter").EventEmitter,g=32768,m=function(){function v(w,x){this.element=B.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+x,this.inner=B.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),w.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,E.addListener(this.element,"scroll",this.onScroll.bind(this)),E.addListener(this.element,"mousedown",E.preventDefault)}return v.prototype.setVisible=function(w){this.element.style.display=w?"":"none",this.isVisible=w,this.coeff=1},v}();re.implement(m.prototype,M);var _=function(v){function w(x,A){var R=v.call(this,x,"-v")||this;return R.scrollTop=0,R.scrollHeight=0,A.$scrollbarWidth=R.width=B.scrollbarWidth(x.ownerDocument),R.inner.style.width=R.element.style.width=(R.width||15)+5+"px",R.$minWidth=0,R}return T(w,v),w.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var x=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-x)/(this.coeff-x)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},w.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},w.prototype.setHeight=function(x){this.element.style.height=x+"px"},w.prototype.setScrollHeight=function(x){this.scrollHeight=x,x>g?(this.coeff=g/x,x=g):1!=this.coeff&&(this.coeff=1),this.inner.style.height=x+"px"},w.prototype.setScrollTop=function(x){this.scrollTop!=x&&(this.skipEvent=!0,this.scrollTop=x,this.element.scrollTop=x*this.coeff)},w}(m);_.prototype.setInnerHeight=_.prototype.setScrollHeight;var p=function(v){function w(x,A){var R=v.call(this,x,"-h")||this;return R.scrollLeft=0,R.height=A.$scrollbarWidth,R.inner.style.height=R.element.style.height=(R.height||15)+5+"px",R}return T(w,v),w.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},w.prototype.getHeight=function(){return this.isVisible?this.height:0},w.prototype.setWidth=function(x){this.element.style.width=x+"px"},w.prototype.setInnerWidth=function(x){this.inner.style.width=x+"px"},w.prototype.setScrollWidth=function(x){this.inner.style.width=x+"px"},w.prototype.setScrollLeft=function(x){this.scrollLeft!=x&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=x)},w}(m);ie.ScrollBar=_,ie.ScrollBarV=_,ie.ScrollBarH=p,ie.VScrollBar=_,ie.HScrollBar=p}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(Q,ie,xe){"use strict";var p,T=this&&this.__extends||(p=function(v,w){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var R in A)Object.prototype.hasOwnProperty.call(A,R)&&(x[R]=A[R])})(v,w)},function(v,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function x(){this.constructor=v}p(v,w),v.prototype=null===w?Object.create(w):(x.prototype=w.prototype,new x)}),re=Q("./lib/oop"),B=Q("./lib/dom"),E=Q("./lib/event"),M=Q("./lib/event_emitter").EventEmitter;B.importCssString(".ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\n  position: absolute;\n  background: rgba(128, 128, 128, 0.6);\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: 1px solid #bbb;\n  border-radius: 2px;\n  z-index: 8;\n}\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\n  position: absolute;\n  z-index: 6;\n  background: none;\n  overflow: hidden!important;\n}\n.ace_editor>.ace_sb-v {\n  z-index: 6;\n  right: 0;\n  top: 0;\n  width: 12px;\n}\n.ace_editor>.ace_sb-v div {\n  z-index: 8;\n  right: 0;\n  width: 100%;\n}\n.ace_editor>.ace_sb-h {\n  bottom: 0;\n  left: 0;\n  height: 12px;\n}\n.ace_editor>.ace_sb-h div {\n  bottom: 0;\n  height: 100%;\n}\n.ace_editor>.ace_sb_grabbed {\n  z-index: 8;\n  background: #000;\n}","ace_scrollbar.css",!1);var g=function(){function p(v,w){this.element=B.createElement("div"),this.element.className="ace_sb"+w,this.inner=B.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,v.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,E.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return p.prototype.setVisible=function(v){this.element.style.display=v?"":"none",this.isVisible=v,this.coeff=1},p}();re.implement(g.prototype,M);var m=function(p){function v(w,x){var A=p.call(this,w,"-v")||this;return A.scrollTop=0,A.scrollHeight=0,A.parent=w,A.width=A.VScrollWidth,A.renderer=x,A.inner.style.width=A.element.style.width=(A.width||15)+"px",A.$minWidth=0,A}return T(v,p),v.prototype.onMouseDown=function(w,x){if("mousedown"===w&&0===E.getButton(x)&&2!==x.detail){if(x.target===this.inner){var A=this,R=x.clientY,W=x.clientY,H=this.thumbTop;E.capture(this.inner,function(V){R=V.clientY},function(){clearInterval($)});var $=setInterval(function(){if(void 0!==R){var V=A.scrollTopFromThumbTop(H+R-W);V!==A.scrollTop&&A._emit("scroll",{data:V})}},20);return E.preventDefault(x)}var X=x.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(X)}),E.preventDefault(x)}},v.prototype.getHeight=function(){return this.height},v.prototype.scrollTopFromThumbTop=function(w){var x=w*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return(x>>=0)<0?x=0:x>this.pageHeight-this.viewHeight&&(x=this.pageHeight-this.viewHeight),x},v.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},v.prototype.setHeight=function(w){this.height=Math.max(0,w),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},v.prototype.setScrollHeight=function(w,x){this.pageHeight===w&&!x||(this.pageHeight=w,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},v.prototype.setScrollTop=function(w){this.scrollTop=w,w<0&&(w=0),this.thumbTop=w*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},v}(g);m.prototype.setInnerHeight=m.prototype.setScrollHeight;var _=function(p){function v(w,x){var A=p.call(this,w,"-h")||this;return A.scrollLeft=0,A.scrollWidth=0,A.height=A.HScrollHeight,A.inner.style.height=A.element.style.height=(A.height||12)+"px",A.renderer=x,A}return T(v,p),v.prototype.onMouseDown=function(w,x){if("mousedown"===w&&0===E.getButton(x)&&2!==x.detail){if(x.target===this.inner){var A=this,R=x.clientX,W=x.clientX,H=this.thumbLeft;E.capture(this.inner,function(V){R=V.clientX},function(){clearInterval($)});var $=setInterval(function(){if(void 0!==R){var V=A.scrollLeftFromThumbLeft(H+R-W);V!==A.scrollLeft&&A._emit("scroll",{data:V})}},20);return E.preventDefault(x)}var X=x.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(X)}),E.preventDefault(x)}},v.prototype.getHeight=function(){return this.isVisible?this.height:0},v.prototype.scrollLeftFromThumbLeft=function(w){var x=w*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return(x>>=0)<0?x=0:x>this.pageWidth-this.viewWidth&&(x=this.pageWidth-this.viewWidth),x},v.prototype.setWidth=function(w){this.width=Math.max(0,w),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},v.prototype.setScrollWidth=function(w,x){this.pageWidth===w&&!x||(this.pageWidth=w,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},v.prototype.setScrollLeft=function(w){this.scrollLeft=w,w<0&&(w=0),this.thumbLeft=w*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},v}(g);_.prototype.setInnerWidth=_.prototype.setScrollWidth,ie.ScrollBar=m,ie.ScrollBarV=m,ie.ScrollBarH=_,ie.VScrollBar=m,ie.HScrollBar=_}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(Q,ie,xe){"use strict";var T=Q("./lib/event"),re=function(){function B(E,M){this.onRender=E,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=M||window;var g=this;this._flush=function(m){g.pending=!1;var _=g.changes;if(_&&(T.blockIdle(100),g.changes=0,g.onRender(_)),g.changes){if(g.$recursionLimit--<0)return;g.schedule()}else g.$recursionLimit=2}}return B.prototype.schedule=function(E){this.changes=this.changes|E,this.changes&&!this.pending&&(T.nextFrame(this._flush),this.pending=!0)},B.prototype.clear=function(E){var M=this.changes;return this.changes=0,M},B}();ie.RenderLoop=re}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(Q,ie,xe){var T=Q("../lib/oop"),re=Q("../lib/dom"),B=Q("../lib/lang"),E=Q("../lib/event"),M=Q("../lib/useragent"),g=Q("../lib/event_emitter").EventEmitter,m=512,_="function"==typeof ResizeObserver,p=200,v=function(){function w(x){this.el=re.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=re.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=re.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),x.appendChild(this.el),this.$measureNode.textContent=B.stringRepeat("X",m),this.$characterSize={width:0,height:0},_?this.$addObserver():this.checkForSizeChanges()}return w.prototype.$setMeasureNodeStyles=function(x,A){x.width=x.height="auto",x.left=x.top="0px",x.visibility="hidden",x.position="absolute",x.whiteSpace="pre",M.isIE<8?x["font-family"]="inherit":x.font="inherit",x.overflow=A?"hidden":"visible"},w.prototype.checkForSizeChanges=function(x){if(void 0===x&&(x=this.$measureSizes()),x&&(this.$characterSize.width!==x.width||this.$characterSize.height!==x.height)){this.$measureNode.style.fontWeight="bold";var A=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=x,this.charSizes=Object.create(null),this.allowBoldFonts=A&&A.width===x.width&&A.height===x.height,this._emit("changeCharacterSize",{data:x})}},w.prototype.$addObserver=function(){var x=this;this.$observer=new window.ResizeObserver(function(A){x.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},w.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var x=this;return this.$pollSizeChangesTimer=E.onIdle(function A(){x.checkForSizeChanges(),E.onIdle(A,500)},500)},w.prototype.setPolling=function(x){x?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},w.prototype.$measureSizes=function(x){var A={height:(x||this.$measureNode).clientHeight,width:(x||this.$measureNode).clientWidth/m};return 0===A.width||0===A.height?null:A},w.prototype.$measureCharWidth=function(x){return this.$main.textContent=B.stringRepeat(x,m),this.$main.getBoundingClientRect().width/m},w.prototype.getCharacterWidth=function(x){var A=this.charSizes[x];return void 0===A&&(A=this.charSizes[x]=this.$measureCharWidth(x)/this.$characterSize.width),A},w.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},w.prototype.$getZoom=function(x){return x&&x.parentElement?(window.getComputedStyle(x).zoom||1)*this.$getZoom(x.parentElement):1},w.prototype.$initTransformMeasureNodes=function(){var x=function(A,R){return["div",{style:"position: absolute;top:"+A+"px;left:"+R+"px;"}]};this.els=re.buildDom([x(0,0),x(p,0),x(0,p),x(p,p)],this.el)},w.prototype.transformCoordinates=function(x,A){function U(ke,Ce,We){var Te=ke[1]*Ce[0]-ke[0]*Ce[1];return[(-Ce[1]*We[0]+Ce[0]*We[1])/Te,(+ke[1]*We[0]-ke[0]*We[1])/Te]}function L(ke,Ce){return[ke[0]-Ce[0],ke[1]-Ce[1]]}function W(ke,Ce){return[ke[0]+Ce[0],ke[1]+Ce[1]]}function H(ke,Ce){return[ke*Ce[0],ke*Ce[1]]}function P(ke){var Ce=ke.getBoundingClientRect();return[Ce.left,Ce.top]}x&&(x=H(1/this.$getZoom(this.el),x)),this.els||this.$initTransformMeasureNodes();var $=P(this.els[0]),X=P(this.els[1]),V=P(this.els[2]),N=P(this.els[3]),te=U(L(N,X),L(N,V),L(W(X,V),W(N,$))),G=H(1+te[0],L(X,$)),D=H(1+te[1],L(V,$));if(A){var Y=A,ee=te[0]*Y[0]/p+te[1]*Y[1]/p+1,fe=W(H(Y[0],G),H(Y[1],D));return W(H(1/ee/p,fe),$)}var _e=L(x,$),we=U(L(G,H(te[0],_e)),L(D,H(te[1],_e)),_e);return H(p,we)},w}();v.prototype.$characterSize={width:0,height:0},T.implement(v.prototype,g),ie.FontMetrics=v}),ace.define("ace/css/editor-css",["require","exports","module"],function(Q,ie,xe){xe.exports='\n.ace_br1 {border-top-left-radius    : 3px;}\n.ace_br2 {border-top-right-radius   : 3px;}\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\n.ace_br4 {border-bottom-right-radius: 3px;}\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\n.ace_br8 {border-bottom-left-radius : 3px;}\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\n\n\n.ace_editor {\n    position: relative;\n    overflow: hidden;\n    padding: 0;\n    font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'Source Code Pro\', \'source-code-pro\', monospace;\n    direction: ltr;\n    text-align: left;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow: hidden;\n    top: 0;\n    bottom: 0;\n    background-color: inherit;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    cursor: text;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    min-width: 100%;\n    contain: style size layout;\n    font-variant-ligatures: no-common-ligatures;\n}\n\n.ace_keyboard-focus:focus {\n    box-shadow: inset 0 0 0 2px #5E9ED6;\n    outline: none;\n}\n\n.ace_dragging .ace_scroller:before{\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: \'\';\n    background: rgba(250, 250, 250, 0.01);\n    z-index: 1000;\n}\n.ace_dragging.ace_dark .ace_scroller:before{\n    background: rgba(0, 0, 0, 0.01);\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    width: auto;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    cursor: default;\n    z-index: 4;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    contain: style size layout;\n}\n\n.ace_gutter-active-line {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n\n.ace_scroller.ace_scroll-left:after {\n    content: "";\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\n    pointer-events: none;\n}\n\n.ace_gutter-cell, .ace_gutter-cell_svg-icons {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding-left: 19px;\n    padding-right: 6px;\n    background-repeat: no-repeat;\n}\n\n.ace_gutter-cell_svg-icons .ace_gutter_annotation {\n    margin-left: -14px;\n    float: left;\n}\n\n.ace_gutter-cell .ace_gutter_annotation {\n    margin-left: -19px;\n    float: left;\n}\n\n.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info, .ace_icon.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");\n}\n\n.ace_icon_svg.ace_error {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");\n    background-color: crimson;\n}\n.ace_icon_svg.ace_warning {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");\n    background-color: darkorange;\n}\n.ace_icon_svg.ace_info {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");\n    background-color: royalblue;\n}\n\n.ace_icon_svg.ace_error_fold {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");\n    background-color: crimson;\n}\n.ace_icon_svg.ace_warning_fold {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");\n    background-color: darkorange;\n}\n\n.ace_scrollbar {\n    contain: strict;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 6;\n}\n\n.ace_scrollbar-inner {\n    position: absolute;\n    cursor: text;\n    left: 0;\n    top: 0;\n}\n\n.ace_scrollbar-v{\n    overflow-x: hidden;\n    overflow-y: scroll;\n    top: 0;\n}\n\n.ace_scrollbar-h {\n    overflow-x: scroll;\n    overflow-y: hidden;\n    left: 0;\n}\n\n.ace_print-margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_text-input {\n    position: absolute;\n    z-index: 0;\n    width: 0.5em;\n    height: 1em;\n    opacity: 0;\n    background: transparent;\n    -moz-appearance: none;\n    appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n    font: inherit;\n    padding: 0 1px;\n    margin: 0 -1px;\n    contain: strict;\n    -ms-user-select: text;\n    -moz-user-select: text;\n    -webkit-user-select: text;\n    user-select: text;\n    /*with `pre-line` chrome inserts &nbsp; instead of space*/\n    white-space: pre!important;\n}\n.ace_text-input.ace_composition {\n    background: transparent;\n    color: inherit;\n    z-index: 1000;\n    opacity: 1;\n}\n.ace_composition_placeholder { color: transparent }\n.ace_composition_marker { \n    border-bottom: 1px solid;\n    position: absolute;\n    border-radius: 0;\n    margin-top: 1px;\n}\n\n[ace_nocontext=true] {\n    transform: none!important;\n    filter: none!important;\n    clip-path: none!important;\n    mask : none!important;\n    contain: none!important;\n    perspective: none!important;\n    mix-blend-mode: initial!important;\n    z-index: auto;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\n    word-wrap: normal;\n    white-space: pre;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter-layer {\n    position: relative;\n    width: auto;\n    text-align: right;\n    pointer-events: auto;\n    height: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer {\n    font: inherit !important;\n    position: absolute;\n    height: 1000000px;\n    width: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\n    contain: style size layout;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n}\n\n.ace_hidpi .ace_text-layer,\n.ace_hidpi .ace_gutter-layer,\n.ace_hidpi .ace_content,\n.ace_hidpi .ace_gutter {\n    contain: strict;\n}\n.ace_hidpi .ace_text-layer > .ace_line, \n.ace_hidpi .ace_text-layer > .ace_line_group {\n    contain: strict;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n    box-sizing: border-box;\n    border-left: 2px solid;\n    /* workaround for smooth cursor repaintng whole screen in chrome */\n    transform: translatez(0);\n}\n\n.ace_multiselect .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_slim-cursors .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_overwrite-cursors .ace_cursor {\n    border-left-width: 0;\n    border-bottom: 1px solid;\n}\n\n.ace_hidden-cursors .ace_cursor {\n    opacity: 0.2;\n}\n\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\n    opacity: 0;\n}\n\n.ace_smooth-blinking .ace_cursor {\n    transition: opacity 0.18s;\n}\n\n.ace_animate-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: step-end;\n    animation-name: blink-ace-animate;\n    animation-iteration-count: infinite;\n}\n\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: ease-in-out;\n    animation-name: blink-ace-animate-smooth;\n}\n    \n@keyframes blink-ace-animate {\n    from, to { opacity: 1; }\n    60% { opacity: 0; }\n}\n\n@keyframes blink-ace-animate-smooth {\n    from, to { opacity: 1; }\n    45% { opacity: 1; }\n    60% { opacity: 0; }\n    85% { opacity: 0; }\n}\n\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_error_bracket {\n    position: absolute;\n    border-bottom: 1px solid #DE5555;\n    border-radius: 0;\n}\n\n.ace_marker-layer .ace_active-line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected-word {\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    box-sizing: border-box;\n\n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    border-radius: 2px;\n\n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");\n}\n\n.ace_tooltip {\n    background-color: #f5f5f5;\n    border: 1px solid gray;\n    border-radius: 1px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    color: black;\n    max-width: 100%;\n    padding: 3px 4px;\n    position: fixed;\n    z-index: 999999;\n    box-sizing: border-box;\n    cursor: default;\n    white-space: pre;\n    word-wrap: break-word;\n    line-height: normal;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    pointer-events: none;\n}\n\n.ace_tooltip.ace_dark {\n    background-color: #636363;\n    color: #fff;\n}\n\n.ace_tooltip:focus {\n    outline: 1px solid #5E9ED6;\n}\n\n.ace_icon {\n    display: inline-block;\n    width: 18px;\n    vertical-align: top;\n}\n\n.ace_icon_svg {\n    display: inline-block;\n    width: 12px;\n    vertical-align: top;\n    -webkit-mask-repeat: no-repeat;\n    -webkit-mask-size: 12px;\n    -webkit-mask-position: center;\n}\n\n.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    box-sizing: border-box;\n\n    margin: 0 -12px 0 1px;\n    display: none;\n    width: 11px;\n    vertical-align: top;\n\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: center;\n\n    border-radius: 3px;\n    \n    border: 1px solid transparent;\n    cursor: pointer;\n}\n\n.ace_folding-enabled .ace_fold-widget {\n    display: inline-block;   \n}\n\n.ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");\n}\n\n.ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n/**\n * Dark version for fold widgets\n */\n.ace_dark .ace_fold-widget {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");\n}\n.ace_dark .ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget:hover {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1);\n}\n.ace_dark .ace_fold-widget:active {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n\n.ace_inline_button {\n    border: 1px solid lightgray;\n    display: inline-block;\n    margin: -1px 8px;\n    padding: 0 5px;\n    pointer-events: auto;\n    cursor: pointer;\n}\n.ace_inline_button:hover {\n    border-color: gray;\n    background: rgba(200,200,200,0.2);\n    display: inline-block;\n    pointer-events: auto;\n}\n\n.ace_fold-widget.ace_invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n\n.ace_fade-fold-widgets .ace_fold-widget {\n    transition: opacity 0.4s ease 0.05s;\n    opacity: 0;\n}\n\n.ace_fade-fold-widgets:hover .ace_fold-widget {\n    transition: opacity 0.05s ease 0.05s;\n    opacity:1;\n}\n\n.ace_underline {\n    text-decoration: underline;\n}\n\n.ace_bold {\n    font-weight: bold;\n}\n\n.ace_nobold .ace_bold {\n    font-weight: normal;\n}\n\n.ace_italic {\n    font-style: italic;\n}\n\n\n.ace_error-marker {\n    background-color: rgba(255, 0, 0,0.2);\n    position: absolute;\n    z-index: 9;\n}\n\n.ace_highlight-marker {\n    background-color: rgba(255, 255, 0,0.2);\n    position: absolute;\n    z-index: 8;\n}\n\n.ace_mobile-menu {\n    position: absolute;\n    line-height: 1.5;\n    border-radius: 4px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    background: white;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #dcdcdc;\n    color: black;\n}\n.ace_dark > .ace_mobile-menu {\n    background: #333;\n    color: #ccc;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #444;\n\n}\n.ace_mobile-button {\n    padding: 2px;\n    cursor: pointer;\n    overflow: hidden;\n}\n.ace_mobile-button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_mobile-button:active {\n    background-color: #ddd;\n}\n\n.ace_placeholder {\n    font-family: arial;\n    transform: scale(0.9);\n    transform-origin: left;\n    white-space: pre;\n    opacity: 0.7;\n    margin: 0 10px;\n}\n\n.ace_ghost_text {\n    opacity: 0.5;\n    font-style: italic;\n    white-space: pre;\n}'}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(Q,ie,xe){"use strict";var T=Q("../lib/dom"),re=Q("../lib/oop"),B=Q("../lib/event_emitter").EventEmitter,E=function(){function M(g,m){this.canvas=T.createElement("canvas"),this.renderer=m,this.pixelRatio=1,this.maxHeight=m.layerConfig.maxHeight,this.lineHeight=m.layerConfig.lineHeight,this.canvasHeight=g.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=g.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},g.element.appendChild(this.canvas)}return M.prototype.$updateDecorators=function(g){var m=!0===this.renderer.theme.isDark?this.colors.dark:this.colors.light;g&&(this.maxHeight=g.maxHeight,this.lineHeight=g.lineHeight,this.canvasHeight=g.height,this.heightRatio=(g.lastRow+1)*this.lineHeight<this.canvasHeight?1:this.canvasHeight/this.maxHeight);var p=this.canvas.getContext("2d"),w=this.renderer.session.$annotations;if(p.clearRect(0,0,this.canvas.width,this.canvas.height),w){var x={info:1,warning:2,error:3};w.forEach(function(N){N.priority=x[N.type]||null}),w=w.sort(function v(N,te){return N.priority<te.priority?-1:N.priority>te.priority?1:0});for(var A=this.renderer.session.$foldData,R=0;R<w.length;R++){var U=w[R].row,L=this.compensateFoldRows(U,A),W=Math.round((U-L)*this.lineHeight*this.heightRatio),H=Math.round((U-L)*this.lineHeight*this.heightRatio),P=Math.round(((U-L)*this.lineHeight+this.lineHeight)*this.heightRatio);if(P-H<this.minDecorationHeight){var X=(H+P)/2|0;X<this.halfMinDecorationHeight?X=this.halfMinDecorationHeight:X+this.halfMinDecorationHeight>this.canvasHeight&&(X=this.canvasHeight-this.halfMinDecorationHeight),H=Math.round(X-this.halfMinDecorationHeight),P=Math.round(X+this.halfMinDecorationHeight)}p.fillStyle=m[w[R].type]||null,p.fillRect(0,W,this.canvasWidth,P-H)}}var V=this.renderer.session.selection.getCursor();V&&(L=this.compensateFoldRows(V.row,A),W=Math.round((V.row-L)*this.lineHeight*this.heightRatio),p.fillStyle="rgba(0, 0, 0, 0.5)",p.fillRect(0,W,this.canvasWidth,2))},M.prototype.compensateFoldRows=function(g,m){var _=0;if(m&&m.length>0)for(var p=0;p<m.length;p++)g>m[p].start.row&&g<m[p].end.row?_+=g-m[p].start.row:g>=m[p].end.row&&(_+=m[p].end.row-m[p].start.row);return _},M}();re.implement(E.prototype,B),ie.Decorator=E}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(Q,ie,xe){"use strict";var T=Q("./lib/oop"),re=Q("./lib/dom"),B=Q("./lib/lang"),E=Q("./config"),M=Q("./layer/gutter").Gutter,g=Q("./layer/marker").Marker,m=Q("./layer/text").Text,_=Q("./layer/cursor").Cursor,p=Q("./scrollbar").HScrollBar,v=Q("./scrollbar").VScrollBar,w=Q("./scrollbar_custom").HScrollBar,x=Q("./scrollbar_custom").VScrollBar,A=Q("./renderloop").RenderLoop,R=Q("./layer/font_metrics").FontMetrics,U=Q("./lib/event_emitter").EventEmitter,L=Q("./css/editor-css"),W=Q("./layer/decorators").Decorator,H=Q("./lib/useragent");re.importCssString(L,"ace_editor.css",!1);var P=function(){function $(X,V){var N=this;this.container=X||re.createElement("div"),re.addCssClass(this.container,"ace_editor"),re.HI_DPI&&re.addCssClass(this.container,"ace_hidpi"),this.setTheme(V),null==E.get("useStrictCSP")&&E.set("useStrictCSP",!1),this.$gutter=re.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=re.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=re.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new M(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new g(this.content);var te=this.$textLayer=new m(this.content);this.canvas=te.element,this.$markerFront=new g(this.content),this.$cursorLayer=new _(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new v(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.on("scroll",function(G){N.$scrollAnimation||N.session.setScrollTop(G.data-N.scrollMargin.top)}),this.scrollBarH.on("scroll",function(G){N.$scrollAnimation||N.session.setScrollLeft(G.data-N.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new R(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(G){N.updateCharacterSize(),N.onResize(!0,N.gutterWidth,N.$size.width,N.$size.height),N._signal("changeCharacterSize",G)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!H.isIOS,this.$loop=new A(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),E.resetOptions(this),E._signal("renderer",this)}return $.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),re.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},$.prototype.setSession=function(X){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=X,X&&this.scrollMargin.top&&X.getScrollTop()<=0&&X.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(X),this.$markerBack.setSession(X),this.$markerFront.setSession(X),this.$gutterLayer.setSession(X),this.$textLayer.setSession(X),X&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},$.prototype.updateLines=function(X,V,N){if(void 0===V&&(V=1/0),this.$changedLines?(this.$changedLines.firstRow>X&&(this.$changedLines.firstRow=X),this.$changedLines.lastRow<V&&(this.$changedLines.lastRow=V)):this.$changedLines={firstRow:X,lastRow:V},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!N)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},$.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},$.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},$.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},$.prototype.updateFull=function(X){X?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},$.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},$.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},$.prototype.onResize=function(X,V,N,te){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=X?1:0;var G=this.container;te||(te=G.clientHeight||G.scrollHeight),N||(N=G.clientWidth||G.scrollWidth);var D=this.$updateCachedSize(X,V,N,te);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!N&&!te)return this.resizing=0;X&&(this.$gutterLayer.$padding=null),X?this.$renderChanges(D|this.$changes,!0):this.$loop.schedule(D|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},$.prototype.$updateCachedSize=function(X,V,N,te){var G=0,D=this.$size,Y={width:D.width,height:D.height,scrollerHeight:D.scrollerHeight,scrollerWidth:D.scrollerWidth};if((te-=this.$extraHeight||0)&&(X||D.height!=te)&&(D.height=te,G|=this.CHANGE_SIZE,D.scrollerHeight=D.height,this.$horizScroll&&(D.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(D.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",G|=this.CHANGE_SCROLL),N&&(X||D.width!=N)){G|=this.CHANGE_SIZE,D.width=N,null==V&&(V=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=V,re.setStyle(this.scrollBarH.element.style,"left",V+"px"),re.setStyle(this.scroller.style,"left",V+this.margin.left+"px"),D.scrollerWidth=Math.max(0,N-V-this.scrollBarV.getWidth()-this.margin.h),re.setStyle(this.$gutter.style,"left",this.margin.left+"px");var ee=this.scrollBarV.getWidth()+"px";re.setStyle(this.scrollBarH.element.style,"right",ee),re.setStyle(this.scroller.style,"right",ee),re.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(D.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||X)&&(G|=this.CHANGE_FULL)}return D.$dirty=!N||!te,G&&this._signal("resize",Y),G},$.prototype.onGutterResize=function(X){var V=this.$showGutter?X:0;V!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,V,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},$.prototype.adjustWrapLimit=function(){var V=Math.floor((this.$size.scrollerWidth-2*this.$padding)/this.characterWidth);return this.session.adjustWrapLimit(V,this.$showPrintMargin&&this.$printMarginColumn)},$.prototype.setAnimatedScroll=function(X){this.setOption("animatedScroll",X)},$.prototype.getAnimatedScroll=function(){return this.$animatedScroll},$.prototype.setShowInvisibles=function(X){this.setOption("showInvisibles",X),this.session.$bidiHandler.setShowInvisibles(X)},$.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},$.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},$.prototype.setDisplayIndentGuides=function(X){this.setOption("displayIndentGuides",X)},$.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},$.prototype.setHighlightIndentGuides=function(X){this.setOption("highlightIndentGuides",X)},$.prototype.setShowPrintMargin=function(X){this.setOption("showPrintMargin",X)},$.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},$.prototype.setPrintMarginColumn=function(X){this.setOption("printMarginColumn",X)},$.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},$.prototype.getShowGutter=function(){return this.getOption("showGutter")},$.prototype.setShowGutter=function(X){return this.setOption("showGutter",X)},$.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},$.prototype.setFadeFoldWidgets=function(X){this.setOption("fadeFoldWidgets",X)},$.prototype.setHighlightGutterLine=function(X){this.setOption("highlightGutterLine",X)},$.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},$.prototype.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var X=re.createElement("div");X.className="ace_layer ace_print-margin-layer",this.$printMarginEl=re.createElement("div"),this.$printMarginEl.className="ace_print-margin",X.appendChild(this.$printMarginEl),this.content.insertBefore(X,this.content.firstChild)}var V=this.$printMarginEl.style;V.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",V.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},$.prototype.getContainerElement=function(){return this.container},$.prototype.getMouseEventTarget=function(){return this.scroller},$.prototype.getTextAreaContainer=function(){return this.container},$.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var X=this.textarea.style,V=this.$composition;if(!this.$keepTextAreaAtCursor&&!V)return void re.translate(this.textarea,-100,0);var N=this.$cursorLayer.$pixelPos;if(N){V&&V.markerRange&&(N=this.$cursorLayer.getPixelPosition(V.markerRange.start,!0));var te=this.layerConfig,G=N.top,D=N.left,Y=V&&V.useTextareaForIME||H.isMobile?this.lineHeight:1;if((G-=te.offset)<0||G>te.height-Y)return void re.translate(this.textarea,0,0);var ee=1,fe=this.$size.height-Y;V?V.useTextareaForIME?ee=this.characterWidth*this.session.$getStringScreenWidth(this.textarea.value)[0]:G+=this.lineHeight+2:G+=this.lineHeight,(D-=this.scrollLeft)>this.$size.scrollerWidth-ee&&(D=this.$size.scrollerWidth-ee),D+=this.gutterWidth+this.margin.left,re.setStyle(X,"height",Y+"px"),re.setStyle(X,"width",ee+"px"),re.translate(this.textarea,Math.min(D,this.$size.scrollerWidth-ee),Math.min(G,fe))}}},$.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},$.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},$.prototype.getLastFullyVisibleRow=function(){var X=this.layerConfig,V=X.lastRow;return this.session.documentToScreenRow(V,0)*X.lineHeight-this.session.getScrollTop()>X.height-X.lineHeight?V-1:V},$.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},$.prototype.setPadding=function(X){this.$padding=X,this.$textLayer.setPadding(X),this.$cursorLayer.setPadding(X),this.$markerFront.setPadding(X),this.$markerBack.setPadding(X),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},$.prototype.setScrollMargin=function(X,V,N,te){var G=this.scrollMargin;G.top=0|X,G.bottom=0|V,G.right=0|te,G.left=0|N,G.v=G.top+G.bottom,G.h=G.left+G.right,G.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-G.top),this.updateFull()},$.prototype.setMargin=function(X,V,N,te){var G=this.margin;G.top=0|X,G.bottom=0|V,G.right=0|te,G.left=0|N,G.v=G.top+G.bottom,G.h=G.left+G.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},$.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},$.prototype.setHScrollBarAlwaysVisible=function(X){this.setOption("hScrollBarAlwaysVisible",X)},$.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},$.prototype.setVScrollBarAlwaysVisible=function(X){this.setOption("vScrollBarAlwaysVisible",X)},$.prototype.$updateScrollBarV=function(){var X=this.layerConfig.maxHeight,V=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>(X-=(V-this.lineHeight)*this.$scrollPastEnd)-V&&(X=this.scrollTop+V,this.scrollBarV.scrollTop=null),this.scrollBarV.setScrollHeight(X+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},$.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},$.prototype.freeze=function(){this.$frozen=!0},$.prototype.unfreeze=function(){this.$frozen=!1},$.prototype.$renderChanges=function(X,V){if(this.$changes&&(X|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(X||V)){if(this.$size.$dirty)return this.$changes|=X,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",X),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var N=this.layerConfig;if(X&this.CHANGE_FULL||X&this.CHANGE_SIZE||X&this.CHANGE_TEXT||X&this.CHANGE_LINES||X&this.CHANGE_SCROLL||X&this.CHANGE_H_SCROLL){if(X|=this.$computeLayerConfig()|this.$loop.clear(),N.firstRow!=this.layerConfig.firstRow&&N.firstRowScreen==this.layerConfig.firstRowScreen){var te=this.scrollTop+(N.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;te>0&&(this.scrollTop=te,X|=this.CHANGE_SCROLL,X|=this.$computeLayerConfig()|this.$loop.clear())}N=this.layerConfig,this.$updateScrollBarV(),X&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),re.translate(this.content,-this.scrollLeft,-N.offset);var D=N.minHeight+"px";re.setStyle(this.content.style,"width",N.width+2*this.$padding+"px"),re.setStyle(this.content.style,"height",D)}return X&this.CHANGE_H_SCROLL&&(re.translate(this.content,-this.scrollLeft,-N.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),X&this.CHANGE_FULL?(this.$changedLines=null,this.$textLayer.update(N),this.$showGutter&&this.$gutterLayer.update(N),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(N),this.$markerBack.update(N),this.$markerFront.update(N),this.$cursorLayer.update(N),this.$moveTextAreaToCursor(),void this._signal("afterRender",X)):X&this.CHANGE_SCROLL?(this.$changedLines=null,X&this.CHANGE_TEXT||X&this.CHANGE_LINES?this.$textLayer.update(N):this.$textLayer.scrollLines(N),this.$showGutter&&(X&this.CHANGE_GUTTER||X&this.CHANGE_LINES?this.$gutterLayer.update(N):this.$gutterLayer.scrollLines(N)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(N),this.$markerBack.update(N),this.$markerFront.update(N),this.$cursorLayer.update(N),this.$moveTextAreaToCursor(),void this._signal("afterRender",X)):(X&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(N),this.$showGutter&&this.$gutterLayer.update(N),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(N)):X&this.CHANGE_LINES?((this.$updateLines()||X&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(N),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(N)):X&this.CHANGE_TEXT||X&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(N),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(N)):X&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(N),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(N)),X&this.CHANGE_CURSOR&&(this.$cursorLayer.update(N),this.$moveTextAreaToCursor()),X&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(N),X&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(N),void this._signal("afterRender",X))}this.$changes|=X},$.prototype.$autosize=function(){var X=this.session.getScreenLength()*this.lineHeight,V=this.$maxLines*this.lineHeight,N=Math.min(V,Math.max((this.$minLines||1)*this.lineHeight,X))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(N+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&N>this.$maxPixelHeight&&(N=this.$maxPixelHeight);var G=!(N<=2*this.lineHeight)&&X>V;if(N!=this.desiredHeight||this.$size.height!=this.desiredHeight||G!=this.$vScroll){G!=this.$vScroll&&(this.$vScroll=G,this.scrollBarV.setVisible(G));var D=this.container.clientWidth;this.container.style.height=N+"px",this.$updateCachedSize(!0,this.$gutterWidth,D,N),this.desiredHeight=N,this._signal("autosize")}},$.prototype.$computeLayerConfig=function(){var X=this.session,V=this.$size,N=V.height<=2*this.lineHeight,G=this.session.getScreenLength()*this.lineHeight,D=this.$getLongestLine(),Y=!N&&(this.$hScrollBarAlwaysVisible||V.scrollerWidth-D-2*this.$padding<0),ee=this.$horizScroll!==Y;ee&&(this.$horizScroll=Y,this.scrollBarH.setVisible(Y));var fe=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var _e=V.scrollerHeight+this.lineHeight,we=!this.$maxLines&&this.$scrollPastEnd?(V.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;G+=we;var ke=this.scrollMargin;this.session.setScrollTop(Math.max(-ke.top,Math.min(this.scrollTop,G-V.scrollerHeight+ke.bottom))),this.session.setScrollLeft(Math.max(-ke.left,Math.min(this.scrollLeft,D+2*this.$padding-V.scrollerWidth+ke.right)));var Ce=!N&&(this.$vScrollBarAlwaysVisible||V.scrollerHeight-G+we<0||this.scrollTop>ke.top),We=fe!==Ce;We&&(this.$vScroll=Ce,this.scrollBarV.setVisible(Ce));var Dt,Lt,Te=this.scrollTop%this.lineHeight,Le=Math.ceil(_e/this.lineHeight)-1,et=Math.max(0,Math.round((this.scrollTop-Te)/this.lineHeight)),Bt=et+Le,He=this.lineHeight;et=X.screenToDocumentRow(et,0);var lt=X.getFoldLine(et);lt&&(et=lt.start.row),Dt=X.documentToScreenRow(et,0),Lt=X.getRowLength(et)*He,Bt=Math.min(X.screenToDocumentRow(Bt,0),X.getLength()-1),_e=V.scrollerHeight+X.getRowLength(Bt)*He+Lt,Te=this.scrollTop-Dt*He;var Pt=0;return(this.layerConfig.width!=D||ee)&&(Pt=this.CHANGE_H_SCROLL),(ee||We)&&(Pt|=this.$updateCachedSize(!0,this.gutterWidth,V.width,V.height),this._signal("scrollbarVisibilityChanged"),We&&(D=this.$getLongestLine())),this.layerConfig={width:D,padding:this.$padding,firstRow:et,firstRowScreen:Dt,lastRow:Bt,lineHeight:He,characterWidth:this.characterWidth,minHeight:_e,maxHeight:G,offset:Te,gutterOffset:He?Math.max(0,Math.ceil((Te+V.height-V.scrollerHeight)/He)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(D-this.$padding),Pt},$.prototype.$updateLines=function(){if(this.$changedLines){var X=this.$changedLines.firstRow,V=this.$changedLines.lastRow;this.$changedLines=null;var N=this.layerConfig;if(!(X>N.lastRow+1||V<N.firstRow))return V===1/0?(this.$showGutter&&this.$gutterLayer.update(N),void this.$textLayer.update(N)):(this.$textLayer.updateLines(N,X,V),!0)}},$.prototype.$getLongestLine=function(){var X=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(X+=1),this.$textLayer&&X>this.$textLayer.MAX_LINE_LENGTH&&(X=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(X*this.characterWidth))},$.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},$.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},$.prototype.addGutterDecoration=function(X,V){this.$gutterLayer.addGutterDecoration(X,V)},$.prototype.removeGutterDecoration=function(X,V){this.$gutterLayer.removeGutterDecoration(X,V)},$.prototype.updateBreakpoints=function(X){this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.setAnnotations=function(X){this.$gutterLayer.setAnnotations(X),this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},$.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},$.prototype.showCursor=function(){this.$cursorLayer.showCursor()},$.prototype.scrollSelectionIntoView=function(X,V,N){this.scrollCursorIntoView(X,N),this.scrollCursorIntoView(V,N)},$.prototype.scrollCursorIntoView=function(X,V,N){if(0!==this.$size.scrollerHeight){var te=this.$cursorLayer.getPixelPosition(X),G=te.left,D=te.top,Y=N&&N.top||0,ee=N&&N.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var fe=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;fe+Y>D?(V&&fe+Y>D+this.lineHeight&&(D-=V*this.$size.scrollerHeight),0===D&&(D=-this.scrollMargin.top),this.session.setScrollTop(D)):fe+this.$size.scrollerHeight-ee<D+this.lineHeight&&(V&&fe+this.$size.scrollerHeight-ee<D-this.lineHeight&&(D+=V*this.$size.scrollerHeight),this.session.setScrollTop(D+this.lineHeight+ee-this.$size.scrollerHeight));var _e=this.scrollLeft,we=2*this.layerConfig.characterWidth;G-we<_e?((G-=we)<this.$padding+we&&(G=-this.scrollMargin.left),this.session.setScrollLeft(G)):_e+this.$size.scrollerWidth<(G+=we)+this.characterWidth?this.session.setScrollLeft(Math.round(G+this.characterWidth-this.$size.scrollerWidth)):_e<=this.$padding&&G-_e<this.characterWidth&&this.session.setScrollLeft(0)}},$.prototype.getScrollTop=function(){return this.session.getScrollTop()},$.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},$.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},$.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},$.prototype.scrollToRow=function(X){this.session.setScrollTop(X*this.lineHeight)},$.prototype.alignCursor=function(X,V){"number"==typeof X&&(X={row:X,column:0});var G=this.$cursorLayer.getPixelPosition(X).top-(this.$size.scrollerHeight-this.lineHeight)*(V||0);return this.session.setScrollTop(G),G},$.prototype.$calcSteps=function(X,V){var ee,N=0,te=this.STEPS,G=[];for(N=0;N<te;++N)G.push((ee=X,(V-X)*(Math.pow(N/this.STEPS-1,3)+1)+ee));return G},$.prototype.scrollToLine=function(X,V,N,te){var D=this.$cursorLayer.getPixelPosition({row:X,column:0}).top;V&&(D-=this.$size.scrollerHeight/2);var Y=this.scrollTop;this.session.setScrollTop(D),!1!==N&&this.animateScrolling(Y,te)},$.prototype.animateScrolling=function(X,V){var N=this.scrollTop;if(this.$animatedScroll){var te=this;if(X!=N){if(this.$scrollAnimation){var G=this.$scrollAnimation.steps;if(G.length&&(X=G[0])==N)return}var D=te.$calcSteps(X,N);this.$scrollAnimation={from:X,to:N,steps:D},clearInterval(this.$timer),te.session.setScrollTop(D.shift()),te.session.$scrollTop=N,this.$timer=setInterval(function(){if(!te.$stopAnimation)return te.session?void(D.length?(te.session.setScrollTop(D.shift()),te.session.$scrollTop=N):null!=N?(te.session.$scrollTop=-1,te.session.setScrollTop(N),N=null):Y()):clearInterval(te.$timer);Y()},10)}}function Y(){te.$timer=clearInterval(te.$timer),te.$scrollAnimation=null,te.$stopAnimation=!1,V&&V()}},$.prototype.scrollToY=function(X){this.scrollTop!==X&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=X)},$.prototype.scrollToX=function(X){this.scrollLeft!==X&&(this.scrollLeft=X),this.$loop.schedule(this.CHANGE_H_SCROLL)},$.prototype.scrollTo=function(X,V){this.session.setScrollTop(V),this.session.setScrollLeft(X)},$.prototype.scrollBy=function(X,V){V&&this.session.setScrollTop(this.session.getScrollTop()+V),X&&this.session.setScrollLeft(this.session.getScrollLeft()+X)},$.prototype.isScrollableBy=function(X,V){if(V<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||V>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||X<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||X>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},$.prototype.pixelToScreenCoordinates=function(X,V){var N;if(this.$hasCssTransforms){N={top:0,left:0};var te=this.$fontMetrics.transformCoordinates([X,V]);X=te[1]-this.gutterWidth-this.margin.left,V=te[0]}else N=this.scroller.getBoundingClientRect();var G=X+this.scrollLeft-N.left-this.$padding,D=G/this.characterWidth,Y=Math.floor((V+this.scrollTop-N.top)/this.lineHeight),ee=this.$blockCursor?Math.floor(D):Math.round(D);return{row:Y,column:ee,side:D-ee>0?1:-1,offsetX:G}},$.prototype.screenToTextCoordinates=function(X,V){var N;if(this.$hasCssTransforms){N={top:0,left:0};var te=this.$fontMetrics.transformCoordinates([X,V]);X=te[1]-this.gutterWidth-this.margin.left,V=te[0]}else N=this.scroller.getBoundingClientRect();var G=X+this.scrollLeft-N.left-this.$padding,D=G/this.characterWidth,Y=this.$blockCursor?Math.floor(D):Math.round(D),ee=Math.floor((V+this.scrollTop-N.top)/this.lineHeight);return this.session.screenToDocumentPosition(ee,Math.max(Y,0),G)},$.prototype.textToScreenCoordinates=function(X,V){var N=this.scroller.getBoundingClientRect(),te=this.session.documentToScreenPosition(X,V),G=this.$padding+(this.session.$bidiHandler.isBidiRow(te.row,X)?this.session.$bidiHandler.getPosLeft(te.column):Math.round(te.column*this.characterWidth));return{pageX:N.left+G-this.scrollLeft,pageY:N.top+te.row*this.lineHeight-this.scrollTop}},$.prototype.visualizeFocus=function(){re.addCssClass(this.container,"ace_focus")},$.prototype.visualizeBlur=function(){re.removeCssClass(this.container,"ace_focus")},$.prototype.showComposition=function(X){this.$composition=X,X.cssText||(X.cssText=this.textarea.style.cssText),null==X.useTextareaForIME&&(X.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(re.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):X.markerId=this.session.addMarker(X.markerRange,"ace_composition_marker","text")},$.prototype.setCompositionText=function(X){var V=this.session.selection.cursor;this.addToken(X,"composition_placeholder",V.row,V.column),this.$moveTextAreaToCursor()},$.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),re.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var X=this.session.selection.cursor;this.removeExtraToken(X.row,X.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},$.prototype.setGhostText=function(X,V){var N=this.session.selection.cursor,te=V||{row:N.row,column:N.column};this.removeGhostText();var G=X.split("\n");this.addToken(G[0],"ghost_text",te.row,te.column),this.$ghostText={text:X,position:{row:te.row,column:te.column}},G.length>1&&(this.$ghostTextWidget={text:G.slice(1).join("\n"),row:te.row,column:te.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget))},$.prototype.removeGhostText=function(){if(this.$ghostText){var X=this.$ghostText.position;this.removeExtraToken(X.row,X.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},$.prototype.addToken=function(X,V,N,te){var G=this.session;G.bgTokenizer.lines[N]=null;var D={type:V,value:X},Y=G.getTokens(N);if(null!=te&&Y.length)for(var ee=0,fe=0;fe<Y.length;fe++){var _e=Y[fe];if(te<=(ee+=_e.value.length)){var we=_e.value.length-(ee-te),ke=_e.value.slice(0,we),Ce=_e.value.slice(we);Y.splice(fe,1,{type:_e.type,value:ke},D,{type:_e.type,value:Ce});break}}else Y.push(D);this.updateLines(N,N)},$.prototype.removeExtraToken=function(X,V){this.session.bgTokenizer.lines[X]=null,this.updateLines(X,X)},$.prototype.setTheme=function(X,V){var N=this;function G(D){if(N.$themeId!=X)return V&&V();if(!D||!D.cssClass)throw new Error("couldn't load module "+X+" or it didn't call define");D.$id&&(N.$themeId=D.$id),re.importCssString(D.cssText,D.cssClass,N.container),N.theme&&re.removeCssClass(N.container,N.theme.cssClass);var Y="padding"in D?D.padding:"padding"in(N.theme||{})?4:N.$padding;N.$padding&&Y!=N.$padding&&N.setPadding(Y),N.$theme=D.cssClass,N.theme=D,re.addCssClass(N.container,D.cssClass),re.setCssClass(N.container,"ace_dark",D.isDark),N.$size&&(N.$size.width=0,N.$updateSizeAsync()),N._dispatchEvent("themeLoaded",{theme:D}),V&&V()}this.$themeId=X,N._dispatchEvent("themeChange",{theme:X}),X&&"string"!=typeof X?G(X):E.loadModule(["theme",X||this.$options.theme.initialValue],G)},$.prototype.getTheme=function(){return this.$themeId},$.prototype.setStyle=function(X,V){re.setCssClass(this.container,X,!1!==V)},$.prototype.unsetStyle=function(X){re.removeCssClass(this.container,X)},$.prototype.setCursorStyle=function(X){re.setStyle(this.scroller.style,"cursor",X)},$.prototype.setMouseCursor=function(X){re.setStyle(this.scroller.style,"cursor",X)},$.prototype.attachToShadowRoot=function(){re.importCssString(L,"ace_editor.css",this.container)},$.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},$.prototype.$updateCustomScrollbar=function(X){var V=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,!0===X?(this.scrollBarV=new x(this.container,this),this.scrollBarH=new w(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(N){V.$scrollAnimation||V.session.setScrollTop(N.data-V.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(N){V.$scrollAnimation||V.session.setScrollLeft(N.data-V.scrollMargin.left)}),this.$scrollDecorator=new W(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new v(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.addEventListener("scroll",function(N){V.$scrollAnimation||V.session.setScrollTop(N.data-V.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(N){V.$scrollAnimation||V.session.setScrollLeft(N.data-V.scrollMargin.left)}))},$.prototype.$addResizeObserver=function(){if(window.ResizeObserver&&!this.$resizeObserver){var X=this;this.$resizeTimer=B.delayedCall(function(){X.destroyed||X.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(V){var te=V[0].contentRect.height;Math.abs(X.$size.width-V[0].contentRect.width)>1||Math.abs(X.$size.height-te)>1?X.$resizeTimer.delay():X.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},$}();P.prototype.CHANGE_CURSOR=1,P.prototype.CHANGE_MARKER=2,P.prototype.CHANGE_GUTTER=4,P.prototype.CHANGE_SCROLL=8,P.prototype.CHANGE_LINES=16,P.prototype.CHANGE_TEXT=32,P.prototype.CHANGE_SIZE=64,P.prototype.CHANGE_MARKER_BACK=128,P.prototype.CHANGE_MARKER_FRONT=256,P.prototype.CHANGE_FULL=512,P.prototype.CHANGE_H_SCROLL=1024,P.prototype.$changes=0,P.prototype.$padding=null,P.prototype.$frozen=!1,P.prototype.STEPS=8,T.implement(P.prototype,U),E.defineOptions(P.prototype,"renderer",{useResizeObserver:{set:function($){!$&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):$&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function($){this.$textLayer.setShowInvisibles($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function($){"number"==typeof $&&(this.$printMarginColumn=$),this.$showPrintMargin=!!$,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function($){this.$gutter.style.display=$?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function($){this.$gutterLayer.$useSvgGutterIcons=$},initialValue:!1},showFoldedAnnotations:{set:function($){this.$gutterLayer.$showFoldedAnnotations=$},initialValue:!1},fadeFoldWidgets:{set:function($){re.setCssClass(this.$gutter,"ace_fade-fold-widgets",$)},initialValue:!1},showFoldWidgets:{set:function($){this.$gutterLayer.setShowFoldWidgets($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function($){this.$textLayer.setDisplayIndentGuides($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function($){1==this.$textLayer.setHighlightIndentGuides($)?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function($){this.$gutterLayer.setHighlightGutterLine($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function($){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function($){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function($){"number"==typeof $&&($+="px"),this.container.style.fontSize=$,this.updateFontSize()},initialValue:12},fontFamily:{set:function($){this.container.style.fontFamily=$,this.updateFontSize()}},maxLines:{set:function($){this.updateFull()}},minLines:{set:function($){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function($){this.updateFull()},initialValue:0},scrollPastEnd:{set:function($){this.$scrollPastEnd!=($=+$||0)&&(this.$scrollPastEnd=$,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function($){this.$gutterLayer.$fixedWidth=!!$,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function($){this.$updateCustomScrollbar($)},initialValue:!1},theme:{set:function($){this.setTheme($)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!H.isMobile&&!H.isIE}}),ie.VirtualRenderer=P}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(Q,ie,xe){"use strict";var T=Q("../lib/oop"),re=Q("../lib/net"),B=Q("../lib/event_emitter").EventEmitter,E=Q("../config");function g(p){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(E.get("loadWorkerFromBlob")){var v=function M(p){var v="importScripts('"+re.qualifyURL(p)+"');";try{return new Blob([v],{type:"application/javascript"})}catch{var x=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return x.append(v),x.getBlob("application/javascript")}}(p),x=(window.URL||window.webkitURL).createObjectURL(v);return new Worker(x)}return new Worker(p)}var m=function(p){p.postMessage||(p=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=p,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){T.implement(this,B),this.$createWorkerFromOldConfig=function(p,v,w,x,A){if(Q.nameToUrl&&!Q.toUrl&&(Q.toUrl=Q.nameToUrl),E.get("packaged")||!Q.toUrl)x=x||E.moduleUrl(v,"worker");else{var R=this.$normalizePath;x=x||R(Q.toUrl("ace/worker/worker.js",null,"_"));var U={};p.forEach(function(L){U[L]=R(Q.toUrl(L,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=g(x),A&&this.send("importScripts",A),this.$worker.postMessage({init:!0,tlns:U,module:v,classname:w}),this.$worker},this.onMessage=function(p){var v=p.data;switch(v.type){case"event":this._signal(v.name,{data:v.data});break;case"call":var w=this.callbacks[v.id];w&&(w(v.data),delete this.callbacks[v.id]);break;case"error":this.reportError(v.data);break;case"log":window.console&&console.log&&console.log.apply(console,v.data)}},this.reportError=function(p){window.console&&console.error&&console.error(p)},this.$normalizePath=function(p){return re.qualifyURL(p)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(p){p.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(p,v){this.$worker.postMessage({command:p,args:v})},this.call=function(p,v,w){if(w){var x=this.callbackId++;this.callbacks[x]=w,v.push(x)}this.send(p,v)},this.emit=function(p,v){try{v.data&&v.data.err&&(v.data.err={message:v.data.err.message,stack:v.data.err.stack,code:v.data.err.code}),this.$worker&&this.$worker.postMessage({event:p,data:{data:v.data}})}catch(w){console.error(w.stack)}},this.attachToDocument=function(p){this.$doc&&this.terminate(),this.$doc=p,this.call("setValue",[p.getValue()]),p.on("change",this.changeListener,!0)},this.changeListener=function(p){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),this.deltaQueue.push(p.start,"insert"==p.action?p.lines:p.end)},this.$sendDeltaQueue=function(){var p=this.deltaQueue;!p||(this.deltaQueue=null,p.length>50&&p.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:p}))}}).call(m.prototype),ie.UIWorkerClient=function(p,v,w){var x=null,A=!1,R=Object.create(B),U=[],L=new m({messageBuffer:U,terminate:function(){},postMessage:function(H){U.push(H),x&&(A?setTimeout(W):W())}});L.setEmitSync=function(H){A=H};var W=function(){var H=U.shift();H.command?x[H.command].apply(x,H.args):H.event&&R._signal(H.event,H.data)};return R.postMessage=function(H){L.onMessage({data:H})},R.callback=function(H,P){this.postMessage({type:"call",id:P,data:H})},R.emit=function(H,P){this.postMessage({type:"event",name:H,data:P})},E.loadModule(["worker",v],function(H){for(x=new H[w](R);U.length;)W()}),L},ie.WorkerClient=m,ie.createWorker=g}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(Q,ie,xe){"use strict";var T=Q("./range").Range,re=Q("./lib/event_emitter").EventEmitter,B=Q("./lib/oop"),E=function(){function M(g,m,_,p,v,w){var x=this;this.length=m,this.session=g,this.doc=g.getDocument(),this.mainClass=v,this.othersClass=w,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=p,this.$onCursorChange=function(){setTimeout(function(){x.onCursorChange()})},this.$pos=_;var A=g.getUndoManager().$undoStack||g.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=A.length,this.setup(),g.selection.on("changeCursor",this.$onCursorChange)}return M.prototype.setup=function(){var g=this,m=this.doc,_=this.session;this.selectionBefore=_.selection.toJSON(),_.selection.inMultiSelectMode&&_.selection.toSingleRange(),this.pos=m.createAnchor(this.$pos.row,this.$pos.column);var p=this.pos;p.$insertRight=!0,p.detach(),p.markerId=_.addMarker(new T(p.row,p.column,p.row,p.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(v){var w=m.createAnchor(v.row,v.column);w.$insertRight=!0,w.detach(),g.others.push(w)}),_.setUndoSelect(!1)},M.prototype.showOtherMarkers=function(){if(!this.othersActive){var g=this.session,m=this;this.othersActive=!0,this.others.forEach(function(_){_.markerId=g.addMarker(new T(_.row,_.column,_.row,_.column+m.length),m.othersClass,null,!1)})}},M.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var g=0;g<this.others.length;g++)this.session.removeMarker(this.others[g].markerId)}},M.prototype.onUpdate=function(g){if(this.$updating)return this.updateAnchors(g);var m=g;if(m.start.row===m.end.row&&m.start.row===this.pos.row){this.$updating=!0;var _="insert"===g.action?m.end.column-m.start.column:m.start.column-m.end.column,p=m.start.column>=this.pos.column&&m.start.column<=this.pos.column+this.length+1,v=m.start.column-this.pos.column;if(this.updateAnchors(g),p&&(this.length+=_),p&&!this.session.$fromUndo)if("insert"===g.action)for(var w=this.others.length-1;w>=0;w--)this.doc.insertMergedLines(A={row:(x=this.others[w]).row,column:x.column+v},g.lines);else if("remove"===g.action)for(w=this.others.length-1;w>=0;w--){var x,A;this.doc.remove(new T((A={row:(x=this.others[w]).row,column:x.column+v}).row,A.column,A.row,A.column-_))}this.$updating=!1,this.updateMarkers()}},M.prototype.updateAnchors=function(g){this.pos.onChange(g);for(var m=this.others.length;m--;)this.others[m].onChange(g);this.updateMarkers()},M.prototype.updateMarkers=function(){if(!this.$updating){var g=this,m=this.session,_=function(v,w){m.removeMarker(v.markerId),v.markerId=m.addMarker(new T(v.row,v.column,v.row,v.column+g.length),w,null,!1)};_(this.pos,this.mainClass);for(var p=this.others.length;p--;)_(this.others[p],this.othersClass)}},M.prototype.onCursorChange=function(g){if(!this.$updating&&this.session){var m=this.session.selection.getCursor();m.row===this.pos.row&&m.column>=this.pos.column&&m.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",g)):(this.hideOtherMarkers(),this._emit("cursorLeave",g))}},M.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},M.prototype.cancel=function(){if(-1!==this.$undoStackDepth){for(var g=this.session.getUndoManager(),m=(g.$undoStack||g.$undostack).length-this.$undoStackDepth,_=0;_<m;_++)g.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},M}();B.implement(E.prototype,re),ie.PlaceHolder=E}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(Q,ie,xe){var T=Q("../lib/event"),re=Q("../lib/useragent");function B(M,g){return M.row==g.row&&M.column==g.column}ie.onMouseDown=function E(M){var g=M.domEvent,m=g.altKey,_=g.shiftKey,p=g.ctrlKey,v=M.getAccelKey(),w=M.getButton();if(p&&re.isMac&&(w=g.button),M.editor.inMultiSelectMode&&2==w)M.editor.textInput.onContextMenu(M.domEvent);else if(p||m||v){if(0===w){var te,x=M.editor,A=x.selection,R=x.inMultiSelectMode,U=M.getDocumentPosition(),L=A.getCursor(),W=M.inSelection()||A.isEmpty()&&B(U,L),H=M.x,P=M.y,X=x.session,V=x.renderer.pixelToScreenCoordinates(H,P),N=V;if(x.$mouseHandler.$enableJumpToDef)p&&m||v&&m?te=_?"block":"add":m&&x.$blockSelectEnabled&&(te="block");else if(v&&!m){if(te="add",!R&&_)return}else m&&x.$blockSelectEnabled&&(te="block");if(te&&re.isMac&&g.ctrlKey&&x.$mouseHandler.cancelContextMenu(),"add"==te){if(!R&&W)return;if(!R){var G=A.toOrientedRange();x.addSelectionMarker(G)}var D=A.rangeList.rangeAtPoint(U);x.inVirtualSelectionMode=!0,_&&(D=null,x.removeSelectionMarker(G=A.ranges[0]||G)),x.once("mouseup",function(){var Ce=A.toOrientedRange();D&&Ce.isEmpty()&&B(D.cursor,Ce.cursor)?A.substractPoint(Ce.cursor):(_?A.substractPoint(G.cursor):G&&(x.removeSelectionMarker(G),A.addRange(G)),A.addRange(Ce)),x.inVirtualSelectionMode=!1})}else if("block"==te){M.stop(),x.inVirtualSelectionMode=!0;var Y,ee=[],fe=function(){var Ce=x.renderer.pixelToScreenCoordinates(H,P),We=X.screenToDocumentPosition(Ce.row,Ce.column,Ce.offsetX);B(N,Ce)&&B(We,A.lead)||(N=Ce,x.selection.moveToPosition(We),x.renderer.scrollCursorIntoView(),x.removeSelectionMarkers(ee),ee=A.rectangularRangeBlock(N,V),x.$mouseHandler.$clickSelection&&1==ee.length&&ee[0].isEmpty()&&(ee[0]=x.$mouseHandler.$clickSelection.clone()),ee.forEach(x.addSelectionMarker,x),x.updateSelectionMarkers())};R&&!v?A.toSingleRange():!R&&v&&(Y=A.toOrientedRange(),x.addSelectionMarker(Y)),_?V=X.documentToScreenPosition(A.lead):A.moveToPosition(U),N={row:-1,column:-1};var we=fe;T.capture(x.container,function(Ce){H=Ce.clientX,P=Ce.clientY},function(Ce){fe(),clearInterval(ke),x.removeSelectionMarkers(ee),ee.length||(ee=[A.toOrientedRange()]),Y&&(x.removeSelectionMarker(Y),A.toSingleRange(Y));for(var We=0;We<ee.length;We++)A.addRange(ee[We]);x.inVirtualSelectionMode=!1,x.$mouseHandler.$clickSelection=null});var ke=setInterval(function(){we()},20);return M.preventDefault()}}}else 0===w&&M.editor.inMultiSelectMode&&M.editor.exitMultiSelectMode()}}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(Q,ie,xe){ie.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(re){re.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(re){re.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(re){re.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(re){re.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(re){re.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(re){re.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(re){re.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(re){re.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(re){re.multiSelect.rangeCount>1?re.multiSelect.joinSelections():re.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(re){re.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(re){re.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(re){re.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],ie.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(re){re.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(re){return re&&re.inMultiSelectMode}}];var T=Q("../keyboard/hash_handler").HashHandler;ie.keyboardHandler=new T(ie.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(Q,ie,xe){var T=Q("./range_list").RangeList,re=Q("./range").Range,B=Q("./selection").Selection,E=Q("./mouse/multi_select_handler").onMouseDown,M=Q("./lib/event"),g=Q("./lib/lang"),m=Q("./commands/multi_select_commands");ie.commands=m.defaultCommands.concat(m.multiSelectCommands);var p=new(0,Q("./search").Search),w=Q("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(w.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(L,W){if(L){if(!this.inMultiSelectMode&&0===this.rangeCount){var H=this.toOrientedRange();if(this.rangeList.add(H),this.rangeList.add(L),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),W||this.fromOrientedRange(L);this.rangeList.removeAll(),this.rangeList.add(H),this.$onAddRange(H)}L.cursor||(L.cursor=L.end);var P=this.rangeList.add(L);return this.$onAddRange(L),P.length&&this.$onRemoveRange(P),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),W||this.fromOrientedRange(L)}},this.toSingleRange=function(L){L=L||this.ranges[0];var W=this.rangeList.removeAll();W.length&&this.$onRemoveRange(W),L&&this.fromOrientedRange(L)},this.substractPoint=function(L){var W=this.rangeList.substractPoint(L);if(W)return this.$onRemoveRange(W),W[0]},this.mergeOverlappingRanges=function(){var L=this.rangeList.merge();L.length&&this.$onRemoveRange(L)},this.$onAddRange=function(L){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(L),this._signal("addRange",{range:L})},this.$onRemoveRange=function(L){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var W=this.rangeList.ranges.pop();L.push(W),this.rangeCount=0}for(var H=L.length;H--;){var P=this.ranges.indexOf(L[H]);this.ranges.splice(P,1)}this._signal("removeRange",{ranges:L}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(W=W||this.ranges[0])&&!W.isEqual(this.getRange())&&this.fromOrientedRange(W)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new T,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var L=this.ranges.length?this.ranges:[this.getRange()],W=[],H=0;H<L.length;H++){var P=L[H],$=P.start.row,X=P.end.row;if($===X)W.push(P.clone());else{for(W.push(new re($,P.start.column,$,this.session.getLine($).length));++$<X;)W.push(this.getLineRange($,!0));W.push(new re(X,0,X,P.end.column))}0==H&&!this.isBackwards()&&(W=W.reverse())}for(this.toSingleRange(),H=W.length;H--;)this.addRange(W[H])},this.joinSelections=function(){var L=this.rangeList.ranges,W=L[L.length-1],H=re.fromPoints(L[0].start,W.end);this.toSingleRange(),this.setSelectionRange(H,W.cursor==W.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var L=this.rangeList.ranges,W=L[L.length-1],H=re.fromPoints(L[0].start,W.end);this.toSingleRange(),this.setSelectionRange(H,W.cursor==W.start)}else{var P=this.session.documentToScreenPosition(this.cursor),$=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(P,$).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(L,W,H){var P=[],$=L.column<W.column;if($)var X=L.column,V=W.column,N=L.offsetX,te=W.offsetX;else X=W.column,V=L.column,N=W.offsetX,te=L.offsetX;var G=L.row<W.row;if(G)var D=L.row,Y=W.row;else D=W.row,Y=L.row;X<0&&(X=0),D<0&&(D=0),D==Y&&(H=!0);for(var ee,fe=D;fe<=Y;fe++){var _e=re.fromPoints(this.session.screenToDocumentPosition(fe,X,N),this.session.screenToDocumentPosition(fe,V,te));if(_e.isEmpty()){if(ee&&A(_e.end,ee))break;ee=_e.end}_e.cursor=$?_e.start:_e.end,P.push(_e)}if(G&&P.reverse(),!H){for(var we=P.length-1;P[we].isEmpty()&&we>0;)we--;if(we>0)for(var ke=0;P[ke].isEmpty();)ke++;for(var Ce=we;Ce>=ke;Ce--)P[Ce].isEmpty()&&P.splice(Ce,1)}return P}}.call(B.prototype);var x=Q("./editor").Editor;function A(L,W){return L.row==W.row&&L.column==W.column}function R(L){L.$multiselectOnSessionChange||(L.$onAddRange=L.$onAddRange.bind(L),L.$onRemoveRange=L.$onRemoveRange.bind(L),L.$onMultiSelect=L.$onMultiSelect.bind(L),L.$onSingleSelect=L.$onSingleSelect.bind(L),L.$multiselectOnSessionChange=ie.onSessionChange.bind(L),L.$checkMultiselectChange=L.$checkMultiselectChange.bind(L),L.$multiselectOnSessionChange(L),L.on("changeSession",L.$multiselectOnSessionChange),L.on("mousedown",E),L.commands.addCommands(m.defaultCommands),function U(L){if(L.textInput){var W=L.textInput.getElement(),H=!1;M.addListener(W,"keydown",function($){L.$blockSelectEnabled&&18==$.keyCode&&!($.ctrlKey||$.shiftKey||$.metaKey)?H||(L.renderer.setMouseCursor("crosshair"),H=!0):H&&P()},L),M.addListener(W,"keyup",P,L),M.addListener(W,"blur",P,L)}function P($){H&&(L.renderer.setMouseCursor(""),H=!1)}}(L))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(L){L.cursor||(L.cursor=L.end);var W=this.getSelectionStyle();return L.marker=this.session.addMarker(L,"ace_selection",W),this.session.$selectionMarkers.push(L),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,L},this.removeSelectionMarker=function(L){if(L.marker){this.session.removeMarker(L.marker);var W=this.session.$selectionMarkers.indexOf(L);-1!=W&&this.session.$selectionMarkers.splice(W,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(L){for(var W=this.session.$selectionMarkers,H=L.length;H--;){var P=L[H];if(P.marker){this.session.removeMarker(P.marker);var $=W.indexOf(P);-1!=$&&W.splice($,1)}}this.session.selectionMarkerCount=W.length},this.$onAddRange=function(L){this.addSelectionMarker(L.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(L){this.removeSelectionMarkers(L.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(L){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(m.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(L){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(m.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(L){var W=L.command,H=L.editor;if(H.multiSelect){if(W.multiSelectAction)"forEach"==W.multiSelectAction?P=H.forEachSelection(W,L.args):"forEachLine"==W.multiSelectAction?P=H.forEachSelection(W,L.args,!0):"single"==W.multiSelectAction?(H.exitMultiSelectMode(),P=W.exec(H,L.args||{})):P=W.multiSelectAction(H,L.args||{});else{var P=W.exec(H,L.args||{});H.multiSelect.addRange(H.multiSelect.toOrientedRange()),H.multiSelect.mergeOverlappingRanges()}return P}},this.forEachSelection=function(L,W,H){if(!this.inVirtualSelectionMode){var G,$=1==H||H&&H.$byLines,X=this.session,V=this.selection,te=(H&&H.keepOrder?V:V.rangeList).ranges;if(!te.length)return L.exec?L.exec(this,W||{}):L(this,W||{});var D=V._eventRegistry;V._eventRegistry={};var Y=new B(X);this.inVirtualSelectionMode=!0;for(var ee=te.length;ee--;){if($)for(;ee>0&&te[ee].start.row==te[ee-1].end.row;)ee--;Y.fromOrientedRange(te[ee]),Y.index=ee,this.selection=X.selection=Y;var fe=L.exec?L.exec(this,W||{}):L(this,W||{});!G&&void 0!==fe&&(G=fe),Y.toOrientedRange(te[ee])}Y.detach(),this.selection=X.selection=V,this.inVirtualSelectionMode=!1,V._eventRegistry=D,V.mergeOverlappingRanges(),V.ranges[0]&&V.fromOrientedRange(V.ranges[0]);var _e=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),_e&&_e.from==_e.to&&this.renderer.animateScrolling(_e.from),G}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var L="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var W=this.multiSelect.rangeList.ranges,H=[],P=0;P<W.length;P++)H.push(this.session.getTextRange(W[P]));var $=this.session.getDocument().getNewLineCharacter();(L=H.join($)).length==(H.length-1)*$.length&&(L="")}else this.selection.isEmpty()||(L=this.session.getTextRange(this.getSelectionRange()));return L},this.$checkMultiselectChange=function(L,W){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var H=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&W==this.multiSelect.anchor)return;var P=W==this.multiSelect.anchor?H.cursor==H.start?H.end:H.start:H.cursor;P.row!=W.row||this.session.$clipPositionToDocument(P.row,P.column).column!=W.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(L,W,H){if((W=W||{}).needle=L||W.needle,null==W.needle){var P=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();W.needle=this.session.getTextRange(P)}this.$search.set(W);var $=this.$search.findAll(this.session);if(!$.length)return 0;var X=this.multiSelect;H||X.toSingleRange($[0]);for(var V=$.length;V--;)X.addRange($[V],!0);return P&&X.rangeList.rangeAtPoint(P.start)&&X.addRange(P,!0),$.length},this.selectMoreLines=function(L,W){var H=this.selection.toOrientedRange(),P=H.cursor==H.end,$=this.session.documentToScreenPosition(H.cursor);this.selection.$desiredColumn&&($.column=this.selection.$desiredColumn);var te,X=this.session.screenToDocumentPosition($.row+L,$.column);if(H.isEmpty())var N=X;else{var V=this.session.documentToScreenPosition(P?H.end:H.start);N=this.session.screenToDocumentPosition(V.row+L,V.column)}if(P?(te=re.fromPoints(X,N)).cursor=te.start:(te=re.fromPoints(N,X)).cursor=te.end,te.desiredColumn=$.column,this.selection.inMultiSelectMode){if(W)var G=H.cursor}else this.selection.addRange(H);this.selection.addRange(te),G&&this.selection.substractPoint(G)},this.transposeSelections=function(L){for(var W=this.session,H=W.multiSelect,P=H.ranges,$=P.length;$--;)if((X=P[$]).isEmpty()){var V=W.getWordRange(X.start.row,X.start.column);X.start.row=V.start.row,X.start.column=V.start.column,X.end.row=V.end.row,X.end.column=V.end.column}H.mergeOverlappingRanges();var N=[];for($=P.length;$--;)N.unshift(W.getTextRange(X=P[$]));for(L<0?N.unshift(N.pop()):N.push(N.shift()),$=P.length;$--;){var X;V=(X=P[$]).clone(),W.replace(X,N[$]),X.start.row=V.start.row,X.start.column=V.start.column}H.fromOrientedRange(H.ranges[0])},this.selectMore=function(L,W,H){var P=this.session,X=P.multiSelect.toOrientedRange();if(!X.isEmpty()||((X=P.getWordRange(X.start.row,X.start.column)).cursor=-1==L?X.start:X.end,this.multiSelect.addRange(X),!H)){var V=P.getTextRange(X),N=function v(L,W,H){return p.$options.wrap=!0,p.$options.needle=W,p.$options.backwards=-1==H,p.find(L)}(P,V,L);N&&(N.cursor=-1==L?N.start:N.end,this.session.unfold(N),this.multiSelect.addRange(N),this.renderer.scrollCursorIntoView(null,.5)),W&&this.multiSelect.substractPoint(X.cursor)}},this.alignCursors=function(){var L=this.session,W=L.multiSelect,H=W.ranges,P=-1,$=H.filter(function(we){if(we.cursor.row==P)return!0;P=we.cursor.row});if(H.length&&$.length!=H.length-1){$.forEach(function(we){W.substractPoint(we.cursor)});var ee=0,fe=1/0,_e=H.map(function(we){var ke=we.cursor,We=L.getLine(ke.row).substr(ke.column).search(/\S/g);return-1==We&&(We=0),ke.column>ee&&(ee=ke.column),We<fe&&(fe=We),We});H.forEach(function(we,ke){var Ce=we.cursor,We=ee-Ce.column,Te=_e[ke]-fe;We>Te?L.insert(Ce,g.stringRepeat(" ",We-Te)):L.remove(new re(Ce.row,Ce.column,Ce.row,Ce.column-We+Te)),we.start.column=we.end.column=ee,we.start.row=we.end.row=Ce.row,we.cursor=we.end}),W.fromOrientedRange(H[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var X=this.selection.getRange(),V=X.start.row,N=X.end.row,te=V==N;if(te){var D,G=this.session.getLength();do{D=this.session.getLine(N)}while(/[=:]/.test(D)&&++N<G);do{D=this.session.getLine(V)}while(/[=:]/.test(D)&&--V>0);V<0&&(V=0),N>=G&&(N=G-1)}var Y=this.session.removeFullLines(V,N);Y=this.$reAlignText(Y,te),this.session.insert({row:V,column:0},Y.join("\n")+"\n"),te||(X.start.column=0,X.end.column=Y[Y.length-1].length),this.selection.setRange(X)}},this.$reAlignText=function(L,W){var $,X,V,H=!0,P=!0;return L.map(function(Y){var ee=Y.match(/(\s*)(.*?)(\s*)([=:].*)/);return ee?null==$?($=ee[1].length,X=ee[2].length,V=ee[3].length,ee):($+X+V!=ee[1].length+ee[2].length+ee[3].length&&(P=!1),$!=ee[1].length&&(H=!1),$>ee[1].length&&($=ee[1].length),X<ee[2].length&&(X=ee[2].length),V>ee[3].length&&(V=ee[3].length),ee):[Y]}).map(W?te:H?P?function G(Y){return Y[2]?N($+X-Y[2].length)+Y[2]+N(V)+Y[4].replace(/^([=:])\s+/,"$1 "):Y[0]}:te:function D(Y){return Y[2]?N($)+Y[2]+N(V)+Y[4].replace(/^([=:])\s+/,"$1 "):Y[0]});function N(Y){return g.stringRepeat(" ",Y)}function te(Y){return Y[2]?N($)+Y[2]+N(X-Y[2].length+V)+Y[4].replace(/^([=:])\s+/,"$1 "):Y[0]}}}).call(x.prototype),ie.onSessionChange=function(L){var W=L.session;W&&!W.multiSelect&&(W.$selectionMarkers=[],W.selection.$initRangeList(),W.multiSelect=W.selection),this.multiSelect=W&&W.multiSelect;var H=L.oldSession;H&&(H.multiSelect.off("addRange",this.$onAddRange),H.multiSelect.off("removeRange",this.$onRemoveRange),H.multiSelect.off("multiSelect",this.$onMultiSelect),H.multiSelect.off("singleSelect",this.$onSingleSelect),H.multiSelect.lead.off("change",this.$checkMultiselectChange),H.multiSelect.anchor.off("change",this.$checkMultiselectChange)),W&&(W.multiSelect.on("addRange",this.$onAddRange),W.multiSelect.on("removeRange",this.$onRemoveRange),W.multiSelect.on("multiSelect",this.$onMultiSelect),W.multiSelect.on("singleSelect",this.$onSingleSelect),W.multiSelect.lead.on("change",this.$checkMultiselectChange),W.multiSelect.anchor.on("change",this.$checkMultiselectChange)),W&&this.inMultiSelectMode!=W.selection.inMultiSelectMode&&(W.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},ie.MultiSelect=R,Q("./config").defineOptions(x.prototype,"editor",{enableMultiselect:{set:function(L){R(this),L?this.on("mousedown",E):this.off("mousedown",E)},value:!0},enableBlockSelect:{set:function(L){this.$blockSelectEnabled=L},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(Q,ie,xe){"use strict";var T=Q("../../range").Range,re=ie.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(B,E,M){var g=B.getLine(M);return this.foldingStartMarker.test(g)?"start":"markbeginend"==E&&this.foldingStopMarker&&this.foldingStopMarker.test(g)?"end":""},this.getFoldWidgetRange=function(B,E,M){return null},this.indentationBlock=function(B,E,M){var g=/\S/,m=B.getLine(E),_=m.search(g);if(-1!=_){for(var p=M||m.length,v=B.getLength(),w=E,x=E;++E<v;){var A=B.getLine(E).search(g);if(-1!=A){if(A<=_){var R=B.getTokenAt(E,0);if(!R||"string"!==R.type)break}x=E}}if(x>w){var U=B.getLine(x).length;return new T(w,p,x,U)}}},this.openingBracketBlock=function(B,E,M,g,m){var _={row:M,column:g+1},p=B.$findClosingBracket(E,_,m);if(p){var v=B.foldWidgets[p.row];return null==v&&(v=B.getFoldWidget(p.row)),"start"==v&&p.row>_.row&&(p.row--,p.column=B.getLine(p.row).length),T.fromPoints(_,p)}},this.closingBracketBlock=function(B,E,M,g,m){var _={row:M,column:g},p=B.$findOpeningBracket(E,_);if(p)return p.column++,_.column--,T.fromPoints(p,_)}}).call(re.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(Q,ie,xe){"use strict";var T=Q("../line_widgets").LineWidgets,re=Q("../lib/dom"),B=Q("../range").Range,E=Q("../config").nls;ie.showErrorMarker=function(m,_){var p=m.session;p.widgetManager||(p.widgetManager=new T(p),p.widgetManager.attach(m));var v=m.getCursorPosition(),w=v.row,x=p.widgetManager.getWidgetsAtRow(w).filter(function(X){return"errorMarker"==X.type})[0];x?x.destroy():w-=_;var R,A=function g(m,_,p){var v=m.getAnnotations().sort(B.comparePoints);if(v.length){var w=function M(m,_,p){for(var v=0,w=m.length-1;v<=w;){var x=v+w>>1,A=p(_,m[x]);if(A>0)v=x+1;else{if(!(A<0))return x;w=x-1}}return-(v+1)}(v,{row:_,column:-1},B.comparePoints);w<0&&(w=-w-1),w>=v.length?w=p>0?0:v.length-1:0===w&&p<0&&(w=v.length-1);var x=v[w];if(x&&p){if(x.row===_){do{x=v[w+=p]}while(x&&x.row===_);if(!x)return v.slice()}var A=[];_=x.row;do{A[p<0?"unshift":"push"](x),x=v[w+=p]}while(x&&x.row==_);return A.length&&A}}}(p,w,_);if(A){var U=A[0];v.column=(U.pos&&"number"!=typeof U.column?U.pos.sc:U.column)||0,v.row=U.row,R=m.renderer.$gutterLayer.$annotations[v.row]}else{if(x)return;R={text:[E("Looks good!")],className:"ace_ok"}}m.session.unfold(v.row),m.selection.moveToPosition(v);var L={row:v.row,fixedWidth:!0,coverGutter:!0,el:re.createElement("div"),type:"errorMarker"},W=L.el.appendChild(re.createElement("div")),H=L.el.appendChild(re.createElement("div"));H.className="error_widget_arrow "+R.className;var P=m.renderer.$cursorLayer.getPixelPosition(v).left;H.style.left=P+m.renderer.gutterWidth-5+"px",L.el.className="error_widget_wrapper",W.className="error_widget "+R.className,W.innerHTML=R.text.join("<br>"),W.appendChild(re.createElement("div"));var $=function(X,V,N){if(0===V&&("esc"===N||"return"===N))return L.destroy(),{command:"null"}};L.destroy=function(){m.$mouseHandler.isMousePressed||(m.keyBinding.removeKeyboardHandler($),p.widgetManager.removeLineWidget(L),m.off("changeSelection",L.destroy),m.off("changeSession",L.destroy),m.off("mouseup",L.destroy),m.off("change",L.destroy))},m.keyBinding.addKeyboardHandler($),m.on("changeSelection",L.destroy),m.on("changeSession",L.destroy),m.on("mouseup",L.destroy),m.on("change",L.destroy),m.session.widgetManager.addLineWidget(L),L.el.onmousedown=m.focus.bind(m),m.renderer.scrollCursorIntoView(null,.5,{bottom:L.el.offsetHeight})},re.importCssString("\n    .error_widget_wrapper {\n        background: inherit;\n        color: inherit;\n        border:none\n    }\n    .error_widget {\n        border-top: solid 2px;\n        border-bottom: solid 2px;\n        margin: 5px 0;\n        padding: 10px 40px;\n        white-space: pre-wrap;\n    }\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\n        border-color: #ff5a5a\n    }\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\n        border-color: #F1D817\n    }\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\n        border-color: #5a5a5a\n    }\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\n        border-color: #5aaa5a\n    }\n    .error_widget_arrow {\n        position: absolute;\n        border: solid 5px;\n        border-top-color: transparent!important;\n        border-right-color: transparent!important;\n        border-left-color: transparent!important;\n        top: -5px;\n    }\n","error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(Q,ie,xe){"use strict";Q("./loader_build")(ie);var T=Q("./lib/dom"),re=Q("./range").Range,B=Q("./editor").Editor,E=Q("./edit_session").EditSession,M=Q("./undomanager").UndoManager,g=Q("./virtual_renderer").VirtualRenderer;Q("./worker/worker_client"),Q("./keyboard/hash_handler"),Q("./placeholder"),Q("./multi_select"),Q("./mode/folding/fold_mode"),Q("./theme/textmate"),Q("./ext/error_marker"),ie.config=Q("./config"),ie.edit=function(m,_){if("string"==typeof m){var p=m;if(!(m=document.getElementById(p)))throw new Error("ace.edit can't find div #"+p)}if(m&&m.env&&m.env.editor instanceof B)return m.env.editor;var v="";if(m&&/input|textarea/i.test(m.tagName)){var w=m;v=w.value,m=T.createElement("pre"),w.parentNode.replaceChild(m,w)}else m&&(v=m.textContent,m.innerHTML="");var x=ie.createEditSession(v),A=new B(new g(m),x,_),R={document:x,editor:A,onResize:A.resize.bind(A,null)};return w&&(R.textarea=w),A.on("destroy",function(){R.editor.container.env=null}),A.container.env=A.env=R,A},ie.createEditSession=function(m,_){var p=new E(m,_);return p.setUndoManager(new M),p},ie.Range=re,ie.Editor=B,ie.EditSession=E,ie.UndoManager=M,ie.VirtualRenderer=g,ie.version=ie.config.version}),ace.require(["ace/ace"],function(Q){for(var ie in Q&&(Q.config.init(!0),Q.define=ace.define),window.ace||(window.ace=Q),Q)Q.hasOwnProperty(ie)&&(window.ace[ie]=Q[ie]);window.ace.default=window.ace,pn&&(pn.exports=window.ace)})},862:function(pn,Ue){!function(Me){"use strict";function Q(g){return new re(g)}function ie(g){return new Function("d","return {"+g.map(function(m,_){return JSON.stringify(m)+": d["+_+"]"}).join(",")+"}")}function re(g){var m=new RegExp('["'+g+"\n]"),_=g.charCodeAt(0);function p(w){return w.map(v).join(g)}function v(w){return m.test(w)?'"'+w.replace(/\"/g,'""')+'"':w}this.parse=function(w,x){var A,R,U=this.parseRows(w,function(L,W){if(A)return A(L,W-1);R=L,A=x?function xe(g,m){var _=ie(g);return function(p,v){return m(_(p),v,g)}}(L,x):ie(L)});return U.columns=R,U},this.parseRows=function(w,x){var P,$,A={},R={},U=[],L=w.length,W=0,H=0;function X(){if(W>=L)return R;if($)return $=!1,A;var te,N=W;if(34===w.charCodeAt(N)){for(var G=N;G++<L;)if(34===w.charCodeAt(G)){if(34!==w.charCodeAt(G+1))break;++G}return W=G+2,13===(te=w.charCodeAt(G+1))?($=!0,10===w.charCodeAt(G+2)&&++W):10===te&&($=!0),w.slice(N+1,G).replace(/""/g,'"')}for(;W<L;){var D=1;if(10===(te=w.charCodeAt(W++)))$=!0;else if(13===te)$=!0,10===w.charCodeAt(W)&&(++W,++D);else if(te!==_)continue;return w.slice(N,W-D)}return w.slice(N)}for(;(P=X())!==R;){for(var V=[];P!==A&&P!==R;)V.push(P),P=X();x&&null==(V=x(V,H++))||U.push(V)}return U},this.format=function(w,x){return null==x&&(x=function T(g){var m=Object.create(null),_=[];return g.forEach(function(p){for(var v in p)v in m||_.push(m[v]=v)}),_}(w)),[x.map(v).join(g)].concat(w.map(function(A){return x.map(function(R){return v(A[R])}).join(g)})).join("\n")},this.formatRows=function(w){return w.map(p).join("\n")}}Q.prototype=re.prototype;var B=Q(","),E=Q("\t");Me.version="0.1.14",Me.dsv=Q,Me.csv=B,Me.tsv=E}(Ue)},994:function(pn,Ue){!function(Me){"use strict";function Q(He,lt){if((Pt=(He=lt?He.toExponential(lt-1):He.toExponential()).indexOf("e"))<0)return null;var Pt,ct=He.slice(0,Pt);return[ct.length>1?ct[0]+ct.slice(2):ct,+He.slice(Pt+1)]}function ie(He){return(He=Q(Math.abs(He)))?He[1]:NaN}var T;function B(He,lt){var Pt=Q(He,lt);if(!Pt)return He+"";var ct=Pt[0],Vt=Pt[1];return Vt<0?"0."+new Array(-Vt).join("0")+ct:ct.length>Vt+1?ct.slice(0,Vt+1)+"."+ct.slice(Vt+1):ct+new Array(Vt-ct.length+2).join("0")}var M={"":function E(He,lt){e:for(var dn,Pt=(He=He.toPrecision(lt)).length,ct=1,Vt=-1;ct<Pt;++ct)switch(He[ct]){case".":Vt=dn=ct;break;case"0":0===Vt&&(Vt=ct),dn=ct;break;case"e":break e;default:Vt>0&&(Vt=0)}return Vt>0?He.slice(0,Vt)+He.slice(dn+1):He},"%":function(He,lt){return(100*He).toFixed(lt)},b:function(He){return Math.round(He).toString(2)},c:function(He){return He+""},d:function(He){return Math.round(He).toString(10)},e:function(He,lt){return He.toExponential(lt)},f:function(He,lt){return He.toFixed(lt)},g:function(He,lt){return He.toPrecision(lt)},o:function(He){return Math.round(He).toString(8)},p:function(He,lt){return B(100*He,lt)},r:B,s:function re(He,lt){var Pt=Q(He,lt);if(!Pt)return He+"";var ct=Pt[0],Vt=Pt[1],dn=Vt-(T=3*Math.max(-8,Math.min(8,Math.floor(Vt/3))))+1,Zt=ct.length;return dn===Zt?ct:dn>Zt?ct+new Array(dn-Zt+1).join("0"):dn>0?ct.slice(0,dn)+"."+ct.slice(dn):"0."+new Array(1-dn).join("0")+Q(He,Math.max(0,lt+dn-1))[0]},X:function(He){return Math.round(He).toString(16).toUpperCase()},x:function(He){return Math.round(He).toString(16)}},g=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function m(He){return new _(He)}function _(He){if(!(lt=g.exec(He)))throw new Error("invalid format: "+He);var lt,Pt=lt[1]||" ",ct=lt[2]||">",Vt=lt[3]||"-",dn=lt[4]||"",Zt=!!lt[5],dt=lt[6]&&+lt[6],Vn=!!lt[7],Di=lt[8]&&+lt[8].slice(1),Gi=lt[9]||"";"n"===Gi?(Vn=!0,Gi="g"):M[Gi]||(Gi=""),(Zt||"0"===Pt&&"="===ct)&&(Zt=!0,Pt="0",ct="="),this.fill=Pt,this.align=ct,this.sign=Vt,this.symbol=dn,this.zero=Zt,this.width=dt,this.comma=Vn,this.precision=Di,this.type=Gi}_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var p=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function v(He){return He}function w(He){var lt=He.grouping&&He.thousands?function xe(He,lt){return function(Pt,ct){for(var Vt=Pt.length,dn=[],Zt=0,dt=He[0],Vn=0;Vt>0&&dt>0&&(Vn+dt+1>ct&&(dt=Math.max(1,ct-Vn)),dn.push(Pt.substring(Vt-=dt,Vt+dt)),!((Vn+=dt+1)>ct));)dt=He[Zt=(Zt+1)%He.length];return dn.reverse().join(lt)}}(He.grouping,He.thousands):v,Pt=He.currency,ct=He.decimal;function Vt(Zt){var dt=(Zt=m(Zt)).fill,Vn=Zt.align,Di=Zt.sign,Gi=Zt.symbol,hr=Zt.zero,Yt=Zt.width,Je=Zt.comma,Tt=Zt.precision,pt=Zt.type,Qt="$"===Gi?Pt[0]:"#"===Gi&&/[boxX]/.test(pt)?"0"+pt.toLowerCase():"",ni="$"===Gi?Pt[1]:/[%p]/.test(pt)?"%":"",xt=M[pt],Xe=!pt||/[defgprs%]/.test(pt);return Tt=null==Tt?pt?6:12:/[gprs]/.test(pt)?Math.max(1,Math.min(21,Tt)):Math.max(0,Math.min(20,Tt)),function(yn){var Fe=Qt,Ke=ni;if("c"===pt)Ke=xt(yn)+Ke,yn="";else{var an,Qn=((yn=+yn)<0||1/yn<0)&&(yn*=-1,!0);if(yn=xt(yn,Tt),Qn){var Wr=-1,pr=yn.length;for(Qn=!1;++Wr<pr;)if(48<(an=yn.charCodeAt(Wr))&&an<58||"x"===pt&&96<an&&an<103||"X"===pt&&64<an&&an<71){Qn=!0;break}}if(Fe=(Qn?"("===Di?Di:"-":"-"===Di||"("===Di?"":Di)+Fe,Ke=Ke+("s"===pt?p[8+T/3]:"")+(Qn&&"("===Di?")":""),Xe)for(Wr=-1,pr=yn.length;++Wr<pr;)if(48>(an=yn.charCodeAt(Wr))||an>57){Ke=(46===an?ct+yn.slice(Wr+1):yn.slice(Wr))+Ke,yn=yn.slice(0,Wr);break}}Je&&!hr&&(yn=lt(yn,1/0));var ai=Fe.length+yn.length+Ke.length,Ni=ai<Yt?new Array(Yt-ai+1).join(dt):"";switch(Je&&hr&&(yn=lt(Ni+yn,Ni.length?Yt-Ke.length:1/0),Ni=""),Vn){case"<":return Fe+yn+Ke+Ni;case"=":return Fe+Ni+yn+Ke;case"^":return Ni.slice(0,ai=Ni.length>>1)+Fe+yn+Ke+Ni.slice(ai)}return Ni+Fe+yn+Ke}}return{format:Vt,formatPrefix:function dn(Zt,dt){var Vn=Vt(((Zt=m(Zt)).type="f",Zt)),Di=3*Math.max(-8,Math.min(8,Math.floor(ie(dt)/3))),Gi=Math.pow(10,-Di),hr=p[8+Di/3];return function(Yt){return Vn(Gi*Yt)+hr}}}}var x=w({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),A=w({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]}),R=w({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0K\u010d"]}),U=w({decimal:",",thousands:"'",grouping:[3],currency:["","\xa0CHF"]}),L=w({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]}),W=w({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),H=w({decimal:".",thousands:",",grouping:[3],currency:["\xa3",""]}),P=w({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]}),$=w({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0\u20ac"]}),X=w({decimal:",",thousands:"\xa0",grouping:[3],currency:["","$"]}),V=w({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u20ac"]}),N=w({decimal:".",thousands:",",grouping:[3],currency:["\u20aa",""]}),te=w({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0Ft"]}),G=w({decimal:",",thousands:".",grouping:[3],currency:["\u20ac",""]}),D=w({decimal:".",thousands:",",grouping:[3],currency:["","\u5186"]}),Y=w({decimal:".",thousands:",",grouping:[3],currency:["\u20a9",""]}),ee=w({decimal:",",thousands:".",grouping:[3],currency:["","\xa0\u0434\u0435\u043d."]}),fe=w({decimal:",",thousands:".",grouping:[3],currency:["\u20ac\xa0",""]}),_e=w({decimal:",",thousands:".",grouping:[3],currency:["","z\u0142"]}),we=w({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),ke=w({decimal:",",thousands:"\xa0",grouping:[3],currency:["","\xa0\u0440\u0443\u0431."]}),Ce=w({decimal:",",thousands:"\xa0",grouping:[3],currency:["","SEK"]}),We=w({decimal:".",thousands:",",grouping:[3],currency:["\xa5",""]});var Bt=x.format,Dt=x.formatPrefix;Me.version="0.4.2",Me.format=Bt,Me.formatPrefix=Dt,Me.locale=w,Me.localeCaEs=A,Me.localeCsCz=R,Me.localeDeCh=U,Me.localeDeDe=L,Me.localeEnCa=W,Me.localeEnGb=H,Me.localeEnUs=x,Me.localeEsEs=P,Me.localeFiFi=$,Me.localeFrCa=X,Me.localeFrFr=V,Me.localeHeIl=N,Me.localeHuHu=te,Me.localeItIt=G,Me.localeJaJp=D,Me.localeKoKr=Y,Me.localeMkMk=ee,Me.localeNlNl=fe,Me.localePlPl=_e,Me.localePtBr=we,Me.localeRuRu=ke,Me.localeSvSe=Ce,Me.localeZhCn=We,Me.formatSpecifier=m,Me.precisionFixed=function Te(He){return Math.max(0,-ie(Math.abs(He)))},Me.precisionPrefix=function Le(He,lt){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ie(lt)/3)))-ie(Math.abs(He)))},Me.precisionRound=function et(He,lt){return He=Math.abs(He),lt=Math.abs(lt)-He,Math.max(0,ie(lt)-ie(He))+1}}(Ue)},216:function(pn,Ue,Me){!function(Q,ie){"use strict";function xe(je){if(0<=je.y&&je.y<100){var gt=new Date(-1,je.m,je.d,je.H,je.M,je.S,je.L);return gt.setFullYear(je.y),gt}return new Date(je.y,je.m,je.d,je.H,je.M,je.S,je.L)}function T(je){if(0<=je.y&&je.y<100){var gt=new Date(Date.UTC(-1,je.m,je.d,je.H,je.M,je.S,je.L));return gt.setUTCFullYear(je.y),gt}return new Date(Date.UTC(je.y,je.m,je.d,je.H,je.M,je.S,je.L))}function re(je){return{y:je,m:0,d:1,H:0,M:0,S:0,L:0}}function B(je){var gt=je.dateTime,Kt=je.date,Gt=je.time,Ts=je.periods,Vo=je.days,tu=je.shortDays,bl=je.months,Sp=je.shortMonths,Xm=v(Ts),kp=w(Ts),xb=v(Vo),Tf=w(Vo),Ba=v(tu),Ap=w(tu),Km=v(bl),Zm=w(bl),Eb=v(Sp),Pf=w(Sp),wl={a:function nu(gn){return tu[gn.getDay()]},A:function la(gn){return Vo[gn.getDay()]},b:function MM(gn){return Sp[gn.getMonth()]},B:function t_(gn){return bl[gn.getMonth()]},c:null,d:D,e:D,H:Y,I:ee,j:fe,L:_e,m:we,M:ke,p:function n_(gn){return Ts[+(gn.getHours()>=12)]},S:Ce,U:We,w:Te,W:Le,x:null,X:null,y:et,Y:Bt,Z:Dt,"%":Je},Ar={a:function Dp(gn){return tu[gn.getUTCDay()]},A:function iu(gn){return Vo[gn.getUTCDay()]},b:function pd(gn){return Sp[gn.getUTCMonth()]},B:function Ab(gn){return bl[gn.getUTCMonth()]},c:null,d:Lt,e:Lt,H:He,I:lt,j:Pt,L:ct,m:Vt,M:dn,p:function i_(gn){return Ts[+(gn.getUTCHours()>=12)]},S:Zt,U:dt,w:Vn,W:Di,x:null,X:null,y:Gi,Y:hr,Z:Yt,"%":Je},Rf={a:function Sb(gn,li,Rt){var en=Ba.exec(li.slice(Rt));return en?(gn.w=Ap[en[0].toLowerCase()],Rt+en[0].length):-1},A:function Jm(gn,li,Rt){var en=xb.exec(li.slice(Rt));return en?(gn.w=Tf[en[0].toLowerCase()],Rt+en[0].length):-1},b:function e_(gn,li,Rt){var en=Eb.exec(li.slice(Rt));return en?(gn.m=Pf[en[0].toLowerCase()],Rt+en[0].length):-1},B:function Wn(gn,li,Rt){var en=Km.exec(li.slice(Rt));return en?(gn.m=Zm[en[0].toLowerCase()],Rt+en[0].length):-1},c:function za(gn,li,Rt){return Ps(gn,gt,li,Rt)},d:P,e:P,H:X,I:X,j:$,L:te,m:H,M:V,p:function Qm(gn,li,Rt){var en=Xm.exec(li.slice(Rt));return en?(gn.p=kp[en[0].toLowerCase()],Rt+en[0].length):-1},S:N,U:A,w:x,W:R,x:function kb(gn,li,Rt){return Ps(gn,Kt,li,Rt)},X:function Ir(gn,li,Rt){return Ps(gn,Gt,li,Rt)},y:L,Y:U,Z:W,"%":G};function Ti(gn,li){return function(Rt){var hi,J,Pi,en=[],un=-1,mi=0,ci=gn.length;for(Rt instanceof Date||(Rt=new Date(+Rt));++un<ci;)37===gn.charCodeAt(un)&&(en.push(gn.slice(mi,un)),null!=(J=E[hi=gn.charAt(++un)])?hi=gn.charAt(++un):J="e"===hi?" ":"0",(Pi=li[hi])&&(hi=Pi(Rt,J)),en.push(hi),mi=un+1);return en.push(gn.slice(mi,un)),en.join("")}}function Op(gn,li){return function(Rt){var en=re(1900);if(Ps(en,gn,Rt+="",0)!=Rt.length)return null;if("p"in en&&(en.H=en.H%12+12*en.p),"W"in en||"U"in en){"w"in en||(en.w="W"in en?1:0);var mi="Z"in en?T(re(en.y)).getUTCDay():li(re(en.y)).getDay();en.m=0,en.d="W"in en?(en.w+6)%7+7*en.W-(mi+5)%7:en.w+7*en.U-(mi+6)%7}return"Z"in en?(en.H+=en.Z/100|0,en.M+=en.Z%100,T(en)):li(en)}}function Ps(gn,li,Rt,en){for(var hi,J,un=0,mi=li.length,ci=Rt.length;un<mi;){if(en>=ci)return-1;if(37===(hi=li.charCodeAt(un++))){if(hi=li.charAt(un++),!(J=Rf[hi in E?li.charAt(un++):hi])||(en=J(gn,Rt,en))<0)return-1}else if(hi!=Rt.charCodeAt(en++))return-1}return en}return wl.x=Ti(Kt,wl),wl.X=Ti(Gt,wl),wl.c=Ti(gt,wl),Ar.x=Ti(Kt,Ar),Ar.X=Ti(Gt,Ar),Ar.c=Ti(gt,Ar),{format:function(gn){var li=Ti(gn+="",wl);return li.parse=Op(gn,xe),li.toString=function(){return gn},li},utcFormat:function(gn){var li=Ti(gn+="",Ar);return li.parse=Op(gn,T),li.toString=function(){return gn},li}}}var E={"-":"",_:" ",0:"0"},M=/^\s*\d+/,g=/^%/,m=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function _(je,gt,Kt){var Gt=je<0?"-":"",Ts=(Gt?-je:je)+"",Vo=Ts.length;return Gt+(Vo<Kt?new Array(Kt-Vo+1).join(gt)+Ts:Ts)}function p(je){return je.replace(m,"\\$&")}function v(je){return new RegExp("^(?:"+je.map(p).join("|")+")","i")}function w(je){for(var gt={},Kt=-1,Gt=je.length;++Kt<Gt;)gt[je[Kt].toLowerCase()]=Kt;return gt}function x(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+1));return Gt?(je.w=+Gt[0],Kt+Gt[0].length):-1}function A(je,gt,Kt){var Gt=M.exec(gt.slice(Kt));return Gt?(je.U=+Gt[0],Kt+Gt[0].length):-1}function R(je,gt,Kt){var Gt=M.exec(gt.slice(Kt));return Gt?(je.W=+Gt[0],Kt+Gt[0].length):-1}function U(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+4));return Gt?(je.y=+Gt[0],Kt+Gt[0].length):-1}function L(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+2));return Gt?(je.y=+Gt[0]+(+Gt[0]>68?1900:2e3),Kt+Gt[0].length):-1}function W(je,gt,Kt){var Gt=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(gt.slice(Kt,Kt+6));return Gt?(je.Z=Gt[1]?0:-(Gt[2]+(Gt[3]||"00")),Kt+Gt[0].length):-1}function H(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+2));return Gt?(je.m=Gt[0]-1,Kt+Gt[0].length):-1}function P(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+2));return Gt?(je.d=+Gt[0],Kt+Gt[0].length):-1}function $(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+3));return Gt?(je.m=0,je.d=+Gt[0],Kt+Gt[0].length):-1}function X(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+2));return Gt?(je.H=+Gt[0],Kt+Gt[0].length):-1}function V(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+2));return Gt?(je.M=+Gt[0],Kt+Gt[0].length):-1}function N(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+2));return Gt?(je.S=+Gt[0],Kt+Gt[0].length):-1}function te(je,gt,Kt){var Gt=M.exec(gt.slice(Kt,Kt+3));return Gt?(je.L=+Gt[0],Kt+Gt[0].length):-1}function G(je,gt,Kt){var Gt=g.exec(gt.slice(Kt,Kt+1));return Gt?Kt+Gt[0].length:-1}function D(je,gt){return _(je.getDate(),gt,2)}function Y(je,gt){return _(je.getHours(),gt,2)}function ee(je,gt){return _(je.getHours()%12||12,gt,2)}function fe(je,gt){return _(1+ie.day.count(ie.year(je),je),gt,3)}function _e(je,gt){return _(je.getMilliseconds(),gt,3)}function we(je,gt){return _(je.getMonth()+1,gt,2)}function ke(je,gt){return _(je.getMinutes(),gt,2)}function Ce(je,gt){return _(je.getSeconds(),gt,2)}function We(je,gt){return _(ie.sunday.count(ie.year(je),je),gt,2)}function Te(je){return je.getDay()}function Le(je,gt){return _(ie.monday.count(ie.year(je),je),gt,2)}function et(je,gt){return _(je.getFullYear()%100,gt,2)}function Bt(je,gt){return _(je.getFullYear()%1e4,gt,4)}function Dt(je){var gt=je.getTimezoneOffset();return(gt>0?"-":(gt*=-1,"+"))+_(gt/60|0,"0",2)+_(gt%60,"0",2)}function Lt(je,gt){return _(je.getUTCDate(),gt,2)}function He(je,gt){return _(je.getUTCHours(),gt,2)}function lt(je,gt){return _(je.getUTCHours()%12||12,gt,2)}function Pt(je,gt){return _(1+ie.utcDay.count(ie.utcYear(je),je),gt,3)}function ct(je,gt){return _(je.getUTCMilliseconds(),gt,3)}function Vt(je,gt){return _(je.getUTCMonth()+1,gt,2)}function dn(je,gt){return _(je.getUTCMinutes(),gt,2)}function Zt(je,gt){return _(je.getUTCSeconds(),gt,2)}function dt(je,gt){return _(ie.utcSunday.count(ie.utcYear(je),je),gt,2)}function Vn(je){return je.getUTCDay()}function Di(je,gt){return _(ie.utcMonday.count(ie.utcYear(je),je),gt,2)}function Gi(je,gt){return _(je.getUTCFullYear()%100,gt,2)}function hr(je,gt){return _(je.getUTCFullYear()%1e4,gt,4)}function Yt(){return"+0000"}function Je(){return"%"}var Tt=B({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),pt=B({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","mar\xe7","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","mar\xe7","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),Qt=B({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),ni=B({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),xt=B({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Xe=B({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),yn=B({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],shortDays:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),Fe=B({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kes\xe4kuu","hein\xe4kuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kes\xe4","Hein\xe4","Elo","Syys","Loka","Marras","Joulu"]}),Ke=B({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"],shortMonths:["jan","f\xe9v","mar","avr","mai","jui","jul","ao\xfb","sep","oct","nov","d\xe9c"]}),Qn=B({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"],shortMonths:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."]}),Wr=B({dateTime:"%A, %e \u05d1%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"],shortDays:["\u05d0\u05f3","\u05d1\u05f3","\u05d2\u05f3","\u05d3\u05f3","\u05d4\u05f3","\u05d5\u05f3","\u05e9\u05f3"],months:["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"],shortMonths:["\u05d9\u05e0\u05d5\u05f3","\u05e4\u05d1\u05e8\u05f3","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05f3","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05f3","\u05e1\u05e4\u05d8\u05f3","\u05d0\u05d5\u05e7\u05f3","\u05e0\u05d5\u05d1\u05f3","\u05d3\u05e6\u05de\u05f3"]}),pr=B({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vas\xe1rnap","h\xe9tf\u0151","kedd","szerda","cs\xfct\xf6rt\xf6k","p\xe9ntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["janu\xe1r","febru\xe1r","m\xe1rcius","\xe1prilis","m\xe1jus","j\xfanius","j\xfalius","augusztus","szeptember","okt\xf3ber","november","december"],shortMonths:["jan.","feb.","m\xe1r.","\xe1pr.","m\xe1j.","j\xfan.","j\xfal.","aug.","szept.","okt.","nov.","dec."]}),an=B({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),ai=B({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],shortDays:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],months:["\u7766\u6708","\u5982\u6708","\u5f25\u751f","\u536f\u6708","\u7690\u6708","\u6c34\u7121\u6708","\u6587\u6708","\u8449\u6708","\u9577\u6708","\u795e\u7121\u6708","\u971c\u6708","\u5e2b\u8d70"],shortMonths:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"]}),Ni=B({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["\uc624\uc804","\uc624\ud6c4"],days:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"],shortDays:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],months:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],shortMonths:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"]}),$a=B({dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u043d\u0435\u0434\u0435\u043b\u0430","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a","\u043f\u0435\u0442\u043e\u043a","\u0441\u0430\u0431\u043e\u0442\u0430"],shortDays:["\u043d\u0435\u0434","\u043f\u043e\u043d","\u0432\u0442\u043e","\u0441\u0440\u0435","\u0447\u0435\u0442","\u043f\u0435\u0442","\u0441\u0430\u0431"],months:["\u0458\u0430\u043d\u0443\u0430\u0440\u0438","\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0438\u043b","\u043c\u0430\u0458","\u0458\u0443\u043d\u0438","\u0458\u0443\u043b\u0438","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438","\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438","\u043d\u043e\u0435\u043c\u0432\u0440\u0438","\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438"],shortMonths:["\u0458\u0430\u043d","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0458","\u0458\u0443\u043d","\u0458\u0443\u043b","\u0430\u0432\u0433","\u0441\u0435\u043f","\u043e\u043a\u0442","\u043d\u043e\u0435","\u0434\u0435\u043a"]}),Mp=B({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),jm=B({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","\u015ar.","Czw.","Pt.","Sob."],months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Pa\u017adz.","Listop.","Grudz."]}),xp=B({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],months:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),Wm=B({dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],shortDays:["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],months:["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],shortMonths:["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"]}),hd=B({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],shortDays:["S\xf6n","M\xe5n","Tis","Ons","Tor","Fre","L\xf6r"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),Gm=B({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["\u4e0a\u5348","\u4e0b\u5348"],days:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],shortDays:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],shortMonths:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]}),qm="%Y-%m-%dT%H:%M:%S.%LZ";function Ep(je){return je.toISOString()}Ep.parse=function(je){var gt=new Date(je);return isNaN(gt)?null:gt},Ep.toString=function(){return qm};var Cb=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ep:Tt.utcFormat(qm),vl=Tt.format,Ym=Tt.utcFormat;Q.version="0.2.1",Q.format=vl,Q.utcFormat=Ym,Q.locale=B,Q.localeCaEs=pt,Q.localeDeCh=Qt,Q.localeDeDe=ni,Q.localeEnCa=xt,Q.localeEnGb=Xe,Q.localeEnUs=Tt,Q.localeEsEs=yn,Q.localeFiFi=Fe,Q.localeFrCa=Ke,Q.localeFrFr=Qn,Q.localeHeIl=Wr,Q.localeHuHu=pr,Q.localeItIt=an,Q.localeJaJp=ai,Q.localeKoKr=Ni,Q.localeMkMk=$a,Q.localeNlNl=Mp,Q.localePlPl=jm,Q.localePtBr=xp,Q.localeRuRu=Wm,Q.localeSvSe=hd,Q.localeZhCn=Gm,Q.isoFormat=Cb}(Ue,Me(765))},765:function(pn,Ue){!function(Me){"use strict";var Q=new Date,ie=new Date;function xe(Fe,Ke,Qn,Wr){function pr(an){return Fe(an=new Date(+an)),an}return pr.floor=pr,pr.round=function(an){var ai=new Date(+an),Ni=new Date(an-1);return Fe(ai),Fe(Ni),Ke(Ni,1),an-ai<Ni-an?ai:Ni},pr.ceil=function(an){return Fe(an=new Date(an-1)),Ke(an,1),an},pr.offset=function(an,ai){return Ke(an=new Date(+an),null==ai?1:Math.floor(ai)),an},pr.range=function(an,ai,Ni){var $a=[];if(an=new Date(an-1),ai=new Date(+ai),Ni=null==Ni?1:Math.floor(Ni),!(an<ai&&Ni>0))return $a;for(Ke(an,1),Fe(an),an<ai&&$a.push(new Date(+an));Ke(an,Ni),Fe(an),an<ai;)$a.push(new Date(+an));return $a},pr.filter=function(an){return xe(function(ai){for(;Fe(ai),!an(ai);)ai.setTime(ai-1)},function(ai,Ni){for(;--Ni>=0;)for(;Ke(ai,1),!an(ai););})},Qn&&(pr.count=function(an,ai){return Q.setTime(+an),ie.setTime(+ai),Fe(Q),Fe(ie),Math.floor(Qn(Q,ie))},pr.every=function(an){return an=Math.floor(an),isFinite(an)&&an>0?an>1?pr.filter(Wr?function(ai){return Wr(ai)%an==0}:function(ai){return pr.count(0,ai)%an==0}):pr:null}),pr}var T=xe(function(){},function(Fe,Ke){Fe.setTime(+Fe+Ke)},function(Fe,Ke){return Ke-Fe});T.every=function(Fe){return Fe=Math.floor(Fe),isFinite(Fe)&&Fe>0?Fe>1?xe(function(Ke){Ke.setTime(Math.floor(Ke/Fe)*Fe)},function(Ke,Qn){Ke.setTime(+Ke+Qn*Fe)},function(Ke,Qn){return(Qn-Ke)/Fe}):T:null};var re=xe(function(Fe){Fe.setMilliseconds(0)},function(Fe,Ke){Fe.setTime(+Fe+1e3*Ke)},function(Fe,Ke){return(Ke-Fe)/1e3},function(Fe){return Fe.getSeconds()}),B=xe(function(Fe){Fe.setSeconds(0,0)},function(Fe,Ke){Fe.setTime(+Fe+6e4*Ke)},function(Fe,Ke){return(Ke-Fe)/6e4},function(Fe){return Fe.getMinutes()}),E=xe(function(Fe){Fe.setMinutes(0,0,0)},function(Fe,Ke){Fe.setTime(+Fe+36e5*Ke)},function(Fe,Ke){return(Ke-Fe)/36e5},function(Fe){return Fe.getHours()}),M=xe(function(Fe){Fe.setHours(0,0,0,0)},function(Fe,Ke){Fe.setDate(Fe.getDate()+Ke)},function(Fe,Ke){return(Ke-Fe-6e4*(Ke.getTimezoneOffset()-Fe.getTimezoneOffset()))/864e5},function(Fe){return Fe.getDate()-1});function g(Fe){return xe(function(Ke){Ke.setHours(0,0,0,0),Ke.setDate(Ke.getDate()-(Ke.getDay()+7-Fe)%7)},function(Ke,Qn){Ke.setDate(Ke.getDate()+7*Qn)},function(Ke,Qn){return(Qn-Ke-6e4*(Qn.getTimezoneOffset()-Ke.getTimezoneOffset()))/6048e5})}var m=g(0),_=g(1),p=g(2),v=g(3),w=g(4),x=g(5),A=g(6),R=xe(function(Fe){Fe.setHours(0,0,0,0),Fe.setDate(1)},function(Fe,Ke){Fe.setMonth(Fe.getMonth()+Ke)},function(Fe,Ke){return Ke.getMonth()-Fe.getMonth()+12*(Ke.getFullYear()-Fe.getFullYear())},function(Fe){return Fe.getMonth()}),U=xe(function(Fe){Fe.setHours(0,0,0,0),Fe.setMonth(0,1)},function(Fe,Ke){Fe.setFullYear(Fe.getFullYear()+Ke)},function(Fe,Ke){return Ke.getFullYear()-Fe.getFullYear()},function(Fe){return Fe.getFullYear()}),L=xe(function(Fe){Fe.setUTCMilliseconds(0)},function(Fe,Ke){Fe.setTime(+Fe+1e3*Ke)},function(Fe,Ke){return(Ke-Fe)/1e3},function(Fe){return Fe.getUTCSeconds()}),W=xe(function(Fe){Fe.setUTCSeconds(0,0)},function(Fe,Ke){Fe.setTime(+Fe+6e4*Ke)},function(Fe,Ke){return(Ke-Fe)/6e4},function(Fe){return Fe.getUTCMinutes()}),H=xe(function(Fe){Fe.setUTCMinutes(0,0,0)},function(Fe,Ke){Fe.setTime(+Fe+36e5*Ke)},function(Fe,Ke){return(Ke-Fe)/36e5},function(Fe){return Fe.getUTCHours()}),P=xe(function(Fe){Fe.setUTCHours(0,0,0,0)},function(Fe,Ke){Fe.setUTCDate(Fe.getUTCDate()+Ke)},function(Fe,Ke){return(Ke-Fe)/864e5},function(Fe){return Fe.getUTCDate()-1});function $(Fe){return xe(function(Ke){Ke.setUTCHours(0,0,0,0),Ke.setUTCDate(Ke.getUTCDate()-(Ke.getUTCDay()+7-Fe)%7)},function(Ke,Qn){Ke.setUTCDate(Ke.getUTCDate()+7*Qn)},function(Ke,Qn){return(Qn-Ke)/6048e5})}var X=$(0),V=$(1),N=$(2),te=$(3),G=$(4),D=$(5),Y=$(6),ee=xe(function(Fe){Fe.setUTCHours(0,0,0,0),Fe.setUTCDate(1)},function(Fe,Ke){Fe.setUTCMonth(Fe.getUTCMonth()+Ke)},function(Fe,Ke){return Ke.getUTCMonth()-Fe.getUTCMonth()+12*(Ke.getUTCFullYear()-Fe.getUTCFullYear())},function(Fe){return Fe.getUTCMonth()}),fe=xe(function(Fe){Fe.setUTCHours(0,0,0,0),Fe.setUTCMonth(0,1)},function(Fe,Ke){Fe.setUTCFullYear(Fe.getUTCFullYear()+Ke)},function(Fe,Ke){return Ke.getUTCFullYear()-Fe.getUTCFullYear()},function(Fe){return Fe.getUTCFullYear()}),_e=T.range,we=re.range,ke=B.range,Ce=E.range,We=M.range,Te=m.range,Le=_.range,et=p.range,Bt=v.range,Dt=w.range,Lt=x.range,He=A.range,lt=m.range,Pt=R.range,ct=U.range,Vt=T,dn=_e,Zt=L.range,dt=W.range,Vn=H.range,Di=P.range,Gi=X.range,hr=V.range,Yt=N.range,Je=te.range,Tt=G.range,pt=D.range,Qt=Y.range,ni=X.range,xt=ee.range,Xe=fe.range;Me.version="0.1.1",Me.milliseconds=_e,Me.seconds=we,Me.minutes=ke,Me.hours=Ce,Me.days=We,Me.sundays=Te,Me.mondays=Le,Me.tuesdays=et,Me.wednesdays=Bt,Me.thursdays=Dt,Me.fridays=Lt,Me.saturdays=He,Me.weeks=lt,Me.months=Pt,Me.years=ct,Me.utcMillisecond=Vt,Me.utcMilliseconds=dn,Me.utcSeconds=Zt,Me.utcMinutes=dt,Me.utcHours=Vn,Me.utcDays=Di,Me.utcSundays=Gi,Me.utcMondays=hr,Me.utcTuesdays=Yt,Me.utcWednesdays=Je,Me.utcThursdays=Tt,Me.utcFridays=pt,Me.utcSaturdays=Qt,Me.utcWeeks=ni,Me.utcMonths=xt,Me.utcYears=Xe,Me.millisecond=T,Me.second=re,Me.minute=B,Me.hour=E,Me.day=M,Me.sunday=m,Me.monday=_,Me.tuesday=p,Me.wednesday=v,Me.thursday=w,Me.friday=x,Me.saturday=A,Me.week=m,Me.month=R,Me.year=U,Me.utcSecond=L,Me.utcMinute=W,Me.utcHour=H,Me.utcDay=P,Me.utcSunday=X,Me.utcMonday=V,Me.utcTuesday=N,Me.utcWednesday=te,Me.utcThursday=G,Me.utcFriday=D,Me.utcSaturday=Y,Me.utcWeek=X,Me.utcMonth=ee,Me.utcYear=fe,Me.interval=xe}(Ue)},581:(pn,Ue,Me)=>{var M,g,m,_,Q=Me(758),ie=Me(765),xe=Me(216),T=Me(994),re=T,B=xe,E=new Date(2e3,0,1);function p(D){return D.length>4&&"locale"+(D[0].toUpperCase()+D[1].toLowerCase()+D[3].toUpperCase()+D[4].toLowerCase())}function v(D){var Y=Q.isString(D)?T[p(D)]:T.locale(D);if(null==Y)throw Error("Unrecognized locale: "+D);re=Y}function w(D){var Y=Q.isString(D)?xe[p(D)]:xe.locale(D);if(null==Y)throw Error("Unrecognized locale: "+D);B=Y,M=g=m=_=null}pn.exports={numberLocale:v,number:function(D){return re.format(D)},numberPrefix:function(D,Y){return re.formatPrefix(D,Y)},timeLocale:w,time:function(D){return B.format(D)},utc:function(D){return B.utcFormat(D)},locale:function(D){v(D),w(D)},auto:{number:function H(D){var Y=re.format(".1f")(1)[1];switch(null==D&&(D=","),null==(D=T.formatSpecifier(D)).precision&&(D.precision=12),D.type){case"%":D.precision-=2;break;case"e":D.precision-=1}return function L(D,Y){return function(ee){var fe=D(ee),_e=fe.indexOf(Y);if(_e<0)return fe;for(var we=function W(D,Y){var fe,ee=D.lastIndexOf("e");if(ee>0)return ee;for(ee=D.length;--ee>Y;)if((fe=D.charCodeAt(ee))>=48&&fe<=57)return ee+1}(fe,_e),ke=we<fe.length?fe.slice(we):"";--we>_e;)if("0"!==fe[we]){++we;break}return fe.slice(0,we)+ke}}(re.format(D),Y)},linear:function P(D,Y,ee){var fe=function U(D,Y){D.length||(D=[0]),null==Y&&(Y=10);var ee=D[0],fe=D[D.length-1];fe<ee&&(ke=fe,fe=ee,ee=ke);var _e=fe-ee||(Y=1,ee||fe||1),we=Math.pow(10,Math.floor(Math.log(_e/Y)/Math.LN10)),ke=_e/Y/we;return ke>=x?we*=10:ke>=A?we*=5:ke>=R&&(we*=2),[Math.ceil(ee/we)*we,Math.floor(fe/we)*we+we/2,we]}(D,Y);switch(null==ee&&(ee=",f"),(ee=T.formatSpecifier(ee)).type){case"s":var _e=Math.max(Math.abs(fe[0]),Math.abs(fe[1]));return null==ee.precision&&(ee.precision=T.precisionPrefix(fe[2],_e)),re.formatPrefix(ee,_e);case"":case"e":case"g":case"p":case"r":null==ee.precision&&(ee.precision=T.precisionRound(fe[2],Math.max(Math.abs(fe[0]),Math.abs(fe[1])))-("e"===ee.type));break;case"f":case"%":null==ee.precision&&(ee.precision=T.precisionFixed(fe[2])-2*("%"===ee.type))}return re.format(ee)},time:function(){return function $(){var D=B.format,Y=D(".%L"),ee=D(":%S"),fe=D("%I:%M"),_e=D("%I %p"),we=D("%a %d"),ke=D("%b %d"),Ce=D("%B"),We=D("%Y");return function(Te){var Le=+Te;return(ie.second(Te)<Le?Y:ie.minute(Te)<Le?ee:ie.hour(Te)<Le?fe:ie.day(Te)<Le?_e:ie.month(Te)<Le?ie.week(Te)<Le?we:ke:ie.year(Te)<Le?Ce:We)(Te)}}()},utc:function(){return function X(){var D=B.utcFormat,Y=D(".%L"),ee=D(":%S"),fe=D("%I:%M"),_e=D("%I %p"),we=D("%a %d"),ke=D("%b %d"),Ce=D("%B"),We=D("%Y");return function(Te){var Le=+Te;return(ie.utcSecond(Te)<Le?Y:ie.utcMinute(Te)<Le?ee:ie.utcHour(Te)<Le?fe:ie.utcDay(Te)<Le?_e:ie.utcMonth(Te)<Le?ie.utcWeek(Te)<Le?we:ke:ie.utcYear(Te)<Le?Ce:We)(Te)}}()}},month:function V(D,Y){var ee=Y?g||(g=B.format("%b")):M||(M=B.format("%B"));return E.setMonth(D),ee(E)},day:function N(D,Y){var ee=Y?_||(_=B.format("%a")):m||(m=B.format("%A"));return E.setMonth(0),E.setDate(2+D),ee(E)},quarter:function te(D){return Math.floor(D.getMonth()/3)+1},utcQuarter:function G(D){return Math.floor(D.getUTCMonth()/3)+1}};var x=Math.sqrt(50),A=Math.sqrt(10),R=Math.sqrt(2)},1:(pn,Ue,Me)=>{var Q=Me(758),ie=pn.exports;ie.repeat=function(xe,T){var B,re=Array(T);for(B=0;B<T;++B)re[B]=xe;return re},ie.zeros=function(xe){return ie.repeat(0,xe)},ie.range=function(xe,T,re){if(arguments.length<3&&(re=1,arguments.length<2&&(T=xe,xe=0)),(T-xe)/re==1/0)throw new Error("Infinite range");var M,B=[],E=-1;if(re<0)for(;(M=xe+re*++E)>T;)B.push(M);else for(;(M=xe+re*++E)<T;)B.push(M);return B},ie.random={},ie.random.uniform=function(xe,T){void 0===T&&(T=void 0===xe?1:xe,xe=0);var re=T-xe,B=function(){return xe+re*Math.random()};return B.samples=function(E){return ie.zeros(E).map(B)},B.pdf=function(E){return E>=xe&&E<=T?1/re:0},B.cdf=function(E){return E<xe?0:E>T?1:(E-xe)/re},B.icdf=function(E){return E>=0&&E<=1?xe+E*re:NaN},B},ie.random.integer=function(xe,T){void 0===T&&(T=xe,xe=0);var re=T-xe,B=function(){return xe+Math.floor(re*Math.random())};return B.samples=function(E){return ie.zeros(E).map(B)},B.pdf=function(E){return E===Math.floor(E)&&E>=xe&&E<T?1/re:0},B.cdf=function(E){var M=Math.floor(E);return M<xe?0:M>=T?1:(M-xe+1)/re},B.icdf=function(E){return E>=0&&E<=1?xe-1+Math.floor(E*re):NaN},B},ie.random.normal=function(xe,T){xe=xe||0,T=T||1;var re,B=function(){var g,m,E=0,M=0;if(void 0!==re)return E=re,re=void 0,E;do{g=(E=2*Math.random()-1)*E+(M=2*Math.random()-1)*M}while(0===g||g>1);return m=Math.sqrt(-2*Math.log(g)/g),re=xe+M*m*T,xe+E*m*T};return B.samples=function(E){return ie.zeros(E).map(B)},B.pdf=function(E){var M=Math.exp(Math.pow(E-xe,2)/(-2*Math.pow(T,2)));return 1/(T*Math.sqrt(2*Math.PI))*M},B.cdf=function(E){var M,g=(E-xe)/T,m=Math.abs(g);if(m>37)M=0;else{var p=Math.exp(-m*m/2);m<7.07106781186547?(M=p*((((((.0352624965998911*m+.700383064443688)*m+6.37396220353165)*m+33.912866078383)*m+112.079291497871)*m+221.213596169931)*m+220.206867912376),M/=((((((.0883883476483184*m+1.75566716318264)*m+16.064177579207)*m+86.7807322029461)*m+296.564248779674)*m+637.333633378831)*m+793.826512519948)*m+440.413735824752):M=p/(m+1/(m+2/(m+3/(m+4/(m+.65)))))/2.506628274631}return g>0?1-M:M},B.icdf=function(E){if(E<=0||E>=1)return NaN;var M=2*E-1,g=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),m=2/(Math.PI*g)+Math.log(1-Math.pow(M,2))/2,_=Math.log(1-M*M)/g,p=(M>0?1:-1)*Math.sqrt(Math.sqrt(m*m-_)-m);return xe+T*Math.SQRT2*p},B},ie.random.bootstrap=function(xe,T){var re=xe.filter(Q.isValid),B=re.length,E=T?ie.random.normal(0,T):null,M=function(){return re[~~(Math.random()*B)]+(E?E():0)};return M.samples=function(g){return ie.zeros(g).map(M)},M}},93:(pn,Ue,Me)=>{var Q=Me(758),ie=Me(862);function xe(T,re){if(T){var B=re.header;T=(B?B.join(re.delimiter)+"\n":"")+T}return ie.dsv(re.delimiter).parse(T)}xe.delimiter=function(T){var re={delimiter:T};return function(B,E){return xe(B,E?Q.extend(E,re):re)}},pn.exports=xe},550:(pn,Ue,Me)=>{var Q=Me(93);pn.exports={json:Me(165),topojson:Me(966),treejson:Me(485),dsv:Q,csv:Q.delimiter(","),tsv:Q.delimiter("\t")}},165:(pn,Ue,Me)=>{var Q=Me(758);pn.exports=function(ie,xe){var T=Q.isObject(ie)&&!Q.isBuffer(ie)?ie:JSON.parse(ie);return xe&&xe.property&&(T=Q.accessor(xe.property)(T)),T}},966:(pn,Ue,Me)=>{var Q=Me(165),ie=function(xe,T){var re=ie.topojson;if(null==re)throw Error("TopoJSON library not loaded.");var E,B=Q(xe,T);if(T&&T.feature){if(E=B.objects[T.feature])return re.feature(B,E).features;throw Error("Invalid TopoJSON object: "+T.feature)}if(T&&T.mesh){if(E=B.objects[T.mesh])return[re.mesh(B,B.objects[T.mesh])];throw Error("Invalid TopoJSON object: "+T.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};ie.topojson=Me(134),pn.exports=ie},485:(pn,Ue,Me)=>{var Q=Me(165);pn.exports=function(xe,T){return function ie(xe,T){var re=T&&T.children||"children",B=T&&T.parent||"parent",E=[];return function M(g,m){g[B]=m,E.push(g);var _=g[re];if(_)for(var p=0;p<_.length;++p)M(_[p],g)}(xe,null),E.root=xe,E}(Q(xe,T),T)}},56:(pn,Ue,Me)=>{var Q=Me(758),ie=Me(500),xe=Me(550),T=Me(581).time;function re(E,M){return E=xe[M&&M.type||"json"](E,M),M&&M.parse&&function B(E,M){var g,m,_,p,v,w,x=E.length;for(M="auto"===M?ie.inferAll(E):Q.duplicate(M),m=(g=Q.keys(M)).map(function(A){var R=M[A];if(R&&0===R.indexOf("date:")){var L=R.split(/:(.+)?/,2)[1];if(!("'"===L[0]&&"'"===L[L.length-1]||'"'===L[0]&&'"'===L[L.length-1]))throw Error("Format pattern must be quoted: "+L);return L=L.slice(1,-1),L=T(L),function(W){return L.parse(W)}}if(!ie.parsers[R])throw Error("Illegal format pattern: "+A+":"+R);return ie.parsers[R]}),p=0,w=g.length;p<x;++p)for(_=E[p],v=0;v<w;++v)_[g[v]]=m[v](_[g[v]]);ie.annotation(E,M)}(E,M.parse),E}re.formats=xe,pn.exports=re},500:(pn,Ue,Me)=>{var Q=Me(758),ie="__types__",xe={boolean:Q.boolean,integer:Q.number,number:Q.number,date:Q.date,string:function(p){return null==p||""===p?null:p+""}},T={boolean:function(p){return"true"===p||"false"===p||Q.isBoolean(p)},integer:function(p){return T.number(p)&&(p=+p)==~~p},number:function(p){return!isNaN(+p)&&!Q.isDate(p)},date:function(p){return!isNaN(Date.parse(p))}};function B(p){return Q.keys(p)}function E(p){return"["+p+"]"}function M(p,v){var w,x,A;if(p=Q.array(p),v=Q.$(v),p[ie]&&(w=v(p[ie]),Q.isString(w)))return w;for(x=0,A=p.length;!Q.isValid(w)&&x<A;++x)w=v?v(p[x]):p[x];return Q.isDate(w)?"date":Q.isNumber(w)?"number":Q.isBoolean(w)?"boolean":Q.isString(w)?"string":null}function m(p,v,w){p=Q.array(p),v=Q.$(v);var x,A,R,U=["boolean","integer","number","date"];for(x=0;x<p.length;++x){for(R=v?v(p[x]):p[x],A=0;A<U.length;++A)(!w||!w.test(R))&&Q.isValid(R)&&!T[U[A]](R)&&(U.splice(A,1),A-=1);if(0===U.length)return"string"}return U[0]}M.annotation=function re(p,v){if(!v)return p&&p[ie]||null;p[ie]=v},M.all=function g(p,v){if(p.length){var w=v?Q.identity:(v=B(p[0]),E);return v.reduce(function(x,A){return x[A]=M(p,w(A)),x},{})}},M.infer=m,M.inferAll=function _(p,v,w){var x=v?Q.identity:(v=B(p[0]),E);return v.reduce(function(A,R){return A[R]=m(p,x(R),w),A},{})},M.parsers=xe,pn.exports=M},446:(pn,Ue,Me)=>{var Q=Me(758),ie=Me(500),xe=Me(1),T=pn.exports;function re(M,g,m){var _=M&&M.nullh||0,p=xe.random.normal(0,1),v=T.mean(g,m),w=T.stdev(g,m)/Math.sqrt(T.count.valid(g,m));return 0===w?v-_==0?1:0:2*p.cdf(-Math.abs((v-_)/w))}function B(M,g,m,_){var R,p=_?g.map(Q.$(m)):g,v=_?g.map(Q.$(_)):m,w=T.count(p),x=T.count(v),A=Array();if(w!==x)throw Error("Array lengths must match.");for(R=0;R<w;++R)Q.isValid(p[R])&&Q.isValid(v[R])&&A.push(p[R]-v[R]);return T.z.test(A,M&&M.nullh||0)}function E(M,g,m,_){var p=_?g.map(Q.$(m)):g,v=_?g.map(Q.$(_)):m,w=T.count.valid(p),x=T.count.valid(v),A=xe.random.normal(0,1),R=T.mean(p)-T.mean(v)-(M&&M.nullh||0),U=Math.sqrt(T.variance(p)/w+T.variance(v)/x);return 0===U?0===R?1:0:2*A.cdf(-Math.abs(R/U))}T.unique=function(M,g,m){g=Q.$(g),m=m||[];var p,v,w,_={};for(v=0,w=M.length;v<w;++v)!((p=g?g(M[v]):M[v])in _)&&(_[p]=1,m.push(p));return m},T.count=function(M){return M&&M.length||0},T.count.valid=function(M,g){g=Q.$(g);var m,_,p,v=0;for(_=0,p=M.length;_<p;++_)m=g?g(M[_]):M[_],Q.isValid(m)&&(v+=1);return v},T.count.missing=function(M,g){g=Q.$(g);var _,p,v=0;for(_=0,p=M.length;_<p;++_)null==(g?g(M[_]):M[_])&&(v+=1);return v},T.count.distinct=function(M,g){g=Q.$(g);var _,p,v,m={},w=0;for(p=0,v=M.length;p<v;++p)!((_=g?g(M[p]):M[p])in m)&&(m[_]=1,w+=1);return w},T.count.map=function(M,g){g=Q.$(g);var _,p,v,m={};for(p=0,v=M.length;p<v;++p)m[_=g?g(M[p]):M[p]]=_ in m?m[_]+1:1;return m},T.median=function(M,g){return g&&(M=M.map(Q.$(g))),M=M.filter(Q.isValid).sort(Q.cmp),T.quantile(M,.5)},T.quartile=function(M,g){g&&(M=M.map(Q.$(g))),M=M.filter(Q.isValid).sort(Q.cmp);var m=T.quantile;return[m(M,.25),m(M,.5),m(M,.75)]},T.quantile=function(M,g,m){void 0===m&&(m=g,g=Q.identity),g=Q.$(g);var _=(M.length-1)*m+1,p=Math.floor(_),v=+g(M[p-1]),w=_-p;return w?v+w*(g(M[p])-v):v},T.sum=function(M,g){g=Q.$(g);for(var v,m=0,_=0,p=M.length;_<p;++_)v=g?g(M[_]):M[_],Q.isValid(v)&&(m+=v);return m},T.mean=function(M,g){g=Q.$(g);var p,v,w,x,m=0;for(p=0,w=0,v=M.length;p<v;++p)x=g?g(M[p]):M[p],Q.isValid(x)&&(m+=(x-m)/++w);return m},T.mean.geometric=function(M,g){g=Q.$(g);var _,p,v,w,m=1;for(w=0,_=0,p=M.length;w<p;++w)if(v=g?g(M[w]):M[w],Q.isValid(v)){if(v<=0)throw Error("Geometric mean only defined for positive values.");m*=v,++_}return _>0?Math.pow(m,1/_):0},T.mean.harmonic=function(M,g){g=Q.$(g);var _,p,v,w,m=0;for(w=0,_=0,p=M.length;w<p;++w)v=g?g(M[w]):M[w],Q.isValid(v)&&(m+=1/v,++_);return _/m},T.variance=function(M,g){if(g=Q.$(g),!Q.isArray(M)||M.length<2)return 0;var p,v,w,x,m=0,_=0;for(v=0,w=0;v<M.length;++v)x=g?g(M[v]):M[v],Q.isValid(x)&&(_+=(p=x-m)*(x-(m+=p/++w)));return _/(w-1)},T.stdev=function(M,g){return Math.sqrt(T.variance(M,g))},T.modeskew=function(M,g){var m=T.mean(M,g),_=T.median(M,g),p=T.stdev(M,g);return 0===p?0:(m-_)/p},T.min=function(M,g){return T.extent(M,g)[0]},T.max=function(M,g){return T.extent(M,g)[1]},T.extent=function(M,g){g=Q.$(g);var m,_,p,v,w=M.length;for(v=0;v<w;++v)if(p=g?g(M[v]):M[v],Q.isValid(p)){m=_=p;break}for(;v<w;++v)p=g?g(M[v]):M[v],Q.isValid(p)&&(p<m&&(m=p),p>_&&(_=p));return[m,_]},T.extent.index=function(M,g){g=Q.$(g);var p,v,w,x,m=-1,_=-1,A=M.length;for(x=0;x<A;++x)if(w=g?g(M[x]):M[x],Q.isValid(w)){p=v=w,m=_=x;break}for(;x<A;++x)w=g?g(M[x]):M[x],Q.isValid(w)&&(w<p&&(p=w,m=x),w>v&&(v=w,_=x));return[m,_]},T.dot=function(M,g,m){var p,v,_=0;if(m)for(g=Q.$(g),m=Q.$(m),p=0;p<M.length;++p)(v=g(M[p])*m(M[p]))==v&&(_+=v);else{if(M.length!==g.length)throw Error("Array lengths must match.");for(p=0;p<M.length;++p)(v=M[p]*g[p])==v&&(_+=v)}return _},T.dist=function(M,g,m,_){var L,W,p=Q.isFunction(m)||Q.isString(m),v=M,w=p?M:g,x=p?_:m,A=2===x||null==x,R=M.length,U=0;for(p&&(g=Q.$(g),m=Q.$(m)),W=0;W<R;++W)L=p?g(v[W])-m(w[W]):v[W]-w[W],U+=A?L*L:Math.pow(Math.abs(L),x);return A?Math.sqrt(U):Math.pow(U,1/x)},T.cohensd=function(M,g,m){var _=m?M.map(Q.$(g)):M,p=m?M.map(Q.$(m)):g,v=T.mean(_),w=T.mean(p),x=T.count.valid(_),A=T.count.valid(p);if(x+A-2<=0)return 0;var R=T.variance(_),U=T.variance(p),L=Math.sqrt(((x-1)*R+(A-1)*U)/(x+A-2));return 0===L?0:(v-w)/L},T.covariance=function(M,g,m){var U,L,W,H,P,_=m?M.map(Q.$(g)):M,p=m?M.map(Q.$(m)):g,v=_.length,w=T.mean(_),x=T.mean(p),A=0,R=0;if(v!==p.length)throw Error("Input lengths must match.");for(U=0;U<v;++U)if(H=Q.isValid(L=_[U]),P=Q.isValid(W=p[U]),H&&P)A+=(L-w)*(W-x),++R;else if(H||P)throw Error("Valid values must align.");return A/(R-1)},T.rank=function(M,g){g=Q.$(g)||Q.identity;var x,A,R,m=M.map(function(U,L){return{idx:L,val:g(U)}}).sort(Q.comparator("val")),_=M.length,p=Array(_),v=-1,w={};for(x=0;x<_;++x){if(A=m[x].val,v<0&&w===A)v=x-1;else if(v>-1&&w!==A){for(R=1+(x-1+v)/2;v<x;++v)p[m[v].idx]=R;v=-1}p[m[x].idx]=x+1,w=A}if(v>-1)for(R=1+(_-1+v)/2;v<_;++v)p[m[v].idx]=R;return p},T.cor=function(M,g,m){var _=m;m=_?M.map(Q.$(m)):g,g=_?M.map(Q.$(g)):M;var p=T.dot(g,m),v=T.mean(g),w=T.mean(m),x=T.stdev(g),A=T.stdev(m),R=M.length;return(p-R*v*w)/((R-1)*x*A)},T.cor.rank=function(M,g,m){var w,x,A,_=m?T.rank(M,g):T.rank(M),p=m?T.rank(M,m):T.rank(g),v=M.length;for(w=0,x=0;w<v;++w)x+=(A=_[w]-p[w])*A;return 1-6*x/(v*(v*v-1))},T.cor.dist=function(M,g,m){var A,R,U,L,_=m?M.map(Q.$(g)):M,p=m?M.map(Q.$(m)):g,v=T.dist.mat(_),w=T.dist.mat(p),x=v.length;for(A=0,R=0,U=0,L=0;A<x;++A)R+=v[A]*v[A],U+=w[A]*w[A],L+=v[A]*w[A];return Math.sqrt(L/Math.sqrt(R*U))},T.linearRegression=function(M,g,m){var W,H,_=m?M.map(Q.$(g)):M,p=m?M.map(Q.$(m)):g,v=_.length,w=T.covariance(_,p),x=T.stdev(_),A=T.stdev(p),R=w/(x*x),U=T.mean(p)-R*T.mean(_),L={slope:R,intercept:U,R:w/(x*A),rss:0};for(H=0;H<v;++H)Q.isValid(_[H])&&Q.isValid(p[H])&&(L.rss+=(W=R*_[H]+U-p[H])*W);return L},T.bootstrap={},T.bootstrap.ci=function(M,g,m,_,p){var v,w,x,A,R,U,L;for(Q.isFunction(g)||Q.isString(g)?(v=M.map(Q.$(g)),w=m,x=_,A=p):(v=M,w=g,x=m,A=_),w=w?+w:1e3,x=x||.05,R=xe.random.bootstrap(v,A),L=0,U=Array(w);L<w;++L)U[L]=T.mean(R.samples(v.length));return U.sort(Q.numcmp),[T.quantile(U,x/2),T.quantile(U,1-x/2)]},T.z={},T.z.ci=function(M,g,m){var _=M,p=g;(Q.isFunction(g)||Q.isString(g))&&(_=M.map(Q.$(g)),p=m);var v=.05===(p=p||.05)?1.96:xe.random.normal(0,1).icdf(1-p/2),w=T.mean(_),x=T.stdev(_)/Math.sqrt(T.count.valid(_));return[w-v*x,w+v*x]},T.z.test=function(M,g,m,_){return Q.isFunction(m)||Q.isString(m)?(_&&_.paired?B:E)(_,M,g,m):Q.isArray(g)?(m&&m.paired?B:E)(m,M,g):Q.isFunction(g)||Q.isString(g)?re(m,M,g):re(g,M)},T.dist.mat=function(M){var w,x,A,g=M.length,m=g*g,_=Array(m),p=xe.zeros(g),v=0;for(x=0;x<g;++x)for(_[x*g+x]=0,A=x+1;A<g;++A)_[x*g+A]=w=Math.abs(M[x]-M[A]),_[A*g+x]=w,p[x]+=w,p[A]+=w;for(x=0;x<g;++x)v+=p[x],p[x]/=g;for(v/=m,x=0;x<g;++x)for(A=x;A<g;++A)_[x*g+A]+=v-p[x]-p[A],_[A*g+x]=_[x*g+A];return _},T.entropy=function(M,g){g=Q.$(g);var m,_,p=0,v=0,w=M.length;for(m=0;m<w;++m)p+=g?g(M[m]):M[m];if(0===p)return 0;for(m=0;m<w;++m)(_=(g?g(M[m]):M[m])/p)&&(v+=_*Math.log(_));return-v/Math.LN2},T.mutual=function(M,g,m,_){var P,$,p=_?M.map(Q.$(g)):M,v=_?M.map(Q.$(m)):g,w=_?M.map(Q.$(_)):m,x={},A={},R=w.length,U=0,L=0,W=0;for($=0;$<R;++$)x[p[$]]=0,A[v[$]]=0;for($=0;$<R;++$)x[p[$]]+=w[$],A[v[$]]+=w[$],U+=w[$];for(P=1/(U*Math.LN2),$=0;$<R;++$)0!==w[$]&&(L+=w[$]*P*Math.log(U*w[$]/(x[p[$]]*A[v[$]])),W+=w[$]*P*Math.log(w[$]/U));return[L,1+L/W]},T.mutual.info=function(M,g,m,_){return T.mutual(M,g,m,_)[0]},T.mutual.dist=function(M,g,m,_){return T.mutual(M,g,m,_)[1]},T.profile=function(M,g){var L,W,H,P,$,m=0,_=0,p=0,v=0,w=null,x=null,A=0,R=[],U={};for(H=0;H<M.length;++H)U[P=g?g(M[H]):M[H]]=P in U?U[P]+1:(v+=1,1),null==P?++p:Q.isValid(P)&&($="string"==typeof P?P.length:P,(null===w||$<w)&&(w=$),(null===x||$>x)&&(x=$),A+=(L=$-m)*($-(m+=L/++_)),R.push($));return A/=_-1,W=Math.sqrt(A),R.sort(Q.cmp),{type:ie(M,g),unique:U,count:M.length,valid:_,missing:p,distinct:v,min:w,max:x,mean:m,stdev:W,median:P=T.quantile(R,.5),q1:T.quantile(R,.25),q3:T.quantile(R,.75),modeskew:0===W?0:(m-P)/W}},T.summary=function(M,g){var m=(g=g||Q.keys(M[0])).map(function(_){var p=T.profile(M,Q.$(_));return p.field=_,p});return m.__summary__=!0,m}},758:pn=>{var Ue=pn.exports,Me="__name__";Ue.namedfunc=function(B,E){return E[Me]=B,E},Ue.name=function(B){return null==B?null:B[Me]},Ue.identity=function(B){return B},Ue.true=Ue.namedfunc("true",function(){return!0}),Ue.false=Ue.namedfunc("false",function(){return!1}),Ue.duplicate=function(B){return JSON.parse(JSON.stringify(B))},Ue.equal=function(B,E){return JSON.stringify(B)===JSON.stringify(E)},Ue.extend=function(B){for(var E,M,g=1,m=arguments.length;g<m;++g)for(M in E=arguments[g])B[M]=E[M];return B},Ue.length=function(B){return null!=B&&null!=B.length?B.length:null},Ue.keys=function(B){var M,E=[];for(M in B)E.push(M);return E},Ue.vals=function(B){var M,E=[];for(M in B)E.push(B[M]);return E},Ue.toMap=function(B,E){return(E=Ue.$(E))?B.reduce(function(M,g){return M[E(g)]=1,M},{}):B.reduce(function(M,g){return M[g]=1,M},{})},Ue.keystr=function(B){var E=B.length;if(!E)return"";for(var M=String(B[0]),g=1;g<E;++g)M+="|"+String(B[g]);return M};var Q=Object.prototype.toString;Ue.isObject=function(B){return B===Object(B)},Ue.isFunction=function(B){return"[object Function]"===Q.call(B)},Ue.isString=function(B){return"string"==typeof value||"[object String]"===Q.call(B)},Ue.isArray=Array.isArray||function(B){return"[object Array]"===Q.call(B)},Ue.isNumber=function(B){return"number"==typeof B||"[object Number]"===Q.call(B)},Ue.isBoolean=function(B){return!0===B||!1===B||"[object Boolean]"==Q.call(B)},Ue.isDate=function(B){return"[object Date]"===Q.call(B)},Ue.isValid=function(B){return null!=B&&B==B},Ue.isBuffer="function"==typeof Buffer&&Buffer.isBuffer||Ue.false,Ue.number=function(B){return null==B||""===B?null:+B},Ue.boolean=function(B){return null==B||""===B?null:"false"!==B&&!!B},Ue.date=function(B,E){var M=E||Date;return null==B||""===B?null:M.parse(B)},Ue.array=function(B){return null!=B?Ue.isArray(B)?B:[B]:[]},Ue.str=function(B){return Ue.isArray(B)?"["+B.map(Ue.str)+"]":Ue.isObject(B)||Ue.isString(B)?JSON.stringify(B).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):B};var ie=/\[(.*?)\]|[^.\[]+/g;function xe(B,E){var g,M="";for(g=0;g<B;++g)M+=E;return M}function T(B,E,M){var g=0,m=B.split(re);return(B=M?(m=m.reverse()).filter(function(_){return(g+=_.length)<=E}).reverse():m.filter(function(_){return(g+=_.length)<=E})).length?B.join("").trim():m[0].slice(0,E)}Ue.field=function(B){return String(B).match(ie).map(function(E){return"["!==E[0]?E:"'"!==E[1]&&'"'!==E[1]?E.slice(1,-1):E.slice(2,-2).replace(/\\(["'])/g,"$1")})},Ue.accessor=function(B){return null==B||Ue.isFunction(B)?B:Ue.namedfunc(B,Function("x","return x["+Ue.field(B).map(Ue.str).join("][")+"];"))},Ue.$=Ue.accessor,Ue.mutator=function(B){var E;return Ue.isString(B)&&(E=Ue.field(B)).length>1?function(M,g){for(var m=0;m<E.length-1;++m)M=M[E[m]];M[E[m]]=g}:function(M,g){M[B]=g}},Ue.$func=function(B,E){return function(M){M=Ue.$(M)||Ue.identity;var g=B+(Ue.name(M)?"_"+Ue.name(M):"");return Ue.namedfunc(g,function(m){return E(M(m))})}},Ue.$valid=Ue.$func("valid",Ue.isValid),Ue.$length=Ue.$func("length",Ue.length),Ue.$in=function(B,E){B=Ue.$(B);var M=Ue.isArray(E)?Ue.toMap(E):E;return function(g){return!!M[B(g)]}},Ue.comparator=function(B){var E=[];return void 0===B&&(B=[]),B=Ue.array(B).map(function(M){var g=1;return"-"===M[0]?(g=-1,M=M.slice(1)):"+"===M[0]&&(g=1,M=M.slice(1)),E.push(g),Ue.accessor(M)}),function(M,g){var m,_,p,v;for(m=0,_=B.length;m<_;++m)if(v=Ue.cmp((p=B[m])(M),p(g)))return v*E[m];return 0}},Ue.cmp=function(B,E){return(B<E||null==B)&&null!=E?-1:(B>E||null==E)&&null!=B?1:(E=E instanceof Date?+E:E,(B=B instanceof Date?+B:B)!==B&&E==E?-1:E!=E&&B==B?1:0)},Ue.numcmp=function(B,E){return B-E},Ue.stablesort=function(B,E,M){var g=B.reduce(function(m,_,p){return m[M(_)]=p,m},{});return B.sort(function(m,_){var p=E(m),v=E(_);return p<v?-1:p>v?1:g[M(m)]-g[M(_)]}),B},Ue.permute=function(B){for(var M,g,E=B.length;E;)g=Math.floor(Math.random()*E--),M=B[E],B[E]=B[g],B[g]=M},Ue.pad=function(B,E,M,g){g=g||" ";var m=E-B.length;if(m<=0)return B;switch(M){case"left":return xe(m,g)+B;case"middle":case"center":return xe(Math.floor(m/2),g)+B+xe(Math.ceil(m/2),g);default:return B+xe(m,g)}},Ue.truncate=function(B,E,M,g,m){var _=B.length;if(_<=E)return B;m=void 0!==m?String(m):"\u2026";var p=Math.max(0,E-m.length);switch(M){case"left":return m+(g?T(B,p,1):B.slice(_-p));case"middle":case"center":var v=Math.ceil(p/2),w=Math.floor(p/2);return(g?T(B,v):B.slice(0,v))+m+(g?T(B,w,1):B.slice(_-w));default:return(g?T(B,p):B.slice(0,p))+m}};var re=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/},981:(pn,Ue,Me)=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});const Q=Me(346),ie=Me(203);var xe;(function(T){function re(g){let m=Q.findChildrenByType(g,"term").map(_=>Q.findChildrenByType(_,"literal").concat(Q.findChildrenByType(_,"rule-name"))[0].text);return Q.findChildrenByType(g,"list").forEach(_=>{m=m.concat(re(_))}),m}function B(g,m=T.defaultParser){let _=m.getAST(g);if(!_)throw new Error("Could not parse "+g);if(_.errors&&_.errors.length)throw _.errors[0];let v=Q.findChildrenByType(_,"rule").map(w=>{let x=Q.findChildrenByType(w,"rule-name")[0].text,A=Q.findChildrenByType(w,"firstExpression").concat(Q.findChildrenByType(w,"otherExpression")),R=[];return A.forEach(U=>{R.push(re(U))}),{name:x,bnf:R}});return v.some(w=>"EOL"==w.name)||v.push({name:"EOL",bnf:[['"\\r\\n"','"\\r"','"\\n"']]}),v}T.RULES=[{name:"syntax",bnf:[["RULE_EOL*","rule+"]]},{name:"rule",bnf:[['" "*','"<"',"rule-name",'">"','" "*','"::="',"firstExpression","otherExpression*",'" "*',"RULE_EOL+",'" "*']]},{name:"firstExpression",bnf:[['" "*',"list"]]},{name:"otherExpression",bnf:[['" "*','"|"','" "*',"list"]]},{name:"RULE_EOL",bnf:[['"\\r"'],['"\\n"']]},{name:"list",bnf:[["term",'" "*',"list"],["term"]]},{name:"term",bnf:[["literal"],['"<"',"rule-name",'">"']]},{name:"literal",bnf:[["'\"'","RULE_CHARACTER1*","'\"'"],['"\'"',"RULE_CHARACTER2*",'"\'"']]},{name:"RULE_CHARACTER",bnf:[['" "'],["RULE_LETTER"],["RULE_DIGIT"],["RULE_SYMBOL"]]},{name:"RULE_LETTER",bnf:[['"A"'],['"B"'],['"C"'],['"D"'],['"E"'],['"F"'],['"G"'],['"H"'],['"I"'],['"J"'],['"K"'],['"L"'],['"M"'],['"N"'],['"O"'],['"P"'],['"Q"'],['"R"'],['"S"'],['"T"'],['"U"'],['"V"'],['"W"'],['"X"'],['"Y"'],['"Z"'],['"a"'],['"b"'],['"c"'],['"d"'],['"e"'],['"f"'],['"g"'],['"h"'],['"i"'],['"j"'],['"k"'],['"l"'],['"m"'],['"n"'],['"o"'],['"p"'],['"q"'],['"r"'],['"s"'],['"t"'],['"u"'],['"v"'],['"w"'],['"x"'],['"y"'],['"z"']]},{name:"RULE_DIGIT",bnf:[['"0"'],['"1"'],['"2"'],['"3"'],['"4"'],['"5"'],['"6"'],['"7"'],['"8"'],['"9"']]},{name:"RULE_SYMBOL",bnf:[['"-"'],['"_"'],['"!"'],['"#"'],['"$"'],['"%"'],['"&"'],['"("'],['")"'],['"*"'],['"+"'],['","'],['"-"'],['"."'],['"/"'],['":"'],['";"'],['"<"'],['"="'],['">"'],['"?"'],['"@"'],['"["'],['"\\"'],['"]"'],['"^"'],['"_"'],['"`"'],['"{"'],['"|"'],['"}"'],['"~"']]},{name:"RULE_CHARACTER1",bnf:[["RULE_CHARACTER"],['"\'"']]},{name:"RULE_CHARACTER2",bnf:[["RULE_CHARACTER"],["'\"'"]]},{name:"rule-name",bnf:[["RULE_LETTER","RULE_CHAR*"]]},{name:"RULE_CHAR",bnf:[["RULE_LETTER"],["RULE_DIGIT"],['"_"'],['"-"']]}],T.defaultParser=new ie.Parser(T.RULES,{debug:!1}),T.getRules=B,T.Transform=function E(g,m=T.defaultParser){return B(g.join(""),m)},T.Parser=class M extends ie.Parser{constructor(m,_){super(B(m,_&&!0===_.debugRulesParser?new ie.Parser(T.RULES,{debug:!0}):T.defaultParser),_),this.source=m}emitSource(){return this.source}}})(xe||(xe={})),Ue.default=xe},394:(pn,Ue,Me)=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});const Q=Me(9),ie=Me(203);var xe;(function(T){T.RULES=[{name:"Grammar",bnf:[["RULE_S*","Attributes?","RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","%Choice","RULE_WHITESPACE*","Attributes?","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Attributes",bnf:[['"{"',"Attribute","%Attributes*","RULE_S*",'"}"']]},{name:"%Attributes",bnf:[["RULE_S*",'","',"Attribute"]],fragment:!0},{name:"Attribute",bnf:[["RULE_S*","NCName","RULE_WHITESPACE*",'"="',"RULE_WHITESPACE*","AttributeValue"]]},{name:"AttributeValue",bnf:[["NCName"],[/[1-9][0-9]*/]]},{name:"%Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_S*",'"|"',"RULE_S*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["%Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","%Item"],["%Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"%Item",bnf:[["RULE_WHITESPACE*","PrimaryPreDecoration?","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"PrimaryPreDecoration",bnf:[['"&"'],['"!"'],['"~"']]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_S*","%Choice","RULE_S*",'")"']]},{name:"StringLiteral",bnf:[["'\"'",/[^"]*/,"'\"'"],['"\'"',/[^']*/,'"\'"']]},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[[/[^*]/],['"*"+',/[^/]*/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],T.defaultParser=new ie.Parser(T.RULES,{debug:!1});const re=/^(!|&)/,B=/(\?|\+|\*)$/,E=/^%/;function _(H,P){let $=ie.findRuleByName(H,P);return $?$.bnf.map(X=>function m(H,P){return H.map($=>function M(H,P){if("string"==typeof H){let $=B.exec(H),X=re.exec(H),V=X?X[0]:"",N=$?$[0]+" ":"";return E.test(H)?function g(H,P){let $=ie.findRuleByName(H,P);return $&&1==$.bnf.length&&1==$.bnf[0].length&&($.bnf[0][0]instanceof RegExp||'"'==$.bnf[0][0][0]||"'"==$.bnf[0][0][0])}(H,P)?V+_(H,P)+N:V+"("+_(H,P)+")"+N:H.replace(re,V)}return H.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}($,P)).join(" ")}(X,P)).join(" | "):"RULE_NOT_FOUND {"+H+"}"}function p(H){let P=[];return H.grammarRules.forEach($=>{if(!/^%/.test($.name)){let X=$.recover?" { recoverUntil="+$.recover+" }":"";P.push($.name+" ::= "+_($.name,H)+X)}}),P.join("\n")}T.emit=p;let v=0;function x(H){return new RegExp(H.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function R(H,P,$,X){let V=P.children.filter(D=>"Attributes"==D.type)[0],N={};V&&V.children.forEach(D=>{let Y=D.children.filter(ee=>"NCName"==ee.type)[0].text;if(Y in N)throw new Q.TokenError("Duplicated attribute "+Y,D);N[Y]=D.children.filter(ee=>"AttributeValue"==ee.type)[0].text});let te=P.children.filter(D=>"SequenceOrDifference"==D.type).map(D=>function A(H,P,$,X){let V=null,N=[];return P.children.forEach((te,G)=>{"Minus"==te.type&&function w(H,P){throw console.log("reberia restar "+P+" a "+H),new Error("Difference not supported yet")}(V,te);let D=P.children[G+1];D=D&&"PrimaryDecoration"==D.type&&D.text||"";let Y="";V&&"PrimaryPreDecoration"==V.type&&(Y=V.text);let ee="~"==Y?1:void 0;switch(ee&&(Y=""),te.type){case"SubItem":let fe="%"+($+v++);R(H,te,fe,X),N.push(Y+fe+D);break;case"NCName":N.push(Y+te.text+D);break;case"StringLiteral":if(D||Y||!/^['"/()a-zA-Z0-9&_.:=,+*\-\^\\]+$/.test(te.text))N.push(Y+te.text+D);else for(const _e of te.text.slice(1,-1))X&&"true"==X.ignoreCase&&/[a-zA-Z]/.test(_e)?N.push(new RegExp("["+_e.toUpperCase()+_e.toLowerCase()+"]")):N.push(new RegExp(ie.escapeRegExp(_e)));break;case"CharCode":case"CharClass":if(D||Y){let _e={name:"%"+($+v++),bnf:[[x(te.text)]],pinned:ee};H.push(_e),N.push(Y+_e.name+D)}else N.push(x(te.text));break;case"PrimaryPreDecoration":case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+te.type+" -> "+JSON.stringify(te.text))}V=te}),N}(H,D,$,X||N)),G={name:$,bnf:te};if(0==$.indexOf("%")&&(G.fragment=!0),N.recoverUntil&&(G.recover=N.recoverUntil,G.bnf.length>1))throw new Q.TokenError("only one-option productions are suitable for error recovering",P);if("pin"in N){let D=parseInt(N.pin);if(isNaN(D)||(G.pinned=D),G.bnf.length>1)throw new Q.TokenError("only one-option productions are suitable for pinning",P)}G.implicitWs="ws"in N?"explicit"!=N.ws:null,G.fragment=G.fragment||"true"==N.fragment,G.simplifyWhenOneChildren="true"==N.simplifyWhenOneChildren,H.push(G)}function U(H,P=T.defaultParser){let $=P.getAST(H);if(!$)throw new Error("Could not parse "+H);if($.errors&&$.errors.length)throw $.errors[0];let X=null,V=$.children.filter(G=>"Attributes"==G.type)[0],N={};V&&V.children.forEach(G=>{let D=G.children.filter(Y=>"NCName"==Y.type)[0].text;if(D in N)throw new Q.TokenError("Duplicated attribute "+D,G);N[D]=G.children.filter(Y=>"AttributeValue"==Y.type)[0].text}),X="implicit"==N.ws;let te=[];return $.children.filter(G=>"Production"==G.type).map(G=>{let D=G.children.filter(Y=>"NCName"==Y.type)[0].text;R(te,G,D)}),te.forEach(G=>{null===G.implicitWs&&(G.implicitWs=X)}),te}T.getRules=U,T.Transform=function L(H,P=T.defaultParser){return U(H.join(""),P)},T.Parser=class W extends ie.Parser{constructor(P,$){super(U(P,$&&!0===$.debugRulesParser?new ie.Parser(T.RULES,{debug:!0}):T.defaultParser),$)}emitSource(){return p(this)}}})(xe||(xe={})),Ue.default=xe},531:(pn,Ue,Me)=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});const Q=Me(203);var ie;(function(xe){xe.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[["'\"'",/[^"]*/,"'\"'"],['"\'"',/[^']*/,'"\'"']],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],xe.defaultParser=new Q.Parser(xe.RULES,{debug:!1});const T=/^(!|&)/,re=/(\?|\+|\*)$/,B=/^%/;function m(W,H){let P=Q.findRuleByName(W,H);return P?P.bnf.map($=>function g(W,H){return W.map(P=>function E(W,H){if("string"==typeof W){if(T.test(W))return"";if(B.test(W)){let $=re.exec(W),X=$?$[0]+" ":"";return function M(W,H){let P=Q.findRuleByName(W,H);return P&&1==P.bnf.length&&1==P.bnf[0].length&&(P.bnf[0][0]instanceof RegExp||'"'==P.bnf[0][0][0]||"'"==P.bnf[0][0][0])}(W,H)?m(W,H)+X:"("+m(W,H)+")"+X}return W}return W.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}(P,H)).join(" ")}($,H)).join(" | "):"RULE_NOT_FOUND {"+W+"}"}function _(W){let H=[];return W.grammarRules.forEach(P=>{if(!/^%/.test(P.name)){let $=P.recover?" /* { recoverUntil="+P.recover+" } */":"";H.push(P.name+" ::= "+m(P.name,W)+$)}}),H.join("\n")}xe.emit=_;let p=0;function w(W){return new RegExp(W.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function A(W,H,P){let $=H.children.filter(N=>"SequenceOrDifference"==N.type).map(N=>function x(W,H,P){let $=null,X=[];return H.children.forEach((V,N)=>{"Minus"==V.type&&function v(W,H){throw console.log("reberia restar "+H+" a "+W),new Error("Difference not supported yet")}($,V);let te=H.children[N+1];switch(te=te&&"PrimaryDecoration"==te.type&&te.text||"",V.type){case"SubItem":let D="%"+(P+p++);A(W,V,D),X.push(""+D+te);break;case"NCName":case"StringLiteral":X.push(""+V.text+te);break;case"CharCode":case"CharClass":if(te){let Y={name:"%"+(P+p++),bnf:[[w(V.text)]]};W.push(Y),X.push(""+Y.name+te)}else X.push(w(V.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+V.type+" -> "+JSON.stringify(V.text))}$=V}),X}(W,N,P)),X={name:P,bnf:$},V=null;$.forEach(N=>{V=V||N.recover,delete N.recover}),0==P.indexOf("%")&&(X.fragment=!0),V&&(X.recover=V),W.push(X)}function R(W,H=xe.defaultParser){let P=H.getAST(W);if(!P)throw new Error("Could not parse "+W);if(P.errors&&P.errors.length)throw P.errors[0];let $=[];return P.children.filter(X=>"Production"==X.type).map(X=>{let V=X.children.filter(N=>"NCName"==N.type)[0].text;A($,X,V)}),$}xe.getRules=R,xe.Transform=function U(W,H=xe.defaultParser){return R(W.join(""),H)},xe.Parser=class L extends Q.Parser{constructor(H,P){super(R(H,P&&!0===P.debugRulesParser?new Q.Parser(xe.RULES,{debug:!0}):xe.defaultParser),P)}emitSource(){return _(this)}}})(ie||(ie={})),Ue.default=ie},825:(pn,Ue,Me)=>{"use strict";Me(981);var xe=Me(531);Object.defineProperty(Ue,"W3C",{enumerable:!0,get:function(){return xe.default}});Me(394)},203:(pn,Ue,Me)=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.Parser=Ue.findRuleByName=Ue.parseRuleName=Ue.escapeRegExp=Ue.readToken=void 0;const Q=/^[A-Z0-9_]+$/,ie=/(\?|\+|\*)$/,xe=/^(@|&|!)/,T="WS",re=Me(9);function B(A,R){let U=R.exec(A);return U&&0==U.index?0==U[0].length&&R.source.length>0?null:{type:null,text:U[0],rest:A.substr(U[0].length),start:0,end:U[0].length-1,fullText:U[0],errors:[],children:[],parent:null}:null}function E(A){return A.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function M(A){A.rest="",A.children&&A.children.forEach(R=>M(R))}function g(A,R){A.start+=R,A.end+=R,A.children&&A.children.forEach(U=>g(U,A.start))}function m(A,R){R.errors&&R.errors.length&&R.errors.forEach(U=>A.push(U)),R.children&&R.children.forEach(U=>m(A,U))}function _(A){let R=ie.exec(A),U=xe.exec(A),L=R&&R[0]||"",W=U&&U[0]||"",H={raw:A,name:A.replace(ie,"").replace(xe,""),isOptional:"?"==L||"*"==L,allowRepetition:"+"==L||"*"==L,atLeastOne:"+"==L,lookupPositive:"&"==W,lookupNegative:"!"==W,pinned:"@"==W,lookup:!1,isLiteral:!1};return H.isLiteral="'"==H.name[0]||'"'==H.name[0],H.lookup=H.lookupNegative||H.lookupPositive,H}function p(A,R){let U=_(A);return R.cachedRules[U.name]||null}function v(A,R){if(A.children){let U=A.children.filter(L=>L.type&&R.test(L.type));for(let L=0;L<U.length;L++){let W=A.children.indexOf(U[L]);-1!=W&&A.children.splice(W,1)}A.children.forEach(L=>v(L,R))}}Ue.readToken=B,Ue.escapeRegExp=E,Ue.parseRuleName=_,Ue.findRuleByName=p;const w=["EOF"];class x{constructor(R,U){this.grammarRules=R,this.options=U,this.cachedRules={},this.debug=!!U&&!0===U.debug;let L=[],W=[];if(R.forEach(H=>{let P=_(H.name);if(P.name in this.cachedRules)L.push("Duplicated rule "+P.name);else{if(this.cachedRules[P.name]=H,H.bnf&&H.bnf.length)H.bnf.forEach($=>{if("string"==typeof $[0]&&_($[0]).name==H.name){let V="Left recursion is not allowed, rule: "+H.name;-1==L.indexOf(V)&&L.push(V)}$.forEach(X=>{if("string"==typeof X){let V=_(X);!V.isLiteral&&-1==W.indexOf(V.name)&&-1==w.indexOf(V.name)&&W.push(V.name)}})});else{let $="Missing rule content, rule: "+H.name;-1==L.indexOf($)&&L.push($)}T==H.name&&(H.implicitWs=!1),H.implicitWs&&-1==W.indexOf(T)&&W.push(T),H.recover&&-1==W.indexOf(H.recover)&&W.push(H.recover)}}),W.forEach(H=>{H in this.cachedRules||L.push("Missing rule "+H)}),L.length)throw new Error(L.join("\n"))}getAST(R,U){U||(U=this.grammarRules.filter(W=>!W.fragment&&0!=W.name.indexOf("%"))[0].name);let L=this.parse(R,U);if(L){m(L.errors,L),g(L,0),v(L,/^%/),(!this.options||!this.options.keepUpperRules)&&v(L,Q);let W=L.rest;W&&new re.TokenError("Unexpected end of input: \n"+W,L),M(L),L.rest=W}return L}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(R,U,L=0){let P,W=null,H=_(U),$=this.debug&&!Q.test(H.name);$&&console.log(new Array(L).join("\u2502  ")+"Trying to get "+U+" from "+JSON.stringify(R.split("\n")[0]));let X=H.name,V=p(H.name,this);if("EOF"==H.name){if(R.length)return null;if(0==R.length)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!V&&H.isLiteral){let N=H.name.trim();if(N.startsWith('"')?N=JSON.parse(N):N.startsWith("'")&&(N=N.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),""===N)return{type:"%%EMPTY%%",text:"",rest:R,start:0,end:0,fullText:"",errors:[],children:[],parent:null};P=new RegExp(E(N)),X=null}}catch(N){return N instanceof ReferenceError&&console.error(N),null}if(P){let N=B(R,P);if(N)return N.type=X,N}else{let N=V.bnf;N instanceof Array&&N.forEach(te=>{if(W)return;let G=null,D={type:H.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:R};V.fragment&&(D.fragment=!0);let Y=R,ee=0,fe=te.length>0,_e=!1;for(let we=0;we<te.length;we++)if("string"==typeof te[we]){let ke=_(te[we]);fe=fe&&ke.isOptional;let Ce,We=!1;do{if(Ce=null,V.implicitWs&&(Ce=this.parse(Y,ke.name,L+1),!Ce)){let Te;do{if(Te=this.parse(Y,T,L+1),!Te)break;D.text=D.text+Te.text,D.end=D.text.length,Te.parent=D,D.children.push(Te),Y=Y.substr(Te.text.length),ee+=Te.text.length}while(Te&&Te.text.length)}if(Ce=Ce||this.parse(Y,ke.name,L+1),ke.lookupNegative){if(Ce)return;break}if(ke.lookupPositive&&!Ce)return;if(!Ce&&(ke.isOptional||ke.atLeastOne&&We))break;if(Ce&&V.pinned==we+1&&(G=Ce,$&&console.log(new Array(L+1).join("\u2502  ")+"\u2514\u2500 "+Ce.type+" PINNED")),Ce||(Ce=this.parseRecovery(V,Y,L+1)),!Ce){if(!G)return;W=D,Ce={type:"SyntaxError",text:Y,children:[],end:Y.length,errors:[],fullText:"",parent:null,start:0,rest:""},new re.TokenError(Y.length?`Unexpected end of input. Expecting ${ke.name} Got: ${Y}`:`Unexpected end of input. Missing ${ke.name}`,Ce),$&&console.log(new Array(L+1).join("\u2502  ")+"\u2514\u2500 "+Ce.type+" "+JSON.stringify(Ce.text))}if(We=!0,_e=!0,"%%EMPTY%%"==Ce.type)break;Ce.start+=ee,Ce.end+=ee,!ke.lookupPositive&&Ce.type&&(Ce.fragment?Ce.children&&Ce.children.forEach(Te=>{Te.start+=ee,Te.end+=ee,Te.parent=D,D.children.push(Te)}):(Ce.parent=D,D.children.push(Ce))),ke.lookup&&(Ce.lookup=!0),$&&console.log(new Array(L+1).join("\u2502  ")+"\u2514\u2500 "+Ce.type+" "+JSON.stringify(Ce.text)),!ke.lookup&&!Ce.lookup&&(D.text=D.text+Ce.text,D.end=D.text.length,Y=Y.substr(Ce.text.length),ee+=Ce.text.length),D.rest=Y}while(Ce&&ke.allowRepetition&&Y.length&&!Ce.lookup)}else{let ke=B(Y,te[we]);if(!ke)return;$&&console.log(new Array(L+1).join("\u2502  ")+"\u2514> "+JSON.stringify(ke.text)+te[we].source),_e=!0,ke.start+=ee,ke.end+=ee,D.text=D.text+ke.text,D.end=D.text.length,Y=Y.substr(ke.text.length),ee+=ke.text.length,D.rest=Y}_e&&(W=D,$&&console.log(new Array(L).join("\u2502  ")+"\u251c<\u2500\u2534< PUSHING "+W.type+" "+JSON.stringify(W.text)))}),W&&V.simplifyWhenOneChildren&&1==W.children.length&&(W=W.children[0])}return W||$&&console.log(U+" NOT RESOLVED FROM "+R),W}parseRecovery(R,U,L){if(R.recover&&U.length){let W=this.debug;W&&console.log(new Array(L+1).join("\u2502  ")+"Trying to recover until token "+R.recover+" from "+JSON.stringify(U.split("\n")[0]+U.split("\n")[1]));let P,H={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""};do{if(P=this.parse(U,R.recover,L+1),P){new re.TokenError('Unexpected input: "'+H.text+`" Expecting: ${R.name}`,H);break}H.text=H.text+U[0],H.end=H.text.length,U=U.substr(1)}while(!P&&U.length>0);if(H.text.length>0&&P)return W&&console.log(new Array(L+1).join("\u2502  ")+"Recovered text: "+JSON.stringify(H.text)),H}return null}}Ue.Parser=x,Ue.default=x},346:(pn,Ue)=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.findChildrenByType=void 0,Ue.findChildrenByType=function Me(Q,ie){return Q.children?Q.children.filter(xe=>xe.type==ie):[]}},9:(pn,Ue)=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.TokenError=void 0;class Me extends Error{constructor(ie,xe){if(super(ie),this.message=ie,this.token=xe,!xe||!xe.errors)throw this;xe.errors.push(this)}inspect(){return"SyntaxError: "+this.message}}Ue.TokenError=Me},235:(pn,Ue,Me)=>{"use strict";Me(203),Me(9);Ue.Grammars=Me(825)},559:pn=>{"use strict";pn.exports=function Ue(Me,Q){if(Me===Q)return!0;if(Me&&Q&&"object"==typeof Me&&"object"==typeof Q){if(Me.constructor!==Q.constructor)return!1;var ie,xe,T;if(Array.isArray(Me)){if((ie=Me.length)!=Q.length)return!1;for(xe=ie;0!=xe--;)if(!Ue(Me[xe],Q[xe]))return!1;return!0}if(Me.constructor===RegExp)return Me.source===Q.source&&Me.flags===Q.flags;if(Me.valueOf!==Object.prototype.valueOf)return Me.valueOf()===Q.valueOf();if(Me.toString!==Object.prototype.toString)return Me.toString()===Q.toString();if((ie=(T=Object.keys(Me)).length)!==Object.keys(Q).length)return!1;for(xe=ie;0!=xe--;)if(!Object.prototype.hasOwnProperty.call(Q,T[xe]))return!1;for(xe=ie;0!=xe--;){var re=T[xe];if(!Ue(Me[re],Q[re]))return!1}return!0}return Me!=Me&&Q!=Q}},245:pn=>{"use strict";pn.exports=function(Ue,Me){Me||(Me={}),"function"==typeof Me&&(Me={cmp:Me});var T,Q="boolean"==typeof Me.cycles&&Me.cycles,ie=Me.cmp&&(T=Me.cmp,function(re){return function(B,E){return T({key:B,value:re[B]},{key:E,value:re[E]})}}),xe=[];return function T(re){if(re&&re.toJSON&&"function"==typeof re.toJSON&&(re=re.toJSON()),void 0!==re){if("number"==typeof re)return isFinite(re)?""+re:"null";if("object"!=typeof re)return JSON.stringify(re);var B,E;if(Array.isArray(re)){for(E="[",B=0;B<re.length;B++)B&&(E+=","),E+=T(re[B])||"null";return E+"]"}if(null===re)return"null";if(-1!==xe.indexOf(re)){if(Q)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var M=xe.push(re)-1,g=Object.keys(re).sort(ie&&ie(re));for(E="",B=0;B<g.length;B++){var m=g[B],_=T(re[m]);!_||(E&&(E+=","),E+=JSON.stringify(m)+":"+_)}return xe.splice(M,1),"{"+E+"}"}}(Ue)}},412:(pn,Ue,Me)=>{"use strict";Me.d(Ue,{Z:()=>xe,R:()=>re});var ie=Me(665);function xe(B,E){return"string"==typeof E&&(E=B.objects[E]),"GeometryCollection"===E.type?{type:"FeatureCollection",features:E.geometries.map(function(M){return T(B,M)})}:T(B,E)}function T(B,E){var M=E.id,g=E.bbox,m=E.properties??{},_=re(B,E);return null==M&&null==g?{type:"Feature",properties:m,geometry:_}:null==g?{type:"Feature",id:M,properties:m,geometry:_}:{type:"Feature",id:M,bbox:g,properties:m,geometry:_}}function re(B,E){var M=(0,ie.Z)(B.transform),g=B.arcs;function m(A,R){R.length&&R.pop();for(var U=g[A<0?~A:A],L=0,W=U.length;L<W;++L)R.push(M(U[L],L));A<0&&function Q(B,E){for(var M,g=B.length,m=g-E;m<--g;)M=B[m],B[m++]=B[g],B[g]=M}(R,W)}function _(A){return M(A)}function p(A){for(var R=[],U=0,L=A.length;U<L;++U)m(A[U],R);return R.length<2&&R.push(R[0]),R}function v(A){for(var R=p(A);R.length<4;)R.push(R[0]);return R}function w(A){return A.map(v)}return function x(A){var U,R=A.type;switch(R){case"GeometryCollection":return{type:R,geometries:A.geometries.map(x)};case"Point":U=_(A.coordinates);break;case"MultiPoint":U=A.coordinates.map(_);break;case"LineString":U=p(A.arcs);break;case"MultiLineString":U=A.arcs.map(p);break;case"Polygon":U=w(A.arcs);break;case"MultiPolygon":U=A.arcs.map(w);break;default:return null}return{type:R,coordinates:U}}(E)}},66:(pn,Ue,Me)=>{"use strict";function Q(ie){return ie}Me.d(Ue,{Z:()=>Q})},134:(pn,Ue,Me)=>{"use strict";Me.r(Ue),Me.d(Ue,{bbox:()=>ie,feature:()=>xe.Z,merge:()=>E,mergeArcs:()=>M,mesh:()=>T.Z,meshArcs:()=>T.u,neighbors:()=>m,quantize:()=>v,transform:()=>Q.Z,untransform:()=>p});var Q=Me(665);function ie(w){var A,x=(0,Q.Z)(w.transform),R=1/0,U=R,L=-R,W=-R;function H($){($=x($))[0]<R&&(R=$[0]),$[0]>L&&(L=$[0]),$[1]<U&&(U=$[1]),$[1]>W&&(W=$[1])}function P($){switch($.type){case"GeometryCollection":$.geometries.forEach(P);break;case"Point":H($.coordinates);break;case"MultiPoint":$.coordinates.forEach(H)}}for(A in w.arcs.forEach(function($){for(var N,X=-1,V=$.length;++X<V;)(N=x($[X],X))[0]<R&&(R=N[0]),N[0]>L&&(L=N[0]),N[1]<U&&(U=N[1]),N[1]>W&&(W=N[1])}),w.objects)P(w.objects[A]);return[R,U,L,W]}var xe=Me(412),T=Me(57),re=Me(607);function E(w){return(0,xe.R)(w,M.apply(this,arguments))}function M(w,x){var A={},R=[],U=[];function W(P){P.forEach(function($){$.forEach(function(X){(A[X=X<0?~X:X]||(A[X]=[])).push(P)})}),R.push(P)}function H(P){return function B(w){for(var R,x=-1,A=w.length,U=w[A-1],L=0;++x<A;)L+=(R=U)[0]*(U=w[x])[1]-R[1]*U[0];return Math.abs(L)}((0,xe.R)(w,{type:"Polygon",arcs:[P]}).coordinates[0])}return x.forEach(function L(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(L);break;case"Polygon":W(P.arcs);break;case"MultiPolygon":P.arcs.forEach(W)}}),R.forEach(function(P){if(!P._){var $=[],X=[P];for(P._=1,U.push($);P=X.pop();)$.push(P),P.forEach(function(V){V.forEach(function(N){A[N<0?~N:N].forEach(function(te){te._||(te._=1,X.push(te))})})})}}),R.forEach(function(P){delete P._}),{type:"MultiPolygon",arcs:U.map(function(P){var X,$=[];if(P.forEach(function(D){D.forEach(function(Y){Y.forEach(function(ee){A[ee<0?~ee:ee].length<2&&$.push(ee)})})}),(X=($=(0,re.Z)(w,$)).length)>1)for(var te,G,V=1,N=H($[0]);V<X;++V)(te=H($[V]))>N&&(G=$[0],$[0]=$[V],$[V]=G,N=te);return $}).filter(function(P){return P.length>0})}}function g(w,x){for(var A=0,R=w.length;A<R;){var U=A+R>>>1;w[U]<x?A=U+1:R=U}return A}function m(w){var x={},A=w.map(function(){return[]});function R(D,Y){D.forEach(function(ee){ee<0&&(ee=~ee);var fe=x[ee];fe?fe.push(Y):x[ee]=[Y]})}function U(D,Y){D.forEach(function(ee){R(ee,Y)})}var W={LineString:R,MultiLineString:U,Polygon:U,MultiPolygon:function(D,Y){D.forEach(function(ee){U(ee,Y)})}};for(var H in w.forEach(function L(D,Y){"GeometryCollection"===D.type?D.geometries.forEach(function(ee){L(ee,Y)}):D.type in W&&W[D.type](D.arcs,Y)}),x)for(var P=x[H],$=P.length,X=0;X<$;++X)for(var V=X+1;V<$;++V){var G,N=P[X],te=P[V];(G=A[N])[H=g(G,te)]!==te&&G.splice(H,0,te),(G=A[te])[H=g(G,N)]!==N&&G.splice(H,0,N)}return A}var _=Me(66);function p(w){if(null==w)return _.Z;var x,A,R=w.scale[0],U=w.scale[1],L=w.translate[0],W=w.translate[1];return function(H,P){P||(x=A=0);var $=2,X=H.length,V=new Array(X),N=Math.round((H[0]-L)/R),te=Math.round((H[1]-W)/U);for(V[0]=N-x,x=N,V[1]=te-A,A=te;$<X;)V[$]=H[$],++$;return V}}function v(w,x){if(w.transform)throw new Error("already quantized");if(x&&x.scale)P=w.bbox;else{if(!((W=Math.floor(x))>=2))throw new Error("n must be \u22652");var W,A=(P=w.bbox||ie(w))[0],R=P[1],U=P[2],L=P[3];x={scale:[U-A?(U-A)/(W-1):1,L-R?(L-R)/(W-1):1],translate:[A,R]}}var P,$,H=p(x),X=w.objects,V={};function N(D){return H(D)}function te(D){var Y;switch(D.type){case"GeometryCollection":Y={type:"GeometryCollection",geometries:D.geometries.map(te)};break;case"Point":Y={type:"Point",coordinates:N(D.coordinates)};break;case"MultiPoint":Y={type:"MultiPoint",coordinates:D.coordinates.map(N)};break;default:return D}return null!=D.id&&(Y.id=D.id),null!=D.bbox&&(Y.bbox=D.bbox),null!=D.properties&&(Y.properties=D.properties),Y}for($ in X)V[$]=te(X[$]);return{type:"Topology",bbox:P,transform:x,objects:V,arcs:w.arcs.map(function G(D){var _e,Y=0,ee=1,fe=D.length,we=new Array(fe);for(we[0]=H(D[0],0);++Y<fe;)((_e=H(D[Y],Y))[0]||_e[1])&&(we[ee++]=_e);return 1===ee&&(we[ee++]=[0,0]),we.length=ee,we})}}},57:(pn,Ue,Me)=>{"use strict";Me.d(Ue,{Z:()=>xe,u:()=>T});var Q=Me(412),ie=Me(607);function xe(B){return(0,Q.R)(B,T.apply(this,arguments))}function T(B,E,M){var g,m,_;if(arguments.length>1)g=re(0,E,M);else for(m=0,g=new Array(_=B.arcs.length);m<_;++m)g[m]=m;return{type:"MultiLineString",arcs:(0,ie.Z)(B,g)}}function re(B,E,M){var _,g=[],m=[];function p(R){var U=R<0?~R:R;(m[U]||(m[U]=[])).push({i:R,g:_})}function v(R){R.forEach(p)}function w(R){R.forEach(v)}return function A(R){switch(_=R,R.type){case"GeometryCollection":R.geometries.forEach(A);break;case"LineString":v(R.arcs);break;case"MultiLineString":case"Polygon":w(R.arcs);break;case"MultiPolygon":!function x(R){R.forEach(w)}(R.arcs)}}(E),m.forEach(null==M?function(R){g.push(R[0].i)}:function(R){M(R[0].g,R[R.length-1].g)&&g.push(R[0].i)}),g}},607:(pn,Ue,Me)=>{"use strict";function Q(ie,xe){var T={},re={},B={},E=[],M=-1;function m(_,p){for(var v in _){var w=_[v];delete p[w.start],delete w.start,delete w.end,w.forEach(function(x){T[x<0?~x:x]=1}),E.push(w)}}return xe.forEach(function(_,p){var w,v=ie.arcs[_<0?~_:_];v.length<3&&!v[1][0]&&!v[1][1]&&(w=xe[++M],xe[M]=_,xe[p]=w)}),xe.forEach(function(_){var x,A,p=function g(_){var w,p=ie.arcs[_<0?~_:_],v=p[0];return ie.transform?(w=[0,0],p.forEach(function(x){w[0]+=x[0],w[1]+=x[1]})):w=p[p.length-1],_<0?[w,v]:[v,w]}(_),v=p[0],w=p[1];if(x=B[v])if(delete B[x.end],x.push(_),x.end=w,A=re[w]){delete re[A.start];var R=A===x?x:x.concat(A);re[R.start=x.start]=B[R.end=A.end]=R}else re[x.start]=B[x.end]=x;else if(x=re[w])if(delete re[x.start],x.unshift(_),x.start=v,A=B[v]){delete B[A.end];var U=A===x?x:A.concat(x);re[U.start=A.start]=B[U.end=x.end]=U}else re[x.start]=B[x.end]=x;else re[(x=[_]).start=v]=B[x.end=w]=x}),m(B,re),m(re,B),xe.forEach(function(_){T[_<0?~_:_]||E.push([_])}),E}Me.d(Ue,{Z:()=>Q})},665:(pn,Ue,Me)=>{"use strict";Me.d(Ue,{Z:()=>ie});var Q=Me(66);function ie(xe){if(null==xe)return Q.Z;var T,re,B=xe.scale[0],E=xe.scale[1],M=xe.translate[0],g=xe.translate[1];return function(m,_){_||(T=re=0);var p=2,v=m.length,w=new Array(v);for(w[0]=(T+=m[0])*B+M,w[1]=(re+=m[1])*E+g;p<v;)w[p]=m[p],++p;return w}}},478:pn=>{var Ue=function(){"use strict";function Me(m,_){return null!=_&&m instanceof _}var Q,ie,xe;try{Q=Map}catch{Q=function(){}}try{ie=Set}catch{ie=function(){}}try{xe=Promise}catch{xe=function(){}}function T(m,_,p,v,w){"object"==typeof _&&(p=_.depth,v=_.prototype,w=_.includeNonEnumerable,_=_.circular);var x=[],A=[],R=typeof Buffer<"u";return typeof _>"u"&&(_=!0),typeof p>"u"&&(p=1/0),function U(L,W){if(null===L)return null;if(0===W)return L;var H,P;if("object"!=typeof L)return L;if(Me(L,Q))H=new Q;else if(Me(L,ie))H=new ie;else if(Me(L,xe))H=new xe(function(ee,fe){L.then(function(_e){ee(U(_e,W-1))},function(_e){fe(U(_e,W-1))})});else if(T.__isArray(L))H=[];else if(T.__isRegExp(L))H=new RegExp(L.source,g(L)),L.lastIndex&&(H.lastIndex=L.lastIndex);else if(T.__isDate(L))H=new Date(L.getTime());else{if(R&&Buffer.isBuffer(L))return H=Buffer.allocUnsafe?Buffer.allocUnsafe(L.length):new Buffer(L.length),L.copy(H),H;Me(L,Error)?H=Object.create(L):typeof v>"u"?(P=Object.getPrototypeOf(L),H=Object.create(P)):(H=Object.create(v),P=v)}if(_){var $=x.indexOf(L);if(-1!=$)return A[$];x.push(L),A.push(H)}for(var X in Me(L,Q)&&L.forEach(function(ee,fe){var _e=U(fe,W-1),we=U(ee,W-1);H.set(_e,we)}),Me(L,ie)&&L.forEach(function(ee){var fe=U(ee,W-1);H.add(fe)}),L){var V;P&&(V=Object.getOwnPropertyDescriptor(P,X)),(!V||null!=V.set)&&(H[X]=U(L[X],W-1))}if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(L);for(X=0;X<N.length;X++){var te=N[X];(G=Object.getOwnPropertyDescriptor(L,te))&&!G.enumerable&&!w||(H[te]=U(L[te],W-1),G.enumerable||Object.defineProperty(H,te,{enumerable:!1}))}}if(w){var D=Object.getOwnPropertyNames(L);for(X=0;X<D.length;X++){var G,Y=D[X];(G=Object.getOwnPropertyDescriptor(L,Y))&&G.enumerable||(H[Y]=U(L[Y],W-1),Object.defineProperty(H,Y,{enumerable:!1}))}}return H}(m,p)}function re(m){return Object.prototype.toString.call(m)}function g(m){var _="";return m.global&&(_+="g"),m.ignoreCase&&(_+="i"),m.multiline&&(_+="m"),_}return T.clonePrototype=function(_){if(null===_)return null;var p=function(){};return p.prototype=_,new p},T.__objToStr=re,T.__isDate=function B(m){return"object"==typeof m&&"[object Date]"===re(m)},T.__isArray=function E(m){return"object"==typeof m&&"[object Array]"===re(m)},T.__isRegExp=function M(m){return"object"==typeof m&&"[object RegExp]"===re(m)},T.__getRegExpFlags=g,T}();pn.exports&&(pn.exports=Ue)},789:(pn,Ue,Me)=>{var ie,Q=(ie=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(T){T=typeof(T=T||{})<"u"?T:{};var B,re={};for(B in T)T.hasOwnProperty(B)&&(re[B]=T[B]);T.arguments=[],T.thisProgram="./this.program",T.quit=function(S,F){throw F},T.preRun=[],T.postRun=[];var E=!1,M=!1,g=!1,m=!1;E="object"==typeof window,M="function"==typeof importScripts,g="object"==typeof process&&!E&&!M,m=!E&&!g&&!M;var v,w,_="";function p(S){return T.locateFile?T.locateFile(S,_):_+S}g?(_=__dirname+"/",T.read=function(F,j){var se;return v||(v=Me(29)),w||(w=Me(350)),F=w.normalize(F),se=v.readFileSync(F),j?se:se.toString()},T.readBinary=function(F){var j=T.read(F,!0);return j.buffer||(j=new Uint8Array(j)),we(j.buffer),j},process.argv.length>1&&(T.thisProgram=process.argv[1].replace(/\\/g,"/")),T.arguments=process.argv.slice(2),process.on("uncaughtException",function(S){if(!(S instanceof g_))throw S}),process.on("unhandledRejection",Ji),T.quit=function(S){process.exit(S)},T.inspect=function(){return"[Emscripten Module object]"}):m?(typeof read<"u"&&(T.read=function(F){return read(F)}),T.readBinary=function(F){var j;return"function"==typeof readbuffer?new Uint8Array(readbuffer(F)):(we("object"==typeof(j=read(F,"binary"))),j)},typeof scriptArgs<"u"?T.arguments=scriptArgs:typeof arguments<"u"&&(T.arguments=arguments),"function"==typeof quit&&(T.quit=function(S){quit(S)})):(E||M)&&(M?_=self.location.href:document.currentScript&&(_=document.currentScript.src),ie&&(_=ie),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",T.read=function(F){var j=new XMLHttpRequest;return j.open("GET",F,!1),j.send(null),j.responseText},M&&(T.readBinary=function(F){var j=new XMLHttpRequest;return j.open("GET",F,!1),j.responseType="arraybuffer",j.send(null),new Uint8Array(j.response)}),T.readAsync=function(F,j,se){var ue=new XMLHttpRequest;ue.open("GET",F,!0),ue.responseType="arraybuffer",ue.onload=function(){200==ue.status||0==ue.status&&ue.response?j(ue.response):se()},ue.onerror=se,ue.send(null)},T.setWindowTitle=function(S){document.title=S});var x=T.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),A=T.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||x);for(B in re)re.hasOwnProperty(B)&&(T[B]=re[B]);function U(S){var F=Xe[an>>2],j=F+S+15&-16;if(j<=EM())Xe[an>>2]=j;else if(!hP(j))return 0;return F}function L(S){switch(S){case"i1":case"i8":return 1;case"i16":return 2;case"i32":case"float":return 4;case"i64":case"double":return 8;default:if("*"===S[S.length-1])return 4;if("i"===S[0]){var F=parseInt(S.substr(1));return we(F%8==0,"getNativeTypeSize invalid bits "+F+", type "+S),F/8}return 0}}re=void 0;var H={"f64-rem":function(S,F){return S%F},debugger:function(){}};new Array(0);var te=0,G=function(S){te=S},D=function(){return te};"object"!=typeof WebAssembly&&A("no native wasm support detected");var Y,fe=!1;function we(S,F){S||Ji("Assertion failed: "+F)}function ke(S){var F=T["_"+S];return we(F,"Cannot call unknown function "+S+", make sure it is exported"),F}function Ce(S,F,j,se,ue){var be={string:function($t){var vn=0;if(null!=$t&&0!==$t){var Zr=1+($t.length<<2);Pt($t,vn=Qi(Zr),Zr)}return vn},array:function($t){var vn=Qi($t.length);return Zt($t,vn),vn}},Re=ke(S),Ze=[],Et=0;if(se)for(var It=0;It<se.length;It++){var mn=be[j[It]];mn?(0===Et&&(Et=rc()),Ze[It]=mn(se[It])):Ze[It]=se[It]}var _t=Re.apply(null,Ze);return _t=function Ae($t){return"string"===F?He($t):"boolean"===F?Boolean($t):$t}(_t),0!==Et&&Wo(Et),_t}function We(S,F,j,se){switch("*"===(j=j||"i8").charAt(j.length-1)&&(j="i32"),j){case"i1":case"i8":pt[S>>0]=F;break;case"i16":ni[S>>1]=F;break;case"i32":Xe[S>>2]=F;break;case"i64":tempI64=[F>>>0,(tempDouble=F,+gt(tempDouble)>=1?tempDouble>0?(0|Ts(+Gt(tempDouble/4294967296),4294967295))>>>0:~~+Kt((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],Xe[S>>2]=tempI64[0],Xe[S+4>>2]=tempI64[1];break;case"float":Fe[S>>2]=F;break;case"double":Ke[S>>3]=F;break;default:Ji("invalid type for setValue: "+j)}}var Te=0,Le=3;function et(S,F,j,se){var ue,be;"number"==typeof S?(ue=!0,be=S):(ue=!1,be=S.length);var Re,Ae="string"==typeof F?F:null;if(Re=j==Le?se:[Dn,Qi,U][j](Math.max(be,Ae?1:F.length)),ue){var Ze;for(se=Re,we(0==(3&Re)),Ze=Re+(-4&be);se<Ze;se+=4)Xe[se>>2]=0;for(Ze=Re+be;se<Ze;)pt[se++>>0]=0;return Re}if("i8"===Ae)return Qt.set(S.subarray||S.slice?S:new Uint8Array(S),Re),Re;for(var It,mn,_t,Et=0;Et<be;)0!==(It=Ae||F[Et])?("i64"==It&&(It="i32"),We(Re+Et,S[Et],It),_t!==It&&(mn=L(It),_t=It),Et+=mn):Et++;return Re}function Bt(S){return hd?Dn(S):U(S)}var Dt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Lt(S,F,j){for(var se=F+j,ue=F;S[ue]&&!(ue>=se);)++ue;if(ue-F>16&&S.subarray&&Dt)return Dt.decode(S.subarray(F,ue));for(var be="";F<ue;){var Ae=S[F++];if(128&Ae){var Re=63&S[F++];if(192!=(224&Ae)){var Ze=63&S[F++];if((Ae=224==(240&Ae)?(15&Ae)<<12|Re<<6|Ze:(7&Ae)<<18|Re<<12|Ze<<6|63&S[F++])<65536)be+=String.fromCharCode(Ae);else{var Et=Ae-65536;be+=String.fromCharCode(55296|Et>>10,56320|1023&Et)}}else be+=String.fromCharCode((31&Ae)<<6|Re)}else be+=String.fromCharCode(Ae)}return be}function He(S,F){return S?Lt(Qt,S,F):""}function lt(S,F,j,se){if(!(se>0))return 0;for(var ue=j,be=j+se-1,Ae=0;Ae<S.length;++Ae){var Re=S.charCodeAt(Ae);if(Re>=55296&&Re<=57343&&(Re=65536+((1023&Re)<<10)|1023&S.charCodeAt(++Ae)),Re<=127){if(j>=be)break;F[j++]=Re}else if(Re<=2047){if(j+1>=be)break;F[j++]=192|Re>>6,F[j++]=128|63&Re}else if(Re<=65535){if(j+2>=be)break;F[j++]=224|Re>>12,F[j++]=128|Re>>6&63,F[j++]=128|63&Re}else{if(j+3>=be)break;F[j++]=240|Re>>18,F[j++]=128|Re>>12&63,F[j++]=128|Re>>6&63,F[j++]=128|63&Re}}return F[j]=0,j-ue}function Pt(S,F,j){return lt(S,Qt,F,j)}function ct(S){for(var F=0,j=0;j<S.length;++j){var se=S.charCodeAt(j);se>=55296&&se<=57343&&(se=65536+((1023&se)<<10)|1023&S.charCodeAt(++j)),se<=127?++F:F+=se<=2047?2:se<=65535?3:4}return F}function dn(S){var F=ct(S)+1,j=Dn(F);return j&&lt(S,pt,j,F),j}function Zt(S,F){pt.set(S,F)}function dt(S,F,j){for(var se=0;se<S.length;++se)pt[F++>>0]=S.charCodeAt(se);j||(pt[F>>0]=0)}function Di(S){return S.replace(/__Z[\w\d_]+/g,function(j){return j==j?j:j+" ["+j+"]"})}function Gi(){var S=new Error;if(!S.stack){try{throw new Error(0)}catch(F){S=F}if(!S.stack)return"(no stack trace available)"}return S.stack.toString()}function hr(){var S=Gi();return T.extraStackTrace&&(S+="\n"+T.extraStackTrace()),Di(S)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");var Tt,pt,Qt,ni,Xe,Fe,Ke,Yt=65536;function Je(S,F){return S%F>0&&(S+=F-S%F),S}function Qn(){T.HEAP8=pt=new Int8Array(Tt),T.HEAP16=ni=new Int16Array(Tt),T.HEAP32=Xe=new Int32Array(Tt),T.HEAPU8=Qt=new Uint8Array(Tt),T.HEAPU16=new Uint16Array(Tt),T.HEAPU32=new Uint32Array(Tt),T.HEAPF32=Fe=new Float32Array(Tt),T.HEAPF64=Ke=new Float64Array(Tt)}var pr=5451792,an=208880,ai=5242880,Ni=T.TOTAL_MEMORY||16777216;function $a(S){for(;S.length>0;){var F=S.shift();if("function"!=typeof F){var j=F.func;"number"==typeof j?void 0===F.arg?T.dynCall_v(j):T.dynCall_vi(j,F.arg):j(void 0===F.arg?null:F.arg)}else F()}}Ni<ai&&A("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+Ni+"! (TOTAL_STACK="+ai+")"),T.buffer?Tt=T.buffer:"object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(Y=new WebAssembly.Memory({initial:Ni/Yt}),Tt=Y.buffer):Tt=new ArrayBuffer(Ni),Qn(),Xe[an>>2]=pr;var Mp=[],jm=[],xp=[],Wm=[],hd=!1;function qm(){if(T.preRun)for("function"==typeof T.preRun&&(T.preRun=[T.preRun]);T.preRun.length;)Mb(T.preRun.shift());$a(Mp)}function Ep(){hd||(hd=!0,!T.noFSInit&&!J.init.initialized&&J.init(),en.init(),$a(jm))}function Cb(){J.ignorePermissions=!1,$a(xp)}function Ym(){if(T.postRun)for("function"==typeof T.postRun&&(T.postRun=[T.postRun]);T.postRun.length;)je(T.postRun.shift());$a(Wm)}function Mb(S){Mp.unshift(S)}function je(S){Wm.unshift(S)}var gt=Math.abs,Kt=Math.ceil,Gt=Math.floor,Ts=Math.min,Vo=0,tu=null,bl=null;function Xm(S){Vo++,T.monitorRunDependencies&&T.monitorRunDependencies(Vo)}function kp(S){if(Vo--,T.monitorRunDependencies&&T.monitorRunDependencies(Vo),0==Vo&&(null!==tu&&(clearInterval(tu),tu=null),bl)){var F=bl;bl=null,F()}}T.preloadedImages={},T.preloadedAudios={};var xb="data:application/octet-stream;base64,";function Tf(S){return String.prototype.startsWith?S.startsWith(xb):0===S.indexOf(xb)}var Ba="clingo.wasm";function Ap(){try{if(T.wasmBinary)return new Uint8Array(T.wasmBinary);if(T.readBinary)return T.readBinary(Ba);throw"both async and sync fetching of the wasm failed"}catch(S){Ji(S)}}function Km(){return T.wasmBinary||!E&&!M||"function"!=typeof fetch?new Promise(function(S,F){S(Ap())}):fetch(Ba,{credentials:"same-origin"}).then(function(S){if(!S.ok)throw"failed to load wasm binary file at '"+Ba+"'";return S.arrayBuffer()}).catch(function(){return Ap()})}function Zm(S){var F={env:S,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:H};function j(be,Ae){T.asm=be.exports,kp()}if(Xm(),T.instantiateWasm)try{return T.instantiateWasm(F,j)}catch(be){return A("Module.instantiateWasm callback failed with error: "+be),!1}function se(be){j(be.instance)}function ue(be){Km().then(function(Ae){return WebAssembly.instantiate(Ae,F)}).then(be,function(Ae){A("failed to asynchronously prepare wasm: "+Ae),Ji(Ae)})}return T.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||Tf(Ba)||"function"!=typeof fetch?ue(se):WebAssembly.instantiateStreaming(fetch(Ba,{credentials:"same-origin"}),F).then(se,function(be){A("wasm streaming compile failed: "+be),A("falling back to ArrayBuffer instantiation"),ue(se)}),{}}Tf(Ba)||(Ba=p(Ba)),T.asm=function(S,F,j){return F.memory=Y,F.table=new WebAssembly.Table({initial:7614,maximum:7614,element:"anyfunc"}),F.__memory_base=1024,F.__table_base=0,Zm(F)},jm.push({func:function(){Bn()}});var Eb=208896;function Pf(S){xU(S)}function wl(S){return Pf(S)}var Ar={};function Rf(S){var se,ue;Rf.called?se=Xe[(ue=Xe[S>>2])>>2]:(Rf.called=!0,Ar.USER=Ar.LOGNAME="web_user",Ar.PATH="/",Ar.PWD="/",Ar.HOME="/home/web_user",Ar.LANG="C.UTF-8",Ar._=T.thisProgram,se=Bt(1024),ue=Bt(256),Xe[ue>>2]=se,Xe[S>>2]=ue);var be=[],Ae=0;for(var Re in Ar)"string"==typeof Ar[Re]&&(be.push(Ze=Re+"="+Ar[Re]),Ae+=Ze.length);if(Ae>1024)throw new Error("Environment size exceeded TOTAL_ENV_SIZE!");for(var It=0;It<be.length;It++){var Ze;dt(Ze=be[It],se),Xe[ue+4*It>>2]=se,se+=Ze.length+1}Xe[ue+4*be.length>>2]=0}function Ti(){Ji()}function Op(){return g||typeof dateNow<"u"||"object"==typeof performance&&performance&&"function"==typeof performance.now}function Ps(S){return T.___errno_location&&(Xe[T.___errno_location()>>2]=S),S}function Qm(S,F){var j;if(0===S)j=Date.now();else{if(1!==S||!Op())return Ps(22),-1;j=Ti()}return Xe[F>>2]=j/1e3|0,Xe[F+4>>2]=j%1e3*1e3*1e3|0,0}function Sb(S,F){return Qm(S,F)}function Jm(S){return Dn(S)}function e_(S){try{return u_(S)}catch{}}var Wn={last:0,caught:[],infos:{},deAdjust:function(S){if(!S||Wn.infos[S])return S;for(var F in Wn.infos)for(var j=+F,se=Wn.infos[j].adjusted,ue=se.length,be=0;be<ue;be++)if(se[be]===S)return j;return S},addRef:function(S){S&&Wn.infos[S].refcount++},decRef:function(S){if(S){var F=Wn.infos[S];we(F.refcount>0),F.refcount--,0===F.refcount&&!F.rethrown&&(F.destructor&&T.dynCall_vi(F.destructor,S),delete Wn.infos[S],e_(S))}},clearRef:function(S){S&&(Wn.infos[S].refcount=0)}};function za(S){var F=Wn.infos[S];return F&&!F.caught&&(F.caught=!0,ou.uncaught_exception--),F&&(F.rethrown=!1),Wn.caught.push(S),Wn.addRef(Wn.deAdjust(S)),S}function kb(){var S=Wn.caught[Wn.caught.length-1]||0;return S&&Wn.addRef(Wn.deAdjust(S)),S}function Ir(S){Wn.decRef(Wn.deAdjust(S))}function nu(S){Wn.addRef(Wn.deAdjust(S))}function la(){throw fe=!0,"Pure virtual function called!"}function MM(){jo(0);var S=Wn.caught.pop();S&&(Wn.decRef(Wn.deAdjust(S)),Wn.last=0)}function t_(){var S=Wn.caught.pop();throw S=Wn.deAdjust(S),Wn.infos[S].rethrown||(Wn.caught.push(S),Wn.infos[S].rethrown=!0),Wn.last=S,S}function n_(S){!S||(S=Wn.deAdjust(S),Wn.caught.push(S),Wn.infos[S].rethrown=!0,t_())}function Dp(S){throw Wn.last||(Wn.last=S),S}function iu(){var S=Wn.last;if(!S)return G(0),0;var F=Wn.infos[S],j=F.type;if(!j)return G(0),0|S;var se=Array.prototype.slice.call(arguments);T.___cxa_is_pointer_type(j),iu.buffer||(iu.buffer=Dn(4)),Xe[iu.buffer>>2]=S,S=iu.buffer;for(var be=0;be<se.length;be++)if(se[be]&&T.___cxa_can_catch(se[be],j,S))return F.adjusted.push(S=Xe[S>>2]),G(se[be]),0|S;return S=Xe[S>>2],G(j),0|S}function pd(S,F,j){throw Wn.infos[S]={ptr:S,adjusted:[S],type:F,destructor:j,refcount:0,caught:!1,rethrown:!1},Wn.last=S,"uncaught_exception"in ou?ou.uncaught_exception++:ou.uncaught_exception=1,S}function Ab(){return!!ou.uncaught_exception}function i_(){}function gn(){}function li(S,F){return Ps(1),-1}var Rt={splitPath:function(S){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(S).slice(1)},normalizeArray:function(S,F){for(var j=0,se=S.length-1;se>=0;se--){var ue=S[se];"."===ue?S.splice(se,1):".."===ue?(S.splice(se,1),j++):j&&(S.splice(se,1),j--)}if(F)for(;j;j--)S.unshift("..");return S},normalize:function(S){var F="/"===S.charAt(0),j="/"===S.substr(-1);return!(S=Rt.normalizeArray(S.split("/").filter(function(se){return!!se}),!F).join("/"))&&!F&&(S="."),S&&j&&(S+="/"),(F?"/":"")+S},dirname:function(S){var F=Rt.splitPath(S),j=F[0],se=F[1];return j||se?(se&&(se=se.substr(0,se.length-1)),j+se):"."},basename:function(S){if("/"===S)return"/";var F=S.lastIndexOf("/");return-1===F?S:S.substr(F+1)},extname:function(S){return Rt.splitPath(S)[3]},join:function(){var S=Array.prototype.slice.call(arguments,0);return Rt.normalize(S.join("/"))},join2:function(S,F){return Rt.normalize(S+"/"+F)},resolve:function(){for(var S="",F=!1,j=arguments.length-1;j>=-1&&!F;j--){var se=j>=0?arguments[j]:J.cwd();if("string"!=typeof se)throw new TypeError("Arguments to path.resolve must be strings");if(!se)return"";S=se+"/"+S,F="/"===se.charAt(0)}return(F?"/":"")+(S=Rt.normalizeArray(S.split("/").filter(function(ue){return!!ue}),!F).join("/"))||"."},relative:function(S,F){function j(Et){for(var It=0;It<Et.length&&""===Et[It];It++);for(var mn=Et.length-1;mn>=0&&""===Et[mn];mn--);return It>mn?[]:Et.slice(It,mn-It+1)}S=Rt.resolve(S).substr(1),F=Rt.resolve(F).substr(1);for(var se=j(S.split("/")),ue=j(F.split("/")),be=Math.min(se.length,ue.length),Ae=be,Re=0;Re<be;Re++)if(se[Re]!==ue[Re]){Ae=Re;break}var Ze=[];for(Re=Ae;Re<se.length;Re++)Ze.push("..");return(Ze=Ze.concat(ue.slice(Ae))).join("/")}},en={ttys:[],init:function(){},shutdown:function(){},register:function(S,F){en.ttys[S]={input:[],output:[],ops:F},J.registerDevice(S,en.stream_ops)},stream_ops:{open:function(S){var F=en.ttys[S.node.rdev];if(!F)throw new J.ErrnoError(19);S.tty=F,S.seekable=!1},close:function(S){S.tty.ops.flush(S.tty)},flush:function(S){S.tty.ops.flush(S.tty)},read:function(S,F,j,se,ue){if(!S.tty||!S.tty.ops.get_char)throw new J.ErrnoError(6);for(var be=0,Ae=0;Ae<se;Ae++){var Re;try{Re=S.tty.ops.get_char(S.tty)}catch{throw new J.ErrnoError(5)}if(void 0===Re&&0===be)throw new J.ErrnoError(11);if(null==Re)break;be++,F[j+Ae]=Re}return be&&(S.node.timestamp=Date.now()),be},write:function(S,F,j,se,ue){if(!S.tty||!S.tty.ops.put_char)throw new J.ErrnoError(6);try{for(var be=0;be<se;be++)S.tty.ops.put_char(S.tty,F[j+be])}catch{throw new J.ErrnoError(5)}return se&&(S.node.timestamp=Date.now()),be}},default_tty_ops:{get_char:function(S){if(!S.input.length){var F=null;if(g){var se=new Buffer(256),ue=0,be="win32"!=process.platform,Ae=process.stdin.fd;if(be){var Re=!1;try{Ae=Fr.openSync("/dev/stdin","r"),Re=!0}catch{}}try{ue=Fr.readSync(Ae,se,0,256,null)}catch(Ze){if(-1==Ze.toString().indexOf("EOF"))throw Ze;ue=0}Re&&Fr.closeSync(Ae),F=ue>0?se.slice(0,ue).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(F=window.prompt("Input: "))&&(F+="\n"):"function"==typeof readline&&null!==(F=readline())&&(F+="\n");if(!F)return null;S.input=Ci(F,!0)}return S.input.shift()},put_char:function(S,F){null===F||10===F?(x(Lt(S.output,0)),S.output=[]):0!=F&&S.output.push(F)},flush:function(S){S.output&&S.output.length>0&&(x(Lt(S.output,0)),S.output=[])}},default_tty1_ops:{put_char:function(S,F){null===F||10===F?(A(Lt(S.output,0)),S.output=[]):0!=F&&S.output.push(F)},flush:function(S){S.output&&S.output.length>0&&(A(Lt(S.output,0)),S.output=[])}}},un={ops_table:null,mount:function(S){return un.createNode(null,"/",16895,0)},createNode:function(S,F,j,se){if(J.isBlkdev(j)||J.isFIFO(j))throw new J.ErrnoError(1);un.ops_table||(un.ops_table={dir:{node:{getattr:un.node_ops.getattr,setattr:un.node_ops.setattr,lookup:un.node_ops.lookup,mknod:un.node_ops.mknod,rename:un.node_ops.rename,unlink:un.node_ops.unlink,rmdir:un.node_ops.rmdir,readdir:un.node_ops.readdir,symlink:un.node_ops.symlink},stream:{llseek:un.stream_ops.llseek}},file:{node:{getattr:un.node_ops.getattr,setattr:un.node_ops.setattr},stream:{llseek:un.stream_ops.llseek,read:un.stream_ops.read,write:un.stream_ops.write,allocate:un.stream_ops.allocate,mmap:un.stream_ops.mmap,msync:un.stream_ops.msync}},link:{node:{getattr:un.node_ops.getattr,setattr:un.node_ops.setattr,readlink:un.node_ops.readlink},stream:{}},chrdev:{node:{getattr:un.node_ops.getattr,setattr:un.node_ops.setattr},stream:J.chrdev_stream_ops}});var ue=J.createNode(S,F,j,se);return J.isDir(ue.mode)?(ue.node_ops=un.ops_table.dir.node,ue.stream_ops=un.ops_table.dir.stream,ue.contents={}):J.isFile(ue.mode)?(ue.node_ops=un.ops_table.file.node,ue.stream_ops=un.ops_table.file.stream,ue.usedBytes=0,ue.contents=null):J.isLink(ue.mode)?(ue.node_ops=un.ops_table.link.node,ue.stream_ops=un.ops_table.link.stream):J.isChrdev(ue.mode)&&(ue.node_ops=un.ops_table.chrdev.node,ue.stream_ops=un.ops_table.chrdev.stream),ue.timestamp=Date.now(),S&&(S.contents[F]=ue),ue},getFileDataAsRegularArray:function(S){if(S.contents&&S.contents.subarray){for(var F=[],j=0;j<S.usedBytes;++j)F.push(S.contents[j]);return F}return S.contents},getFileDataAsTypedArray:function(S){return S.contents?S.contents.subarray?S.contents.subarray(0,S.usedBytes):new Uint8Array(S.contents):new Uint8Array},expandFileStorage:function(S,F){var j=S.contents?S.contents.length:0;if(!(j>=F)){F=Math.max(F,j*(j<1048576?2:1.125)|0),0!=j&&(F=Math.max(F,256));var ue=S.contents;S.contents=new Uint8Array(F),S.usedBytes>0&&S.contents.set(ue.subarray(0,S.usedBytes),0)}},resizeFileStorage:function(S,F){if(S.usedBytes!=F){if(0==F)return S.contents=null,void(S.usedBytes=0);if(!S.contents||S.contents.subarray){var j=S.contents;return S.contents=new Uint8Array(new ArrayBuffer(F)),j&&S.contents.set(j.subarray(0,Math.min(F,S.usedBytes))),void(S.usedBytes=F)}if(S.contents||(S.contents=[]),S.contents.length>F)S.contents.length=F;else for(;S.contents.length<F;)S.contents.push(0);S.usedBytes=F}},node_ops:{getattr:function(S){var F={};return F.dev=J.isChrdev(S.mode)?S.id:1,F.ino=S.id,F.mode=S.mode,F.nlink=1,F.uid=0,F.gid=0,F.rdev=S.rdev,F.size=J.isDir(S.mode)?4096:J.isFile(S.mode)?S.usedBytes:J.isLink(S.mode)?S.link.length:0,F.atime=new Date(S.timestamp),F.mtime=new Date(S.timestamp),F.ctime=new Date(S.timestamp),F.blksize=4096,F.blocks=Math.ceil(F.size/F.blksize),F},setattr:function(S,F){void 0!==F.mode&&(S.mode=F.mode),void 0!==F.timestamp&&(S.timestamp=F.timestamp),void 0!==F.size&&un.resizeFileStorage(S,F.size)},lookup:function(S,F){throw J.genericErrors[2]},mknod:function(S,F,j,se){return un.createNode(S,F,j,se)},rename:function(S,F,j){if(J.isDir(S.mode)){var se;try{se=J.lookupNode(F,j)}catch{}if(se)for(var ue in se.contents)throw new J.ErrnoError(39)}delete S.parent.contents[S.name],S.name=j,F.contents[j]=S,S.parent=F},unlink:function(S,F){delete S.contents[F]},rmdir:function(S,F){var j=J.lookupNode(S,F);for(var se in j.contents)throw new J.ErrnoError(39);delete S.contents[F]},readdir:function(S){var F=[".",".."];for(var j in S.contents)!S.contents.hasOwnProperty(j)||F.push(j);return F},symlink:function(S,F,j){var se=un.createNode(S,F,41471,0);return se.link=j,se},readlink:function(S){if(!J.isLink(S.mode))throw new J.ErrnoError(22);return S.link}},stream_ops:{read:function(S,F,j,se,ue){var be=S.node.contents;if(ue>=S.node.usedBytes)return 0;var Ae=Math.min(S.node.usedBytes-ue,se);if(Ae>8&&be.subarray)F.set(be.subarray(ue,ue+Ae),j);else for(var Re=0;Re<Ae;Re++)F[j+Re]=be[ue+Re];return Ae},write:function(S,F,j,se,ue,be){if(!se)return 0;var Ae=S.node;if(Ae.timestamp=Date.now(),F.subarray&&(!Ae.contents||Ae.contents.subarray)){if(0===Ae.usedBytes&&0===ue)return Ae.contents=new Uint8Array(F.subarray(j,j+se)),Ae.usedBytes=se,se;if(ue+se<=Ae.usedBytes)return Ae.contents.set(F.subarray(j,j+se),ue),se}if(un.expandFileStorage(Ae,ue+se),Ae.contents.subarray&&F.subarray)Ae.contents.set(F.subarray(j,j+se),ue);else for(var Re=0;Re<se;Re++)Ae.contents[ue+Re]=F[j+Re];return Ae.usedBytes=Math.max(Ae.usedBytes,ue+se),se},llseek:function(S,F,j){var se=F;if(1===j?se+=S.position:2===j&&J.isFile(S.node.mode)&&(se+=S.node.usedBytes),se<0)throw new J.ErrnoError(22);return se},allocate:function(S,F,j){un.expandFileStorage(S.node,F+j),S.node.usedBytes=Math.max(S.node.usedBytes,F+j)},mmap:function(S,F,j,se,ue,be,Ae){if(!J.isFile(S.node.mode))throw new J.ErrnoError(19);var Re,Ze,Et=S.node.contents;if(2&Ae||Et.buffer!==F&&Et.buffer!==F.buffer){if((ue>0||ue+se<S.node.usedBytes)&&(Et=Et.subarray?Et.subarray(ue,ue+se):Array.prototype.slice.call(Et,ue,ue+se)),Ze=!0,!(Re=Dn(se)))throw new J.ErrnoError(12);F.set(Et,Re)}else Ze=!1,Re=Et.byteOffset;return{ptr:Re,allocated:Ze}},msync:function(S,F,j,se,ue){if(!J.isFile(S.node.mode))throw new J.ErrnoError(19);return 2&ue||un.stream_ops.write(S,F,0,se,j,!1),0}}},mi={dbs:{},indexedDB:function(){if(typeof indexedDB<"u")return indexedDB;var S=null;return"object"==typeof window&&(S=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),we(S,"IDBFS used, but indexedDB not supported"),S},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(S){return un.mount.apply(null,arguments)},syncfs:function(S,F,j){mi.getLocalSet(S,function(se,ue){if(se)return j(se);mi.getRemoteSet(S,function(be,Ae){if(be)return j(be);mi.reconcile(F?Ae:ue,F?ue:Ae,j)})})},getDB:function(S,F){var se,j=mi.dbs[S];if(j)return F(null,j);try{se=mi.indexedDB().open(S,mi.DB_VERSION)}catch(ue){return F(ue)}if(!se)return F("Unable to connect to IndexedDB");se.onupgradeneeded=function(ue){var Re,be=ue.target.result,Ae=ue.target.transaction;(Re=be.objectStoreNames.contains(mi.DB_STORE_NAME)?Ae.objectStore(mi.DB_STORE_NAME):be.createObjectStore(mi.DB_STORE_NAME)).indexNames.contains("timestamp")||Re.createIndex("timestamp","timestamp",{unique:!1})},se.onsuccess=function(){mi.dbs[S]=j=se.result,F(null,j)},se.onerror=function(ue){F(this.error),ue.preventDefault()}},getLocalSet:function(S,F){var j={};function se(Ze){return"."!==Ze&&".."!==Ze}function ue(Ze){return function(Et){return Rt.join2(Ze,Et)}}for(var be=J.readdir(S.mountpoint).filter(se).map(ue(S.mountpoint));be.length;){var Re,Ae=be.pop();try{Re=J.stat(Ae)}catch(Ze){return F(Ze)}J.isDir(Re.mode)&&be.push.apply(be,J.readdir(Ae).filter(se).map(ue(Ae))),j[Ae]={timestamp:Re.mtime}}return F(null,{type:"local",entries:j})},getRemoteSet:function(S,F){var j={};mi.getDB(S.mountpoint,function(se,ue){if(se)return F(se);try{var be=ue.transaction([mi.DB_STORE_NAME],"readonly");be.onerror=function(Ze){F(this.error),Ze.preventDefault()},be.objectStore(mi.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(Ze){var Et=Ze.target.result;if(!Et)return F(null,{type:"remote",db:ue,entries:j});j[Et.primaryKey]={timestamp:Et.key},Et.continue()}}catch(Ze){return F(Ze)}})},loadLocalEntry:function(S,F){var j,se;try{se=J.lookupPath(S).node,j=J.stat(S)}catch(be){return F(be)}return J.isDir(j.mode)?F(null,{timestamp:j.mtime,mode:j.mode}):J.isFile(j.mode)?(se.contents=un.getFileDataAsTypedArray(se),F(null,{timestamp:j.mtime,mode:j.mode,contents:se.contents})):F(new Error("node type not supported"))},storeLocalEntry:function(S,F,j){try{if(J.isDir(F.mode))J.mkdir(S,F.mode);else{if(!J.isFile(F.mode))return j(new Error("node type not supported"));J.writeFile(S,F.contents,{canOwn:!0})}J.chmod(S,F.mode),J.utime(S,F.timestamp,F.timestamp)}catch(se){return j(se)}j(null)},removeLocalEntry:function(S,F){try{J.lookupPath(S);var se=J.stat(S);J.isDir(se.mode)?J.rmdir(S):J.isFile(se.mode)&&J.unlink(S)}catch(ue){return F(ue)}F(null)},loadRemoteEntry:function(S,F,j){var se=S.get(F);se.onsuccess=function(ue){j(null,ue.target.result)},se.onerror=function(ue){j(this.error),ue.preventDefault()}},storeRemoteEntry:function(S,F,j,se){var ue=S.put(j,F);ue.onsuccess=function(){se(null)},ue.onerror=function(be){se(this.error),be.preventDefault()}},removeRemoteEntry:function(S,F,j){var se=S.delete(F);se.onsuccess=function(){j(null)},se.onerror=function(ue){j(this.error),ue.preventDefault()}},reconcile:function(S,F,j){var se=0,ue=[];Object.keys(S.entries).forEach(function(_t){var vn=F.entries[_t];(!vn||S.entries[_t].timestamp>vn.timestamp)&&(ue.push(_t),se++)});var be=[];if(Object.keys(F.entries).forEach(function(_t){S.entries[_t]||(be.push(_t),se++)}),!se)return j(null);var Re=0,Et=("remote"===S.type?S.db:F.db).transaction([mi.DB_STORE_NAME],"readwrite"),It=Et.objectStore(mi.DB_STORE_NAME);function mn(_t){return _t?mn.errored?void 0:(mn.errored=!0,j(_t)):++Re>=se?j(null):void 0}Et.onerror=function(_t){mn(this.error),_t.preventDefault()},ue.sort().forEach(function(_t){"local"===F.type?mi.loadRemoteEntry(It,_t,function($t,vn){if($t)return mn($t);mi.storeLocalEntry(_t,vn,mn)}):mi.loadLocalEntry(_t,function($t,vn){if($t)return mn($t);mi.storeRemoteEntry(It,_t,vn,mn)})}),be.sort().reverse().forEach(function(_t){"local"===F.type?mi.removeLocalEntry(_t,mn):mi.removeRemoteEntry(It,_t,mn)})}},ci={isWindows:!1,staticInit:function(){ci.isWindows=!!process.platform.match(/^win/);var S=process.binding("constants");S.fs&&(S=S.fs),ci.flagsForNodeMap={1024:S.O_APPEND,64:S.O_CREAT,128:S.O_EXCL,0:S.O_RDONLY,2:S.O_RDWR,4096:S.O_SYNC,512:S.O_TRUNC,1:S.O_WRONLY}},bufferFrom:function(S){return Buffer.alloc?Buffer.from(S):new Buffer(S)},mount:function(S){return we(g),ci.createNode(null,"/",ci.getMode(S.opts.root),0)},createNode:function(S,F,j,se){if(!J.isDir(j)&&!J.isFile(j)&&!J.isLink(j))throw new J.ErrnoError(22);var ue=J.createNode(S,F,j);return ue.node_ops=ci.node_ops,ue.stream_ops=ci.stream_ops,ue},getMode:function(S){var F;try{F=Fr.lstatSync(S),ci.isWindows&&(F.mode=F.mode|(292&F.mode)>>2)}catch(j){throw j.code?new J.ErrnoError(-j.errno):j}return F.mode},realPath:function(S){for(var F=[];S.parent!==S;)F.push(S.name),S=S.parent;return F.push(S.mount.opts.root),F.reverse(),Rt.join.apply(null,F)},flagsForNode:function(S){S&=-2097153,S&=-2049,S&=-32769,S&=-524289;var F=0;for(var j in ci.flagsForNodeMap)S&j&&(F|=ci.flagsForNodeMap[j],S^=j);if(S)throw new J.ErrnoError(22);return F},node_ops:{getattr:function(S){var j,F=ci.realPath(S);try{j=Fr.lstatSync(F)}catch(se){throw se.code?new J.ErrnoError(-se.errno):se}return ci.isWindows&&!j.blksize&&(j.blksize=4096),ci.isWindows&&!j.blocks&&(j.blocks=(j.size+j.blksize-1)/j.blksize|0),{dev:j.dev,ino:j.ino,mode:j.mode,nlink:j.nlink,uid:j.uid,gid:j.gid,rdev:j.rdev,size:j.size,atime:j.atime,mtime:j.mtime,ctime:j.ctime,blksize:j.blksize,blocks:j.blocks}},setattr:function(S,F){var j=ci.realPath(S);try{if(void 0!==F.mode&&(Fr.chmodSync(j,F.mode),S.mode=F.mode),void 0!==F.timestamp){var se=new Date(F.timestamp);Fr.utimesSync(j,se,se)}void 0!==F.size&&Fr.truncateSync(j,F.size)}catch(ue){throw ue.code?new J.ErrnoError(-ue.errno):ue}},lookup:function(S,F){var j=Rt.join2(ci.realPath(S),F),se=ci.getMode(j);return ci.createNode(S,F,se)},mknod:function(S,F,j,se){var ue=ci.createNode(S,F,j,se),be=ci.realPath(ue);try{J.isDir(ue.mode)?Fr.mkdirSync(be,ue.mode):Fr.writeFileSync(be,"",{mode:ue.mode})}catch(Ae){throw Ae.code?new J.ErrnoError(-Ae.errno):Ae}return ue},rename:function(S,F,j){var se=ci.realPath(S),ue=Rt.join2(ci.realPath(F),j);try{Fr.renameSync(se,ue)}catch(be){throw be.code?new J.ErrnoError(-be.errno):be}},unlink:function(S,F){var j=Rt.join2(ci.realPath(S),F);try{Fr.unlinkSync(j)}catch(se){throw se.code?new J.ErrnoError(-se.errno):se}},rmdir:function(S,F){var j=Rt.join2(ci.realPath(S),F);try{Fr.rmdirSync(j)}catch(se){throw se.code?new J.ErrnoError(-se.errno):se}},readdir:function(S){var F=ci.realPath(S);try{return Fr.readdirSync(F)}catch(j){throw j.code?new J.ErrnoError(-j.errno):j}},symlink:function(S,F,j){var se=Rt.join2(ci.realPath(S),F);try{Fr.symlinkSync(j,se)}catch(ue){throw ue.code?new J.ErrnoError(-ue.errno):ue}},readlink:function(S){var F=ci.realPath(S);try{return F=Fr.readlinkSync(F),F=yP.relative(yP.resolve(S.mount.opts.root),F)}catch(j){throw j.code?new J.ErrnoError(-j.errno):j}}},stream_ops:{open:function(S){var F=ci.realPath(S.node);try{J.isFile(S.node.mode)&&(S.nfd=Fr.openSync(F,ci.flagsForNode(S.flags)))}catch(j){throw j.code?new J.ErrnoError(-j.errno):j}},close:function(S){try{J.isFile(S.node.mode)&&S.nfd&&Fr.closeSync(S.nfd)}catch(F){throw F.code?new J.ErrnoError(-F.errno):F}},read:function(S,F,j,se,ue){if(0===se)return 0;try{return Fr.readSync(S.nfd,ci.bufferFrom(F.buffer),j,se,ue)}catch(be){throw new J.ErrnoError(-be.errno)}},write:function(S,F,j,se,ue){try{return Fr.writeSync(S.nfd,ci.bufferFrom(F.buffer),j,se,ue)}catch(be){throw new J.ErrnoError(-be.errno)}},llseek:function(S,F,j){var se=F;if(1===j)se+=S.position;else if(2===j&&J.isFile(S.node.mode))try{se+=Fr.fstatSync(S.nfd).size}catch(be){throw new J.ErrnoError(-be.errno)}if(se<0)throw new J.ErrnoError(22);return se}}},hi={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(S){we(M),hi.reader||(hi.reader=new FileReaderSync);var F=hi.createNode(null,"/",hi.DIR_MODE,0),j={};function se(be){for(var Ae=be.split("/"),Re=F,Ze=0;Ze<Ae.length-1;Ze++){var Et=Ae.slice(0,Ze+1).join("/");j[Et]||(j[Et]=hi.createNode(Re,Ae[Ze],hi.DIR_MODE,0)),Re=j[Et]}return Re}function ue(be){var Ae=be.split("/");return Ae[Ae.length-1]}return Array.prototype.forEach.call(S.opts.files||[],function(be){hi.createNode(se(be.name),ue(be.name),hi.FILE_MODE,0,be,be.lastModifiedDate)}),(S.opts.blobs||[]).forEach(function(be){hi.createNode(se(be.name),ue(be.name),hi.FILE_MODE,0,be.data)}),(S.opts.packages||[]).forEach(function(be){be.metadata.files.forEach(function(Ae){var Re=Ae.filename.substr(1);hi.createNode(se(Re),ue(Re),hi.FILE_MODE,0,be.blob.slice(Ae.start,Ae.end))})}),F},createNode:function(S,F,j,se,ue,be){var Ae=J.createNode(S,F,j);return Ae.mode=j,Ae.node_ops=hi.node_ops,Ae.stream_ops=hi.stream_ops,Ae.timestamp=(be||new Date).getTime(),we(hi.FILE_MODE!==hi.DIR_MODE),j===hi.FILE_MODE?(Ae.size=ue.size,Ae.contents=ue):(Ae.size=4096,Ae.contents={}),S&&(S.contents[F]=Ae),Ae},node_ops:{getattr:function(S){return{dev:1,ino:void 0,mode:S.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:S.size,atime:new Date(S.timestamp),mtime:new Date(S.timestamp),ctime:new Date(S.timestamp),blksize:4096,blocks:Math.ceil(S.size/4096)}},setattr:function(S,F){void 0!==F.mode&&(S.mode=F.mode),void 0!==F.timestamp&&(S.timestamp=F.timestamp)},lookup:function(S,F){throw new J.ErrnoError(2)},mknod:function(S,F,j,se){throw new J.ErrnoError(1)},rename:function(S,F,j){throw new J.ErrnoError(1)},unlink:function(S,F){throw new J.ErrnoError(1)},rmdir:function(S,F){throw new J.ErrnoError(1)},readdir:function(S){var F=[".",".."];for(var j in S.contents)!S.contents.hasOwnProperty(j)||F.push(j);return F},symlink:function(S,F,j){throw new J.ErrnoError(1)},readlink:function(S){throw new J.ErrnoError(1)}},stream_ops:{read:function(S,F,j,se,ue){if(ue>=S.node.size)return 0;var be=S.node.contents.slice(ue,ue+se),Ae=hi.reader.readAsArrayBuffer(be);return F.set(new Uint8Array(Ae),j),be.size},write:function(S,F,j,se,ue){throw new J.ErrnoError(5)},llseek:function(S,F,j){var se=F;if(1===j?se+=S.position:2===j&&J.isFile(S.node.mode)&&(se+=S.node.size),se<0)throw new J.ErrnoError(22);return se}}},J={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(S){if(!(S instanceof J.ErrnoError))throw S+" : "+hr();return Ps(S.errno)},lookupPath:function(S,F){if(F=F||{},!(S=Rt.resolve(J.cwd(),S)))return{path:"",node:null};var j={follow_mount:!0,recurse_count:0};for(var se in j)void 0===F[se]&&(F[se]=j[se]);if(F.recurse_count>8)throw new J.ErrnoError(40);for(var ue=Rt.normalizeArray(S.split("/").filter(function(_t){return!!_t}),!1),be=J.root,Ae="/",Re=0;Re<ue.length;Re++){var Ze=Re===ue.length-1;if(Ze&&F.parent)break;if(be=J.lookupNode(be,ue[Re]),Ae=Rt.join2(Ae,ue[Re]),J.isMountpoint(be)&&(!Ze||Ze&&F.follow_mount)&&(be=be.mounted.root),!Ze||F.follow)for(var Et=0;J.isLink(be.mode);){var It=J.readlink(Ae);if(Ae=Rt.resolve(Rt.dirname(Ae),It),be=J.lookupPath(Ae,{recurse_count:F.recurse_count}).node,Et++>40)throw new J.ErrnoError(40)}}return{path:Ae,node:be}},getPath:function(S){for(var F;;){if(J.isRoot(S)){var j=S.mount.mountpoint;return F?"/"!==j[j.length-1]?j+"/"+F:j+F:j}F=F?S.name+"/"+F:S.name,S=S.parent}},hashName:function(S,F){for(var j=0,se=0;se<F.length;se++)j=(j<<5)-j+F.charCodeAt(se)|0;return(S+j>>>0)%J.nameTable.length},hashAddNode:function(S){var F=J.hashName(S.parent.id,S.name);S.name_next=J.nameTable[F],J.nameTable[F]=S},hashRemoveNode:function(S){var F=J.hashName(S.parent.id,S.name);if(J.nameTable[F]===S)J.nameTable[F]=S.name_next;else for(var j=J.nameTable[F];j;){if(j.name_next===S){j.name_next=S.name_next;break}j=j.name_next}},lookupNode:function(S,F){var j=J.mayLookup(S);if(j)throw new J.ErrnoError(j,S);for(var se=J.hashName(S.id,F),ue=J.nameTable[se];ue;ue=ue.name_next)if(ue.parent.id===S.id&&ue.name===F)return ue;return J.lookup(S,F)},createNode:function(S,F,j,se){J.FSNode||(J.FSNode=function(Re,Ze,Et,It){Re||(Re=this),this.parent=Re,this.mount=Re.mount,this.mounted=null,this.id=J.nextInode++,this.name=Ze,this.mode=Et,this.node_ops={},this.stream_ops={},this.rdev=It},J.FSNode.prototype={},Object.defineProperties(J.FSNode.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(Re){Re?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(Re){Re?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return J.isDir(this.mode)}},isDevice:{get:function(){return J.isChrdev(this.mode)}}}));var Ae=new J.FSNode(S,F,j,se);return J.hashAddNode(Ae),Ae},destroyNode:function(S){J.hashRemoveNode(S)},isRoot:function(S){return S===S.parent},isMountpoint:function(S){return!!S.mounted},isFile:function(S){return 32768==(61440&S)},isDir:function(S){return 16384==(61440&S)},isLink:function(S){return 40960==(61440&S)},isChrdev:function(S){return 8192==(61440&S)},isBlkdev:function(S){return 24576==(61440&S)},isFIFO:function(S){return 4096==(61440&S)},isSocket:function(S){return 49152==(49152&S)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(S){var F=J.flagModes[S];if(typeof F>"u")throw new Error("Unknown file open mode: "+S);return F},flagsToPermissionString:function(S){var F=["r","w","rw"][3&S];return 512&S&&(F+="w"),F},nodePermissions:function(S,F){return J.ignorePermissions||(-1===F.indexOf("r")||292&S.mode)&&(-1===F.indexOf("w")||146&S.mode)&&(-1===F.indexOf("x")||73&S.mode)?0:13},mayLookup:function(S){return J.nodePermissions(S,"x")||(S.node_ops.lookup?0:13)},mayCreate:function(S,F){try{return J.lookupNode(S,F),17}catch{}return J.nodePermissions(S,"wx")},mayDelete:function(S,F,j){var se;try{se=J.lookupNode(S,F)}catch(be){return be.errno}var ue=J.nodePermissions(S,"wx");if(ue)return ue;if(j){if(!J.isDir(se.mode))return 20;if(J.isRoot(se)||J.getPath(se)===J.cwd())return 16}else if(J.isDir(se.mode))return 21;return 0},mayOpen:function(S,F){return S?J.isLink(S.mode)?40:J.isDir(S.mode)&&("r"!==J.flagsToPermissionString(F)||512&F)?21:J.nodePermissions(S,J.flagsToPermissionString(F)):2},MAX_OPEN_FDS:4096,nextfd:function(S,F){F=F||J.MAX_OPEN_FDS;for(var j=S=S||0;j<=F;j++)if(!J.streams[j])return j;throw new J.ErrnoError(24)},getStream:function(S){return J.streams[S]},createStream:function(S,F,j){J.FSStream||(J.FSStream=function(){},J.FSStream.prototype={},Object.defineProperties(J.FSStream.prototype,{object:{get:function(){return this.node},set:function(Ae){this.node=Ae}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var se=new J.FSStream;for(var ue in S)se[ue]=S[ue];S=se;var be=J.nextfd(F,j);return S.fd=be,J.streams[be]=S,S},closeStream:function(S){J.streams[S]=null},chrdev_stream_ops:{open:function(S){var F=J.getDevice(S.node.rdev);S.stream_ops=F.stream_ops,S.stream_ops.open&&S.stream_ops.open(S)},llseek:function(){throw new J.ErrnoError(29)}},major:function(S){return S>>8},minor:function(S){return 255&S},makedev:function(S,F){return S<<8|F},registerDevice:function(S,F){J.devices[S]={stream_ops:F}},getDevice:function(S){return J.devices[S]},getMounts:function(S){for(var F=[],j=[S];j.length;){var se=j.pop();F.push(se),j.push.apply(j,se.mounts)}return F},syncfs:function(S,F){"function"==typeof S&&(F=S,S=!1),J.syncFSRequests++,J.syncFSRequests>1&&console.log("warning: "+J.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var j=J.getMounts(J.root.mount),se=0;function ue(Ae){return J.syncFSRequests--,F(Ae)}function be(Ae){if(Ae)return be.errored?void 0:(be.errored=!0,ue(Ae));++se>=j.length&&ue(null)}j.forEach(function(Ae){if(!Ae.type.syncfs)return be(null);Ae.type.syncfs(Ae,S,be)})},mount:function(S,F,j){var be,se="/"===j,ue=!j;if(se&&J.root)throw new J.ErrnoError(16);if(!se&&!ue){var Ae=J.lookupPath(j,{follow_mount:!1});if(j=Ae.path,J.isMountpoint(be=Ae.node))throw new J.ErrnoError(16);if(!J.isDir(be.mode))throw new J.ErrnoError(20)}var Re={type:S,opts:F,mountpoint:j,mounts:[]},Ze=S.mount(Re);return Ze.mount=Re,Re.root=Ze,se?J.root=Ze:be&&(be.mounted=Re,be.mount&&be.mount.mounts.push(Re)),Ze},unmount:function(S){var F=J.lookupPath(S,{follow_mount:!1});if(!J.isMountpoint(F.node))throw new J.ErrnoError(22);var j=F.node,se=j.mounted,ue=J.getMounts(se);Object.keys(J.nameTable).forEach(function(Ae){for(var Re=J.nameTable[Ae];Re;){var Ze=Re.name_next;-1!==ue.indexOf(Re.mount)&&J.destroyNode(Re),Re=Ze}}),j.mounted=null;var be=j.mount.mounts.indexOf(se);j.mount.mounts.splice(be,1)},lookup:function(S,F){return S.node_ops.lookup(S,F)},mknod:function(S,F,j){var ue=J.lookupPath(S,{parent:!0}).node,be=Rt.basename(S);if(!be||"."===be||".."===be)throw new J.ErrnoError(22);var Ae=J.mayCreate(ue,be);if(Ae)throw new J.ErrnoError(Ae);if(!ue.node_ops.mknod)throw new J.ErrnoError(1);return ue.node_ops.mknod(ue,be,F,j)},create:function(S,F){return F=void 0!==F?F:438,F&=4095,J.mknod(S,F|=32768,0)},mkdir:function(S,F){return F=void 0!==F?F:511,F&=1023,J.mknod(S,F|=16384,0)},mkdirTree:function(S,F){for(var j=S.split("/"),se="",ue=0;ue<j.length;++ue)if(j[ue]){se+="/"+j[ue];try{J.mkdir(se,F)}catch(be){if(17!=be.errno)throw be}}},mkdev:function(S,F,j){return typeof j>"u"&&(j=F,F=438),J.mknod(S,F|=8192,j)},symlink:function(S,F){if(!Rt.resolve(S))throw new J.ErrnoError(2);var se=J.lookupPath(F,{parent:!0}).node;if(!se)throw new J.ErrnoError(2);var ue=Rt.basename(F),be=J.mayCreate(se,ue);if(be)throw new J.ErrnoError(be);if(!se.node_ops.symlink)throw new J.ErrnoError(1);return se.node_ops.symlink(se,ue,S)},rename:function(S,F){var Re,Ze,j=Rt.dirname(S),se=Rt.dirname(F),ue=Rt.basename(S),be=Rt.basename(F);try{Re=J.lookupPath(S,{parent:!0}).node,Ze=J.lookupPath(F,{parent:!0}).node}catch{throw new J.ErrnoError(16)}if(!Re||!Ze)throw new J.ErrnoError(2);if(Re.mount!==Ze.mount)throw new J.ErrnoError(18);var mn,Et=J.lookupNode(Re,ue),It=Rt.relative(S,se);if("."!==It.charAt(0))throw new J.ErrnoError(22);if("."!==(It=Rt.relative(F,j)).charAt(0))throw new J.ErrnoError(39);try{mn=J.lookupNode(Ze,be)}catch{}if(Et!==mn){var _t=J.isDir(Et.mode),$t=J.mayDelete(Re,ue,_t);if($t)throw new J.ErrnoError($t);if($t=mn?J.mayDelete(Ze,be,_t):J.mayCreate(Ze,be))throw new J.ErrnoError($t);if(!Re.node_ops.rename)throw new J.ErrnoError(1);if(J.isMountpoint(Et)||mn&&J.isMountpoint(mn))throw new J.ErrnoError(16);if(Ze!==Re&&($t=J.nodePermissions(Re,"w")))throw new J.ErrnoError($t);try{J.trackingDelegate.willMovePath&&J.trackingDelegate.willMovePath(S,F)}catch(vn){console.log("FS.trackingDelegate['willMovePath']('"+S+"', '"+F+"') threw an exception: "+vn.message)}J.hashRemoveNode(Et);try{Re.node_ops.rename(Et,Ze,be)}catch(vn){throw vn}finally{J.hashAddNode(Et)}try{J.trackingDelegate.onMovePath&&J.trackingDelegate.onMovePath(S,F)}catch(vn){console.log("FS.trackingDelegate['onMovePath']('"+S+"', '"+F+"') threw an exception: "+vn.message)}}},rmdir:function(S){var j=J.lookupPath(S,{parent:!0}).node,se=Rt.basename(S),ue=J.lookupNode(j,se),be=J.mayDelete(j,se,!0);if(be)throw new J.ErrnoError(be);if(!j.node_ops.rmdir)throw new J.ErrnoError(1);if(J.isMountpoint(ue))throw new J.ErrnoError(16);try{J.trackingDelegate.willDeletePath&&J.trackingDelegate.willDeletePath(S)}catch(Ae){console.log("FS.trackingDelegate['willDeletePath']('"+S+"') threw an exception: "+Ae.message)}j.node_ops.rmdir(j,se),J.destroyNode(ue);try{J.trackingDelegate.onDeletePath&&J.trackingDelegate.onDeletePath(S)}catch(Ae){console.log("FS.trackingDelegate['onDeletePath']('"+S+"') threw an exception: "+Ae.message)}},readdir:function(S){var j=J.lookupPath(S,{follow:!0}).node;if(!j.node_ops.readdir)throw new J.ErrnoError(20);return j.node_ops.readdir(j)},unlink:function(S){var j=J.lookupPath(S,{parent:!0}).node,se=Rt.basename(S),ue=J.lookupNode(j,se),be=J.mayDelete(j,se,!1);if(be)throw new J.ErrnoError(be);if(!j.node_ops.unlink)throw new J.ErrnoError(1);if(J.isMountpoint(ue))throw new J.ErrnoError(16);try{J.trackingDelegate.willDeletePath&&J.trackingDelegate.willDeletePath(S)}catch(Ae){console.log("FS.trackingDelegate['willDeletePath']('"+S+"') threw an exception: "+Ae.message)}j.node_ops.unlink(j,se),J.destroyNode(ue);try{J.trackingDelegate.onDeletePath&&J.trackingDelegate.onDeletePath(S)}catch(Ae){console.log("FS.trackingDelegate['onDeletePath']('"+S+"') threw an exception: "+Ae.message)}},readlink:function(S){var j=J.lookupPath(S).node;if(!j)throw new J.ErrnoError(2);if(!j.node_ops.readlink)throw new J.ErrnoError(22);return Rt.resolve(J.getPath(j.parent),j.node_ops.readlink(j))},stat:function(S,F){var se=J.lookupPath(S,{follow:!F}).node;if(!se)throw new J.ErrnoError(2);if(!se.node_ops.getattr)throw new J.ErrnoError(1);return se.node_ops.getattr(se)},lstat:function(S){return J.stat(S,!0)},chmod:function(S,F,j){var se;if(!(se="string"==typeof S?J.lookupPath(S,{follow:!j}).node:S).node_ops.setattr)throw new J.ErrnoError(1);se.node_ops.setattr(se,{mode:4095&F|-4096&se.mode,timestamp:Date.now()})},lchmod:function(S,F){J.chmod(S,F,!0)},fchmod:function(S,F){var j=J.getStream(S);if(!j)throw new J.ErrnoError(9);J.chmod(j.node,F)},chown:function(S,F,j,se){var ue;if(!(ue="string"==typeof S?J.lookupPath(S,{follow:!se}).node:S).node_ops.setattr)throw new J.ErrnoError(1);ue.node_ops.setattr(ue,{timestamp:Date.now()})},lchown:function(S,F,j){J.chown(S,F,j,!0)},fchown:function(S,F,j){var se=J.getStream(S);if(!se)throw new J.ErrnoError(9);J.chown(se.node,F,j)},truncate:function(S,F){if(F<0)throw new J.ErrnoError(22);var j;if(!(j="string"==typeof S?J.lookupPath(S,{follow:!0}).node:S).node_ops.setattr)throw new J.ErrnoError(1);if(J.isDir(j.mode))throw new J.ErrnoError(21);if(!J.isFile(j.mode))throw new J.ErrnoError(22);var ue=J.nodePermissions(j,"w");if(ue)throw new J.ErrnoError(ue);j.node_ops.setattr(j,{size:F,timestamp:Date.now()})},ftruncate:function(S,F){var j=J.getStream(S);if(!j)throw new J.ErrnoError(9);if(0==(2097155&j.flags))throw new J.ErrnoError(22);J.truncate(j.node,F)},utime:function(S,F,j){var ue=J.lookupPath(S,{follow:!0}).node;ue.node_ops.setattr(ue,{timestamp:Math.max(F,j)})},open:function(S,F,j,se,ue){if(""===S)throw new J.ErrnoError(2);var be;if(j=typeof j>"u"?438:j,j=64&(F="string"==typeof F?J.modeStringToFlags(F):F)?4095&j|32768:0,"object"==typeof S)be=S;else{S=Rt.normalize(S);try{be=J.lookupPath(S,{follow:!(131072&F)}).node}catch{}}var Re=!1;if(64&F)if(be){if(128&F)throw new J.ErrnoError(17)}else be=J.mknod(S,j,0),Re=!0;if(!be)throw new J.ErrnoError(2);if(J.isChrdev(be.mode)&&(F&=-513),65536&F&&!J.isDir(be.mode))throw new J.ErrnoError(20);if(!Re){var Ze=J.mayOpen(be,F);if(Ze)throw new J.ErrnoError(Ze)}512&F&&J.truncate(be,0),F&=-641;var Et=J.createStream({node:be,path:J.getPath(be),flags:F,seekable:!0,position:0,stream_ops:be.stream_ops,ungotten:[],error:!1},se,ue);Et.stream_ops.open&&Et.stream_ops.open(Et),T.logReadFiles&&!(1&F)&&(J.readFiles||(J.readFiles={}),S in J.readFiles||(J.readFiles[S]=1,console.log("FS.trackingDelegate error on read file: "+S)));try{if(J.trackingDelegate.onOpenFile){var It=0;1!=(2097155&F)&&(It|=J.tracking.openFlags.READ),0!=(2097155&F)&&(It|=J.tracking.openFlags.WRITE),J.trackingDelegate.onOpenFile(S,It)}}catch(mn){console.log("FS.trackingDelegate['onOpenFile']('"+S+"', flags) threw an exception: "+mn.message)}return Et},close:function(S){if(J.isClosed(S))throw new J.ErrnoError(9);S.getdents&&(S.getdents=null);try{S.stream_ops.close&&S.stream_ops.close(S)}catch(F){throw F}finally{J.closeStream(S.fd)}S.fd=null},isClosed:function(S){return null===S.fd},llseek:function(S,F,j){if(J.isClosed(S))throw new J.ErrnoError(9);if(!S.seekable||!S.stream_ops.llseek)throw new J.ErrnoError(29);if(0!=j&&1!=j&&2!=j)throw new J.ErrnoError(22);return S.position=S.stream_ops.llseek(S,F,j),S.ungotten=[],S.position},read:function(S,F,j,se,ue){if(se<0||ue<0)throw new J.ErrnoError(22);if(J.isClosed(S))throw new J.ErrnoError(9);if(1==(2097155&S.flags))throw new J.ErrnoError(9);if(J.isDir(S.node.mode))throw new J.ErrnoError(21);if(!S.stream_ops.read)throw new J.ErrnoError(22);var be=typeof ue<"u";if(be){if(!S.seekable)throw new J.ErrnoError(29)}else ue=S.position;var Ae=S.stream_ops.read(S,F,j,se,ue);return be||(S.position+=Ae),Ae},write:function(S,F,j,se,ue,be){if(se<0||ue<0)throw new J.ErrnoError(22);if(J.isClosed(S))throw new J.ErrnoError(9);if(0==(2097155&S.flags))throw new J.ErrnoError(9);if(J.isDir(S.node.mode))throw new J.ErrnoError(21);if(!S.stream_ops.write)throw new J.ErrnoError(22);1024&S.flags&&J.llseek(S,0,2);var Ae=typeof ue<"u";if(Ae){if(!S.seekable)throw new J.ErrnoError(29)}else ue=S.position;var Re=S.stream_ops.write(S,F,j,se,ue,be);Ae||(S.position+=Re);try{S.path&&J.trackingDelegate.onWriteToFile&&J.trackingDelegate.onWriteToFile(S.path)}catch(Ze){console.log("FS.trackingDelegate['onWriteToFile']('"+S.path+"') threw an exception: "+Ze.message)}return Re},allocate:function(S,F,j){if(J.isClosed(S))throw new J.ErrnoError(9);if(F<0||j<=0)throw new J.ErrnoError(22);if(0==(2097155&S.flags))throw new J.ErrnoError(9);if(!J.isFile(S.node.mode)&&!J.isDir(S.node.mode))throw new J.ErrnoError(19);if(!S.stream_ops.allocate)throw new J.ErrnoError(95);S.stream_ops.allocate(S,F,j)},mmap:function(S,F,j,se,ue,be,Ae){if(1==(2097155&S.flags))throw new J.ErrnoError(13);if(!S.stream_ops.mmap)throw new J.ErrnoError(19);return S.stream_ops.mmap(S,F,j,se,ue,be,Ae)},msync:function(S,F,j,se,ue){return S&&S.stream_ops.msync?S.stream_ops.msync(S,F,j,se,ue):0},munmap:function(S){return 0},ioctl:function(S,F,j){if(!S.stream_ops.ioctl)throw new J.ErrnoError(25);return S.stream_ops.ioctl(S,F,j)},readFile:function(S,F){if((F=F||{}).flags=F.flags||"r",F.encoding=F.encoding||"binary","utf8"!==F.encoding&&"binary"!==F.encoding)throw new Error('Invalid encoding type "'+F.encoding+'"');var j,se=J.open(S,F.flags),be=J.stat(S).size,Ae=new Uint8Array(be);return J.read(se,Ae,0,be,0),"utf8"===F.encoding?j=Lt(Ae,0):"binary"===F.encoding&&(j=Ae),J.close(se),j},writeFile:function(S,F,j){(j=j||{}).flags=j.flags||"w";var se=J.open(S,j.flags,j.mode);if("string"==typeof F){var ue=new Uint8Array(ct(F)+1),be=lt(F,ue,0,ue.length);J.write(se,ue,0,be,void 0,j.canOwn)}else{if(!ArrayBuffer.isView(F))throw new Error("Unsupported data type");J.write(se,F,0,F.byteLength,void 0,j.canOwn)}J.close(se)},cwd:function(){return J.currentPath},chdir:function(S){var F=J.lookupPath(S,{follow:!0});if(null===F.node)throw new J.ErrnoError(2);if(!J.isDir(F.node.mode))throw new J.ErrnoError(20);var j=J.nodePermissions(F.node,"x");if(j)throw new J.ErrnoError(j);J.currentPath=F.path},createDefaultDirectories:function(){J.mkdir("/tmp"),J.mkdir("/home"),J.mkdir("/home/web_user")},createDefaultDevices:function(){var S;if(J.mkdir("/dev"),J.registerDevice(J.makedev(1,3),{read:function(){return 0},write:function(se,ue,be,Ae,Re){return Ae}}),J.mkdev("/dev/null",J.makedev(1,3)),en.register(J.makedev(5,0),en.default_tty_ops),en.register(J.makedev(6,0),en.default_tty1_ops),J.mkdev("/dev/tty",J.makedev(5,0)),J.mkdev("/dev/tty1",J.makedev(6,0)),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var F=new Uint8Array(1);S=function(){return crypto.getRandomValues(F),F[0]}}else if(g)try{var j=Me(50);S=function(){return j.randomBytes(1)[0]}}catch{}S||(S=function(){Ji("random_device")}),J.createDevice("/dev","random",S),J.createDevice("/dev","urandom",S),J.mkdir("/dev/shm"),J.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){J.mkdir("/proc"),J.mkdir("/proc/self"),J.mkdir("/proc/self/fd"),J.mount({mount:function(){var S=J.createNode("/proc/self","fd",16895,73);return S.node_ops={lookup:function(F,j){var ue=J.getStream(+j);if(!ue)throw new J.ErrnoError(9);var be={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return ue.path}}};return be.parent=be,be}},S}},{},"/proc/self/fd")},createStandardStreams:function(){T.stdin?J.createDevice("/dev","stdin",T.stdin):J.symlink("/dev/tty","/dev/stdin"),T.stdout?J.createDevice("/dev","stdout",null,T.stdout):J.symlink("/dev/tty","/dev/stdout"),T.stderr?J.createDevice("/dev","stderr",null,T.stderr):J.symlink("/dev/tty1","/dev/stderr"),J.open("/dev/stdin","r"),J.open("/dev/stdout","w"),J.open("/dev/stderr","w")},ensureErrnoError:function(){J.ErrnoError||(J.ErrnoError=function(F,j){this.node=j,this.setErrno=function(se){this.errno=se},this.setErrno(F),this.message="FS error",this.stack&&Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0})},J.ErrnoError.prototype=new Error,J.ErrnoError.prototype.constructor=J.ErrnoError,[2].forEach(function(S){J.genericErrors[S]=new J.ErrnoError(S),J.genericErrors[S].stack="<generic error, no stack>"}))},staticInit:function(){J.ensureErrnoError(),J.nameTable=new Array(4096),J.mount(un,{},"/"),J.createDefaultDirectories(),J.createDefaultDevices(),J.createSpecialDirectories(),J.filesystems={MEMFS:un,IDBFS:mi,NODEFS:ci,WORKERFS:hi}},init:function(S,F,j){J.init.initialized=!0,J.ensureErrnoError(),T.stdin=S||T.stdin,T.stdout=F||T.stdout,T.stderr=j||T.stderr,J.createStandardStreams()},quit:function(){J.init.initialized=!1;var S=T._fflush;S&&S(0);for(var F=0;F<J.streams.length;F++){var j=J.streams[F];!j||J.close(j)}},getMode:function(S,F){var j=0;return S&&(j|=365),F&&(j|=146),j},joinPath:function(S,F){var j=Rt.join.apply(null,S);return F&&"/"==j[0]&&(j=j.substr(1)),j},absolutePath:function(S,F){return Rt.resolve(F,S)},standardizePath:function(S){return Rt.normalize(S)},findObject:function(S,F){var j=J.analyzePath(S,F);return j.exists?j.object:(Ps(j.error),null)},analyzePath:function(S,F){try{S=(j=J.lookupPath(S,{follow:!F})).path}catch{}var se={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var j=J.lookupPath(S,{parent:!0});se.parentExists=!0,se.parentPath=j.path,se.parentObject=j.node,se.name=Rt.basename(S),j=J.lookupPath(S,{follow:!F}),se.exists=!0,se.path=j.path,se.object=j.node,se.name=j.node.name,se.isRoot="/"===j.path}catch(ue){se.error=ue.errno}return se},createFolder:function(S,F,j,se){var ue=Rt.join2("string"==typeof S?S:J.getPath(S),F),be=J.getMode(j,se);return J.mkdir(ue,be)},createPath:function(S,F,j,se){S="string"==typeof S?S:J.getPath(S);for(var ue=F.split("/").reverse();ue.length;){var be=ue.pop();if(be){var Ae=Rt.join2(S,be);try{J.mkdir(Ae)}catch{}S=Ae}}return Ae},createFile:function(S,F,j,se,ue){var be=Rt.join2("string"==typeof S?S:J.getPath(S),F),Ae=J.getMode(se,ue);return J.create(be,Ae)},createDataFile:function(S,F,j,se,ue,be){var Ae=F?Rt.join2("string"==typeof S?S:J.getPath(S),F):S,Re=J.getMode(se,ue),Ze=J.create(Ae,Re);if(j){if("string"==typeof j){for(var Et=new Array(j.length),It=0,mn=j.length;It<mn;++It)Et[It]=j.charCodeAt(It);j=Et}J.chmod(Ze,146|Re);var _t=J.open(Ze,"w");J.write(_t,j,0,j.length,0,be),J.close(_t),J.chmod(Ze,Re)}return Ze},createDevice:function(S,F,j,se){var ue=Rt.join2("string"==typeof S?S:J.getPath(S),F),be=J.getMode(!!j,!!se);J.createDevice.major||(J.createDevice.major=64);var Ae=J.makedev(J.createDevice.major++,0);return J.registerDevice(Ae,{open:function(Re){Re.seekable=!1},close:function(Re){se&&se.buffer&&se.buffer.length&&se(10)},read:function(Re,Ze,Et,It,mn){for(var _t=0,$t=0;$t<It;$t++){var vn;try{vn=j()}catch{throw new J.ErrnoError(5)}if(void 0===vn&&0===_t)throw new J.ErrnoError(11);if(null==vn)break;_t++,Ze[Et+$t]=vn}return _t&&(Re.node.timestamp=Date.now()),_t},write:function(Re,Ze,Et,It,mn){for(var _t=0;_t<It;_t++)try{se(Ze[Et+_t])}catch{throw new J.ErrnoError(5)}return It&&(Re.node.timestamp=Date.now()),_t}}),J.mkdev(ue,be,Ae)},createLink:function(S,F,j,se,ue){var be=Rt.join2("string"==typeof S?S:J.getPath(S),F);return J.symlink(j,be)},forceLoadFile:function(S){if(S.isDevice||S.isFolder||S.link||S.contents)return!0;var F=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!T.read)throw new Error("Cannot load without read() or XMLHttpRequest.");try{S.contents=Ci(T.read(S.url),!0),S.usedBytes=S.contents.length}catch{F=!1}return F||Ps(5),F},createLazyFile:function(S,F,j,se,ue){function be(){this.lengthKnown=!1,this.chunks=[]}if(be.prototype.get=function(_t){if(!(_t>this.length-1||_t<0)){var $t=_t%this.chunkSize;return this.getter(_t/this.chunkSize|0)[$t]}},be.prototype.setDataGetter=function(_t){this.getter=_t},be.prototype.cacheLength=function(){var _t=new XMLHttpRequest;if(_t.open("HEAD",j,!1),_t.send(null),!(_t.status>=200&&_t.status<300||304===_t.status))throw new Error("Couldn't load "+j+". Status: "+_t.status);var vn,$t=Number(_t.getResponseHeader("Content-length")),Zr=(vn=_t.getResponseHeader("Accept-Ranges"))&&"bytes"===vn,Yo=(vn=_t.getResponseHeader("Content-Encoding"))&&"gzip"===vn,Qr=1048576;Zr||(Qr=$t);var Jt=this;Jt.setDataGetter(function(xi){var Ln=xi*Qr,Ei=(xi+1)*Qr-1;if(Ei=Math.min(Ei,$t-1),typeof Jt.chunks[xi]>"u"&&(Jt.chunks[xi]=function(xi,Ln){if(xi>Ln)throw new Error("invalid range ("+xi+", "+Ln+") or no bytes requested!");if(Ln>$t-1)throw new Error("only "+$t+" bytes available! programmer error!");var Ei=new XMLHttpRequest;if(Ei.open("GET",j,!1),$t!==Qr&&Ei.setRequestHeader("Range","bytes="+xi+"-"+Ln),typeof Uint8Array<"u"&&(Ei.responseType="arraybuffer"),Ei.overrideMimeType&&Ei.overrideMimeType("text/plain; charset=x-user-defined"),Ei.send(null),!(Ei.status>=200&&Ei.status<300||304===Ei.status))throw new Error("Couldn't load "+j+". Status: "+Ei.status);return void 0!==Ei.response?new Uint8Array(Ei.response||[]):Ci(Ei.responseText||"",!0)}(Ln,Ei)),typeof Jt.chunks[xi]>"u")throw new Error("doXHR failed!");return Jt.chunks[xi]}),(Yo||!$t)&&(Qr=$t=1,$t=this.getter(0).length,Qr=$t,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=$t,this._chunkSize=Qr,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!M)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Ae=new be;Object.defineProperties(Ae,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var Re={isDevice:!1,contents:Ae}}else Re={isDevice:!1,url:j};var Ze=J.createFile(S,F,Re,se,ue);Re.contents?Ze.contents=Re.contents:Re.url&&(Ze.contents=null,Ze.url=Re.url),Object.defineProperties(Ze,{usedBytes:{get:function(){return this.contents.length}}});var Et={};return Object.keys(Ze.stream_ops).forEach(function(mn){var _t=Ze.stream_ops[mn];Et[mn]=function(){if(!J.forceLoadFile(Ze))throw new J.ErrnoError(5);return _t.apply(null,arguments)}}),Et.read=function(_t,$t,vn,Zr,Yo){if(!J.forceLoadFile(Ze))throw new J.ErrnoError(5);var Qr=_t.node.contents;if(Yo>=Qr.length)return 0;var vt=Math.min(Qr.length-Yo,Zr);if(Qr.slice)for(var Jt=0;Jt<vt;Jt++)$t[vn+Jt]=Qr[Yo+Jt];else for(Jt=0;Jt<vt;Jt++)$t[vn+Jt]=Qr.get(Yo+Jt);return vt},Ze.stream_ops=Et,Ze},createPreloadedFile:function(S,F,j,se,ue,be,Ae,Re,Ze,Et){Browser.init();var It=F?Rt.resolve(Rt.join2(S,F)):S;function _t($t){function vn(Yo){Et&&Et(),Re||J.createDataFile(S,F,Yo,se,ue,Ze),be&&be(),kp()}var Zr=!1;T.preloadPlugins.forEach(function(Yo){Zr||Yo.canHandle(It)&&(Yo.handle($t,It,vn,function(){Ae&&Ae(),kp()}),Zr=!0)}),Zr||vn($t)}Xm(),"string"==typeof j?Browser.asyncLoad(j,function($t){_t($t)},Ae):_t(j)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(S,F,j){F=F||function(){},j=j||function(){};var se=J.indexedDB();try{var ue=se.open(J.DB_NAME(),J.DB_VERSION)}catch(be){return j(be)}ue.onupgradeneeded=function(){console.log("creating db"),ue.result.createObjectStore(J.DB_STORE_NAME)},ue.onsuccess=function(){var Re=ue.result.transaction([J.DB_STORE_NAME],"readwrite"),Ze=Re.objectStore(J.DB_STORE_NAME),Et=0,It=0,mn=S.length;function _t(){0==It?F():j()}S.forEach(function($t){var vn=Ze.put(J.analyzePath($t).object.contents,$t);vn.onsuccess=function(){++Et+It==mn&&_t()},vn.onerror=function(){It++,Et+It==mn&&_t()}}),Re.onerror=j},ue.onerror=j},loadFilesFromDB:function(S,F,j){F=F||function(){},j=j||function(){};var se=J.indexedDB();try{var ue=se.open(J.DB_NAME(),J.DB_VERSION)}catch(be){return j(be)}ue.onupgradeneeded=j,ue.onsuccess=function(){var Ae=ue.result;try{var Re=Ae.transaction([J.DB_STORE_NAME],"readonly")}catch($t){return void j($t)}var Ze=Re.objectStore(J.DB_STORE_NAME),Et=0,It=0,mn=S.length;function _t(){0==It?F():j()}S.forEach(function($t){var vn=Ze.get($t);vn.onsuccess=function(){J.analyzePath($t).exists&&J.unlink($t),J.createDataFile(Rt.dirname($t),Rt.basename($t),vn.result,!0,!0,!0),++Et+It==mn&&_t()},vn.onerror=function(){It++,Et+It==mn&&_t()}}),Re.onerror=j},ue.onerror=j}},Pi={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86},Ut={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(S,F){if("/"!==F[0]){var j;if(-100===S)j=J.cwd();else{var se=J.getStream(S);if(!se)throw new J.ErrnoError(Pi.EBADF);j=se.path}F=Rt.join2(j,F)}return F},doStat:function(S,F,j){try{var se=S(F)}catch(ue){if(ue&&ue.node&&Rt.normalize(F)!==Rt.normalize(J.getPath(ue.node)))return-Pi.ENOTDIR;throw ue}return Xe[j>>2]=se.dev,Xe[j+4>>2]=0,Xe[j+8>>2]=se.ino,Xe[j+12>>2]=se.mode,Xe[j+16>>2]=se.nlink,Xe[j+20>>2]=se.uid,Xe[j+24>>2]=se.gid,Xe[j+28>>2]=se.rdev,Xe[j+32>>2]=0,tempI64=[se.size>>>0,(tempDouble=se.size,+gt(tempDouble)>=1?tempDouble>0?(0|Ts(+Gt(tempDouble/4294967296),4294967295))>>>0:~~+Kt((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],Xe[j+40>>2]=tempI64[0],Xe[j+44>>2]=tempI64[1],Xe[j+48>>2]=4096,Xe[j+52>>2]=se.blocks,Xe[j+56>>2]=se.atime.getTime()/1e3|0,Xe[j+60>>2]=0,Xe[j+64>>2]=se.mtime.getTime()/1e3|0,Xe[j+68>>2]=0,Xe[j+72>>2]=se.ctime.getTime()/1e3|0,Xe[j+76>>2]=0,tempI64=[se.ino>>>0,(tempDouble=se.ino,+gt(tempDouble)>=1?tempDouble>0?(0|Ts(+Gt(tempDouble/4294967296),4294967295))>>>0:~~+Kt((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],Xe[j+80>>2]=tempI64[0],Xe[j+84>>2]=tempI64[1],0},doMsync:function(S,F,j,se){var ue=new Uint8Array(Qt.subarray(S,S+j));J.msync(F,ue,0,j,se)},doMkdir:function(S,F){return"/"===(S=Rt.normalize(S))[S.length-1]&&(S=S.substr(0,S.length-1)),J.mkdir(S,F,0),0},doMknod:function(S,F,j){switch(61440&F){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-Pi.EINVAL}return J.mknod(S,F,j),0},doReadlink:function(S,F,j){if(j<=0)return-Pi.EINVAL;var se=J.readlink(S),ue=Math.min(j,ct(se)),be=pt[F+ue];return Pt(se,F,j+1),pt[F+ue]=be,ue},doAccess:function(S,F){if(-8&F)return-Pi.EINVAL;var se=J.lookupPath(S,{follow:!0}),ue="";return 4&F&&(ue+="r"),2&F&&(ue+="w"),1&F&&(ue+="x"),ue&&J.nodePermissions(se.node,ue)?-Pi.EACCES:0},doDup:function(S,F,j){var se=J.getStream(j);return se&&J.close(se),J.open(S,F,0,j,j).fd},doReadv:function(S,F,j,se){for(var ue=0,be=0;be<j;be++){var Re=Xe[F+(8*be+4)>>2],Ze=J.read(S,pt,Xe[F+8*be>>2],Re,se);if(Ze<0)return-1;if(ue+=Ze,Ze<Re)break}return ue},doWritev:function(S,F,j,se){for(var ue=0,be=0;be<j;be++){var Ze=J.write(S,pt,Xe[F+8*be>>2],Xe[F+(8*be+4)>>2],se);if(Ze<0)return-1;ue+=Ze}return ue},varargs:0,get:function(S){return Ut.varargs+=4,Xe[Ut.varargs-4>>2]},getStr:function(){return He(Ut.get())},getStreamFromFD:function(){var S=J.getStream(Ut.get());if(!S)throw new J.ErrnoError(Pi.EBADF);return S},getSocketFromFD:function(){var S=SOCKFS.getSocket(Ut.get());if(!S)throw new J.ErrnoError(Pi.EBADF);return S},getSocketAddress:function(S){var F=Ut.get(),j=Ut.get();if(S&&0===F)return null;var se=__read_sockaddr(F,j);if(se.errno)throw new J.ErrnoError(se.errno);return se.addr=DNS.lookup_addr(se.addr)||se.addr,se},get64:function(){var S=Ut.get();return Ut.get(),S},getZero:function(){Ut.get()}};function Ob(S,F){Ut.varargs=F;try{var j=Ut.getStr();return J.unlink(j),0}catch(se){return(typeof J>"u"||!(se instanceof J.ErrnoError))&&Ji(se),-se.errno}}function qi(S,F){Ut.varargs=F;try{var j=Ut.getStreamFromFD(),se=Ut.get(),ue=Ut.get(),be=Ut.get(),Ae=Ut.get();if(!(-1==se&&ue<0||0==se&&ue>=0))return-Pi.EOVERFLOW;var Re=ue;return J.llseek(j,Re,Ae),tempI64=[j.position>>>0,(tempDouble=j.position,+gt(tempDouble)>=1?tempDouble>0?(0|Ts(+Gt(tempDouble/4294967296),4294967295))>>>0:~~+Kt((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],Xe[be>>2]=tempI64[0],Xe[be+4>>2]=tempI64[1],j.getdents&&0===Re&&0===Ae&&(j.getdents=null),0}catch(Ze){return(typeof J>"u"||!(Ze instanceof J.ErrnoError))&&Ji(Ze),-Ze.errno}}function Db(S,F){Ut.varargs=F;try{var j=Ut.getStreamFromFD(),se=Ut.get(),ue=Ut.get();return Ut.doReadv(j,se,ue)}catch(be){return(typeof J>"u"||!(be instanceof J.ErrnoError))&&Ji(be),-be.errno}}function Yi(S,F){Ut.varargs=F;try{var j=Ut.getStreamFromFD(),se=Ut.get(),ue=Ut.get();return Ut.doWritev(j,se,ue)}catch(be){return(typeof J>"u"||!(be instanceof J.ErrnoError))&&Ji(be),-be.errno}}function Tb(S,F){Ut.varargs=F;try{var j=Ut.getStr(),se=Ut.get();return Ut.doStat(J.lstat,j,se)}catch(ue){return(typeof J>"u"||!(ue instanceof J.ErrnoError))&&Ji(ue),-ue.errno}}function lP(S,F){Ut.varargs=F;try{var j=Ut.getStreamFromFD();switch(Ut.get()){case 0:return(ue=Ut.get())<0?-Pi.EINVAL:J.open(j.path,j.flags,0,ue).fd;case 1:case 2:case 13:case 14:return 0;case 3:return j.flags;case 4:var ue=Ut.get();return j.flags|=ue,0;case 12:return ue=Ut.get(),ni[ue+0>>1]=2,0;case 16:case 8:default:return-Pi.EINVAL;case 9:return Ps(Pi.EINVAL),-1}}catch(Re){return(typeof J>"u"||!(Re instanceof J.ErrnoError))&&Ji(Re),-Re.errno}}function $i(S,F){Ut.varargs=F;try{var j=Ut.getStreamFromFD(),se=Ut.get();return Ut.get(),j.fd===se?-Pi.EINVAL:Ut.doDup(j.path,j.flags,se)}catch(be){return(typeof J>"u"||!(be instanceof J.ErrnoError))&&Ji(be),-be.errno}}function On(S,F){Ut.varargs=F;try{var j=Ut.getStr(),se=Ut.getStr();return J.rename(j,se),0}catch(ue){return(typeof J>"u"||!(ue instanceof J.ErrnoError))&&Ji(ue),-ue.errno}}function Pb(S,F){Ut.varargs=F;try{var j=Ut.getStr();return J.rmdir(j),0}catch(se){return(typeof J>"u"||!(se instanceof J.ErrnoError))&&Ji(se),-se.errno}}function sU(S,F){Ut.varargs=F;try{var j=Ut.getStr(),se=Ut.get(),ue=Ut.get();return J.open(j,se,ue).fd}catch(Ae){return(typeof J>"u"||!(Ae instanceof J.ErrnoError))&&Ji(Ae),-Ae.errno}}function at(S,F){Ut.varargs=F;try{var j=Ut.getStreamFromFD(),se=Ut.get();switch(se){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return j.tty?0:-Pi.ENOTTY;case 21519:if(!j.tty)return-Pi.ENOTTY;var ue=Ut.get();return Xe[ue>>2]=0,0;case 21520:return j.tty?-Pi.EINVAL:-Pi.ENOTTY;case 21531:return ue=Ut.get(),J.ioctl(j,se,ue);default:Ji("bad ioctl syscall "+se)}}catch(be){return(typeof J>"u"||!(be instanceof J.ErrnoError))&&Ji(be),-be.errno}}function r_(S,F){Ut.varargs=F;try{var j=Ut.getStreamFromFD();return J.close(j),0}catch(se){return(typeof J>"u"||!(se instanceof J.ErrnoError))&&Ji(se),-se.errno}}function Fn(S,F){Ut.varargs=F;try{var j=Ut.getStreamFromFD(),se=Ut.get();return j.fd===se?se:Ut.doDup(j.path,j.flags,se)}catch(ue){return(typeof J>"u"||!(ue instanceof J.ErrnoError))&&Ji(ue),-ue.errno}}function wi(S,F){Ut.varargs=F;try{Ut.get();var se=Ut.get();return nn(se,0,136),Xe[se>>2]=1,Xe[se+4>>2]=2,Xe[se+8>>2]=3,Xe[se+12>>2]=4,0}catch(ue){return(typeof J>"u"||!(ue instanceof J.ErrnoError))&&Ji(ue),-ue.errno}}function cP(S,F){Ut.varargs=F;try{var j=Ut.get(),se=Ut.get(),ue=Ut.mappings[j];if(!ue)return 0;if(se===ue.len){var be=J.getStream(ue.fd);Ut.doMsync(j,be,se,ue.flags),J.munmap(be),Ut.mappings[j]=null,ue.allocated&&u_(ue.malloc)}return 0}catch(Ae){return(typeof J>"u"||!(Ae instanceof J.ErrnoError))&&Ji(Ae),-Ae.errno}}function aU(){}function uP(){}function o_(S){return Pf(S)}function Rs(){T.abort()}var xM=0;function dP(S){setTimeout(function(){xM&&xP(xM,0)},1e3*S)}function Rb(){return void 0===Rb.start&&(Rb.start=Date.now()),1e3*(Date.now()-Rb.start)|0}function nc(S,F){return S-F}function EM(){return pt.length}function lU(S){Ji("OOM")}function fP(S){S=Je(S,65536);var j=Tt.byteLength;try{return-1!==Y.grow((S-j)/65536)&&(Tt=Y.buffer,!0)}catch{return!1}}function hP(S){var F=EM(),se=2147418112;if(S>se)return!1;for(var be=Math.max(F,16777216);be<S;)be=be<=536870912?Je(2*be,65536):Math.min(Je((3*be+2147483648)/4,65536),se);return!!fP(be)&&(Qn(),!0)}function Tp(S){return 0!==S&&(S=He(S),Ar.hasOwnProperty(S))?(Tp.ret&&u_(Tp.ret),Tp.ret=dn(Ar[S])):0}function cU(S){var F=Date.now();return Xe[S>>2]=F/1e3|0,Xe[S+4>>2]=F%1e3*1e3|0,0}var SM=208736,uU=(Pt("GMT",208784,4),208784);function as(S,F){var j=new Date(1e3*Xe[S>>2]);Xe[F>>2]=j.getUTCSeconds(),Xe[F+4>>2]=j.getUTCMinutes(),Xe[F+8>>2]=j.getUTCHours(),Xe[F+12>>2]=j.getUTCDate(),Xe[F+16>>2]=j.getUTCMonth(),Xe[F+20>>2]=j.getUTCFullYear()-1900,Xe[F+24>>2]=j.getUTCDay(),Xe[F+36>>2]=0,Xe[F+32>>2]=0;var se=Date.UTC(j.getUTCFullYear(),0,1,0,0,0,0),ue=(j.getTime()-se)/864e5|0;return Xe[F+28>>2]=ue,Xe[F+40>>2]=uU,F}function Mi(S){return as(S,SM)}function pP(S){return Math.pow(2,S)}function dU(S){return pP(S)}function gP(S){return Math.log(S)/Math.LN10}function Nt(S){return gP(S)}function fU(S){var j=Rn.LLVM_SAVEDSTACKS[S];Rn.LLVM_SAVEDSTACKS.splice(S,1),Wo(j)}function Rn(){var S=Rn;return S.LLVM_SAVEDSTACKS||(S.LLVM_SAVEDSTACKS=[]),S.LLVM_SAVEDSTACKS.push(rc()),S.LLVM_SAVEDSTACKS.length-1}function s_(){Ji("trap!")}function Pp(){if(!Pp.called){Pp.called=!0,Xe[bP()>>2]=60*(new Date).getTimezoneOffset();var S=new Date(2e3,0,1),F=new Date(2e3,6,1);Xe[ic()>>2]=Number(S.getTimezoneOffset()!=F.getTimezoneOffset());var se=j(S),ue=j(F),be=et(Ci(se),"i8",Te),Ae=et(Ci(ue),"i8",Te);F.getTimezoneOffset()<S.getTimezoneOffset()?(Xe[ir()>>2]=be,Xe[ir()+4>>2]=Ae):(Xe[ir()>>2]=Ae,Xe[ir()+4>>2]=be)}function j(Re){var Ze=Re.toTimeString().match(/\(([A-Za-z ]+)\)$/);return Ze?Ze[1]:"GMT"}}function Ib(S,F){Pp();var j=new Date(1e3*Xe[S>>2]);Xe[F>>2]=j.getSeconds(),Xe[F+4>>2]=j.getMinutes(),Xe[F+8>>2]=j.getHours(),Xe[F+12>>2]=j.getDate(),Xe[F+16>>2]=j.getMonth(),Xe[F+20>>2]=j.getFullYear()-1900,Xe[F+24>>2]=j.getDay();var se=new Date(j.getFullYear(),0,1),ue=(j.getTime()-se.getTime())/864e5|0;Xe[F+28>>2]=ue,Xe[F+36>>2]=-60*j.getTimezoneOffset();var be=new Date(2e3,6,1).getTimezoneOffset(),Ae=se.getTimezoneOffset(),Re=0|(be!=Ae&&j.getTimezoneOffset()==Math.min(Ae,be));Xe[F+32>>2]=Re;var Ze=Xe[ir()+(Re?4:0)>>2];return Xe[F+40>>2]=Ze,F}function mP(S){return Ib(S,SM)}function _P(S,F){throw jo(S,F||1),"longjmp"}function kM(S,F,j){Qt.set(Qt.subarray(F,F+j),S)}function a_(S){Pp();var F=new Date(Xe[S+20>>2]+1900,Xe[S+16>>2],Xe[S+12>>2],Xe[S+8>>2],Xe[S+4>>2],Xe[S>>2],0),j=Xe[S+32>>2],se=F.getTimezoneOffset(),ue=new Date(F.getFullYear(),0,1),be=new Date(2e3,6,1).getTimezoneOffset(),Ae=ue.getTimezoneOffset(),Re=Math.min(Ae,be);if(j<0)Xe[S+32>>2]=Number(be!=Ae&&Re==se);else if(j>0!=(Re==se)){var Ze=Math.max(Ae,be),Et=j>0?Re:Ze;F.setTime(F.getTime()+6e4*(Et-se))}Xe[S+24>>2]=F.getDay();var It=(F.getTime()-ue.getTime())/864e5|0;return Xe[S+28>>2]=It,F.getTime()/1e3|0}function Fb(){return 0}function AM(S,F){return 14==S&&(xM=F),0}function Rp(S){return S%4==0&&(S%100!=0||S%400==0)}function Mn(S,F){for(var j=0,se=0;se<=F;j+=S[se++]);return j}var If=[31,29,31,30,31,30,31,31,30,31,30,31],l_=[31,28,31,30,31,30,31,31,30,31,30,31];function xo(S,F){for(var j=new Date(S.getTime());F>0;){var se=Rp(j.getFullYear()),ue=j.getMonth(),be=(se?If:l_)[ue];if(!(F>be-j.getDate()))return j.setDate(j.getDate()+F),j;F-=be-j.getDate()+1,j.setDate(1),ue<11?j.setMonth(ue+1):(j.setMonth(0),j.setFullYear(j.getFullYear()+1))}return j}function Lb(S,F,j,se){var ue=Xe[se+40>>2],be={tm_sec:Xe[se>>2],tm_min:Xe[se+4>>2],tm_hour:Xe[se+8>>2],tm_mday:Xe[se+12>>2],tm_mon:Xe[se+16>>2],tm_year:Xe[se+20>>2],tm_wday:Xe[se+24>>2],tm_yday:Xe[se+28>>2],tm_isdst:Xe[se+32>>2],tm_gmtoff:Xe[se+36>>2],tm_zone:ue?He(ue):""},Ae=He(j),Re={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S"};for(var Ze in Re)Ae=Ae.replace(new RegExp(Ze,"g"),Re[Ze]);var Et=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],It=["January","February","March","April","May","June","July","August","September","October","November","December"];function mn(vt,Jt,xi){for(var Ln="number"==typeof vt?vt.toString():vt||"";Ln.length<Jt;)Ln=xi[0]+Ln;return Ln}function _t(vt,Jt){return mn(vt,Jt,"0")}function $t(vt,Jt){function xi(Ei){return Ei<0?-1:Ei>0?1:0}var Ln;return 0===(Ln=xi(vt.getFullYear()-Jt.getFullYear()))&&0===(Ln=xi(vt.getMonth()-Jt.getMonth()))&&(Ln=xi(vt.getDate()-Jt.getDate())),Ln}function vn(vt){switch(vt.getDay()){case 0:return new Date(vt.getFullYear()-1,11,29);case 1:return vt;case 2:return new Date(vt.getFullYear(),0,3);case 3:return new Date(vt.getFullYear(),0,2);case 4:return new Date(vt.getFullYear(),0,1);case 5:return new Date(vt.getFullYear()-1,11,31);case 6:return new Date(vt.getFullYear()-1,11,30)}}function Zr(vt){var Jt=xo(new Date(vt.tm_year+1900,0,1),vt.tm_yday),xi=new Date(Jt.getFullYear(),0,4),Ln=new Date(Jt.getFullYear()+1,0,4),Ei=vn(xi),su=vn(Ln);return $t(Ei,Jt)<=0?$t(su,Jt)<=0?Jt.getFullYear()+1:Jt.getFullYear():Jt.getFullYear()-1}var Yo={"%a":function(vt){return Et[vt.tm_wday].substring(0,3)},"%A":function(vt){return Et[vt.tm_wday]},"%b":function(vt){return It[vt.tm_mon].substring(0,3)},"%B":function(vt){return It[vt.tm_mon]},"%C":function(vt){return _t((vt.tm_year+1900)/100|0,2)},"%d":function(vt){return _t(vt.tm_mday,2)},"%e":function(vt){return mn(vt.tm_mday,2," ")},"%g":function(vt){return Zr(vt).toString().substring(2)},"%G":function(vt){return Zr(vt)},"%H":function(vt){return _t(vt.tm_hour,2)},"%I":function(vt){var Jt=vt.tm_hour;return 0==Jt?Jt=12:Jt>12&&(Jt-=12),_t(Jt,2)},"%j":function(vt){return _t(vt.tm_mday+Mn(Rp(vt.tm_year+1900)?If:l_,vt.tm_mon-1),3)},"%m":function(vt){return _t(vt.tm_mon+1,2)},"%M":function(vt){return _t(vt.tm_min,2)},"%n":function(){return"\n"},"%p":function(vt){return vt.tm_hour>=0&&vt.tm_hour<12?"AM":"PM"},"%S":function(vt){return _t(vt.tm_sec,2)},"%t":function(){return"\t"},"%u":function(vt){return new Date(vt.tm_year+1900,vt.tm_mon+1,vt.tm_mday,0,0,0,0).getDay()||7},"%U":function(vt){var Jt=new Date(vt.tm_year+1900,0,1),xi=0===Jt.getDay()?Jt:xo(Jt,7-Jt.getDay()),Ln=new Date(vt.tm_year+1900,vt.tm_mon,vt.tm_mday);if($t(xi,Ln)<0){var Ei=Mn(Rp(Ln.getFullYear())?If:l_,Ln.getMonth()-1)-31,oc=31-xi.getDate()+Ei+Ln.getDate();return _t(Math.ceil(oc/7),2)}return 0===$t(xi,Jt)?"01":"00"},"%V":function(vt){var oc,Jt=new Date(vt.tm_year+1900,0,4),xi=new Date(vt.tm_year+1901,0,4),Ln=vn(Jt),Ei=vn(xi),su=xo(new Date(vt.tm_year+1900,0,1),vt.tm_yday);return $t(su,Ln)<0?"53":$t(Ei,su)<=0?"01":(oc=Ln.getFullYear()<vt.tm_year+1900?vt.tm_yday+32-Ln.getDate():vt.tm_yday+1-Ln.getDate(),_t(Math.ceil(oc/7),2))},"%w":function(vt){return new Date(vt.tm_year+1900,vt.tm_mon+1,vt.tm_mday,0,0,0,0).getDay()},"%W":function(vt){var Jt=new Date(vt.tm_year,0,1),xi=1===Jt.getDay()?Jt:xo(Jt,0===Jt.getDay()?1:7-Jt.getDay()+1),Ln=new Date(vt.tm_year+1900,vt.tm_mon,vt.tm_mday);if($t(xi,Ln)<0){var Ei=Mn(Rp(Ln.getFullYear())?If:l_,Ln.getMonth()-1)-31,oc=31-xi.getDate()+Ei+Ln.getDate();return _t(Math.ceil(oc/7),2)}return 0===$t(xi,Jt)?"01":"00"},"%y":function(vt){return(vt.tm_year+1900).toString().substring(2)},"%Y":function(vt){return vt.tm_year+1900},"%z":function(vt){var Jt=vt.tm_gmtoff,xi=Jt>=0;return Jt=(Jt=Math.abs(Jt)/60)/60*100+Jt%60,(xi?"+":"-")+String("0000"+Jt).slice(-4)},"%Z":function(vt){return vt.tm_zone},"%%":function(){return"%"}};for(var Ze in Yo)Ae.indexOf(Ze)>=0&&(Ae=Ae.replace(new RegExp(Ze,"g"),Yo[Ze](be)));var Qr=Ci(Ae,!1);return Qr.length>F?0:(Zt(Qr,S),Qr.length-1)}function hU(S,F,j,se){return Lb(S,F,j,se)}function ru(S){return Ps(11),-1}function Ha(S){var F=Date.now()/1e3|0;return S&&(Xe[S>>2]=F),F}if(Ti=g?function(){var F=process.hrtime();return 1e3*F[0]+F[1]/1e6}:typeof dateNow<"u"?dateNow:"object"==typeof performance&&performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now,J.staticInit(),g){var Fr=Me(29),yP=Me(350);ci.staticInit()}function Ci(S,F,j){var se=j>0?j:ct(S)+1,ue=new Array(se),be=lt(S,ue,0,ue.length);return F&&(ue.length=be),ue}function pU(S,F,j){var se=rc();try{wU(S,F,j)}catch(ue){if(Wo(se),ue!==ue+0&&"longjmp"!==ue)throw ue;jo(1,0)}}var gU={},Ff={abort:Ji,setTempRet0:G,getTempRet0:D,invoke_vii:pU,__Exit:wl,___buildEnvironment:Rf,___clock_gettime:Sb,___cxa_allocate_exception:Jm,___cxa_begin_catch:za,___cxa_current_primary_exception:kb,___cxa_decrement_exception_refcount:Ir,___cxa_end_catch:MM,___cxa_find_matching_catch:iu,___cxa_free_exception:e_,___cxa_increment_exception_refcount:nu,___cxa_pure_virtual:la,___cxa_rethrow:t_,___cxa_rethrow_primary_exception:n_,___cxa_throw:pd,___cxa_uncaught_exception:Ab,___gxx_personality_v0:i_,___lock:gn,___map_file:li,___resumeException:Dp,___setErrNo:Ps,___syscall10:Ob,___syscall140:qi,___syscall145:Db,___syscall146:Yi,___syscall196:Tb,___syscall221:lP,___syscall330:$i,___syscall38:On,___syscall40:Pb,___syscall5:sU,___syscall54:at,___syscall6:r_,___syscall63:Fn,___syscall77:wi,___syscall91:cP,___unlock:aU,___wait:uP,__addDays:xo,__arraySum:Mn,__exit:o_,__isLeapYear:Rp,_abort:Rs,_alarm:dP,_clock:Rb,_clock_gettime:Qm,_difftime:nc,_emscripten_get_heap_size:EM,_emscripten_get_now:Ti,_emscripten_get_now_is_monotonic:Op,_emscripten_memcpy_big:kM,_emscripten_resize_heap:hP,_exit:Pf,_getenv:Tp,_gettimeofday:cU,_gmtime:Mi,_gmtime_r:as,_llvm_exp2_f32:pP,_llvm_exp2_f64:dU,_llvm_log10_f32:gP,_llvm_log10_f64:Nt,_llvm_stackrestore:fU,_llvm_stacksave:Rn,_llvm_trap:s_,_localtime:mP,_localtime_r:Ib,_longjmp:_P,_mktime:a_,_pthread_cond_wait:Fb,_signal:AM,_strftime:Lb,_strftime_l:hU,_system:ru,_time:Ha,_tzset:Pp,abortOnCannotGrowMemory:lU,emscripten_realloc_buffer:fP,tempDoublePtr:Eb,DYNAMICTOP_PTR:an},_i=T.asm(gU,Ff,Tt);T.asm=_i;var ou=T.__ZSt18uncaught_exceptionv=function(){return T.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)},ic=(T.___cxa_can_catch=function(){return T.asm.___cxa_can_catch.apply(null,arguments)},T.___cxa_is_pointer_type=function(){return T.asm.___cxa_is_pointer_type.apply(null,arguments)},T.___errno_location=function(){return T.asm.___errno_location.apply(null,arguments)},T.__get_daylight=function(){return T.asm.__get_daylight.apply(null,arguments)}),bP=(T.__get_environ=function(){return T.asm.__get_environ.apply(null,arguments)},T.__get_timezone=function(){return T.asm.__get_timezone.apply(null,arguments)}),ir=T.__get_tzname=function(){return T.asm.__get_tzname.apply(null,arguments)},u_=(T._emscripten_replace_memory=function(){return T.asm._emscripten_replace_memory.apply(null,arguments)},T._free=function(){return T.asm._free.apply(null,arguments)}),Dn=(T._llvm_bswap_i32=function(){return T.asm._llvm_bswap_i32.apply(null,arguments)},T._malloc=function(){return T.asm._malloc.apply(null,arguments)}),nn=(T._memcpy=function(){return T.asm._memcpy.apply(null,arguments)},T._memmove=function(){return T.asm._memmove.apply(null,arguments)},T._memset=function(){return T.asm._memset.apply(null,arguments)}),jo=(T._pthread_cond_broadcast=function(){return T.asm._pthread_cond_broadcast.apply(null,arguments)},T._realloc=function(){return T.asm._realloc.apply(null,arguments)},T._run=function(){return T.asm._run.apply(null,arguments)},T._saveSetjmp=function(){return T.asm._saveSetjmp.apply(null,arguments)},T._sbrk=function(){return T.asm._sbrk.apply(null,arguments)},T._setThrew=function(){return T.asm._setThrew.apply(null,arguments)}),Bn=(T._testSetjmp=function(){return T.asm._testSetjmp.apply(null,arguments)},T.establishStackSpace=function(){return T.asm.establishStackSpace.apply(null,arguments)},T.globalCtors=function(){return T.asm.globalCtors.apply(null,arguments)}),Qi=T.stackAlloc=function(){return T.asm.stackAlloc.apply(null,arguments)},Wo=T.stackRestore=function(){return T.asm.stackRestore.apply(null,arguments)},rc=T.stackSave=function(){return T.asm.stackSave.apply(null,arguments)},xP=(T.dynCall_di=function(){return T.asm.dynCall_di.apply(null,arguments)},T.dynCall_didi=function(){return T.asm.dynCall_didi.apply(null,arguments)},T.dynCall_diii=function(){return T.asm.dynCall_diii.apply(null,arguments)},T.dynCall_dij=function(){return T.asm.dynCall_dij.apply(null,arguments)},T.dynCall_ii=function(){return T.asm.dynCall_ii.apply(null,arguments)},T.dynCall_iid=function(){return T.asm.dynCall_iid.apply(null,arguments)},T.dynCall_iidiiii=function(){return T.asm.dynCall_iidiiii.apply(null,arguments)},T.dynCall_iii=function(){return T.asm.dynCall_iii.apply(null,arguments)},T.dynCall_iiii=function(){return T.asm.dynCall_iiii.apply(null,arguments)},T.dynCall_iiiid=function(){return T.asm.dynCall_iiiid.apply(null,arguments)},T.dynCall_iiiii=function(){return T.asm.dynCall_iiiii.apply(null,arguments)},T.dynCall_iiiiid=function(){return T.asm.dynCall_iiiiid.apply(null,arguments)},T.dynCall_iiiiii=function(){return T.asm.dynCall_iiiiii.apply(null,arguments)},T.dynCall_iiiiiid=function(){return T.asm.dynCall_iiiiiid.apply(null,arguments)},T.dynCall_iiiiiii=function(){return T.asm.dynCall_iiiiiii.apply(null,arguments)},T.dynCall_iiiiiiii=function(){return T.asm.dynCall_iiiiiiii.apply(null,arguments)},T.dynCall_iiiiiiiii=function(){return T.asm.dynCall_iiiiiiiii.apply(null,arguments)},T.dynCall_iiiiij=function(){return T.asm.dynCall_iiiiij.apply(null,arguments)},T.dynCall_iij=function(){return T.asm.dynCall_iij.apply(null,arguments)},T.dynCall_iiji=function(){return T.asm.dynCall_iiji.apply(null,arguments)},T.dynCall_iijii=function(){return T.asm.dynCall_iijii.apply(null,arguments)},T.dynCall_iijj=function(){return T.asm.dynCall_iijj.apply(null,arguments)},T.dynCall_ijii=function(){return T.asm.dynCall_ijii.apply(null,arguments)},T.dynCall_ijiii=function(){return T.asm.dynCall_ijiii.apply(null,arguments)},T.dynCall_ijiiii=function(){return T.asm.dynCall_ijiiii.apply(null,arguments)},T.dynCall_ji=function(){return T.asm.dynCall_ji.apply(null,arguments)},T.dynCall_jii=function(){return T.asm.dynCall_jii.apply(null,arguments)},T.dynCall_jiii=function(){return T.asm.dynCall_jiii.apply(null,arguments)},T.dynCall_jij=function(){return T.asm.dynCall_jij.apply(null,arguments)},T.dynCall_jiji=function(){return T.asm.dynCall_jiji.apply(null,arguments)},T.dynCall_jijii=function(){return T.asm.dynCall_jijii.apply(null,arguments)},T.dynCall_v=function(){return T.asm.dynCall_v.apply(null,arguments)},T.dynCall_vi=function(){return T.asm.dynCall_vi.apply(null,arguments)}),wU=T.dynCall_vii=function(){return T.asm.dynCall_vii.apply(null,arguments)};function g_(S){this.name="ExitStatus",this.message="Program terminated with exit("+S+")",this.status=S}function IM(S){function F(){T.calledRun||(T.calledRun=!0,!fe&&(Ep(),Cb(),T.onRuntimeInitialized&&T.onRuntimeInitialized(),Ym()))}S=S||T.arguments,Vo>0||(qm(),Vo>0)||T.calledRun||(T.setStatus?(T.setStatus("Running..."),setTimeout(function(){setTimeout(function(){T.setStatus("")},1),F()},1)):F())}function xU(S,F){F&&T.noExitRuntime&&0===S||(T.noExitRuntime||(fe=!0,T.onExit&&T.onExit(S)),T.quit(S,new g_(S)))}function Ji(S){throw T.onAbort&&T.onAbort(S),void 0!==S?(x(S),A(S),S=JSON.stringify(S)):S="",fe=!0,"abort("+S+"). Build with -s ASSERTIONS=1 for more info."}if(T.dynCall_viii=function(){return T.asm.dynCall_viii.apply(null,arguments)},T.dynCall_viiii=function(){return T.asm.dynCall_viiii.apply(null,arguments)},T.dynCall_viiiii=function(){return T.asm.dynCall_viiiii.apply(null,arguments)},T.dynCall_viiiiii=function(){return T.asm.dynCall_viiiiii.apply(null,arguments)},T.dynCall_viiiiiii=function(){return T.asm.dynCall_viiiiiii.apply(null,arguments)},T.dynCall_viijii=function(){return T.asm.dynCall_viijii.apply(null,arguments)},T.dynCall_vijd=function(){return T.asm.dynCall_vijd.apply(null,arguments)},T.asm=_i,T.ccall=Ce,T.then=function(S){if(T.calledRun)S(T);else{var F=T.onRuntimeInitialized;T.onRuntimeInitialized=function(){F&&F(),S(T)}}return T},(g_.prototype=new Error).constructor=g_,bl=function S(){T.calledRun||IM(),T.calledRun||(bl=S)},T.run=IM,T.abort=Ji,T.preInit)for("function"==typeof T.preInit&&(T.preInit=[T.preInit]);T.preInit.length>0;)T.preInit.pop()();return T.noExitRuntime=!0,IM(),T});pn.exports=Q},50:()=>{},29:()=>{},350:()=>{},564:pn=>{"use strict";var Ue=/("(?:[^\\"]|\\.)*")|[:,]/g;pn.exports=function(Q,ie){var xe,T,re;return ie=ie||{},xe=JSON.stringify([1],void 0,void 0===ie.indent?2:ie.indent).slice(2,-3),T=""===xe?1/0:void 0===ie.maxLength?80:ie.maxLength,re=ie.replacer,function B(E,M,g){var m,_,p,v,w,x,A,R,U,L,W,H;if(E&&"function"==typeof E.toJSON&&(E=E.toJSON()),void 0===(W=JSON.stringify(E,re)))return W;if(W.length<=(A=T-M.length-g)&&(U=W.replace(Ue,function(P,$){return $||P+" "})).length<=A)return U;if(null!=re&&(E=JSON.parse(W),re=void 0),"object"==typeof E&&null!==E){if(R=M+xe,p=[],_=0,Array.isArray(E))for(L="[",m="]",A=E.length;_<A;_++)p.push(B(E[_],R,_===A-1?0:1)||"null");else for(L="{",m="}",A=(x=Object.keys(E)).length;_<A;_++)v=x[_],w=JSON.stringify(v)+": ",void 0!==(H=B(E[v],R,w.length+(_===A-1?0:1)))&&p.push(w+H);if(p.length>0)return[L,xe+p.join(",\n"+R),m].join("\n"+M)}return W}(Q,"",0)}}},pn=>{pn(pn.s=881)}]);